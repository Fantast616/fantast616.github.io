<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Javaç»˜å›¾æœºåˆ¶ä¸äº‹ä»¶å¤„ç†æœºåˆ¶</title>
    <url>/2022/04/01/9d060fe0d5ae/</url>
    <content><![CDATA[<h4 id="ä¸€ç»˜å›¾æœºåˆ¶">ä¸€ã€ç»˜å›¾æœºåˆ¶ï¼š</h4>
<p>â€‹ é¢æ¿ JPanel å’Œ çª—å£ JFrame</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyPanel</span> <span class="keyword">extends</span> <span class="title class_">JPanel</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">paint</span><span class="params">(Graphics g)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>.paint(g);</span><br><span class="line">        g.drawOval(<span class="number">10</span>,<span class="number">10</span>,<span class="number">100</span>,<span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å½“JFrameçª—å£æœ€å¤§åŒ–ã€æœ€å°åŒ–ã€å°ºå¯¸å‘ç”Ÿå˜åŒ–æ—¶éƒ½ä¼šé‡æ–°è°ƒç”¨paintå‡½æ•°</span></span><br><span class="line"><span class="comment">//å½“è°ƒç”¨repaintå‡½æ•°æ—¶ï¼Œä¼šé‡æ–°è°ƒç”¨paintå‡½æ•°</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DrawMap</span> <span class="keyword">extends</span> <span class="title class_">JFrame</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">MyPanel</span> <span class="variable">myPanel</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyPanel</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">var</span> <span class="variable">drawMap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DrawMap</span>();</span><br><span class="line">        drawMap.DrawCircle();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">DrawCircle</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//æŠŠé¢æ¿æ”¾åˆ°çª—å£å†…</span></span><br><span class="line">        <span class="built_in">this</span>.add(myPanel);</span><br><span class="line">        <span class="comment">//è®¾ç½®çª—å£çš„å¤§å°</span></span><br><span class="line">        <span class="built_in">this</span>.setSize(<span class="number">400</span>,<span class="number">300</span>);</span><br><span class="line">        <span class="built_in">this</span>.setVisible(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="äºŒäº‹ä»¶å¤„ç†æœºåˆ¶">äºŒã€äº‹ä»¶å¤„ç†æœºåˆ¶ï¼š</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GameMap</span> <span class="keyword">extends</span> <span class="title class_">JPanel</span> <span class="keyword">implements</span> <span class="title class_">KeyListener</span> &#123;</span><br><span class="line">	<span class="comment">//æŸä¸ªç±»å®ç°äº†KeyListeneræ¥å£ï¼Œå…¶éœ€è¦å®ç°ä¸‰ä¸ªæ¥å£</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">keyTyped</span><span class="params">(KeyEvent e)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">keyPressed</span><span class="params">(KeyEvent e)</span> &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">keyReleased</span><span class="params">(KeyEvent e)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç»™JFrameç±»æ·»åŠ äº‹ä»¶ç›‘å¬å™¨å³å¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TankGameWindow</span> <span class="keyword">extends</span> <span class="title class_">JFrame</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">GameMap</span> <span class="variable">gameMap</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TankGameWindow</span><span class="params">()</span>&#123;</span><br><span class="line">        gameMap = <span class="keyword">new</span> <span class="title class_">GameMap</span>();</span><br><span class="line">        <span class="built_in">this</span>.add(gameMap);</span><br><span class="line">        <span class="built_in">this</span>.setSize(<span class="number">1000</span>,<span class="number">750</span>);</span><br><span class="line">        <span class="built_in">this</span>.addKeyListener(gameMap);</span><br><span class="line">        <span class="built_in">this</span>.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        <span class="built_in">this</span>.setVisible(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‡ ä¸ªé‡è¦æ¦‚å¿µï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220809163829929.png" style="zoom:67%;" /></p>
<ul>
<li>äº‹ä»¶æºï¼šäº§ç”Ÿäº‹ä»¶çš„å¯¹è±¡ï¼Œæ¯”å¦‚æŒ‰é’®ã€çª—å£</li>
<li>äº‹ä»¶ï¼šæ‰¿è½½ äº‹ä»¶æº
çŠ¶æ€æ”¹å˜æ—¶çš„å¯¹è±¡ï¼Œæ¯”å¦‚KeyEventã€MouseEventå¯¹è±¡ç­‰ç­‰</li>
<li>äº‹ä»¶ç›‘å¬æ¥å£ï¼š
<ul>
<li>ï¼ˆ1ï¼‰å½“äº‹ä»¶æºäº§ç”Ÿä¸€ä¸ªäº‹ä»¶ï¼Œå¯ä»¥ä¼ é€ç»™äº‹ä»¶ç›‘å¬è€…å¤„ç†</li>
<li>ï¼ˆ2ï¼‰äº‹ä»¶ç›‘å¬è€…å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªç±»ï¼Œè¯¥ç±»å®ç°äº†æŸä¸ªäº‹ä»¶ç›‘å¬å™¨æ¥å£ã€‚æ¯”å¦‚ä¸Šè¿°å®ç°äº†KeyListeneræ¥å£çš„GameMapç±»ï¼Œå®ƒå°±å¯ä»¥ä½œä¸ºä¸€ä¸ªäº‹ä»¶ç›‘å¬è€…ï¼Œå¯¹æ¥å—åˆ°çš„äº‹ä»¶è¿›è¡Œå¤„ç†</li>
<li>ï¼ˆ3ï¼‰äº‹ä»¶ç›‘å¬å™¨æ¥å£æœ‰å¤šç§ï¼Œä¸åŒçš„äº‹ä»¶ç›‘å¬å™¨æ¥å£å¯ä»¥ç›‘å¬ä¸åŒçš„äº‹ä»¶ï¼Œ<strong>ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªç›‘å¬æ¥å£ã€‚</strong></li>
</ul></li>
</ul>
]]></content>
      <categories>
        <category>â“ª é¡¹ç›®ç¬”è®°</category>
        <category>javaé¡¹ç›®</category>
      </categories>
      <tags>
        <tag>JPanel</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå®ç°å¤šäººå®æ—¶é€šä¿¡ç³»ç»Ÿ</title>
    <url>/2022/08/14/4cdc462e541f/</url>
    <content><![CDATA[<h3 id="ä¸€æ¶æ„ä½“ç³»">ä¸€ã€æ¶æ„ä½“ç³»</h3>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220814172432459.png" /></p>
]]></content>
      <categories>
        <category>â“ª é¡¹ç›®ç¬”è®°</category>
        <category>javaé¡¹ç›®</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>å­—ä½“ç”Ÿæˆè®ºæ–‡ç ”ç©¶è¿›åº¦</title>
    <url>/2022/04/01/f225f383e158/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="f490f6d4eff128b6f8c23e395e0b13f44dd14e197fc50f16d44b6fec836d5931">1557a4d06c41b8b7cb942a6d0525c027cbeeadc10caf98a45705387558304bb469290ed727bac22c14368bef657fb469dfaa63f24918c0cff3b2760cd4c7e41d903d1a82d66af59312cac4cac46cf8eb876b40a6bca879a6bb5005f2de6cb7700621bad9f290d26f23d98ad7d10aad36bec4e6306e0626ed5b58ff9d6c87b6b9fb9358b7c8663eb4e3f6b73813f33f206cb37ad8174d4a8dec552525d1b17d29a7ff9a69af1c0464d7be2cd47663a8511470a8a9ecf52a3eea3d24def5ef2b867aabfebd01f658d97f48cb62241de8f7a8c19ea8bc92d6c680ec59bc38b048d425d487212984d3aa9277e8bafa990fdb34d8a30bc941854858dcbd2c49e5f28f21e8ba546f2f0da3365f940432813ee29c950135eadb5b7ed325594771d8ec8a9d1f3ad8cf5cc9eae23197303a55f47176df2e97551922502deccc82ba3a0d0fa712a9261862f2788aace95a046bffc7cce1f66e50a2c6021f4cfc9cd90935fbb6ec3c290ffa4add6317fab63a83f5691b98f8d19efca83ec4ffbd8614b8e7ac3a4260a007377813591b13e3737b007a82ef659ab4845a4799af73318bfedd75e021f0cee0157996154ee0b0d89a5481f558e1ea747d3de2bffa3166672fac1271864c41d9dbc04032d309ab8a8324d0df005f78c8f05a18e52d005529009028238e2e96252ca2ef67df0c8bb09b9894362b07c22ed169e86ba234b046d063a31a0dc8f90ad0cd26dc956e5280d31639778338271930a6aa2a2a4fcc6fe161b45a9a85fd07125410a1633279d8c785ab1913ad30f45a18498b3fb2829dd6f067a17c541be12a01e37c08c82707915cbfb4e002bf5025e5d81f5fa08ce6bf18c3184420ff1921e17f4126b1f10ebc8e7395006f2a552f0c0c37ef4b17c2138b950e4574c440a94e9bd4e400277723250738f15e2d9bbf5e2116f22848e8102dc33ac5d504f10f4a7f3d18f2687064f51f963e819f143fdf829a9d4db46e025d1d774c60ec1e91eca7e55241e8fe4fb65bb309cfa0f612aa9422a90d9ac32ece2d4ba42db909f0efd04c39637eb5e351870d5f1d12e57dda4f141f9f11058392e3f5f378451f43884cceaf6e78ec090bbf3eaf9f919ecc6d0d84b01f1be6501f387c8daacebaa9c608e9bcabc8790e3c1cb980add9e6fb12430856ede148fd91c08f7485709962926e803d404c3c7a7f38fd0ef69e9c4a32f491d49234a74432572a5090c296002c73df41a4ed7bcfd4bc6d23ba76427aa950f5128a0455186d99b9a09cf6789e31f76f8938a95d8e861be3b1f051b1af3a674a08677aa18071301825dcfb11697eae002fa97923a9ee69ad49ab4b3ba810ade6c531b4a79f4c0befa976492d07ded5cb76ace66549c6c40f7e4927fe047273209af3269d43d4905b4c271ce055d131103b7bc6bb7fe95d94f338b1e2a31a90e512eb78fbfe8469b69718a88307a747af389488f2d91fd56813772a3e6c47de32f4ae1e0fe965f791663fa3173d62c91644df73790f4ff69fba0170822a1ef6cb002f7e2a1179ec3c6ac8fb8f138ad559c2ffb4938d0a710d78d62ebb23944ae7255d6a6a3eecf42d65a95f6adb81f85952df61009dfc7477c9fe7228478a902c5fc3ddcb883dd4975a19f59ad4bf0b1ef764536efeecc05dcf770806e90809f6698e4575294da06eb572d6c224c03a0711d84ed672dde635e459697ba656dac1ba45a831f42bb618e0b8fec82eb048869dc25e32748d1cbd62069b10b52ea4a07640142bb989a33eadf9672c17a80e88328d20704a54fc7a2714c339717b286d7981e643ec7d4b6cc15c2e071390341a281de9143f1e24a1ba629221a707b69c80a2ca9f094c7d9ac03335d7e218eefe70f727e2722b8fb97393e0f9a6353fdb707beafa0f757512e806cc385fdcbb7a6bad6d0dde17bf69fe942694ead75e3fef7d1128d59bba906687e0fa41d2c5adda355b8beaab883286c47ad6a7935b4d036c683a27e003c07a6c671a4b5bf4ab53186d38e6b33062a44d06bad09cbc1fabe988b57e55f879cfc52a48a3122b85aa3cbdeb48fcdaaf94296cbc36c01e36baa2fe7f949bef7d33fa5ef3c4d389b202f0838b69bc5d0ed3f1394795785c66cd0a747454f5a1399b9d92c8f99a77cf57d076a26926921ff5c8197a4a885243cb34ce767b60e9f245801b12f26031a04fe4328d2797c2cf89401fd2175cd14c67aabbbd136babd04d29aa82d8ca0d1cafe077dad0cdf3388733c9ee25d4b35b64bba9e08d8c8ba76794d1fdaeb04698e65ca41db67949d35d2c397123ffc1952a230ab01eaab37b123d12c3b4ea86e1a35148bdd509196a1b11b94f7abc212664e048b6973f6bb0017907e7efbb27541b4d2e1d716e04bc604babb71480d50734739670e3223ccbcaa4262d018c9b95d0a836dc8fd0671aa9adbc636dccdf1a9900c72273a3e1c515a4388028aeafc9a40c278ba0412abf4015a3b12974704e0a2fe7c3cbb7ec3fc4daf29c429127f91fc7b7f506a0270cbdd3c58b07a637ddabc02b9221ed0ea1c8f0810fdd468017f05a24345cd00a3ba386fa7b8c518d992cf3aaf8a79f19a2ed8608c07d06f753c99c9aa3aa3533cf953e77c7bf1a618e2f27312484a43e066ee4bfe2d466bc6f4f8edab0c0ef1dbbc67ac4567d0d0caba0d28016e3ed175c99760f18ef52da6b4439ce583a602f770519a0e5b51afadd40555fafaa5ce1fca1fcad4719415e24768a8f20e499df0ae6470725b9eff2620b05c9e6e9ea3f5ebaf0ce68f61a7d490055fe37751d95d68377ab85ebc1d0a7fd7b442cb6072ceb86c0924a05b543e812d2e8e4f356401d7159fc7a21ac96260f4ae955820bca21c4acb3fdae05d173dace8314e19951f6f124fe423f91024cdf37d0e204543a3091c59d33fbdbda6c8972ac935b64eaba4fd416b03c03ba1dc8c55b8c11ecbc13d7fe7d0291e791da4f296d6e1d88a9ac411003fac452f1b46d269896cebb2c509719309ff7709c2cd9af21c774e3c9f08fb35395b94b26425fb5e45bf3e2c8280650041dffadffb2c34c5ed0e524f1dc9aa40fce6e468410537ba94cee8bcfbcbf0353f5a762a834ee2bb5c0e9a5c4dd8c917a847435444d4f9d33079bb6734eb4a98e22ad71346eec0132955e314951125e75f7103b7c3ef355592ad38c19a7c315215ac4b8be62211e9de5861e2d1dcee6a51090401dcdcb4099624335e58169a57268cfcb4d2f41e1dfa88f39c75b1695c70ae4fd6050beb6302eebaeb6d6a803830336ee92e95d2ce4e7a8b9b7aa5dd47bb6407ad3e36950c100aede82aebf699f08f70b62e1dfa50b01396f2be85393aa07852c093d7b69fa4862ce0ef60329ec0fcd416de1b9d479d7aa332de7dc01b474368e84d60f39161fc67f2b07f61b04be956424c8e451dad46365faafb4465f8d451e62d3fe766dfb221f1a70980d5758f476eef24ac1f8d2caac580b408f2171575e698c2fd12e466fc7d45cb653cebf8799ceb658e0dbf40bef8edc696a809d141f2b75348d04bab8aa089ff4248f83fd0779926e912ad6c82f6b0af284bc2cd9e11b54b429c868e90c07e73a6bd619916c9bc2e327868dd10a301093aee43d806daf59c6b8e7043afcf7cfdd3fa7ae79aad1b622e9bfb108e3a455828c2c2fec2104101521cee7d2475a55000b6d5c22054c591774eb3aae62e1db8707002ee75677a33b1d7f7a885a97311eceff5ef2cbdd7698da1e3c2fac51c933f96209442681db84800ee1d89ea7377c46c09e7daac64a025245fa6a595caf6d1929c1327f6467cc213fb500a3f68a35122feeb20bac0a103e4796e5dfb8be3735404e07d57f21e1348fe0d9c33509a6478ae6633e103ca91feacf073a3205b225347e66865afc10a701835c36f32300e7161c2994ab08de939bd5de7ab73b941d19c5fd8c09dfbf691bc63d2170d6906b84a0a8db17e19f4773d9ca159bcaf99eb65437489c4e700eda4d245f560522c07562701efd7c8e2e32f45babe30163086d26d47b39ac7e85626c206bc4237dfac9429ed9a86ab5d003ac6f72a4aa60275fc0e48421d9bf4a463b12ee7f177c2e24daf3b328674371add4a53541779ba630c65e9f9fffb20ca8ce56971110d7754ac06047715efc3686d26fe48f012fd58124b6d6df9ec48cde85e88186377aac90aa5127e8f713f6184b71ee8e4a292937f16f080beaefe3361bd75f5c388f7a38e78fbd4b02e1b29801f11145f9de4d3dbbd7755c69b6eddd0fce30fc4340b92632823672bc9e1487f20b709951f45df5d16177c7c4650d0d1c515d6aff984b4971bc82d6ad77e51e75e825b58b5d11aa8a0b3dda15bb83f31fd2e4e7510de5430181fece3add3b5eeb4933b3c3a3791a741a9f722104336308b335786f9fbf9b3f723eca78ead99c66989a6d670c4f1b258f8ac919a7f94d4c363e02d0416a0ae22fefde72d4735d0b80b8e8aa83644987f13c80ecfabd0ed22fa069f7acb2a83a24cedfafccaf394b9cf4c9b03ac2feb7031632e9fbb30b940ba4a0e2de53004caab755c9534e723b4cc6bcc60e54ad911b442d8b9c9a4a8f6763a9f081243659b47a24cc6338390d23946ee0164b30967142610116332f56cde7db6f2daeacb12c30c038bdb5237f3f9c42eb7dd663fa087736f22fdf05080ffa45fe5fb9c615ae00bbf09eb2510eb373a699e5f5962547d949689862216c4192b6ae6031ef9fd3aa371e9ca9a3295689c25e5fb79b99d346f6da797d002e75b3cdc00c57575d223f34bf68f08e7ab2eb4008c979f6383c9d477fb9a3e1ab53d13a91daa2f19a38e9fc0e12aa2a5df9c22d78b22a889184f0401b192f826ce9310b8c68a5598971c12eeabbc295b4d4453de6831141f45d571f5921b3f85079746c5155d3a35cc42a5fe4cc6977e840d6be74b53319b045596bcf749eed8da82be7f1c6f936c5de1b23f465e90d214b69041f532bd1dd88a43c4fcaa3008bfe9851b718fdaefb3e13250e68eeffcf81db7d34bb8f70fb9ffa88dff8e16ab79f8e1034c067123bc9fb66d14d6bf46afe66a0f450d5423746e937ed07bca09c57ba91ec9c5e5815bc5c8a32ea1db6c302a35facfb8bdc6b862e71d65636cefa270d95fa347c9823be59a0c9417f60d2ed67b8785f856ea2d9e048aa7268902e11598fda3bcd39f52adbcd44e268390bcf9973cb8b944fd1960b577687c5b4e86a2997f3e619715e007d9ab31dd677c4281c664ce7b5469f06e28e856f22ef62cfe95302a40fe42a16f666796e4e770901f21d721d63638b9f45c2313e20e0ac139157d80cf580afa4496f20fe85fc426cf8705f4be4919090758c3325de703e9d0081bbf50d2afbe83543b93c195e07def8f34776d11fb0c756ef40ede73663a12368fb3f1c4e55421fa946b797d882d273274ba821d71a6f93ecbc03aed844915bcd8aafa216a4726adc56a755251d806f7f83c4206ecb932cf420e5cd7bc7389e6854c8b015d71cef2b8a40ab49c471299fb802ff6e9b7c8430a07d90a77a920d501a09e9caba863221e29cb1e7231949327e29e907636f3d157108f4908a12b026dce46a1da809d45fdbf270b59e184d8628df5ce958b3adba4fae387965e478bcbab63a1421b7df5754fc27b5cc14646264d4ddffb063828e7e25bfdf83c581d58dd74788773ca428698b5d6fd46262d2f02555a14bac6a4ee60dc727713b5f85ebec1d23910f39ea85feaa7b7e6ab13f9dab626ad218f027fe2b43c5cdcbf53f6898b644bf13cad3d3bd7c14656660f0d327c052f012871e9c6bf41dc8457653df9ffcb0c26a696a8feb3c0a9952ddd025cde585204166ad2669f91c6a0a937c8562585b9003924622f7d2bc317389dc3ddec19c8980cc2e59d821ddba53615f061d262678b7b7713f52ea40ef12e4fe0ee5a9a338d66d6440c50c7eb13379ac3580da2574dd9fab111273ee68c1ac56b598cefdb154c1c4e78e00a7aa82b317883a5a6e689fd071b734b6c482b1dcfb190de4819724acf30499c192fc908c5721072b908635d509a5966c399809329acc0727066ab852eb2db99af278c804b3a4548374accabe91274035d7f15d46f8f76b16f9c4ef167c24042490da7fe0d3f6ee446976b118279397627ed23d5995aad439f7f5e1993f3f15e9c8bace901a6f7dcd62075705385653bf17476b369618af5a94c9e290fca4bf9fa0562a616bd1f515a0935bb9f102fa600629d195e85c45e1dcafabc243e295665f510bcf862a1f34fe24ec7f66cc1c5ed3a1001f042b0860fea84e0ce9e4397137ee8c1d174224d2dbb1343b7e9073821e3f3d296d4bfe4f760447631f6c36cbe35bc3571687572ad714d350bc6a4d850c8b229534f643b18079ab04f609daac0d626a3469b6f53fb36e1bf6fb9edba4f7759ef47108820e61ad2139ac5abebe02d143aee1aac859eb14b85d626ee563148799fbe718038e042a0bcacdc9f807c537e0f4998f30cc0cf89fed226e07964fb29ce934ebdcec140b9f7b05cce7d5c6a607e1a3d4919e572fe58874552607440919d5a4fd88d4f86ceb9297396da5945c558c9f7750b7ec161461cec373dcc2eb32ff3f50fe7556d4fc76b343340e04602142bd528b3133cf43ad5b284f27b69689c539642382163e59cfde59a816e68d1d26cf9cd9a79ef7b8dc2a6d42a39d6c13aa76620da6740bfc9bec628108a357576b397ed1fca004a6f9d73290b1cdfcff2fc60089dc6142a45e1aeb49e8c816a368156e10179cec538ef0ae075c2cda37644f59134e259da190cd1faee883136451af3c09869c47bf92fc20082f249a45a51cd2e06828b6b19c0bf5cc9cd31513b0cf8550f4663290c29a34c3340779df57a029784e443d0d83ecbe9b02ae27ed3ac8348ffc2ad0d6eb84ad5d3ec25c86d633913847b92d670d868a64526ffd2515dc88537f490558d11204bb6f212dad15d4d5c03891c3ef00861e44296410cb23e7b1fc01348557ca64d87cc840ca74fba4cd07f1f412eb85bad3033cc3631f6cbf81d7667200003767784947a38d0351bbc85dd08f8bddcc992d3a10ca8abba0c0f7b152e2ea35ee4bb1484338037a29ff9e00bc8fc8fe91949c23f759849675f8e95e7eb777da28c3600d8c322dd3e1323dfe13deac921e38053436260001746a5f67dc92fa29ddd5c9b34a83cd12008bfe0f1f0e7757f8ffc768fc3c4a01d00df7367ae93915596b1a7415403f0e84274454d2930edb66a303bdb10fabf7be9a8d5c3642e80236b49c5119740896226fc7518bc198fad8be3b031a0237599f821a060d07c668ad23073c4ebea6329e640b073a571c2991666b63a79ff019570c2c0b14c6afc336d992349894cca1db80e46204756d7d301e86d66f682e0d899607c5afdd8631ca51c941c2dd71348da367cbee6386cb27ef982731c92a72cad6ed6199f49ef7d65da85999695783ee29bc427f93cf15646eb6ed8d453aa193591e32bd861e7fac62265993eb5c8087132e3d8bea229f066841bf3ede3015695e0216d17ae0eada638d28e11bb5f76fe0da18809bfe83f21061ddcaa3b9835a1fa16d8d5ab9441ec3bbd64b22b36581b15525100f79e86e2217ab24505168b6710f7b1c4680b76a769de32aa6306c19a721a83b6df9f6690a8b43d25f491110259de1717a01db232c8bd56b36b5985923d3f5682db9b484cee9432f32d75fe8425ea0aa476ece0986d3755dbd475f95b15600b6bdd18e414e865bd952ca7e9d1032b774d0f0613905c016f906371784e0e4d48b39a7068aeb70ef5cd5c30c86756ccd01bdfb1ef076a6e76bf46888cc6e7eab8f10f26139f9abfd2cdd3a08fae5db925df506c9b30d0e7f8d10845debf4e9bdd4c9617fead37bab5d6cdabfc86893a3e0fe373de13860318f5e711f87a5168b09b6b630f9babe385e34a4822f48a1492841ff914a188052e5a26e2c0d3714fb7412390900d7036f4cd7cd2a017f4db9c2d5c5b224685d868c94e37f5352f7c17b14eb7bfc2ad380ac75f1a9d47038086cebd8b363107348251dd80c5baab6ce35bac1231949a43f7ac5b8aa9974ef49f8f728b464d8e948bc7a51349d0d79ce82b7457b15b626e3f483ce11453de74be0d9e68054321b537b57bd9b941854ae7e6171ceb4fb860f33dd478a0f23c4e57f8db51ee5d26b50164e696a842170998a6e401914b833e494b284d14afe73f2023be88b18e5c980fa4f4fa837134f582ea850d4d354a33da91d5d576eb17a2f00e4eb06e0847856ae845b64e200737b44a63c82d595e7c9673385f0cbfba514e73335e45bdf9de3a303d9087be57a7fdfa26f66197381eb977bf2f3e0538bb82e83137eb0b3003ae9e7ab65fa75611985ffcb8c5c18b5e920b89cc9745aa17f62c0b530390820d0bc2d70173bcba06443abbe645d320b3c3e57c0aaace8e0d1d0889791091ad7103cc6506f79142064cda2c34e1e89f8b141cfc812f03b71c89c686d2c2ac432ba11f3811e4e18b188b099d843e6e2c21d99bed95e5ddd12b51df0e84ecf8a5a9b0be4e0315bf702783d32283d28798846c15586a473268e8c61ca0f598190780c2c0b7d5db3e4b1fef37dd1a619979dc1ba9411f1f7867df2cc952f4925aab542d1bec25c3498d4618e141611daf17f0bfec0ebca2c3fe3a41d484fe198d6f13fdf1f6ad921d8257f6ea26a02cd8759e8be76aaa285b428a001a254b36dfeac65aa0b30798decccaa5983c8bfe2deaf163a6d1be4d8bfbb27a283d1a1331a979e4cdf9b216b1f82597c0cbaea4aeb5e3d062ece79e9ddd76040c02c7e0c0af4c091ff0d9056d46ce6b40e7730f9f151bab2fb7c8773a1160164d4b512748b5e0866c6b68ac494cb833506e7e2d7722315133fff8295841e1c672d5b18cc775c0be4605358ba1bfcfeef5d69de194ec9c9082e22e6c7ea9c168844d12f734f02080ecafb0d8a5446ec1661c9a80fc72829322c626df2d55c46355d958d1ded286c4cf163549c0fb5e9a9396dcd7eb857047538acdeaf4a4862a4994e38697664b31baa24861f7822c68e1f97d1f880d0308959f1605fed18589f412edd6c0e7fe0912d73337c4467fe4d299bc40efc863ef29666c2e1b094eafc88788b63a51ad5080013fe9b9922486ec3408dabb6aebc95291d8dee2bc120406161076049ddb71a3b87c7dd0b5e32c054ef38c73c3fdfc730d17062a2baaef8fdf19c15f0a5affda581cb0e07d39ce15f242bdff89ef539b69cefc691dae5259a2364dea76353298453e8751bf6193a0de6e0a6b0c678bece9ee54518c3d30ebe95c1df456101c9d52d149310f41bc2587584d102492d4864a6df55b60a2264602d30d02740edabb574b93b4c7ab23f0c30c89e60829972d663ae7b493726a15419b88a4812817de34ff4561b70638c909ec55debf03180f76564e807be3005f1a472477dd02062bef43d96cc9867dc1f2fd445b4d74d6901bccbc6d03f71eb88bc0a97055a9fdc796d25185083174d673420a1fed53642cc055878ec2059015fb8678ea9dfd4445f26d71fd529282e73880999058de5050258974c1f6949a66006f78dde2a097c3eb9c1ac863ef683662f77bb0a53677d87af675d2d93057c93233bcfb1b54f2eb5a7b432d30bf4b71af6833064c1d9381e58f50cfe334c31653bfffd099d84a37d5e544836fbe7e2bc19dbad13d3f7dad18e31f7e295f2ceac01fa39180dbf817b15efad01379a4bd6e81470b85a04862b48755e4f1d6c959b6d94114f27ebe0e24fcf8d3e40ff5da01b3b72a3d2d2d8a7ffbc4aeb5331d0d3684f8be5d4d48316026f45df634b8938c336799c27023833d67ed9363afc3dbdf3db0593a10b00cf24055d0348623540be1c30ffbbd43e9cb7f50d8605e44231c64df2a0b518a8a3110e908b53edbf83bdbd32c4e128d5fed12a2bee6220f0faaa0ec5f07c65edc6a88fe5fa5c5bc7f1ecbb0f362298b72facb48adb83c3d8d707ec3fc7883d6ab5f50b6d022555cdf3782c4b71718925e722f779e069b010a41437e6f85651ff5e8d3b8adbfa6606afac8966dce53909d08047034eff0fb8b03ed275b349f6e31667302ac4b4e1904f89374a1b4da0b8bb51806be747e13fb89b69d8f4cf1e8db8484233d3505a8dcb17a09f08354ecb2bf7e9abf243ac4a573545cddb60126260cdca26f4343e87a56a8c5ce95ddc7ba8f3c4690d3d0eaa4963aecce8fe4b2ecb740ea8ed140186040380d51ca7bf146405e7c20298468b66868c8c54bdc4ef20d5f930f512e20cfde7336608c54c094a4b26168fce225551305e53124cffdea17af778e5c91bfee4f54ffa3904dba95e12e2ab3410e2efc94f04919f322d57ada05f1766aba019df8dde45174f555df82dfd577d6bf1d0156361685934d5db47781ec306d21133bb804d681a6b8a59072c274d65931cffa1b580d7a28140a4248f8470e4fc4336c83deaa752eb4a71fd8fe541fc31f5f01aa00e0657c75989a4767a69f17d06229f5b2cea466c8a38d46c5000a24869c519decff81c1b6e96ad448000746e294bcde4d2e3fd5dbc28eca3d09c7a7a73ba2fea7be3f7d0c17a13de552af929df3d0fea29b75bc3b1a4c6146289df0c52a97f9b3e552a417a5ec88ac5067dfe368e457a004c35036a617da6f3434003905551fff6d77336b813b2af4b90f792ad486373403b0c80459dc29f5911ca89e940b15d7cc20b72c9e12dc4fcd0a258d8ff89bf75257fc0f9dbdaea4e4c8dfa776becbdbdc64b09a915b18d6960ad54e78238cba555358a0267ee39924846201f1233774283b22efd33f1fe14ef286a754c3cf7172c1981484a7ffe1673a6e30609ecb32909206cc1c3046401870d3b10fe2ebb04f05a62d09340784e91b170529497868e7fec0c7687da90f8c45a97716906368f169c728effdf3d94eaa6822ee2dfa6c0e4e7520d8bf2125e0ca416f299e26db08e71a4f0d353310950bd4eae7235292744b218dd4d6f22cd4c61eba3df2e6b1649ffe83207b46d46cf9816739178f1cb587a7ca1125d0c715cccd3d1ee2262d0edf724dd907412b1405c67c10cfd084984bf3c2ae470173aeca8459779910bed14b0ea8210f751db4d0b7cafb40ec5e156e271d8b2fe0ea84a252b894ff1fdec04b208774307a10b7d22cac0c453360a6fbe2497ad808707dc16343909e0acb4adddf342a881d29ec7f97533a921f3a53e8ee8d117f44787dee0b1a4869d0482250fffb5168d9f40cd36a852f11bd5857d3f46849578ecc2d849216f530fa16e7a36c13f7a648e76d22990a5875e55686b67c33968e6e549f5f943eb3d843305f01a0af7bd3579a3549dedddac797b9b7d20ddb7ceeb8d11d23aa6fad0e2e8c6b2befd812aaa8a220a3c69a4977d00f3efe1d0ee40bf0ccc98ae</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>â“ª é¡¹ç›®ç¬”è®°</category>
        <category>å­—ä½“ç”Ÿæˆé¡¹ç›®</category>
      </categories>
      <tags>
        <tag>Font Generation</tag>
      </tags>
  </entry>
  <entry>
    <title>å­—ä½“ç”Ÿæˆæ•ˆæœè¯„ä»·æŒ‡æ ‡</title>
    <url>/2022/03/16/827639831232/</url>
    <content><![CDATA[<h4
id="ä¸€intersection-over-unioniou">ä¸€ã€Intersection-Over-Unionï¼ˆIOUï¼‰</h4>
<p>â€‹
è®¡ç®—ä¸¤ä¸ªçŸ©å½¢çš„äº¤å¹¶æ¯”ï¼Œé€šå¸¸åœ¨æ£€æµ‹ä»»åŠ¡é‡Œé¢å¯ä»¥ä½œä¸ºä¸€ä¸ªæ£€æµ‹æŒ‡æ ‡ã€‚å¾€å¾€å¯ç”¨äºç›®æ ‡æ£€æµ‹å’Œè¯­ä¹‰åˆ†å‰²ã€‚å°†é¢„æµ‹æ¡†ä¸ground
truthæ¡†ä¹‹é—´çš„äº¤é›†æ¯”ä¸Šä¸¤è€…çš„å¹¶é›†ã€‚</p>
<p>â€‹
åº”ç”¨åˆ°å­—ä½“ç”Ÿæˆä»»åŠ¡ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼šimg1å’Œimg2æ˜¯å‚è€ƒå­—ä½“å›¾å’Œç”Ÿæˆå­—ä½“å›¾ã€‚ç”±äºç”Ÿæˆçš„å­—ä½“å›¾åƒåƒç´ å€¼å¾ˆçº¯ç²¹ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¤ä¸º
åƒç´ å€¼&lt;127çš„ä¸ºé»‘å­—éƒ¨åˆ†ï¼Œåƒç´ å€¼&gt;=127çš„ä¸ºç™½åº•éƒ¨åˆ†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">compute_iou</span>(<span class="params">img1, img2</span>):</span><br><span class="line">    img1_change = np.where(img1 &lt; <span class="number">127</span>, <span class="number">0</span>, -<span class="number">1</span>)  <span class="comment"># é»‘å­—éƒ¨åˆ†ä¿ç•™ï¼Œç™½åº•éƒ¨åˆ†å˜ä¸º-1ï¼Œé»‘å­—éƒ¨åˆ†ç»Ÿä¸€ä¸º0</span></span><br><span class="line">    img2_change = np.where(img2 &lt; <span class="number">127</span>, <span class="number">0</span>, -<span class="number">2</span>)  <span class="comment"># é»‘å­—éƒ¨åˆ†ä¿ç•™ï¼Œç™½åº•éƒ¨åˆ†å˜ä¸º-2ï¼Œé»‘å­—éƒ¨åˆ†ç»Ÿä¸€ä¸º0</span></span><br><span class="line">    black_num1 = img1_change[img1_change==<span class="number">0</span>].shape[<span class="number">0</span>] <span class="comment"># é»‘å­—éƒ¨åˆ†çš„åƒç´ æ•°</span></span><br><span class="line">    black_num2 = img2_change[img2_change==<span class="number">0</span>].shape[<span class="number">0</span>] <span class="comment"># é»‘å­—éƒ¨åˆ†çš„åƒç´ æ•°</span></span><br><span class="line">    intersection_num = img1_change[img1_change == img2_change].shape[<span class="number">0</span>] <span class="comment"># img1 å’Œ img2 é»‘å­—éƒ¨åˆ†äº¤å‰çš„åƒç´ æ•°</span></span><br><span class="line">    total_num = black_num1 + black_num2 - intersection_num <span class="comment"># æ€»åƒç´ æ•°ï¼ˆimg1 å’Œ img2 é»‘å­—éƒ¨åˆ†å¹¶é›†çš„åƒç´ æ•°ï¼‰</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;compute_iou:&#x27;</span>, total_num, intersection_num, black_num1, black_num2)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> intersection_num / total_num</span><br></pre></td></tr></table></figure>
<h4 id="äºŒrmse">äºŒã€RMSE</h4>
<p>â€‹ å‡æ–¹æ ¹è¯¯å·®äº¦ç§°æ ‡å‡†è¯¯å·®, ç”¨ çœŸå®å€¼-é¢„æµ‹å€¼
ç„¶åå¹³æ–¹ä¹‹åæ±‚å’Œå¹³å‡,æœ€åå†å¼€æ ¹å·ã€‚ <span class="math display">\[
\sqrt{\frac{1}{m} \sum_{i=1}^m(y_i - \hat y_i)^2  }
\]</span></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">compute_rmse</span>(<span class="params">img1, img2</span>):</span><br><span class="line">    img1 = img1 / <span class="number">255</span></span><br><span class="line">    img2 = img2 / <span class="number">255</span></span><br><span class="line">    mse = np.mean((img1 - img2) ** <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> np.sqrt(mse)</span><br></pre></td></tr></table></figure>
<h4 id="ä¸‰l1-loss">ä¸‰ã€L1 Loss</h4>
<p><span class="math display">\[
\frac{1}{m} \sum_{i=1}^mabs(y_i - \hat y_i)
\]</span></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">compute_l1_loss</span>(<span class="params">img1, img2</span>):</span><br><span class="line">    img1 = img1 / <span class="number">255</span></span><br><span class="line">    img2 = img2 / <span class="number">255</span></span><br><span class="line">    <span class="keyword">return</span> np.mean(np.<span class="built_in">abs</span>(img1 - img2))</span><br></pre></td></tr></table></figure>
<h4 id="å››structural-similarityssim">å››ã€<strong>Structural
Similarity</strong>ï¼ˆSSIMï¼‰</h4>
<p>â€‹
ç»“æ„ç›¸ä¼¼æ€§ï¼Œæ˜¯ä¸€ç§è¡¡é‡ä¸¤å¹…å›¾åƒç›¸ä¼¼åº¦çš„æŒ‡æ ‡ã€‚SSIMä½¿ç”¨çš„ä¸¤å¼ å›¾åƒä¸­ï¼Œä¸€å¼ ä¸ºæœªç»å‹ç¼©çš„æ— å¤±çœŸå›¾åƒï¼Œå¦ä¸€å¼ ä¸ºå¤±çœŸåçš„å›¾åƒã€‚</p>
<p>â€‹ ç»™å®šä¸¤ä¸ªå›¾åƒxå’Œy , ä¸¤å¼ å›¾åƒçš„ç»“æ„ç›¸ä¼¼æ€§å¯æŒ‰ç…§ä»¥ä¸‹æ–¹å¼æ±‚å‡ºï¼š</p>
<p><img
src="https://bkimg.cdn.bcebos.com/formula/cdebeba369b6159f2e3fa5364412f4ff.svg" /></p>
<p>â€‹ å…¶ä¸­<span class="math inline">\(u_x\)</span>æ˜¯<span
class="math inline">\(x\)</span>çš„å¹³å‡å€¼ï¼Œ<span
class="math inline">\(u_y\)</span>æ˜¯<span
class="math inline">\(y\)</span>çš„å¹³å‡å€¼ï¼Œ<span
class="math inline">\(\sigma_x\)</span>æ˜¯xçš„æ–¹å·®ï¼Œ<span
class="math inline">\(\sigma_y\)</span>æ˜¯yçš„æ–¹å·®ï¼Œ<span
class="math inline">\(\sigma_{xy}\)</span>æ˜¯xå’Œyçš„åæ–¹å·®ï¼Œ</p>
<p><span class="math inline">\(c_1=(k_1L)^2\)</span> å’Œ<span
class="math inline">\(c_2=(k_2L)^2\)</span>æ˜¯ç”¨æ¥ç»´æŒç¨³å®šçš„å¸¸æ•°ã€‚<span
class="math inline">\(L\)</span>æ˜¯åƒç´ å€¼çš„åŠ¨æ€èŒƒå›´ã€‚<span
class="math inline">\(k_1=0.01\)</span>,<span
class="math inline">\(k_2=0.03\)</span></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> skimage.metrics <span class="keyword">import</span> structural_similarity</span><br><span class="line"></span><br><span class="line">structural_similarity(output_img, target_img)</span><br></pre></td></tr></table></figure>
<h4 id="äº”peak-signal-noise-ratio-psnr">äº”ã€Peak Signal Noise Ratio(
PSNR )</h4>
<p>â€‹
å³°å€¼ä¿¡å™ªæ¯”ï¼Œæ˜¯ä¸€ç§è¯„ä»·å›¾åƒçš„å®¢è§‚æ ‡å‡†ï¼Œå®ƒå…·æœ‰å±€é™æ€§ï¼Œä¸€èˆ¬æ˜¯ç”¨äºæœ€å¤§å€¼ä¿¡å·å’ŒèƒŒæ™¯å™ªéŸ³ä¹‹é—´çš„ä¸€ä¸ªå·¥ç¨‹é¡¹ç›®ã€‚åœ¨å›¾åƒå¤„ç†ä¸­ï¼Œè¦å¯¹å›¾åƒè¿›è¡Œå®¢è§‚çš„è¯„ä»·ï¼Œå¸¸å¸¸éœ€è¦è®¡ç®—<em>PSNRã€‚PSNR</em>æ˜¯è¡¡é‡å›¾åƒå¤±çœŸæˆ–æ˜¯å™ªå£°æ°´å¹³çš„å®¢è§‚æ ‡å‡†ã€‚2ä¸ªå›¾åƒä¹‹é—´çš„PSNRå€¼è¶Šå¤§ï¼Œåˆ™è¶Šç›¸ä¼¼ã€‚æ™®éåŸºå‡†ä¸º30dBï¼Œ30dBä»¥ä¸‹çš„å›¾åƒåŠ£åŒ–è¾ƒä¸ºæ˜æ˜¾ã€‚</p>
<p>â€‹ å®šä¹‰ï¼š <span class="math display">\[
PSNR = 10log_{10}(\frac{MAX^2}{MSE})
\]</span> â€‹ MAXè¡¨ç¤ºå›¾åƒé¢œè‰²çš„æœ€å¤§æ•°å€¼ï¼Œ8bitå›¾åƒæœ€å¤§å–å€¼ä¸º255</p>
<p>â€‹ MSEä¸ºå‡æ–¹å·®ï¼Œå®šä¹‰ä¸ºå¦‚ä¸‹å†…å®¹ï¼š <span class="math display">\[
MSE = \frac{1}{mn}\sum^{n}_{i=1}\sum^{m}_{j=1}||K(i,j)-I(i,j)||^2
\]</span> â€‹
å…¶ä¸­ï¼Œ<strong>I</strong>å’Œ<strong>K</strong>åˆ†è¾¨æ˜¯åŸå§‹å›¾åƒå’Œå¤„ç†åçš„å›¾åƒï¼Œ<strong><em>m*n</em></strong>ä¸ºä¸¤å›¾åƒçš„å¤§å°ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> skimage.metrics <span class="keyword">import</span> peak_signal_noise_ratio</span><br><span class="line"></span><br><span class="line">peak_signal_noise_ratio(output_img, target_img)</span><br></pre></td></tr></table></figure>
<h4 id="å…­frechet-inception-distance-score-fid">å…­ã€Frechet Inception
Distance Score( FID )</h4>
<p>â€‹ Frechet Inception è·ç¦»å¾—åˆ†ï¼ˆFrechet Inception Distance
scoreï¼ŒFIDï¼‰æ˜¯è®¡ç®—çœŸå®å›¾åƒå’Œç”Ÿæˆå›¾åƒçš„<strong>ç‰¹å¾å‘é‡ä¹‹é—´è·ç¦»çš„ä¸€ç§åº¦é‡</strong>ã€‚</p>
<p>â€‹ FID
åˆ†æ•°è¢«ç”¨äºè¯„ä¼°ç”±ç”Ÿæˆæ€§å¯¹æŠ—ç½‘ç»œç”Ÿæˆçš„å›¾åƒçš„è´¨é‡ï¼Œè¾ƒä½çš„åˆ†æ•°ä¸è¾ƒé«˜è´¨é‡çš„å›¾åƒæœ‰å¾ˆé«˜çš„ç›¸å…³æ€§ã€‚
<span class="math display">\[
FID = ||u_r - u_g||^2 + T_r(\sum_r + \sum_g = 2(\sum_r\sum_g)^{1/2})
\]</span> â€‹ <span class="math inline">\(u\)</span>ä¸ºç»éªŒå‡å€¼ï¼Œ<span
class="math inline">\(\sum\)</span> ä¸ºç»éªŒåæ–¹å·®ï¼Œ<span
class="math inline">\(T_r\)</span>ä¸ºçŸ©é˜µçš„è¿¹ï¼Œ<span
class="math inline">\(r\)</span>ä»£è¡¨çœŸå®æ•°æ®é›†ï¼Œ<span
class="math inline">\(g\)</span>ä»£è¡¨ç”Ÿæˆæ•°æ®é›†ã€‚</p>
<p><strong>FIDçš„è®¡ç®—è¿‡ç¨‹ä¸ºï¼š</strong></p>
<ul>
<li><p>å¯¹ç›®æ ‡æ•°æ®é›†çš„Nå¼ å›¾ç‰‡ä½¿ç”¨InceptionV3ç”ŸæˆN*2048çš„å‘é‡ï¼Œå–å¹³å‡å€¼ï¼Œå¾—åˆ°<span
class="math inline">\(u_r\)</span> ã€‚</p></li>
<li><p>å¯¹ç”Ÿæˆçš„Må¼ å›¾ç‰‡ä½¿ç”¨InceptionV3ç”ŸæˆM*2048çš„å‘é‡ï¼Œå–å¹³å‡å¾—åˆ°<span
class="math inline">\(u_g\)</span>ã€‚</p></li>
<li><p>é€šè¿‡<span class="math inline">\(u_r\)</span> å’Œ <span
class="math inline">\(u_g\)</span> å¾—åˆ° <span
class="math inline">\(\sum_r\)</span>å’Œ<span
class="math inline">\(\sum_g\)</span>æœ€åå¾—åˆ°FIDã€‚</p></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> fid</span><br><span class="line"></span><br><span class="line">fid_value = fid.calculate_fid_given_paths([output_dir, target_dir], <span class="literal">None</span>)</span><br></pre></td></tr></table></figure>
<p>FIDä¼˜åŠ¿ï¼š</p>
<blockquote>
<p>1ã€ç”Ÿæˆæ¨¡å‹çš„è®­ç»ƒé›†å’Œ Inception V3 çš„è®­ç»ƒé›†å¯ä»¥ä¸åŒã€‚ 2ã€è®¡ç®— FID
æ—¶åŒæ—¶ç”¨åˆ°äº†ç”Ÿæˆçš„æ•°æ®å’ŒçœŸå®æ•°æ®ï¼Œæ¯”èµ· IS æ¥æ›´çµæ´»ã€‚å¯ä»¥ç†è§£æˆï¼ŒIS
åˆ¤æ–­çœŸå®æ€§ä¸å¦ï¼Œæ˜¯æŠŠç”Ÿæˆæ•°æ®å’Œ ImageNet æ•°æ®åšæ¯”è¾ƒï¼Œè€Œ FID
æ˜¯æŠŠç”Ÿæˆæ•°æ®å’Œè®­ç»ƒæ•°æ®åšæ¯”è¾ƒï¼Œå› æ­¤æ›´ reasonableã€‚ 3ã€ä»¥ä¼˜åŒ– FID
ä¸ºç›®æ ‡ï¼Œä¸ä¼šäº§ç”Ÿå¯¹æŠ—æ ·æœ¬ã€‚å› ä¸ºä¼˜åŒ–çš„æ˜¯ lantent space
featureï¼Œä¸æ˜¯æœ€ç»ˆçš„è¾“å‡ºå›¾ç‰‡ï¼Œä¸ä¼šå¯¼è‡´æœ€ç»ˆçš„ç”Ÿæˆå›¾ç‰‡å¤±çœŸã€‚</p>
</blockquote>
<p>FID é—®é¢˜ï¼š</p>
<blockquote>
<p>1ã€FID
åªæ˜¯æŸä¸€å±‚çš„ç‰¹å¾çš„åˆ†å¸ƒï¼Œæ˜¯å¦è¶³ä»¥è¡¡é‡çœŸå®æ•°æ®åˆ†å¸ƒä¸ç”Ÿæˆæ•°æ®åˆ†å¸ƒçš„è·ç¦»ï¼ŸåŒæ—¶ï¼Œæå‡º
FID
å…¬å¼è®¡ç®—çš„æ˜¯å¤šå…ƒæ­£æ€åˆ†å¸ƒçš„è·ç¦»ï¼Œæ˜¾ç„¶ç¥ç»ç½‘ç»œæå–çš„ç‰¹å¾å¹¶ä¸æ˜¯å¤šå…ƒæ­£æ€åˆ†å¸ƒã€‚
2ã€é’ˆå¯¹åŒä¸€ä¸ªç”Ÿæˆæ¨¡å‹ï¼Œä¸åŒæ¡†æ¶ä¸‹é¢„è®­ç»ƒçš„ Inception V3 ç®—å‡ºçš„ FID
å·®åˆ«æ˜¯å¦å¯ä»¥å¿½ç•¥ï¼Ÿ F3ã€ID
æ— æ³•åæ˜ ç”Ÿæˆæ¨¡å‹è¿‡æ‹Ÿåˆçš„æƒ…å†µï¼Œå¦‚æœæŸä¸ªç”Ÿæˆæ¨¡å‹åªæ˜¯ç®€å•æ‹·è´è®­ç»ƒæ•°æ®ï¼ŒFID
ä¼šéå¸¸å°ï¼Œè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå®Œç¾çš„ç”Ÿæˆæ¨¡å‹ï¼Œå› æ­¤ï¼Œä½¿ç”¨ FID
æ—¶åŒæ—¶ä¹Ÿè¦é€šè¿‡åˆ«çš„æ‰‹æ®µè¯æ˜ç”Ÿæˆæ¨¡å‹æ²¡æœ‰è¿‡æ‹Ÿåˆã€‚</p>
</blockquote>
<h4 id="ä¸ƒå››è±¡é™è¯„ä¼°">ä¸ƒã€å››è±¡é™è¯„ä¼°ï¼š</h4>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/%7B58D5EE05-1CD3-1E12-45C6-0A5D78F53358%7D.png"
alt="å››è±¡é™è¯„ä¼°å‡†åˆ™" />
<figcaption aria-hidden="true">å››è±¡é™è¯„ä¼°å‡†åˆ™</figcaption>
</figure>
<p>â€‹ <strong>D1ï¼š</strong>å·²çŸ¥å†…å®¹ã€å·²çŸ¥é£æ ¼</p>
<p>â€‹ <strong>D2ï¼š</strong>æœªçŸ¥å†…å®¹ã€å·²çŸ¥é£æ ¼</p>
<p>â€‹ <strong>D3ï¼š</strong>å·²çŸ¥å†…å®¹ã€æœªçŸ¥é£æ ¼</p>
<p>â€‹ <strong>D4ï¼š</strong>æœªçŸ¥å†…å®¹ã€æœªçŸ¥é£æ ¼</p>
<p>å‚è€ƒï¼šhttps://zhuanlan.zhihu.com/p/99375611</p>
]]></content>
      <categories>
        <category>â“ª é¡¹ç›®ç¬”è®°</category>
        <category>å­—ä½“ç”Ÿæˆé¡¹ç›®</category>
      </categories>
      <tags>
        <tag>Font Generation</tag>
        <tag>Evaluation</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”µå­ä¿¡æ¯å·¥ç¨‹ä¸­æ•°å­¦æ¨¡å‹ä¸æ–¹æ³•â€”â€”å•å…ƒ1 å·¥ä¸šæ™ºèƒ½</title>
    <url>/2022/09/19/e947a7cc4335/</url>
    <content><![CDATA[<h2
id="ä¸€ä»¥æ¨¡å‹ä¸ºæ ¸å¿ƒçš„å·¥ä¸šæ™ºèƒ½å·¥ä¿¡èåˆä¸å·¥ä¸šæ™ºèƒ½">ä¸€ã€ä»¥æ¨¡å‹ä¸ºæ ¸å¿ƒçš„å·¥ä¸šæ™ºèƒ½â€”â€”å·¥ä¿¡èåˆä¸å·¥ä¸šæ™ºèƒ½</h2>
<h3 id="å·¥ä¸šæ–‡æ˜å‘å±•å’Œå·¥ä¿¡èåˆ-p9">1ã€å·¥ä¸šæ–‡æ˜å‘å±•å’Œå·¥ä¿¡èåˆ P9</h3>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220919140907698.png" alt="image-20220919140907698" style="zoom:33%;" /></p>
<ul>
<li>æˆ‘å›½å·¥ä¸šé¢ä¸´çš„å½¢å¼å’Œå‘å±•ç›®æ ‡ P13</li>
<li>ä»€ä¹ˆæ˜¯ä¸¤è€…é¢†åŸŸçš„æ·±åº¦èåˆï¼Ÿ P14</li>
</ul>
<h3 id="æ™ºèƒ½äººç±»æ™ºèƒ½å’Œå·¥ä¸šæ™ºèƒ½">2ã€æ™ºèƒ½ï¼šäººç±»æ™ºèƒ½å’Œå·¥ä¸šæ™ºèƒ½</h3>
<ul>
<li>äººç±»å¿ƒæ™ºçš„å…«ä¸ªèŒƒç•´ P19</li>
<li>ä»€ä¹ˆæ˜¯æ™ºèƒ½ï¼Ÿä»€ä¹ˆæ˜¯æ™ºæ…§ï¼Ÿæ™ºèƒ½çš„è¿›åŒ–å±æ€§ï¼Ÿç†è§£å·¥ç¨‹ç§‘å­¦çš„æ™ºèƒ½ P20</li>
<li>å·¥ä¸šæ™ºèƒ½çš„å…«ä¸ªèŒƒç•´ P24</li>
<li>äººæ“…é•¿åšçš„ï¼šæ„ŸçŸ¥ã€å†³ç­–å’Œæ‰§è¡Œ</li>
</ul>
<h3 id="æ§åˆ¶è§†è§’å’Œæ§åˆ¶å‰æ²¿">3ã€æ§åˆ¶è§†è§’å’Œæ§åˆ¶å‰æ²¿</h3>
<ul>
<li>å·¥ä¸šç³»ç»Ÿä¿¡æ¯ç‰©ç†æ·±åº¦èåˆé¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜ P28
<ul>
<li>ç»¼åˆè®¤çŸ¥éš¾ã€èåˆè¡¨è¾¾éš¾ã€ååŒè°ƒæ§éš¾ã€å®‰å…¨é˜²æŠ¤éš¾</li>
</ul></li>
<li>å®æ—¶ã€ç²¾å‡†çš„ç»¼åˆä¿¡æ¯æ„ŸçŸ¥ P29</li>
<li>å·¥ä¸šå¤§æ•°æ®çš„ç»¼åˆè¡¨è¾¾ä¸è®¤çŸ¥ P30</li>
<li>äºº-æœº-ç‰©ååŒçš„æ™ºèƒ½æ§åˆ¶ä¸ä¼˜åŒ– P31</li>
<li>ä¸‰å…ƒç©ºé—´çš„ä¸€ä½“åŒ–å®‰å…¨é˜²æŠ¤ P32</li>
<li>æ™ºèƒ½å·¥å‚çš„å†…æ¶µ P41</li>
<li>æ— äººé©¾é©¶å’Œæ— äººå·¥å‚ å…±æ€§å’ŒåŒºåˆ« P42</li>
<li>å·¥å‚æ™ºèƒ½åŒ–çš„æŠ€æœ¯åˆ†çº§ï¼šèŒƒå›´ã€èƒ½åŠ›ã€æ•ˆç›Š L0-L5 P43</li>
</ul>
<h3 id="æµç¨‹å·¥ä¸šçš„æ™ºèƒ½åŒ–ä¹‹è·¯">4ã€æµç¨‹å·¥ä¸šçš„æ™ºèƒ½åŒ–ä¹‹è·¯</h3>
<ul>
<li>å·¥ä¸šè¿è¡Œæ–¹å¼çš„å˜è¿ P46 47
<ul>
<li>æµç¨‹å·¥ä¸šæ˜¯å½¢æˆäººç±»ç‰©è´¨æ–‡æ˜çš„åŸºç¡€å·¥ä¸š</li>
<li>æµç¨‹å·¥ä¸šçš„è¡Œä¸šç‰¹ç‚¹ã€æ–°éœ€æ±‚ç­‰</li>
<li>äººå·¥æ§åˆ¶â€”â€”å°‘é‡ä»ªè¡¨â€”â€”ä¸­æ§ç³»ç»Ÿâ€”â€”ç°ä»£åŒ–å¤§å‹æ§åˆ¶å®¤</li>
</ul></li>
<li>è®¾è®¡å‹æŠ€æœ¯å’Œè¿è¡Œå‹æŠ€æœ¯ï¼šP48
<ul>
<li>è®¾è®¡å‹æŠ€æœ¯ï¼šäº§å“å’Œå·¥è‰ºè®¾è®¡-&gt;é«˜é™„åŠ å€¼äº§å“ã€æ–°å·¥è‰º</li>
<li>è¿è¡Œå‹æŠ€æœ¯ï¼šç”Ÿäº§å’Œåˆ¶é€ 
-&gt;é«˜æ•ˆã€é«˜é€‚åº”æ€§ç”Ÿäº§ã€‚ä¸å¢åŠ å¤ªå¤šæŠ•èµ„çš„æƒ…å†µä¸‹å–å¾—æ˜¾è‘—çš„ç»æµæ•ˆç›Šï¼ŒæŠ•èµ„å°è§æ•ˆå¿«æ˜¯æœ€é›†ä¸­ä½“ç°æµç¨‹ä¼ä¸šæ“ä½œè¿è¡Œâ€œæ™ºèƒ½â€çš„æŠ€æœ¯å…³é”®</li>
<li>æµç¨‹å·¥ä¸šç”Ÿäº§è¿è¡Œçš„æ–°éœ€æ±‚ï¼šé«˜æ•ˆã€æŸ”æ€§ã€‚</li>
</ul></li>
<li>ä»€ä¹ˆæ˜¯æ™ºèƒ½ï¼Ÿå·¥å‚çš„æŒ‡æŒ¥ã€æ™ºæ…§å·¥å‚çš„å·¥ä½œæµ P52</li>
<li>æ— äººåŒ–å·¥å‚çš„æŠ€æœ¯æ ¸å¿ƒï¼šP53
<ul>
<li>äººå·¥æ™ºèƒ½ï¼šç®—åŠ›ã€æ•°æ®ã€ç®—æ³•</li>
<li>å·¥ä¸šæ™ºèƒ½ï¼šå»ºæ¨¡ã€æ§åˆ¶ã€ä¼˜åŒ–</li>
<li>å¤§å·¥ä¸šï¼šå·¥è‰ºã€æµç¨‹ã€è®¾å¤‡</li>
</ul></li>
<li>æ— äººåŒ–å·¥å‚çš„æ–°ç›®æ ‡ï¼šP54</li>
</ul>
<h2
id="äºŒä»¥æ¨¡å‹ä¸ºæ ¸å¿ƒçš„å·¥ä¸šæ™ºèƒ½è¿‡ç¨‹ç³»ç»Ÿå»ºæ¨¡ä¸åˆ†æè¿è¡Œ">äºŒã€ä»¥æ¨¡å‹ä¸ºæ ¸å¿ƒçš„å·¥ä¸šæ™ºèƒ½â€”â€”è¿‡ç¨‹ç³»ç»Ÿå»ºæ¨¡ä¸åˆ†æè¿è¡Œï¼š</h2>
<h3 id="å¼•è¨€">1ã€å¼•è¨€</h3>
<ul>
<li>æœºç†æ¨¡å‹ï¼ˆç™½ç®±ï¼‰ï¼šP59</li>
<li>æ•°æ®æ¨¡å‹ï¼ˆé»‘ç®±ï¼‰ï¼šP59</li>
</ul>
<h3 id="è¿‡ç¨‹ç³»ç»Ÿç®€ä»‹">2ã€è¿‡ç¨‹ç³»ç»Ÿç®€ä»‹</h3>
<ul>
<li>è¿‡ç¨‹ç³»ç»Ÿçš„ç»“æ„</li>
<li>æµç¨‹å·¥ä¸šçš„å…¸å‹ç”Ÿäº§è¿‡ç¨‹ï¼šï¼ˆååº” + åˆ†ç¦» å¾ˆé‡è¦ï¼‰
<ul>
<li>åŒ–å·¥è¿‡ç¨‹æ˜¯ç”±ä¸€ä¸ªä¸ªåŠ å·¥è¿‡ç¨‹ç»„æˆçš„ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šåŒ–å­¦ååº”è¿‡ç¨‹ï¼Œç‰©ç†åŠ 
å·¥è¿‡ç¨‹ã€‚</li>
<li>åŒ–å­¦ååº”è¿‡ç¨‹å¯¹åº”çš„è®¾å¤‡ä¸ºååº”å™¨ï¼Œç‰©ç†åŠ å·¥è¿‡ç¨‹å¯¹åº”çš„è®¾å¤‡ä¸ºå•å…ƒæ“ä½œã€‚</li>
<li>æ‰€æœ‰å•å…ƒæ“ä½œéƒ½å±äºåŠ¨é‡ã€çƒ­é‡ã€è´¨é‡çš„ä¼ é€’é€Ÿç‡æ§åˆ¶è¿‡ç¨‹</li>
<li>å•å…ƒæ“ä½œçš„ç§ç±»ï¼šP68</li>
<li>è¿‡ç¨‹ç³»ç»Ÿå·¥ç¨‹ï¼šä»¥æ•°å­¦æ¨¡å‹ã€è®¡ç®—æœºè¾…åŠ©ä¸ºåŸºç¡€çš„æ•ˆèƒ½åˆ†æã€è®¾è®¡æ”¾å¤§ã€æ“ä½œè°ƒæ•´</li>
</ul></li>
<li>ç”°çº³è¥¿è¿‡ç¨‹ï¼šP69
<ul>
<li>æ“ä½œå˜é‡ï¼šç”¨äºè°ƒèŠ‚ç”Ÿäº§è¿è¡ŒçŠ¶æ€çš„æ‰‹æ®µã€‚é€šå¸¸æ˜¯é˜€é—¨å¼€åº¦æˆ–è€…ç”µæœºè½¬é€Ÿã€‚</li>
<li>æµ‹é‡å˜é‡ï¼ˆç”Ÿäº§è£…ç½®çš„çœ¼ç›ï¼‰ï¼šç°åœºä»ªè¡¨æˆ–å®éªŒå®¤åˆ†ææ‰‹æ®µæ‰€èƒ½æµ‹é‡çš„æµé‡ã€
æ¸©åº¦ã€å‹åŠ›ã€æ¶²ä½ã€ç»„åˆ†ç­‰å˜é‡ã€‚é€šè¿‡æµ‹é‡å˜é‡å¯ä»¥äº†è§£ç”Ÿäº§è¿‡ç¨‹çš„å·¥ä½œçŠ¶</li>
<li>è¿è¡Œçº¦æŸï¼šè¿è¡Œçº¦æŸä¸€èˆ¬åŒ…æ‹¬è®¾å¤‡æ“ä½œèŒƒå›´çš„çº¦æŸï¼Œäº§å“çº¦æŸï¼Œå®‰å…¨çº¦æŸç­‰ã€‚</li>
<li>ä¼˜åŒ–ç›®æ ‡ï¼šå¸¸è§çš„ä¼˜åŒ–ç›®æ ‡åŒ…æ‹¬æé«˜äº§å“æ”¶ç‡ã€é™ä½ç”Ÿäº§èƒ½è€—ç­‰ã€‚</li>
</ul></li>
</ul>
<h3 id="æ¨¡å‹æè¿°å’Œæ±‚è§£">3ã€æ¨¡å‹æè¿°å’Œæ±‚è§£</h3>
<ul>
<li><p>è£…ç½®ä¸æµè‚¡ï¼š P77</p>
<ul>
<li>å…¨æµç¨‹çš„æœºç†æ¨¡å‹æ˜¯ç”±å•ä¸ªè£…ç½®çš„æœºç†æ¨¡å‹+è¿æ¥å…³ç³»ç»„åˆè€Œæˆçš„</li>
<li>è£…ç½®ä¸è£…ç½®ä¹‹é—´çš„è¿æ¥ç§°ä¸ºæµè‚¡Streamï¼ˆåŒ…æ‹¬ç‰©è´¨æµè‚¡å’Œèƒ½é‡æµè‚¡ï¼‰</li>
<li>ç‰©è´¨æµè‚¡Sç”±æµé‡ã€ç»„åˆ†ã€æ¸©åº¦ã€å‹åŠ›æ¥æè¿°ã€‚èƒ½é‡æµè‚¡Hç”±çƒ­é‡å’Œæ¸©åº¦æ¥æè¿°ã€‚</li>
</ul></li>
<li><p>è¿æ¥å…³ç³»ä¸å…¨æµç¨‹æ¨¡å‹ P78</p></li>
<li><p>ä»¿çœŸé—®é¢˜ä¸åé—®é¢˜ï¼š</p>
<ul>
<li><p>ä»¿çœŸé—®é¢˜ï¼šå¯ç”¨äºå›æº¯åˆ†æï¼Œwhat-ifåˆ†æï¼ˆå°±æ˜¯å¦‚æœè¾“å…¥è°ƒæ•´ï¼Œè¾“å‡ºä¼šå¦‚ä½•æ”¹å˜ï¼‰</p></li>
<li><p>ä»¿çœŸé—®é¢˜åé—®é¢˜ï¼š</p>
<ul>
<li><p>è¦æ±‚è¾“å‡ºæµè‚¡(äº§å“)çš„çŠ¶æ€ä¸ºYï¼Œç›¸åº”çš„è¾“å…¥æµè‚¡(è¿›æ–™)æ¡ä»¶æ˜¯æ€æ ·çš„ï¼Ÿ(æ“ä½œé—®é¢˜)</p></li>
<li><p>è®¾å¤‡å‚æ•°åº”è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ(è®¾è®¡é—®é¢˜)</p></li>
<li><p>è·å¾—äº†è¾“å…¥æµè‚¡ã€è¾“å‡ºæµè‚¡ç­‰æ•°æ®ï¼Œå¦‚ä½•åæ¨è®¾å¤‡å‚æ•°ï¼Ÿ(å‚æ•°ä¼°è®¡é—®é¢˜)</p></li>
</ul></li>
</ul></li>
<li><p>åºè´¯æ±‚è§£</p>
<ul>
<li>å½“è¿›æ–™æ¡ä»¶ä¸ºXæ—¶ï¼Œäº§å“çš„çŠ¶æ€æ˜¯æ€æ ·çš„ï¼Ÿ</li>
<li>å½“æµç¨‹ä¸­å­˜åœ¨å›è·¯Recycleæ—¶ï¼Œéœ€è¦å…ˆæ–­å¼€æŸä¸ªæµè‚¡ï¼ˆå‰²è£‚æµè‚¡ï¼‰ï¼Œæ‰èƒ½å¤Ÿåºè´¯æ±‚è§£ã€‚
å›è·¯çš„å­˜åœ¨ä½¿å¾—æ±‚è§£è¿‡ç¨‹æ›´åŠ å¤æ‚</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220919154605965.png" /></li>
<li>ä¼˜åŒ–é—®é¢˜ï¼šæ€æ ·çš„è¿›æ–™æ¡ä»¶ï¼Œä½¿å¾—Aäº§å“äº§é‡æœ€é«˜/ç”Ÿäº§èƒ½è€—æœ€ä½/æœ‰å®³ç‰©è´¨äº§å‡ºæœ€å°‘ï¼Ÿ</li>
</ul></li>
<li><p>ç‰©è´¨æµ &amp; èƒ½é‡æµ &amp; ä¿¡æ¯æµï¼šP83</p></li>
<li><p>å•ä¸ªè£…ç½®çš„å»ºæ¨¡ï¼šè£…ç½®çš„æ–¹ç¨‹ P84</p></li>
<li><p>å…¨æµç¨‹æœºç†æ¨¡å‹çš„å±‚æ¬¡åŒ–ç‰¹å¾ï¼š</p>
<ul>
<li>ä¸Šè¿°ä¸¤ç±»æ–¹ç¨‹åŠæµç¨‹å•å…ƒçš„è¿æ¥æ„æˆå±‚æ¬¡åŒ–ç‰¹å¾ï¼Œå¤šå±‚æ¬¡çš„æ¨¡å‹é€ æˆäº†æœºç†æ¨¡å‹çš„å¤æ‚æ€§ã€‚</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220919155241488.png" /></li>
</ul></li>
<li><p>å®Œæ•´æ¨¡å‹çš„åºè´¯æ±‚è§£ï¼šP91</p>
<ul>
<li>ä¸Šè¿°å¤šå±‚æ¬¡ç»“æ„ä¸­çš„æ¯ä¸ªå±‚æ¬¡çš„æ¨¡å‹é€šå¸¸éƒ½æ²¡æœ‰closed
formçš„è§£ã€‚ä¹Ÿå°±æ˜¯è¯´åºè´¯æ±‚è§£çš„æ€è·¯éœ€è¦åœ¨æ¯ä¸ªå±‚æ¬¡ä¸Šï¼Œéœ€è¦è¿­ä»£æ±‚è§£é‚£ä¸ªå±‚æ¬¡çš„æ–¹ç¨‹ç»„ã€‚å› æ­¤ï¼Œå®Œæ•´æ¨¡å‹åºè´¯æ±‚è§£çš„å·¥ä½œæµå‘ˆç°å‡ºä¸€ç§â€œæ´‹è‘±ç»“æ„â€ã€‚</li>
</ul></li>
<li><p>æœºç†æ¨¡å‹è”ç«‹æ±‚è§£ï¼š</p>
<ul>
<li>å¯¹äºå¤æ‚è€¦åˆæµç¨‹çš„ä¼˜åŒ–é—®é¢˜ï¼Œé‡‡ç”¨åºè´¯æ³•æ±‚è§£æ—¶è¿­ä»£è¿‡ç¨‹åµŒå¥—å±‚æ•°å¤šï¼Œå†…å¤–
å±‚ä¿¡æ¯ä¼ é€’å¤æ‚ã€æ”¶æ•›éš¾åº¦å¤§ã€‚é‡‡ç”¨è”ç«‹æ–¹ç¨‹æ³•æ±‚è§£å¯ä»¥é¿å…è¿™ä¸€é—®é¢˜</li>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220919155604175.png" style="zoom:50%;" /></li>
</ul></li>
</ul>
<h3 id="ä¸åŒç±»å‹çš„å‘½é¢˜">4ã€ä¸åŒç±»å‹çš„å‘½é¢˜</h3>
<ul>
<li>ä»¿çœŸæˆ–WHAT-IFåˆ†æ P95</li>
<li>çµæ•åº¦åˆ†æï¼šçµæ•åº¦åˆ†æä¸€èˆ¬æ˜¯å„ç§ä¼˜åŒ–é—®é¢˜æ±‚è§£çš„å‰ç½®æ­¥éª¤</li>
<li>è®¾è®¡ä¼˜åŒ–ã€æ“ä½œä¼˜åŒ–ï¼šåŒ…æ‹¬è®¾å¤‡æ“ä½œèŒƒå›´çš„çº¦æŸã€äº§å“çº¦æŸã€å®‰å…¨çº¦æŸ</li>
<li>å‚æ•°ä¼°è®¡ï¼šå‚æ•°ä¼°è®¡éœ€è¦ä½¿ç”¨å®é™…è£…ç½®çš„æµ‹é‡æ•°æ®ğ‘¦0
ã€‚å®é™…çš„æµ‹é‡æ•°æ®å­˜åœ¨å™ªå£°ã€é™å·®ç­‰ï¼Œ
éœ€è¦å…ˆè¿›è¡Œæ ¡æ­£å’Œæ»¤æ³¢ï¼Œç„¶åå†ç”¨äºå‚æ•°ä¼°è®¡</li>
<li>ç¨³æ€ä¸åŠ¨æ€ï¼šç¨³æ€æ˜¯æŒ‡å„ç”Ÿäº§å˜é‡åŸºæœ¬ä¿æŒä¸å˜çš„å¹³ç¨³çš„è¿è¡ŒçŠ¶æ€åŠ¨æ€æ˜¯æŒ‡ä¸¤ä¸ªç¨³æ€ä¹‹é—´çš„è¿‡æ¸¡è¿‡ç¨‹</li>
<li>åŠ¨æ€ä¼˜åŒ–é—®é¢˜ï¼šåŠ¨æ€ä¼˜åŒ–çš„ç»“æœä¸å†æ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œè€Œæ˜¯ä¸€ä¸ªæ—¶é—´åºåˆ—ğ‘¢(ğ‘¡)</li>
</ul>
<h3 id="æ•°å­¦å»ºæ¨¡çš„æ­¥éª¤">5ã€æ•°å­¦å»ºæ¨¡çš„æ­¥éª¤</h3>
<ul>
<li>æ¨¡å‹å»ºç«‹ï¼šå·¥è‰ºåˆ†æå’Œç®€åŒ–è£…ç½®æ•°å­¦æ¨¡å‹çš„å»ºç«‹ P103
<ul>
<li>ï¼ˆå»ºæ¨¡å‡è®¾ã€æ¨¡å‹å˜é‡å»ºç«‹ã€æœºç†æ–¹ç¨‹çš„å»ºç«‹ï¼‰</li>
</ul></li>
<li>å‘½é¢˜æ±‚è§£ï¼šæ•°å­¦æ¨¡å‹çš„å˜æ¢å’ŒåŒ–ç®€ï¼Œæ¨¡å‹çš„ç¼–ç¨‹å®ç°ï¼Œæ•°å­¦è§„åˆ’å‘½é¢˜çš„æ±‚è§£
P103</li>
<li>ç»“æœåˆ†æï¼šæ±‚è§£ç»“æœæ˜¯å¦æ­£ç¡®ï¼Œæ˜¯å¦ç¬¦åˆé¢„æœŸç›®æ ‡ P103</li>
</ul>
<p>â€‹ ä»£æ•°å»ºæ¨¡è¯­è¨€(Algebraic modeling language,
AML)ï¼šç”¨äºå¤§è§„æ¨¡æ•°å­¦è®¡ç®—(ä¸€èˆ¬æ˜¯æ•°
å­¦è§„åˆ’)ä¸­çš„æ•°å­¦å…ƒç´ è¿›è¡Œæè¿°ï¼Œå¹¶æä¾›æ±‚è§£å™¨æ¥å£çš„ä¸€ç±»é«˜çº§è„šæœ¬è¯­è¨€ã€‚</p>
<p>â€‹ éçº¿æ€§æ–¹ç¨‹ç»„æ±‚è§£å’Œä¼˜åŒ–ï¼šè¿­ä»£æ³•æ•°å€¼è®¡ç®—</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220919160136072.png" style="zoom:50%;" /></p>
<p>â€‹
åˆå€¼ï¼ˆåˆå§‹è¿­ä»£ç‚¹ï¼‰å¯¹éçº¿æ€§è§„åˆ’é—®é¢˜çš„æ±‚è§£å½±å“å¾ˆå¤§ï¼Œè€ƒè™‘ä»¥ä¸‹çš„ä¼˜åŒ–å‘½é¢˜ï¼š</p>
<h3 id="æ¨¡å‹é™é˜¶å’Œèåˆ">6ã€æ¨¡å‹é™é˜¶å’Œèåˆï¼š</h3>
<p>â€‹ é«˜ä¿çœŸåº¦æ¨¡å‹ï¼Œä½ä¿çœŸåº¦æ¨¡å‹</p>
<ul>
<li><p>æ¨¡å‹å¤æ‚åº¦å’Œæ€§èƒ½çš„å…³ç³»ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220919160736180.png" style="zoom:67%;" /></p></li>
<li><p>æ¨¡å‹ç®€åŒ–æ€è·¯ P119</p></li>
<li><p>ä»£ç†æ¨¡å‹çš„å»ºç«‹ P121</p></li>
<li><p>æœºç†æ•°æ®èåˆæ¨¡å‹ â€”â€” ç°ç®±æ¨¡å‹ P122</p>
<ul>
<li>ä¸åŒçš„èåˆæ€è·¯ â€”â€” P123</li>
</ul></li>
</ul>
]]></content>
      <categories>
        <category>â“¾ è¯¾ç¨‹ç¬”è®°</category>
        <category>ç”µå­ä¿¡æ¯å·¥ç¨‹æ•°å­¦æ¨¡å‹ä¸æ–¹æ³•</category>
      </categories>
      <tags>
        <tag>course</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”µå­ä¿¡æ¯å·¥ç¨‹ä¸­æ•°å­¦æ¨¡å‹ä¸æ–¹æ³•â€”â€”å•å…ƒ3 ç”µç£ç³»ç»Ÿ</title>
    <url>/2022/09/30/2742f0d23b8a/</url>
    <content><![CDATA[<h2 id="ä¸€æ¦‚è¿°å’ŒåŸºæœ¬ç†è®º">ä¸€ã€æ¦‚è¿°å’ŒåŸºæœ¬ç†è®º</h2>
<h3 id="éº¦å…‹æ–¯éŸ¦æ–¹ç¨‹ç»„">1ã€éº¦å…‹æ–¯éŸ¦æ–¹ç¨‹ç»„ï¼š</h3>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221002113642895.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221002113659170.png" /></p>
<h3 id="å¹³é¢ç”µç£æ³¢">2ã€å¹³é¢ç”µç£æ³¢ï¼š</h3>
<ul>
<li><p>æ³¢ : æ‰°åŠ¨ã€èƒ½é‡ã€æˆ–ç‰©ç†ä¿¡æ¯åœ¨ç©ºé—´ä¸Šä¼ æ’­çš„ä¸€ç§ç‰©ç†ç°è±¡ï¼›</p></li>
<li><p>ç”µç£æ³¢ : ä¼ æ’­ç”µç£èƒ½é‡çš„æ³¢ï¼›</p></li>
<li><p>å¹³é¢ç”µç£æ³¢ :
æ³¢å‰ï¼ˆç­‰ç›¸ä½é¢ï¼‰æ˜¯å¹³è¡Œé¢ä¸”ä¸ä¼ æ’­æ–¹å‘å‚ç›´çš„å›ºå®šé¢‘ç‡ç”µç£æ³¢ï¼›</p></li>
<li><p>äº¥å§†äº¥å…¹æ–¹ç¨‹ï¼ˆHelmholtzâ€™s equationï¼‰</p></li>
</ul>
<p><img
src="C:\Users\Fantast\AppData\Roaming\Typora\typora-user-images\image-20221002150037334.png" /></p>
<ul>
<li>ç”µåœºå¼ºåº¦è¡¨è¾¾å¼ï¼š</li>
</ul>
<p><img
src="C:\Users\Fantast\AppData\Roaming\Typora\typora-user-images\image-20221002150210202.png" /></p>
<p><img
src="C:\Users\Fantast\AppData\Roaming\Typora\typora-user-images\image-20221002150222274.png" /></p>
<ul>
<li><p>ç£åœºå¼ºåº¦è¡¨è¾¾å¼ï¼š</p>
<figure>
<img
src="C:\Users\Fantast\AppData\Roaming\Typora\typora-user-images\image-20221002150256704.png"
alt="image-20221002150256704" />
<figcaption aria-hidden="true">image-20221002150256704</figcaption>
</figure></li>
</ul>
<h3 id="ç‰¹å¾é˜»æŠ—">3ã€ç‰¹å¾é˜»æŠ—ï¼š</h3>
<p>ç”µåœºå¼ºåº¦å’Œç£åœºå¼ºåº¦çš„å¹…å€¼æ¯”å€¼å®šä¹‰ä¸ºæŸç§ææ–™çš„ç‰¹å¾é˜»æŠ—</p>
<p><img
src="C:\Users\Fantast\AppData\Roaming\Typora\typora-user-images\image-20221002150355839.png" /></p>
<h3 id="ç”µç£è¾å°„å¤©çº¿è¾å°„">4ã€ç”µç£è¾å°„â€”å¤©çº¿è¾å°„</h3>
<p>â€‹ åˆ†ä¸ºè¿‘åœºå’Œè¿œåœºï¼Œè¿‘åœºåˆåˆ†ä¸ºä¸¤ä¸ª</p>
<p><img
src="C:\Users\Fantast\AppData\Roaming\Typora\typora-user-images\image-20221002150510352.png" /></p>
<p>â€‹ åœ¨æ¯”è¾ƒè¿œçš„åœ°æ–¹å¯ä»¥ç­‰ä»·äºä¸€ä¸ªå¹³é¢æ³¢çš„å½¢å¼</p>
<p><img
src="C:\Users\Fantast\AppData\Roaming\Typora\typora-user-images\image-20221002150516797.png" /></p>
<h3 id="ç”µç£è¾å°„èµ«å…¹å¶æå­">5ã€ç”µç£è¾å°„â€”èµ«å…¹å¶æå­ï¼š</h3>
<h3 id="ç”µç£è¾å°„åŠæ³¢é•¿å¶æå­">6ã€ç”µç£è¾å°„â€”åŠæ³¢é•¿å¶æå­</h3>
<h3 id="ç”µç£è¾å°„å¤©çº¿åº”ç”¨-p24-26">7ã€ç”µç£è¾å°„â€”å¤©çº¿åº”ç”¨ P24-26</h3>
<figure>
<img
src="C:\Users\Fantast\AppData\Roaming\Typora\typora-user-images\image-20221002150915273.png"
alt="image-20221002150915273" />
<figcaption aria-hidden="true">image-20221002150915273</figcaption>
</figure>
<ul>
<li>ç§»åŠ¨æ‰‹æœº P26-27</li>
<li>ç¬”è®°æœ¬ç”µè„‘ P28-29</li>
<li>æ— çº¿å¯ç©¿æˆ´è®¾å¤‡ P30-31</li>
<li>æ— çº¿ç”µè¯†åˆ«å¤©çº¿ P32-33
<ul>
<li>æ— çº¿ç”µè¯†åˆ«ï¼šä¸€ç§ç”¨æ¥åœ¨ä¸€å®šè·ç¦»æ— çº¿è¯†åˆ«çš„ç”µå­è´´ç‰‡æŠ€æœ¯ã€‚</li>
</ul></li>
<li>å·¥ä½œèŒƒå›´ï¼šPï¼“ï¼”ã€€ã€€è¿‘åœºå’Œè¿œåœº</li>
<li>å·¥ä½œæ¨¡å¼ï¼šè¢«åŠ¨ï¼ˆPassive Tag ä¸»åŠ¨ï¼ˆ Active Tag åŠè¢«åŠ¨ï¼ˆ Semi passive
Tag)
<ul>
<li>è¢«åŠ¨ï¼š
<ul>
<li>æ²¡æœ‰ç”µæºï¼Œä½¿ç”¨ä»è¯»å¡å™¨ä¸Šçš„èƒ½é‡æ¥å……èƒ½å¹¶ä¸”ä¼ è¾“æ•°æ®åˆ°è¯»å¡å™¨</li>
<li>æ›´å°ï¼Œæ›´å»‰ä»·</li>
<li>å¾€å¾€åªæœ‰å¾ˆçŸ­çš„è¯»å–è·ç¦»</li>
</ul></li>
<li>ä¸»åŠ¨ï¼š
<ul>
<li>æœ‰ç”µæºï¼Œtagå…ˆä¼ è¾“ï¼Œç„¶åæ˜¯reader</li>
<li>æ›´é•¿çš„è¯»å–è·ç¦»ï¼Œ100mæˆ–ä»¥ä¸Š</li>
<li>æ˜‚è´µï¼Œä½¿ç”¨æ—¶é—´è¾ƒæœ‰é™</li>
</ul></li>
</ul></li>
</ul>
<h3 id="ç”µç£æ„Ÿåº”æ— çº¿ä¼ èƒ½">8ã€ç”µç£æ„Ÿåº”â€”æ— çº¿ä¼ èƒ½</h3>
<h3 id="ç”µç£æ„Ÿåº”å…¨æ¯æˆåƒ">9ã€ç”µç£æ„Ÿåº”â€”å…¨æ¯æˆåƒ</h3>
<h3 id="ç”µç£è¾å°„ç©¿é€æ€§-p39">10ã€ç”µç£è¾å°„â€”ç©¿é€æ€§ P39</h3>
<h2 id="äºŒç”µç£æ•£å°„ç³»ç»Ÿå»ºæ¨¡å’Œå¯è§†åŒ–">äºŒã€ç”µç£æ•£å°„ç³»ç»Ÿå»ºæ¨¡å’Œå¯è§†åŒ–</h2>
<h3 id="ç”µç£æ•£å°„åŸºæœ¬ç†è®º-ç‹„æ‹‰å…‹æ ¼æ—å‡½æ•°">1ã€ç”µç£æ•£å°„åŸºæœ¬ç†è®º
ç‹„æ‹‰å…‹æ ¼æ—å‡½æ•°</h3>
<h3 id="ç‘åˆ©æ•£å°„">2ã€ç‘åˆ©æ•£å°„</h3>
<p>â€‹ åŠå¾„æ¯”å…‰æˆ–å…¶ä»–ç”µç£è¾å°„çš„æ³¢é•¿å°å¾ˆå¤šï¼ˆ ï¼ˆ&lt;0.1 ğœ†ï¼‰çš„ å¾®å°é¢—ç²’
ï¼ˆä¾‹å¦‚å•ä¸ªåŸå­æˆ–åˆ†å­ï¼‰å¯¹å…¥å°„å…‰æŸçš„æ•£å°„ã€‚</p>
<p>â€‹
ç‘åˆ©æ•£å°„åœ¨å…‰é€šè¿‡<strong>é€æ˜çš„å›ºä½“å’Œæ¶²ä½“æ—¶éƒ½ä¼šå‘ç”Ÿï¼Œä½†ä»¥æ°”ä½“æœ€ä¸ºæ˜¾è‘—ã€‚</strong></p>
<figure>
<img
src="C:\Users\Fantast\AppData\Roaming\Typora\typora-user-images\image-20221002152515412.png"
alt="image-20221002152515412" />
<figcaption aria-hidden="true">image-20221002152515412</figcaption>
</figure>
<ul>
<li>æ€»çš„è¾å°„èƒ½é‡ä¸æ³¢æ•°çš„å››æ¬¡æ–¹æˆæ­£ç›¸å…³ï¼Œä¸æ³¢é•¿çš„å››æ¬¡æ–¹æˆåç›¸å…³ã€‚é¢‘ç‡è¶Šé«˜ï¼Œç‘åˆ©æ•£å°„è¶Šå¼º</li>
<li>å…¬å¼è§P7</li>
</ul>
<h3 id="ç±³æ°æ•£å°„">3ã€ç±³æ°æ•£å°„ï¼š</h3>
<p>â€‹ <strong>å½“ å¾®ç²’åŠå¾„çš„å¤§å°æ¥è¿‘äºæˆ–å¤§äºå…¥å°„å…‰çº¿çš„æ³¢é•¿ Î»
çš„æ—¶å€™</strong>ï¼Œå¤§éƒ¨åˆ†çš„å…¥å°„å…‰çº¿ä¼šæ²¿ç€å‰è¿›çš„æ–¹å‘è¿›è¡Œæ•£å°„ï¼Œè¿™ç§ç°è±¡è¢«ç§°ä¸ºç±³æ°æ•£å°„ã€‚
â€‹<strong>æ•£å°„åœºå‡ ä¹ä¸æ³¢é•¿æ— å…³ï¼›å‰å‘æ³¢æ¯”è¾ƒå¤§ ;
ç‰©ä½“å¤§å°è¶Šå¤§ï¼Œå‰å‘æ³¢è¶Šå¤§</strong></p>
<p>â€‹
è¿™ç§å¤§å¾®ç²’åŒ…æ‹¬ç°å°˜ï¼Œæ°´æ»´ï¼Œæ¥è‡ªæ±¡æŸ“ç‰©çš„é¢—ç²’ç‰©è´¨ï¼Œå¦‚çƒŸé›¾ç­‰ã€‚å³sæ˜¯å½¢æˆæ‰€è°“çš„ä¸è¾¾å°”æ•ˆåº”</p>
<p><img
src="C:\Users\Fantast\AppData\Roaming\Typora\typora-user-images\image-20221002152726428.png" /></p>
<ul>
<li>ä¸ºä»€ä¹ˆå¤©ç©ºæ˜¯è“è‰²ã€çº¢è‰²ï¼ˆå‚æ™šï¼‰ã€ç™½è‰²ï¼ˆäº‘ï¼‰ï¼Ÿ</li>
</ul>
<p>â€‹ ç‘åˆ©æ•£å°„ï¼šæ³¢é•¿çš„å››æ¬¡æ–¹æˆåç›¸å…³ï¼Œå³é¢‘ç‡è¶Šé«˜ï¼Œç‘åˆ©æ•£å°„è¶Šå¼º</p>
<p><img
src="C:\Users\Fantast\AppData\Roaming\Typora\typora-user-images\image-20221002152752906.png" /></p>
<h3 id="åº”ç”¨å¾®æ³¢è¿‘åœºæ‰«ææ˜¾å¾®æˆåƒ">4ã€åº”ç”¨ï¼šå¾®æ³¢è¿‘åœºæ‰«ææ˜¾å¾®æˆåƒï¼š</h3>
<p><img
src="C:\Users\Fantast\AppData\Roaming\Typora\typora-user-images\image-20221002152904823.png" /></p>
]]></content>
      <categories>
        <category>â“¾ è¯¾ç¨‹ç¬”è®°</category>
        <category>ç”µå­ä¿¡æ¯å·¥ç¨‹æ•°å­¦æ¨¡å‹ä¸æ–¹æ³•</category>
      </categories>
      <tags>
        <tag>course</tag>
      </tags>
  </entry>
  <entry>
    <title>åšæ–‡å¤ä¹ æ—¥å¿—1</title>
    <url>/2022/02/11/de2db590f015/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="510eea55a138ddcfaa7527f655548aaa2fe2db09ca94499a108f39697717d0e2">0b64cd3abe5b0a0a039a37d86c66d75eaeb9cde5c6dadc3c6d4d424e956e68e5859de93c067c256c245d75df485065102f6e2903c24acc225d3947c06b46eb863dd4b5852f98aab38803012f003c6c5ce6fff79afb10e1792ca7214d925987e0c717d406814885b789fb91e2e91f62e79489c1eb338c6615f677769d830ccf190fb9bbb686abd703322115c45664a457c7196ebc5128f0dbc61fa90adc2470af75105015c70e866cf9e65b8431b286f91724aada9a9fd5965d62719e3af60032aa7a2f77ed452eac7ab39f33c601c5d6de7df46cb4de25570ccbf95f141c0967a7b34c72683919d199358e5f05f83fc8af0d4a187180a67e0dfe958e0af9d66d33ab8d086e02df177e615e8042752039b5aa8ebbbf03fd595157a16f93e9d8aa7f0b856ccb5a1ec0ac5a77b1362d12bdc9c4ff39d2127ba4fa1a34736ed266b04fafccd0a982584b7e617ef2c7abee5c2cc4fbc96fa0391fe18bb0613a55fbdf669e91b681e570f01a34cd9e83067c84610cd0b34a48d675bcea762f0ae2ffdc3f3c513c6c7b618e16d08072651ad57ab1f24229ef211069fb21f88763d652ad1c34e048bc1f0ebc1ec29fb005a9ff0b02c6514c5903c63507ab30dc113c45c52d85ab6eb261bd57f2409a2b268dde3bd908f5195e3dbae14f58c038feffa9573febbff48309bb68ca7ef9866514f3bed93ee17a8eb8541fd909e71c9ed14c7aff0002dce95e6e3e1c35cc9944e3f52f289db4d9edfad48c297672d13a67000ac344cc7e43dbab585aa36eb271d0f2676f323a77210618bbbcbbe77036b202ad3557a478b20bf1d957c11bf1f4755a670d328e354cf9a7b8d1f7be8bd2af133e7818646806fa1b26642b878905ab6006b5d9fed921becfdcf7fcb711e0e9e01718cc6968a1ed0a24ad7f1e86fdbd3772cb0136199ae59835fea1bed728e7cb936edebd10b4e5de66928aaf6d24769ee34fb0f636c6a01cd5abfdddf11e9787c3ea134ce3c2f7ea34e481864c730aebe7cdf8c2c038a8a6b7dbdf9d7a274cb6caabd213fa36facc846b81a4373eca73b54d52adea63fbab125d2ebfc4ed828a7209dd043f764c9fe9d8303d85aca6a8980113479cb9199a87b029e2ed40da4a3bf3de90bfa1aa3c8f8302b71d9724793627f062846c54cce0de7388f11c3c14f8409cb15170d03d7a926b3bbec814d6271b4311dd68d5dc672ce65b660a299fb7f585540a3cc25ae8d3f38b813b41b7be646ff6d5c8cc3fc83530a636d1f1777069213f38668c754c4519a739c146b979221042759ce9e2d49738007fb30c0b835235d81f300001f0dfcd032974170d531d242371217636480fcc486c1fab1b415046c0823ff1d13f75dea0b25d121549fe5c852522d8deaf1a215523c79867303c9585c3bcb4316ba2d273b3b82cc07ed305f2c0ffdd6f9b21ad4e1fb537eb4256b0ad0b2fe5becb1430f8ac70a4c989205eba642055b9ad2722300eb1d66574140ecfe0158f0a659638a2bac74f1b58a0fec425ed37923567a1d8debeef1b7a8b0396bfd1249b0d8382c6bae1cc1623f30ef62b1bacc5f6a7852a8997fa35e460e1cd99bd2929c858767c47a1ad9fabd0e84195caea1cfa378e7446b8cac82dc2194bc803aebb59c149f0a390f11b5c7038d9899e8d988e1cebf9ea708c4d70a941d07bd7079db953245cab2d77e73fc61f561659c49be685be08c3f345dc642169b4057cd09b8371d4113017e7e7a24bbcd7a10f9a3f30ab73d1fdf38eb3a6ee7b421e57ced7d390e62f09c79a5e31df52bae6dc6d11d9bf9d2ce85ba980acd276df21adeb0b278494f2f4fb14d02a126fe2ea8e9881939d022817a5a11e52e7d7f7e7ac4d31bee1458b9bd0f5e30803fbf094951af3a9ed088d92606512f845800ada2e863ef0eef8289a4d274431aff1c5bb72efd3813da6b7a1b6f7945ad86b2ad0359bad468a33b743c620d0a3a1714ba5abaec0527e6186ca1928d86831ef3c1115894fe3a4cc3b465f18fc101e24da8bced645a36ab666e50e6dcf8419e7eb17007966a07081ec298f5a7f33031a07f0bf3a8b86c62896af6a4f8b7d44352f7c934ff948d48be2ceb36a8effb5145673e9f79c91bfe6c7034bbe8b123d8763a83307a9b0e3eb84db5ab7de79fd4ac8dd3d97035408dcf0b53b9c8ab429582600c17cd4cb1ac25bffcfd54200c54b0546dac30031640fd18b61541fab8b2a3d2dce9201b529753ab3a3c19f05780b173b332dd0d095e58590f87e31841e32cfa7c5c3c2b7a372c99a2273d9b249fa004d08835a5856e1d96d68952b88d7caa4bfb0490b9a9c803c40102ace5b9f962acb9e800e353ff558476666bf2134ca3377a9fb41f6f51663b6e24c2e87cb8c7b32f688f60120e29bffb497ccbebdf92613427d50fe4eaced4f16340c63fb8274607d07bd242d7ff76062020145f6eb5021a6ec77719945a8b5f5f79e2e9a02d8296ed824a5d8b61a9ebdfdbe70a984bab86da09a6c1e062657b062f93d4d01fd64a96bdba437d7cc9508f3fdcdf5492ea243c61286a94aebe4a29c6f50e33c31def76e68705a614c1c5fd41954ae56a2b1538ab2513140e8d7dc7d1ec68f315c8ae3d7c1430c232b90c0485a398328ce8bc18c008fea0d1997a2ffeeeb472172d96e31d4bc50544e8f70d49dcb14239b18a0ce8187653f25ab568794df9d071352ad02f5efccc8dc835b6c680812f29566f3a7aca77bbb099bb75ae9bc79eb8a5112c7451e84f1cb4f7d1778e17fa8428d27eed9aa609c38f8eb8ee74fb2361a1ce207b1520074ebbaa74a29f5dbbff9aa9b982480f09cf722d4a417aad58257ca58863ec8ec6408dd8648e4bab954050bba11ec88c14b72810b3506acc6ee2e40fe787f8e2811625ec33de6e8d358493730a3cad081232a89c1287f23fa3a057970cb729dc3f481490bf055e5c5a7217863ecfb6124ef2fc4c29900fee3339fb2db6220020cf41702d030d72b51830c714117f1fb113908c3797cad2a31bb8689fa23e35abe41165206b4e680c246eb0ce133e1ee296018ef45dee04d9619ef335705d32dd73434bfc914a2b3973902cafd1ba2b7072b9ccaa8ad5dedc2d415003724fcd1ef9e0908c9b6c5a14c08af1b2cc4da694ea47ccc1cc1551e52f57d2a6a25a5bbebd7513c9158e05a1cc814a2f5baac9da21901a5e02ce643594bf2c0bd17c6057e81aff12070e8683dada0b33153587511077d0c99bcc7c805c993da667e133247a752cf1f69686b502a4e0029247bf9f6671bc88a65b846cb505e11b9d7d9fbb26bba3e9864a2e66ce9df357da60789e99e44f2bfdb4d19912c4f1e622bd072e8ece534a2eb12e98905e7674ff3b9cf286d9aac52fdef6438ee316d97dc36c80b59520903d7674a9db47a25c3ef958d10d6045bcdad0223021f1f43564411bcba78d6917376189fe1b04f853e9a09c9a27db34f01316c6aa399db0e83879ba9b3736200247690ee42ed29c62e719059348ee21cab2c88ecc5a1637dc1a13a146ad5ce4eb45c97c5a2f47099d7bc87d59c32f7bba580f7024c3620844a79bf4fc0a71433d5f78a5796cc1644f6aa18173f00574d99599ab23821230e656c800976d2b6b2bfb5f2fdd2b7d03099904bf014a7dc52c25a9b66ca7372aed5334888994c73e066c03eb0b474f8cf1cb7c600699a0d3066bfe796acb42a66637d3cbd3d3ed279872bf573e3d4607e4c6abd0cb2679fba8f38b307d734742c53e962131770637534ac3995cb61cc48d729c89f14009ed2f417e823cbffa2fc56110c7444200335535b93fb87378c1c066dbabb362faddf42469a3de3fe4c758b0ddca98c4b5f6861084178b02165981415148dfb5188cd2a7660075343ddb0fbda94e9799e67eb81e73c4228792766626158f70a0d3d3f1a99cc58aacea149f915a587882fbd4581d600b7a1161da017a0d43e104315582c2b5fa933582974dfb152a988d4fe5e8977bca460bc7d2606d54a15cca0ad4e8a6b0506806d31d530d2beb9aa99736cfe40e0617ae4fad7a819d39b35dc8336fc9e1b062dd9d1151b52662f3679f3f75fdc00338ee9a67530a00476d097a144eafddc6d3d65298e3ccedf0cb7d810c224b035719d50f6ec52be5efeca3904ab35f95d93c7f98c63eee85e97a0467e7167ff9bbf9902f43e41ba789fcc226e48fa1edf2c76f4afd47ff178ddc52691d3b5124c3cc2adb2f158e1e3e12931fe97cb94eac39fcd99684e042bf5f4842c67029e961be42100c9d0d588dab0cfabb1967a55792204b4e32cd5cb3b8607061e0a30f4d1d97c2fe200ad3488dc069f92a8e36c874fe2d75e52ae5470c537cf6c689f39c1c68f16b853b14f817559a2cfd009eda941896b0dc763b7432f866e40cd92719e62127790c4701d5220cb5e9ca76ce00c935923e0aa96a25930d40fff980a9aad6f412df6348e11fc021c3e13705d7b400a80279263a85cea7d872e700bfcae563c0dae8ed03cfd89116d053716279a48d5989a9cf2684f8c47e3d8012a2e915448d3278acd5404f45d7aea96c6c7c7913c4123ba2392ed493d174ca3e9ac1c2c25221967f4e08920e26ed9385ae3ad52c38b521bf5f8c5d56c89facc98096448242034a16a15e78e131ea1fd65f80f685d96b42daf8771d089efd0e5cdb3bba887728812d09e8f5938f93278a1d3a930857e1d34f6ac92efa30cdbf4346958c33d7c2db9ec2bf449f1591d9b17d2fe4f898dad4c22057bf1660e253e6640ba1ded3ff3d3f8c73891a9c24ede191fcd77f0d69488661d6fe48dd4a2ec1306a61a7e0deac9140e293569308971882c7564234a9cfb4f20bf76a49ee2c216b146a36fc502136901e9bbab73f8ac76612d4a446967ebfbd89dd3bd08afbcb662096cc02c7b938069d1f4ecf30da93e3696645fbe895032e6f47f7f42cfd790e6eb4d0c18ef6ef8617a7ff0917b7851e0325b0cc15acb5f884332e15593679478bbab283ddafa64cdddf5c025cf548319f6b81f1f045993a5c85f17728482fad39f233981ebcfce0b7d779924179787640afdc669b5a91ccfc5b0153dfdabbe5d34e947a4a081f58e52a91c2d5dcbc686b2a8cfcc8970c6ce66f67f42446e75bc7c296190e2fd7b038588da20d9713b011ef24294bd4cbc2cccb5f852a570709c3622b8536bd28998058aec29f351d623b6f2ade8b01c915cd2caccb21711ed89e76c5c56d63a2191567c6a136fb63d9825c37f47fee8ea4d3f071fb23f1b8357ce4b78f52f635aa77e475001da56d03de8f76d53c4f02ac804522fcc606b6d07585a483feb379172e75806205b2c3e4b8bc5c4d026a0258adec1bb1b49e2bce71e25199d854f78acf2a50b963179be149508b95fb98f2e72ffa567e96f6ca31a11c0d242a038249b3e6e17d64d200540b92db22bd94daa61c9a545560d24f831a861bcfac0608af37b663f014979a4410d5b8a2291e18db418d7d600a30e077117a2620a78950fd970923117cd676ca85f5281035f0c2484b4b7693dcd5c45447b3a87ba6889a69d6babf81a6ec5985dce5773492f18cf50d5c65847fd4315393d932ca3751a53870c9e5cbc0a9b05c7464a1130ea6701f056a22ebd79b5b2e6e51409ba767eaccb368a3908318c2be547468d0d0dba068362c9a16d1210c294139854204948637637ebc475775ace6a8beb2771d5c763aab6efaf6a6aaaa6d50e299681b0b72bf7278c054a1f1e05f409845ad445fe6712c52e81abf15f1acc0c3dd768b936f9b15776d824d64a03f259d49bdf8fc2806cc9d2e311a2a66dd7331620f77f6a92c95132b4ff0ba1d190270ac2b282bf97870a545f0fd1afd42016241b72dd2fe91de01ff8b7b627a32d57df858168bcbd51099ad3b03a72bf82d6f8c54f0387105f6c50c1fdd430b185fcee5f9f78a43d46f2f529523a94885955a490aba8700c6403bf6026976ee87bc351cb2e3029f6ee5849f6c3e6f2bececba8629ec503c6dae4d717ceffd5a54f099d38ea818719026570cb62edd0ae0c040af7852401ca74b04b6b84dc3ad3c66dd94216845840957fb6af2d16596b02017929c0ae609752e29039081c44c0395e68fbde8b661288a643dd20b52b57ca5a35352fd5c69d56bdefef8cd26db5224f7023f68ec7261564f1aaf41d264e7743b993b40fb15ae21cf764f0afe7235facc1f45b1a81d2ebf6c2d556f41394b93b3abc0ea633a02dbdcbaf99d884f5ec8bcc5095fb98f0fffaece2bf462f4e66a5414085fe86dac5a11f745a911443b2539595a338e9584295b2243d6c2228170c753bd5c207c5f0a217cec293393c3ac623dda61532e37cbdd6d30169bf9e5d62e9253ecb5fcc26422ecb0fbfe1a520e6f3e1bda0139ae59656be95a2add3fb795989eb68f4ad6957b7348e003b3da4359cc09f3ed5e871c34da8d89049d07d44381b4f91567ea4f13016513b01f77e1cf45c0bb50c9b5796dbb1c6bef7d161870c06ee5978abf9236cb7afe6cdd24443269314db877b7a33822fb9f28e97db47e3d39eafc923726cb0eae3ea2c05b4aac7cf81d75eb98e51d571e3c02ce778f731bac5070dff5adf5cd0acd92bbe5495a717e05cd7a8587d08342a8a43b8dfecf051d89ee357ad1bc5de21d0b317b1e16252d620c698a993f36a294f72cf27543208d0cfd505fb67dcca69b01aa9f0549ee8799108330230c8b7b6509e14460ecd0be180dcfba5923b3f1bf86b0e963efac6b97eb7c3207e830f2e29d31ed63f410a13b75ef6db5e497219dfadc7479c07f76792074d9fd5c9f04a0098ffaebd565e751c553ef11c069e64788ec35843c105f51488cc9bd295488988f803e4da77f50b52dab4007f995f3c072ac8561a798d771db01b18c3108ca3709bbde9a8f0f0e38617e24f7892ae7f7e0ca60c00a2fdbb40c037e859ae15fcdbe6d8abe3fb8a1d04106209e268c423c4e21320b81a08495399a6ea89a88cdd55fd1d13d1b9df14896d2349e1cfce610d88820e9d00bcfbdf5f814832e9bff21cbfa8761f6c334e5488184dddf9c495ae7aa2abd22b22fdf44114992b3e57a6b1ebaccbd3c4a455fadeaf23b603b0428a6aee9aebb24f36995c9fe6f7b584f061122254aadabc139ad21a385421c748d57f3d0b2ff9d1b482fe42b7fc373c135f1da2ca8abc8b8e474cf5dcc52278a67bd119463b546eeb85d53bf318e50067111be34bd12101c82c6081c9ff529bfdf34a82ad12113a18b98f97eb21717779875cec7a17e61c2f59ba7a70fbbe2fe6d1b6b84bca0cc6a78caaf365f90df71186a7721a988e1b24346c5963c3cf006b5e379494046300cece890a87e4182834ce8521d859fcb65b9aaa572958730bc31720b5b20fa30a10c2cddc88f0c89a410b72a69d8a9282bbc0ab5ce5bedd75a6a1a780a02b1f299f496e83cb40811e0641b0eb2392cd014a4bae063b7294d1a849908caf1c37af3f09c29ea1506abfb340ea1b6f36a0cd3795bbe81b9b3bb361bd146b15612eeec1d086053894ef48662c13dd6e70da8bb5c811bc06ca92224e68745f7c10d329bfce33c1e968ff6a266d5091f07d21458691399b5068fb8e75106f48e373d66b401d777f1290d73c64cd39e99373a808d7c0844adbbfcd9fcbb684d2f0382992fdf9e2cf358fd0bd0d5891333aae35a8736cfd3fa60f2d27cc40ffb2ce4e0c90353aebc7f47cfa614ee3a6e99fe7e3becb7c7f205d49d9fdf811ef160f3965f5915c16ebb884de6d1f4d0f989da62612569e3617df2deaa5cb2bf4239a40adbcf78d33899f728f1dd27f5f2490625fee178236a60ba37ba7416c9e26b2af133f59911f45acf2ce979bbd4bac2d10126f5aa0a0b27ed18899664b0061760dff5806eb08abb3632126cd0b7a3e41eae9d28fe413ce227da923851eb34c4f3092a5f56d12a777b8e06cf8323a0233032314ccd75c3f27a701c0d548b75b52c2827c3bdc25ea03be44073370a81df9c545664719df8b8628ead9134403290b84b4a7eb30baf0af7934783325bbcd6ffeb0fe93ad93f36ee9bc3a7046b09c3bf0be7d33b700fa9daca63dcaf6a4f4c5d40a294efc2c8c6c89206f82ec023614e7ea41a7e2754933cade8679ab072f520ce6d174e18f40e62d8a622bd288206debcb0a59191e5296705739c478c01841cf6fe7ae03e6380b78c46e8e63254d230ddac885ab5115b7794bff2f04814ded973f15d087e137bcab7951cf86b6af8e1d4cf40fb01089f195f8da31bd0123d9fd20db8d19718481b292d125d90c6dedeb92d1f0c1cbb300e624024fd5bfd9b572492e37ab365412c4b489789ccc588a60704326408241c87c389bbfaeefe4718bdd7429e28295789a8eda580b5b04e9335a8c8d96fc41b48bdb0fdf2ba9f744cf8c321aaab68db506572c4b12bb23f17cdd5a0112cd2620db356d6b4b8e8c5875e6c1492354a5d958b474ee663f649b218a6be1f7c657c680467e28ac6e24942d3b883a1a72f68799df0eda486c5fc7dc4a9aa7cde4697041fd6b9e2b2223b82af3a6d056dc62d016f43d1c5e17afd0a43fcd79388e43b60dc692b5573ef8711b3ffc1f41ce019ae75debe10a43a827c2bf6848aeba454b2e76be9ee25c1b8800f9f22f15c9cb428eb0d997fd52895098d13b73060dbb19e80b08899b85db50b75f447bbae5b705ecd56c7181cd0a72a2eb</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>â‘©â‘  åšæ–‡å¤ä¹ æ—¥å¿—</category>
      </categories>
      <tags>
        <tag>Review</tag>
      </tags>
  </entry>
  <entry>
    <title>GPUå ç”¨æ¸…é™¤</title>
    <url>/2022/03/30/18c6bc9e09ef/</url>
    <content><![CDATA[<p>å½“æœåŠ¡å™¨ä¸Šçš„æ˜¾å¡å¦‚æœè¢«å¥‡æ€ªçš„è¿›ç¨‹å ç”¨äº†ï¼Œä½†æ˜¯nvidia-smiå¹¶æ²¡æœ‰æ˜¾ç¤ºçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¸…é™¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fuser -v /dev/nvidia*</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“º å·¥å…·ä½¿ç”¨ç±»ç¬”è®°</category>
      </categories>
      <tags>
        <tag>GPU</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå¼€å‘ç»éªŒâ€”â€”0815æ—¥å¿—1</title>
    <url>/2022/08/15/bb402ab73028/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="1d61c0fc9529643c45934df25f1801317a5a9ec15f14590d9a4e5a71a20a39cd">5b75cfd994443fd8ef220370f00a3fa4461ecbc081186bae611d070e9fac23e9bc70aee727e83acc5bb7a91a891e516e3ed3f53ca3563506c209cec7f7dd47cf43d7f8ad90a64f771f2c739c94cc8635d2692fd7a86e1afabd60f14467bb6285dd9e4985732f2300fef62c7f85acda2d8014669dc425265465c14a8300636aff0ba4fa04a6095d3cadf517a55e8f51e38db73692bd140f1cc7f31b2d0bc19da8c1dd8a14b5cdc5d1e82f7b88e1025db02739a66c7ddc9ed3f40a4b60f3cea054940df4527fc090191c611597601f26dc9f070070b296626315afe89dbb6c682f6ff8439f43dd46d4bd7bfc0489b3c60f6f9940d72965ba74687751d978a3e4ad8bb332486e98d449ef121e6ef93f1c9f3c4c181958863dfc33587f8d0532f026eb797c3f38c400d667187e7d75e598da336a177ff7ab5956c8a690c743a19cec437c9a7c36b993fb460b129f1e605559bc32bc64ee995b0f5a33eeb1741c82a71ce0e4be7fb99fa6d017e86af11a322d5318e1bdcd86c649e9a4aa52f7cefa377f139797d78470cf275fba9751ff4e5d8b51f88084aefabc50bb0c5c877cf841d2899bc11935d14ed4b4a7618a87b3f9459a57800ebe5725760821930ee2e4bfc42467ba96e164965bd93e264f0e8eef715cd59fc65348f48e98c1f075f0b2073b43db94ea80bdcb44cdd0db24edd6bab5c91618292f0d69e70a75cfec38dc653f1a742aadc54ae7c9757ce0c09409dd7068fa8d9d664996eda7c76711fdf73023fa6576c00284367ac83c6335812f919ea091dba2856d27296e86e3a8fafcca69138f59103bdc711bae1e5d82a1a9d2ee8fdd760d31f7b9b85028b44f28766c3289c6be836a86690e4f9a4eda49791a043037ce46e3b6d72a666ac59635cd7dc3ffbe61aa9caf46f6b459eb56e851f667d53b3353b748a1f484cc95504a63e8b9880a1e10bc5390889d1ce07c0c55808cd360bccfb60c97325eb8559f62c365485b0d9707e35ea8dbd387eaf70a258cd2d55f4b2439821921e81eeffc0077e8a760bafc921cd29bca02d0db79896f3a459f9b1b61b767ccb84cdc315bc7706af0a0d9762a17208c382d6048d54c828c40f3a0b5015c9154aca60bcf8fe776d8cddc87cd4eb0bfe42e2191dc00d5e6e887d11ed873071c046797004d767611a4a32f3948be4bb0414759e9fdcdda1e33da668279b1ff5c1e4bf03478e5cfa1b1c83d0da7a0b45195fc063f6958e29c48afd02e85c165433da66112822589345ef7aa2cf37b1d1de830821262f4bc0daa002da156ba87ef20c825f5a3a212d8fa2a884d08af7ddd678f022a2613c59546cf7d3644b1e0c9cb890a3ec14ace7d9452bda6019a9625e348c6c7cb3deaad044682f29e2ef7d61fa84402f7115d4b7b088ba52afd3314d72891262011fce124d4cec399413efd5d51c7eea8099a88cfa40b1951a32a66607cb422dc0af05c88c74149b14be30574112cdeb834a1a76918ed1c23f1bc39b80324b0458c0cf515f6f3f207443bdc2bd6840b2984ddef36e71a441b6a03a0894f6fd9682cadd0c42f290d4727363aa1529b2aeba36f993bebf34b167a23b9c55ccaa81b0fdb07610ffe25e8d4c58ae96de382622d0d7353fd5e803d0ebd632a245057f5e192ff4522cb8877c8bc1ef933390d35d212f2eb</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>â“» ç»éªŒæ•´ç†ç±»ç¬”è®°</category>
      </categories>
  </entry>
  <entry>
    <title>Tmuxå¸¸ç”¨å‘½ä»¤</title>
    <url>/2022/01/26/dd1871cc8c9e/</url>
    <content><![CDATA[<h3 id="tmuxå¸¸ç”¨å‘½ä»¤">Tmuxå¸¸ç”¨å‘½ä»¤</h3>
<ul>
<li><p>åˆ›å»ºå¹¶æŒ‡å®šsessionåå­— tmux new -s $session_name</p></li>
<li><p>åˆ é™¤session Ctrl+b :kill-session</p></li>
<li><p>ä¸´æ—¶é€€å‡ºsession Ctrl+b d</p></li>
<li><p>åˆ—å‡ºsession tmux ls</p></li>
<li><p>è¿›å…¥å·²å­˜åœ¨çš„session tmux a -t $session_name</p></li>
<li><p>åˆ é™¤æ‰€æœ‰session Ctrl+b :kill-server</p></li>
<li><p>åˆ é™¤æŒ‡å®šsession tmux kill-session -t $session_name</p></li>
<li><p>å¼€å¯å…‰æ ‡</p></li>
</ul>
<p>â€‹ ctrl + b æŒ‰ä¸‹åæ¾å¼€ å†ç«‹é©¬æŒ‰ [</p>
<ul>
<li>å…³é—­å…‰æ ‡</li>
</ul>
<p>â€‹ ctrl + q æŒ‰ä¸‹åæ¾å¼€ å†ç«‹é©¬æŒ‰ [</p>
]]></content>
      <categories>
        <category>â“º å·¥å…·ä½¿ç”¨ç±»ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Tmux</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³äºæ–‡çŒ®ç»¼è¿°ã€å¼€é¢˜æŠ¥å‘Šå†™ä½œé€»è¾‘è®°å½•</title>
    <url>/2022/03/21/70cfb7bd8141/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="4eafc87be004f2fe6450b3b1187603d145c57273c5c643dcd6508b8936edc57f">0b64cd3abe5b0a0a039a37d86c66d75e30f1e5cc7662992b49707d8fb1532b69399debf3853b2258ca954efe35d1f8c5bd240504c5d2baeffc97196da2a36e61d5f8a60dbcda8be9c594f5556387c07fb682de586f5ae7d6a50c917baf4d54f0862c449297b85832444e70ca69090890ddac89cc2a436f08f1c0dbd21e6873b0e58d57c1b38a49b41fa8c0e67d43e32fa1e34777f2ccacf9c1d5468ffcc3ed12d66cdda1d779a044bc0be7fdc965365748e4773167d46b07566110f6088839a6d82913300492778bbcab5da1c68a70b13cccfdda91a9e1adbe37e8b7be858c62c4c6a621aed2b8ef1193c4d8080e6986328ecb374f1a8dad3ddaad6dc11b3f8c46600f971b005916b0e49f81a9b61fb259361f307287571d8d2e25d5ab6626fe9cb45227b68955988a39ebfa9879013c750f46c1c7753bcb0eefdb62685e80dba4ede9d8ad8a7d9e4428ae4e6c9aef107b5c8ee4bb5c0484a17bba61e414cb34da48ef487ef122212408a2ebe107094cc187a1a00157e9af5a93d7e804d4782fc3ea3b244d1a13497609db33835d72372212f64f782a68aef1c18c6fb689b3843d99988f49bb7adc182783ac104d1f56a7588c4d430f9bbbe08acffb5b8b531c7b4917821cf187d4fb94e1094b353649ff47117542cf97ba86515c181cf9c0540a378b6fd96fad66b8a72b3e79455f29a579bcf67caef08c3aa8d0b99d80fe52883c5df69a7e3b100a6afec6809593e9ff48d61b81ae127fbae3d2117f937d9933bf54c0f76f61f59b5bb5b42934e7c6c9ddca0f05f13ccfb275fce530b20b3ea5e2afc58ab6b3ac9dbf3e85ca524fc59f28ec6387d646b1f4c02ca064072e7213ce0a2f17e7064b957b4ec37383e7dc7f8533cd6dae7149480c4f6c6bc5923f4179c5df13fe46341085410906c1be463ec9991ae1e06e46a84f6994d37ff53d6349e592ddf6f6e76b0907f804f4082a752c014021d14c8981a81f233150b5d934d2ff2f93c100f21c33833130ae23171579b92ed0ad970a9064784e81373f1864f342fc8d23df6cfb82eb15644b1cb413bd8c96510fd83417098ef27a13d41cf89da8c7f9429e19adf9543cce25e5e57f0f819c66d91f5a606ba6f8c80b982e21e0267f065a9a65fd63f2830147e57d8f910e0f0f7762ec948caa94cc7cb936b492036540b741cee998c67cb7e5bba5280b59e83d44926e1a129d63058efbcc952a5ac166bc47177d5b6dff3534a37d59c9b276485599ffe0323c57ed4047f8ba1eff7058f03aae450a41e7a4f01ca8053ec3a1d7a84055dafcfa70eac567968648a2c2360a9849c4a673a5d287285cd0e3a4ee09358708ce2ad4cf9830b89eee93debcde71e3847540e0ee726019de7ed0ca61551705a67e0dae57bdfc0aeaef5dd382c608ec6ec5376956c750bbce18e0000d76eaf5ceaf0fd8c5a759be288ac3ab7feb5f0848560add3142db45c108986bf21f3c98cd5159f71eaf52db7b7c6f0d7bebffb3b5c2c18e921569ace25d7d47295812aafe4ace9f9701109708be8281a3c430db9031591ea9350bad04c1252d03efed20989cde1628c382ae0f688c685de54003c5587a5546ba51a0d3f28e8a57d133a21ed3a5445c6e4be3293b4868fa76dd46143fad504f9bcd033c831c7bb14e612de668723f9ab482cf936788556d7a98b239bef0554485805728604d7987534b8b24613dd43d8060d7ccbea5f4894db61ad7d75b21bd712db8f98d360c1ecf8008781140abca713b294449c3188a5440b06966891a855f63296e12215b3b54b0b0f1c301b46503f980e0d4825362931ec7751f7a053ebf57e7e809be17583374525e958e7b5c4407f870cf6c3023705a53946f385098eac8f17d688c5937d0766988a722573b0c278e6fa4a7d1e0400b13af03bb572ca3b23f02816f2178f67db6d829dea4182eef4a7d4fda6c91a6188d153a8a3f7e33aa57803f6895fe8115c34962507f083e0fa4fe59cc207bf06094aeaa7a149308d7b68f450d28651f86459f9d6498854f5f61c25128610974eb180f78eed024b8f58c575ef93f06f09aeb95b8c23968427a3754ad094ced75393b3fc26a570583312924581c10a0b05d5c2dd7322cffe57dcbceb45c9c71a9c9a336c7fa8c2e4f5af5a581b1a5cf7c3b77af69dd1e6b95200a7e762debd71ef2a1e636b0b817863ce36fbd753a202a41f2e42bdf32ca56161680dd6a0a33f6770d397df397fa096271b4adbf532575b3884ab472bc4f4645fa189f5da4193956c0066bd04686d5a9e936862a896b240b33f6f40812fa595fe8421ea976dcccf19aa424890c64fa5b82eea749bbe43b4306ea57e0eb29c5b12cfb07e77fe6fbb3fc7d693506cbc0011ecda777fb753b4ec7c796ed7ecf4b1ede78dc1f3fe31db5a7b2a47b26cb709b3aea3204d7e18d27989ec30003e7840c64d311d9e9151999bf20e29c79560bf83489304498ee14bf33746ddee710dfc3a94877cd411c41c8c57459845b9184b680db0b80a6e0fa4bc41ad3843cad8e39a7e1173877760f44b230505aabe918e0cb7c0989948b4fbccfae759588b98742fc00b9878808eb01a3a3763055007881cc55cdf68703168c42153061b6d413957b4c8ebb894072127901ce3ba09d626e7a4fa65ef6abd3dde42bb2b2f60983ca080a368f99ca55c4c838f04c531fc163d68e61bba5658232f3f1d4b37975f36935cdb7a950137dcbb0bb268c6b1eec3f63d2d27079cb5a68e1e2261631d2e90db167b3b3b0df31f7980e4cd35e3ca1bf9075fc94d6392664c1e19598bc1996fc46194b3a9ff6ce539bee6c7ceea9402f48d81d8f1a941a39e56d179fdff249844494e4506005b260c73fda5831440ce4363e980ff50087244035e3202c5e87283d12c1807f19244495aa29f25eaaf7f16ecfbd69eeb69f5d1cb5b8c60f8037873bf1eda80cc98e9a8ec9772a313f7aab21d056cf65afdab174b5a4e6beea611480fd3abb253eef8db2cfbd4a13869ad03e3e27c94fa1ad857d16ac553d0d1487902a7a47c41305df45056515af178a5403ca97ea6d95f78e5086ecac17e670dc74ef271b7a9dd576f6eb8c5e59ee28122f81090a4c43e254a6dfde0713402523db74b22f0a867abeda9e7e13a4960798cc38890dbca29d3acf312ed3ef8db571cb1bc22f5806639fe146641ab5f4f8765faefd1d72d2b4ced9f7507dea31b53b0b6626d2a59883bbb78937241d5ac07c6a7ff958b11eac1aedcda77410c2c012f46c50d7b6ae403138e4ce8a2f6d827e5e0feca3f92fa66151cd8b95b8879e8e506e3cec3950fb29f51c1d6d6b6e57239378c32515141391d1d6bfe6bee3f1a3202f346b16b286b06f1f0e6bc5a7515518f2f0339b42e0ac2351e03755f1a15d684691fed82d5e4a33d828eab42fd2f7d42d8015916583a79a8fb5b24cd41993a823284a2e430abb042f83d877599295389101c8659b4329c88bca8b538fc0db05017d8efe0861448257369c61357f61553b0b509b7cd6b872f361ae010d59d03e2212105aa312d663e9bf7c13b2e7daafcdff779548553529cb7b0be029e387521112347647fa3ae8b1203cc58356715605a52d9bddf05f6d88211d53e95c63b8d0b08a554c68f7502c270bce40294bdd546e3d0d3eb9024559023dd1875067c360c40d6a6b5ca0643bb2efd224ce4621a4471dfabbe42ddc428711bd906db7cf66b2a4bb8e8045706b1305e1026be8aa79ba94b84e242e8581727ee1c6a6bfe4dfe8963cb762612d6829e8378301bdc0055a079a8a3c16cce3a0878089bbf63bf642aa1ef8cad627c37ba467369ed7ff9b4b7a457864f6edec122925b317b6a653bcef7e2c1bfcf222c4d52b3cd57ab91f022a65da00313ad0f163ac2fb2cd98f6487f51508645e859210e4307c5182b71ba69ddf7c385322c5f817eb8fba21f8595893d8709a72cec63d0f09efe45ad78175b52e11f01c47f9adb2ac93bb43fb07010d5f187add1a318f89a45476cb872d51e6b2e853194351cff0b6a055ec8b9e2c400d39f44e388105221adf8a5f4c74f57c7a8e9249a1006ec148e2a69ece6c25093a15b2e795326b00ef700e8495c94dc9a4282ef83225085d1808f9b512926647cc5e5f7bebbf3e663852f367dcecfabf21b0ed6ef6b4f591a3a17bb283eafba64742e5933353a2314568bfbe9114f3dc7ed9180784ed5154fa39b0a343006926dd93555b9047bf969c9906408f9be64f45dffb9ebaeed5dd0d07d514244895452b94a33518cc673895f118bd623c423b94e0ca1f19c82a4adf6604b50bb0167ae230c5aaaf2893f2fb9915dbe0cd1e3c8d177310fb86f22b79b6c65c4087cd98c10c845cf4021c340c3a97c783fc03c236d94330b0cc25f4687cdff4a554ba95bdfdd005c7bc18618bff28b8bde25af09589f8ef27f543f0decffd296e6477190584fd40190684deda9364c67636699639324116e1392b8e9fb0e27ee04da511674b015f6fa92f20489b2249ce4346896dcf23abbae5574843af2cc14c5386ec0b1c71e56d65dc7b90af6e4f11965c43476032e6469a1b48623b1c5f2ddf17f81df06e5dcf02fe6dcca38e65e4a3c665907ea65208d51ba3e3375d1c37a840795940b8cdaa8fdf33a9b061286755ef22c89cd5a5c74631957f0cebc8822c1716179b4bf7b04f8babb7e77514dbf9fc9e3ddd8570cdd72135fb859bf27ddab83c2d14384d1a06ca9508e57acc0fbaf32582e8439e1387994b5a0efdbb0e0d94dfe5dca9ca6e61c7eacfa9927fc30a6a100796fa97e6ccc52412fee5dd95b0e89d7d3b06e27ef2d89725bfb73323c157d3599d9f6ceb499eb2c2534b0ace1c7fff615ba087b694dd8b0e184cee7543da849d696bf847040dd3b7443e05a8ae095b5274e833309fb4ac18ddfa5e4f994bf51c41076eb57623f484aa77353433351082f095bd7238b3f224e58bf37cdf09f915d2bd9649b75ba4e7adcef39afcfa9b24f4d0ed66d621828f310173ab0207ed0287091a1f28ae0e328eeda0e476b953994b4c059e843229f05b6f7caea4b93ab993a7beab8215d4166bd8c0b8858491229d54ae0673764f5e8823b506db8f37e78c9c2ab3ea0911dba3bed5b1d5c6b19c54382e8b1dd8e53e01f00629edfca3ad9c3e924bb30cd989856a286484f6fdbfdc43dab78c34a501c7640634faa128ae7f10e49624f4837bcd9bb173c1fcf18a80814296c25c9fc81d645625ebbd5690652dd20fbffb81e2f13e80dd9f8f359b2b221385bb7f7a2d1ea0dbfbddb82d6585276ad8bcb914669b0d6c054271929183a2bca83ef6fe6ebb6f378c0660570bd21a1d2bc5efc56502dc6f502506af0223c6f6518dd5d11f31de94006a3d68a98b793b0f50e40253d601caefc3117111c1c8c035f48482b44565dface496dd0bfacb7a04c12a4c05355d31135a44ef7f236120acaf41d60f05c774c04605d3388eb4a86844a217d31e19e234a359a8457718f438b2ee73886fc2092d1becc451183ffd72d46757243473cdf963563dcebb9abc6c9cf1d1c8cfb4c8a673163db7a3d0c4bbd1d50017aeeabb29ebce994f85686712a7b858ae8460c8cb5c0f74e9a2e6b04b8956c347a769734d8e4c51c8790af15c679c2f12460368dff18bb9d1a37d998e782d8a5b2d4f90beffee7614a60df96ceb8faca556dacc7d76cd358c4654fa2d6c937331116ac0c58c1f582faae5b1acdf0bc3f8069ac258cb728df21240ac8b3c002360cb410551ed206c910efc6279130be411f65ac400f8267475053b05c7db98e320b594cca49545953849221b5719f05dbcdf7ee0e9c9171203670473613b19bfaaaac460cb098460dfcbddfde4c111ea7b7893af5b8c85a792cc182cfb2109c5ec1822f03f43e745d8699e91e9c86eebd188a1fcd176a7392fab8022c35ecbbf32261c99253b3528e982af571319bf448c06218d039923d762056917a150eb7d9bf9cdfb6b2a7667b7114d8f37bda5946cf192a743a106b65d5b66833800881d6a9e5d731dda407a94d5aca1e2fb1c7e39ea364fe88893c153c9754da582ec261ba8799294d86103cfacd38a04390277b7e5c4171fcb92604d157b69f078a90ae9a2708565ba9ef00fb85f114d8d90512c855e0fa38dff9e6f8d465949abb53b291e06404854b8f02817a033596d203d077544f1d673142b287cbefa3294432d736fd2f63b0a7a25e8dd1cd6da2dc7698e68d2ce39ca0475dfdaf49bdf4923e632e36cca2e54220da5b698977e7eea565508ab466f35320f4a35e68c1414d450bd8d7f936f565e1ea986b4c0846d1e288e9e0353f8abff28677400ca7a9ae1aac0a53dd74c55cecc479c813314ddc748439ffeba94e763f4d8d7e93e1fe0fa13e76cf9cf4a3e1ceb686d8edca9c5b4d832b1a53a9c52274a96dc453c0f7cf891f7ede7d8285786e8430389a6ef67316b1496a553b1e6c169f9d756269814d2b93a5a4a0273b79f327a104fa9e946069cb4fd5fdb49111a8b0ebd1318d64a7c6543ddf0b821cf1735bb6a6136214ec31c1f93260754eb44731ca0976b31d5ab14debcc5eb977c1930817e2c2ec11ae6f8fc0f0a3448d11f5d3aa9a3fc57c370d6ab963e49f8f6efdbf0f9a80859ab0d7fceaac90f23683d5b076add1fadf2744c4428503b457399991095c0ca4a6d5f050cef123c974e8b842bea92335a266b8e9591dddab9f5b6f76e103ea580e4c762571622ec104a87d018ec0c521578a7ddc32f138c58b203360c0d00642397402e75beb905a87dd639447514b7bafdc40e10c29eaf6d2d76862dff1f632ac3b74d7a674155ce3ba956302a1bb7c39dd814634e1af9dbdb672154242dbbf853a5ba3ba1476c1fc32e365bbeb71e4757850014cbf0440f6e320e9bebcab3cfedad9c5e07499c5987244fce8ff45bb0d31e10a8db2cc57ea854a92346e9675379771fed7a5e66360cf197bf7d29781fefce5bb744a7da92b573c3232fcc652f3d63cbeae0a0b5137aed1f764adc3afc96f520b6f762734a223170e731869af7df52a1edce9580840e391b2872f8f492af7513e93750f06639ca87a0b741adad9fe565a84a9f8d70a7b54db1f044b001da9b210944317335cea08610c0457a6b89d2ee655d8276a5cad62c049b21fb33779c09fee4db7698d9c696803d48c2ce0b91cb53fa5b739246901c7c5920ea670bfba039e85d2a570995473ba11a857317fc26f20922a356ee28764b300c804216afce2718684aa8b70cce8efd0acc9c5f6ce6a928503180c8168d79f5a5e2fe4af02932694a9ac153000d8d677ed2a521761f530906be91f44e1d3a764f4197d01b65f6fd69a5bb1a75c585333282576e43ee397fa883a8b3566f2b2c0049baf1dcb728fa767a83c7ec90ca9a81b1d3aa6290e8e2d4069a95e25b43224933492d01ddb2c1d3f6618cc4b7666b075b011b943c9a767a3998612dbb14792eb8e24e15631286013afc6c610c268120082eee1e8de8f881bc04df55033e3d6d22d54718bdcb356d8e27b4cd11895cf9a3cda9139f54fa87e24c2386e39c7055694c0fd83f1f7132101e7b1f759d880d56c657585d9f06cd5b4fa942e83ee91b30b3ff45d98f53fb12bc27d4189f391775318cabb9bc7e90faea7131592acb2798cfbc1b68bb2475a426dcc56fa40bb27c0abac585985bde26cc5f3dd4b4985e62309312db9d0ac60431c13fa064c451024d2319d9780c0fee7022f7be69211b3d6b125133ee0fc32169d460167f6076a3966a7b09c93e8d72d1dd42ff844384d68e8b8f1e169ed402a48329bd6856798c09b47c9df4cc26831e279952b6015f3e78cef715ae616f0f352218d2532aa045ccaf9b44b514d55f6e6919432dc5badf1be2e3553d194124a03e855878f156d64ca4dd9b50d8d75db688f3d11be48ecdfe664beb92d31ab94c8d94b02b4e51212ce51bfab1413123f60ea9f971b30d91ba0332e2f206121a61a667086b2e055304fd24243a0052aa3b3c8217821dc09cf9c7b3296d2ced9b8f006269785370b4b1ec70d36a57581b440c17c10420463f37aafd864fee37e3a3aa94bca7f83fcdd4eb64d2ce9484da1b948da0808721a0a6481477123fce6c9fdebd2d1f373f7690fcb0de05c8be280acc8068215ad3ff5c2e1df24221f5a7634c401ab70327751ab5ad1fc4ca8fa8b8c1d97fb37a43bd58d3509382b40f00945c1e8fa78639a99fed3176d657ad8eef3db3c3d760de1dfc32d0c82ecb0a2c8dda6c6e320857768e3caf18b6f304054a2a5fe2e179690d8e0c7561c4fbb837b63b261431e80581863b20b132087e9afaefaf1709fb710af8a2c22b97c3cd735d9786cad809b963ca35afb4734099e0ebe370bd1994097d7b886585774300f8911b17fba7a4f22f0845f9450498530f2eb438051810221c4d0ea3bfb3fc5db1be13592d2601da9951d26801a5d5acb705e6b97134eee40d14ce563c1070aad30da130e7728561f73afac576f4bb9de21ef23ab88bd8d56f693b03c5f804a90bdcd9bb867ef7b4cdfcdee6235ddb522af4508b491075c16e705f2ab937724ab3e9657343fb500d6fe51aef269259374de1b20fac67ba9440290c27891f6bc114633716dfaeed8ccdb8f89d6c027e7f908c300da18973d132b27d6d7efadef95c4caa9789a3466157455fb69e472438c919d6e4a619f2505585a87fa13b9048cf41cbc72d964c65972e3d5424f89f47422ef4318c01458a57d8ed0e9daff09a98f2e1e930bcad242e68f302a5aeef7cbcf6c1eae5eb501d1766cdacfc1a294aab1438919f38c75d63d1718bed2ee182ac92e6a3165ab5738ba627154f1ec4c36cc4e99172930e7c336821fc2a891e5974b96a206ab5d5612414e8413d7ca6f4479c5e6514f96b97ea4ef97f9b512896cae1fab0ee98ea70b65323c7644c8faaaea4f828759d3cd148847be82656d739b320641936ba8edadd15ee48f233870662a4469eaa367a2186ca067681125a6a4bc0e14e49469ec1ec9048e47112e005c951af09e2eaad4763a8d95b3f64f1048e0fb3459e6cab6a5b571959d02c317b98fb35d47e0c235ace4b7e91fd5a73db891197aeca5604a5fc77dde480a269d4962cb6bc0b97c5f063e7b17bbb2a43b1061ca11f24e49fae7dc0e7dbd6d3640b16e36ff5705e3b9b14f3f8e0235c7f44c5b29878387c483c65150b82cadd98b07fe5016758efe658e8943faf6297e20a2fc857e42b53a9e01ed47a08a0a967dac869e5867a2f0fac5dbdd26c58996b1e640717d00459c1c53919f1750c722d657322a2d42afea2821159e8a29f242e0d878b60a74c8c209bbc755528a0a478300440997656158e6aeae5ceb5b72afdef001eecd522f01051ad2c6fbb786f56df131ab6146ede9f07aaeaceaa8b5af6572fecfdd76d6171cdbd0cdaf07d273de1fe3dc77f31220124ad9accc20c98c09d1a697fa8d6541b23aa441982a3b1992a597b57789ae491ff823f8a5d4b20957bd2342</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>â“» ç»éªŒæ•´ç†ç±»ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Methods</tag>
      </tags>
  </entry>
  <entry>
    <title>Javaå¼€å‘ç»éªŒâ€”â€”0823æ—¥å¿—1</title>
    <url>/2022/08/15/ebbd271e8df3/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="7bff88e0012b18d8d7d0270af5c6c0fe7b6a1bc7f11bd1a7e92faf07212330a7">5b75cfd994443fd8ef220370f00a3fa4461ecbc081186bae611d070e9fac23e9bc70aee727e83acc5bb7a91a891e516e4a7b3fd9cf39579ef096d21236333396f794cc835ab3097bfe35b4dda2385dd584508e057a30d7bd06ec04e2dc73c3f8741b5b7dcee0a1f3f9360ff2a0478348e84408b422a74ae1ebbe1e485c4ee94a138d82b3a03cca25d37b022cc57a256448a271bcd406eee952fa793fc4adb35c08aacffa6f8e5d5cc8d24ff852792129bfe885e0d7571801eda5c0b47272d7d8ab0040619816e92492992688e9ac6eb9d76d9d79289134f74441c8418384a7d25782a07e65f33f29b7f808a5fe498f44ad90f1f44347298e83b2397e634e01ec7584df70b79831bd9194f968e34dc0808f303675c9f345d47c6fc7efa752356cdd6f54ae0c9b3ab34d456302d54140c0bf1cdf6f407761262135cfc21706c5ab18d3a0b036a6b3a5c2368a07c1aaa77dc2f28175a783cb7939565efad831c619303b3bd0890a79e95a3478c502d3da62609a3fe137013b832d36616f780effe126cf07d8311919e28fd941e7d35d1af90faf67e78c9234fe80b85296b8498c02bdc9ea6a2ef507f0c3320bd6e382b42e39f7fdb6169d557bf0085443e9ca26c3f422631a258e6154f5c3f5ef4eaae9912be7235917368017516bedb052299f1d5bfd82433462771cdd533407252baf3085ba5f3bf7d582d45757552e911824002deeb436402f16b79f1226c7127348134c450b6d11470ebff8ca358da7e05059565f3c023fbc1f2c584742ad8d921b7e1a54d081d8c26f6a56e70120a79058ff1710cbb4afb58a684c38c109ce21a71628f99242043c8de76703cc715314eb06</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>â“» ç»éªŒæ•´ç†ç±»ç¬”è®°</category>
      </categories>
  </entry>
  <entry>
    <title>ç§‘ç ”æ–¹æ³•ç»éªŒæ•´ç†å¸–ï¼ˆå¾…æ›´æ–°ï¼‰</title>
    <url>/2022/02/11/47deca447e0d/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="52e0d6af68aa399f453af69bc8ee38d063a1c48e167e817e4e57135420d84aa4">0b64cd3abe5b0a0a039a37d86c66d75e6ec8e220ebc13f2625638343d94e3b654708d242507cfe6c32d1c8eaaeb7ce715ba6f5bf94402f27c710f076b984cdf666814bfd0feddd6bef4230c9b5fc5ef63e0abe1d8a0e076522fdf5d47543cb4a31cdb81d6f51075c9c431920495d752565dc8362a2dd4159a90cd1ddc842263881d6551575f2ddf84b0e16eae3070efee31f714363128f2ed57b4daf59d6993581f3d3e232d9f9e0e557255c6333fda79be78b77d10db6f09464976c5bc7fffba2524a64aa1aa741cdb2378fb38f145d7ce56e3d3d0854c256441055ac06c43f3a6478ea5f16ffba691bd8ff66ca371bfe48fb7166cc7b818aea63c9a77f0d9c6a8527a9d912e90bdb1e31a5bee8acf9af1e955e693460377f6d2937a35f54aef7260b4770e3418929728897786d982b27227b8565d377edf1686ff3d4941ef69929b9ed7ed143ab15b84f24c4a9f4499be4bcf618b113d9a1e8725628d5efe944fd49feabeb6bae8ca77f71f6cbcb597ae7aa7de63f64c306bb27737fa1de9601d194cfd19c8b9c2ddd4eb5d850715f733449606462b97e6ed11ec2d87eeb467531325b372b785ec61302fdec37595bb877fbe933b62dfd5042fcb8e48c7567ddefa9c1d58d4f2794d3f5fed7099d680e3d7aeba7ad8197f9bc9f8deacefcfe414a3e85ac4af741f7e1a7a4f17b78a02b69181a17d128000dd406bd69181fb5eb86d06efbd3dafe8548ac7d24288e2a04ff53740072ee4d8853fd2891bfcb560c20822c6e22932d1520e9f44eeb60d49f52068a95800e6baf3bd7c751eac99abf92d31f2a3ccf5e5c444f32e653728233734f63946e3c25048044e68b84cc1d041f08e88f35cdfe33217045fb9cb640337f5d920e2e968e8c62c7889c70607cbbab5bc6b156c122a1214246ff2b7d2f5c96a97a92ff76b639790f763d3536a76e4074250909d7973b68c949efabaa69d22a513a8fce553eb2b11b39b6257e9e25ea62b75da91193e40fc6e707c3eab91067238a239b0629e872da5b2b060cf3c439de3218741a5077089a37024a311745b8a73dbeddf49d44f5dd53a8529fb1d3a4ad13430e63c947b67146fe51461385de5c6d85534a8772019745d90059c564073ace9085d33e011d9161e76601d3bf98e4911b7b6b24ef29429166070ce2e51e310ce7c27ec786874fd9aaf27b405d9102605236c3c714a42aab6aadd8eb2013e3247050367d7bdd5423c0b93fc819f370a38720c5d54bf866d00bf35766734ab30a81f2810e78295704be3df366aeb5a59879728a9eb61ca49f9b9178c9a18c3b11af6d1a15f8681e4921d48bc6e9f39fcb71659434da686bfcf1b81446971bdfa6580774490b842c61e6edfa66f6ca757e76dfd45528e1e727a46456f48fb54feeeb989857db9b63c345c43780848ee61b71893a20f4b5064ea75229d0dcc4a449ef89a8053cd88e2a269f19b5edca3a470be909d49f88f4eb22b1a57f4b997f5d2e0e0ee073538e082b51144f3969b125bd57b386942ca8c1df2b3e8f0ee9b19739492246d084aa5ca2f5470a233b71c5aaaf9df3117b5adbed4023c989a0277e93a1f9ea2c26ec57bca927e160f093499757e5d1db2a138a8d7f20002babab72f0b0582d77258769292c370708a82566b62ca43cd0dda08cb8753f61fc91dc7e95f6ae61f6facf21347eb2956ee958a90c44f1958c73d02eb2dc00fc73d3dfa0aded237e174d7c1e1637ad9399987e7490e0ee9b370b96b3d9af61fc96f83b5d1d7b75838b972e0797bd216a4b1195d7cc6c9ab60e7cd9fe1a2b1c34ae558c822a95b8b541027fdec951ad1b8e926665fa1afc38ec68cd67777208dc32277fcd3b12affb5197552a91b46f57462b279a3aec5a9cfa92fa09900bc095bb76fc4c34c212f17401b6e877bb4f7d5d30fad9b0521ccade41a20da56daa07e854a644bbcd49ce2539aa64480b369862c17f14a9f37348108e58b89492409601ec4e06fa8beda7c62361cfe08755cbe8683c368a46fa1f4fc5f96fd8b5be33884a8cac3fdee4e314bb63c95d580ab30d0f6f52bb3da5f82a7eb639e28fc9e6756a71aed62f6211c8bbf877b0bc17904c5062d43db83fc95b824ba7d324d143f03e8149e320a65369b8f9f0b89c98fbdba572760fa6f085cdeb039d8b5aaf10059f4f186c86043bfc654870728ab1619cd8ac00f029fc7a73622841292a2c250efb1df17fc58c36eb9daa430cab4afd59c9c7776792df472689baec804b5444b16ac62fcf6b826fbb9d7fd273327e4583e19f6c11f1cf0bd8b9add833e73851b9336fbc585809e92900fab8b3545848e32316ee2a45ab7e479b0a808cf62cbb45e0893e2248ab362597cc1c78b409cfbbf110d980ab23d3d815e8a5b1ce315ef70b2697aa75eb77c304c8928df767132ade22ca354b76635e9af9737de79e1829fa36f433b403ea3e0144b297211523c9dc4b7fed9031cb34221ad77dea7a2fb75de29f605db0affb677388d60a596ac774efb4c64c72ebc103ad06b7b28f1e38b97f2366579ca285323f88dc013955c541528e1a8315937fa833d3ce5ce9ecac9b6b06a2b804d5cda780bfadd48fe647d2bc2e5b7e460d6a0c2a44814e65de03752e805c8ab5f376518da542d5238624739ba6c5cb258c6aefb46f06ceb4d052995ffb447f0d35baa493d691525e7c1465663f78a2375fcbf7e175f8431e3125fcce2b195dfe2ffe78665f6381ffc49f73a1f9f1d8a82f4533dc3f7bb02706dcce291c11f5bb7bee9860e378b6271c2d5d1f34cfd181a3392ce45a32c8f64bee70abfeb1f9bef6b17c2b6f6b6040edfad5aa99ae5981d0350e318ac973052be534b70961a6ecb548077bf38385a84d07a798c1bf90bb7d743598a18566b3ae52b591393571212ea32fd0340fc05fb2ad472d1b66b429b2324c524b60ea2623b1f6114d9ce4fc11245a5be0779e27dae8477b05c241f9dc2e348d25611249d1034ece36c99f0d736e9fd146b6a6023d882123b34d2a600a8f624cb5a6129fe2e5ba4006740006ab5b6e47388cfebb4f728febede6c0c421298406ee234437f93015690c6f65c7699fa9f60d23e09ab2a882456ebf7e35a3c003dadcbb93471e9c15a0ce2bd469a457fa6e0bbc2c8360342a598561e40c771cb287a457a2869201349a8dd31261c2b4e76fc399be0b9e59fc35a3d07ee1a6179ddb2368224376c476b230313ce36c6a5d5c35674b79118101c72b019b892e14ff3873fb2a06ba70076a649ced3d1c948d4bfe2efc2e5e3bac602f63f733750b6b48f9afe07105125ebfce3da84abcb55465ea73737f757056eb15be28aa4d7ca2c1b1086435ab5670bf9f3a6bd7ad401e26ab08bd2211295f7bdb90c3c85c34f23d1f5aa89131bc4941bea348cd8a69be403f95ecc82d2d9614e57fc2e3eacdaf7a7514994ac6358f1a4999d356bf4d0bbe95ea4dbfe6e44cd67538dfc035ea3f3540ecfbf22b4ad7a30f3a9143411c5b4121b4a8f52690e74404481f8b42a5adb8589c5a1e48ff0ca1bf2ac34553e7acb1f66a27f0762dab49b92921163c04c9dd62a4a54b40015e04727dd15008970f64ed1a8f3c124bb7296695565d917cc4eb7f7b750969ea32e81e4de494c9cfb87225099fb0cbb5299a9ad070d1585bfdd5ec1d4663d2f473e3fa734d28e903b83e7472ecde12430050e38ea247c6aca26b063e817763176ea7330035614bc8299982caea549f486cca66b09baefde932e42f6f8ececc91d7af5e5e464b962673ad75b04a85956caf4ffec3069e9177a92f0b198837044f1b76aa028d2e51c537b8ccf3c258cd68cc47cd94dd77947ab539f08fd31695636a11b9270fbb01aa20b9c22b5f04aeb53d4bcb1c9f43d66fe1bdd25e56526e38edfcb016f346deeb909b2196d0b3be023f8878473c87e4f8cb336c5a18618df315523d63b814ddfc7517ed68c1a0a6ab0fc8e77ec20a3669db530ba83aacb5eddd94e27e49603b46727945ce910085cdbace008120ac1115cbcb87b3e55c5bea65e9ebf709884b1ab6970ed9b0426e31c3910ddfb3b7c8bdf02e2d7d2aa60d2aac33e5976b69f30a27e1a67f3d7c9120c33d0b6d4369ceeab622156a3708b5a6fbca46c41f2acac1baaeb9f4025aa11bb13b28ea9f0f037a1243e94549e2952690f8f0c06e3606d0176ac407546dd65bbb81f223345fa333b98788e7d7f32d8b0b755e9a6111f5f10221985080b3adb426b7d3e8fff1118c69cc97ea7b8a6a157538d7b4b8c6f9f6605652928dd2d0ce5d10046f95404cd734b71fc7c9c19dead789ebdc5450b0c9ab9ba6738e435db1cecfd41f7f39186dcef08ca3f6eb49ecda2524a50c95e1dc7cb8a6771eb3f5aabc62c1a5bdc51f1efbabd1145ffa5bbc9429779a0714dda1be3b3989f59b45ecf7b580fe6010f5dd69918a16ba253eac16beb904481a9586d23a0cf00f9a6ca60d6999a7465e923bfb1c6c354c5bebfdf1cfcce3bd1fe919eaa5b66efbbc9e0e80932c3afa86972624560cd1008788f8917c8f7395109a4497ec73b9648512b5fd9270f8f60b40410c1ae521fadaebbf28867f5dbfa0b2131c2ee989a6c2b53336efd8dbc0577df5e9ab8fa1e55de2b5d0a06979fbf69362b03fadd72e98bd102d93364156092c3e7403754278a88f7b52133118f0c0446d38be2e2850ab1e4db56367f4ba717b772e74368b1df532dd3064c886f462e285cfa8424195f9ed8bf04058e181afdf76ee4c95d815bfe814a78bf8e1c9116da0bfe6fd04a3d891891ee2d6e21b9a5d62fae1cff6cb4b800dbd0f95570fa07668e3d6811916efffaceaa6c42fc4e36c9a5aff716c8ec7a0e72bcfa000f3d3457fa498d3d81c1362f5617cbb1e33c8ac489984aa35e63d1bee2e006c6bc68869279a267eae27ca6fa5b7e1b257243086d253fdbbd9b68c798882999e0aa458f51772ebd5bbe6e37c9850fa66b6345a1caf827a89be66b94f0db8981303a299ebc4cce3e8e3f5b354d6f47f04ebd4c51df0e044b06595905d47f46be57d5a94559ba91c362428c3f5c0108daf37dacd36457497b2e9966258e3e7950c49a3bd5e5af0d55860c620d7d3a14011c9af3195bedeae5008a9ed1a5636a2540c8e2c90e36d86caffe39c19f21a16ec3d6de93fe86951886d00e91271a2f0dc834c19a280e3cbbba8f49ba9db2898619851ec187a82a5392f7a69001c95c87c0df77a705d37f2cb246cb8e573acc5f13ad7acfea3f0048e844a881ba25318addd6d7e2c34b053d67902a3127d5c148f3127e5141d21b1aeeb0d44ac4110e602af90475ed6b6b7b7012649c67d00fc90739a1a2b9e2643f20084a5b551baa13dacb4b56808a4aec64e8173e035e988c199a5650257b8a3e08ce28b37df563eeb93d051755a638cb67daa7fd7fa34ae4c2a6133d3a7e91e6bd3508bfd20e6cb6790f803b0c5c61f4f0300d0ed11dda89abb14f83ab969a2b159f55c2a72dccce1017aa3d5710ac853ea33f7df9ad11c74a131f21c54b810f8021872f0e56014a555cbededd96a236f4c1ae0d5f698ef88ba62afc4e6f6d5c68684f0f653d43c0b67a738f6d2ed71d309b289e91451d31f41c1df78608df7b02b9c54f2f50c0494fe641ded850deed738e3fb3f73c59865581b41e085eec17decf2511b8df6b79d6530ebae77b8aab0521c87354e7231efaac7d268a772fe93c8e2f795864dcacb776a79f134739d7f8ad51c300cf7d0a0df77619fc4ca40cfc66c0a001948876f5ec52c3a69892c09361fb18659c073b5ba2b25324ce1ee51688d318d094134699469a8b5eeafd637ee260bdd703e3f8fab7faa0d83f6a174f29f15a0c95225dd042f28a7f6ca68f67420af7dd9a7378626327a3d98fd794540ae0afb7a5bc5685dac57c4dbfa68af9da564cc8ed432b78f4a6953e8a7d774d780c7e7fe21f152848f1fa1c77d301f6e2d87d9880f25e13f6ee130d023c61584f9b5677192f46701527c60aa4929123bd4ca485a926c38cad0161f68978afc56c4405308deb2bc08ef23e1349d50e0777760d6f57ddbc0ddd59a92b615089c9e058ea78c38a4358ddcb68ad43eebbd7a5c5afb2569cde2ed3e6900230bd352ad18a3a1606a8aac4e0925b4ffe0fd82be14bc0f6143b7b3d9898b819b4b463cfc2423a1101598f5df1f8f77cc45fe926658136ce5dd82b4263213fb6aef27c4490011ed01425f9c715dbb0f946618ed7a526a7058ed2f9ba7481f419817d03e5d23d72817235ff190f3fba32ca0666d9cf2b87345dae6e9c3a289a474954b3b3301ca6f706eabd84a1a409be753f1c70f52997ff429e87bc0c6f759d8fae675d9ace62de5dbeac10c2ea0069fbbc7d49f553e4607c0f54455e0039d37b9f79ec16d3bbc3dc7164c7849c8d35f1cc0f17ef3abb1f6db62b22384f6e9c50be7e85a2d528d014eb69e356a0453263e78dc39088c390875d304913b9e9b429d57a8c644b4a04f4c07e94403fa5edbe5e0052c101409691db34a76f198293130b0f192f06d3acb6af9bd57ee25d29f3768a8a72ec6a32fc777c72eac3db2b39219bbd542f3189ab6559a19d6c17813a622edcde574ef800140b0b2e3555d07c11d9c78d9cf169779dbd451eaa5fc5c50b7d8b3b55063ab715549d1bb37635d7cb5c0f1cf92a810b8bd6f3f7cf5b628da5b53ea6544409bb229658d6a4407021d5ce09ae3ec2b003f13c5856cdb780257a68c172d9ec7b16269afd6d32dd2b7e3bab38bf646edeeefa8cf0948019bedcb93a528bc0e8236ff8e7b784f85a477a99b4b3180ece736ed420071085fae12c5e7a1ce22dfbae57baf92bf14068033fcd6cfce1323d4144195ec9451445a71bb82acde57fd5f7397d1222ae96a2a0cb8a18359098846d50730dd6270479774d624b4edc97d68b05fe21756c92fcdcbf24241e0aac15460378d2468a5cb9b4a962d421f202a9ecee0404c0572a578f923f106385042c67be1db7d9218bfc59d8d6c9589e482f65c93d6a8dcb3d1d7905f94634c38056926bc13427b155a925a2695496f23139d3b5698e1a1c921927cf9c827887efe695b672588ff40b1a8e46b415c0a16c98844f272b32b2790b3ced41591653c5f41fa10022b56083d2844f62e19181e9bb59810c181e28451ad7ae99663cd11dce08c323006ae23e06a5d89a9e852e70a82948c68a3095c780b21a1e3ca480bf56dc90daf4b85e2d5165f5ae0bad84642f3abd51c695bc57e9de2487c6fd2148e183fb8454dc85a22a3b53c9bea05a51e77f10c0125cdebc8331187c1b42f97a31e4a074775709cb9b4362fbf5a289d1cb400236446170573858eb7ce5fec91fa799761a5405a21116c41a19cc0921faee1b340fadadfb38a4828c12db9ad285395b9eb89a1308956a2d65bd29b790eba11733e7f0c4671a30da0d08dbf16fd2645c4fa529b67ccbb7959b7b6bae22887e7301c8577232bdb61ab803caf1238600ccf88846d18ceef5b5ae3b271c12968575c17cd69d46d8ce594e40d2d77db7dae17e978578ac3aaf834132d53ed57332d6ebeac458f233eefeae1d0e9335f6e03f7968b504934b7fa2e53260f65c254183d7f54cd3f2e632d3cfba52cd6af0bd2359d83cbee5320a46b01cacd3bc8099c5937356da3f7e79f31820e0466dd9c84a4e7e94f3c73da3a481b67a26706897e6013d42ab4afc73dc94d220fa051b1f9413e68d3a1c5bd5392c9b1003eea3d8ab13504a597a63bf9fa5d90015d316998f65cc50366e3dd3389fea94499ee80f735f9b878d7444f12dec0e04cf8aed9c1ed415eac6d049dc8ce856f66ad5d8834f71052f46e5a8e0b16f72adf9fa62ea51d8676e1de674e2898f87ad9d4031956a0daab50fa8d10b9548fc6934ac99fea0e3b48a7c4eefd6668716666f799c2e992c555a2552694958a5ca8e12c97c1edced1c86053801414816798865b0af6edaab2c36e6f20477d92de1089b58d92f0ec0c6fee4ff6a0580978ef2e1b798b8d78e1b7132600f26885b5011bfaa373685e2699d97edfe571599563d14b17c035c13f2dfdce1700b006db3c5f7673750179193d5087e033a0ae98adaaa173b47bfa9b70a558ec9efc6ee473997eb3d1b3e7573c5dba2567325716050068058eff88a6a744eb99cf19845e8fb6e3f44fb4fb41fca36c16342bdef939b9ad4e50e2485038eb469e50bc375a22bb2eadef56d846abd97c4814cab978db4a38bfc7449031d404354b954e443e50ec614db5a81898cdc33bd3a8ac2794205000f851cdb86eeeb9b4a897135f7eafb36feb91c4d5d10acadc2d960210786a810eef7acac9becb4d68004776e636391f35678e9561ffcbe64535857c9e15d9a82b4ea7ae5283ce7f90802396244f4f0351ec1e005f50b94079269533559fba4342d416106dbb15d8cd557e236732027ec352b584bbe30c91e4e7e5d9e7936c8d83e3cdba18d98a425eeb8a0239a85735149eae6bd390231402cba08d03334d898c56bc89d87a3287eca112313e20f22ffb6db1f5d6f294fcbb4755fcc790b61926c0ab11cce0c77aea9f4d8e9069346f01f3dde291577378b35bcf9d2ccb9ae6a704581c2cf1f306ea040a04857b9277933cefaca68f82eaff21e8c540bcd9299b7a25046fb776da5b21f99067d88bc55d4aa550e25768f84ccc0a2e505d8bef729db697dc9fc11296d29bba8ebc4c8949a7b164ea7da0c4b0adc6a2022f24279a4250782a80db6cf5d8e8498bc637cafb00856dbad71d9eb76a0c18f866e63a34d7f64420990f442242ab6fe2b5b2ca605880a49d4195c5b7c9e5cf595f37a35bb4bc5ad930c7dda5dccdf2110552a47276f855baee4e5df5ed4334d7912f7b625bee246273ab452c88192667d9e69b41878b9a023b8bf7913042de6f0be3da076b4e8089b1a3ba60a313ae660e2ad25251c64b6e4836a6b59f7d412d772899b2fbf8ca5961d03d3fea3a54526c941920cb1caf559785bd719402589b542f91a1a7b1f7fdb4d0709e215863856d05c9a5544b8edd3719cb338e8c0386d3056dc2eb8eec628aab92be8173315949dd42eca89e9f5f536b7c3f11a176b17cc30140571c97fa7bf087eab44d438ccf246a11e59a280851e4b9623f6edefe8c52b65613ba8cb5daa292d85007fd49a7fd31ea29b2f69c1589c93bdf1cae5374ec0c18e39774185623efc0fe213a3867797070b458b98ccf5b2fddf0cb7381c6cdd4e233a4da9de7f25c5d49c38b1986a39b858f1540da8b9326a8da2acdad0326038b07b22277491427986947b67ce9322088179ef463f7cf0aae87019b42525b0db54ed8b0a05b77961ad55d0bedfecf576c703b6f112433d270ee561616ef1b2c07ae95ec221daf89c6b7b5079b0bac7791e8ab6a325cb2de12aa432cc9bb87b8e4cfae130f1afcfcf544eacc9725a5f9d61109a4caee45865eba5ae7f9328b1abf4e98f8</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>â“» ç»éªŒæ•´ç†ç±»ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Methods</tag>
      </tags>
  </entry>
  <entry>
    <title>SCI EI æ ¸å¿ƒæœŸåˆŠä»¥åŠè®¡ç®—æœºé¢†åŸŸCCFä¼šè®®ç­‰çº§åˆ†ç±»æ–‡ä»¶</title>
    <url>/2022/03/17/58ef9be2b7d9/</url>
    <content><![CDATA[<h4 id="ä¸€sci">ä¸€ã€SCIï¼š</h4>
<p>â€‹ ç¾å›½ã€Šç§‘å­¦å¼•æ–‡ç´¢å¼•ã€‹ï¼ŒSCI(ç§‘å­¦å¼•æ–‡ç´¢å¼• )ã€EI(å·¥ç¨‹ç´¢å¼•
)ã€ISTP(ç§‘æŠ€ä¼šè®®å½•ç´¢å¼• )
æ˜¯ä¸–ç•Œè‘—åçš„ä¸‰å¤§ç§‘æŠ€æ–‡çŒ®æ£€ç´¢ç³»ç»Ÿï¼Œæ˜¯å›½é™…å…¬è®¤çš„è¿›è¡Œç§‘å­¦ç»Ÿè®¡ä¸ç§‘å­¦è¯„ä»·çš„ä¸»è¦æ£€ç´¢å·¥å…·ï¼Œå…¶ä¸­ä»¥SCIæœ€ä¸ºé‡è¦ã€‚</p>
<p>â€‹
ä¸€èˆ¬SCI<strong>ä¾§é‡ç§‘å­¦å‰æ²¿ç†è®º</strong>ï¼Œå®¡æ ¸æ ‡å‡†ä¸¥æ ¼ï¼Œå‘ç¨¿å‘¨æœŸä¹Ÿæ¯”è¾ƒé•¿ã€‚</p>
<h4 id="äºŒei">äºŒã€EIï¼š</h4>
<p>â€‹ ã€Šå·¥ç¨‹ç´¢å¼•ã€‹ï¼ˆThe Engineering Index,
ç®€ç§°EIï¼‰æ˜¯ä¾›æŸ¥é˜…<strong>å·¥ç¨‹æŠ€æœ¯é¢†åŸŸæ–‡çŒ®</strong>çš„ç»¼åˆæ€§æƒ…æŠ¥æ£€ç´¢åˆŠç‰©ã€‚</p>
<p>â€‹ EIçš„ä¸»è¦ç‰¹ç‚¹æ˜¯æ‘˜å½•è´¨é‡è¾ƒé«˜ï¼Œæ–‡æ‘˜ç›´æ¥æŒ‰å­—é¡ºæ’åˆ—ï¼Œç´¢å¼•ç®€ä¾¿å®ç”¨</p>
<h4 id="ä¸‰æ ¸å¿ƒæœŸåˆŠ">ä¸‰ã€æ ¸å¿ƒæœŸåˆŠ</h4>
<p>â€‹
åœ¨å›½å†…ç®€å•åœ°è¯´ï¼Œæ ¸å¿ƒæœŸåˆŠæ˜¯å­¦æœ¯ç•Œé€šè¿‡ä¸€æ•´å¥—ç§‘å­¦çš„æ–¹æ³•ï¼Œå¯¹äºæœŸåˆŠè´¨é‡è¿›è¡Œè·Ÿè¸ªè¯„ä»·ï¼Œå¹¶ä»¥æƒ…æŠ¥å­¦ç†è®ºä¸ºåŸºç¡€ï¼Œå°†æœŸåˆŠè¿›è¡Œåˆ†ç±»å®šçº§ï¼ŒæŠŠæœ€ä¸ºé‡è¦çš„ä¸€çº§ç§°ä¹‹ä¸ºæ ¸å¿ƒæœŸåˆŠã€‚</p>
<ul>
<li>ï¼ˆ1ï¼‰åŒ—äº¬å¤§å­¦å›¾ä¹¦é¦†â€œä¸­æ–‡æ ¸å¿ƒæœŸåˆŠâ€ï¼Œè¿™ä¸ªçš„è®¤å¯åº¦ä¸€èˆ¬æœ€é«˜ã€‚</li>
<li>ï¼ˆ2ï¼‰å—äº¬å¤§å­¦â€œä¸­æ–‡ç¤¾ä¼šç§‘å­¦å¼•æ–‡ç´¢å¼•ï¼ˆCSSCIï¼‰æ¥æºæœŸåˆŠâ€ã€‚</li>
<li>ï¼ˆ3ï¼‰ä¸­å›½ç§‘å­¦é™¢æ–‡çŒ®æƒ…æŠ¥ä¸­å¿ƒâ€œä¸­å›½ç§‘å­¦å¼•æ–‡æ•°æ®åº“ï¼ˆCSCDï¼‰æ¥æºæœŸåˆŠâ€ã€‚</li>
<li>ï¼ˆ4ï¼‰ä¸­å›½ç§‘å­¦æŠ€æœ¯ä¿¡æ¯ç ”ç©¶æ‰€â€œä¸­å›½ç§‘æŠ€è®ºæ–‡ç»Ÿè®¡æºæœŸåˆŠâ€ï¼ˆåˆç§°â€œä¸­å›½ç§‘æŠ€æ ¸å¿ƒæœŸåˆŠâ€ï¼‰ã€‚</li>
<li>ï¼ˆ5ï¼‰ä¸­å›½ç¤¾ä¼šç§‘å­¦é™¢æ–‡çŒ®ä¿¡æ¯ä¸­å¿ƒâ€œä¸­å›½äººæ–‡ç¤¾ä¼šç§‘å­¦æ ¸å¿ƒæœŸåˆŠâ€ã€‚</li>
<li>ï¼ˆ6ï¼‰ä¸­å›½äººæ–‡ç¤¾ä¼šç§‘å­¦å­¦æŠ¥å­¦ä¼šâ€œä¸­å›½äººæ–‡ç¤¾ç§‘å­¦æŠ¥æ ¸å¿ƒæœŸåˆŠâ€ã€‚</li>
</ul>
<h4
id="å››ä¸­å›½è®¡ç®—æœºå­¦ä¼šccfæ¨èä¸­æ–‡ç§‘æŠ€æœŸåˆŠç›®å½•">å››ã€ä¸­å›½è®¡ç®—æœºå­¦ä¼šCCFæ¨èä¸­æ–‡ç§‘æŠ€æœŸåˆŠç›®å½•</h4>
<p>â€‹ <a
href="https://my-blog-fantast.oss-cn-hangzhou.aliyuncs.com/%E4%B8%AD%E5%9B%BD%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E4%BC%9A%E6%8E%A8%E8%8D%90%E4%B8%AD%E6%96%87%E7%A7%91%E6%8A%80%E6%9C%9F%E5%88%8A%E7%9B%AE%E5%BD%95.pdf">ç‚¹æˆ‘ä¸‹è½½
ä¸­å›½è®¡ç®—æœºå­¦ä¼šæ¨èä¸­æ–‡ç§‘æŠ€æœŸåˆŠç›®å½•PDF</a></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/1123qwdsa.jpg" /></p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/ä¸­å›½è®¡ç®—æœºå­¦ä¼šæ¨èä¸­æ–‡ç§‘æŠ€æœŸåˆŠç›®å½•(1)_é¡µé¢_3.jpg"
alt="ä¸­å›½è®¡ç®—æœºå­¦ä¼šæ¨èä¸­æ–‡ç§‘æŠ€æœŸåˆŠç›®å½•(1)_é¡µé¢_3" />
<figcaption
aria-hidden="true">ä¸­å›½è®¡ç®—æœºå­¦ä¼šæ¨èä¸­æ–‡ç§‘æŠ€æœŸåˆŠç›®å½•(1)_é¡µé¢_3</figcaption>
</figure>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/ä¸­å›½è®¡ç®—æœºå­¦ä¼šæ¨èä¸­æ–‡ç§‘æŠ€æœŸåˆŠç›®å½•(1)_é¡µé¢_4.jpg"
alt="ä¸­å›½è®¡ç®—æœºå­¦ä¼šæ¨èä¸­æ–‡ç§‘æŠ€æœŸåˆŠç›®å½•(1)_é¡µé¢_4" />
<figcaption
aria-hidden="true">ä¸­å›½è®¡ç®—æœºå­¦ä¼šæ¨èä¸­æ–‡ç§‘æŠ€æœŸåˆŠç›®å½•(1)_é¡µé¢_4</figcaption>
</figure>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/ä¸­å›½è®¡ç®—æœºå­¦ä¼šæ¨èä¸­æ–‡ç§‘æŠ€æœŸåˆŠç›®å½•(1)_é¡µé¢_5.jpg"
alt="ä¸­å›½è®¡ç®—æœºå­¦ä¼šæ¨èä¸­æ–‡ç§‘æŠ€æœŸåˆŠç›®å½•(1)_é¡µé¢_5" />
<figcaption
aria-hidden="true">ä¸­å›½è®¡ç®—æœºå­¦ä¼šæ¨èä¸­æ–‡ç§‘æŠ€æœŸåˆŠç›®å½•(1)_é¡µé¢_5</figcaption>
</figure>
<h4
id="äº”ä¸­å›½è®¡ç®—æœºå­¦ä¼šccfæ¨èå›½é™…å­¦æœ¯ä¼šè®®å’ŒæœŸåˆŠç›®å½•">äº”ã€ä¸­å›½è®¡ç®—æœºå­¦ä¼šCCFæ¨èå›½é™…å­¦æœ¯ä¼šè®®å’ŒæœŸåˆŠç›®å½•</h4>
<p>â€‹ <a
href="https://my-blog-fantast.oss-cn-hangzhou.aliyuncs.com/%E4%B8%AD%E5%9B%BD%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AD%A6%E4%BC%9A%E6%8E%A8%E8%8D%90%E5%9B%BD%E9%99%85%E5%AD%A6%E6%9C%AF%E4%BC%9A%E8%AE%AE%E5%92%8C%E6%9C%9F%E5%88%8A%E7%9B%AE%E5%BD%95.pdf">ç‚¹æˆ‘ä¸‹è½½
ä¸­å›½è®¡ç®—æœºå­¦ä¼šæ¨èå›½é™…å­¦æœ¯ä¼šè®®å’ŒæœŸåˆŠç›®å½• PDF</a></p>
<p>å‚è€ƒï¼šhttps://zhuanlan.zhihu.com/p/57932081</p>
]]></content>
      <categories>
        <category>â“» ç»éªŒæ•´ç†ç±»ç¬”è®°</category>
      </categories>
  </entry>
  <entry>
    <title>2022-2023ç§‹å†¬å¤§è®¡åŸºç­”ç–‘æ•´ç†â€”â€”æ²ˆç¿ç­</title>
    <url>/2022/09/09/66d597ae86a9/</url>
    <content><![CDATA[<h2 id="ä½¿ç”¨æŒ‡å—">1ã€ä½¿ç”¨æŒ‡å—ï¼š</h2>
<h3
id="å¦‚ä½•åœ¨æœ¬æ–‡æ¡£å†…æœç´¢ç›¸å…³é—®é¢˜">1ï¼‰å¦‚ä½•åœ¨æœ¬æ–‡æ¡£å†…æœç´¢ç›¸å…³é—®é¢˜ï¼Ÿï¼š</h3>
<ul>
<li><strong>æ–¹æ³•1</strong>ï¼šä½¿ç”¨åšå®¢ä¸Šæ–¹å†…ç½®çš„<strong>æœç´¢åŠŸèƒ½</strong>ï¼Œç‚¹å‡»æœç´¢åï¼Œè¾“å…¥ç›¸å…³å…³é”®è¯å³å¯ã€‚<strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºæœ¬æ–‡æ¡£æ˜¯åŸºäºæ•´ä¸ªåšå®¢è¿›è¡Œæ›´æ–°çš„ï¼Œæ‰€ä»¥è¯¥æœç´¢åŠŸèƒ½æ˜¯åœ¨æ•´ä¸ªåšå®¢å†…è¿›è¡Œæœç´¢ï¼Œè¯·ä»ä¸­æ‰¾åˆ°æœ¬ç¯‡æ–‡ç« ï¼Œå³ã€Š2022-2023ç§‹å†¬å¤§è®¡åŸºç­”ç–‘æ•´ç†â€”æ²ˆç¿ç­ã€‹çš„æœç´¢ç»“æœè¿›å…¥å³å¯</strong>ï¼Œå¦‚æœæ²¡æœ‰æœ¬ç¯‡æ–‡ç« çš„æœç´¢ç»“æœå³ä»£è¡¨æ²¡æœ‰ç›¸å…³å†…å®¹ã€‚å¦‚æœå¯¹å…¶ä»–åšæ–‡æ„Ÿå…´è¶£ä¹Ÿå¯ä»¥éšæ„æµè§ˆã€‚</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220908105925826.png" style="zoom:67%;" /></p>
<ul>
<li><strong>æ–¹æ³•2</strong>ï¼šä»¥firefoxæµè§ˆå™¨ä¸ºä¾‹ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æœ¬ç½‘é¡µåï¼ŒæŒ‰<strong>CTRL+F</strong>é”®,ä¼šçœ‹åˆ°æµè§ˆå™¨åº•éƒ¨ä¼šå‡ºç°å¦‚ä¸‹æœç´¢æ ,åœ¨å·¦ä¾§"åœ¨æ­¤é¡µé¢ä¸­æŸ¥æ‰¾"å¤„è¾“å…¥ä½ æƒ³è¦æœç´¢çš„å†…å®¹å³å¯è¿›è¡Œç›¸å…³å†…å®¹çš„æœç´¢ã€‚å…¶ä»–ä¸åŒæµè§ˆå™¨çš„æœç´¢æ¡†ä½¿ç”¨æ–¹æ³•å¯ä»¥è®¿é—®å¦‚ä¸‹é“¾æ¥ï¼šhttps://www.163.com/dy/article/H6K7CURU0552EUN3.html</li>
</ul>
<h3
id="å¦‚æœå¯¹æœ¬æ–‡æ¡£å†…å®¹æœ‰æ‰€ç–‘é—®å¦‚ä½•æå‡º">2ï¼‰å¦‚æœå¯¹æœ¬æ–‡æ¡£å†…å®¹æœ‰æ‰€ç–‘é—®å¦‚ä½•æå‡ºï¼Ÿï¼š</h3>
<p>â€‹
å¦‚æœä½ å‘ç°æœ¬æ–‡æ¡£å†…æœ‰é—®ç­”æœ‰é”™è¯¯æˆ–ä¸ä¸¥è°¨çš„åœ°æ–¹ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•æå‡º</p>
<ul>
<li><p><strong>æ–¹æ³•1</strong>ï¼šä½ å¯ä»¥ç›´æ¥æˆªå›¾å‘è‡³é’‰é’‰ç¾¤å†…ï¼Œ<span
class="citation"
data-cites="åŠ©æ•™æå‡ºä½ çš„ç–‘é—®">@åŠ©æ•™æå‡ºä½ çš„ç–‘é—®</span>ã€‚</p></li>
<li><p><strong>æ–¹æ³•2</strong>ï¼šä½¿ç”¨åšå®¢é¡µé¢ä¸‹æ–¹å†…ç½®çš„è¯„è®ºåŠŸèƒ½ï¼Œæ­¤åŠŸèƒ½éœ€è¦ä½ å…ˆæ³¨å†Œ<a
href="https://github.com">github</a>è´¦å·ï¼Œéšåä»¥githubè´¦å·ç™»å½•è¿›è¡Œè¯„è®ºã€‚è¯„è®ºååŠ©æ•™ä¼šè¿›è¡Œæ›´æ­£æˆ–ä»¥åŒæ ·å½¢å¼å›ç­”ã€‚</p></li>
</ul>
<h3 id="å…¶ä»–ä¾¿æ·åŠŸèƒ½">3ï¼‰å…¶ä»–ä¾¿æ·åŠŸèƒ½ï¼š</h3>
<ul>
<li>1ã€ä½ å¯ä»¥ä½¿ç”¨å·¦ä¾§çš„å¯¼èˆªæ å¸®åŠ©ä½ å¿«é€Ÿå®šä½ä½ æ‰€åœ¨çš„é—®é¢˜ç›®å½•</li>
<li>2ã€ä½ å¯ä»¥é€šè¿‡ç‚¹å‡»å·¦ä¾§å¯¼èˆªæ ä¸‹æ–¹çš„"å‰å‰"å›¾æ ‡ï¼Œæ¥å…³é—­å·¦ä¾§å¯¼èˆªæ ã€‚</li>
<li>3ã€ä½ å¯ä»¥é€šè¿‡ç‚¹å‡»å·¦ä¾§å¯¼èˆªæ ä¸‹æ–¹çš„"ç®­å¤´"å›¾æ ‡ï¼Œæ¥å¿«é€Ÿè¿”å›è‡³è¯¥æ–‡æ¡£çš„æœ€ä¸Šæ–¹ã€‚ç®­å¤´å›¾æ ‡æ—çš„ç™¾åˆ†æ¯”ä»£è¡¨ä½ ç›®å‰æ­£åœ¨æµè§ˆçš„éƒ¨åˆ†æ˜¯æ•´ä»½æ–‡æ¡£çš„ä½•å¤„ä½ç½®ã€‚</li>
</ul>
<h2 id="æ­£æ–‡">2ã€æ­£æ–‡ï¼š</h2>
<h3
id="é—®1vmwareå®˜ç½‘å“ªé‡Œç‚¹è¿›å»æœ‰è½¯ä»¶ä¸‹è½½">é—®1ï¼švmwareå®˜ç½‘å“ªé‡Œç‚¹è¿›å»æœ‰è½¯ä»¶ä¸‹è½½ï¼Ÿ</h3>
<ul>
<li>https://customerconnect.vmware.com/downloads/#all_products</li>
</ul>
<hr />
<h3
id="é—®2window10çš„isoé•œåƒæ–‡ä»¶å“ªé‡Œå¯ä»¥ä¸‹è½½">é—®2ï¼šwindow10çš„isoé•œåƒæ–‡ä»¶å“ªé‡Œå¯ä»¥ä¸‹è½½ï¼Ÿ</h3>
<ul>
<li><p>éœ€è¦æ ¡å›­ç½‘å†…ç½‘è®¿é—®ï¼Œæ˜¯å­¦æ ¡çš„å®˜æ–¹è½¯ä»¶å¹³å°</p></li>
<li><p>http://download.ms.zju.edu.cn/SW_DVD9_Win_Pro_10_21H1_64BIT_ChnSimp_Pro_Ent_EDU_N_MLF_X22-55090.ISO</p></li>
</ul>
<hr />
<h3
id="é—®3å®‰è£…vmwareæ—¶å‡ºç°å¦‚ä¸‹é”™è¯¯">é—®3ï¼šå®‰è£…VMWareæ—¶å‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š</h3>
<p>å†™å…¥æ–‡ä»¶æ—¶ DIFXAPI.dllæ—¶å‡ºé”™ï¼Œè¯·ç¡®è®¤æ‚¨æœ‰è®¿é—®è¯¥ç›®å½•çš„æƒé™</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220918171424902.png" /></p>
<ul>
<li>ä¸€èˆ¬è¿™ç§æƒ…å†µæ˜¯å› ä¸ºä½ ç”µè„‘ä¸Šå¼€ç€ä¸€äº›æ€æ¯’è½¯ä»¶å¯¼è‡´çš„ï¼Œæ¯”å¦‚è¯´360å®‰å…¨å«å£«ï¼Œç”µè„‘ç®¡å®¶è¿™ç§ï¼Œå¯ä»¥å…ˆå…³é—­æ€æ¯’è½¯ä»¶åå°è¯•å®‰è£…ã€‚</li>
</ul>
<hr />
<h3
id="é—®4ç»‘å®šptaè´¦å·æ—¶ç»‘å®šç æ˜¯å¤šå°‘">é—®4ï¼šç»‘å®šPTAè´¦å·æ—¶ï¼Œç»‘å®šç æ˜¯å¤šå°‘ï¼Ÿ</h3>
<ul>
<li>ä¸åŒæ—¶é—´çš„ç­ä¸ä¸€æ ·ï¼Œè§ä¸‹ï¼š
<ul>
<li>å‘¨å››1ã€2èŠ‚ï¼š248374</li>
<li>å‘¨å››3ã€4èŠ‚ï¼š717242</li>
<li>å‘¨å››7ã€8èŠ‚ï¼š834958</li>
</ul></li>
</ul>
<hr />
<h3
id="é—®5åˆ¤æ–­é¢˜è®¡ç®—æœºå­˜å‚¨æ¨¡å¼è§„å®šå­˜å‚¨å•å…ƒä»¥ä½bitä¸ºå•ä½8ä¸ªäºŒè¿›åˆ¶ä½æ„æˆ1ä¸ªå­—èŠ‚byte">é—®5ï¼šåˆ¤æ–­é¢˜ï¼šè®¡ç®—æœºå­˜å‚¨æ¨¡å¼è§„å®šï¼Œå­˜å‚¨å•å…ƒä»¥ä½ï¼ˆbitï¼‰ä¸ºå•ä½ï¼Œ8ä¸ªäºŒè¿›åˆ¶ä½æ„æˆ1ä¸ªå­—èŠ‚ï¼ˆByteï¼‰ã€‚</h3>
<ul>
<li>ç­”æ¡ˆï¼šé”™è¯¯ã€‚å­˜å‚¨å•å…ƒä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œå³Byte</li>
</ul>
<hr />
<h3
id="é—®6åˆ¤æ–­é¢˜é«˜é€Ÿç¼“å­˜å™¨cacheä»‹äºcpuä¸ä¸»å­˜ä¹‹é—´ç”¨äºè§£å†³å†…å­˜ä¸å¤–å­˜çš„é€Ÿåº¦åŒ¹é…é—®é¢˜ä»¥æé«˜å­˜å‚¨é€Ÿåº¦">é—®6ï¼šåˆ¤æ–­é¢˜ï¼šé«˜é€Ÿç¼“å­˜å™¨Cacheä»‹äºCPUä¸ä¸»å­˜ä¹‹é—´ï¼Œç”¨äºè§£å†³å†…å­˜ä¸å¤–å­˜çš„é€Ÿåº¦åŒ¹é…é—®é¢˜ï¼Œä»¥æé«˜å­˜å‚¨é€Ÿåº¦ã€‚</h3>
<ul>
<li>ç­”æ¡ˆï¼šé”™è¯¯ã€‚ä¸æ˜¯ä¸ºäº†è§£å†³å†…å­˜ä¸å¤–å­˜çš„é€Ÿåº¦åŒ¹é…é—®é¢˜ï¼Œè€Œæ˜¯ä¸ºäº†è§£å†³å†…å­˜å’ŒCPUçš„é€Ÿåº¦åŒ¹é…é—®é¢˜ã€‚å› ä¸ºç°ä»£CPUé¢‘ç‡æ¯”è¾ƒé«˜ï¼Œå†…å­˜çš„å‘å±•è·Ÿä¸ä¸ŠCPUè®¿é—®ä¸»å­˜çš„é€Ÿåº¦ï¼Œè¿™æ ·çš„è¯æŠŠCPUæœ€æœ‰å¯èƒ½è®¿é—®çš„æ•°æ®æ”¾åœ¨cacheä¸­ï¼ŒCPUå¯ä»¥åœ¨å¾ˆçŸ­çš„æ—¶é—´å†…å¾—åˆ°æ•°æ®</li>
</ul>
<hr />
<h3
id="é—®7å¦‚æœæŸä¸€è®¡ç®—æœºçš„å†…å­˜å•å…ƒæ€»å…±å¯å­˜å‚¨256ä¸ªå­—èŠ‚çš„å®¹é‡åˆ™è¿™äº›å†…å­˜å•å…ƒçš„åœ°å€ç¼–å·å¯ä»¥ä»1000hhè¡¨ç¤º16è¿›åˆ¶åˆ°h">é—®7ï¼šå¦‚æœæŸä¸€è®¡ç®—æœºçš„å†…å­˜å•å…ƒæ€»å…±å¯å­˜å‚¨256ä¸ªå­—èŠ‚çš„å®¹é‡ï¼Œåˆ™è¿™äº›å†…å­˜å•å…ƒçš„åœ°å€ç¼–å·å¯ä»¥ä»1000Hï¼ˆHè¡¨ç¤º16è¿›åˆ¶ï¼‰åˆ°ï¼ˆï¼‰Hã€‚</h3>
<ul>
<li>ç­”æ¡ˆï¼š10FFHã€‚è¿™ä¸€ç±»é¢˜ç›®æ¶‰åŠåˆ°åå…­è¿›åˆ¶è¿ç®—ï¼Œææ¸…æ¥šè¿™å—çš„è®¡ç®—å°±å¯ä»¥åº”ä»˜è®¸å¤šé¢˜ç›®ã€‚é¦–å…ˆä½ éœ€è¦å­¦ä¼š16è¿›åˆ¶å’Œ10è¿›åˆ¶çš„è½¬æ¢ã€‚å³
åè¿›åˆ¶çš„256ï¼Œåœ¨16è¿›åˆ¶ä¸­æ˜¯å¤šå°‘ï¼Ÿç­”æ¡ˆæ˜¯100H.æ‰€ä»¥ï¼Œå†…å­˜çš„åœ°å€ç¼–å·åº”è¯¥å°±æ˜¯ä»1000H
+ 100H - 1 = 10FFH.</li>
<li>é¢˜å¤–è¯ï¼šåœ¨ä¸€äº›å…¶ä»–é¢˜ç›®ä¸­ï¼Œæ³¨æ„åŒºåˆ†å­—èŠ‚å’Œä½ï¼Œå­—èŠ‚æ˜¯Byteï¼Œä½æ˜¯bitï¼Œç®€å†™ä¸€ä¸ªæ˜¯Bï¼Œä¸€ä¸ªæ˜¯bã€‚1Byte
= 8bit</li>
</ul>
<hr />
<h3
id="é—®8æŸç³»ç»Ÿçš„è¿›ç¨‹çŠ¶æ€å¦‚ä¸‹å›¾æ‰€ç¤ºå…¶ä¸­3è¡¨ç¤ºç­‰å¾…æŸä¸ªäº‹ä»¶1è¡¨ç¤ºè¿›ç¨‹è¢«é€‰ä¸­é—®aæ˜¯_çŠ¶æ€2è¡¨ç¤º____________cè¡¨ç¤º___________">é—®8ï¼šæŸç³»ç»Ÿçš„è¿›ç¨‹çŠ¶æ€å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå…¶ä¸­3è¡¨ç¤ºç­‰å¾…æŸä¸ªäº‹ä»¶ï¼Œ1è¡¨ç¤ºè¿›ç¨‹è¢«é€‰ä¸­ï¼Œé—®ï¼šaæ˜¯_<strong><em>çŠ¶æ€ï¼Œ2è¡¨ç¤º</em></strong>____________ï¼Œcè¡¨ç¤º___________ã€‚</h3>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221019185521467.png" /></p>
<ul>
<li>ç­”æ¡ˆï¼šè¿è¡Œï¼Œæ—¶é—´ç‰‡åˆ°ï¼Œç­‰å¾…I/O</li>
<li>åˆ†æï¼šè¿™ä¸ªæ˜¯è€ƒå¯Ÿè¿›ç¨‹çš„çŠ¶æ€è½¬ç§»çš„ä¸€é“é¢˜ç›®ï¼Œå¤§å®¶å¯ä»¥é€šè¿‡ç†Ÿæ‚‰ä¸‹å›¾æ¥å®Œæˆç›¸å…³çš„é¢˜ç›®ã€‚ä¸‹å›¾æ˜¯è¯¦ç»†ç‰ˆçš„ä¸€ä¸ªè¿›ç¨‹çŠ¶æ€è½¬ç§»çš„è¯´æ˜ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š</li>
<li>è¿è¡Œæ€â†’é˜»å¡æ€æ˜¯ä¸€ç§è¿›ç¨‹è‡ªèº«åšå‡ºçš„<strong>ä¸»åŠ¨è¡Œä¸º</strong></li>
<li>é˜»å¡æ€â†’å°±ç»ªæ€æ˜¯ä¸æ˜¯è¿›ç¨‹è‡ªèº«èƒ½æ§åˆ¶çš„ï¼Œæ˜¯ä¸€ç§<strong>è¢«åŠ¨è¡Œä¸º</strong>ã€‚</li>
<li>æ³¨æ„ï¼š<strong>ä¸èƒ½ç”±é˜»å¡æ€ç›´æ¥è½¬æ¢ä¸ºè¿è¡Œæ€</strong>ï¼Œ<strong>ä¹Ÿä¸èƒ½ç”±å°±ç»ªæ€ç›´æ¥è½¬æ¢ä¸ºé˜»å¡æ€</strong>ï¼ˆå› ä¸ºè¿›å…¥é˜»å¡æ€æ˜¯è¿›ç¨‹ä¸»åŠ¨è¯·æ±‚çš„ï¼Œå¿…ç„¶éœ€è¦è¿›ç¨‹åœ¨è¿è¡Œæ—¶æ‰èƒ½å‘å‡ºè¿™ç§è¯·æ±‚</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221019185634225.png" /></p>
<hr />
<h3
id="é—®9åœ¨windowsä¸­ç”¨æˆ·ä½¿ç”¨______ç®¡ç†ç¡¬ä»¶èµ„æºè®¾ç½®">é—®9ï¼šåœ¨Windowsä¸­ï¼Œç”¨æˆ·ä½¿ç”¨ï¼ˆ______ï¼‰ç®¡ç†ç¡¬ä»¶èµ„æºè®¾ç½®ã€‚</h3>
<ul>
<li>ç­”æ¡ˆï¼šæ§åˆ¶é¢æ¿.</li>
</ul>
<hr />
<h3
id="é—®10ä»¥ä¸‹å…³äºæµ®ç‚¹æ•°çš„æè¿°_____________æ˜¯æ­£ç¡®çš„">é—®10ï¼šä»¥ä¸‹å…³äºæµ®ç‚¹æ•°çš„æè¿°ï¼Œ_____________æ˜¯æ­£ç¡®çš„</h3>
<p>A. ç¬¦å·ä½ç”¨æ¥å†³å®šé˜¶ç æ˜¯æ­£çš„è¿˜æ˜¯è´Ÿçš„</p>
<p>B.å°æ•°ç‚¹æ˜¯ä»¥äºŒè¿›åˆ¶1çš„å½¢å¼ä¿å­˜åœ¨å°¾æ•°ä¸­çš„</p>
<p>C.å¯¹äºä¸€ä¸ª32ä½çš„æµ®ç‚¹æ•°æ¥è¯´,é˜¶ç çš„ä½æ•°ä¸å°¾æ•°çš„ä½æ•°å¹¶ä¸æ˜¯å›ºå®šçš„</p>
<p>D.è‹¥é˜¶ç çš„å€¼=n,åˆ™å°¾æ•°ä¹˜ä»¥2çš„næ¬¡æ–¹å°±æ˜¯è¯¥æµ®ç‚¹æ•°çš„å¤§å°</p>
<ul>
<li>ç­”æ¡ˆï¼šD.</li>
<li>è§£æï¼šA ç¬¦å·ä½å†³å®šçš„æ˜¯æµ®ç‚¹æ•°æœ¬èº«æ˜¯æ­£è¿˜æ˜¯è´Ÿï¼Œè€Œä¸æ˜¯å†³å®šé˜¶ç çš„æ”¿åºœã€‚B.
æ˜æ˜¾é”™è¯¯ C.
å•ç²¾åº¦ï¼ˆ32ä½ï¼‰æµ®ç‚¹æ•°ã€‚å ç”¨4ä¸ªå­—èŠ‚ï¼ˆ32ä½ï¼‰å­˜å‚¨ç©ºé—´ï¼ŒåŒ…æ‹¬ç¬¦å·ä½1ä½ï¼Œé˜¶ç 8ä½ï¼Œå°¾æ•°23ä½ï¼Œéƒ½æ˜¯å›ºå®šçš„ä½æ•°ã€‚D.
æ­£ç¡®çš„</li>
</ul>
<hr />
<h3
id="é—®11å®ç°æ±‰å­—å­—å½¢è¡¨ç¤ºçš„æ–¹æ³•ä¸€èˆ¬å¯åˆ†ä¸º______ä¸¤å¤§ç±»">é—®11ï¼šå®ç°æ±‰å­—å­—å½¢è¡¨ç¤ºçš„æ–¹æ³•ï¼Œä¸€èˆ¬å¯åˆ†ä¸º______ä¸¤å¤§ç±»ã€‚</h3>
<ul>
<li>ç­”æ¡ˆï¼šç‚¹é˜µä¸æ›²çº¿ï¼ˆè½®å»“ï¼‰ï¼Œæ›²çº¿ï¼ˆè½®å»“ï¼‰
å®é™…ä¸Šå°±æ˜¯çŸ¢é‡çš„è¡¨ç°å½¢å¼ï¼Œæ‰€ä»¥å®ç°æ±‰å­—å­—å½¢è¡¨ç¤ºçš„æ–¹æ³•å¯ä»¥åˆ†ä¸ºç‚¹é˜µä¸çŸ¢é‡
æˆ–è€…è¯´ ç‚¹é˜µä¸æ›²çº¿è½®å»“ éƒ½å¯ä»¥<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221103145458857.png" /></li>
</ul>
<hr />
<h3 id="é—®12">é—®12ï¼š</h3>
]]></content>
      <categories>
        <category>â“½ å…¶ä»–å†…å®¹</category>
      </categories>
  </entry>
  <entry>
    <title>åˆ™è§‚äº‘èµ„æºéœ€æ±‚ä¸åˆ†æ</title>
    <url>/2022/02/24/8386be03d737/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="76ac2659e004ed59782ee397a600aa20bb8af24e44d33018f62771cbe2be67cb">873f131ca1ff7e2c43970aa30a8cbe91558e1bd1b27fe5e295778a23f5da27616d05821cace9112a2c38b7c04f815fdea3db87b6c532f12ef5353821928ce95ac46291d124793317a1f1f9e02ad583463dbd72bc42dfcb0dde2aa116c317c374b95af43dc0935a8acaf6d034d929b1b7594462dcf6fa52d4553b14de2d3dd99ed228cb3d2e5ddb2cea98316778aa772cd83ab7e87ebed9e79d561e8c2d08ea9c772c8f4742340df6f79dd1cdbb791d210c7ce5f4884211e5b940ec8c656b7027e41ea2ad1a1e386fbafcfa867e3c42481cbffd2625585dbc8ff876aeaa3bb1e83190715509a26e82b181ca956fc1bb970be084d004e273fd7174ab5e80fda3aa6441155c036123dfaf0fbbadb785d3ae4a39e24b88d291bd90d685ff91aa5e51bacef096d31500d326ed103bec423ed816c9b85d1a4296e0e56b75d8cdff0ed7a15307554af020664fa0a3b97ebbfb0fe901633d6d9d95c698d0c4842acdb9cec6d34e039c7dfd0351b1c6ba8c8a80a3345774a61b73d32ecdc4fec8d8b334ae96b9584534c7b81222e1eeb80751fefa95fcef36c0b5a529e933c5975bef799fc32810f6a30f45ba28542fa11605bc0d6650fb4825e79f8a454aac2b8ffeddce2c7f07cc8c066e5457c3c38961dd2ac173d2205f1f3a85def6edb1e2a107e65d9ca8dba9e32dd4be0966852c7736737175561d52fd71c1b1318d871b7945395ad1f0934dc7e17ef6c303ccd0bfb00a10a36d9c555daa091ecf46515b91bd2b8dc30080b08357c434b5cdce5d837a49afabe31148aa9ffaffc3dff9ce4a1a7e01589bec84a378309ec9f0f8111825d1c3dbe49f2b0e22f070ea674211e0eeb8d058c2e04843a7ac71c8645995b60a6e1c56f81cfdeffd45472dd92020eb0e3a9cc1d4d3946eb97245349f32ce53fc656cd23be9438ea0a18ed5093423d8e793971edbef2895b2d3e737d4d049962d1f0e22e0dba93d8a455de38be61f7c4120e0b6551bc1241c9ec3cbb406cafadee50ef003313597f179bbfd94180914b471209f1bb77ea1dbed44f84c9dea53bb9198b546f21338efffa4eeda90aa07a9d1cc4943ae014eb2f2184705ded2178c956a2c088f900ec7ecc5525852345077c2da562caf3f81716437d7b0b5b4484d27d6b8bb7e10bd31fd1c1d83fee0724108a4915655cf08f2aa3cdc985cd26d6430f146b1bce6e5596ad8f5a2f4f41f896b7bedc5b1e26d0459c035c5627f7810bb292e8bd86e33d466719ff5e24b360882f0969b6ce415c64a304f9ed4c6d483a8966967dffa4b5be2726856cdabbd1bb9b2e940845b47efa58fc76e6a9b7782b3e3b0eb2e9e1bc016391b9b89a1a03085482ec219e49bd11add9e8fc434c0acb56fb205ae57720fb8145c0c8e39e7e2c203e3c39b13319f6920bc99341f94eae06375361cbbed9106331922a6501b3d7f79b6761635c50c4288e5698eba5f41777ef82880c93cc0ddfa9e934e791ec306590f2795aab6d4a188b9fe518b495326ab4fc61d887919e30854758eb31ef50af6e881087a1d73bee744281878161c291f15d9c86b91a8120d216386fb884cdc579216209cf5e316e70b9634fda05d89c687ecae2efb267b184f35c22aa444697e3d5d03ad446e4ded471aabea4352b77d51b186dbd62dedadc16af26aba33ab9acacb23419b64c1651efc33f0d2dfe8d60eb244ba4b3ec0a34269d34407b248b1ee494bf2cd5d84b9f8acab4528c645de22a88d9627b2b55269128bf3edacd8673134d7946a529255c85ab500798e94cb585449c88db0f1f6255b13e7b03e2fb626fbec759bd9adb8105668d44b9e8fff554b7b8518b20f14ce090549199af20de2cb7a3b5b69318b3530a7f4d7824d96adc51b73e7e7b5f9faf04f46e4593b21a786078f3915c5f23df41c42dabde0f9cc61597a15a911e45d5dde8e723a3618c53737b25b61cc24cd6d9f8c8b95ea357a5b5ccb03242be4a6bb8323f0cc6505b9b867efb44ddcf8c0719d5d5e4089f34114d585b3a5a0638511eefad7c97dbb808ec395a79848f8ebf410203503a0341f587f86b05289bfbed7b25d24f7eec8a367dbc7b72b539b8ec16e09ed4183c443d3e9e35706ca0adf491c33278f9b026afdf06ffc6ffbae81c9b9a04208e7e6c0cc7dc31e3b6c90e2c717ca9b4799efa9f2db1d42d88ed4d5e31cf069cff5cfc463edd778348af45ec342f11c9ea67c7c00318eae846d2dcc68967d91bf6cb8576c614ab5a6d993048ffb07f7f8f3f3bb4ae35fdc7014a1a81a7bef124697885eb7624d6971b7c13a6bd768a8c4d50e449f5cd42bbcecc357bf7eeab5e8ac9f99d7917cbf1faa272d129c3e1ca1365cbe20b57f9863b1aff4bf79500e3502cbd88731abfb32e5a1c2c069a85c409875c2e5ffadfbc7daa8a11b1d90ba9971cd44849bb0be924d1e0a08a2b3944c6876c6eef270f0bad92a3806b59da72a53db2be0f6a07a23b2f8417f14964dd017477af0067c9b7e15368a6af7c70825016f8fe0dfdce0f938c52dc517de4011ccb1cb968bd3ddb218ac17963659f4ec7bc326407d0116fb6bc02551e3318a037d233f3d7a277e972cf0cb34841e22d1cd5631c0abafe8e1bdbbbd5778ce139179ead8eac092b51ac197b7e18a042dd805b86d28d86b45a63f1ad02b6c4264e5fef657c3baaca3889c0e11752253573b725c1f541bfe1521dc6bfbc097ad4dd5fe49d66b10094de4d7f794d38501c37b0e5988f4ffa4c697a910c78c8d9e709c27e32fbb3432319dbf1fd41411e427acee6d4ad03f1dbd8d343a62b63183d7c26f2057fef8b90abf49a16dbe4c2fddd87fb6f06f0575b4a134f3bcd1add4e8cea176752534687fe258f76fba04c0ae539cb4b62bb7bc5894b065607cae163cd5de66b43bcf2f0fd16b303c9078bdbd2ba0fa3fdabf8ac5232d7da68ab99e841fbf01ee8e20f9bb0c0dcb9c5347e09b0d94a9c821db52eabb12919d5dc6d43511c74f92e5baf1513dd7ff68482610cd27535aaa47f13ccf6c14f657642d0123997428ce763d90b9fddf12fea7df6835485b07bf5ee51557ca1165c9e9460155962e6316bbd7ad7fcf535e4023619cef0cfa332e3888f09122e1e7608b472bec17296797c60be0e0cc21acb82e5e9d4990a1b77eae7a41f1ec8c079abddca71ac08c7234f062533132f33134ddde99be7e89fee1ccc62237ce42e0dfc3022fcc65cf14949d69d9835860edc235128fc659dce94f24be679bf84cbcd6c179cf6179a2283c68263524263c7c149e8ec772ec526814bb5decc3a20786104dbd4674c38905b814f32eafc0adfe38bc9c941978929050cebe35ce6945a60ebc3abd25bac9c3be76fdfea578f50e4a897d34fdcd9f672b4e4d85c6b6a5c8eab3cb576033a87a5251a309b56fb71a58afe9b407e77b6a7bb96a249fd01fcf1351c28fd86b9b0b8fd534a4a37d81e342cb97ee8e60b55d63733692c68b9a452a4e8cffd318874926eec00e4f92e256fde9395644c7c3c4d6d449473c5553a4b477459c9a3a039f290a56dfe5518be237606e436c7bf7054f9a001401c3db3a5911591a491c36fe6f3699279bfcb0b2e8365b7487206094236bfd8ed8adc83a76fb9eb9ca26619ea3e180a5aec0396a561ef289ae0f2b554668fd9a34d3668bc052436aebca3607fdae412ff0cbfbbf308123dfc061b1241f946ff0b3d83a144ed84a363d83700a97129d4dbef772590f9ba8b91d8309daeb04e9e4a2810805b3fb95131172020ce1f0c727340071e705c40ff01eb915a5f64916a04c64c5a28fec6d79c0d5309e76de05391c9972df1a3e7fe0c7372a8b73523dfd00995f1344636481df1df6c8b91ad3159d47dd644bd0990fab9b7380b432c96bec7da87d67f87c1c7d75704890e3b29ff6f177086f587549594d8816d4e88097ade43af4f18e736eb6d87b1a9b4490b3e9459eefa6139f1f512527b457e8feb17b0d27debbe1f5e1cbe31357b6382f5a7513a15f32c365570ba8cd79057000812df85b4db2207af47c7fd36234373c9eb9d6c8739d811a34ccdade79dcf3a1d0cae557d02255702dc516d0871b87a17476a034970dc8801b19184a010ab0fbeecc91bf5e51f090ebf00c35fc4b6ad04956295e7c8e38a6d3cb119fc3a8894bfea95bddde99d76ae328dbdd177e259feec22d5839139277ed5a9eea49ac7ed449f62eced2bbab7932221ff3a0206e95314821be108b003b7769aff1f6d78515f89c7212e52f7e236d99371eb738af770ef5b768b21061aee5c4a86c4433ca4124c2b8c37061a26c5b0d01aa8e706ff4d481311cf4592f13e98f2eb41bd581b60e34b2d589eea50b6dcef18d6ddcd6434f457911b8ffdf404406a2d6bc2e82b0e5ce0c8e65d1eeaf4063162720b8579d81717992e1d3bfedc6a4208b7826ae26955cbda1c4e80e582d435fba8a45b8cdc4691b342a50bd2f740fa3c79f4b9fde01d18ee5b04fd08ee2bb6ce8193bf7716ac1fbe2cc274bfb288e775cc582c3eab3f7d29565b9459f83941bfb1496d253bb30ddc7ed9dbcd34e7679c4960705f9bb8769e8494c994b5c0caef633284f297b1fe5818051e648a467c1812cfb802756c7b6c5ad78ca9834f03040f43fae9751997d54fd3a52b5576635d1ea89637e8d512a239d1c840770ee2de21c958c331a28a280dcd0d12d8de8447565ebbedc593aeea1756ea55bada512dc6c5bf72a6f451dfe1f016c83a7bf36f712894961b02c81d83111390be527eae9175d63e9082485a4644fcf8f8a2158b00800fc9705a08876f11dcbf4e7b0af55911daa9d120af1e9529e0da34c62e475b0eec367c61186ab71963cb22c022cfa332c0060c121c2d5b79c3ed225994ba286a581273144d3c279ac29041e389bef11571128848656c83e9b3e25108cbe87e29b836554f7af0be63bdedc9d11873a1563bf2ce89b27c5b6d5cfef33326592bfd60d623d5bd438dd5bc21cd48d715c66e04ba3fe9fec5928fa1ea78d6e8300e30b7d83b7c226f20367c57b3084e6cd163d2048668ad3b58a10bbac1f004c4bec91064b7c300435edaa7b9f7d4be4c9f2fd6000096e58bd91baaab082f3e1bbcf2c440106c06310232ebce4969d5de159c0df74f142a45462b3d337ddfb6d835ea8e431b5eed35b5f6c9e4e9e5472d7fa6d0079ae0d1c6ee0b50f6e9c1eff551ddc591abdce415c4999fffedd52e1132d882f7aa2f17f2d929f5697029c25a37c920aa586d3286017c99d93d9b3811f54906dbe7442f5ea4d77ffa40dbfabe7c573370da45201a13d206398ea972759d7e952a19aa2bf58c37f91f7adc543ef4f404c83b7779a9715a72312a81ea3066619b7aa1b50c95c317195bd94f9b7b6d15361ca9a99106a0bfcd73bf027847bdc12c4a3e34cbfb295ebcbde2969f1a39cdec19bef9d4b36026c2f16b3a92c1077558c632c4356707eea3d85ad04117e218efbf0b9d8334d7dafcff5933c081f561165c975d6f42c63359097f322146795be15fc24c4b4262f2e2fce03a18383dbd7a9bdc10e98c9b34627f1298b44ac761e586d64ebb04c336427a74366c476402a5b7a634163c797686c5c17a42ee0dd7f1627667183bb1ae1876e1b0a4ad06bd2dc21d42b1f4bd16bdd98e8e565bf64abb244df83c06bd34b06866e90801cb9e4e09d902f10f33dec45f544ae7ea9a491a4dfbd7d428d82d345c6f1a68f53c598612b6758ba1fb5603c662d66b74cc6811f641f55aecd9a18931395da2bc2e0f6d3354c4680c4e82ebefa255f4fc79d10123bc43dadb7744c43ca2aaeb8e1e67309767b057456766233505047e1006b61c3d8ccba06108792b0a111409d802edc1722c04c504c2c1fa2b2b6a96b153e33d9ba647d83cd070bbee89b8ec2e372e58cb6f8af186d8d4ba54d6dfc59c527c14d21c561ff949502947354172f5ce98a745f53da30be264b8316a85b55d5d7b48cafecfc1988e344618af05dedca1740ae428039cbcb4122237763d316f905914726dca50b8269a4856603672862c18c37b8018d7436f832172b2862f1993e7a1ed589dd53889fa5b65e8175a1478b3be91976915359383dd23d216b7a7dafcaadc16d34e7220a12858331bf9931980d0a33f3c87810d932fd96b608a8c3643a88d3b2f3dbdbc70eb53ba29661aea64aba76aa5122c614bf68768f33b3f53b8cb768259482b3b90ccd4e3ffa0d1a856dc344fdf3cf874536868b993a8acdab569ec1f2eacbef4ca1ca96707cbd0b4f48f6f1bb07c67bb2ad7d04bfbc91a505af7bb94688c883b0e0ea5868e2918181e5430aa06c99726cf5b7868cc6ca0df0f8d2f75cf7cf71239bb5cc7531e9cd586d0ac90551effbbe4a404cb8aec17b206ca3255e1ea96fa85bbd232b81c4da13e37b2f5588c2423420a7add6e084b1a850e9b8e9c83c9e35594bec93e64f958453483e2446cf1d0864582f05f854680bb76d4ae835956d1ef58185907657b986294382084342f9edad01a5ead90dea3ebab428570b3317a4b2d2e481c222f4d53f436be05f8e246014dc74fed3cc1118ca23dcf0b3f912f521e0e71765f40e36569a4afb2d51d9b8841d8bfb5b8a3cf03dd5ea7c38d7615f1a8bc93ec1210d0b99607c8f610147dd07006157daaefafe5220efc86921a077cf89ce247aff3fd76d6a94e3ca053411773c44e18ddb2cb3255d0920ef832713a9bbb5c88393ee9de1b6dfffb35ce65c88942231484dd7c0e1ce2b0f2edab27318cda671ef6ec4e84137d4963df16288095c289258d5e38b47832126ef38ef91b475a37f51cc4b7ed34b3c05dfdf1e2cd5d19596605d2a0c569d61f6001c5f817175f0a7b5b27164771e3ac6bd0b3759ab2801586a0df0f1c4e443c535fa90351344a556f09e8be35c95a82c6788f1df9a40d30c33f68a7b132f1095e91344cc57c54c8d34f8e2af1c3a6d1f36ab5372c3083767783ecb5bd6e5563baec8396dabc6fdd62443df25b18ae04cae0dd38440ccf6bc7d06312aa67452d9a15909754f9992fa8eac6efb62a9b2c44fa2a722b6269d79fe6127bba91a3736e017dd2f7cde74b85447a457c9ff5f27866e02e0b268de4f59d0823b98c1c6162d774bdd2cba6fbeb3fcfa4d95c94f8d1b5fd2ade22ca927a7d0bf814c7fd9a72e9ea25c3a9a3ad662264dbe8d98738f2ac6254a1cfddd41126d1371c9618afa68f23235c3008f1440266ae050c0f9a491b30637e84f6b4716ecff3c3c30cd0b1520c5d61cc522cdff55295d3430bdda35da3debad26eb9bed4a9fef7afaaa02a923aa968c6330b52091a64cdde774bebbca7ed3f2146d7bf6354d0b66e0504a7ee99a31985c034dff91b5b788d6584ad1293612cfa91f295e1709a5474574d9dc5b2446f2aebb86a39c9f3a05f41e4ff804d425dee52011f921ef96e3ad6840aaf47b7c3eb67b6a987b51cb8f7b8f40776a9bd17bfa70eba72c2e2552538789ab29e30aae6117a3360bf8cec0113fe384526a3673b4974ce4a0a6d19552c0ebd3f784fdb0b0af356353cc806e4dd9fba3b982b5e304e1e4ba5f9608475449b8f1472c6aba71a089c9fcc1b22844af8278bd676328333b720d89eb5339c21af4e8b41de9bc72c999cd788ba01e692525f1620b2abffca5d2b8b91330b7682b0b97fd4d3544df5ad68d9520ac19f264e2d50d7aff9652147ef3517f19cfd4d0da8e74dff44151e60dade3920ce368eb35553878dbecc863c10c04e0cbd681f03bb381a7cba6fa3079e9c0fc904a302cb27ba828a85f3bd83fd5b97a881492669cc6f9a1ab03dad6380fe6337d0aea8baa39f3dcfd2c63b6e08f269e2c42938c7d1da46b853f5266b581e6c2f8af8948d86da24e02ec417ca5f4a3ee01fb25891ab0ebea4e3e256b427f609eeafff33d9053d643494653d627433d1a9dc64eb07c3e48212b2dd6151c6a501eefaa7cb14d0a6b9f41a0a5d15ff2f90bdde8d2ee22bf2899f6375c8ac2f9df34b0a5792cebc811f9270f6be9e653bb659b1d27c64bade8f6534b47c92c1e17998c8e14b0930f3930a7894ee2aeda85dad6848109218bfc200cc8ef521f1e8e4ea8da3d73321909010f9da2818694aa7a55339ec4f0bcc1b2970f58f9f989bc9d9e219fa2da110276e79c290943958facff05de4d2c5dc27d804ba8a8d92b6a887aa8b50f8aa311bab29aaa0125e21fc1c5969477158749138994f48f8c230dfeaed090981dd2bfd5330459aa09be9d88313217272309b3870ffa231c83896d252aef3169421f34cf09405eab72001fc9cc6ab9dfa8c2aff2779922de632567ad96aa5ac4d9809df6edc6f73f573b1fb6f6ed2a72c15e177b864eb1b6d2f95cc85058bcfbfee68b4155e80cd73072312824f686006365b51526f96ddb05661470b0c2c81ba24a71f309eec9ab31629a07281d83433f3d20730fcc8da2b1948001279fc9c4ec644ef679c82db7be413aae6ea6fa9f55cd06e8c83586c7e3c9a003caf96d4ea2f46e73e26fdfc2624c076f5c5b3aee55d624dc56ec206a225b05f9744d75618ffe51a51170f0f215a4f0a064d28a55705bc9eed2b15cef40ee26862c0b6366cc2502dc5484adb81f6eeba7a8a23f3c29dfc2e3fba2a4a9c73155eb1ff18b1e182a84f273afea318677f9a6f0a8a6c4aff8d77ed89af0156461d28b752b1adb71ccef3bd4aaca3b55849cf25bd6c050848d07edb1751048029d252fa940bd49aed60bca7910ad3624b03dc994edcb1ad5cd7a83117abff90b151f8347417589041d56dc66cfb072960a13a7037d949e3482436627da29689a0f7ebce8bf78b5c10f2c05b049ba09721e9fd4788d3037493119002c9c3a22631da8ae1a084a2671c38b2d8492582f27e24a4d30072b6c7c9cfe2261ee419f47968b11868a9450d97c6373013f6d0d764619866e4a6e7a80077ebb0fad69d99503c43000413c3611881f7171e12f7910afce647eda7396524c1b8cdde1f458444edbb85babe23f3470210901f66f7ac3ccd1c4a21d1ce826171923766a8a9f510ba0a6b2d0738aa56fe45bd85b656c8cae569c077dbe0dc4cee6036f881aaa55d34f130e0df526df6b8399d129b5e111e5965b66f7e89c27d77fefedfbc82b221a9faf0a594c6f157717e4ba3c8fc9584fd70c0dd784d60521ce26d0f0ea81232650073358c64252a0eecbe4318b951ef48dd4c8be36ca5d00d29af1a85f1151443898de45565826f3a483d90af97295817a8872b91cf98411798b55a74b51c4dbe57f757f5b2c60326321e0c639d0167b88a849083df395e9f82ac9acd26c61482a643d1afd2ecfb37ac50407ed5c5e2315360e4ec52fd5540fa3b78058e16700ec91119cc173568af604b57d72aad86648f7754739efb609d3ff4bc1ccdccaa7a095bbd22bfbf78f53321b7c01777f03322d4bd96cb74a4adcc4503b700561247f32251d62ec6e7f86db21025e208da441d330fe0367d9e57df467b60f7b683333d3a2c9a88ce325e842b876fa879b865e863114ae412f4c105c100bb124081cac51800ec051d391ab730cc0edeaf5a7bbd542fd65251679b4f530e29371b3239a69e3e449dab904eb0dcadff839c7574bb143fe2c2db169d5c2aa0b70001c1ddb04328582afce3b0b7904d3187824e3aa78b7bd78f3f9cbfc3f2685c157aacf04cf450cd451a0c540a3907f0a1c5bd967282a94949ab494f0fd44cc37e12c5195116083b22c80c4f2b3a70237063d7f91e75454352048bcb048e258ae4fbc3a39db35341b1c615486bc4ea95b4d81e4776a4684fde6851ba261e70a540b418ee492225a41dc450c5049149f51eeb8d511e9126df1fa4c1477d5ea8ba04d05360c925c07a763db760a9ec4dfd7022c5a3d5ba9184e762cd4bba11ed36f6c19c6deb2d47ba7ae32f1f4146ced3ce12d87d576abf3026720644dd9b9bdba145a7449d541c7c5f661a7df84f7ca59a5ab77c609ac93883aef54175301e62d1fc56acda383275057405cdce1f80eb4a27da35d87e12945d581c60cbe0db626ce7f46ef03b174c2f5f41a8aea4a0c10ff9138eaed74b158d70977ae932a80a26742d51440a94aa6bf8775103f4cea90e61a52fd60f1bda88e63bcf486e63ca7105495a6e72ab6dfa1aefdd65e6ba1b6e41818575d7dfc8b1d724199301e33c30755ff75fe87faa654ddec5b191c7d7e244175728aac34a374cb537b4e0c0cc3d9c3b7ad492b66f72e6734b190e503b71b808f44f7afdf8dc0bb9d1f0dad124bc37fd2ed973eda248f89cf6bd79aee339849a9b00a1d43c5c46d6e957b6ff0de66de7a25cb8d55f75237611f4ffa813076bde39fa60261f79d2a70bfc1ee33f2148a6917cbdbb17c9dce2f1220d53c28f6ee290c95f7a4cc5316f07bf97997695dac7b0fc04209835e1541cd601141967e2ecb4d529119d6149162f4818e433f63546b7b93eca3dba477ddcd390269140de5ecbcfaf2909b0d298ca9c11f7421de0c45958b7202feef658380f0016582d7dba3e1da7dd8634b294a060ffa13a8f3182686eaecb4f7e03b360df32a11bcba158c3b18bb9145c1a23226c592be82b9d6bd829513540d6f1334ff70bbb3d15882439897c476e7deae4b9ef2ee1ffff7c1016155b745ee3bd6073dbfbadeab8e2e74a4f0f5ea118d562421fc74dc337afb0f8957a31dc0a3aef41cf72e6017f8988c8f0b053c641f46c784bce845d4a42bfa7247e0b6c2b3cebd6120501016111ab0f98368b8bba61d1a881cc45afc5e5cc178256f862222d2e34a32d9f3895f5a5229bb3db596add86756a1a866f3cd01455eba827bf2dbb064e07631e2447fca55a7eac379656830e5bc8f827e318b8f169e54fc</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>â“½ å…¶ä»–å†…å®¹</category>
      </categories>
  </entry>
  <entry>
    <title>æ¯•ä¸šç›¸å…³äº‹é¡¹</title>
    <url>/2022/02/26/84b3fb3c559e/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="f4fd8c92373b59f0b3b0c96c3d55909e77a6f7a1c9dc2c6e92c75a9f6da18a7f">f638d67e356a706b7b082748a96249a9c6215665973a817d195d1e1476666dda00dede9801ee74c82cd7a946d96afe739c132c3adadb052f1b3812d2e382bbb9b67d1a06443ab4b4344bdab2822da6341e5da18560a52307d2bd1f9203199afbad5f76870d7d90ee0f0f579250a59e5260dc5a69a54d8400868d9b23518d413782354b3de38bab4b3070fda0443c74e65d1fdbcd6cb6466819e1e93168ec312c4fc45b115b918b99551b1ea7fbda3ba7675bd17f0712586c6fb48ed4e4522899cf6be56698e6e1f00004f7f70c858b25d3b41d36161572cd320e2f6232bae716624033350494f9cc193f65faa159625292a29b7afd5cd77486f28ceae4c9035d6ffd80607299d466ace0cf92e56089e1ee5878a1263c7f259b50348a15c60b3982d3cdfaebc5fe0d11f14ed5991ff21076537d789bfa125cccf3c82551ebf5aa2d3b10df57217a159c5e276b836644d56e58133cf6d5e278b75a7b9cc3f8f8498870aaf85f59fb94fd1aa06e6b91fa760f3a6b5e70a097c72f992ca04bf747d5fb92a985ce681c4313f99538ee878ce6dc89084b9ba12f87982df89e63b9cb2bffa3a7974f3e482948898ae3f4c1afe83abb65561cb14bb39cbec8f0ebf718e74690c7d40d5af607579c5864f48ab515c41b21b82e600533d57a84ea3af5f5a8c22cf188f3e34b7aee8ab12053ab5bd63e4ef3511b940e664cb61c56f785f9a4dad81e476daaf2a2fc03bd044ee7b98dc2b5d48de761eb3aa785084463f89e641cbc0cec212fa103598fffc14266144ed478d41c1cb1df3b2485f94027ecb5a7bd318be6517a484adb9b27a3c3161ac4b58e399ef326bdfb99cf00f9480195ed1b794928dbd2a8042e74a68739cb005a58a4454f64c463e81c4f3ba5b59765f0ea4c1cb43f8cbf6669f10e12f5ccbaaa437f350d22f470f27705dbc7008d6bce5587ce521a3b90806f3462eb4e6d2cc87b7bacf42fea157d5095c98f8b470e3617a94891f67926661ebf4540ab818b5868a6347927738f2c2ec0a4eb54201ab8ab18c0902b548af3422f6545e575547fca4eb3150651ae5b0fe4b5abba8d33d2f1135e5214279211da0a18be5561e9591dd9ac55ad3a6afdd94070dffcbae9de477228c86f4178d4757c641fe0bfa920f95072f547874b7e10b74853918ec2de251d9e4f1a325db3e60609cc524c2ace7bed74c54db1d68f7a5e88806dfe0cc25d66d48e805f8ec737519c7048032a774133d583ca0624393ace813ddd78b06371c614c5a76658496e95e927780023dbcaab5aaec7d065509040cd57e4bcc282190e8d28512278576510209b75bd649b697991bf1ce439196c987577c70f68e9fddd057b92a68c93aca2a1e84e2cb061225fad1e46e707c1854b38a7c356bb02abf25fb70c6a5408b6831321f97820fd3e84ad7dd1c6e67f1cb41ccedfa41cf103506ca3d93262741619d2db8540b44124740d7c253166eded31aa7af34b807797254a8b745a1e6a466ea5e3700b98d5304106bf9c34b936cdeb3c0b5101192bf32dca35b499166c209e1dbda0d99ffbb3d4a153f2411c8d0e535204e71ee7f3414c1c0378e914d202733b2d670ccb60b24ce6f8b2f35ec80b33aa57aebf366e173338791027abf433dbbb4d921e99fd03929007bfcc267acbdd325cfe122ff1f294a639f34d49c964184121fbdb342c4c9d5149a57682aa275e0b92c271816bcf962f8e26dda8a85bb6f4fc4689f30cadf05f3404562e11852b551ead6f36a32d2c6ffb86ae3cc8033f8a8b1f908aa3ef3f850766b2ee3bf4d062139118d1453eb99a4165f2a5969223e62eb60821d2e88f6b3b9c41595bd5cf131aac537cba4a23a45d4ea995e63b50678b418be490cf61e2f3b377f9489c5ac2124692e73ef754a2f7a3b2c3a3dc9c041b48c3b6f082e7854d0741bc97fa425a45c8311b69b18eb3e1df457f6c073e24cda165ca90b4b13a4b10a71e3e664d835d2e5a5a2a7ba2d07f701c40706d43c2edf54a797e1e07dff8ec4a12aa01b1710df71a426e7e2544dcda7cb48d03528e4c15e5071e5c3acc6c8e91f83c88b52a168313dcfe6e0efeae1a6f363df83ac6c91d8e407bc5744a4880e6d435b73918ec29b3ef124bd33fbe031b05222025473e1a2155f633d831c7618f7c237dc9408b8fbb1e7d1c607de25c054d4e0fbc6b4ee9aa9b2857a547f09d54fc56e9a0486d43bd7d3b9ce19ee3c960fec8657a7b52cd8662b9939f84125451b386d97bb4a532c2a0c5f2aa47c9c3c020cd1d420335addb41b6988599574179188ad6ccd7125035efee0f1e098c46942b43569a14946ad4bbbd4df2c0d02093dc93f8b2f94a4101697048b7ab8237fad569806295475d5de8b127f70949eac403be478eb1b5183513c59517bae5cf6f84574aef7939c28d7cd635608f66bd7dbd3fdbfd3d97e9e3c3902a132be3a1039fd6609a1a088fdc8379a2068dbc311f207f73d8f2b039ad474e37fe0a48b49e3fb7a3ddcdaca9a041508263103dee9130c5c8838bdffe1e296c96c5ced3a38e9120e34d57156352b5c670be3911ad2a592c1582d793aafc3391d45150f4261b9f32fe60d19b3e2333b7d378c8a6a2ea0b9263c2fc4ce7caa2814554162032f1112b57de660a86f255d8aad7ef41d209f9a77380acdb967ce73d0cf664572c12a330642ffd86d86e74b52864dc59f440255c7b9a427776882e171649339af72ef8e10b33d19736ba5b76ef1e5a8abbe7d4fd7d44a6418e8940052d6504e605dc907aab67aa8b72a4bfcf231e3716d0ef998fd3762bf504e4b3349a7e791a8f3833e7b844bc5359d05bbb2e14afec119edc8567919d8f6ae498460dcd263769b6f43461a796961671480d182151381054a6b7eee1d6e3db786643e3be5ccbc6ae1770ee1eced38760996f0ab46f543f913494490461334190c05640ae034814ad17e12bbb2336c565604d1015065f6f06ad811c10584046a22aa83d1ba9fbe813f255ba84e0e59847685c8f2eb42058383fd79607d5c871006bfc8245e1851422484c4328c4203357c8c6d64b0f49ff86c74e98095b2c5524ad3b4f80ef7669f4f6d71de0486011b04103a364a5d936d9bf881501c12b9415f42526e2b0892c5f2b58e39c1179ecab1c853dfb0245ebb6f03f92c1528488dce3d03515d9caa3fce731f4088f544d2b5fb3c52d6a3a494d240608fe70f83dc481b3834dd14ab2bd0dba6afc0856d3febcf76fb0961fd382bdd13f15715a3fa4f2452ea36b4df7cfd52666afc9b8e9b71ed2dbff0cf16d65374357043b2bbaf506f03f0bd5d69eaac61efb5588633748075e58a17fff40126d09f767bfea0a85e910da74d4b1ab7c38ccf01a8f12a2ae8f3abda97bbb9f902b86de2e04880e1e02f8aa85d6f34e88366f7256400a8b0e1ca6a5dcdc06b98ba8856a8d067a86de038640afdff23da3187de48de0ab2b12586db6edd68e91ce37ebc859ce91b9d2cf69466cf61177199790b37534c07bacb235b75bfb5bbec2ae026e4186d422a82cb20f57242b77e6103fb100277daf1e5fb1caa10c472acd1bd1e96c75bafb9f19e4b6ec237ccce02b89e7ed5c77f298aa539e465a672bcbdba240363003e053778790a7f292356464adf298f377663ba77b422db6b1caf9f2630d66e0c0193971a0458c826a7aca3340cad8750deb09a8fc329f743edd1be49b1bac92e5fb071789afb8459fbd383802e9dd35aa5367ca0084cd27f6d3167e34db2388bc4e4d7e69eca4759f14b65389fdc7e370669f4550665d7cf49430900a1921fe7b00fe1db2734aed0c0885032fd0ace587055304e21d48878dbeb8e7d2b4489449413b76bdaa199149b845356122b778d927b6cab7dbc1c21259629233968aa84310bdd79a5a68b1564225edccb3cfe1cc6c0f61880d28f9e44ec106265146f7c7f1b6662295b571b106c8d4ac3ceab86ac2e1067117f638a6b2bb48561558de74c9fe5a972670ef6d76f874f75a2fa4f49401b50728d69b07cf88822bfa956af02ee79af5c325994838b0f9f02b266a906d7c23995e300704da2b3594b4542ec14de0cb9b25ed8ba0d8a3f18c9d312d023bad8c8adb578a87943ce0ead92e656147abca4131d49b98ff5748cf0584535c492399680d31cf95ca0d2ced155aaa3ac061dd3bbbdc135e92f9e144af55e1a097cbead27d35666aa85fb7dccfd8ad80c7018cb9b33b3d32d6b5cbc749a3eb4a7310378d24c4ce18a915a54cac6882b185c0960ef74304a0b31ad213190aac1dacadfeaeb94de7bad16b35b2d5ef450080ce41fe40d9883c184328082f8d0fbac86ca9d0c831566a61f23d34863ec0508a8af0edaa91730bbe0b7a92c000d1a301c147e7575a3a18132171ba4aa81933625d4c7048bf264f22c8c067bd870555536e79039f507bf88b46e3f9599f55f102488b9175d985e5e232441cb41dc50b96e68afea2970f03dce57bf8518434b06afb8c2738f735fd410e6c0335aa2fef05f7252674b68b14be6cdc2f7e17f4a927d1bfced4c1675dbce0411093523529d3300669f451764e5486f94e6053bc26b329fc4928214e25f715d1f70454fd30222e5e10e89c826ddf87c1b44255f60957999314c63ca9c21477793f14ebc47a0dc733b5b22df10641c7655d96d05dfc79ce152e8946fa61bdfceaa0d4f7b481c3c89204b715aaeab4c979af42a88debc938df60c1783c05a50f308ed177b4c958a548d2bb3cb09df4db798e2cde170588e58b5ee8c74d1b53bfae3054f15a1e02a1b9b0ee07f701f30744f83b3a084b238c67e5f4f0add7316fb96d067ca335d1528e165fd4f60f0df2053eceecbf734ea06063edc3e0a2709b71cb11e718a9b4e40ce5a2edebba9dbdfcd37c84cbee41dd527de2f901b1f093bef5e4725733e9ce896e14cd27e329a1e8237dc415e13b8c8ba004f8c4f7f685753e7aa49bc32ae779a46d9db680370572874b3e645fb7f017f1c5a8ca6eac80cfd9dc415cfab9b89d18620587086c526bb6b8caf1c700f53cc703dc6e56f6edb28729644d910dadf45a335a28a13d899b6512390a0678e6d81961f1c918a3eb3367e1dbce319dec385033efe392040af51cccb2ffb4575592de53b0ccbe1e007c4109e93d488003f441b1de3d4012478e36fee0caea84f8ba4cad62466776b98cf98a2742270047e202763ba6606014b1791efd64c317cd34d29d954330a5a49688d726218a63e42a701b07d3234e174c4d808e793609088389b94236562b0746bbb3a3bdac3a1d4472e97d9b99dcdc2cd8c388e6f886439e437244c55bc85504ce782947904ece20b2c0d185efa864089c8516f01eb0b40a4d38ed3acce59165be477c8ae25a6198e41448d83c600d2c39a040b1ad5cecddca71a188f40b80eeb85503b96304ee28deed0f193b50543e81262054013ed2253a59c2fc4e8aecc05ec35c49b2ed9a029f95387e6f6d4bed631855b00f2f360bbb8d4a98d488ce1926848ab5b03ad1388e76cd5d1584b1a59ee0334ff6f8eb6c1902766ae98eb2faf43ea47b4cd05b8969e56d5a3be67243ec197098e4c5a3d3e793f2919aef6901e73e3e99246017fceb6edf0bbddfa52378640e03a9c957033ce8d4e77415ab03ef401957f6790d6a451c64922edf8055c427f13b2ff2a26f6d09e3d1727406507aee1bf1348f59a36d1978fd30e7048c5a78e51c95ae08ea4500974ba34257659a73637a64b84228c602becf883268156620357df65fad017cf8587e6eecba3dc2a6fc9862a955baf26a8f435bf49ceabcfea697eea65648973cdaceba54ec52769fe65e1a46a5c8ef6c9e232213b5b0ed4ed4e65a8be8221af11f7e6bf2be9dbcbd71ec483c800349eea41356fb92baaa93c63adde1342e0f6527e4b19ffd7a4d1917b62767a6b40387f6858933a9ba0b792451e9e5ec74acff461c774d6bcd6ace0d359d389718addc363a00c118f5f478847d62a65a80af780b5ac9eb65ce741be6abaeeaabd571b0f239d6a6be2c49977e72716d87b0ff64c0add6f6fead94427beb5adbfeee40db01dfbd03bf0aa15de884a5b929e8e668ba10e580502a6c76a02b45366d1dde4b7cfd6f45e5af6f7827b4bea83766a9cf57839485e9811bf5a1dcb1e5c015428292fe3466fd49c84735bb6fd052cda617b17289c66a71d17724baf96315c7c982646d0a23a4ab87e82f3a8dbd9cf641a0d50a9ab9e08c22f5a582150383b0f33eef983a53c6d39c26fdd367b6a8c8b183d39726474abbf1cdea837bc18333075ac31871bcfe5381ad7195746cb6cb32265fda80dfcaa293962d6fe95965b5f3f13367326098b1385e623c82517767d2650160ab722262e8173a135e58ffe0fb6898c2497300c1f25db70d8788922e13424967f2af138005445e89ebc887b2808d55580e6bdcb9057b30fb75fe3ca7f08334720737121c465531cb6022881b6545bf2d3020446cd90dd76c1109f9ef1839b3d31f5a671f76197b36fd4ea4fc512ae2f6686217c32b0914a53e97c8abeab31d38f1a0775ba6660ceeb80462dacda323e5bfadd9f9e64877ded2377ef9efb5161ffc26affe457ad94b8861ad3d62a458a7a57e0b8e1dd6e9a00668b8e2959bd84eb11aaad34d246550d8745f1872beea87d5decc0667b33afc85411ea211f24f917002005a698948a53a8efc42fe28690cea48dd63eb9730c5e648962deac756f9a568ecea3484200e5fe9c3b0c0d5857ef6d997b4ac3e06ddef8109accf55e9839358e25aa276c35ae3316ec3b352ec1b6d1d650a416325cf0d586033bf07e869388b51904083703b2cdbc21c8c89ea834bc4cac0c3aabd1c92c7304304d09ba5dcf9340dfa85fc8f9d3798a401012690a82a44749461066a0f84f0f06c9e3efca72b45e73c43a179d72ff61c900ca1053df6f954e211bdd5154106e34dd4f43988ecc14fec63d70c907f50070d6191c9e8ea19206958e8fb734ad614a6f7dd3681cdbdd34ec6c9d6f9d566ad3eb0c11eff0aa147e3ec34e932724be8b433f704e312340f0494663d8a02fa82702cfb0ff1bfdad4c23c0b6459629f1845eefa9dc4be1a19da686f09e3d34cf8cb7aaf6539a4033972df7c7074cf2dbb647b3fd6dce2bb31acc87cf0a6c6d06ee7f89853061344e48f0402377c1c33a7a71bc8abe9c052caa49ed37228ae91ad53994bbbd070ebf1d8e67d94c51ebd042792a012f7d3e7cf7feabbd26e94cd7a099d05e08f16a66197336dff6abd5e3fd3095e5c5d1abd18e32c4b2e71ff1a1c36656638176c9b8e26841d4e4e2f245a258106762862e35baaa72ccd4dfadc90b62b7b3d41851a6b8e5333339cb21fdfa11105a3f5122ecaaa4e8f89f64ed9e5c22f4ef14601e8c5feeb4e8b0496543091dcd666a5b8476b34465aa89261737796e5bb5bf5eb44014becedd171eeee3149159720a39e12212644f5acb0d76e439085408ae7bc2809569cb1f8981f19901bebe119675e8787132e3539380b12a8243e261c7dd40c45248f015f7be2a72b1de650e81bdf9e7635750f65d715d83da796f6e02a420aad02d4040044ffaeeeb1fd20d8dbc1c0d37e30682d3cf7db6bda6ad2eaf0bbe99455316a26c41853bf20ca1a5bf84be2e1574c1774f5eb6bffcfc93d386df7aa289a9511039a3de05626c72dbe0cd1a6635907404b5fc73d5ebafad0a7984a5a8f5b7be05088cbcc4aab87d583f86d9731eccf25ae66e950fe6f09c924c56d7a2c10c2e28e9caa1c9bdc7d3471afba32137bad7797ba2ad0e43b772b301facb6b290f74afa718eb67900d492add18677d8c44a90d369f45baea1a551eeb4335ce6ad4c0de2e619d77387002a27b60014f3cfdc153efe1de50eb29d115b3ae6200592034157f51c31e1a832652f969c4bfe78c75b6c145a9c6c5b7f7fef21f6eb991ab936330b739fdc6ea738e2f41184a0c0969ac6943ebb3fe1d42155bfdcc3e18ab253ab95edea658bcf8e5336e26cb2e0e9b51f10116f701312e888f74f91dc46ad8d0fa46a09dfc9900bbc3db44e26ab1fbe65245579b055f5563baf600948039f82ad2ceda866ebc38492647435e70847ff68cbeb99f3c765f0ba0fdaef0216d7329d591bebbc70a56e718c8ee0abba67e01b9fe2019da2aed749b94fd836d4ec7b3897c2e3cdbea0d66c4903d94851c7ae254e7764aa4e3595afa307a2c2d752b317a113be0017b2493c57348addfd10809f5b3eca4fe4b1791c0eea5c376f1d40ddf9d2b0254d4bc2c2783a3aa14499ee440955bd7bdaf3dcb5eb8aa7d2b8a5a352e13d70ac30097032ec930f305cf66347ae1113d39aebb4550d45428e2bc03aa595fbeb65ce5d31dc9a0e63e76b479caf80e0152bbd100b65d04e8e093505b9c7fc37a78d537707e47b419615e96913b739ca46bc89a75228ac88ac9e2161382ddf453401172f38a43081c2afba41b35332958c364d595b1407ef310447a254989e4a4eb4fb069932f946fd10a69e141f1baa2a040579cc7ee6f8bf12c856a2b4bf852d11de6c81dce369741dd01fc90b881d58e3d972505c6eab82ec3771bd056ddac7d6d990194eed2e85e20d8bd2c9a7ed7030e222253e3b68d301c0fb5377e3c2353eec5195a2f84ec33e655f1a4c3c5dc8375608e40f2af8d904f16d75926c1698736ed4dc9fa538d8af3cef6de5fbf37c443e989408329b122a2be159e65e9023eea2b897c20170a5216c77587fae55a3d654d7bec84df708a7411e9a1bc3f2a5c7a5c7a0647dddb78f3daefe6f7b089c8ea27796d288451eb0148e24c74c568d803140b8b05a4054f9833e61bbdc87e1a1b4bba9e6fa24ccb1bfb0a41bab5edfd6de073d9ab1c61d595855b0ecfa20c765232da8f8fe218faa68ae854f04adeffe2c1988f0e067f1124e900e6f85dfd74864bf48a281386b413598b9589faf5d746fb445f7b19b1dbe75d5d9303120519dc576c5f09c137ffb97b1195ec973dd5a2229a180399ff9a843344bb87b0cd0263cbaa28e2a037da1a86467d9e36c86d4f18c82c4c53383173891c8931fb3bba65ddc675b4ee121be70bafcddd93f9ca85d5a3545a289001fe186b5507234830600d5d3ed8f124cfd61e1ca10af6cc0d826255044078129b87deca196929995940a8fca0c8074280b217c07c28f7df8e9203b2243aa7e781a8282fcbe12c196637981f42a811d0e3540771e4f0bc3fa070f139aa307915e622c04212b64b115260c8a719581c6023f58ba52ab9655e1f5c921c7865c03d4e1bae551105fc60fa2b006a5bbe42dd3e4250eaf6447f9c228128fd0bdf69945a11c2fb775c99cec9d3788feaccd13ac4b10cfb955b1f4197133a7ee4019d868673243f406bb7dee0bc096c48ed9092bfd5d3d0db4f7ac9705cf05e5aa5b259880fee683e0825839a9a8e8d95b1206a29cebb00e2035049b8a458f6f7de4960bc0e3f120a2aae1ef748e47db192e8302d795e1c5fefbe94ed206c2b6233bde039ecf36b13a3af7d1cf03e0c0d2b0bfb90e44a89e3c497c2052dd060265ec168c8ff1d2e75afe29ae2a047b1b3d1d8f90df053a918ad8bc6d4ff85cf5192c1cf8c3f81fa411da7203767b081fdf0b31373b79e977a04232cf7db20ad5b11cebf77f577134a40323dd36fd137e50a482cd663b8bdb7e93db0d01f8992d5b6b031ee2e196bfb2409ee576a6e884e28754fa1eef67b46f0491f1aa6ce2558f1650cab5bf37d433ef07338115e574749ce246410b3f31a1fe33bb458cff097fd18d0d2033ea860f0e3b703a1237d06edbb6477794c2f5efed936ba44813bc6c82a8a7ae62bb7bc448aa1f52078fa659719932c6073043ca37ac434c754e9e5dd454c8da68705a9a7dfe2095725358af51b258557369deef09a6034546b44e27addb11b7c2693e2f8b5455182eff9c8719a291cdce490afc2aad7aca8085986f664d84c89f2558a4da7e63f34150d71b9ebc567af0e6e4fb1a4628a80e051119776f37fe664e6cd87f12d3f4d15f7853a66c1a3fd163c577408e9d44c8f2ac57b3c932cac17c761d31eea7aea5a1977698399722a5dd1cd9e4c090139c3d81dad88f9255b16e9165dd792e408caf7f5ff0d9a4ff9fe08dceb3d47afd5f278e36269211d67c7d33a6f75843766a00df45c3dbda6c98fb4f626fcef61e4d34d23a492eb2654e3c1d6078dc263e6b86631a63a77e245b55d3a9423c227551662d731110b33c97b6e285e2f6b7f723adb42e8acfcf4b02356ae287e5771651d0f410c6443d7300a0b2046cf4117af76766dd6fb6daa72f5cf7ac68fd186bb226576357abb402845e3fe46c206764cbe2c66edf6b0789755eba9949d954a5925d931d41c017e65edbaec0f6b27bbbf2d1211778d5adc52263dd739567cd711012d7bcde7094fd43aa49ec3a8b032dd01293c6907d5e6f9ad41e75d01d4427bd2c91ff134b909c9590010326c5a6b763abac9942581812185a27ac0417d1cfb7d7a1f9489e20f0ad3012e3c042acf1f12d8c3fc53c3c72083d17cf119300036db3d32856c79f14c36344d81c0796f28d23b08399a43f44c2c98c91600e512145a88e4730a4164b39851b75b54d1067fcc0b39d13ffe4625e070ac3ce14066e209697ba47312d15bc7b1073b2699ec67a24d61062e070176d5c0d030475f97f62fc0c4333a86cff83a98077f0bb26765ec641b892eaae9c4df22d995b695e519af130f0aa77d80056653d68f99873c65bd06d2e227c147a00c84564b10e34bf13bbd57ba83c3e76a1321d57b3e900826c9515293ca5a8376faf4e9ceb0f425609e7d62b6be0c5c68d7ebe5b3ab04438fc59a1e109c87a4c86dbaf31a427a3a67adc1579153be356e30f38dc81fa90a817db8bae1f19339bce8125a8fedca5ee3eaff1b588a238ea1e2ff0067af9cdd9a8c64acb9311b87091f426b7f7332f8f5b3377d636c873ae8b788f59a90209a3dc466d424e0dbb6bdb668ca77c03437181c90e146d8306da3cf854c3b1700633c2bc2e34592ce5d073e7a8d2783bc2092a5f762c4c3c69a680a48425950429c2cf9831916744472138d911f2e4228073b8c75857535e30c0d7337bd7119e89566e0e7f633961dbd3032eb0b7a2714c1d4fe98d60bf63439ab98cdcf549da78a70dcd0d19015729faf53980fb5c69040e8b6dab61b975207caa9b8833f3346179a1ecb1e6ce404e3151ed1baeb632e3bb2767d28b03bb823d22f32c70baa429a228a863486a42056a8316d23c461ca0c210f13c9e00644e50030d209e44defe83cd2aebfdad60501a7b6d5a7940dd103169f71fef223cacf5c3e76936b76a50d27fb432f01b63d40059963dd97d175542d6463ff130d174e072551ef130be7ae4b0457315de71416dbbf75519f4585287b96aa0e6ec26e9d5c6e1cf337da5df181ddc91539112ca58bca5066d4c344c9a51cc660b3aac838b1219bdfa7dc15dfdb88ebd50875729bcb391728c8521ca8490421f430bcac679624e5ff1451acb3b18d32c95ef2fe5e54cb01151ebd258dba90b0ec7621d496e84f30d1bcdfb27ccfca5bd942dd49c5a879627544a1f4b5aa860305d357b53a94dcacc4c9e3eadcd3edb315e5189d71967bf60427d425f4ee97be1086e1321119fcd61953f8de13e916e9c13ff68a99bccff78a3c0cf1c156dfda2ef8b49dc47bd903d32cb60904bb9b6c4e00fc9ad3e7ea0765b4ef01da1f00718e783d3802f7ff97b7f8009df4712fbe5a8e340f798289749b60253b5b199858fb568f5d9f3aaa3a718cf8f13e26c032596b4e9ee8bf079f4eafde1f15e94c5bec04e95d2f048ffe9e215a6579b82c0287442f03aa6c893fa3d2d4e2c6a48908ecfeecc2097601bdf8ce2562af83be7f686a2a5c8eb43c83b8a8c4384614701269c66749478f747033e8a56ae19588a794a5277789335e087a3694f597453647fc8a89a5d795dfcab7494db0ce330ca686879e543de2b0999782c167215a0a2035a0072f7180f38bf54b310264bdd969312a73bc5677255eccbdf66049575fdf61021e274fd01f76088d21b71832bbb1a6c582351b4bdeef6d28c7a59685d40f42247eda1aa1c4b328ac9e5b86e5e7ac6844f3721ae3caf8ceb70ce25fe940e49c81aeb95d9f3ff59361f720546ffd8ff7371d8af9fe2eaa20101deb96af6c39aee5e6d078659d2506a123b75b511</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>â“½ å…¶ä»–å†…å®¹</category>
      </categories>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°0â€”â€”å¸¸è§æ¦‚å¿µä¸å‡½æ•°ï¼ˆæ›´æ–°ä¸­ï¼‰</title>
    <url>/2021/11/22/6afd3e085246/</url>
    <content><![CDATA[<h3
id="softmaxå’Œcross-entropyäº¤å‰ç†µå‡½æ•°">1ã€SoftMaxå’ŒCross-Entropyäº¤å‰ç†µå‡½æ•°</h3>
<p>â€‹ æˆ‘ä»¬å¸¸å¸¸ä½¿ç”¨äº¤å‰ç†µï¼ˆcross
entropyï¼‰æ¥è¿›è¡Œåˆ¤åˆ«åˆ†å¸ƒçš„ç›¸ä¼¼æ€§ï¼Œäº¤å‰ç†µå…¬å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå…¬å¼ä¸­piå’Œqi<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/wpsCF9D.tmp.jpg"
alt="img" />ä¸ºçœŸå®çš„æ ·æœ¬åˆ†å¸ƒå’Œç”Ÿæˆå™¨çš„ç”Ÿæˆåˆ†å¸ƒã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114201037115.png" /></p>
<p>â€‹
<strong><em>*Soft-Max*</em></strong>å†…éƒ¨å¯¹è¾“å…¥è¿›è¡Œçš„å¤„ç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å‡è®¾è¾“å…¥y1,y2,y3ï¼Œæˆ‘ä»¬å…ˆå°†ä¸‰ä¸ªè¾“å…¥è®¡ç®—exp(y1),exp(y2),exp(y3),ç„¶åæ±‚å’Œï¼Œç„¶åè®¡ç®—è¾“å‡ºã€‚</p>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114201047994.png" /></p>
<h3 id="klæ•£åº¦">2ã€KLæ•£åº¦</h3>
<h3 id="sigmoid-function-så‹æ¿€æ´»å‡½æ•°">3ã€Sigmoid Function ( Så‹æ¿€æ´»å‡½æ•°
)</h3>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114201125789.png" /></p>
<h3 id="rectified-linear-unit-reluæ¿€æ´»å‡½æ•°">4ã€Rectified Linear Unit (
ReLuæ¿€æ´»å‡½æ•° )</h3>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114201156330.png"
alt="image-20220114201156330" /><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114201159496.png" /></p>
<h3 id="update-epoch-batch-size-training-data">5ã€Update / Epoch / Batch
Size / Training Data<br />
</h3>
<ul>
<li><p><strong>Update</strong>:
æ¯åšä¸€æ¬¡æ¢¯åº¦ä¸‹é™ï¼Œæ›´æ–°ä¸€æ¬¡å‚æ•°ï¼Œå°±å«åšä¸€æ¬¡Update</p></li>
<li><p><strong>Batch Size</strong>:
æ¯æ¬¡ç”¨æ¥è®¡ç®—æ¢¯åº¦ä¸‹é™æ›´æ–°å‚æ•°ç”¨åˆ°çš„è®­ç»ƒé›†ä¸­æ ·æœ¬çš„ä¸ªæ•°</p></li>
<li><p><strong>Training Data</strong>:
æ‰€æœ‰çš„è®­ç»ƒæ•°æ®é›†æ ·æœ¬ï¼Œæˆ‘ä»¬åœ¨è®­ç»ƒæ—¶å¾€å¾€ä¼šå°†å…¶åˆ†ä¸ºä¸€ä¸ªBatchä¸€ä¸ªBatchï¼Œæ¯æ¬¡ä½¿ç”¨ä¸€ä¸ªBatchæ¥è®¡ç®—æ¢¯åº¦ï¼Œæ›´æ–°å‚æ•°ã€‚</p></li>
<li><p><strong>Epoch</strong>:
æ¯å½“ä½¿ç”¨è¿‡ä¸€è½®æ‰€æœ‰çš„è®­ç»ƒæ•°æ®é›†æ ·æœ¬ä»¥åï¼Œå«åšä¸€ä¸ªEpoch</p></li>
</ul>
<p>æ•´ä¸ªçš„Optimizationçš„è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114201333605.png" /></p>
<p>ä¸‹é¢æ˜¯ä¸€äº›å¸®åŠ©ç†è§£çš„ä¾‹å­ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114201341888.png" /></p>
<h3 id="backbone-head-neck-bottleneck">6ã€BackBone / Head / Neck /
BottleNeck</h3>
<ul>
<li>BackBoneï¼šç¿»è¯‘ä¸ºä¸»å¹²ç½‘ç»œï¼Œå…¶æ˜¯ç¥ç»ç½‘ç»œçš„ä¸»å¹²éƒ¨åˆ†ã€‚è¿™ä¸ªä¸»å¹²ç½‘ç»œå¤§å¤šæ—¶å€™æŒ‡çš„æ˜¯æå–ç‰¹å¾çš„ç½‘ç»œï¼Œå…¶ä½œç”¨å°±æ˜¯æå–å›¾ç‰‡ä¸­çš„ä¿¡æ¯ï¼Œä»¥ä¾›åé¢çš„ç½‘ç»œä½¿ç”¨ã€‚è¿™äº›ç½‘ç»œç»å¸¸ä½¿ç”¨çš„æ˜¯ResNetã€VGGç­‰ï¼Œè€Œä¸æ˜¯ç”±æˆ‘ä»¬è‡ªå·±è®¾è®¡çš„ç½‘ç»œï¼Œå› ä¸ºè¿™äº›ä¸»å¹²ç½‘ç»œå·²ç»è¯æ˜äº†å®ƒä»¬åœ¨åˆ†ç±»ç­‰é—®é¢˜ä¸Šçš„ç‰¹å¾æå–èƒ½åŠ›æ˜¯å¾ˆå¼ºçš„ã€‚åœ¨ç”¨è¿™äº›ç½‘ç»œä½œä¸ºbackboneçš„æ—¶å€™ï¼Œéƒ½æ˜¯ç›´æ¥åŠ è½½å®˜æ–¹å·²ç»è®­ç»ƒå¥½çš„æ¨¡å‹å‚æ•°ï¼Œåé¢æ¥ç€æˆ‘ä»¬è‡ªå·±çš„ç½‘ç»œã€‚è®©ç½‘ç»œçš„è¿™ä¸¤ä¸ªéƒ¨åˆ†åŒæ—¶è¿›è¡Œè®­ç»ƒï¼Œå› ä¸ºåŠ è½½çš„backboneæ¨¡å‹å·²ç»å…·æœ‰æå–ç‰¹å¾çš„èƒ½åŠ›äº†ï¼Œåœ¨æˆ‘ä»¬çš„è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œä¼šå¯¹å‚æ•°è¿›è¡Œå¾®è°ƒï¼Œä½¿å¾—å…¶æ›´é€‚åˆäºæˆ‘ä»¬è‡ªå·±çš„ä»»åŠ¡ã€‚</li>
<li>Headï¼šæ˜¯è·å–ç½‘ç»œè¾“å‡ºå†…å®¹çš„ç½‘ç»œï¼Œheadåˆ©ç”¨ä¹‹å‰ç½‘ç»œæå–çš„è¿™äº›ç‰¹å¾ï¼Œåšå‡ºé¢„æµ‹ã€‚</li>
<li>Neck:
æ˜¯æ”¾åœ¨Backboneå’ŒHeadä¹‹é—´çš„ï¼Œæ˜¯ä¸ºäº†æ›´å¥½çš„åˆ©ç”¨Backboneæå–çš„ç‰¹å¾</li>
<li>Bottleneck:
ç“¶é¢ˆï¼Œé€šå¸¸æŒ‡çš„æ˜¯ç½‘ç»œè¾“å…¥çš„æ•°æ®ç»´åº¦å’Œè¾“å‡ºçš„ç»´åº¦ä¸åŒï¼Œè¾“å‡ºçš„ç»´åº¦æ¯”è¾“å…¥çš„å°äº†è®¸å¤š.</li>
</ul>
<h3 id="ablation-study">7ã€Ablation Study</h3>
<p>â€‹
æ¶ˆèç ”ç©¶ï¼Œæ¶ˆèç ”ç©¶é€šå¸¸æ˜¯æŒ‡åˆ é™¤æ¨¡å‹æˆ–ç®—æ³•çš„æŸäº›â€œåŠŸèƒ½â€ï¼Œå¹¶æŸ¥çœ‹å…¶å¦‚ä½•å½±å“æ€§èƒ½ã€‚</p>
<p>â€‹
åœ¨è®ºæ–‡ä¸­ä¸€èˆ¬æ¥è¯´ä¼šæå‡ºå¤šä¸ªåˆ›æ–°æ–¹æ³•ï¼Œæˆ–è€…æ–°å‹ç»“æ„æ¨¡å—ï¼Œæˆ–æ³¨æ„åŠ›æ¨¡å—ç­‰ã€‚è¿™äº›ä¸œè¥¿åœ¨ä¸€èµ·ä¸ºæ¨¡å‹çš„æ€§èƒ½ä½œå‡ºäº†è´¡çŒ®ã€‚ç„¶è€Œä¸ºäº†äº†è§£æ¯ä¸ªéƒ¨åˆ†å•ç‹¬èƒ½å‘æŒ¥çš„ä½œç”¨ï¼Œå¸¸å¸¸ä¼šåœ¨è®ºæ–‡ä¸­æå‡ºæ¶ˆèç ”ç©¶ã€‚</p>
<p>â€‹
ä¾‹å¦‚æŸè®ºæ–‡æå‡ºäº†æ–¹æ³•A,B,Cã€‚è€Œè¯¥è®ºæ–‡æ˜¯åŸºäºæŸä¸ªbaselineçš„æ”¹è¿›ã€‚å› æ­¤ï¼Œåœ¨æ¶ˆèç ”ç©¶éƒ¨åˆ†ï¼Œä¼šè¿›è¡Œä»¥ä¸‹å®éªŒï¼Œbaseline
ï¼Œbaseline+Aï¼Œbaseline+B, baseline+C,
baseline+A+B+Cç­‰å®éªŒçš„å„ä¸ªè¯„ä»·æŒ‡æ ‡æœ‰å¤šå°‘ï¼Œä»è€Œå¾—å‡ºæ¯ä¸ªéƒ¨åˆ†æ‰€èƒ½å‘æŒ¥çš„ä½œç”¨æœ‰å¤šå¤§ã€‚</p>
<p>â€‹ æ¯”è¾ƒç®€å•æ¥è¯´ï¼Œå°±æ˜¯æ§åˆ¶å˜é‡æ³•ï¼Œæ¥åˆ¤æ–­æŸä¸€ä¸ªæ¨¡å—æ˜¯å¦çœŸçš„æœ‰ä½œç”¨ã€‚</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
        <tag>Basic Concepts</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°10â€”â€”L1ã€L2æ­£åˆ™åŒ–ä»¥åŠä¸ºä»€ä¹ˆæ­£åˆ™åŒ–èƒ½å¤Ÿé˜²æ­¢è¿‡æ‹Ÿåˆ</title>
    <url>/2022/01/21/d692eb11c4b5/</url>
    <content><![CDATA[<p>åœ¨è®­ç»ƒæ•°æ®ä¸å¤Ÿå¤šæ—¶ï¼Œæˆ–è€…overtrainingæ—¶ï¼Œå¸¸å¸¸ä¼šå¯¼è‡´overfittingï¼ˆè¿‡æ‹Ÿåˆï¼‰ã€‚å…¶ç›´è§‚çš„è¡¨ç°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œéšç€è®­ç»ƒè¿‡ç¨‹çš„è¿›è¡Œï¼Œæ¨¡å‹å¤æ‚åº¦å¢åŠ ï¼Œåœ¨Training
dataä¸Šçš„erroræ¸æ¸å‡å°ï¼Œä½†æ˜¯åœ¨éªŒè¯é›†ä¸Šçš„errorå´åè€Œæ¸æ¸å¢å¤§â€”â€”å› ä¸ºè®­ç»ƒå‡ºæ¥çš„ç½‘ç»œè¿‡æ‹Ÿåˆäº†è®­ç»ƒé›†ï¼Œå¯¹è®­ç»ƒé›†å¤–çš„æ•°æ®å´ä¸workã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/OhX9eFQ.jpg" /></p>
<p>â€‹
åœ¨ML2021è¯¾ç¨‹ç³»åˆ—ç¬”è®°2ä¸­ï¼ŒæåŠäº†ä¸€äº›é˜²æ­¢è¿‡æ‹Ÿåˆçš„å†…å®¹ï¼Œæœ¬ç¯‡ç”¨äºè¯¦ç»†è§£é‡Šå…¶ä¸­æ­£åˆ™åŒ–çš„éƒ¨åˆ†ï¼š</p>
<h3 id="ä¸€ä»€ä¹ˆæ˜¯l1l2æ­£åˆ™åŒ–">ä¸€ã€ä»€ä¹ˆæ˜¯L1ã€L2æ­£åˆ™åŒ–ï¼Ÿ</h3>
<h4 id="l1-æ­£åˆ™åŒ–">L1 æ­£åˆ™åŒ–ï¼š</h4>
<p>â€‹
ç®€å•è€Œè¨€ï¼ŒL1æ­£åˆ™åŒ–å°±æ˜¯åœ¨Losså‡½æ•°åé¢å¢åŠ ä¸€ä¸ªæ­£åˆ™åŒ–é¡¹ï¼ŒL1æ­£åˆ™åŒ–çš„å…¬å¼å¦‚ä¸‹,</p>
<p>â€‹ <span
class="math inline">\(C_0\)</span>ä¸ºåŸæ¥çš„æŸå¤±å‡½æ•°ï¼Œå³æ‰€æœ‰æƒé‡wçš„ç»å¯¹å€¼çš„å’Œ.
næ˜¯è®­ç»ƒé›†çš„æ ·æœ¬å¤§å°ï¼ŒÎ» æ˜¯æ­£åˆ™é¡¹ç³»æ•°ï¼ŒCä¸ºåŠ äº†æ­£åˆ™åŒ–åçš„æŸå¤±å‡½æ•°</p>
<p>â€‹ <span class="math inline">\(C = C_0 + \frac{\lambda}{n}
\sum_{w}|w|\)</span></p>
<h4 id="l2-æ­£åˆ™åŒ–">L2 æ­£åˆ™åŒ–ï¼š</h4>
<p>â€‹
ç®€å•è€Œè¨€ï¼ŒL2æ­£åˆ™åŒ–ä¹Ÿæ˜¯åœ¨Losså‡½æ•°åé¢å¢åŠ ä¸€ä¸ªæ­£åˆ™åŒ–é¡¹ï¼ŒL2æ­£åˆ™åŒ–çš„å…¬å¼å¦‚ä¸‹,ä¸ä¸Šå«ä¹‰ç±»ä¼¼ã€‚</p>
<p>â€‹ <span class="math inline">\(C = C_0 + \frac{\lambda}{2n} \sum_w
w^2\)</span></p>
<h3
id="äºŒl1l2æ­£åˆ™åŒ–å¦‚ä½•é¿å…overfitting">äºŒã€L1ã€L2æ­£åˆ™åŒ–å¦‚ä½•é¿å…OverFittingï¼Ÿ</h3>
<h4 id="l1l2æ­£åˆ™åŒ–èƒ½é™ä½æƒé‡å€¼w">1ã€L1ã€L2æ­£åˆ™åŒ–èƒ½é™ä½æƒé‡å€¼w</h4>
<p>â€‹
æˆ‘ä»¬ä»¥L2æ­£åˆ™åŒ–é¡¹ä¸ºä¾‹ï¼Œè¿›è¡Œè§£é‡Šï¼Œé¦–å…ˆæˆ‘ä»¬è®©Cå¯¹åç½®é¡¹bå’Œå¯¹æƒé‡ç³»æ•°wè¿›è¡Œæ±‚å¯¼ï¼Œå¾—åˆ°å¦‚ä¸‹ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/mebEC90.jpg" /></p>
<p>â€‹
æˆ‘ä»¬å‘ç°ï¼ŒCå¯¹bæ±‚å¯¼ä¸æ­£åˆ™åŒ–é¡¹æ— å…³ï¼ŒCå¯¹wæ±‚å¯¼å¾—åˆ°å¾—ç»“æœä¸æ­£åˆ™åŒ–é¡¹æœ‰å…³ã€‚</p>
<p>â€‹ æœ€ç»ˆæ‰€åæ˜ åˆ°æ¢¯åº¦ä¸‹é™ä¼˜åŒ–å‚æ•°ä¸Šï¼Œå°±æ˜¯å¦‚ä¸‹å›¾æ‰€ç¤ºå¾—æƒ…å†µï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/qM83geg.jpg" /></p>
<p>â€‹
<strong>å¦‚æœæ²¡æœ‰æ­£åˆ™åŒ–é¡¹ï¼Œé‚£ä¹ˆæ›´æ–°å¾—wå‰å¾—ç³»æ•°åº”å½“ä¸º1ï¼Œè€Œç°åœ¨ç”±äºå› ä¸ºÎ·ã€Î»ã€néƒ½æ˜¯æ­£çš„ï¼Œæ‰€ä»¥
1âˆ’Î·Î»/nå°äº1ï¼Œå®ƒçš„æ•ˆæœæ˜¯å‡å°wï¼Œè¿™ä¹Ÿå°±æ˜¯æƒé‡è¡°å‡ï¼ˆweight
decayï¼‰çš„ç”±æ¥</strong>ã€‚</p>
<p>â€‹
<strong>åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬å‘ç°L2æ­£åˆ™åŒ–é¡¹ï¼Œå…¶èƒ½å¤Ÿä½¿å¾—å‡å°wã€‚ï¼ˆå…¶å®è¿™ä¸€ç‚¹æ¯”è¾ƒç›´è§‚çš„ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼Œå› ä¸ºLosså‡½æ•°ä¸­åŠ å…¥äº†ä¸€é¡¹<span
class="math inline">\(w^2\)</span>çš„æ±‚å’Œï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæƒé‡å€¼wè¿‡å¤§ï¼ŒLosså‡½æ•°å€¼ä¼šä¸Šå‡ï¼Œè¿™å°±æ„å‘³ç€è¿™ä¸€ä¸ªæ­£åˆ™åŒ–é¡¹æƒ©ç½šäº†æƒå€¼çŸ©é˜µä½¿å…¶ä¸èƒ½å–å¤ªå¤§å€¼ã€‚ï¼‰</strong></p>
<p>â€‹
é‚£ä¹ˆï¼Œå…³é”®é—®é¢˜æ˜¯ï¼Œ<strong>ä¸ºä»€ä¹ˆæƒé‡çŸ©é˜µwå°ï¼Œèƒ½å¤Ÿé˜²æ­¢è¿‡æ‹Ÿåˆå‘¢ï¼Ÿ</strong></p>
<h4
id="è¾ƒé«˜çš„æƒé‡wå¾€å¾€æ„å‘³ç€è¿‡æ‹Ÿåˆçš„å‡½æ•°">2ã€è¾ƒé«˜çš„æƒé‡wå¾€å¾€æ„å‘³ç€è¿‡æ‹Ÿåˆçš„å‡½æ•°ï¼š</h4>
<p>â€‹
æˆ‘ä»¬ä¼šå‘ç°ï¼š<strong>è¿‡æ‹Ÿåˆçš„æ—¶å€™ï¼Œæ‹Ÿåˆå‡½æ•°çš„ç³»æ•°å¾€å¾€éå¸¸å¤§ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿‡æ‹Ÿåˆï¼Œå°±æ˜¯æ‹Ÿåˆå‡½æ•°éœ€è¦é¡¾å¿Œæ¯ä¸€ä¸ªç‚¹ï¼Œæœ€ç»ˆå½¢æˆçš„æ‹Ÿåˆå‡½æ•°æ³¢åŠ¨å¾ˆå¤§ã€‚åœ¨æŸäº›å¾ˆå°çš„åŒºé—´é‡Œï¼Œå‡½æ•°å€¼çš„å˜åŒ–å¾ˆå‰§çƒˆã€‚è¿™å°±æ„å‘³ç€å‡½æ•°åœ¨æŸäº›å°åŒºé—´é‡Œçš„å¯¼æ•°å€¼ï¼ˆç»å¯¹å€¼ï¼‰éå¸¸å¤§ï¼Œç”±äºè‡ªå˜é‡å€¼å¯å¤§å¯å°ï¼Œæ‰€ä»¥åªæœ‰ç³»æ•°è¶³å¤Ÿå¤§ï¼Œæ‰èƒ½ä¿è¯å¯¼æ•°å€¼å¾ˆå¤§ã€‚</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/RsR5cOK.png" /></p>
<p>â€‹</p>
<p>â€‹
æ›´è¿›ä¸€æ­¥çš„è§£é‡Šï¼šå½“æƒé‡ç³»æ•°å¾ˆå°çš„æ—¶å€™ï¼Œå®¹æ˜“å‡ºç°åƒå·¦å›¾ä¸€æ ·ï¼Œé«˜åå·®æ‹Ÿåˆèƒ½åŠ›å¾ˆå·®çš„æƒ…å†µï¼Œéšç€æƒé‡ç³»æ•°é€æ¸å¢å¤§ï¼Œå°±ä¼šåƒå³ä¾§çš„å›¾è¿›è¡Œå‘å±•ã€‚å¦‚æœæƒé‡ç³»æ•°å¾ˆå¤§ï¼Œå¾€å¾€æ„å‘³ç€åœ¨æŸäº›å¾ˆå°çš„åŒºé—´ä¸­ï¼Œå‡½æ•°å€¼çš„å˜åŒ–ä¼šéå¸¸çš„å‰§çƒˆï¼Œå¯¼è‡´ä¸€äº›é«˜æ–¹å·®çš„ç»“æœï¼Œä¹Ÿå°±æ˜¯å‡½æ•°å¯¹äºè®­ç»ƒæ•°æ®è¿‡åº¦æ‹Ÿåˆäº†ã€‚</p>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220121122935964.png" /></p>
<p>â€‹</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>OverFitting</tag>
        <tag>Regularization</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°11â€”â€”Training Dataã€Validation Dataã€Testing Dataå«ä¹‰åŠä½œç”¨</title>
    <url>/2022/01/21/ff71970a89e2/</url>
    <content><![CDATA[<p>æˆ‘ä»¬åœ¨è¿›è¡Œä¸€ä¸ªæœºå™¨å­¦ä¹ çš„ä»»åŠ¡çš„æ—¶å€™ï¼Œå¾€å¾€ä¼šå°†æ‰€æœ‰æ•°æ®åˆ’åˆ†æˆä¸‰å—â€”â€”Training
Dataã€Validation Dataã€Testing
Data,å®ƒä»¬å„è‡ªåœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­æ‰®æ¼”ä½•ç§è§’è‰²å‘¢ï¼Ÿ</p>
<h4
id="ä¸€trainvaltestçš„å«ä¹‰ä¸ä½œç”¨">ä¸€ã€Trainã€Valã€Testçš„å«ä¹‰ä¸ä½œç”¨ï¼š</h4>
<p>é¡¾åæ€ä¹‰ï¼Œä¸‰ä¸ªæ•°æ®é›†åˆå®ƒä»¬çš„ç®€å•å«ä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>è®­ç»ƒé›†(train)ï¼šè®­ç»ƒæ¨¡å‹ï¼Œç”¨æ¥æ‹Ÿåˆæ¨¡å‹çš„æ•°æ®é›†ï¼›</li>
<li>éªŒè¯é›†(val)ï¼šè¯„ä¼°æ¨¡å‹ï¼Œè®­ç»ƒè¿‡ç¨‹ä¸­æä¾›ç›¸å¯¹äºtrainçš„æ— åä¼°è®¡çš„æ•°æ®é›†ï¼ŒåŒæ—¶ç”¨æ¥è°ƒæ•´è¶…å‚æ•°å’Œç‰¹å¾é€‰æ‹©ï¼Œå®é™…å‚ä¸è®­ç»ƒ</li>
<li>æµ‹è¯•é›†(test)ï¼šæœ€ç»ˆæ¨¡å‹è®­ç»ƒå¥½ä¹‹åï¼Œç”¨æ¥æä¾›ç›¸å¯¹äºtrain+validçš„æ— åä¼°è®¡çš„æ•°æ®é›†ã€‚</li>
</ul>
<p>â€‹ ä¸€èˆ¬æˆ‘ä»¬ä¼šå°†æœ€å¼€å§‹åˆ’åˆ†çš„Training Setåˆ†å‰²ä¸ºTraining Dataå’ŒValidation
Dataä¸¤ä¸ªé›†åˆï¼Œä¸€èˆ¬è€Œè¨€æ¯”ä¾‹ä¸º9ï¼š1ã€‚æˆ‘ä»¬ä½¿ç”¨åˆ’åˆ†åçš„Training
Dataè¿›è¡Œè®­ç»ƒï¼Œåœ¨æ¯ä¸ªEpochç»“æŸåä½¿ç”¨è®­ç»ƒæœŸé—´æœºå™¨æ²¡æœ‰è§åˆ°è¿‡çš„Validationè¿›è¡ŒéªŒè¯ï¼Œä¾æ®éªŒè¯é›†å¾—åˆ°çš„Losså€¼æ¥è¿›è¡Œæ¨¡å‹å¥½åçš„è¡¡é‡ã€‚</p>
<p>â€‹ è¯å¥è¯è¯´ï¼ŒValidation
Dataã€€å…¶å®å°±æ˜¯ç”¨æ¥é¿å…è¿‡æ‹Ÿåˆçš„ï¼Œåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨å®ƒæ¥ç¡®å®šä¸€äº›è¶…å‚æ•°ï¼ˆæ¯”å¦‚æ ¹æ®validation
dataä¸Šçš„accuracyæ¥ç¡®å®šearly stoppingçš„epochå¤§å°ã€æ ¹æ®validation
dataç¡®å®šlearning rateç­‰ç­‰ï¼‰ã€‚</p>
<p>â€‹ é‚£ä¸ºå•¥ä¸ç›´æ¥åœ¨Testing dataä¸Šåšè¿™äº›å‘¢ï¼Ÿå› ä¸ºå¦‚æœåœ¨Testing
dataåšè¿™äº›ï¼Œé‚£ä¹ˆéšç€è®­ç»ƒçš„è¿›è¡Œï¼Œæˆ‘ä»¬çš„ç½‘ç»œå®é™…ä¸Šå°±æ˜¯åœ¨ä¸€ç‚¹ä¸€ç‚¹åœ°overfittingæˆ‘ä»¬çš„Testing
dataï¼Œå¯¼è‡´æœ€åå¾—åˆ°çš„Testing accuracyæ²¡æœ‰ä»»ä½•å‚è€ƒæ„ä¹‰ã€‚å› æ­¤ï¼ŒTraining
dataçš„ä½œç”¨æ˜¯è®¡ç®—æ¢¯åº¦æ›´æ–°æƒé‡ï¼ŒValidation
dataåœ¨æ¯ä¸ªEpochç»“æŸåè¿›è¡ŒéªŒè¯ï¼ŒTesting
dataåˆ™ç»™å‡ºä¸€ä¸ªaccuracyä»¥åˆ¤æ–­ç½‘ç»œçš„å¥½åã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/20210202115236662.png" /></p>
<p><strong>å¦‚ä¸Šæ‰€ç¤ºçš„è®­ç»ƒåˆ’åˆ†å®¹æ˜“å¸¦æ¥ä¸€äº›æ˜¾è€Œæ˜“è§çš„é—®é¢˜ï¼š</strong></p>
<ul>
<li>å¦‚æœæ ·æœ¬æ•°é‡å¤ªå°‘ï¼ŒéªŒè¯é›†å’Œæµ‹è¯•é›†æ›´å°‘ï¼Œæ— æ³•åœ¨ç»Ÿè®¡å­¦ä¸Šä»£è¡¨æ•°æ®</li>
<li>åˆ’åˆ†æ•°æ®å‰æ—¶ï¼Œè¿›è¡Œä¸åŒçš„éšæœºæ‰“ä¹±åˆ™å¾—åˆ°çš„æ¨¡å‹æ€§èƒ½å·®åˆ«å¯èƒ½å¾ˆå¤§ï¼Œå¯èƒ½è®­ç»ƒé›†ä¸­çš„æ•°æ®éƒ½åå‘äºæŸä¸€ç±»ï¼Œè€ŒéªŒè¯é›†çš„æ•°æ®åå‘äºå¦ä¸€ç±»</li>
</ul>
<h4 id="äºŒn-fold-cross-validation">äºŒã€N-Fold Cross Validation</h4>
<p>æ­¤æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨å¸¸è§çš„å«åšN-Fold Cross
Validationï¼Œï¼ˆKæŠ˜äº¤å‰éªŒè¯ï¼‰ï¼š</p>
<p>â€‹ å¦‚ä¸‹å›¾æ‰€ç¤º,æˆ‘ä»¬å°†Training
Setåˆ†ä¸ºNä¸ªé›†åˆ(ç¤ºä¾‹ä¸­ä¸º3ä¸ª),å…¶ä¸­N-1ä¸ªé›†åˆç”¨äºè®­ç»ƒ,1ä¸ªé›†åˆç”¨äºéªŒè¯,ç„¶åæ¯è½®Epochä¸­,éƒ½æ‰§è¡ŒNé,æ¯ä¸€ééƒ½æ‹¿ä¸åŒçš„é›†åˆç”¨äºè®­ç»ƒä¸éªŒè¯,ç„¶åè®¡ç®—ä¸€éLosså€¼,æœ€ç»ˆé€‰å–å¹³å‡Lossæœ€å°çš„é‚£ä¸€ç»„å‚æ•°è¿›è¡Œæ¨¡å‹çš„æ›´æ–°.</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114111918585.png" /></p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Training Set</tag>
        <tag>Validation Set</tag>
        <tag>Testing Set</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°12â€”â€”BatchNormè¯¦è§£åŠä¸ºä»€ä¹ˆèƒ½é˜²æ­¢è¿‡æ‹Ÿåˆ</title>
    <url>/2022/01/21/22d362e1f563/</url>
    <content><![CDATA[<h2 id="ä¸€è¯¦è§£batchnormåŸç†">ä¸€ã€è¯¦è§£BatchNormåŸç†ï¼š</h2>
<p>â€‹
BatchNormæ˜¯ä¸€ç§èƒ½å¤ŸåŠ é€Ÿæ·±åº¦ç¥ç»ç½‘ç»œæ”¶æ•›ï¼Œé¿å…è¿‡æ‹Ÿåˆçš„æ–¹æ³•ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬éœ€è¦æ¢è®¨ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆæ·±åº¦ç¥ç»ç½‘ç»œ<strong>éšç€ç½‘ç»œæ·±åº¦åŠ æ·±ï¼Œè®­ç»ƒèµ·æ¥è¶Šå›°éš¾ï¼Œæ”¶æ•›è¶Šæ¥è¶Šæ…¢ï¼Ÿ</strong></p>
<p>åœ¨å›ç­”è¿™ä¸ªé—®é¢˜å‰éœ€è¦é¦–å…ˆäº†è§£ä¸¤ä¸ªæ¦‚å¿µï¼š</p>
<p>â€‹
<strong>1ã€ç‹¬ç«‹åŒåˆ†å¸ƒï¼ˆIIDï¼‰</strong>ï¼šå³å‡è®¾è®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®æ˜¯æ»¡è¶³ç›¸åŒåˆ†å¸ƒçš„ã€‚å®ƒæ˜¯é€šè¿‡è®­ç»ƒæ•°æ®è·å¾—çš„æ¨¡å‹èƒ½å¤Ÿåœ¨æµ‹è¯•é›†è·å¾—å¥½çš„æ•ˆæœçš„ä¸€ä¸ªåŸºæœ¬ä¿éšœ</p>
<p>â€‹ <strong>2ã€Covariate
shift</strong>ï¼š<strong>å¦‚æœMLç³»ç»Ÿå®ä¾‹é›†åˆ&lt;X,Y&gt;ä¸­çš„è¾“å…¥å€¼Xçš„åˆ†å¸ƒè€æ˜¯å˜ï¼Œè¿™ä¸ç¬¦åˆIIDå‡è®¾</strong>ï¼Œç½‘ç»œæ¨¡å‹å¾ˆéš¾<strong>ç¨³å®šçš„å­¦è§„å¾‹</strong>ã€‚</p>
<p>â€‹
æ‰€ä»¥ï¼Œä¹‹æ‰€ä»¥æ·±åº¦ç¥ç»ç½‘ç»œéšç€ç½‘ç»œæ·±åº¦åŠ æ·±ï¼Œè®­ç»ƒè¶Šæ¥è¶Šå›°éš¾æ˜¯å› ä¸ºï¼Œå¯¹äºæ·±åº¦å­¦ä¹ è¿™ç§åŒ…å«å¾ˆå¤šéšå±‚çš„ç½‘ç»œç»“æ„ï¼Œåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå› ä¸ºå„å±‚å‚æ•°ä¸åœåœ¨å˜åŒ–ï¼Œæ‰€ä»¥æ¯ä¸ªéšå±‚éƒ½ä¼šé¢ä¸´covariate
shiftçš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯<strong>åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œéšå±‚çš„è¾“å…¥åˆ†å¸ƒè€æ˜¯å˜æ¥å˜å»ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œInternal
Covariate
Shiftï¼ˆICSï¼‰â€ï¼ŒInternalæŒ‡çš„æ˜¯æ·±å±‚ç½‘ç»œçš„éšå±‚ï¼Œæ˜¯å‘ç”Ÿåœ¨ç½‘ç»œå†…éƒ¨çš„äº‹æƒ…ï¼Œè€Œä¸æ˜¯covariate
shifté—®é¢˜åªå‘ç”Ÿåœ¨è¾“å…¥å±‚</strong></p>
<p>â€‹
BatchNormçš„åŸºæœ¬æ€æƒ³å°±æ˜¯èƒ½ä¸èƒ½<strong>è®©æ¯ä¸ªéšå±‚èŠ‚ç‚¹çš„æ¿€æ´»è¾“å…¥åˆ†å¸ƒå›ºå®šä¸‹æ¥å‘¢</strong>ï¼Ÿè¿™æ ·å°±é¿å…äº†â€œInternal
Covariate Shiftâ€é—®é¢˜äº†ã€‚</p>
<p>â€‹
æ‰€ä»¥BNå®è´¨ä¸Šå°±æ˜¯åœ¨æ·±åº¦ç¥ç»ç½‘ç»œè®­ç»ƒè¿‡ç¨‹ä¸­ä½¿å¾—æ¯ä¸€å±‚ç¥ç»ç½‘ç»œçš„è¾“å…¥ä¿æŒç›¸åŒåˆ†å¸ƒçš„ä¸€ç§æ–¹æ³•ã€‚</p>
<p>â€‹
BNçš„åŸºæœ¬æ€æƒ³å…¶å®ç›¸å½“ç›´è§‚ï¼šå› ä¸ºæ·±å±‚ç¥ç»ç½‘ç»œåœ¨åšéçº¿æ€§å˜æ¢å‰çš„<strong>æ¿€æ´»è¾“å…¥å€¼éšç€ç½‘ç»œæ·±åº¦åŠ æ·±æˆ–è€…åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå…¶åˆ†å¸ƒé€æ¸å‘ç”Ÿåç§»æˆ–è€…å˜åŠ¨ï¼Œä¹‹æ‰€ä»¥è®­ç»ƒæ”¶æ•›æ…¢ï¼Œä¸€èˆ¬æ˜¯æ•´ä½“åˆ†å¸ƒé€æ¸å¾€éçº¿æ€§å‡½æ•°çš„å–å€¼åŒºé—´çš„ä¸Šä¸‹é™ä¸¤ç«¯é è¿‘</strong>ï¼ˆå¯¹äºSigmoidå‡½æ•°æ¥è¯´ï¼Œæ„å‘³ç€æ¿€æ´»è¾“å…¥å€¼WU+Bæ˜¯å¤§çš„è´Ÿå€¼æˆ–æ­£å€¼ï¼‰ï¼Œæ‰€ä»¥è¿™<strong>å¯¼è‡´åå‘ä¼ æ’­æ—¶ä½å±‚ç¥ç»ç½‘ç»œçš„æ¢¯åº¦æ¶ˆå¤±</strong>ï¼Œè¿™æ˜¯è®­ç»ƒæ·±å±‚ç¥ç»ç½‘ç»œæ”¶æ•›è¶Šæ¥è¶Šæ…¢çš„<strong>æœ¬è´¨åŸå› </strong>ï¼Œ<strong>è€ŒBNå°±æ˜¯é€šè¿‡ä¸€å®šçš„è§„èŒƒåŒ–æ‰‹æ®µï¼ŒæŠŠæ¯å±‚ç¥ç»ç½‘ç»œä»»æ„ç¥ç»å…ƒè¿™ä¸ªè¾“å…¥å€¼çš„åˆ†å¸ƒå¼ºè¡Œæ‹‰å›åˆ°å‡å€¼ä¸º0æ–¹å·®ä¸º1çš„æ ‡å‡†æ­£æ€åˆ†å¸ƒ</strong>ï¼Œå…¶å®å°±æ˜¯æŠŠè¶Šæ¥è¶Šåçš„åˆ†å¸ƒå¼ºåˆ¶æ‹‰å›æ¯”è¾ƒæ ‡å‡†çš„åˆ†å¸ƒï¼Œè¿™æ ·ä½¿å¾—æ¿€æ´»è¾“å…¥å€¼è½åœ¨éçº¿æ€§å‡½æ•°å¯¹è¾“å…¥æ¯”è¾ƒæ•æ„Ÿçš„åŒºåŸŸï¼Œè¿™æ ·è¾“å…¥çš„å°å˜åŒ–å°±ä¼šå¯¼è‡´æŸå¤±å‡½æ•°è¾ƒå¤§çš„å˜åŒ–ï¼Œæ„æ€æ˜¯<strong>è¿™æ ·è®©æ¢¯åº¦å˜å¤§ï¼Œé¿å…æ¢¯åº¦æ¶ˆå¤±é—®é¢˜äº§ç”Ÿï¼Œè€Œä¸”æ¢¯åº¦å˜å¤§æ„å‘³ç€å­¦ä¹ æ”¶æ•›é€Ÿåº¦å¿«ï¼Œèƒ½å¤§å¤§åŠ å¿«è®­ç»ƒé€Ÿåº¦ã€‚</strong></p>
<p>â€‹
<strong>å¯¹äºæ¯ä¸ªéšå±‚ç¥ç»å…ƒï¼ŒæŠŠé€æ¸å‘éçº¿æ€§å‡½æ•°æ˜ å°„åå‘å–å€¼åŒºé—´æé™é¥±å’ŒåŒºé æ‹¢çš„è¾“å…¥åˆ†å¸ƒå¼ºåˆ¶æ‹‰å›åˆ°å‡å€¼ä¸º0æ–¹å·®ä¸º1çš„æ¯”è¾ƒæ ‡å‡†çš„æ­£æ€åˆ†å¸ƒï¼Œä½¿å¾—éçº¿æ€§å˜æ¢å‡½æ•°çš„è¾“å…¥å€¼è½å…¥å¯¹è¾“å…¥æ¯”è¾ƒæ•æ„Ÿçš„åŒºåŸŸï¼Œä»¥æ­¤é¿å…æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚</strong>å› ä¸ºæ¢¯åº¦ä¸€ç›´éƒ½èƒ½ä¿æŒæ¯”è¾ƒå¤§çš„çŠ¶æ€ï¼Œæ‰€ä»¥å¾ˆæ˜æ˜¾å¯¹ç¥ç»ç½‘ç»œçš„å‚æ•°è°ƒæ•´æ•ˆç‡æ¯”è¾ƒé«˜ï¼Œå°±æ˜¯å˜åŠ¨å¤§ï¼Œå°±æ˜¯è¯´å‘æŸå¤±å‡½æ•°æœ€ä¼˜å€¼è¿ˆåŠ¨çš„æ­¥å­å¤§ï¼Œä¹Ÿå°±æ˜¯è¯´æ”¶æ•›åœ°å¿«ã€‚BNè¯´åˆ°åº•å°±æ˜¯è¿™ä¹ˆä¸ªæœºåˆ¶ï¼Œæ–¹æ³•å¾ˆç®€å•ï¼Œé“ç†å¾ˆæ·±åˆ»ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/aHR0cDovL3FsLm1hZ2ljLXNldmVuLnRvcC91cGxvYWQvMjAyMC8zL2ltYWdlLTVkMjU4MDQxNGI0YTRkNjhiODEzMDMxMDZlMzY5YzNiLnBuZw.png" style="zoom: 67%;" /></p>
<h2
id="äºŒbatchnormåœ¨è®­ç»ƒé˜¶æ®µå’Œæµ‹è¯•é˜¶æ®µçš„åšæ³•ä¸æ„ä¹‰">äºŒã€BatchNormåœ¨è®­ç»ƒé˜¶æ®µå’Œæµ‹è¯•é˜¶æ®µçš„åšæ³•ä¸æ„ä¹‰ï¼š</h2>
<h3 id="è®­ç»ƒé˜¶æ®µ">1ã€è®­ç»ƒé˜¶æ®µï¼š</h3>
<p>â€‹
é¦–å…ˆè®¡ç®—å‡å€¼å’Œæ–¹å·®ï¼ˆæ¯æ¬¡è®­ç»ƒç»™ä¸€ä¸ªæ‰¹é‡ï¼Œè®¡ç®—æ‰¹é‡çš„å‡å€¼æ–¹å·®ï¼‰ï¼Œç„¶åå½’ä¸€åŒ–ï¼Œç„¶åç¼©æ”¾å’Œå¹³ç§»ï¼Œå®Œäº‹ï¼</p>
<h3 id="æµ‹è¯•é˜¶æ®µ">2ã€æµ‹è¯•é˜¶æ®µï¼š</h3>
<p>â€‹
æ¯æ¬¡åªè¾“å…¥ä¸€å¼ å›¾ç‰‡ï¼Œè¿™æ€ä¹ˆè®¡ç®—æ‰¹é‡çš„å‡å€¼å’Œæ–¹å·®ï¼Œäºæ˜¯ï¼Œåº”è¯¥æ˜¯è¿™æ ·å­ï¼Œåœ¨è®­ç»ƒçš„æ—¶å€™å®ç°è®¡ç®—å¥½meanã€
varï¼Œæµ‹è¯•çš„æ—¶å€™ç›´æ¥æ‹¿æ¥ç”¨å°±å¯ä»¥äº†ï¼Œä¸ç”¨è®¡ç®—å‡å€¼å’Œæ–¹å·®ã€‚</p>
<ul>
<li><p>ç”¨è®­ç»ƒé›†æ¥ä¼°è®¡æ€»ä½“å‡å€¼ Î¼ å’Œæ€»ä½“æ ‡å‡†å·® Ïƒ ã€‚</p></li>
<li><p>è¾ƒä¸ºç®€å•çš„åšæ³•å°±æ˜¯æŠŠæ¯ä¸ªmini-batchçš„å‡å€¼å’Œæ–¹å·®éƒ½ä¿å­˜ä¸‹æ¥ï¼Œç„¶åè®­ç»ƒå®Œäº†æ±‚å‡å€¼çš„å‡å€¼ï¼Œæ–¹å·®çš„å‡å€¼å³å¯ã€‚</p></li>
<li><p>åœ¨æµ‹è¯•é˜¶æ®µåº”ç”¨BatchNormçš„å«ä¹‰ï¼Œåº”è¯¥å°±æ˜¯è¦è®©æµ‹è¯•é›†çš„æµ‹è¯•ç²¾åº¦ä¸æ•´ä¸ªè®­ç»ƒç½‘ç»œä¿æŒä¸€è‡´ã€‚</p></li>
</ul>
<h2
id="ä¸‰batchnormçš„ä¸¤ä¸ªå‚æ•°gammaå’Œbetaæœ‰ä»€ä¹ˆä½œç”¨">ä¸‰ã€BatchNormçš„ä¸¤ä¸ªå‚æ•°<span
class="math inline">\({\gamma}\)</span>å’Œ<span
class="math inline">\(\beta\)</span>æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h2>
<p><img
src="https://www.zhihu.com/equation?tex=y%3D\frac%7Bx-\mathrm%7BE%7D%5Bx%5D%7D%7B\sqrt%7B\operatorname%7BVar%7D%5Bx%5D%2B\epsilon%7D%7D+*+\gamma%2B\beta+" /></p>
<h3
id="å¦‚æœåªåšå½’ä¸€åŒ–ä¸ºä»€ä¹ˆæ˜¯å­¦ä¸åˆ°ä»»ä½•ä¸œè¥¿çš„">1ã€å¦‚æœåªåšå½’ä¸€åŒ–ï¼Œä¸ºä»€ä¹ˆæ˜¯å­¦ä¸åˆ°ä»»ä½•ä¸œè¥¿çš„ï¼Ÿ</h3>
<p>â€‹
å¦‚æœåœ¨æ¯ä¸€å±‚ä¹‹åéƒ½å½’ä¸€åŒ–æˆ0-1çš„é«˜æ–¯åˆ†å¸ƒï¼ˆå‡å‡å€¼é™¤æ–¹å·®ï¼‰é‚£ä¹ˆæ•°æ®çš„åˆ†å¸ƒä¸€ç›´éƒ½æ˜¯é«˜æ–¯åˆ†å¸ƒï¼Œæ•°æ®åˆ†å¸ƒéƒ½æ˜¯å›ºå®šçš„äº†ï¼Œè¿™æ ·å³ä½¿åŠ æ›´å¤šå±‚å°±æ²¡æœ‰æ„ä¹‰äº†ï¼Œ<strong>æ·±åº¦ç½‘ç»œå°±æ˜¯æƒ³å­¦ä¹ æ•°æ®çš„åˆ†å¸ƒå‘ç°è§„å¾‹æ€§ï¼ŒBNå°±æ˜¯ä¸è®©å­¦ä¹ çš„æ•°æ®åˆ†å¸ƒåç¦»å¤ªè¿œ</strong></p>
<h3 id="ä¸¤ä¸ªå‚æ•°çš„ä½œç”¨">2ã€ä¸¤ä¸ªå‚æ•°çš„ä½œç”¨</h3>
<p>â€‹ ä¸ºäº†å‡å°Internal Covariate
Shiftï¼Œå¯¹ç¥ç»ç½‘ç»œçš„æ¯ä¸€å±‚åšå½’ä¸€åŒ–ä¸å°±å¯ä»¥äº†ï¼Œå‡è®¾å°†æ¯ä¸€å±‚è¾“å‡ºåçš„æ•°æ®éƒ½å½’ä¸€åŒ–åˆ°0å‡å€¼ï¼Œ1æ–¹å·®ï¼Œæ»¡è¶³æ­£èƒåˆ†å¸ƒï¼Œä½†æ˜¯ï¼Œæ­¤æ—¶æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œ<strong>å¦‚æœæ¯ä¸€å±‚çš„æ•°æ®åˆ†å¸ƒéƒ½æ˜¯æ ‡å‡†æ­£æ€åˆ†å¸ƒï¼Œå¯¼è‡´å…¶å®Œå…¨å­¦ä¹ ä¸åˆ°è¾“å…¥æ•°æ®çš„ç‰¹å¾ï¼Œå› ä¸ºï¼Œè´¹åŠ²å¿ƒæ€å­¦ä¹ åˆ°çš„ç‰¹å¾åˆ†å¸ƒè¢«å½’ä¸€åŒ–äº†ï¼Œå› æ­¤ï¼Œç›´æ¥å¯¹æ¯ä¸€å±‚åšå½’ä¸€åŒ–æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚</strong>ä½†æ˜¯å¦‚æœç¨ä½œä¿®æ”¹ï¼ŒåŠ å…¥å¯è®­ç»ƒçš„å‚æ•°åšå½’ä¸€åŒ–ï¼Œé‚£å°±æ˜¯BatchNorm
å®ç°çš„äº†ã€‚</p>
<p>â€‹
æ¥ä¸‹æ¥è¯¦ç»†ä»‹ç»ä¸€ä¸‹è¿™é¢å¤–çš„ä¸¤ä¸ªå‚æ•°ï¼Œä¹‹å‰ä¹Ÿè¯´è¿‡å¦‚æœç›´æ¥åšå½’ä¸€åŒ–ä¸åšå…¶ä»–å¤„ç†ï¼Œç¥ç»ç½‘ç»œæ˜¯å­¦ä¸åˆ°ä»»ä½•ä¸œè¥¿çš„ï¼Œä½†æ˜¯åŠ å…¥è¿™ä¸¤ä¸ªå‚æ•°åï¼Œäº‹æƒ…å°±ä¸ä¸€æ ·äº†ã€‚å…ˆè€ƒè™‘ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œå¦‚æœÎ³
å’ŒÎ² åˆ†åˆ«ç­‰äºæ­¤batchçš„æ ‡å‡†å·®å’Œå‡å€¼ï¼Œé‚£ä¹ˆ<span
class="math inline">\(y_i\)</span>å°±è¿˜åŸåˆ°å½’ä¸€åŒ–å‰çš„xäº†å—ï¼Œä¹Ÿå³æ˜¯ç¼©æ”¾å¹³ç§»åˆ°äº†å½’ä¸€åŒ–å‰çš„åˆ†å¸ƒï¼Œç›¸å½“äºbatch
normæ²¡æœ‰èµ·ä½œç”¨ï¼Œ<span class="math inline">\(Î²\)</span>å’ŒÎ³ åˆ†åˆ«ç§°ä¹‹ä¸º
å¹³ç§»å‚æ•°å’Œç¼©æ”¾å‚æ•°
ã€‚è¿™æ ·å°±<strong>ä¿è¯äº†æ¯ä¸€æ¬¡æ•°æ®ç»è¿‡å½’ä¸€åŒ–åè¿˜ä¿ç•™çš„æœ‰å­¦ä¹ æ¥çš„ç‰¹å¾ï¼ŒåŒæ—¶åˆèƒ½å®Œæˆå½’ä¸€åŒ–è¿™ä¸ªæ“ä½œï¼ŒåŠ é€Ÿè®­ç»ƒ</strong>ã€‚</p>
<p>å¼•ç”¨ï¼šhttps://www.cnblogs.com/hoojjack/p/12350707.html</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>OverFitting</tag>
        <tag>Batch Normalization</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°13â€”â€”DropOutè¯¦è§£åŠä¸ºä»€ä¹ˆèƒ½å¤Ÿé˜²æ­¢è¿‡æ‹Ÿåˆ</title>
    <url>/2022/01/21/788645531548/</url>
    <content><![CDATA[<h2 id="ä¸€dropoutæ˜¯ä»€ä¹ˆ">ä¸€ã€DropOutæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>â€‹ è¿‡æ‹Ÿåˆæ˜¯Deep Neural
Networks(DNN)ç½‘ç»œå­˜åœ¨çš„é—®é¢˜ä¹‹ä¸€ã€‚è¿‡æ‹Ÿåˆçš„ç‰¹ç‚¹æ˜¯æ¨¡å‹å¯¹è®­ç»ƒæ•°æ®çš„æ‹Ÿåˆéå¸¸å¥½ï¼Œä½†å¯¹æµ‹è¯•æ•°æ®çš„æ‹Ÿåˆå´éå¸¸å·®ï¼Œå…·ä½“è¡¨ç°ä¸ºlosså’Œåœ¨è®­ç»ƒé›†ä¸Šçš„é”™è¯¯ç‡éå¸¸ä½ï¼Œè€Œåœ¨éªŒè¯é›†æˆ–æµ‹è¯•é›†ä¸Šå´éƒ½è¦é«˜å¾ˆå¤šã€‚é’ˆå¯¹è§£å†³è¿‡æ‹Ÿåˆé—®é¢˜è®¾è®¡å‡ºæ¥çš„æ–¹æ³•å¾ˆå¤šï¼Œdropoutå°±æ˜¯å…¶ä¸­ä¸€ç§æœ€ç®€å•ï¼Œä¹Ÿæ˜¯æœ€æœ‰æ•ˆçš„æ–¹æ³•ã€‚</p>
<p>â€‹ åœ¨è®­ç»ƒDNNç½‘ç»œçš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºæ¯ä¸€ä¸ªç¥ç»å…ƒï¼Œä»¥pçš„æ¦‚ç‡è¢«éšæœºçš„drop
outï¼Œä¹Ÿå°±æ˜¯å°†å…¶å€¼ç½®é›¶ã€‚è¿™æ ·ï¼Œåœ¨è¯¥è½®å‰ä¼ å’Œåä¼ çš„è¿‡ç¨‹ä¸­ï¼Œè¯¥ç¥ç»å…ƒå°†å¤±å»ä½œç”¨ï¼Œç›¸å½“äºä¸å­˜åœ¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚DropOutæ•´ä½“æ¥è¯´ï¼Œæ˜¯åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä»¥ä¸€å®šçš„æ¦‚ç‡çš„ä½¿ç¥ç»å…ƒå¤±æ´»ï¼Œå³è¾“å‡ºä¸º0ï¼Œä»¥æé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œå‡å°‘è¿‡æ‹Ÿåˆã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/dropout.jpeg" /></p>
<h2
id="äºŒdropouté˜¶æ®µåœ¨è®­ç»ƒé˜¶æ®µå’Œæµ‹è¯•é˜¶æ®µçš„åŒºåˆ«">äºŒã€DropOuté˜¶æ®µåœ¨è®­ç»ƒé˜¶æ®µå’Œæµ‹è¯•é˜¶æ®µçš„åŒºåˆ«ï¼š</h2>
<h3 id="è®­ç»ƒé˜¶æ®µ">1ã€è®­ç»ƒé˜¶æ®µï¼š</h3>
<p>â€‹
åœ¨å‰å‘ä¼ æ’­æ—¶ï¼Œå‡è®¾æœ‰è¿™ä¸€å±‚nä¸ªç¥ç»å…ƒï¼Œåˆ™æˆ‘ä»¬å¯ä»¥å‡è®¾æ¯ä¸ªç¥ç»å…ƒçš„æ¦‚ç‡éƒ½æ˜¯0~1(å¯ä»¥é€šè¿‡pythonå¾—åˆ°éšæœºçš„å€¼)ï¼Œç„¶åå°äºpçš„å°±å¤±æ´»ï¼Œå³ä¸å‚ä¸è®­ç»ƒã€‚</p>
<p>â€‹ åœ¨åå‘ä¼ æ’­æ—¶ï¼Œä¹Ÿåªå¯¹å‚ä¸è®­ç»ƒçš„ç¥ç»å…ƒè¿›è¡Œå‚æ•°æ›´æ–°ã€‚</p>
<p>â€‹ æ¯æ¬¡è®­ç»ƒçš„æ—¶å€™ï¼Œåˆæ˜¯nä¸ªç¥ç»å…ƒï¼Œé‡æ–°è¿›è¡Œdropout</p>
<p>â€‹ <strong>Dropout
åœ¨è®­ç»ƒæ—¶é‡‡ç”¨ï¼Œæ˜¯ä¸ºäº†å‡å°‘ç¥ç»å…ƒå¯¹éƒ¨åˆ†ä¸Šå±‚ç¥ç»å…ƒçš„ä¾èµ–ï¼Œç±»ä¼¼å°†å¤šä¸ªä¸åŒç½‘ç»œç»“æ„çš„æ¨¡å‹é›†æˆèµ·æ¥ï¼Œå‡å°‘è¿‡æ‹Ÿåˆçš„é£é™©ã€‚</strong></p>
<h3 id="æµ‹è¯•é˜¶æ®µ">2ã€æµ‹è¯•é˜¶æ®µï¼š</h3>
<p>â€‹ åœ¨æµ‹è¯•æ—¶ï¼Œåº”è¯¥ç”¨æ•´ä¸ªè®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œä¸éœ€è¦è¿›è¡Œdropoutã€‚</p>
<p>â€‹
å‚ä¸å­¦ä¹ çš„èŠ‚ç‚¹å’Œé‚£äº›è¢«éšè—çš„èŠ‚ç‚¹éœ€è¦ä»¥ä¸€å®šçš„æ¦‚ç‡påŠ æƒæ±‚å’Œï¼Œç»¼åˆè®¡ç®—å¾—åˆ°ç½‘ç»œçš„è¾“å‡ºã€‚</p>
<p>â€‹ å³é¢„æµ‹çš„æ—¶å€™ï¼Œæ¯ä¸€ä¸ªå•å…ƒçš„å‚æ•°è¦é¢„ä¹˜ä»¥pã€‚ä¸ºä»€ä¹ˆè¦é¢„ä¹˜ä»¥på‘¢ï¼Ÿ</p>
<p>â€‹
å› ä¸ºæˆ‘ä»¬è®­ç»ƒçš„æ—¶å€™ä¼šéšæœºçš„ä¸¢å¼ƒä¸€äº›ç¥ç»å…ƒï¼Œä½†æ˜¯é¢„æµ‹çš„æ—¶å€™å°±æ²¡åŠæ³•éšæœºä¸¢å¼ƒäº†ã€‚<strong>å¦‚æœä¸¢å¼ƒä¸€äº›ç¥ç»å…ƒï¼Œè¿™ä¼šå¸¦æ¥ç»“æœä¸ç¨³å®šçš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯ç»™å®šä¸€ä¸ªæµ‹è¯•æ•°æ®ï¼Œæœ‰æ—¶å€™è¾“å‡ºaæœ‰æ—¶å€™è¾“å‡ºbï¼Œç»“æœä¸ç¨³å®šï¼Œè¿™æ˜¯å®é™…ç³»ç»Ÿä¸èƒ½æ¥å—çš„</strong>ï¼Œç”¨æˆ·å¯èƒ½è®¤ä¸ºæ¨¡å‹é¢„æµ‹ä¸å‡†ã€‚é‚£ä¹ˆ<strong>ä¸€ç§â€è¡¥å¿â€œçš„æ–¹æ¡ˆå°±æ˜¯æ¯ä¸ªç¥ç»å…ƒçš„æƒé‡éƒ½ä¹˜ä»¥ä¸€ä¸ªpï¼Œè¿™æ ·åœ¨â€œæ€»ä½“ä¸Šâ€ä½¿å¾—æµ‹è¯•æ•°æ®å’Œè®­ç»ƒæ•°æ®æ˜¯å¤§è‡´ä¸€æ ·çš„</strong>ã€‚</p>
<p>â€‹
<strong>æ¯”å¦‚ä¸€ä¸ªç¥ç»å…ƒçš„è¾“å‡ºæ˜¯xï¼Œé‚£ä¹ˆåœ¨è®­ç»ƒçš„æ—¶å€™å®ƒæœ‰pçš„æ¦‚ç‡å‚ä¸è®­ç»ƒï¼Œ(1-p)çš„æ¦‚ç‡ä¸¢å¼ƒï¼Œé‚£ä¹ˆå®ƒè¾“å‡ºçš„æœŸæœ›æ˜¯<span
class="math inline">\(p \times x+(1-p) \times 0 = p \times
x\)</span>ã€‚å› æ­¤æµ‹è¯•çš„æ—¶å€™æŠŠè¿™ä¸ªç¥ç»å…ƒçš„æƒé‡ä¹˜ä»¥på¯ä»¥å¾—åˆ°åŒæ ·çš„æœŸæœ›ã€‚</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220121204115930.png" /></p>
<h2 id="ä¸‰dropoutå¦‚ä½•é˜²æ­¢è¿‡æ‹Ÿåˆ">ä¸‰ã€DropOutå¦‚ä½•é˜²æ­¢è¿‡æ‹Ÿåˆï¼Ÿ</h2>
<p><strong>ï¼ˆ1ï¼‰æ•°æ®å±‚é¢</strong></p>
<p>â€‹ å¯¹äºæ¯ä¸€ä¸ªdropoutåçš„ç½‘ç»œï¼Œè¿›è¡Œè®­ç»ƒæ—¶ï¼Œç›¸å½“äºåšäº†Data
Augmentationã€‚æ¯”å¦‚ï¼Œå¯¹äºæŸä¸€å±‚ï¼Œdropoutä¸€äº›å•å…ƒåï¼Œå½¢æˆçš„ç»“æœæ˜¯(1.5ï¼Œ0ï¼Œ2.5ï¼Œ0ï¼Œ1ï¼Œ2ï¼Œ0)ï¼Œå…¶ä¸­0æ˜¯è¢«dropçš„å•å…ƒï¼Œé‚£ä¹ˆæ€»èƒ½æ‰¾åˆ°ä¸€ä¸ªæ ·æœ¬ï¼Œä½¿å¾—ç»“æœä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™æ ·æ¯ä¸€æ¬¡dropoutå…¶å®éƒ½ç›¸å½“äºå¢åŠ äº†æ ·æœ¬ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰æ¨¡å‹å±‚é¢</strong></p>
<ul>
<li><p><strong>åœ¨è¾ƒå¤§ç¨‹åº¦ä¸Šå‡å°äº†ç½‘ç»œçš„å¤§å°ï¼š</strong>åœ¨è¿™ä¸ªâ€œæ®‹ç¼ºâ€çš„ç½‘ç»œä¸­ï¼Œè®©ç¥ç»ç½‘ç»œå­¦ä¹ æ•°æ®ä¸­çš„å±€éƒ¨ç‰¹å¾ï¼ˆå³éƒ¨åˆ†åˆ†å¸ƒå¼ç‰¹å¾ï¼‰ï¼Œä½†è¿™äº›ç‰¹å¾ä¹Ÿè¶³ä»¥è¿›è¡Œè¾“å‡ºæ­£ç¡®çš„ç»“æœã€‚</p></li>
<li><p><strong>å–å¹³å‡çš„ä½œç”¨ï¼š</strong>
å¦‚æœæ­£å¸¸çš„æ¨¡å‹ï¼ˆæ²¡æœ‰dropoutï¼‰ï¼Œæˆ‘ä»¬ç”¨ç›¸åŒçš„è®­ç»ƒæ•°æ®å»è®­ç»ƒ5ä¸ªä¸åŒçš„ç¥ç»ç½‘ç»œï¼Œä¸€èˆ¬ä¼šå¾—åˆ°5ä¸ªä¸åŒçš„ç»“æœï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥é‡‡ç”¨
â€œ5ä¸ªç»“æœå–å‡å€¼â€æˆ–è€…â€œå¤šæ•°å–èƒœçš„æŠ•ç¥¨ç­–ç•¥â€å»å†³å®šæœ€ç»ˆç»“æœã€‚ï¼ˆä¾‹å¦‚
3ä¸ªç½‘ç»œåˆ¤æ–­ç»“æœä¸ºæ•°å­—9,é‚£ä¹ˆå¾ˆæœ‰å¯èƒ½çœŸæ­£çš„ç»“æœå°±æ˜¯æ•°å­—9ï¼Œå…¶å®ƒä¸¤ä¸ªç½‘ç»œç»™å‡ºäº†é”™è¯¯ç»“æœï¼‰ã€‚<strong>è¿™ç§â€œç»¼åˆèµ·æ¥å–å¹³å‡â€çš„ç­–ç•¥é€šå¸¸å¯ä»¥æœ‰æ•ˆé˜²æ­¢è¿‡æ‹Ÿåˆé—®é¢˜ã€‚å› ä¸ºä¸åŒçš„ç½‘ç»œå¯èƒ½äº§ç”Ÿä¸åŒçš„è¿‡æ‹Ÿåˆï¼Œå–å¹³å‡åˆ™æœ‰å¯èƒ½è®©ä¸€äº›â€œç›¸åçš„â€æ‹Ÿåˆäº’ç›¸æŠµæ¶ˆã€‚æ¯æ¬¡è®­ç»ƒéšæœºdropoutæ‰ä¸åŒçš„éšè—ç¥ç»å…ƒï¼Œç½‘ç»œç»“æ„å·²ç»ä¸åŒï¼Œè¿™å°±ç±»ä¼¼åœ¨è®­ç»ƒä¸åŒçš„ç½‘ç»œï¼Œæ•´ä¸ªdropoutè¿‡ç¨‹å°±ç›¸å½“äºå¯¹å¾ˆå¤šä¸ªä¸åŒçš„ç¥ç»ç½‘ç»œå–å¹³å‡ã€‚è€Œä¸åŒçš„ç½‘ç»œäº§ç”Ÿä¸åŒçš„è¿‡æ‹Ÿåˆï¼Œä¸€äº›äº’ä¸ºâ€œåå‘â€çš„æ‹Ÿåˆç›¸äº’æŠµæ¶ˆå°±å¯ä»¥è¾¾åˆ°æ•´ä½“ä¸Šå‡å°‘è¿‡æ‹Ÿåˆã€‚</strong></p></li>
<li><p><strong>å‡å°‘ç¥ç»å…ƒä¹‹é—´å…±é€‚åº”å…³ç³»ï¼š</strong>
å› ä¸ºdropoutå¯¼è‡´ä¸¤ä¸ªç¥ç»å…ƒä¸ä¸€å®šæ¯æ¬¡éƒ½åœ¨ä¸€ä¸ªç½‘ç»œä¸­å‡ºç°ï¼Œè¿™æ ·æƒå€¼çš„æ›´æ–°ä¸å†ä¾èµ–äºæœ‰å›ºå®šå…³ç³»çš„éšå«èŠ‚ç‚¹çš„å…±åŒä½œç”¨ï¼Œé˜»æ­¢äº†æŸäº›ç‰¹å¾ä»…ä»…åœ¨å…¶å®ƒç‰¹å®šç‰¹å¾ä¸‹æ‰æœ‰æ•ˆæœçš„æƒ…å†µï¼Œ
è¿«ä½¿ç½‘ç»œå»å­¦ä¹ æ›´åŠ é²æ£’çš„ç‰¹å¾ã€‚æ¢å¥è¯è¯´ï¼Œå‡å¦‚ç¥ç»ç½‘ç»œæ˜¯åœ¨åšå‡ºæŸç§é¢„æµ‹ï¼Œ<strong>å®ƒä¸åº”è¯¥å¯¹ä¸€äº›ç‰¹å®šçš„çº¿ç´¢ç‰‡æ®µå¤ªè¿‡æ•æ„Ÿ</strong>ï¼Œå³ä½¿ä¸¢å¤±ç‰¹å®šçš„çº¿ç´¢ï¼Œå®ƒä¹Ÿåº”è¯¥å¯ä»¥ä»ä¼—å¤šå…¶å®ƒçº¿ç´¢ä¸­å­¦ä¹ ä¸€äº›å…±åŒçš„æ¨¡å¼ï¼ˆé²æ£’æ€§ï¼‰ã€‚</p></li>
</ul>
<p>å¼•ç”¨ï¼š</p>
<p>https://zhuanlan.zhihu.com/p/175142160</p>
<p>https://www.zhihu.com/question/402485242/answer/1553947864</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>OverFitting</tag>
        <tag>DropOut</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°14â€”â€”ResNetè¯¦è§£åŠä¸ºä»€ä¹ˆèƒ½è§£å†³æ·±åº¦ç½‘ç»œé€€åŒ–é—®é¢˜</title>
    <url>/2022/01/23/4be37de340a1/</url>
    <content><![CDATA[<h2 id="ä¸€æ·±åº¦ç½‘ç»œé€€åŒ–èƒŒæ™¯">ä¸€ã€æ·±åº¦ç½‘ç»œé€€åŒ–èƒŒæ™¯</h2>
<p>â€‹
å¯¹äºå·ç§¯ç¥ç»ç½‘ç»œï¼Œæ·±åº¦æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„å› ç´ ã€‚æ·±åº¦å·ç§¯ç½‘ç»œè‡ªç„¶çš„æ•´åˆäº†ä½ä¸­é«˜ä¸åŒå±‚æ¬¡çš„ç‰¹å¾ï¼Œç‰¹å¾çš„å±‚æ¬¡å¯ä»¥é åŠ æ·±ç½‘ç»œçš„å±‚æ¬¡æ¥ä¸°å¯Œã€‚å› æ­¤åœ¨æ„å»ºå·ç§¯ç½‘ç»œæ—¶ï¼Œç½‘ç»œçš„æ·±åº¦è¶Šé«˜ï¼Œå¯æŠ½å–çš„ç‰¹å¾å±‚æ¬¡å°±è¶Šä¸°å¯Œè¶ŠæŠ½è±¡ã€‚æ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬ä¼šå€¾å‘äºä½¿ç”¨æ›´æ·±å±‚æ¬¡çš„ç½‘ç»œç»“æ„ï¼Œä»¥ä¾¿å–å¾—æ›´é«˜å±‚æ¬¡çš„ç‰¹å¾ã€‚ä½†æ˜¯æ›´æ·±å±‚çš„ç½‘ç»œç»“æ„æœ‰çš„æ—¶å€™å¹¶ä¸ä¼šå¸¦æ¥æ›´å¥½çš„ç»“æœï¼Œå±‚æ•°ä¸€æ—¦è¿‡å¤šä»¥åï¼Œå°±ä¼šå¯¼è‡´è¡¨ç°æ˜æ˜¾ä¸‹é™ï¼Œè¿™å°±æ˜¯æ·±åº¦ç½‘ç»œçš„é€€åŒ–é—®é¢˜ã€‚</p>
<p>â€‹
æ·±åº¦ç½‘ç»œçš„é€€åŒ–é—®é¢˜åˆ°åº•æ˜¯ç”±äºä»€ä¹ˆå¯¼è‡´çš„å‘¢ï¼Ÿè¿‡æ‹Ÿåˆï¼Ÿè¿˜æ˜¯æ¢¯åº¦æ¶ˆå¤±ï¼Ÿæ¢¯åº¦çˆ†ç‚¸ï¼Ÿ</p>
<p>â€‹
å…¶å®éƒ½ä¸æ˜¯ã€‚å¦‚ä¸‹å›¾è®ºæ–‡ä¸­æ˜¾ç¤ºçš„æ‰€ç¤ºï¼Œæ˜¾ç„¶å…¶åœ¨è®­ç»ƒé›†ä¸Šçš„è¯¯å·®ä¹Ÿå¾ˆå¤§ï¼Œå°±ä¸å¯èƒ½æ˜¯è¿‡æ‹Ÿåˆé—®é¢˜ã€‚è€Œæ¢¯åº¦æ¶ˆå¤±æˆ–æ¢¯åº¦çˆ†ç‚¸ï¼Œé€šè¿‡åŠ å…¥BNå±‚ï¼Œå°±èƒ½å¤Ÿé€šè¿‡è§„æ•´æ•°æ®åˆ†å¸ƒæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥åº”å½“ä¹Ÿä¸æ˜¯æ¢¯åº¦æ¶ˆå¤±æˆ–çˆ†ç‚¸çš„é—®é¢˜ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS82Y2M3OThjNC0wMTNmLTRkNjQtYmY5Yi0yZDg0YWExOTQzNzYucG5n.png" /></p>
<p>â€‹ é‚£ä¹ˆæ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>â€‹ åœ¨<strong>MobileNet
V2</strong>çš„è®ºæ–‡ä¸­æåˆ°ï¼Œç”±äºéçº¿æ€§æ¿€æ´»å‡½æ•°Reluçš„å­˜åœ¨ï¼Œæ¯æ¬¡è¾“å…¥åˆ°è¾“å‡ºçš„è¿‡ç¨‹éƒ½å‡ ä¹æ˜¯ä¸å¯é€†çš„ï¼Œè¿™ä¹Ÿé€ æˆäº†è®¸å¤š<strong>ä¸å¯é€†çš„ä¿¡æ¯æŸå¤±</strong>ã€‚æˆ‘ä»¬è¯•æƒ³ä¸€ä¸‹ï¼Œä¸€ä¸ªç‰¹å¾çš„ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯æŸå¤±äº†ï¼Œé‚£ä»–çš„è¡¨ç°è¿˜èƒ½åšåˆ°æŒå¹³å—ï¼Ÿæ˜¾ç„¶ä¸å¯èƒ½åšåˆ°æŒå¹³ã€‚éšç€ç½‘ç»œå±‚æ•°çš„åŠ æ·±ï¼Œé€ æˆäº†è®¸å¤šä¸å¯é€†çš„ä¿¡æ¯æŸå¤±ï¼Œæœ€ç»ˆå¯¼è‡´äº†æ·±åº¦ç½‘ç»œçš„é€€åŒ–é—®é¢˜ã€‚</p>
<h2 id="äºŒresnetæå‡ºåˆè¡·ä¸è¯¦è§£">äºŒã€ResNetæå‡ºåˆè¡·ä¸è¯¦è§£</h2>
<p>â€‹
æˆ‘ä»¬é€‰æ‹©åŠ æ·±ç½‘ç»œçš„å±‚æ•°ï¼Œæ˜¯å¸Œæœ›æ·±å±‚çš„ç½‘ç»œçš„è¡¨ç°èƒ½æ¯”æµ…å±‚å¥½ï¼Œæˆ–è€…æ˜¯<strong>å¸Œæœ›å®ƒçš„è¡¨ç°è‡³å°‘å’Œæµ…å±‚ç½‘ç»œæŒå¹³ï¼ˆç›¸å½“äºç›´æ¥å¤åˆ¶æµ…å±‚ç½‘ç»œçš„ç‰¹å¾ï¼‰</strong>ï¼Œå¯å®é™…çš„ç»“æœå´è®©æˆ‘ä»¬å¤§åƒä¸€æƒŠï¼ˆæ·±åº¦ç½‘ç»œé€€åŒ–ï¼‰ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS81OGU1NDU3Yy1lZWEwLTRmMjctOGVlMS04ZDJhMTk4YmJkOTcucG5n.png" /></p>
<p>â€‹
å¦‚å›¾æ‰€ç¤ºï¼Œè¿™æ˜¯ä¸€ä¸ªç›´è§‚çš„ä¾‹å­ï¼Œæˆ‘ä»¬æŠŠå³è¾¹çš„ç½‘ç»œç†è§£ä¸ºå·¦è¾¹æµ…å±‚ç½‘ç»œåŠ æ·±äº†ä¸‰å±‚ï¼ˆæ¡†èµ·æ¥çš„éƒ¨åˆ†ï¼‰ï¼Œå‡å¦‚æˆ‘ä»¬å¸Œæœ›å³è¾¹çš„æ·±å±‚ç½‘ç»œä¸å·¦è¾¹çš„æµ…å±‚ç½‘ç»œæŒå¹³ï¼Œå³æ˜¯å¸Œæœ›æ¡†èµ·æ¥çš„ä¸‰å±‚è·Ÿæ²¡åŠ ä¸€æ ·ï¼Œä¹Ÿå°±æ˜¯åŠ çš„ä¸‰å±‚çš„è¾“å…¥ç­‰äºè¾“å‡ºã€‚æˆ‘ä»¬å‡è®¾è¿™ä¸‰å±‚çš„è¾“å…¥ä¸ºxï¼Œè¾“å‡ºä¸ºH(x)ï¼Œé‚£ä¹ˆæ·±å±‚ç½‘ç»œä¸æµ…å±‚ç½‘ç»œè¡¨ç°æŒå¹³çš„ç›´è§‚ç†è§£å³æ˜¯H(x)=xï¼Œè¿™ç§è®©è¾“å‡ºç­‰äºè¾“å…¥çš„æ–¹å¼ï¼Œå°±æ˜¯ResNetè®ºæ–‡ä¸­æåˆ°çš„<strong>æ’ç­‰æ˜ å°„ï¼ˆidentity
mapping)</strong>ã€‚</p>
<p>â€‹
æ‰€ä»¥<strong>ResNetçš„åˆè¡·ï¼Œå°±æ˜¯è®©ç½‘ç»œæ‹¥æœ‰è¿™ç§æ’ç­‰æ˜ å°„çš„èƒ½åŠ›ï¼Œèƒ½å¤Ÿåœ¨åŠ æ·±ç½‘ç»œçš„æ—¶å€™ï¼Œè‡³å°‘èƒ½ä¿è¯æ·±å±‚ç½‘ç»œçš„è¡¨ç°è‡³å°‘å’Œæµ…å±‚ç½‘ç»œæŒå¹³</strong>ã€‚</p>
<p>â€‹
æ‰€ä»¥ï¼Œç°åœ¨æˆ‘ä»¬çŸ¥é“ï¼Œ<strong>å¦‚æœæƒ³è¦è®©æ·±åº¦ç¥ç»ç½‘ç»œä¸é€€åŒ–ï¼Œæ ¹æœ¬çš„åŸå› å°±æ˜¯å¦‚ä½•å»åšåˆ°æ’ç­‰æ˜ å°„</strong>ã€‚ç„¶è€Œç°æœ‰çš„ç¥ç»ç½‘ç»œå¾ˆéš¾æ‹Ÿåˆæ½œåœ¨çš„æ’ç­‰æ˜ å°„å‡½æ•°ï¼ŒH(x)
=
xï¼Œå› ä¸ºç¥ç»ç½‘ç»œå†…éƒ¨æ€»ä¼šåšä¸€äº›å‚æ•°çš„è°ƒæ•´ã€‚ä½†æˆ‘ä»¬å¦‚æœæŠŠæ’ç­‰æ˜ å°„ä½œä¸ºç½‘ç»œçš„ä¸€éƒ¨åˆ†ï¼Œå°†ç½‘ç»œè®¾è®¡ä¸ºH(x)
= F(x) + xçš„å½¢å¼ï¼Œå³å¦‚æ®‹å·®ç»“æ„ä¸­æ‰€ç¤ºé‚£æ ·ï¼Œç½‘ç»œçš„è¾“å‡ºæ˜¯ç”±x å’Œ F(x)
ç›¸åŠ å¾—åˆ°çš„ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŠŠé—®é¢˜è½¬åŒ–ä¸º
è®©ä¸­é—´å¤šå‡ºæ¥çš„é‚£ä¸‰å±‚ï¼Œå»å­¦ä¹ ä¸€ä¸ªæ®‹å·®å‡½æ•°F(x) = H(x) -
xã€‚åªè¦å­¦ä¹ åˆ°çš„æ®‹å·®å‡½æ•°ï¼Œèƒ½å¤Ÿä½¿å¾—F(x) =
0ï¼Œé‚£ä¹ˆå°±æ„æˆäº†ä¸€ä¸ªæ’ç­‰æ˜ å°„ã€‚æœ€ç»ˆç½‘ç»œçš„ç»“æœå°±ä¸ä¼šæ¯”å¤±å»è¿™å‡ å±‚è¦å·®ã€‚<strong>å¹¶ä¸”ï¼Œè®©ç½‘ç»œå»æ‹Ÿåˆä¸€ä¸ªæ®‹å·®æ¯”æ‹Ÿåˆä¸€ä¸ªæ’ç­‰æ˜ å°„å®¹æ˜“å¾—å¤šï¼ˆåŸå› è§åï¼‰</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS9mNGI5ZjRjYi04NWE4LTRmNjQtYjc0Ny1lMzU0ZDdjNmM2YmUucG5n.png" /></p>
<p>â€‹ ResNetä¸­ï¼Œ<strong>shortcut
connection</strong>ï¼Œ<strong>é€šè¿‡è·³æ¥åœ¨æ¿€æ´»å‡½æ•°å‰ï¼Œå°†ä¸Šä¸€å±‚ï¼ˆæˆ–å‡ å±‚ï¼‰çš„è¾“å‡ºä¸æœ¬å±‚è¾“å‡ºç›¸åŠ ï¼Œå°†æ±‚å’Œçš„ç»“æœè¾“å…¥åˆ°æ¿€æ´»å‡½æ•°ä½œä¸ºæœ¬å±‚çš„è¾“å‡º</strong></p>
<p>â€‹</p>
<h2
id="ä¸‰ä¸ºä»€ä¹ˆresnetèƒ½è§£å†³æ·±åº¦ç½‘ç»œé€€åŒ–é—®é¢˜">ä¸‰ã€ä¸ºä»€ä¹ˆResNetèƒ½è§£å†³æ·±åº¦ç½‘ç»œé€€åŒ–é—®é¢˜ï¼Ÿ</h2>
<p>1ã€åŠ äº†æ®‹å·®ç»“æ„åå°±æ˜¯ç»™äº†è¾“å…¥xå¤šä¸€ä¸ªé€‰æ‹©ï¼Œåœ¨ç¥ç»ç½‘ç»œå­¦ä¹ åˆ°è¿™å±‚çš„å‚æ•°æ˜¯å†—ä½™çš„æ—¶å€™å®ƒå¯ä»¥é€‰æ‹©ç›´æ¥èµ°è¿™æ¡â€œè·³æ¥â€æ›²çº¿ï¼Œè·³è¿‡è¿™ä¸ªå†—ä½™å±‚ï¼Œè€Œä¸éœ€è¦å†å»æ‹Ÿåˆå‚æ•°ä½¿å¾—è¾“å‡ºH(x)ç­‰äºxã€‚</p>
<p>2ã€å› ä¸ºå­¦ä¹ æ®‹å·®çš„è®¡ç®—é‡æ¯”å­¦ä¹ æ’ç­‰æ˜ å°„å°ã€‚å‡è®¾æ™®é€šç½‘ç»œä¸ºAï¼Œæ®‹å·®ç½‘ç»œä¸ºBï¼Œè¾“å…¥ä¸º2ï¼Œè¾“å‡ºä¸º2ï¼ˆè¾“å…¥å’Œè¾“å‡ºä¸€æ ·æ˜¯ä¸ºäº†æ¨¡æ‹Ÿå†—ä½™å±‚éœ€è¦æ’ç­‰æ˜ å°„çš„æƒ…å†µï¼‰ï¼Œé‚£ä¹ˆæ™®é€šç½‘ç»œå°±æ˜¯A
(2) = 2ï¼Œè€Œæ®‹å·®ç½‘ç»œå°±æ˜¯B ( 2 ) = F ( 2 ) + 2 = 2ï¼Œæ˜¾ç„¶æ®‹å·®ç½‘ç»œä¸­çš„F ( 2
) = 0
ã€‚æˆ‘ä»¬çŸ¥é“ç½‘ç»œä¸­æƒé‡ä¸€èˆ¬ä¼šåˆå§‹åŒ–æˆ0é™„è¿‘çš„æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¾ˆå®¹æ˜“ç†è§£ï¼Œä¸ºä»€ä¹ˆè®©F(2)æ‹Ÿåˆ0ä¼šæ¯”A
(2) = 2 å®¹æ˜“äº†</p>
<p>3ã€æˆ‘ä»¬çŸ¥é“ReLUèƒ½å¤Ÿå°†è´Ÿæ•°æ¿€æ´»ä¸º0ï¼Œè€Œæ­£æ•°è¾“å…¥ç­‰äºè¾“å‡ºã€‚è¿™ç›¸å½“äºè¿‡æ»¤äº†è´Ÿæ•°çš„çº¿æ€§å˜åŒ–ï¼Œè®©F(x)=0å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p>
<p>4ã€æˆ‘ä»¬çŸ¥é“æ®‹å·®ç½‘ç»œå¯ä»¥è¡¨ç¤ºæˆH ( x ) = F ( x ) + x
ï¼Œè¿™å°±è¯´æ˜äº†åœ¨æ±‚è¾“å‡ºH ( x ) å¯¹è¾“å…¥x
çš„å€’æ•°ï¼ˆæ¢¯åº¦ï¼‰ï¼Œä¹Ÿå°±æ˜¯åœ¨åå‘ä¼ æ’­çš„æ—¶å€™ï¼ŒH â€² ( x ) = F â€² ( x ) +
1ï¼Œæ®‹å·®ç»“æ„çš„è¿™ä¸ªå¸¸æ•°1ä¹Ÿèƒ½ä¿è¯åœ¨æ±‚æ¢¯åº¦çš„æ—¶å€™æ¢¯åº¦ä¸ä¼šæ¶ˆå¤±ã€‚</p>
<h2 id="å››ä¸€äº›ç»†èŠ‚é—®é¢˜">å››ã€ä¸€äº›ç»†èŠ‚é—®é¢˜ï¼š</h2>
<p>â€‹
åœ¨ResNetä¸­ï¼Œæ®‹å·®è¿æ¥çš„ç›¸åŠ ï¼ŒæŒ‡çš„æ˜¯é€å…ƒç´ ç›¸åŠ ï¼Œåœ¨ReSNetçš„ç½‘ç»œç¤ºæ„å›¾ä¸­ï¼Œæœ‰çš„Skip-Connectionæ˜¯å®çº¿ï¼Œæœ‰çš„æ˜¯è™šçº¿ï¼Œ<strong>è™šçº¿çš„ä»£è¡¨è¿™äº›æ¨¡å—å‰åçš„ç»´åº¦ä¸ä¸€è‡´ï¼Œå› ä¸ºå»æ‰æ®‹å·®ç»“æ„çš„Plainç½‘ç»œè¿˜æ˜¯å’ŒVGGä¸€æ ·ï¼Œä¹Ÿå°±æ˜¯æ¯éš”nå±‚è¿›è¡Œä¸‹é‡‡æ ·ä½†æ·±åº¦ç¿»å€ï¼ˆVGGé€šè¿‡æ± åŒ–å±‚ä¸‹é‡‡æ ·ï¼ŒResNeté€šè¿‡å·ç§¯ï¼‰</strong>ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS81YjZhMTNiZi00ZTU1LTRlMzYtOWY1NC05YzAzYzhkMmVkY2EucG5n.png" /></p>
<ul>
<li><p>ç©ºé—´ä¸Šä¸ä¸€è‡´æ—¶ï¼Œéœ€è¦ç»™è¾“å…¥çš„Xåšä¸€ä¸ªçº¿æ€§çš„æ˜ å°„ï¼šè°ƒæ•´ä¸€ä¸‹H*Wç»´åº¦</p></li>
<li><p>æ·±åº¦ä¸Šä¸ä¸€è‡´æ—¶ï¼Œæœ‰ä¸¤ç§è§£å†³æ–¹æ³•ï¼Œä¸€ç§æ˜¯åœ¨è·³æ¥è¿‡ç¨‹ä¸­åŠ ä¸€ä¸ª1Ã—1çš„å·ç§¯å±‚è¿›è¡Œå‡ç»´ï¼Œå¦ä¸€ç§åˆ™æ˜¯ç›´æ¥è¡¥é›¶ï¼ˆå…ˆåšä¸‹é‡‡æ ·ï¼‰ã€‚</p></li>
<li><p>é’ˆå¯¹æ¯”è¾ƒæ·±çš„ç¥ç»ç½‘ç»œï¼Œä½œè€…ä¹Ÿè€ƒè™‘åˆ°è®¡ç®—é‡ï¼Œä¼šå…ˆç”¨1Ã—1çš„å·ç§¯å°†è¾“å…¥çš„256ç»´é™åˆ°64ç»´ï¼Œç„¶åé€šè¿‡1Ã—1æ¢å¤ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯å‡å°‘å‚æ•°é‡å’Œè®¡ç®—é‡ã€‚</p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/aHR0cHM6Ly9pbWdrci5jbi1iai51ZmlsZW9zLmNvbS85M2RiMDgzYi05NTk3LTRjZmUtODJmZC04NzRlNTI2NjViNmIucG5n.png" /></p>
<p>å¼•ç”¨ï¼šhttps://blog.csdn.net/cristiano20/article/details/104309948</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>ResNet</tag>
        <tag>Degradation</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°16â€”â€”å¸¸è§çš„æ¢¯åº¦ä¸‹é™ä¼˜åŒ–å™¨æ•´ç†</title>
    <url>/2022/02/11/ced858ce48dc/</url>
    <content><![CDATA[<h4 id="ä¸€æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•bgd">ä¸€ã€æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•BGDï¼š</h4>
<p>â€‹
æ›´æ–°æ¯ä¸€å‚æ•°éƒ½ç”¨æ‰€æœ‰æ ·æœ¬å»è¿›è¡Œæ›´æ–°ï¼Œåœ¨ä¸‹é¢ä¾‹å­ä¸­ï¼Œæ€»å…±æœ‰nä¸ªå‚æ•°ï¼Œmä¸ªæ ·æœ¬ï¼Œæˆ‘ä»¬å¦‚æœæƒ³è¦æ›´æ–°å‚æ•°$
_j$
ï¼Œå°±éœ€è¦éå†æ‰€æœ‰çš„mä¸ªè®­ç»ƒæ ·æœ¬ï¼Œç„¶åå°†æ‰€æœ‰çš„æ¢¯åº¦ç´¯åŠ èµ·æ¥å–å¹³å‡ï¼Œç„¶åå†è¿›è¡Œæ›´æ–°ã€‚</p>
<p>â€‹ <img
src="https://pic2.zhimg.com/80/v2-890e5ab2843f3b22467a5e6aeef58b59_720w.png" /></p>
<h4 id="äºŒéšæœºæ¢¯åº¦ä¸‹é™æ³•sgd">äºŒã€éšæœºæ¢¯åº¦ä¸‹é™æ³•SGDï¼š</h4>
<p>â€‹
ç”±äºBGDæ¯è·Ÿæ–°ä¸€ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œè¦ç”¨åˆ°æ‰€æœ‰çš„æ ·æœ¬æ•°ï¼Œæ‰€ä»¥è®­ç»ƒé€Ÿåº¦ä¼šéšç€æ ·æœ¬æ•°é‡çš„å¢åŠ è€Œå˜å¾—éå¸¸ç¼“æ…¢ã€‚éšæœºæ¢¯åº¦ä¸‹é™æ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªåŠæ³•è€Œæå‡ºçš„ã€‚å®ƒæ˜¯<strong>åˆ©ç”¨æ¯ä¸ªæ ·æœ¬çš„æŸå¤±å‡½æ•°</strong>å¯¹Î¸æ±‚åå¯¼å¾—åˆ°å¯¹åº”çš„æ¢¯åº¦ï¼Œæ¥æ›´æ–°Î¸ï¼š</p>
<p><img
src="https://pic1.zhimg.com/80/v2-65566b643790ca6c89919fd970f34e2c_720w.png" /></p>
<p>â€‹
éšæœºæ¢¯åº¦ä¸‹é™æ˜¯é€šè¿‡æ¯ä¸ªæ ·æœ¬æ¥è¿­ä»£æ›´æ–°ä¸€æ¬¡ï¼Œå¯¹æ¯”ä¸Šé¢çš„æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼Œè¿­ä»£ä¸€æ¬¡éœ€è¦ç”¨åˆ°æ‰€æœ‰è®­ç»ƒæ ·æœ¬ï¼ˆ<strong>å¾€å¾€å¦‚ä»ŠçœŸå®é—®é¢˜è®­ç»ƒæ•°æ®éƒ½æ˜¯éå¸¸å·¨å¤§</strong>ï¼‰ï¼Œä¸€æ¬¡è¿­ä»£ä¸å¯èƒ½æœ€ä¼˜ï¼Œå¦‚æœè¿­ä»£10æ¬¡çš„è¯å°±éœ€è¦éå†è®­ç»ƒæ ·æœ¬10æ¬¡ã€‚<strong>ä½†æ˜¯ï¼ŒSGDä¼´éšçš„ä¸€ä¸ªé—®é¢˜æ˜¯å™ªéŸ³è¾ƒBGDè¦å¤šï¼Œä½¿å¾—SGDå¹¶ä¸æ˜¯æ¯æ¬¡è¿­ä»£éƒ½å‘ç€æ•´ä½“æœ€ä¼˜åŒ–æ–¹å‘ã€‚</strong></p>
<p>â€‹ ä½†æ˜¯å¯ä»¥å¹¶è¡ŒåŒ–è®¡ç®—ã€‚</p>
<h4
id="ä¸‰min-batchå°æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•-mbgd">ä¸‰ã€<strong>min-batch</strong>å°æ‰¹é‡æ¢¯åº¦ä¸‹é™æ³•
MBGDï¼š</h4>
<p>â€‹ æˆ‘ä»¬å‡è®¾æ¯æ¬¡æ›´æ–°å‚æ•°çš„æ—¶å€™ç”¨åˆ°çš„æ ·æœ¬æ•°ä¸º10ä¸ª</p>
<p><img
src="https://pic2.zhimg.com/80/v2-9d473c89948f1ddc8c4f294c55123f59_720w.png" /></p>
<p>â€‹
<strong>éšæœºå–batchä¸ªæ ·æœ¬ï¼Œ</strong>è€Œä¸æ˜¯1ä¸ªæ ·æœ¬ï¼Œç„¶åå¯¹å‚æ•°è¿›è¡Œæ›´æ–°å³å¯ã€‚</p>
<h4 id="å››å†²é‡ä¼˜åŒ–å™¨momentum">å››ã€å†²é‡ä¼˜åŒ–å™¨ï¼ˆMomentumï¼‰</h4>
<p>â€‹ åœ¨Gradient Descent +
Momentumçš„ç®—æ³•å¦‚ä¸‹ï¼šæœ€å¼€å§‹ç¬¬ä¸€æ­¥å’ŒåŸæ¥çš„ä¸€æ ·ï¼Œä»<span
class="math inline">\(\theta^0\)</span>å¼€å§‹è®¡ç®—æ¢¯åº¦ï¼Œç„¶åæ²¿ç€æ¢¯åº¦åæ–¹å‘ç§»åŠ¨ä¸‹é™ï¼Œè¾¾åˆ°<span
class="math inline">\(\theta^1\)</span>æ—¶ï¼Œæ­¤æ—¶å’ŒåŸå…ˆå°±ä¼šå‘ç”Ÿä¸åŒäº†ï¼Œå…¶ç°åœ¨çš„ç§»åŠ¨ä¼šç»“åˆå‰ä¸€æ­¥çš„movementï¼ˆå³<span
class="math inline">\(m^1\)</span>ï¼‰ä»¥åŠå½“å‰ç‚¹çš„æ¢¯åº¦<span
class="math inline">\(g^1\)</span>ï¼Œè®¡ç®—å‡ºä¸€ä¸ªæ–°çš„ä¸‹é™æ–¹å‘<span
class="math inline">\(m^2\)</span>ï¼Œç„¶åè¿›è¡Œæ›´æ–°ã€‚å¦‚å›¾æ‰€ç¤ºï¼š<span
class="math inline">\(m^2\)</span>æ˜¯ç”± <span
class="math inline">\(m^1\)</span>å’Œ <span
class="math inline">\(-g^1\)</span>ä¸¤ä¸ªå‘é‡ç›¸åŠ æ‰€å¾—åˆ°çš„ã€‚ä»å…¬å¼ä¸Šæ¥è®²å°±æ˜¯$m^1
- g^1 $ï¼Œä¸¤è€…éƒ½æœ‰è‡ªå·±çš„å‚æ•°ï¼Œæ¥æ§åˆ¶å½±å“æ•´ä¸ªæ¢¯åº¦ä¸‹é™æ–¹å‘çš„æ¯”ä¾‹ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114113022761.png" style="zoom:50%;" /></p>
<h4 id="äº”adagradä¼˜åŒ–å™¨auto-learning-rate">äº”ã€AdaGradä¼˜åŒ–å™¨ï¼ˆAuto
Learning Rateï¼‰</h4>
<p>â€‹ å¦‚æœLosså‡½æ•°åœ¨æŸä¸ªæ–¹å‘ä¸Šæ¯”è¾ƒå¹³å¦,æ¢¯åº¦æ¯”è¾ƒå°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¸Œæœ›Learning
Rateæ¯”è¾ƒå¤§ï¼Œå¿«é€Ÿçš„èµ°è¿‡è¿™ä¸€ç‰‡å¹³å¦çš„åŒºåŸŸã€‚å¦‚æœåœ¨æŸä¸ªæ–¹å‘ä¸Šæ¯”è¾ƒé™¡å³­ï¼Œæˆ‘ä»¬å¸Œæœ›Learning
Rateæ¯”è¾ƒå°.</p>
<p>â€‹ å°†åŸæ¥çš„å­¦ä¹ ç‡Î·ä¿®æ”¹æˆ $ <span class="math inline">\(,
è¿™ä¸ª\)</span>_{it}$æ—¢è·Ÿå‚æ•°ç›¸å…³åˆè·Ÿè®­ç»ƒæ­¥éª¤ï¼ˆä¸åŒç‚¹æ‰€åœ¨çš„æ¢¯åº¦ï¼‰ç›¸å…³ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220121170754841.png" /></p>
<p>â€‹
ä»¥ä¸‹æ˜¯Ïƒçš„è®¡ç®—æ–¹å¼ï¼Œé€šè¿‡è®¡ç®—æ¯æ¬¡æ›´æ–°å¾—åˆ°çš„å‚æ•°ç©ºé—´æ‰€åœ¨ç‚¹çš„æ¢¯åº¦çš„Normå€¼çš„å¹³æ–¹çš„å¹³å‡ï¼Œå³RMSæ¥è®¡ç®—æ¯æ­¥ä¸­Ïƒã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114113547513.png" alt="image-20220114113547513" style="zoom:25%;" /></p>
<h4 id="å…­rmspropä¼˜åŒ–å™¨">å…­ã€RMSPropä¼˜åŒ–å™¨</h4>
<p>â€‹ <strong>AdaGradçš„è¿›é˜¶ç‰ˆæœ¬ï¼š</strong></p>
<p>â€‹
å®ƒåœ¨è®¡ç®—æ¯ä¸€æ­¥çš„Ïƒçš„æ—¶å€™ï¼Œç»“åˆäº†ä¸Šä¸€æ­¥çš„Ïƒä»¥åŠè¯¥æ­¥çš„æ¢¯åº¦gï¼ŒåŒæ—¶è¿˜æœ‰ä¸€ä¸ªè¶…å‚æ•°Î±ï¼Œå¯ä»¥è¿›è¡Œè°ƒæ•´ã€‚å¦‚æœæˆ‘ä»¬è°ƒæ•´Î±æ¯”è¾ƒå¤§çš„è¯ï¼Œä»£è¡¨å…¶å‚è€ƒå½“å‰çš„æ¢¯åº¦è¾ƒå¤šï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæ¢¯åº¦çªç„¶äº§ç”Ÿè¾ƒå¤§å˜åŒ–ï¼Œå…¶å°±èƒ½å¿«é€Ÿçš„ååº”è¿‡æ¥ï¼Œå¯¹LearningRateè¿›è¡Œå¿«é€Ÿçš„è°ƒæ•´ã€‚ç›¸è¾ƒäºå‰RMSæ‰€æœ‰å…ˆå‰çš„æ¢¯åº¦éƒ½å¹³å‡æƒå€¼è€ƒè™‘çš„åšæ³•ï¼Œè¿™ä¸€åšæ³•èƒ½å¤Ÿæ›´å¿«é€Ÿçš„å¯¹æ¢¯åº¦çš„å˜åŒ–è¿›è¡Œå“åº”ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114113634056.png" alt="image-20220114113634056" style="zoom:25%;" /></p>
<h4 id="ä¸ƒadamä¼˜åŒ–å™¨">ä¸ƒã€Adamä¼˜åŒ–å™¨ï¼š</h4>
<p>â€‹ ç»¼åˆäº†RMSPropå’ŒMomentumæŠ€æœ¯çš„ä¼˜åŒ–</p>
<p>â€‹ Adamå¯ä»¥ç†è§£ä¸ºåŠ äº†Momentum çš„ RMSprop</p>
<p><img
src="C:\Users\14012\Desktop\d50735fae6cd7b891692d4d0b34087a1d8330e56.jpeg" /></p>
<p>å‚è€ƒèµ„æ–™ï¼šhttps://zhuanlan.zhihu.com/p/25765735</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Gradient Descent</tag>
        <tag>Optimizer</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°17â€”â€”å¸¸è§çš„LossæŸå¤±å‡½æ•°æ•´ç†</title>
    <url>/2022/02/11/a5a0c2a08899/</url>
    <content><![CDATA[<h3
id="ä¸€å¤šç±»åˆ«åˆ†ç±»ä»»åŠ¡å¸¸ç”¨æŸå¤±ä¿¡æ¯ç†µäº¤å‰ç†µç›¸å¯¹ç†µçš„æ¦‚å¿µä¸åº”ç”¨">ä¸€ã€å¤šç±»åˆ«åˆ†ç±»ä»»åŠ¡å¸¸ç”¨æŸå¤±ï¼šä¿¡æ¯ç†µã€äº¤å‰ç†µã€ç›¸å¯¹ç†µçš„æ¦‚å¿µä¸åº”ç”¨</h3>
<h4 id="ä¿¡æ¯ç†µ">1ã€ä¿¡æ¯ç†µ</h4>
<ol type="1">
<li>éšæœºå˜é‡ <span class="math inline">\(x\)</span> çš„è‡ªä¿¡æ¯
(self-information)ï¼Œæè¿°çš„æ˜¯éšæœºå˜é‡çš„æŸä¸ªäº‹ä»¶å‘ç”Ÿæ‰€å¸¦æ¥çš„ä¿¡æ¯é‡ã€‚</li>
</ol>
<p>â€‹ <span class="math inline">\(I(x) = -log(p(x))\)</span></p>
<ol start="2" type="1">
<li><strong>ä¿¡æ¯ç†µ</strong>å³æ‰€æœ‰ä¿¡æ¯é‡çš„æœŸæœ›,å…¶ä¸­<span
class="math inline">\(n\)</span>ä¸ºäº‹ä»¶çš„æ‰€æœ‰å¯èƒ½æ€§ã€‚</li>
</ol>
<figure>
<img
src="https://www.zhihu.com/equation?tex=H%28X%29%3D%E2%88%92%E2%88%91_xp%28x%29log%28p%28x%29%29%3D%E2%88%92%E2%88%91_%7Bi%3D1%7D%5Enp%28x_i%29log%28p%28x_i%29%29"
alt="[å…¬å¼]" />
<figcaption aria-hidden="true">[å…¬å¼]</figcaption>
</figure>
<h4 id="ç›¸å¯¹ç†µ">2ã€ç›¸å¯¹ç†µ</h4>
<p>â€‹ KLæ•£åº¦ï¼Œå¦‚æœå¯¹äºåŒä¸€ä¸ªéšæœºå˜é‡xæœ‰ä¸¤ä¸ªå•ç‹¬çš„æ¦‚ç‡åˆ†å¸ƒ <span
class="math inline">\(p(x)\)</span>å’Œ <span
class="math inline">\(q(x)\)</span>ï¼Œå¯ä»¥ä½¿ç”¨ç›¸å¯¹ç†µæ¥è¡¡é‡è¿™ä¸¤ä¸ªåˆ†å¸ƒçš„å·®å¼‚ã€‚</p>
<figure>
<img
src="https://www.zhihu.com/equation?tex=D_%7BKL%7D%28p%7C%7Cq%29%3D%5Csum_%7Bi%3D1%7D%5Enp%28x_i%29log%28%5Cfrac%7Bp%28x_i%29%7D%7Bq%28x_i%29%7D%29"
alt="[å…¬å¼]" />
<figcaption aria-hidden="true">[å…¬å¼]</figcaption>
</figure>
<p>â€‹
K-Læ•£åº¦å…¶å®æ˜¯<strong>æ•°æ®çš„åŸå§‹åˆ†å¸ƒpå’Œè¿‘ä¼¼åˆ†å¸ƒqä¹‹é—´çš„å¯¹æ•°å·®å€¼çš„æœŸæœ›</strong>ã€‚</p>
<p>â€‹ K-Læ•£åº¦<strong>å¹¶éè·ç¦»ï¼Œå…¶ä¸æ»¡è¶³å¯¹ç§°æ€§</strong>ï¼Œå³ $D_{KL}(p||q) $
<span class="math inline">\(!=\)</span> $D_{KL}(q||p) $</p>
<h4 id="äº¤å‰ç†µ">3ã€äº¤å‰ç†µï¼š</h4>
<figure>
<img
src="https://www.zhihu.com/equation?tex=H%28p%2Cq%29%3D-%5Csum_%7Bi%3D1%7D%5Enp%28x_i%29log%28q%28x_i%29%29"
alt="[å…¬å¼]" />
<figcaption aria-hidden="true">[å…¬å¼]</figcaption>
</figure>
<p>â€‹ åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œå¾€å¾€ç”¨ <span class="math inline">\(p(x)\)</span>
ç”¨æ¥æè¿°<strong>çœŸå®åˆ†å¸ƒ</strong>ï¼Œ <span
class="math inline">\(q(x)\)</span>
ç”¨æ¥æè¿°æ¨¡å‹<strong>é¢„æµ‹çš„åˆ†å¸ƒ</strong>ã€‚</p>
<p>â€‹
è®¡ç®—æŸå¤±ï¼Œç†åº”ä½¿ç”¨ç›¸å¯¹ç†µæ¥è®¡ç®—æ¦‚ç‡åˆ†å¸ƒçš„å·®å¼‚ï¼Œç„¶è€Œç”±ç›¸å¯¹ç†µæ¨å¯¼å‡ºçš„ç»“æœçœ‹ï¼š</p>
<p>â€‹ ç”±äºä¿¡æ¯ç†µæè¿°çš„æ˜¯æ¶ˆé™¤ p (å³çœŸå®åˆ†å¸ƒ)
çš„ä¸ç¡®å®šæ€§æ‰€éœ€ä¿¡æ¯é‡çš„åº¦é‡ï¼Œæ‰€ä»¥å…¶å€¼åº”è¯¥æ˜¯æœ€å°çš„ã€å›ºå®šçš„ã€‚é‚£ä¹ˆï¼š<strong>ä¼˜åŒ–ç›¸å¯¹ç†µä¹Ÿå°±æ˜¯ä¼˜åŒ–äº¤å‰ç†µï¼Œæ‰€ä»¥åœ¨æœºå™¨å­¦ä¹ ä¸­ä½¿ç”¨äº¤å‰ç†µå°±å¯ä»¥äº†</strong></p>
<h4 id="ä¸ºä»€ä¹ˆä½¿ç”¨äº¤å‰ç†µ">4ã€ä¸ºä»€ä¹ˆä½¿ç”¨äº¤å‰ç†µï¼š</h4>
<p>â€‹
åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›æ¨¡å‹åœ¨è®­ç»ƒæ•°æ®ä¸Šå­¦åˆ°çš„<strong>é¢„æµ‹æ•°æ®åˆ†å¸ƒ</strong>ä¸<strong>çœŸå®æ•°æ®åˆ†å¸ƒ</strong>è¶Šç›¸è¿‘è¶Šå¥½ï¼Œä¸Šé¢è®²è¿‡äº†ï¼Œç”¨ç›¸å¯¹ç†µï¼Œä½†æ˜¯ä¸ºäº†ç®€ä¾¿è®¡ç®—ä½¿ç”¨äº¤å‰ç†µå°±å¯ä»¥äº†ã€‚</p>
<p>åœ¨äºŒåˆ†ç±»ä¸­ï¼Œäº¤å‰ç†µæŸå¤±å‡½æ•°å¦‚ä¸‹ï¼š<span
class="math inline">\(y\)</span>æ˜¯å®é™…æ ‡ç­¾ï¼Œ<span
class="math inline">\(\hat y\)</span>
æ˜¯é¢„æµ‹å€¼zç»è¿‡sigmoidå‡½æ•°ä¹‹åçš„é¢„æµ‹æ¦‚ç‡ã€‚</p>
<figure>
<img
src="https://www.zhihu.com/equation?tex=L%3D-%5Bylog+\hat+y%2B(1-y)log+(1-\hat+y)%5D"
alt="[å…¬å¼]" />
<figcaption aria-hidden="true">[å…¬å¼]</figcaption>
</figure>
<p>Sigmoidå‡½æ•°å¦‚ä¸‹ï¼š</p>
<figure>
<img
src="https://www.zhihu.com/equation?tex=\sigma(z)+%3D+\frac%7B1%7D%7B1%2Be%5E%7B-z%7D%7D"
alt="[å…¬å¼]" />
<figcaption aria-hidden="true">[å…¬å¼]</figcaption>
</figure>
<p>â€‹
äº¤å‰ç†µæŸå¤±å‡½æ•°ä¸€èˆ¬ç”¨æ¥ä»£æ›¿å‡æ–¹å·®æŸå¤±å‡½æ•°ä¸sigmoidæ¿€æ´»å‡½æ•°çš„ç»„åˆï¼šå¯¹äºsigmoidå‡½æ•°ï¼Œå½“
<span class="math inline">\(x\)</span>
çš„å–å€¼è¶Šå¤§æˆ–è¶Šå°ï¼Œå‡½æ•°æ›²çº¿å˜å¾—è¶Šå¹³ç¼“ï¼Œæ„å‘³ç€å¯¼æ•°<span
class="math inline">\(\sigma(x)&#39;\)</span>
è¶Šè¶‹è¿‘äº0ã€‚ä»¥å•ä¸ªæ ·æœ¬çš„æ¢¯åº¦ä¸‹é™ä¸ºä¾‹å­ï¼š</p>
<figure>
<img src="https://www.zhihu.com/equation?tex=z%3D+wx%2Bb"
alt="[å…¬å¼]" />
<figcaption aria-hidden="true">[å…¬å¼]</figcaption>
</figure>
<figure>
<img
src="https://www.zhihu.com/equation?tex=\hat%7By%7D%3D+a+%3D\sigma(z)"
alt="[å…¬å¼]" />
<figcaption aria-hidden="true">[å…¬å¼]</figcaption>
</figure>
<figure>
<img
src="https://www.zhihu.com/equation?tex=L_1(y%2Ca)%3D\frac%7B1%7D%7B2%7D(y-a)%5E2"
alt="[å…¬å¼]" />
<figcaption aria-hidden="true">[å…¬å¼]</figcaption>
</figure>
<figure>
<img
src="https://www.zhihu.com/equation?tex=L_2%28y%2Ca%29%3D-%28ylog%28a%29%2B%281-y%29log%281-a%29%29"
alt="[å…¬å¼]" />
<figcaption aria-hidden="true">[å…¬å¼]</figcaption>
</figure>
<p>â€‹
å‰ä¸¤ä¸ªå…¬å¼æ˜¯å‰å‘ä¼ æ’­è¿‡ç¨‹ä¸­çº¿æ€§çš„éƒ¨åˆ†ï¼Œå’Œéçº¿æ€§çš„éƒ¨åˆ†ã€‚L1æ˜¯MSEæŸå¤±å‡½æ•°ï¼ŒL2æ˜¯äº¤å‰ç†µæŸå¤±å‡½æ•°ã€‚ç„¶åæˆ‘ä»¬åˆ†åˆ«ç”¨L1å’ŒL2å¯¹å‚æ•°wå’Œbï¼Œåˆ©ç”¨é“¾å¼æ³•åˆ™æ±‚è§£æ¢¯åº¦ã€‚</p>
<figure>
<img
src="https://www.zhihu.com/equation?tex=\frac%7B\partial+L_1(y%2Ca)%7D%7B\partial+w%7D%3D-%7Cy-\sigma(z)%7C\sigma&#39;(z)x"
alt="[å…¬å¼]" />
<figcaption aria-hidden="true">[å…¬å¼]</figcaption>
</figure>
<figure>
<img
src="https://www.zhihu.com/equation?tex=\frac%7B\partial+L_1(y%2Ca)%7D%7B\partial+b%7D%3D-%7Cy-\sigma(z)%7C\sigma&#39;(z)"
alt="[å…¬å¼]" />
<figcaption aria-hidden="true">[å…¬å¼]</figcaption>
</figure>
<figure>
<img
src="https://www.zhihu.com/equation?tex=\frac%7B\partial+L_2(y%2Ca)%7D%7B\partial+w%7D%3Dx%5B\sigma(z)-y%5D"
alt="[å…¬å¼]" />
<figcaption aria-hidden="true">[å…¬å¼]</figcaption>
</figure>
<figure>
<img
src="https://www.zhihu.com/equation?tex=\frac%7B\partial+L_2(y%2Ca)%7D%7B\partial+b%7D%3D\sigma(z)-y"
alt="[å…¬å¼]" />
<figcaption aria-hidden="true">[å…¬å¼]</figcaption>
</figure>
<p>â€‹
å¯ä»¥çœ‹å‡ºï¼Œ<strong>å‡æ–¹å·®</strong>å¯¹å‚æ•°çš„åå¯¼çš„ç»“æœéƒ½<strong>ä¹˜äº†sigmoidçš„å¯¼æ•°</strong>
<span class="math inline">\(\sigma(z)&#39;\)</span>
ï¼Œè€Œä¹‹å‰çœ‹å›¾å‘ç°sigmoidå¯¼æ•°åœ¨å…¶å˜é‡å€¼å¾ˆå¤§æˆ–å¾ˆå°æ—¶è¶‹è¿‘äº0ï¼Œæ‰€ä»¥åå¯¼æ•°å¾ˆæœ‰å¯èƒ½æ¥è¿‘äº0ã€‚åè§‚<strong>äº¤å‰ç†µ</strong>å¯¹å‚æ•°çš„åå¯¼å°±<strong>æ²¡æœ‰sigmoidå¯¼æ•°</strong>ï¼Œæ‰€ä»¥ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜ã€‚<strong>è¿™å°±æ˜¯é€‰æ‹©äº¤å‰ç†µè€Œä¸é€‰æ‹©å‡æ–¹å·®çš„åŸå› ã€‚</strong></p>
<p><strong>åˆ†ç±»ä»»åŠ¡çš„å­¦ä¹ è¿‡ç¨‹ï¼š</strong></p>
<p>â€‹
ç”¨ç¥ç»ç½‘ç»œæœ€åä¸€å±‚è¾“å‡ºçš„æƒ…å†µï¼Œæ¥çœ‹ä¸€çœ¼æ•´ä¸ªæ¨¡å‹é¢„æµ‹ã€è·å¾—æŸå¤±å’Œå­¦ä¹ çš„æµç¨‹ï¼š</p>
<ol type="1">
<li>ç¥ç»ç½‘ç»œæœ€åä¸€å±‚å¾—åˆ°æ¯ä¸ªç±»åˆ«çš„å¾—åˆ†<strong>scoresï¼ˆä¹Ÿå«logitsï¼‰</strong>ï¼›</li>
<li>è¯¥å¾—åˆ†ç»è¿‡<strong>sigmoid(æˆ–softmax)å‡½æ•°</strong>è·å¾—æ¦‚ç‡è¾“å‡ºï¼›</li>
<li>æ¨¡å‹é¢„æµ‹çš„ç±»åˆ«æ¦‚ç‡è¾“å‡ºä¸çœŸå®ç±»åˆ«çš„one
hotå½¢å¼è¿›è¡Œäº¤å‰ç†µæŸå¤±å‡½æ•°çš„è®¡ç®—ã€‚</li>
</ol>
<h3 id="äºŒå¤šæ ‡ç­¾åˆ†ç±»ä»»åŠ¡">äºŒã€å¤šæ ‡ç­¾åˆ†ç±»ä»»åŠ¡ï¼š</h3>
<p>â€‹
åœ¨å¤šæ ‡ç­¾åˆ†ç±»ä»»åŠ¡ä¸­ï¼Œä¸€èˆ¬é‡‡ç”¨<strong>sigmoid</strong>ä½œä¸ºè¾“å‡ºå±‚çš„æ¿€æ´»å‡½æ•°ï¼Œä½¿ç”¨
binary_crossentropyï¼ˆäºŒåˆ†ç±»äº¤å‰ç†µæŸå¤±å‡½æ•°ï¼‰ä½œä¸ºæŸå¤±å‡½æ•°. <span
class="math display">\[
\sigma(x) = \frac{1}{1 + e^{-x}}
\]</span> â€‹ å…¶ä¸­<span class="math inline">\(a\)</span>è¡¨ç¤ºä½¿ç”¨ sigmoid
å‡½æ•°æ¿€æ´»è¾“å‡ºå±‚å¯¹åº”çš„ç¥ç»å…ƒï¼Œ<strong>æ­¤æ—¶æœ€åä¸€å±‚çš„è¾“å‡ºå°±ä¸èƒ½çœ‹æˆä¸€ä¸ªåˆ†å¸ƒäº†ï¼Œå› ä¸ºåŠ èµ·æ¥ä¸ä¸º
1ï¼Œç°åœ¨æŠŠè¾“å‡ºå±‚æ¯ä¸ªç¥ç»å…ƒçœ‹ä½œæ˜¯ä¸€ä¸ªäºŒé¡¹åˆ†å¸ƒï¼Œ
è¿™ç›¸å½“äºå°†ä¸€ä¸ªå¤šæ ‡ç­¾é—®é¢˜è½¬åŒ–ä¸ºäº†åœ¨æ¯ä¸ªæ ‡ç­¾ä¸Šçš„äºŒåˆ†ç±»é—®é¢˜ã€‚</strong></p>
<p>â€‹ <img
src="https://www.zhihu.com/equation?tex=L_2(y%2Ca)%3D-(ylog(a)%2B(1-y)log(1-a))"
alt="[å…¬å¼]" /></p>
<p>â€‹ è®¡ç®—ä¸€ä¸ªæ ·æœ¬å„ä¸ªæ ‡ç­¾çš„æŸå¤±ï¼Œç„¶åå–å¹³å‡å€¼ï¼Œå¾—åˆ°æœ€åçš„æŸå¤±ã€‚</p>
<h3 id="ä¸‰å›å½’ä»»åŠ¡å¸¸ç”¨æŸå¤±">ä¸‰ã€å›å½’ä»»åŠ¡å¸¸ç”¨æŸå¤±ï¼š</h3>
<h4 id="l1-loss-å¹³å‡ç»å¯¹è¯¯å·®">1ã€L1 Loss å¹³å‡ç»å¯¹è¯¯å·®</h4>
<p>â€‹ <strong>ç›®æ ‡å˜é‡å’Œé¢„æµ‹å˜é‡ä¹‹é—´ç»å¯¹å·®å€¼ä¹‹å’Œ</strong></p>
<p>â€‹ MAEæ›²çº¿è¿ç»­ï¼Œä½†æ˜¯åœ¨<em>y</em>âˆ’<em>f</em>(<em>x</em>)=0å¤„ä¸å¯å¯¼ã€‚è€Œä¸”
MAE
å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ¢¯åº¦éƒ½æ˜¯ç›¸ç­‰çš„ï¼Œè¿™æ„å‘³ç€å³ä½¿å¯¹äºå°çš„æŸå¤±å€¼ï¼Œå…¶æ¢¯åº¦ä¹Ÿæ˜¯å¤§çš„ã€‚è¿™ä¸åˆ©äºå‡½æ•°çš„æ”¶æ•›å’Œæ¨¡å‹çš„å­¦ä¹ ã€‚ä½†æ˜¯ï¼Œæ— è®ºå¯¹äºä»€ä¹ˆæ ·çš„è¾“å…¥å€¼ï¼Œéƒ½æœ‰ç€ç¨³å®šçš„æ¢¯åº¦ï¼Œä¸ä¼šå¯¼è‡´æ¢¯åº¦çˆ†ç‚¸é—®é¢˜ï¼Œå…·æœ‰è¾ƒä¸ºç¨³å¥æ€§çš„è§£ã€‚</p>
<p>â€‹
MAEæœ‰ä¸ªä¼˜ç‚¹å°±æ˜¯ï¼Œå¯¹äºç¦»ç¾¤ç‚¹ä¸é‚£ä¹ˆæ•æ„Ÿã€‚å› ä¸ºMAEè®¡ç®—çš„æ˜¯è¯¯å·®<em>y</em>âˆ’<em>f</em>(<em>x</em>)
çš„ç»å¯¹å€¼ï¼Œå¯¹äºä»»æ„å¤§å°çš„å·®å€¼ï¼Œå…¶æƒ©ç½šéƒ½æ˜¯å›ºå®šçš„ã€‚<strong>é’ˆå¯¹å¸¦æœ‰ç¦»ç¾¤ç‚¹çš„æ•°æ®ï¼ŒMAEçš„æ•ˆæœè¦å¥½äºMSEã€‚</strong></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_02_12_11_35_15_642.png" style="zoom:50%;" /></p>
<h4 id="l2-loss-å‡æ–¹è¯¯å·®mse">3ã€L2 Loss å‡æ–¹è¯¯å·®MSE</h4>
<p>â€‹
MSEçš„å‡½æ•°æ›²çº¿å…‰æ»‘ã€è¿ç»­ï¼Œå¤„å¤„å¯å¯¼ï¼Œä¾¿äºä½¿ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œæ˜¯ä¸€ç§å¸¸ç”¨çš„æŸå¤±å‡½æ•°ã€‚
è€Œä¸”ï¼Œéšç€è¯¯å·®çš„å‡å°ï¼Œæ¢¯åº¦ä¹Ÿåœ¨å‡å°ï¼Œè¿™æœ‰åˆ©äºæ”¶æ•›ï¼Œå³ä½¿ä½¿ç”¨å›ºå®šçš„å­¦ä¹ é€Ÿç‡ï¼Œä¹Ÿèƒ½è¾ƒå¿«çš„æ”¶æ•›åˆ°æœ€å°å€¼ã€‚</p>
<p>â€‹ å½“<span class="math inline">\(y\)</span>å’Œ<span
class="math inline">\(f(x)\)</span>ä¹Ÿå°±æ˜¯çœŸå®å€¼å’Œé¢„æµ‹å€¼çš„å·®å€¼å¤§äº1æ—¶ï¼Œä¼šæ”¾å¤§è¯¯å·®ï¼›è€Œå½“å·®å€¼å°äº1æ—¶ï¼Œåˆ™ä¼šç¼©å°è¯¯å·®ï¼Œè¿™æ˜¯å¹³æ–¹è¿ç®—å†³å®šçš„ã€‚MSEå¯¹äºè¾ƒå¤§çš„è¯¯å·®ï¼ˆ&gt;1ï¼‰ç»™äºˆè¾ƒå¤§çš„æƒ©ç½šï¼Œè¾ƒå°çš„è¯¯å·®ï¼ˆ&lt;1ï¼‰ç»™äºˆè¾ƒå°çš„æƒ©ç½šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>å¯¹ç¦»ç¾¤ç‚¹æ¯”è¾ƒæ•æ„Ÿï¼Œå—å…¶å½±å“è¾ƒå¤§ã€‚</strong></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_02_12_11_35_12_56.png" style="zoom:50%;" /></p>
<h4 id="smooth-l1-loss">3ã€Smooth L1 Loss</h4>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_02_12_12_04_33_822.png" style="zoom: 50%;" /></p>
<p>â€‹
ä»ä¸‹å›¾ç§ä¸­å¯ä»¥çœ‹å‡ºï¼Œè¯¥å‡½æ•°å®é™…æ˜¯ä¸€ä¸ªåˆ†æ®µå‡½æ•°ï¼Œæ—¢è§£å†³äº†L1ä¸å…‰æ»‘çš„é—®é¢˜ï¼Œä¹Ÿè§£å†³äº†L2å®¹æ˜“äº§ç”Ÿæ¢¯åº¦çˆ†ç‚¸çš„é—®é¢˜ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_02_12_12_05_00_718.png" style="zoom:50%;" /></p>
<p><strong>Smooth L1çš„ä¼˜ç‚¹</strong></p>
<ul>
<li>ç›¸æ¯”äºL1æŸå¤±å‡½æ•°ï¼Œå¯ä»¥æ”¶æ•›å¾—æ›´å¿«ã€‚</li>
<li>ç›¸æ¯”äºL2æŸå¤±å‡½æ•°ï¼Œå¯¹ç¦»ç¾¤ç‚¹ã€å¼‚å¸¸å€¼ä¸æ•æ„Ÿï¼Œæ¢¯åº¦å˜åŒ–ç›¸å¯¹æ›´å°ï¼Œè®­ç»ƒæ—¶ä¸å®¹æ˜“è·‘é£ã€‚</li>
</ul>
<p><strong>å‚è€ƒï¼š</strong></p>
<p>https://zhuanlan.zhihu.com/p/35709485</p>
<p>https://www.zhihu.com/question/336677048/answer/761385679</p>
<p>https://www.cnblogs.com/wangguchangqing/p/12021638.html</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Loss Function</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°18â€”â€”å¸¸è§çš„ä½ç½®ç¼–ç Position Encodingæ–¹æ³•</title>
    <url>/2022/02/15/c20d8f810e24/</url>
    <content><![CDATA[<h3 id="ä¸€å›ºå®šçš„ç»å¯¹ä½ç½®ç¼–ç ">ä¸€ã€å›ºå®šçš„ç»å¯¹ä½ç½®ç¼–ç ï¼š</h3>
<p>â€‹
åœ¨Transformerä¸­ä½¿ç”¨çš„å°±æ˜¯ç»å¯¹ä½ç½®ç¼–ç ï¼Œæˆ‘ä»¬ä¼šå°†è¾“å…¥çš„åºåˆ—é¦–å…ˆé€šè¿‡Linear
Embeddingçš„å½¢å¼ï¼Œç¼–ç æˆ $ n d_{model}$ çš„å½¢å¼ï¼Œ<span
class="math inline">\(n\)</span> ä»£è¡¨tokençš„æ•°é‡ï¼Œ<span
class="math inline">\(d_{model}\)</span> ä»£è¡¨ä¸€ä¸ªtokençš„ç»´åº¦ã€‚</p>
<p>â€‹
ç„¶åæˆ‘ä»¬ä¼šç”Ÿæˆä½ç½®ç¼–ç ï¼Œç»å¯¹ä½ç½®ç¼–ç æ˜¯å›ºå®šå€¼ï¼Œå…¶èƒ½å¤Ÿæ”¯æŒè¾ƒé•¿çš„åºåˆ—ï¼Œæˆ‘ä»¬å‡è®¾æ”¯æŒæœ€é•¿çš„åºåˆ—é•¿åº¦ä¸º5000ï¼Œé‚£ä¹ˆå°±åº”å½“å…ˆç”Ÿæˆä¸€ä¸ªç»´åº¦ä¸º
$ 5000 d_{model}$ çš„çŸ©é˜µï¼Œå…·ä½“å…¬å¼å¦‚ä¸‹ï¼šï¼ˆä¸å”¯ä¸€ï¼‰</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220215094001163.png" /></p>
<p>â€‹ ä½¿ç”¨å¦‚ä¸Šæ‰€è¿°çš„å…¬å¼ï¼Œä»£è¡¨ä¸åŒé¢‘ç‡çš„æ­£å¼¦å’Œä½™å¼¦å‡½æ•°è¿›è¡Œè¡¨ç¤ºï¼šposä»£è¡¨
ç¬¬1ä¸ªç»´åº¦ï¼Œä¹Ÿå°±æ˜¯5000é‚£ä¸ªç»´åº¦ï¼Œ iä»£è¡¨<span
class="math inline">\(d_{model}\)</span>é‚£ä¸ªç»´åº¦ï¼Œå¯¹äºä¸€ä¸ªå›ºå®šçš„<span
class="math inline">\(i\)</span>è€Œè¨€ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œå…¶å°±æ˜¯å…³äºposçš„æ­£å¼¦æˆ–ä½™å¼¦å‡½æ•°ï¼Œå¯¹äºä¸åŒçš„iè€Œè¨€ï¼Œå°±æ˜¯ä¸åŒçš„é¢‘ç‡è€Œå·²ã€‚è¿™æ ·å­é¢„å…ˆè®¡ç®—å¥½ä¸€ä¸ª
$ 5000 d_{model}$ çš„çŸ©é˜µä»¥åï¼š</p>
<p>â€‹ ç­‰åˆ°è¦ä½¿ç”¨äº†ï¼Œæˆ‘ä»¬æ£€æµ‹åˆ°tokençš„æ•°é‡æ˜¯nï¼Œé‚£ä¹ˆå°±ç›´æ¥å–å‰æ•´ä¸ªçŸ©é˜µçš„å‰ $
n d_{model}$åˆ‡ç‰‡å°±å¯ä»¥ï¼Œç„¶åä¸åºåˆ—çš„Linear Embeddingç›¸åŠ å³å¯ã€‚</p>
<h3
id="äºŒå¯å­¦ä¹ çš„ç»å¯¹ä½ç½®ç¼–ç -learned-positional-embedding">äºŒã€å¯å­¦ä¹ çš„ç»å¯¹ä½ç½®ç¼–ç 
Learned Positional Embeddingï¼š</h3>
<p>â€‹ <strong>ç›´æ¥å¯¹ä¸åŒçš„ä½ç½®éšæœºåˆå§‹åŒ–ä¸€ä¸ªpostion
embedding</strong>ï¼ŒåŠ åˆ°word
embeddingä¸Šè¾“å…¥æ¨¡å‹ï¼Œ<strong>ä½œä¸ºå‚æ•°è¿›è¡Œè®­ç»ƒã€‚</strong>ä½¿ç”¨Learned
Positional
Embeddingç¼–ç ï¼Œä½ç½®ä¹‹é—´æ²¡æœ‰çº¦æŸå…³ç³»ï¼Œæˆ‘ä»¬åªèƒ½æœŸå¾…å®ƒéšå¼åœ°å­¦åˆ°ï¼Œæ˜¯å¦æœ‰æ›´åˆç†çš„æ–¹æ³•èƒ½å¤Ÿæ˜¾ç¤ºçš„è®©æ¨¡å‹ç†è§£ä½ç½®çš„ç›¸å¯¹å…³ç³»å‘¢ï¼Ÿè§åï¼š</p>
<h3 id="ä¸‰ç›¸å¯¹ä½ç½®ç¼–ç -rpe">ä¸‰ã€ç›¸å¯¹ä½ç½®ç¼–ç  RPEï¼š</h3>
<p>â€‹ åœ¨Swin
Transformerä¸­ï¼Œä½¿ç”¨çš„å°±æ˜¯ç›¸å¯¹ä½ç½®ç¼–ç ï¼Œä½¿ç”¨ç»å¯¹ä½ç½®ç¼–ç ï¼Œä¸åŒä½ç½®å¯¹åº”çš„positional
embeddingå›ºç„¶ä¸åŒï¼Œä½†æ˜¯ä½ç½®1å’Œä½ç½®2çš„è·ç¦»æ¯”ä½ç½®3å’Œä½ç½®10çš„è·ç¦»æ›´è¿‘ï¼Œä½ç½®1å’Œä½ç½®2ä¸ä½ç½®3å’Œä½ç½®4éƒ½åªç›¸å·®1ï¼Œè¿™äº›å…³äºä½ç½®çš„ç›¸å¯¹å«ä¹‰æ¨¡å‹èƒ½å¤Ÿé€šè¿‡ç»å¯¹ä½ç½®ç¼–ç getåˆ°å—ï¼Ÿå¹¶ä¸å¤ªè¡Œã€‚</p>
<p>â€‹ åœ¨Swin
Transformerä¸­ï¼Œè¿™ç§ç›¸å¯¹ä½ç½®ç¼–ç åœ¨è®¡ç®—Attentionçš„æ—¶å€™è¿›è¡Œåº”ç”¨ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120718204.png" /></p>
<p>â€‹
ç›¸å¯¹ä½ç½®åå·®æ˜¯æ€ä¹ˆç¡®å®šçš„å‘¢ï¼Ÿå¦‚ä¸‹æ‰€ç¤ºï¼Œå‡è®¾æˆ‘ä»¬çš„ç‰¹å¾å›¾æ˜¯å·¦ä¾§çš„2*2çš„æ ¼å­ï¼Œä¸‹æ–¹æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„ç»å¯¹ä½ç½®ç´¢å¼•ï¼Œç›¸å¯¹ä½ç½®ç´¢å¼•å¦‚å³ä¾§ä¸Šé¢ä¸€æ’æ‰€ç¤ºï¼Œå…¶å®å°±æ˜¯å½“å‰è®¡ç®—æ ¼å­çš„ç»å¯¹ä½ç½®ç´¢å¼•å‡å»å…¶ä»–æ ¼å­çš„ç»å¯¹ä½ç½®ç´¢å¼•ã€‚ç„¶åå°†å››ä¸ªåƒç´ çš„ç›¸å¯¹ä½ç½®ç´¢å¼•å±•å¼€åæ‹¼æ¥åœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ–°çš„çŸ©é˜µã€‚è¿™ä¸ªçŸ©é˜µå°±æ˜¯äºŒç»´çš„ç›¸å¯¹ä½ç½®ç´¢å¼•çŸ©é˜µã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/iiioio.png" />
åœ¨ä½œè€…çš„æºç ä¸­ï¼Œå…¶ä½¿ç”¨çš„æ˜¯1ç»´çš„çš„ç›¸å¯¹ä½ç½®ç´¢å¼•çŸ©é˜µï¼Œæˆ‘ä»¬ä¸èƒ½ç®€å•çš„å°†x,yç›¸åŠ ï¼Œä¸ç„¶å¯èƒ½å¯¼è‡´ä¸åŒä½ç½®çš„ç›¸å¯¹ä½ç½®ç´¢å¼•ä¸€è‡´ï¼Œå¯¼è‡´å‡ºç°é—®é¢˜ã€‚æ‰€ä»¥ä½œè€…åœ¨æºç ä¸­ç»è¿‡äº†ä¸€ä¸ªç®€å•å¤„ç†ã€‚æˆ‘ä»¬å…ˆæŠŠæ‰€æœ‰çš„è¡Œåˆ—æ ‡åŠ ä¸ŠM-1ï¼Œç„¶åå†å°†è¡Œæ ‡ä¹˜2M-1ï¼Œç„¶åå†å°†è¡Œåˆ—æ ‡ç›¸åŠ ï¼Œå¾—åˆ°çš„çŸ©é˜µã€‚</p>
<p>â€‹ ç„¶åæˆ‘ä»¬éœ€è¦æŠŠRelative Position Indexé€šè¿‡ä¸€å¼ Bias
Tableæ˜ å°„æˆrelative position
biasæ‰æ˜¯ç”¨äºè®¡ç®—Self-Attentionæœ€ç»ˆç”¨äºè®¡ç®—çš„Biaså€¼ï¼Œä¹Ÿå°±æ˜¯å…¬å¼é‡Œçš„çŸ©é˜µBã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120814669.png" /></p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Position Encoding</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°19â€”â€”EMAæŒ‡æ•°æ»‘åŠ¨å¹³å‡åŸç†</title>
    <url>/2022/03/27/6de89f1d1ae9/</url>
    <content><![CDATA[<p>â€‹ åœ¨è®­ç»ƒç¥ç»ç½‘ç»œæ—¶ï¼Œé€šå¸¸ä¼šä½¿ç”¨ä¸€ä¸ªå« Exponential Moving Average (EMA)
çš„æ–¹æ³•ï¼Œä¸­æ–‡åå«æŒ‡æ•°æ»‘åŠ¨å¹³å‡ã€‚å®ƒçš„æ„ä¹‰åœ¨äºåˆ©ç”¨æ»‘åŠ¨å¹³å‡çš„å‚æ•°æ¥<strong>æé«˜æ¨¡å‹åœ¨æµ‹è¯•æ•°æ®ä¸Šçš„å¥å£®æ€§</strong>ã€‚</p>
<h4 id="ä¸€ä»€ä¹ˆæ˜¯æ»‘åŠ¨å¹³å‡">ä¸€ã€ä»€ä¹ˆæ˜¯æ»‘åŠ¨å¹³å‡ï¼Ÿ</h4>
<p>â€‹ æ»‘åŠ¨å¹³å‡(exponential moving
average)ï¼Œæˆ–è€…å«åšæŒ‡æ•°åŠ æƒå¹³å‡(exponentially weighted moving
average)ï¼Œå¯ä»¥ç”¨æ¥ä¼°è®¡å˜é‡çš„å±€éƒ¨å‡å€¼ï¼Œä½¿å¾—å˜é‡çš„æ›´æ–°ä¸ä¸€æ®µæ—¶é—´å†…çš„å†å²å–å€¼æœ‰å…³ã€‚</p>
<p>â€‹ é¦–å…ˆæˆ‘ä»¬å‡è®¾ä¸€ä¸ªè®­ç»ƒå‚æ•°aï¼Œå®ƒåœ¨ä¸åŒçš„epochç»“æŸåçš„å€¼åˆ†åˆ«ä¸ºï¼š <span
class="math display">\[
a_1,a_2,a_3,â€¦â€¦,a_t
\]</span> â€‹ <span
class="math inline">\(a_1\)</span>ä»£è¡¨ç¬¬1è½®epochè¿­ä»£ç»“æŸåï¼Œå¯è®­ç»ƒå‚æ•°açš„å€¼ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<p>â€‹ ç„¶åï¼Œæˆ‘ä»¬å‡è®¾ä¸åŒçš„epochç»“æŸåï¼Œæ»‘åŠ¨å¹³å‡çš„å€¼åˆ†åˆ«ä¸ºï¼š <span
class="math display">\[
mv_1,mv_2,mv_3,â€¦â€¦,mv_t
\]</span> â€‹ <span
class="math inline">\(mv_1\)</span>ä»£è¡¨ç¬¬1è½®epochè¿­ä»£ç»“æŸåï¼Œæ»‘åŠ¨å¹³å‡mvçš„å€¼ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<p>â€‹ æ»‘åŠ¨å¹³å‡è®¡ç®—çš„é€’æ¨å¼å¦‚ä¸‹ï¼š <span class="math display">\[
mv_t = decay * mv_{t-1} + (1-decay)*a_t
\]</span> â€‹
å…¶ä¸­ï¼Œdecayä¸ºè¡°å‡ç‡ï¼Œç”¨äºæ§åˆ¶æ¨¡å‹æ›´æ–°çš„é€Ÿåº¦ã€‚é€’æ¨å¼ä¸­å…¶å®å°±æ˜¯åˆ©ç”¨åŠ æƒçš„æ€æƒ³ï¼ŒæŠŠæ–°çš„aå’Œå…ˆå‰çš„å¹³å‡ï¼Œåšäº†ä¸€ä¸ªç›¸åŠ ã€‚æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå†å¾ˆå¤šè½®ä¹‹åï¼Œæœ‰äº›ç¦»<span
class="math inline">\(a_t\)</span>å¾ˆè¿œçš„a,å®ƒå·²ç»ä¹˜äº†å¾ˆå¤šédecayï¼Œç›¸å½“äºæƒé‡ä¸º0ï¼Œä¹Ÿå°±æ˜¯ä¸å½±å“æœ€æ–°çš„<span
class="math inline">\(mv_t\)</span>çš„å€¼äº†ã€‚</p>
<p>â€‹ ä»ç›´è§‚æ„ä¹‰ä¸Šæ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ<span
class="math inline">\(a_1,a_2,a_3,â€¦â€¦,a_t\)</span>
çœ‹ä½œæ˜¯tä¸ªä½ç½®ï¼Œç„¶åæƒ³è±¡æœ‰ä¸€ä¸ªé•¿åº¦ä¸ºkçš„çª—å£ï¼Œä»æœ€å‰é¢å¼€å§‹å‘åæ»‘åŠ¨ã€‚ä¸ºäº†æ–¹ä¾¿è¯´æ˜ï¼Œæˆ‘ä»¬å…ˆå‡è®¾k=3ã€‚æœ€å¼€å§‹çš„æ—¶å€™ï¼Œçª—å£æŠŠ<span
class="math inline">\(a_1\)</span>æ¶µæ‹¬åœ¨å†…ï¼Œç„¶åä¸€ä¸ªepochè¿‡åçª—å£å³ç§»ï¼Œç°åœ¨çª—å£å†…æœ‰<span
class="math inline">\(a_1,a_2\)</span>ï¼Œå†ä¸€ä¸ªepochè¿‡åçª—å£å†å³ç§»ï¼Œç°åœ¨çª—å£å†…æœ‰<span
class="math inline">\(a_1,a_2,a_3\)</span>ï¼Œå†ä¸€ä¸ªepochè¿‡åçª—å£å†å³ç§»ï¼Œæ­¤æ—¶ç”±äºçª—å£é•¿åº¦ä¸º3ï¼Œæ‰€ä»¥<span
class="math inline">\(a_1\)</span>å°±ä¸åœ¨çª—å£å†…äº†ï¼Œçª—å£å†…çš„å…ƒç´ ä¸º<span
class="math inline">\(a_2,a_3,a_4\)</span>ï¼Œä»å…¬å¼ä¸Šæ¥è®²å°±æ˜¯åœ¨æ­¤æ—¶ï¼Œç”±äº<span
class="math inline">\(a_1\)</span>å·²ç»ä¹˜äº†è¾ƒå¤šéæ•°çš„decayè¡°å‡ç³»æ•°äº†ï¼Œæ‰€ä»¥å…¶çš„ç³»æ•°æ¥è¿‘äº0äº†ï¼Œä¸ä¼šå†å½±å“çª—å£å†…è®¡ç®—çš„å€¼äº†ã€‚</p>
<p>â€‹ æ•…æ­¤ç§°ä¸ºæ»‘åŠ¨å¹³å‡ã€‚</p>
<h4 id="äºŒæ›´ä¸ºå…¬å¼åŒ–çš„è§£è¯»">äºŒã€æ›´ä¸ºå…¬å¼åŒ–çš„è§£è¯»ï¼š</h4>
<p>EMA åœ¨å®ç°æ—¶å¦‚ä¸‹æ‰€è¿°ï¼š</p>
<p>â€‹ Exponential Moving Average å¯¹æ¯ä¸€ä¸ªå˜é‡ï¼ˆ <span
class="math inline">\(variable\)</span> ï¼‰ä¼šç»´æŠ¤ä¸€ä¸ªå½±å­å˜é‡ï¼ˆ <span
class="math inline">\(shadow\_variable\)</span>
ï¼‰ï¼Œè¿™ä¸ªå½±å­å˜é‡çš„åˆå§‹å€¼å°±æ˜¯ç›¸åº”å˜é‡çš„åˆå§‹å€¼ï¼Œè€Œæ¯æ¬¡è¿è¡Œå˜é‡æ›´æ–°æ—¶ï¼Œå½±å­å˜é‡çš„å€¼ä¼šæ›´æ–°ä¸ºï¼š
<span class="math display">\[
shadow\_variable = decay * shadow\_variable + (1-decay) * variable
\]</span> â€‹ å…¶ä¸­ï¼š<span
class="math inline">\(variable\)</span>ä¸ºæ¯ä¸€è½®ç»“æŸæ—¶ï¼Œè®­ç»ƒå‚æ•°çš„å€¼ï¼›<span
class="math inline">\(shadow\_variable\)</span>ä¸ºå½±å­å˜é‡ï¼›<span
class="math inline">\(decay\)</span>ä¸ºè¡°å‡é€Ÿç‡ã€‚</p>
<p>â€‹ decay å†³å®šäº†å½±å­å˜é‡çš„æ›´æ–°é€Ÿåº¦ï¼Œdecay
è¶Šå¤§å½±å­å˜é‡è¶Šè¶‹äºç¨³å®šã€‚åœ¨å®é™…è¿ç”¨ä¸­ï¼Œdecayä¸€èˆ¬ä¼šè®¾æˆéå¸¸æ¥è¿‘ 1
çš„æ•°ï¼ˆæ¯”å¦‚0.999æˆ–0.9999ï¼‰ã€‚</p>
<p>â€‹ ä¸ºäº†ä½¿å¾—å½±å­å˜é‡åœ¨è®­ç»ƒå‰æœŸå¯ä»¥æ›´æ–°æ›´å¿«ï¼ŒExponential Moving Average
è¿˜æä¾›äº† num_updates å‚æ•°åŠ¨æ€è®¾ç½® decay çš„å¤§å°ã€‚å¦‚æœåœ¨åˆå§‹åŒ– Exponential
Moving Average æ—¶æä¾›äº† num_updates å‚æ•°ï¼Œé‚£ä¹ˆæ¯æ¬¡ä½¿ç”¨çš„è¡°å‡ç‡å°†æ˜¯ï¼š
<span class="math display">\[
decay = min\{decay,\frac{1+num\_updates}{10+num\_updates}\}
\]</span></p>
<h4 id="ä¸‰ä»€ä¹ˆæ—¶å€™ç”¨åˆ°ema">ä¸‰ã€ä»€ä¹ˆæ—¶å€™ç”¨åˆ°EMAï¼Ÿ</h4>
<p>è¯·æ³¨æ„ï¼š</p>
<p>â€‹ <strong>EMAä¸å‚ä¸å®é™…çš„è®­ç»ƒè¿‡ç¨‹ï¼Œæ˜¯ç”¨åœ¨æµ‹è¯•è¿‡ç¨‹çš„</strong>ï¼</p>
<p>â€‹ <strong>EMAä¸å‚ä¸å®é™…çš„è®­ç»ƒè¿‡ç¨‹ï¼Œæ˜¯ç”¨åœ¨æµ‹è¯•è¿‡ç¨‹çš„</strong>ï¼</p>
<p>â€‹ <strong>EMAä¸å‚ä¸å®é™…çš„è®­ç»ƒè¿‡ç¨‹ï¼Œæ˜¯ç”¨åœ¨æµ‹è¯•è¿‡ç¨‹çš„</strong>ï¼</p>
<p>â€‹
åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼ŒEMAåªæ˜¯ä»¥ä¸€ä¸ªè®°å½•è€…çš„èº«ä»½ï¼Œåœ¨è¿›è¡Œè®°å½•ã€‚å®é™…çš„å®ç°ä¸­ï¼Œå¦‚æœä½ åœ¨æ­£å¸¸è®­ç»ƒçš„ç½‘ç»œæ˜¯network['C']ï¼Œé‚£ä¹ˆä½ å¯ä»¥å†å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„ç½‘ç»œï¼Œå«åšnetwork['C_EMA'],å…¶æœ€åˆå’Œnetwork['C']ä¸€æ¨¡ä¸€æ ·ï¼Œä½†æ˜¯network['C_EMA']å¹¶ä¸å‚ä¸å®é™…è®°å½•ï¼Œå…¶é‡Œé¢çš„å‚æ•°åªæ˜¯ç”¨æ¥è®°å½•æ»‘åŠ¨å¹³å‡ï¼ï¼ï¼<strong>ï¼ˆè¿™å°±æ˜¯DG-Fontä»£ç ä¸­ï¼Œnetwork['C_EMA']çš„ä½œç”¨ï¼‰</strong></p>
<p>â€‹
EMAä½œç”¨æ˜¯<strong>ä½¿å¾—æ¨¡å‹åœ¨æµ‹è¯•æ•°æ®ä¸Šæ›´åŠ å¥å£®ï¼Œæœ‰æ›´å¥½çš„é²æ£’æ€§ã€‚æˆ–è€…æ˜¯æœ€åsaveæ¨¡å‹æ—¶å­˜å‚¨emaçš„å€¼ï¼Œå–æœ€è¿‘næ¬¡çš„è¿‘ä¼¼å¹³å‡å€¼ï¼Œä½¿æ¨¡å‹å…·å¤‡æ›´å¥½çš„æµ‹è¯•æŒ‡æ ‡(accuracy)ç­‰ï¼Œæ›´å¼ºçš„æ³›åŒ–èƒ½åŠ›ã€‚</strong></p>
<p>å‚è€ƒï¼š</p>
<p>https://zhuanlan.zhihu.com/p/51672655</p>
<p>https://zhuanlan.zhihu.com/p/343210667</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>EMA</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°1â€”â€”One-Hotç¼–ç ä¸Word Embedding</title>
    <url>/2021/11/23/3ad8cb19bc7a/</url>
    <content><![CDATA[<h3 id="ä¸€one-hot-encodingç‹¬çƒ­å‘é‡">ä¸€ã€One-Hot Encodingç‹¬çƒ­å‘é‡</h3>
<p>â€‹
ç‹¬çƒ­å‘é‡æ˜¯æŒ‡ä½¿ç”¨Nä½0æˆ–1æ¥å¯¹Nä¸ªçŠ¶æ€è¿›è¡Œç¼–ç ï¼Œæ¯ä¸ªçŠ¶æ€éƒ½æœ‰å®ƒç‹¬ç«‹çš„è¡¨ç¤ºå½¢å¼ï¼Œå¹¶ä¸”å…¶ä¸­åªæœ‰ä¸€ä½ä¸º1ï¼Œå…¶ä»–ä½éƒ½ä¸º0ã€‚</p>
<p>â€‹ æ¯”å¦‚æˆ‘ä»¬ç°åœ¨è¦ç¼–ç appleï¼Œæˆ‘ä»¬ç”¨5ä½å‘é‡æ¥è¿›è¡Œç¼–ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul>
<li><p>apple [1 0 0 0 0]</p></li>
<li><p>bag [0 1 0 0 0]</p></li>
<li><p>cat [0 0 1 0 0]</p></li>
<li><p>dog [0 0 0 1 0]</p></li>
<li><p>elephant [0 0 0 0 1]</p></li>
</ul>
<p>â€‹
å¦‚æœæˆ‘ä»¬ç°åœ¨æƒ³è¦ç¼–ç å…¶ä»–å¦å¤–çš„å•è¯ï¼Œé‚£å°±éœ€è¦æ›´å¤šä½å‚ä¸ç¼–ç ï¼Œä½†æ˜¯è¿™äº”ä¸ªå•è¯çš„ç¼–ç å‰5ä½ä»ç„¶èƒ½å¤Ÿæ˜¯è¿™æ ·ï¼Œåªä¸è¿‡åé¢çœç•¥å·çœç•¥çš„éƒ¨åˆ†éƒ½ä¸º0ç½¢äº†ã€‚</p>
<p>â€‹
ä½¿ç”¨è¿™ç§ç‹¬çƒ­å‘é‡çš„è¡¨ç¤ºå½¢å¼èƒ½å¤Ÿå¾ˆå¥½çš„å¯¹å„ç§å†…å®¹è¿›è¡Œç¼–ç ï¼Œä½†æ˜¯å®ƒå¹¶æ²¡æœ‰è€ƒè™‘ç¼–ç å†…å®¹ä¸å†…å®¹ä¹‹é—´çš„å…³è”ã€‚å°±æ¯”å¦‚è¯´ï¼Œåœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œcatï¼Œéƒ½å±äºåŠ¨ç‰©ï¼Œä»–ä»¬ä¹‹é—´åº”å½“å­˜åœ¨è”ç³»ï¼Œapple
å’Œ å…¶å®ƒå››ä¸ªå†…å®¹æ²¡æœ‰è”ç³»ã€‚ä½†æ˜¯ï¼Œä»ä¸Šè¿°çš„ç¼–ç ä¸­æˆ‘ä»¬æ²¡æ³•çœ‹å‡ºcatã€‚</p>
<p>â€‹ åŒæ—¶ä½¿ç”¨ç‹¬çƒ­å‘é‡å½¢æˆçš„ç‰¹å¾çŸ©é˜µä¼šéå¸¸çš„ç¨€ç–ï¼Œå ç”¨çš„ç©ºé—´éå¸¸çš„å¤§ã€‚</p>
<h3 id="äºŒword-embedding-è¯åµŒå…¥">äºŒã€Word Embedding è¯åµŒå…¥</h3>
<p>â€‹ Word
Embeddingå°±æ˜¯ä¸ºäº†è§£å†³One-hotç¼–ç çš„ç¼ºé™·ï¼Œå…¶ç”¨ä¸€ä¸ªå‘é‡æ¥å¯¹ä¸€ä¸ªè¯è¿›è¡Œè¡¨ç¤ºã€‚å…¶å…·æœ‰å¾ˆå¼ºçš„è¡¨è¾¾å…³è”ç‰¹å¾çš„èƒ½åŠ›ã€‚</p>
<p>â€‹ æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬ä»¥å¦‚ä¸‹ä¸ºä¾‹ï¼Œæˆ‘ä»¬ç°åœ¨è¦ä½¿ç”¨ä¸¤ç§ç¼–ç è¡¨ç¤ºå…¬ä¸»ã€ç‹å¦ƒ</p>
<ol type="1">
<li>ä½¿ç”¨One-Hot:</li>
</ol>
<p>â€‹ å…¬ä¸» [1 0]</p>
<p>â€‹ ç‹å¦ƒ [0 1]</p>
<ol start="2" type="1">
<li><p>ä½¿ç”¨ Word Embedding:</p>
<p>å…¬ä¸» = 0.5 * çš‡å¸ + 0.125 * å®«é‡Œ + 0.5 * å¥³</p>
<p>ç‹å¦ƒ = 0.3 * çš‡å¸ + 0.375 * å®«é‡Œ + 0.5 * å¥³</p>
<p>â€‹
å› ä¸ºæˆ‘ä»¬å°±ä»¥ä¸‰ä¸ªé¢å¤–çš„ç»´åº¦æ¥è¿›è¡Œç¼–ç ï¼Œæ‰€ä»¥ä¸¤è€…åº”å½“è¡¨ç¤ºä¸ºä¸‰ç»´çš„å‘é‡ã€‚äºæ˜¯ï¼Œå…¬ä¸»è¡¨ç¤ºä¸º
[0.5 0.125 0.5]ï¼Œç‹å¦ƒè¡¨ç¤ºä¸º
[0.3,0.375,0.5]ã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“å…¬ä¸»å’Œç‹å¦ƒåœ¨å†…åœ¨ä¸­ï¼Œå­˜åœ¨ç€æŸç§æ„ä¹‰ä¸Šçš„å…³è”ã€‚</p>
<p>â€‹
å½“ç„¶åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œç³»æ•°éƒ½æ˜¯ä¸¾ä¸ªä¾‹å­éšä¾¿å†™çš„ï¼Œæˆ‘ä»¬æƒ³è¦è¡¨è¾¾çš„æ„æ€å°±æ˜¯ï¼Œæ¯”å¦‚æˆ‘ä»¬å°†è¦è¯æ˜ å°„åˆ°ä¸€ä¸ªäºŒç»´çš„ç‰¹å¾ç©ºé—´ä¸­ï¼Œæ¯ä¸ªè¯å°±å¯ä»¥è¡¨ç¤ºæˆä¸€ä¸ªäºŒç»´çš„ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±èƒ½çŸ¥é“è¯å’Œè¯ä¹‹é—´å­˜åœ¨çš„æŸäº›å…³ç³»ã€‚åŒç†ï¼Œå¦‚æœè¯æ˜ å°„åˆ°ä¸€ä¸ªä¸‰ç»´çš„ç‰¹å¾ç©ºé—´ï¼Œé‚£å°±æ˜¯è¡¨ç¤ºæˆä¸‰ç»´ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹ã€‚</p>
<p>â€‹
å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå°±æ˜¯ä¸€ä¸ªç›´è§‚çš„ä¾‹å­ï¼Œæˆ‘ä»¬å°†è¿™ä¹ˆå¤šè¯æ˜ å°„åˆ°äºŒç»´ç©ºé—´ä¸­ï¼Œå°±å¯ä»¥æ‰¾åˆ°å®ƒä»¬åœ¨äºŒç»´ç©ºé—´çš„åˆ†å¸ƒï¼Œæ‰¾åˆ°å…¶å†…åœ¨çš„è¯ä¸è¯ä¹‹é—´çš„å…³ç³»ï¼Œæ¯”å¦‚è¯´ï¼Œåœ¨å›¾ä¸­æˆ‘ä»¬å°±çœ‹åˆ°äº†ä¸‰ä¸ªæ˜æ˜¾çš„èšç±»ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114205646350.png" /></p>
<p>â€‹ é‚£ä¹ˆWord
Embeddingä¸€èˆ¬æ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿå…¶å°±æ˜¯ä¸€ä¸ªå…¨è¿æ¥çš„ç¥ç»ç½‘ç»œå±‚ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼šå·¦è¾¹æ˜¯ä¸€ä¸ªä»¥2Ã—6çš„one-hotçŸ©é˜µä¸ºè¾“å…¥ï¼Œä¸­é—´å±‚èŠ‚ç‚¹æ•°ä¸º3çš„å…¨è¿æ¥çš„ç¥ç»ç½‘ç»œå±‚ã€‚ä»å³è¾¹å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªè®¡ç®—è¿‡ç¨‹å°±ç›¸å½“äºä»
w i,j
çŸ©é˜µä¸­å–å‡ºç¬¬1,2è¡Œï¼Œè·Ÿå­—å‘é‡çš„æŸ¥è¡¨æ“ä½œæ˜¯ä¸€æ ·çš„ï¼ˆä»è¡¨ä¸­æ‰¾å‡ºå¯¹åº”çš„å‘é‡ï¼‰ã€‚è¿™æ ·å­ç¼–ç å¾—åˆ°çš„å¯¹åº”å‘é‡å°±æ˜¯3ç»´çš„ã€‚å¦‚æœä½ æƒ³è¦ç¼–ç å¾—åˆ°nç»´çš„å‘é‡ï¼Œé‚£ä¹ˆä¸­é—´å±‚å°±åº”è¯¥ä¸ºèŠ‚ç‚¹æ•°ä¸ºnçš„å…¨è¿æ¥ç¥ç»ç½‘ç»œå±‚ã€‚ä¸€èˆ¬æˆ‘ä»¬åœ¨ç¥ç»ç½‘ç»œä¸­çœ‹åˆ°çš„Embeddingå±‚å°±æ˜¯è¿™æ ·å­è®¾è®¡çš„ã€‚</p>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114205700989.png" /></p>
<p>å› æ­¤ï¼ŒEmbeddingå±‚å…¶å®å°±æ˜¯ä»¥one
hotä¸ºè¾“å…¥ã€ä¸­é—´å±‚èŠ‚ç‚¹ä¸ºå­—å‘é‡ç»´æ•°çš„å…¨è¿æ¥å±‚ï¼è€Œè¿™ä¸ªå…¨è¿æ¥å±‚çš„å‚æ•°ï¼Œå°±æ˜¯ä¸€ä¸ªâ€œå­—å‘é‡è¡¨â€ï¼è¿™å…¶å®å°±æ˜¯å°†è¯»çƒ­ç¼–ç åçš„ç¨€ç–çŸ©é˜µç»è¿‡ä¸€ä¸ªçº¿æ€§å˜åŒ–ï¼ˆå…¶å®å°±æ˜¯æŸ¥è¡¨ï¼‰å°†å…¶è½¬æ¢æˆä¸€ä¸ªå¯†é›†çŸ©é˜µçš„è¿‡ç¨‹ã€‚</p>
<p>æœ€åæ€»ç»“ä¸€ä¸‹ï¼ŒEmbeddingå±‚æœ€ç»ˆå®Œæˆçš„å·¥ä½œï¼š</p>
<ul>
<li>å°†ç¨€ç–çŸ©é˜µç»è¿‡çº¿æ€§å˜æ¢ï¼ˆæŸ¥è¡¨ï¼‰å˜æˆä¸€ä¸ªå¯†é›†çŸ©é˜µ</li>
<li>è¿™ä¸ªå¯†é›†çŸ©é˜µç”¨äº†Nä¸ªç‰¹å¾æ¥è¡¨ç¤ºæ‰€æœ‰çš„è¯ã€‚å¯†é›†çŸ©é˜µä¸­è¡¨è±¡ä¸Šæ˜¯ä¸€ä¸ªè¯å’Œç‰¹å¾çš„å…³ç³»ç³»æ•°ï¼Œå®é™…ä¸Šè•´å«äº†å¤§é‡çš„è¯ä¸è¯ä¹‹é—´çš„å†…åœ¨å…³ç³»ã€‚</li>
<li>å®ƒä»¬ä¹‹é—´çš„æƒé‡å‚æ•°ï¼Œç”¨çš„æ˜¯åµŒå…¥å±‚å­¦ä¹ æ¥çš„å‚æ•°è¿›è¡Œè¡¨å¾çš„ç¼–ç ã€‚åœ¨ç¥ç»ç½‘ç»œåå‘ä¼ æ’­ä¼˜åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªå‚æ•°ä¹Ÿä¼šä¸æ–­çš„æ›´æ–°ä¼˜åŒ–ã€‚</li>
</ul></li>
</ol>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
        <tag>Basic Concepts</tag>
        <tag>Info Encoding</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°2â€”â€”æ•°æ®è¡¨å¾ä¸è‡ªåŠ¨ç¼–ç å™¨</title>
    <url>/2021/11/24/379e9f408368/</url>
    <content><![CDATA[<h2 id="æ•°æ®è¡¨å¾ä¸è‡ªåŠ¨ç¼–ç å™¨">æ•°æ®è¡¨å¾ä¸è‡ªåŠ¨ç¼–ç å™¨</h2>
<h3 id="å‰è¨€">å‰è¨€ï¼š</h3>
<p>â€‹
æœ¬æ–‡ç®€å•è®²è§£äº†æ•°æ®è¡¨å¾ä¸è‡ªåŠ¨ç¼–ç å™¨çš„ç›¸å…³çŸ¥è¯†ï¼Œä¸»è¦æ¥è¯´æ¶µç›–æ•°æ®è¡¨å¾çš„æ¦‚å¿µä¸ç†è§£ï¼Œç®€å•è‡ªåŠ¨ç¼–ç å™¨çš„ç»„æˆï¼Œå †å å¼è‡ªåŠ¨ç¼–ç å™¨çš„ç»„æˆä¸è®­ç»ƒæ–¹æ³•ï¼Œå·ç§¯ã€å¾ªç¯ã€å»å™ªã€ç¨€ç–è‡ªåŠ¨ç¼–ç å™¨çš„ç®€å•ä»‹ç»ï¼Œä»¥åŠå˜åˆ†è‡ªåŠ¨ç¼–ç å™¨è¾ƒä¸ºè¯¦ç»†çš„æ¦‚å¿µä¸ä¸€ä¸ªæœ‰è¶£çš„åº”ç”¨ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯æ•°æ®è¡¨å¾">1ã€ä»€ä¹ˆæ˜¯æ•°æ®è¡¨å¾ï¼Ÿ</h3>
<p>ä»¥ä¸‹æ˜¯ä¸¤ç»„æ•°å­—é¡ºåºï¼š</p>
<p>â€‹ 40ï¼Œ27ï¼Œ25ï¼Œ36ï¼Œ81ï¼Œ57ï¼Œ10ï¼Œ73</p>
<p>â€‹ 1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6ï¼Œ7ï¼Œ8ï¼Œ9ï¼Œ10ï¼Œ11ï¼Œ12ï¼Œ13ï¼Œ14ï¼Œ15ï¼Œ16ï¼Œ17</p>
<p>â€‹
ç®€å•æ¥çœ‹ï¼Œç¬¬ä¸€è¡Œçš„æ•°æ®æ›´å°‘ï¼Œä¿¡æ¯é‡æ›´å°ï¼Œä½†æ˜¯å…¶å®ç¬¬äºŒè¡Œçš„æ•°æ®å…·æœ‰å¾ˆå¥½çš„é€’å¢ç‰¹å¾ï¼Œåè€Œæ›´å®¹æ˜“è¿›è¡Œè®°å¿†ã€‚æ•°æ®ä¸­çš„ç±»ä¼¼äºè¿™ç§çš„æ¨¡å¼è¢«æˆ‘ä»¬ç§°ä¸ºæ•°æ®è¡¨å¾ã€‚æ¨¡å¼å¯ä»¥æ›´å¥½çš„å¸®åŠ©æˆ‘ä»¬æœ‰æ•ˆçš„å­˜å‚¨ä¿¡æ¯ã€‚</p>
<h3 id="ä¸€ä¸ªç®€å•è‡ªåŠ¨ç¼–ç å™¨çš„ç»„æˆ">2ã€ä¸€ä¸ªç®€å•è‡ªåŠ¨ç¼–ç å™¨çš„ç»„æˆ</h3>
<p>â€‹
è‡ªåŠ¨ç¼–ç å™¨ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šå°†è¾“å…¥è½¬æ¢ä¸ºæ½œåœ¨è¡¨å¾çš„ç¼–ç å™¨ï¼ˆè¯†åˆ«ç½‘ç»œï¼‰ï¼Œä»¥åŠå°†å†…éƒ¨è¡¨å¾è½¬æ¢ä¸ºè¾“å‡ºçš„è§£ç å™¨ï¼ˆç”Ÿæˆç½‘ç»œï¼‰ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114205901462.png" alt="image-20220114205901462" style="zoom:150%;" /></p>
<p>â€‹
ä¸Šè¿°ç¤ºä¾‹å°±æ˜¯ä¸€ä¸ªç”±3ä¸ªç¥ç»å…ƒç»„æˆçš„éšè—å±‚ï¼ˆç¼–ç å™¨ï¼‰ï¼Œä»¥åŠç”±6ä¸ªç¥ç»å…ƒç»„æˆçš„è¾“å‡ºå±‚ï¼ˆè§£ç å™¨ï¼‰ã€‚è¾“å‡ºåˆé€šå¸¸ç§°ä¸ºé‡æ„ï¼Œè‡ªåŠ¨ç¼–ç å™¨ä¼šè¯•å›¾é‡æ„è¾“å…¥ï¼Œä¸”æˆæœ¬å‡½æ•°åŒ…å«ä¸€ä¸ªé‡æ„æŸå¤±ï¼Œé‡æ„å’Œè¾“å…¥ä¸ä¸€è‡´çš„æ—¶å€™ä¼šè¿›è¡Œæƒ©ç½šã€‚</p>
<p>â€‹
æ³¨æ„ï¼šè‡ªåŠ¨ç¼–ç å™¨çš„è¾“å‡ºæ•°é‡åº”ç­‰äºè¾“å…¥æ•°é‡ã€‚åŒæ—¶ï¼Œè‡ªåŠ¨ç¼–ç å™¨æœ¬èº«å…¶å®æ˜¯ä¸€ä¸ªåœ¨å­¦ä¹ æ•°æ®æ½œåœ¨è¡¨å¾ï¼Œç„¶åå†ç”±è¡¨å¾è¿˜åŸæ•°æ®çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚å®ƒé€šå¸¸ç”¨äºé™ç»´æˆ–è€…æ— ç›‘ç£çš„é¢„è®­ç»ƒã€‚</p>
<h3 id="å †å å¼è‡ªåŠ¨ç¼–ç å™¨">3ã€å †å å¼è‡ªåŠ¨ç¼–ç å™¨</h3>
<p>â€‹
è‡ªåŠ¨ç¼–ç å™¨å¯ä»¥æœ‰è®¸å¤šä¸ªéšè—å±‚ï¼Œå°±æˆä¸ºäº†å †å å¼è‡ªåŠ¨ç¼–ç å™¨ï¼ˆæ·±åº¦è‡ªåŠ¨ç¼–ç å™¨ï¼‰ã€‚ä½†æ˜¯æˆ‘ä»¬éœ€è¦æ³¨æ„ä¸èƒ½ä½¿ç¼–ç å™¨å¤ªè¿‡äºå¼ºå¤§äº†ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä»ç„¶ä»¥ä¸‹è¿°ä¸ºä¾‹ï¼š</p>
<p>â€‹ 40ï¼Œ27ï¼Œ25ï¼Œ36ï¼Œ81ï¼Œ57ï¼Œ10ï¼Œ73</p>
<p>â€‹ 1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6ï¼Œ7ï¼Œ8ï¼Œ9ï¼Œ10ï¼Œ11ï¼Œ12ï¼Œ13ï¼Œ14ï¼Œ15ï¼Œ16ï¼Œ17</p>
<p>â€‹
å¦‚æœç¼–ç å™¨å¤ªè¿‡äºå¼ºå¤§äº†ï¼Œå¯èƒ½ä»–å°±ä¼šå‡†ç¡®çš„è®°ä½æ¯ä¸€ä¸ªæ•°å­—ï¼ˆä¹Ÿå°±æ˜¯åšäº†ä¸€ä¸ªç®€å•çš„ä¸€ä¸€æ˜ å°„ï¼Œè€Œæ²¡æœ‰å»å­¦ä¹ æ½œåœ¨çš„æ¨¡å¼ï¼‰ã€‚å°±å¥½æ¯”ä¸€ä¸ªè®°å¿†åŠ›éå¸¸å¥½çš„äººçœ‹åˆ°è¿™ä¸¤ä¸²æ•°å­—ï¼Œè¯´æˆ‘ä¸éœ€è¦å»çœ‹è¿™ä¸ªæ•°å­—é‡Œé¢åˆ°åº•å­˜åœ¨ä»€ä¹ˆæ ·çš„æ¨¡å¼ï¼Œåªè¦ç›´æ¥èƒŒå°±å®Œäº†ï¼Œæ²¡æœ‰åŒºåˆ«ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114205946184.png" alt="image-20220114205946184" style="zoom: 150%;" /></p>
<p>â€‹
ä¸Šå›¾æ˜¯ä¸€ä¸ªå¸¸è§çš„å †å å¼è‡ªåŠ¨ç¼–ç å™¨çš„ç¤ºæ„å›¾ï¼Œå¾€å¾€ä¼šæ˜¯è¿™æ ·ä¸€ä¸ªç±»ä¸‰æ˜æ²»ç»“æ„ã€‚ä¸‹å›¾æ˜¯ä¸€ç»„è¾“å…¥ä¸é‡æ„çš„å¯è§†åŒ–ç»“æœï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114210006336.png" /></p>
<p>â€‹ ä¸ºäº†æ›´å¥½çš„å¸®åŠ©ç†è§£è‡ªåŠ¨ç¼–ç å™¨é™ç»´çš„ç”¨å¤„ï¼Œæˆ‘ä»¬ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114210017508.png" /></p>
<p>â€‹
åœ¨ä¸Šå›¾ä¸­è¿™æ ·ä¸€ä¸ªç®€å•çš„è‡ªåŠ¨ç¼–ç å™¨ç½‘ç»œä¸­ï¼Œå…¶å®è´¨å°±æ˜¯å°†ä¸€ç»„3ç»´æ•°æ®é€šè¿‡ç¼–ç å™¨é™åˆ°äº†2ç»´ã€‚ç„¶ååœ¨é€šè¿‡è§£ç å™¨å°†2ç»´æ•°æ®é‡æ„è‡³3ç»´ã€‚å®é™…æ“ä½œè¿‡ç¨‹ä¸­ï¼Œæ„å»ºå¥½è¿™æ ·ä¸€ç»„è‡ªåŠ¨ç¼–ç å™¨ç½‘ç»œåï¼Œä½ å¯ä»¥å…ˆä½¿ç”¨è§£ç å™¨å°†æ•°æ®é™ç»´ï¼Œç„¶ååšä¸€äº›å­¦ä¹ ï¼Œç„¶åå†å°†æ•°æ®è¿›è¡Œé‡æ„ï¼Œèƒ½å¤Ÿå¸®åŠ©è¿›è¡Œæ›´å¥½çš„å®ä¾‹æ³›åŒ–ã€‚</p>
<p>â€‹
åŒæ ·ï¼Œä¸ºäº†æ›´å¥½çš„å¸®åŠ©ç†è§£è‡ªåŠ¨ç¼–ç å™¨ç”¨äºæ— ç›‘ç£é¢„è®­ç»ƒçš„ç”¨å¤„ï¼Œæˆ‘ä»¬ä¹Ÿä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<p>â€‹
å…ˆæˆ‘ä»¬å­¦è¿‡å¦‚æœè¦å¤„ç†ä¸€ä¸ªå¤æ‚çš„æœ‰ç›‘ç£ä»»åŠ¡ï¼Œä½†æ˜¯æ²¡æœ‰å¾ˆå¤šæ ‡è®°å¥½çš„æ•°æ®ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ç½‘ä¸Šå¯»æ‰¾å·²çŸ¥çš„ç±»ä¼¼ä»»åŠ¡çš„ç¥ç»ç½‘ç»œï¼Œå¹¶ä¸”é‡ç”¨å…¶è¾ƒä½å±‚çš„ç½‘ç»œï¼Œç„¶åç”¨å°‘é‡æ•°æ®å¯¹é«˜å±‚ç½‘ç»œè¿›è¡Œè®­ç»ƒå³å¯ã€‚è¿™æ ·å…¶å°±ä¸å¿…ä»åº•å±‚ç‰¹å¾å¼€å§‹å­¦èµ·ï¼Œåªä¼šé‡ç”¨åŸæœ‰ç½‘ç»œçš„åº•å±‚ç‰¹å¾æ£€æµ‹ã€‚</p>
<p>â€‹
è®²åˆ°è¿™é‡Œï¼Œåº”è¯¥æ˜ç™½äº†ï¼Œè‡ªåŠ¨ç¼–ç å™¨å…¶å®ä¹Ÿæ˜¯åŒä¸€ä¸ªåŸç†ã€‚åˆšæ‰è¯´äº†ï¼Œè‡ªåŠ¨ç¼–ç å™¨çš„ç¬¬ä¸€æ­¥æ˜¯ç¼–ç å™¨ï¼Œç¼–ç å™¨çš„æœ¬è´¨æ˜¯å¯»æ‰¾æ•°æ®çš„æ½œåœ¨è¡¨å¾ï¼Œé‚£ä¸ä¹Ÿå°±ç›¸å½“äºåšäº†åº•å±‚çš„ç‰¹å¾æ£€æµ‹å˜›ï¼Œè€Œä¸”è®­ç»ƒæ•°æ®è¿˜æ˜¯å¯ä»¥ä¸éœ€è¦æ ‡ç­¾çš„ã€‚</p>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114210030274.png" /></p>
<p>â€‹</p>
<p>â€‹
æ‰€ä»¥ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¦‚æœæˆ‘ä»¬æ‰‹ä¸Šæœ‰ä¸€ä¸ªå¤§å‹æ•°æ®é›†ï¼Œä½†æ˜¯éš¾å—çš„æ˜¯å¤§éƒ¨åˆ†çš„æ•°æ®éƒ½æ˜¯æœªæ ‡è®°çŠ¶æ€çš„ï¼Œåªæœ‰å°‘æ•°æ‰“ä¸Šäº†æ ‡ç­¾ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å…ˆä½¿ç”¨æ‰€æœ‰çš„æ•°æ®æ¥è®­ç»ƒä¸€ä¸ªè‡ªåŠ¨ç¼–ç å™¨ï¼Œè®­ç»ƒå®Œä»¥åï¼Œå°†ç¼–ç å™¨éƒ¨åˆ†çš„ç½‘ç»œå¤åˆ¶åˆ°æˆ‘ä»¬æ–°çš„ç¥ç»ç½‘ç»œä¸­ï¼Œç„¶ååœ¨æ­¤åŸºç¡€ä¸Šæ„å»ºé«˜å±‚çš„ç¥ç»ç½‘ç»œï¼Œè¿™æ ·çš„è¯åªè¦å†ç”¨å°‘éƒ¨åˆ†å¸¦æ ‡è®°çš„æ•°æ®è®­ç»ƒä¸€ä¸‹è¯¥ç¥ç»ç½‘ç»œçš„é«˜å±‚éƒ¨åˆ†å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªè¾ƒå¥½çš„æ•ˆæœäº†ã€‚</p>
<p>### 4ã€å¦‚ä½•è®­ç»ƒå †å å¼è‡ªåŠ¨ç¼–ç å™¨ï¼š</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥ç”¨äºè®­ç»ƒè‡ªåŠ¨ç¼–ç å™¨ã€‚</p>
<p>â€‹ 1.
å°†è§£ç å™¨å±‚çš„æƒé‡ä¸ç¼–ç å™¨å±‚çš„æƒé‡ç»‘å®šèµ·æ¥ã€‚è¿™æ ·çš„è¯å¯ä»¥å°†æ¨¡å‹ä¸­æ•´ä½“çš„è®­ç»ƒå‚æ•°å‡åŠï¼Œå¹¶ä¸”åŠ å¿«è®­ç»ƒé€Ÿåº¦å¹¶ä¸”é™ä½äº†è¿‡æ‹Ÿåˆçš„é£é™©ã€‚</p>
<ol start="2" type="1">
<li><p>ä¸€æ¬¡è®­ç»ƒä¸€ä¸ªæµ…å±‚è‡ªåŠ¨ç¼–ç å™¨ç„¶åå°†ä»–ä»¬è¿›è¡Œå †å ã€‚ï¼ˆè¿™ç§æŠ€æœ¯ç°åœ¨ç”¨çš„è¾ƒå°‘ï¼‰ï¼Œç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114210104140.png" /></p>
<p>â€‹
ç¤ºæ„å›¾æœ¬èº«å·²ç»è¾ƒæ¸…æ¥šçš„è®²è§£äº†æ•´ä¸ªè¿‡ç¨‹ï¼Œæˆ‘å†åšä¸€éç®€ç•¥çš„è®²è¿°ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬ç°åœ¨è¦è®­ç»ƒæœ€å³ä¾§è¿™æ ·ä¸€ä¸ªå †å å¼è‡ªåŠ¨ç¼–ç å™¨ï¼Œä»–çš„ç¼–ç å™¨éƒ¨åˆ†æœ‰ä¸¤å±‚ï¼Œæˆ‘ä»¬å°†å…¶åˆ†ä¸ºä¸¤é˜¶æ®µæ¥çœ‹è¿™ä¸ªé—®é¢˜ã€‚é¦–å…ˆæŒ‰è®­ç»ƒç¬¬ä¸€ä¸ªè‡ªåŠ¨ç¼–ç å™¨ï¼Œå°†éšè—å±‚1çš„å‚æ•°è®­ç»ƒå¥½ã€‚ç„¶åå†è®­ç»ƒç¬¬äºŒä¸ªè‡ªåŠ¨ç¼–ç å™¨ï¼Œå°†éšè—å±‚2çš„å‚æ•°è®­ç»ƒå¥½ã€‚æ³¨æ„ï¼Œåœ¨è®­ç»ƒç¬¬äºŒä¸ªè‡ªåŠ¨ç¼–ç å™¨çš„æ—¶å€™ï¼Œç”¨åˆ°çš„è¾“å…¥å…¶å®æ˜¯è®­ç»ƒå¥½çš„ç¬¬ä¸€ä¸ªè‡ªåŠ¨ç¼–ç å™¨å°†è¾“å…¥ç¼–ç åçš„ç»“æœã€‚ä»¥å…¬å¼çš„å½¢å¼è¡¨è¾¾çš„è¯å°±æ˜¯ï¼š</p>
<p>â€‹ æˆ‘ä»¬å‡è®¾è¾“å…¥ä¸ºiï¼Œç¬¬ä¸€ä¸ªè‡ªåŠ¨ç¼–ç å™¨çš„ç¼–ç å‡½æ•°ä¸º <strong>f_encoder1()
</strong>,è§£ç å‡½æ•°ä¸º<strong>f_decoder1()</strong>,ç¬¬äºŒä¸ªè‡ªåŠ¨ç¼–ç å™¨çš„ç¼–ç å‡½æ•°ä¸º<strong>f_encoder2()</strong>,è§£ç å‡½æ•°ä¸º<strong>f_decoder2()</strong>ã€‚</p>
<p>â€‹ é‚£ä¹ˆåœ¨è®­ç»ƒç¬¬ä¸€ä¸ªè‡ªåŠ¨ç¼–ç å™¨çš„æ—¶å€™ï¼Œè¾“å…¥ä¸ºiï¼Œé‡æ„è¾“å‡ºä¸º
<strong>f_decoder1(f_encoder1(i))</strong>ã€‚åœ¨è®­ç»ƒç¬¬äºŒä¸ªè‡ªåŠ¨ç¼–ç å™¨çš„æ—¶å€™ï¼Œè¾“å…¥ä¸º<strong>f_encoder1(i)</strong>ï¼Œé‡æ„è¾“å‡ºä¸º<strong>f_decoder2(
f_encoder2( f_encoder1(i) ))</strong></p></li>
</ol>
<h3 id="å…¶ä»–ç±»å‹çš„è‡ªåŠ¨ç¼–ç å™¨">5ã€å…¶ä»–ç±»å‹çš„è‡ªåŠ¨ç¼–ç å™¨</h3>
<p>â€‹ <strong>(1) å·ç§¯è‡ªåŠ¨ç¼–ç å™¨</strong></p>
<p>â€‹
ç”¨äºä¸ºå›¾åƒæ„å»ºè‡ªåŠ¨ç¼–ç å™¨ã€‚ä¸€èˆ¬ç¼–ç å™¨å±‚æ˜¯ç”±å·ç§¯å±‚å’Œæ± åŒ–å±‚ç»„æˆçš„å¸¸è§„CNNã€‚ä¼šå‡å°‘è¾“å…¥çš„ç©ºé—´å°ºå¯¸ï¼Œå¢åŠ æ·±åº¦å³ç‰¹å¾å›¾çš„æ•°é‡ã€‚è§£ç å™¨åˆ™è¿›è¡Œç›¸åçš„æ“ä½œã€‚</p>
<p>â€‹ <strong>(2)å¾ªç¯è‡ªåŠ¨ç¼–ç å™¨</strong></p>
<p>â€‹
ç”¨äºä¸ºåºåˆ—æ„å»ºè‡ªåŠ¨ç¼–ç å™¨ï¼Œä¾‹å¦‚æ—¶é—´åºåˆ—æˆ–æ–‡æœ¬ã€‚ç¼–ç å™¨é€šå¸¸ä¸ºåºåˆ—åˆ°å‘é‡çš„RNNï¼Œèƒ½å¤Ÿå°†è¾“å…¥åºåˆ—å‹ç¼©ä¸ºå•ä¸ªå‘é‡ã€‚å…¶å¯ä»¥å¤„ç†ä»»ä½•é•¿åº¦çš„åºåˆ—ã€‚</p>
<p>â€‹ <strong>(3)å»å™ªè‡ªåŠ¨ç¼–ç å™¨</strong></p>
<p>â€‹
åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸ºäº†è®©è‡ªåŠ¨ç¼–ç å™¨ä¸è¿‡äºå¼ºå¤§ï¼Œä¹Ÿå°±æ˜¯ä¸ºäº†è®©ä»–å­¦ä¹ ä¸€äº›æ•°æ®çš„æµ…å±‚ç‰¹å¾ï¼Œæˆ‘ä»¬é€šè¿‡é™åˆ¶ç¼–ç æ›¾å¤§å°è®©å®ƒæˆä¸ºä¸å®Œæ•´çš„è‡ªåŠ¨ç¼–ç å™¨ã€‚å…¶å®ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å‘å…¶è¾“å…¥ä¸­æ·»åŠ å™ªå£°ï¼Œè®­ç»ƒå®ƒæ¥æ¢å¤æ— å™ªå£°è¾“å…¥ï¼Œä¹Ÿå¯ä»¥è®©å…¶å­¦ä¹ æ•°æ®çš„æœ‰ç”¨ç‰¹å¾ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114210254970.png" /></p>
<p>â€‹
å¯ä»¥åœ¨ç¼–ç å™¨çš„è¾“å…¥ä¸­å åŠ é«˜æ–¯å™ªå£°ï¼Œä¹Ÿå¯ä»¥åŠ ä¸€å±‚dropoutå±‚ã€‚å»å™ªç¼–ç å™¨ä¸ä»…å¯ä»¥ç”¨äºé™ç»´æ•°æ®å¯è§†åŒ–æˆ–è€…æ— ç›‘ç£é¢„è®­ç»ƒï¼Œä¹Ÿå¯ä»¥ç”¨äºå›¾åƒå»å™ªã€‚</p>
<p>â€‹ <strong>(4)ç¨€ç–è‡ªåŠ¨ç¼–ç å™¨</strong></p>
<p>â€‹
ä½¿ç”¨ç¨€ç–æ€§æ¥å¯¹ç¼–ç å™¨è¿›è¡Œçº¦æŸï¼Œä½¿å…¶å¯¹è‰¯å¥½çš„ç‰¹å¾è¿›è¡Œæå–å­¦ä¹ ã€‚é€šè¿‡åœ¨æˆæœ¬å‡½æ•°ä¸­æ·»åŠ é€‚å½“çš„å‡½æ•°é¡¹ï¼Œæ¥å¼ºè¿«è‡ªåŠ¨ç¼–ç å™¨å‡å°‘ç¼–ç å±‚ä¸­æ´»åŠ¨ç¥ç»å…ƒçš„æ•°é‡ã€‚</p>
<p>â€‹
å¦ä¸€ç§æ–¹æ³•æ˜¯åœ¨æ¯æ¬¡è®­ç»ƒè¿­ä»£æ—¶æµ‹é‡ç¼–ç å±‚çš„å®é™…ç¨€ç–åº¦ï¼Œå¹¶åœ¨æµ‹é‡ç¨€ç–åº¦é¢„ç›®æ ‡ç¨€ç–åº¦ä¸åŒæ—¶å¯¹æ¨¡å‹è¿›è¡Œæƒ©ç½šã€‚</p>
<p>â€‹ <strong>(5)å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨</strong></p>
<p>â€‹ å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨è¾ƒä¸ºç‰¹æ®Šï¼Œå…·ä½“è€Œè¨€æœ‰ä¸¤å¤§ç‰¹ç‚¹ï¼š</p>
<p>â€‹
<strong>ç‰¹ç‚¹1</strong>:æ¦‚ç‡è‡ªåŠ¨ç¼–ç å™¨ï¼šæ„æ€æ˜¯å³ä½¿åœ¨è®­ç»ƒå¥½ä»¥åï¼Œå®ƒä»¬çš„è¾“å‡ºéƒ¨åˆ†ä¹Ÿä¼šç”±æ¦‚ç‡å†³å®šã€‚</p>
<p>â€‹
<strong>ç‰¹ç‚¹2</strong>:ç”Ÿæˆå¼è‡ªåŠ¨ç¼–ç å™¨ï¼šæŒ‡å®ƒä»¬å¯ä»¥ç”Ÿæˆçœ‹ä¸Šå»åƒæ˜¯ä»è®­ç»ƒé›†ä¸­é‡‡æ ·çš„æ–°å®ä¾‹ã€‚</p>
<p>â€‹
åœ¨å…ˆå‰è®²åˆ°çš„è‡ªåŠ¨ç¼–ç å™¨ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€ä»¥ä¸€ä¸ªæ•°å€¼æ¥è¡¨ç¤ºä¸€ä¸ªç‰¹å¾ç»´åº¦çš„å€¼ï¼Œå¦‚ä¸‹
æ‰€ç¤ºï¼Œå°†äººè„¸å›¾åƒç¼–ç æˆäº†ä¸€ä¸ªå…­ç»´å‘é‡ï¼Œæ¯ä¸ªç»´åº¦ä¸€ä¸ªå€¼ã€‚</p>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114210408918.png" /></p>
<p>â€‹
åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å•ä¸ªå€¼æ¥æè¿°è¾“å…¥å›¾åƒåœ¨æ½œåœ¨ç‰¹å¾ä¸Šçš„è¡¨ç°ã€‚ä½†åœ¨å®é™…æƒ…å†µä¸­ï¼Œæˆ‘ä»¬å¯èƒ½æ›´å¤šæ—¶å€™å€¾å‘äºå°†æ¯ä¸ªæ½œåœ¨ç‰¹å¾è¡¨ç¤ºä¸ºå¯èƒ½å€¼çš„èŒƒå›´ã€‚</p>
<p>â€‹
è€Œå˜åˆ†è‡ªç¼–ç å™¨ä¾¿æ˜¯ç”¨â€œå–å€¼çš„æ¦‚ç‡åˆ†å¸ƒâ€ä»£æ›¿åŸå…ˆçš„å•å€¼æ¥æè¿°å¯¹ç‰¹å¾çš„è§‚å¯Ÿçš„æ¨¡å‹ï¼Œå¦‚ä¸‹å›¾çš„å³è¾¹éƒ¨åˆ†æ‰€ç¤ºï¼Œç»è¿‡å˜åˆ†è‡ªç¼–ç å™¨çš„ç¼–ç ï¼Œæ¯å¼ å›¾ç‰‡çš„å¾®ç¬‘ç‰¹å¾ä¸å†æ˜¯è‡ªç¼–ç å™¨ä¸­çš„å•å€¼è€Œæ˜¯ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114210429150.png" /></p>
<p>â€‹
æ‰€ä»¥åœ¨å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨ä¸­ï¼Œæˆ‘ä»¬ç°åœ¨å°†ç»™å®šè¾“å…¥çš„æ¯ä¸ªæ½œåœ¨ç‰¹å¾è¡¨ç¤ºä¸ºæ¦‚ç‡åˆ†å¸ƒã€‚å½“ä»æ½œåœ¨çŠ¶æ€è§£ç æ—¶ï¼Œæˆ‘ä»¬å°†ä»æ¯ä¸ªæ½œåœ¨çŠ¶æ€åˆ†å¸ƒä¸­éšæœºé‡‡æ ·ï¼Œç”Ÿæˆä¸€ä¸ªå‘é‡ä½œä¸ºè§£ç å™¨æ¨¡å‹çš„è¾“å…¥ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114210436379.png" /></p>
<p>â€‹ é‚£ä¹ˆå¦‚ä½•è®­ç»ƒå˜åˆ†è‡ªåŠ¨ç¼–ç å™¨å‘¢ï¼Ÿå…¶æˆæœ¬å‡½æ•°ç”±åº”å½“å¦‚ä½•è®¾è®¡ï¼Ÿ</p>
<p>â€‹
å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨å­¦ä¹ çš„æ˜¯éšå˜é‡ï¼ˆç‰¹å¾ï¼‰Zçš„æ¦‚ç‡åˆ†å¸ƒï¼Œå› æ­¤åœ¨ç»™å®šè¾“å…¥æ•°æ®Xçš„æƒ…å†µä¸‹ï¼Œå˜åˆ†è‡ªåŠ¨ç¼–ç å™¨çš„æ¨æ–­ç½‘ç»œè¾“å‡ºçš„åº”è¯¥æ˜¯Zçš„åéªŒåˆ†å¸ƒpï¼ˆz|xï¼‰ã€‚
ä½†æ˜¯è¿™ä¸ªpï¼ˆz|xï¼‰åéªŒåˆ†å¸ƒæœ¬èº«æ˜¯ä¸å¥½æ±‚çš„ã€‚æ‰€ä»¥æœ‰å­¦è€…å°±æƒ³å‡ºäº†ä½¿ç”¨å¦ä¸€ä¸ªå¯ä¼¸ç¼©çš„åˆ†å¸ƒqï¼ˆz|xï¼‰æ¥è¿‘ä¼¼pï¼ˆz|xï¼‰ã€‚é€šè¿‡æ·±åº¦ç½‘ç»œæ¥å­¦ä¹ qï¼ˆz|xï¼‰çš„å‚æ•°ï¼Œä¸€æ­¥æ­¥ä¼˜åŒ–qä½¿å…¶ä¸p(z|x)ååˆ†ç›¸ä¼¼ï¼Œå°±å¯ä»¥ç”¨å®ƒæ¥å¯¹å¤æ‚çš„åˆ†å¸ƒè¿›è¡Œè¿‘ä¼¼çš„æ¨ç†ã€‚</p>
<p>â€‹
è¿™ä¸ªæ—¶å€™å°±å‡ºç°äº†æˆæœ¬å‡½æ•°çš„è®¾è®¡ç†å¿µï¼Œæˆæœ¬å‡½æ•°ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯é€šå¸¸çš„é‡æ„æŸå¤±ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨äº¤å‰ç†µæ¥è¡¡é‡ã€‚ç¬¬äºŒéƒ¨åˆ†æ˜¯æ½œåœ¨æŸå¤±ã€‚å®ƒå°±æ˜¯ä¸Šè¿°æåˆ°çš„ç›®æ ‡åˆ†å¸ƒqå’Œç¼–ç çš„å®é™…åˆ†å¸ƒpä¹‹é—´çš„KLæ•£åº¦ã€‚é€šè¿‡ç®€åŒ–åï¼Œå°±å¯ä»¥å¾—åˆ°ä»¥ä¸‹å…¬å¼ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114210448726.png" /></p>
<p>â€‹ L1æ˜¯æ½œåœ¨æŸå¤±ï¼Œnæ˜¯ç¼–ç çš„ç»´åº¦ï¼Œu(j)å’Œsigma(j)
æ˜¯ç¬¬jä¸ªåˆ†é‡çš„å‡å€¼å’Œæ ‡å‡†å·®ã€‚å‘é‡uå’Œsigmaç”±ç¼–ç å™¨è¿›è¡Œè¾“å‡ºã€‚KLæ•£åº¦åŠå¦‚ä½•é€šè¿‡KLæ•£åº¦æ¨å¯¼å‡ºç®€åŒ–çš„å…¬å¼éƒ¨åˆ†æœ¬æ–‡è¿›è¡Œäº†çœç•¥ï¼Œè¯¦ç»†å¯ä»¥çœ‹å¼•ç”¨ï¼ˆ2ï¼‰ã€‚</p>
<p>â€‹ æœ€åæä¸€ä¸‹æ•´ä¸ªå˜åˆ†è‡ªåŠ¨ç¼–ç å™¨çš„ç½‘ç»œç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114210503507.png" /></p>
<p>â€‹
ç¼–ç å™¨äº§ç”Ÿå¹³å‡ç¼–ç uå’Œæ ‡å‡†å·®sigmaï¼Œç„¶åå®é™…ç¼–ç æ˜¯ä»uå’Œsigmaçš„é«˜æ–¯åˆ†å¸ƒä¸­è¿›è¡Œéšæœºé‡‡æ ·ä¹‹åå¾—åˆ°çš„ã€‚è§£ç å™¨æ­£å¸¸è§£ç é‡‡æ ·å¾—åˆ°çš„ç¼–ç å³å¯ã€‚</p>
<h4 id="ä¸€äº›æœ‰è¶£çš„åº”ç”¨">ä¸€äº›æœ‰è¶£çš„åº”ç”¨ï¼š</h4>
<p>â€‹
å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨ä½¿å¾—è¯­ä¹‰æ’å€¼æˆä¸ºäº†å¯èƒ½ï¼Œå¯ä»¥åœ¨ç¼–ç çº§åˆ«è¿›è¡Œæ’å€¼ï¼Œè€Œéåœ¨æ•°æ®çº§åˆ«è¿›è¡Œæ’å€¼ã€‚æ€»ä½“è€Œè¨€å°±æ˜¯å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä¸€ä¸ªè¿‡ç¨‹ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114210518169.png" /></p>
<p><strong>æ–‡ä¸­å¼•ç”¨ä¸éƒ¨åˆ†å›¾ç‰‡æ¥æºï¼š</strong></p>
<p>1ï¼‰ã€Šæœºå™¨å­¦ä¹ å®æˆ˜
åŸºäºScikit-learnã€kerasã€tensorflowã€‹æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾</p>
<p>2ï¼‰
ä¸€æ–‡ç†è§£å˜åˆ†è‡ªç¼–ç å™¨ï¼ˆVAEï¼‰https://zhuanlan.zhihu.com/p/64485020</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
        <tag>Basic Concepts</tag>
        <tag>Auto Encoder</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°3â€”â€”åå·ç§¯Deconvolution</title>
    <url>/2022/01/04/16c9f87609b5/</url>
    <content><![CDATA[<p><strong>æç¤ºï¼šåœ¨è§‚çœ‹æ­¤ç¯‡æ–‡ç« å‰ï¼Œéœ€è¦ä½ æŒæ¡å·ç§¯æ“ä½œã€‚</strong></p>
<p>â€‹
Deconvolutionåå·ç§¯é€šå¸¸ç”¨äºè¿›è¡Œå›¾åƒçš„ä¸Šé‡‡æ ·ï¼Œæ¢å¤åˆ†è¾¨ç‡ã€‚åˆç§°transposed
convolutionæˆ–æ˜¯Fractionally-strided
convolutionã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆèŠä¸€èŠä¸ºä»€ä¹ˆéœ€è¦åå·ç§¯æ¥è¿›è¡Œä¸Šé‡‡æ ·ï¼Ÿ</p>
<p>â€‹
åœ¨åå·ç§¯å‰ï¼Œäººä»¬ä¸Šé‡‡æ ·é€šå¸¸é‡‡ç”¨æ’å€¼çš„æ–¹æ³•å»è¿›è¡Œï¼Œä½†æ˜¯æ’å€¼çš„æ–¹æ³•å®Œå…¨æ˜¯ç”±äººå·¥å®šä¹‰è§„åˆ™ï¼Œå¹¶ä¸èƒ½å¤Ÿå¯¹äºä¸åŒå›¾åƒçš„æ’å€¼æœ‰ç‰¹å®šçš„ä¼˜åŒ–ï¼Œä¹Ÿæ²¡æœ‰å¯è°ƒæ•´å‚æ•°çš„ç©ºé—´ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬æƒ³è¦è®©ç½‘ç»œèƒ½å¤Ÿå­¦å‡ºä¸€ç§æœ€ä¼˜åŒ–çš„ä¸Šé‡‡æ ·æ–¹æ¡ˆï¼Œå°±æ˜¯æˆ‘ä»¬çš„åå·ç§¯æ“ä½œã€‚</p>
<p>â€‹
ä¼—æ‰€å‘¨çŸ¥å¦‚ä¸‹æ‰€ç¤ºæ˜¯ä¸€ä¸ªæ™®é€šçš„å·ç§¯æ“ä½œï¼Œæˆ‘ä»¬æ‹¿ä¸€ä¸ª3*3çš„å·ç§¯æ ¸å»å·ä¸€ä¸ª4*4çš„çŸ©é˜µï¼Œpadding=0ï¼Œstride=1ï¼Œå¾—åˆ°äº†ä¸€ä¸ª2*2çš„çŸ©é˜µã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114210644864.png" /></p>
<p>â€‹
ä»å®è´¨çš„è§’åº¦å»ç†è§£å·ç§¯è¿™ä¸€ä»¶äº‹æƒ…ï¼Œå…¶å®å®ƒå°±æ˜¯å»ºç«‹äº†è¾“å…¥ä¸è¾“å‡ºå›¾åƒçš„åƒç´ å¯¹åº”å…³ç³»ï¼Œæ¯”å¦‚è¯´æŒ‰ç…§ä¸Šå›¾æ‰€ç¤ºçš„å†…å®¹ï¼Œè¾“å…¥å›¾åƒä¸­æ¯9ä¸ªåƒç´ ï¼Œé€šè¿‡å·ç§¯æ ¸ï¼Œå»ºç«‹èµ·äº†å’Œè¾“å‡ºå›¾åƒä¸­1ä¸ªåƒç´ çš„æ˜ å°„å…³ç³»ã€‚æ‰€ä»¥Convolutionå»ºç«‹çš„æ˜¯ä¸€ä¸ªâ€œå¤šå¯¹ä¸€â€çš„åƒç´ æ˜ å°„å…³ç³»ã€‚é‚£ä¹ˆï¼Œé¡¾åæ€ä¹‰ï¼ŒDeconvolutionæœ¬èº«åº”è¯¥è¦åšçš„å°±æ˜¯ä»outputåˆ°inputä¹‹é—´ï¼Œå»ºç«‹â€œä¸€å¯¹å¤šâ€çš„åƒç´ æ˜ å°„å…³ç³»ã€‚ä¹Ÿå°±æ˜¯è¯´ä»outputçš„ä¸€ä¸ªå€¼ä¸­è®¡ç®—å‡ºinputçš„9ä¸ªå€¼ã€‚çœ‹åˆ°è¿™é‡Œä¹Ÿè®¸ä¼šæœ‰äº›æ‡µï¼Œå®é™…ä¸Šæ¥è¯´ï¼Œå·ç§¯è¿™ä¸ªæ“ä½œæ˜¯æ²¡æ³•é€†å‘è¿›è¡Œçš„ï¼Œæˆ‘ä»¬è¿™è¾¹è¯´çš„åå·ç§¯åªæ˜¯ä¸€ç§å½¢å¼ï¼Œå› ä¸ºå…¶æ¯”è¾ƒåƒè€Œå·²ã€‚</p>
<p>â€‹
é‚£ä¹ˆåå·ç§¯æ˜¯å¦‚ä½•è¿›è¡Œçš„å‘¢ï¼Ÿæˆ‘ä»¬å…ˆå†æ¥çœ‹ä¸€çœ‹å·ç§¯çš„å¦ä¸€ç§è®¡ç®—å½¢å¼ï¼ˆé™¤äº†ç§»åŠ¨å·ç§¯æ ¸éå†ä»¥å¤–ï¼‰â€”â€”
ä½¿ç”¨çŸ©é˜µç›¸ä¹˜çš„å½¢å¼è¿›è¡Œè®¡ç®—ï¼Œç„¶åèƒ½å¤Ÿå¾ˆå¥½çš„æ¨å‡ºå¾—åˆ°åå·ç§¯çš„è®¡ç®—å½¢å¼ã€‚</p>
<p>ä»ç„¶ä»¥ä¸Šé¢çš„ä¾‹å­ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¦‚æœæƒ³è¦ä¸€æ¬¡æ€§è®¡ç®—æ•´ä¸ªouputä¸­çš„å€¼ï¼Œå¯ä»¥å¦‚ä¸‹æ“ä½œï¼š</p>
<p>â€‹ 1ã€å°†inputå±•å¹³ï¼Œæˆä¸ºä¸€ä¸ª16 * 1çš„çŸ©é˜µAã€‚</p>
<p>â€‹ 2ã€å°†kernelæŒ‰ç…§ä¸€å®šè§„åˆ™æ‰©å……ï¼Œæ‰©å……æˆä¸ºä¸€ä¸ª4 * 16çš„çŸ©é˜µB</p>
<p>â€‹ 3ã€å°†çŸ©é˜µAå’ŒçŸ©é˜µBè®¡ç®—çŸ©é˜µä¹˜æ³•ï¼Œå¾—åˆ°ä¸€ä¸ª1 * 4çš„å‘é‡Cï¼Œå°†å…¶reshapeæˆ2
* 2å³outputã€‚</p>
<p>é‚£ä¹ˆåœ¨æ­¥éª¤2ä¸­çš„â€œæŒ‰ç…§ä¸€å®šè§„åˆ™å¡«å……â€æ˜¯æŒ‡ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>â€‹ å…¶å®å°±æ˜¯é‡æ–°æ’åˆ—ä¸€ä¸‹kernelçŸ©é˜µ,
ä½¿å¾—æˆ‘ä»¬é€šè¿‡ä¸€æ¬¡çŸ©é˜µä¹˜æ³•å°±èƒ½è®¡ç®—å‡ºå·ç§¯æ“ä½œåçš„çŸ©é˜µã€‚ä»¥ä¸Šè¿°çš„å·ç§¯æ ¸ä¸ºä¾‹ï¼Œåº”å½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114210739770.png" /></p>
<p>ç„¶åæˆ‘ä»¬å‘ç°ï¼ŒåŸæ¥å·ç§¯æ“ä½œï¼Œå¯ä»¥å†™æˆä¸¤ä¸ªçŸ©é˜µç›¸ä¹˜çš„å½¢å¼ï¼Œåœ¨ä¸Šè¿°ä¾‹å­ä¸­å°±æ˜¯ï¼š</p>
<p>Bï¼ˆ4 * 16ï¼‰Â· Aï¼ˆ16 * 1ï¼‰ = Cï¼ˆ4 * 1ï¼‰--ã€‹reshape --ã€‹ outputï¼ˆ2 *
2ï¼‰</p>
<p>â€‹ é‚£ä¹ˆï¼Œç°åœ¨åå·ç§¯è¦å¹²çš„äº‹æƒ…å…¶å®å°±æ˜¯è®© <span
class="math inline">\(B^T\)</span>ï¼ˆ16*4ï¼‰Â· <span
class="math inline">\(C\)</span>ï¼ˆ4*1ï¼‰å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ª16*1çš„çŸ©é˜µï¼Œç„¶åè¿›è¡Œreshapeå°±å¯ä»¥å˜æˆä¸€ä¸ª4*4çš„å›¾åƒï¼Œå…¶åˆ†è¾¨ç‡ä¸ºæœ€å¼€å§‹è¾“å…¥çš„2*2çš„å›¾åƒçš„ä¸¤å€ï¼Œå°±å¯ä»¥å®Œæˆåå·ç§¯ã€‚</p>
<p>â€‹
å…¶å®ï¼ŒæŒ‰ç…§ä¸Šè¿°çš„åšæ³•ï¼Œæˆ‘ä»¬å°±å»ºç«‹äº†ä¸€ä¸ª1å¯¹å¤šçš„æ˜ å°„å…³ç³»ï¼Œè¯·æ³¨æ„ï¼Œåœ¨å®é™…æ“ä½œä¸­ï¼Œå…¶å®å¹¶ä¸éœ€è¦å»è®¡ç®—åå·ç§¯çš„çŸ©é˜µBå†…éƒ¨åˆ°åº•æ˜¯ä»€ä¹ˆä¿¡æ¯ï¼ŒBå†…éƒ¨çš„å‚æ•°æ˜¯å¯ä»¥è®©ç½‘ç»œè¿›è¡Œå­¦ä¹ è€Œå¾—åˆ°çš„ï¼Œç½‘ç»œå­¦ä¹ å¾—åˆ°çš„å‚æ•°å¾€å¾€å°±æ˜¯é’ˆå¯¹äºè¿™ä¸€ç»„è®­ç»ƒé›†æˆ–è€…é’ˆå¯¹äºç‰¹å®šä»»åŠ¡è€Œè¨€ï¼Œæœ€å¥½çš„ä¸€ä¸ªä¸Šé‡‡æ ·çš„æ–¹æ¡ˆã€‚</p>
<p>â€‹ æ‰€ä»¥ä¸¥æ ¼æ¥è¯´ï¼Œåå·ç§¯å¹¶ä¸ç®—å·ç§¯ï¼Œåªæ˜¯å¦ä¸€ç§å½¢å¼ç½¢äº†ã€‚</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
        <tag>Deconvolution</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°4â€”â€”Depth-wiseå·ç§¯ &amp; Point-wiseå·ç§¯</title>
    <url>/2022/01/05/d37a1913ba03/</url>
    <content><![CDATA[<p><strong>æç¤ºï¼šé˜…è¯»æœ¬æ–‡å‰éœ€è¦ä½ æŒæ¡å·ç§¯ç›¸å…³æ“ä½œæ¦‚å¿µ</strong></p>
<h3 id="normal-convolution">1ã€Normal Convolution</h3>
<p>â€‹
è¾“å…¥ä¸€å¼ 3é€šé“çš„å›¾åƒï¼Œæˆ‘ä»¬æœ‰4ä¸ª3<strong>3</strong>3çš„å·ç§¯æ ¸ï¼Œå·å®Œä»¥åï¼Œä¼šç”Ÿæˆ4ä¸ªç‰¹å¾å›¾ã€‚ç‰¹å¾å›¾çš„æ•°é‡ç­‰äºå·ç§¯æ ¸çš„æ•°é‡ã€‚æ¯ä¸ªå·ç§¯æ ¸çš„é€šé“æ•°ä¸å›¾åƒçš„é€šé“æ•°ä¸€è‡´ï¼Œä¸€ä¸€å¯¹åº”ç›¸ä¹˜ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114211015420.png" /></p>
<h3 id="depth-wise-convolution">2ã€Depth-Wise Convolution</h3>
<p>â€‹ Depthwise
Convolutionçš„ä¸€ä¸ªå·ç§¯æ ¸è´Ÿè´£ä¸€ä¸ªé€šé“ï¼Œä¸€ä¸ªé€šé“åªè¢«ä¸€ä¸ªå·ç§¯æ ¸å·ç§¯ã€‚ä¸Šé¢æ‰€æåˆ°çš„å¸¸è§„å·ç§¯æ¯ä¸ªå·ç§¯æ ¸æ˜¯åŒæ—¶æ“ä½œè¾“å…¥å›¾ç‰‡çš„æ¯ä¸ªé€šé“ã€‚</p>
<p>â€‹ åŒæ ·æ˜¯å¯¹äºä¸€å¼ ä¸‰é€šé“è¾“å…¥å›¾åƒï¼ŒDepthwise
Convolutionä¸åŒäºä¸Šé¢çš„å¸¸è§„å·ç§¯ï¼Œå…¶å®Œå…¨æ˜¯åœ¨äºŒç»´å¹³é¢å†…è¿›è¡Œã€‚å·ç§¯æ ¸çš„æ•°é‡åº”å½“ä¸è¾“å…¥çš„å›¾åƒçš„é€šé“æ•°ç›¸åŒï¼ˆå› ä¸ºé€šé“å’Œå·ç§¯æ ¸æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼‰ã€‚æ‰€ä»¥ä¸€ä¸ªä¸‰é€šé“çš„å›¾åƒç»è¿‡è¿ç®—åç”Ÿæˆäº†3ä¸ªFeature
Mapã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114211022892.png" /></p>
<p>â€‹ æ€»ç»“è€Œè¨€ï¼šDepthwise Convolutionå®Œæˆåçš„Feature
mapæ•°é‡ä¸è¾“å…¥çš„é€šé“æ•°ç›¸åŒï¼Œæ— æ³•æ‰©å±•ã€‚ä¸”è¿™ç§è¿ç®—å¯¹è¾“å…¥å±‚çš„æ¯ä¸ªé€šé“ç‹¬ç«‹è¿›è¡Œå·ç§¯è¿ç®—ï¼Œæ²¡æœ‰æœ‰æ•ˆçš„åˆ©ç”¨ä¸åŒé€šé“åœ¨ç›¸åŒç©ºé—´ä½ç½®ä¸Šçš„ç‰¹å¾ä¿¡æ¯ã€‚</p>
<p>â€‹
ä½†æ˜¯ï¼ŒDepthwiseé€šè¿‡æ·±åº¦ä»¥åŠå¹¿åº¦çš„æ“ä½œèƒ½å¾ˆå¥½çš„ä¿ç•™å„ä¸ªé€šé“ä¿¡æ¯çš„åŒæ—¶ï¼Œé™ä½äº†è®¡ç®—å¼€é”€ã€‚è€Œè¿™ä¸€æ€æƒ³ä¹Ÿé€æ¸åº”ç”¨åˆ°äº†ç§»åŠ¨ç«¯ç¥ç»ç½‘ç»œã€‚</p>
<h3 id="point-wise-convolution1x1å·ç§¯">3ã€Point-Wise
Convolution(1x1å·ç§¯)</h3>
<p>â€‹ Pointwise Convolutionçš„è¿ç®—çš„å·ç§¯æ ¸çš„å°ºå¯¸ä¸º
1Ã—1Ã—Mï¼ŒMä¸ºè¾“å…¥çš„å›¾åƒçš„é€šé“æ•°ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šè¾“å…¥å›¾åƒä¸º3é€šé“ï¼Œç»è¿‡4ä¸ª1x1x3çš„å·ç§¯æ ¸ä»¥åï¼Œç”Ÿæˆ4ä¸ªç‰¹å¾å›¾ï¼Œç‰¹å¾å›¾å¤§å°å¹¶ä¸ä¼šå˜åŒ–ï¼Œæ•…è€Œè¿™é‡Œçš„å·ç§¯è¿ç®—å…¶å®å°±æ˜¯å°†è¾“å…¥çš„å›¾åƒåœ¨æ·±åº¦æ–¹å‘ä¸Šè¿›è¡ŒåŠ æƒç»„åˆï¼Œç”Ÿæˆæ–°çš„Feature
mapã€‚</p>
<p>â€‹ è¯¦è§ï¼š<a
href="https://blog.fantast.top/2022/01/07/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E7%B3%BB%E5%88%97%E7%AC%94%E8%AE%B0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%9F%BA%E7%A1%80%E7%B3%BB%E5%88%97%E7%AC%94%E8%AE%B05%E2%80%941x1%E5%8D%B7%E7%A7%AF&amp;%E9%83%A8%E5%88%86%E5%8D%B7%E7%A7%AF&amp;%E7%A9%BA%E6%B4%9E%E5%8D%B7%E7%A7%AF&amp;%E5%8F%AF%E5%8F%98%E6%80%A7%E5%8D%B7%E7%A7%AF/">æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°5â€”â€”1x1å·ç§¯
&amp; éƒ¨åˆ†å·ç§¯ &amp; ç©ºæ´å·ç§¯ &amp; å¯å˜å½¢å·ç§¯</a></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114211035827.png" /></p>
<h3 id="depth-wise-separable-convolution">4ã€Depth-Wise Separable
Convolution</h3>
<p>â€‹ Depthwise Separable
Convolutionæ˜¯å°†ä¸€ä¸ªå®Œæ•´çš„å·ç§¯è¿ç®—åˆ†è§£ä¸ºä¸¤æ­¥è¿›è¡Œï¼Œå³ä¸Šé¢æ‰€è¿°çš„Depthwise
Convolutionä¸Pointwise Convolutionã€‚</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
        <tag>Convolution</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°5â€”â€”1x1å·ç§¯ &amp; éƒ¨åˆ†å·ç§¯ &amp; ç©ºæ´å·ç§¯ &amp; å¯å˜å½¢å·ç§¯</title>
    <url>/2022/01/07/3664afb64da5/</url>
    <content><![CDATA[<h3 id="ä¸€1-x-1-å·ç§¯">ä¸€ã€1 X 1 å·ç§¯</h3>
<h4 id="å®ç°ç‰¹å¾çš„å‡é™ç»´">1ã€å®ç°ç‰¹å¾çš„å‡é™ç»´</h4>
<p>â€‹
å½“1*1å·ç§¯å‡ºç°æ—¶ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å®ƒä½œç”¨æ˜¯å‡/é™ç‰¹å¾çš„ç»´åº¦ï¼Œè¿™é‡Œçš„ç»´åº¦æŒ‡çš„æ˜¯é€šé“æ•°ï¼ˆåšåº¦ï¼‰ï¼Œè€Œä¸æ”¹å˜å›¾ç‰‡çš„å®½å’Œé«˜ã€‚</p>
<p>â€‹
å› ä¸º1*1çš„å·ç§¯æ ¸ï¼Œå¹¶ä¸ä¼šæ”¹å˜å›¾åƒçš„å®½å’Œé«˜ï¼Œä½†æ˜¯å…¶èƒ½å¤Ÿé€šè¿‡å·ç§¯æ ¸çš„æ•°é‡ï¼Œæ¥è°ƒèŠ‚è¾“å‡ºçš„feature
mapçš„é€šé“æ•°ã€‚åŒæ—¶ï¼Œå…¶å¯¹ä¸åŒé€šé“ä¸Šçš„åƒç´ ç‚¹è¿›è¡Œçº¿æ€§ç»„åˆï¼Œæœ‰åŠ©äºé€šé“é—´ä¿¡æ¯çš„äº¤äº’å’Œæ•´åˆè¿‡ç¨‹</p>
<h4 id="å‡å°‘æ¨¡å‹å‚æ•°é‡">2ã€å‡å°‘æ¨¡å‹å‚æ•°é‡</h4>
<p>â€‹ è¿™ä¸€æƒ³æ³•æœ€æ—©åœ¨GoogleNetä¸­è¢«æå‡ºï¼Œæ¯”å¦‚è¯´å¦‚ä¸‹ä¸¤ä¸ªInceptionæ¨¡å—ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114211201756.png" /></p>
<p>â€‹
ä»ç›´è§‚ä¸Šæ¥çœ‹ï¼Œæ„Ÿè§‰åƒæ˜¯åªæœ‰3*3å·ç§¯çš„æ¨¡å—ä¼šæ‹¥æœ‰æ›´å°‘çš„è®­ç»ƒæ•°æ®ï¼Œå®åˆ™ä¸ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—ä¸€ä¸‹è®­ç»ƒæ•°æ®ä¸ªæ•°ï¼š</p>
<p><strong>æƒ…å†µ1:</strong></p>
<ol type="1">
<li><p>1 * 1å·ç§¯éƒ¨åˆ†ï¼š 96 * 32 * 1 * 1= 3072ä¸ª</p></li>
<li><p>3 * 3å·ç§¯éƒ¨åˆ†ï¼š 32 * 48 * 3 * 3= 13824ä¸ª</p>
<p>æ€»è®¡16896ä¸ªè®­ç»ƒå‚æ•°</p></li>
</ol>
<p><strong>æƒ…å†µ2:</strong> æ€»è®¡ 96*48*3*3 = 41472ä¸ªè®­ç»ƒå‚æ•°</p>
<p>â€‹ ä»å®é™…ä¸Šæ¥çœ‹ï¼Œå¸¦1 *
1å·ç§¯çš„æ¨¡å‹å‚æ•°é‡æ›´å°‘ï¼Œæœ¬è´¨åŸå› æ˜¯å› ä¸º1*1çš„å·ç§¯å¯¹æ•°æ®çš„ç‰¹å¾å‘é‡è¿›è¡Œäº†é™ç»´çš„å¤„ç†ï¼Œä½¿å¾—ç‰¹å¾é€šé“æ•°ç›®å…ˆæœ‰äº†ä¸€å®šçš„å‡å°‘ã€‚</p>
<p>â€‹ å¦‚ä¸‹æ‰€ç¤ºï¼šåœ¨ResNetä¸­çš„æ®‹å·®æ¨¡å—ä½¿ç”¨1*1çš„å·ç§¯æ ¸çš„æ„ä¹‰ä¹Ÿåœ¨äºæ­¤ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114211323250.png" /></p>
<h3 id="äºŒç©ºæ´å·ç§¯dilated-convolution">äºŒã€ç©ºæ´å·ç§¯ï¼ˆDilated
Convolutionï¼‰</h3>
<p>â€‹
é¡¾åæ€ä¹‰ï¼Œå…¶åšæ³•å°±æ˜¯åœ¨å·ç§¯mapä¸­åŠ å…¥ç©ºæ´çš„éƒ¨åˆ†ï¼Œä»¥æ­¤å¢åŠ æ„Ÿå—åŸŸã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114211417135.png" /></p>
<p>â€‹ å³ä¾§ä¸ºæ™®é€šå·ç§¯ï¼Œå·¦ä¾§ä¸ºç©ºæ´å·ç§¯ã€‚</p>
<p>â€‹
è¿™ä¸ªåšæ³•èµ·æºäºæœ€å¼€å§‹çš„è¯­ä¹‰åˆ†å‰²é¢†åŸŸï¼Œä¸»è¦é—®é¢˜åœ¨äºCNNæœ¬èº«å¯èƒ½å­˜åœ¨ä¸€äº›è‡´å‘½æ€§çš„ç¼ºé™·ï¼Œæ¯”å¦‚up-samplingå’Œpooling
layerçš„è®¾è®¡ã€‚é—®é¢˜ä¸»è¦åœ¨äºï¼š</p>
<p>â€‹ 1ã€ä¸Šé‡‡æ ·å’Œæ± åŒ–å±‚æ˜¯äººä¸ºè®¾è®¡å¥½çš„ï¼Œæ˜¯ä¸å¯å­¦ä¹ çš„ã€‚</p>
<p>â€‹ 2ã€å®¹æ˜“ä¸¢å¤±å†…éƒ¨æ•°æ®ç»“æ„ä¸ç©ºé—´çš„å±‚æ¬¡åŒ–ä¿¡æ¯</p>
<p>â€‹ 3ã€å°ç‰©ä½“çš„ä¿¡æ¯æ— æ³•é‡å»ºï¼Œå‡è®¾æœ‰å¤šä¸ªpooling
layerï¼Œé‚£ä¹ˆä»ç†è®ºä¸Šæ¥è®²åœ¨ä¸€å®šå°çš„èŒƒå›´å†…çš„åƒç´ çš„ç‰©ä½“æ˜¯æ— æ³•è¢«é‡å»ºçš„ã€‚</p>
<p>â€‹
æ‰€ä»¥æœ‰äººæå‡ºäº†ç©ºæ´å·ç§¯çš„æ€æƒ³ã€‚å…¶æœ¬èº«é¿å…äº†ä¸€éƒ¨åˆ†ä¸Šè¿°è®²åˆ°çš„2ã€3çš„é—®é¢˜ï¼Œä½†æ˜¯å…¶ä¹Ÿå­˜åœ¨ä¸€äº›æ½œåœ¨é—®é¢˜ï¼Œå…·ä½“å¯ä»¥å‚è€ƒï¼š<a
href="https://www.zhihu.com/question/54149221">å¦‚ä½•ç†è§£ç©ºæ´å·ç§¯ï¼ˆdilated
convolutionï¼‰ï¼Ÿ</a></p>
<p>â€‹
æœ€ç»ˆï¼Œå›¾æ£®ç»„æå‡ºäº†ä¸€ä¸ªHDCçš„è®¾è®¡ç»“æ„ï¼Œæ¥æ»¡è¶³æ•´ä¸ªåŸºäºç©ºæ´å·ç§¯çš„è®¾è®¡ã€‚è¾ƒä¸ºå…·ä½“çš„å†…å®¹ä¹Ÿå¯ä»¥å‚è€ƒä¸Šè¿°çš„æ–‡ç« ã€‚</p>
<h3 id="ä¸‰éƒ¨åˆ†å·ç§¯partial-convolution">ä¸‰ã€éƒ¨åˆ†å·ç§¯ï¼ˆPartial
Convolutionï¼‰</h3>
<p>â€‹ éƒ¨åˆ†å·ç§¯åœ¨è¿™ç¯‡è®ºæ–‡ä¸­è¢«æå‡ºï¼Œç”¨äºè¿›è¡Œå›¾åƒè¡¥å…¨çš„ä»»åŠ¡ï¼Œã€ŠImage
Inpainting for Irregular Holes Using Partial Convolutionsã€‹</p>
<p>â€‹
åœ¨å›¾åƒè¡¥å…¨é¢†åŸŸä¸­ï¼Œè¿™ç¯‡è®ºæ–‡å‰é€šå¸¸ä½¿ç”¨å·ç§¯å±‚å¯¹æœ‰æ•ˆåƒç´ å’Œmaskåƒç´ æ— å·®åˆ«çš„åšå·ç§¯ï¼Œå®¹æ˜“å¯¼è‡´é¢œè‰²å·®å¼‚å’Œä¼ªå½±ã€‚è€Œä¸”å…ˆå‰çš„å·¥ä½œéƒ½æ˜¯èšç„¦äºä¸€ä¸ªå›¾åƒä¸­å¿ƒçš„è§„åˆ™åŒºåŸŸï¼Œå¹¶ä¸”éƒ½éœ€è¦å¾ˆæ˜‚è´µçš„åå¤„ç†æœºåˆ¶ã€‚</p>
<p>â€‹
ç›¸æ¯”äºäººä»¬ä»¥å‰ä½¿ç”¨çš„éç¥ç»ç½‘ç»œçš„æ–¹æ³•ï¼ˆPatchMatchç­‰ï¼‰ï¼Œä½¿ç”¨ç¥ç»ç½‘ç»œçš„æ–¹æ³•å®¹æ˜“å­¦ä¹ åˆ°è¯­ä¹‰çš„ä¼˜ç‚¹å’Œæœ‰æ„ä¹‰çš„éšè—è¡¨ç¤ºä¿¡æ¯ï¼Œå¯¹äºå›¾åƒè¡¥å…¨æœ‰å¾ˆå¤§çš„æ„ä¹‰ã€‚ä½†æ˜¯è¿™äº›ç½‘ç»œä½¿ç”¨å·ç§¯æ ¸çš„æ—¶å€™ï¼Œä½¿ç”¨ä¸€ä¸ªå›ºå®šçš„å€¼å°†è¾“å…¥å›¾åƒä¸­è¢«maskçš„åœ°æ–¹ä»£æ›¿ï¼Œç„¶åå»å·ç§¯ï¼Œè¿™æ ·å°±å¾ˆå®¹æ˜“å¯¼è‡´å­”æ´åŒºåŸŸå†…çš„çº¹ç†ç¼ºå¤±ï¼Œæˆ–è€…æ˜¯è¾¹ç¼˜å‡ºç°ä¼ªå½±ã€‚ï¼ˆå°±æ¯”å¦‚è¯´ä½¿ç”¨ç»å…¸å·ç§¯çš„U-Netæ¶æ„ã€‚</p>
<p>â€‹
å…·ä½“ä¸€ç‚¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå…ˆä½¿ç”¨å›ºå®šå€¼mæ›¿æ¢æ‰maskä¸º0çš„åŒºåŸŸï¼Œç„¶åè¿›è¡Œå·ç§¯ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114211456573.png" /></p>
<p>â€‹
è€Œåœ¨è¿™ç¯‡è®ºæ–‡ä¸­æå‡ºäº†éƒ¨åˆ†å·ç§¯çš„æ¦‚å¿µï¼Œåªé’ˆå¯¹äºæœ‰æœ‰æ•ˆåƒç´ çš„éƒ¨åˆ†è¿›è¡Œå·ç§¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿè‡ªåŠ¨çš„æ›´æ–°maskã€‚</p>
<h4 id="éƒ¨åˆ†å·ç§¯å…¬å¼">1ã€éƒ¨åˆ†å·ç§¯å…¬å¼ï¼š</h4>
<p>â€‹ é¦–å…ˆå¦‚ä¸‹æ‰€ç¤ºä¸ºéƒ¨åˆ†å·ç§¯çš„å…¬å¼ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114211521396.png" /></p>
<p>â€‹
ä»ç„¶ä»¥å¦‚ä¸‹æ‰€ç¤ºä¸ºä¾‹ï¼šçº¢è‰²ä»£è¡¨å›¾åƒæ•°æ®ï¼Œè“è‰²ä»£è¡¨maskæ•°æ®ï¼Œç»¿è‰²ä»£è¡¨å·ç§¯æ ¸ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114211532929.png" /></p>
<p>æˆ‘ä»¬é€‰æ‹©å…¶ä¸­çº¢è‰²å›¾åƒä¸­çš„ä¸¤ä¸ªè“è‰²æ¡†èµ·æ¥çš„éƒ¨åˆ†åšå·ç§¯ï¼Œä½œä¸ºç¤ºä¾‹ï¼š</p>
<p>é¦–å…ˆå…¬å¼ä¸­å„ä¸ªè¿ç®—ç¬¦å·çš„å«ä¹‰å¦‚ä¸‹è‹±æ–‡æè¿°æ‰€ç¤ºï¼Œæ€»ä½“çš„æ­¥éª¤ä¸»è¦å°±æ˜¯ï¼š</p>
<p>â€‹ 1ï¼‰å°†è¢«å·ç§¯çš„åŒºåŸŸå…ˆå±•å¼€ï¼Œå½¢æˆX</p>
<p>â€‹ 2ï¼‰å°†maskå¯¹åº”çš„åŒºåŸŸå±•å¼€ï¼Œå½¢æˆM</p>
<p>â€‹
3ï¼‰Xå’ŒMåšç‚¹å¯¹ç‚¹ä¹˜ç§¯âŠ™ï¼Œç„¶åå†ä¹˜ä¸Šä¸€ä¸ªç¼©æ”¾å› å­ï¼Œæ¥è°ƒæ•´æœ‰æ•ˆè¾“å…¥çš„å˜åŒ–é‡ã€‚</p>
<p>â€‹
4ï¼‰SUM(1)ä»£è¡¨åŒºåŸŸå¤§å°å’Œå·ç§¯æ ¸ä¸€è‡´ï¼Œä½†å€¼éƒ½æ˜¯1çš„åŒºåŸŸï¼Œæ‰€ä»¥åœ¨æ­¤å¤„SUM(1)ä¸º9ï¼Œè€ŒSUM(M)ä¸º7ï¼Œå› ä¸ºè¯¥å¯¹åº”åŒºåŸŸçš„maskä¸­æœ‰7ä¸ª1.</p>
<p>â€‹ 5ï¼‰æœ€åå†å°†å·ç§¯æ ¸å±•å¼€å½¢æˆWï¼Œä¸¤ä¸ªå‘é‡ç›¸ä¹˜å°±å®Œæˆäº†è¯¥åŒºåŸŸçš„å·ç§¯ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å›¾ç‰‡2.png" /></p>
<p>â€‹ å¦å¤–ä¸€ä¸ªåŒºåŸŸï¼Œç”±äºmaskå†…çš„å€¼éƒ½æ˜¯0ï¼Œæ‰€ä»¥æœ€ç»ˆè¾“å‡ºçš„å€¼ç›´æ¥ä¸º0.</p>
<h4 id="è‡ªåŠ¨æ›´æ–°maskè§„åˆ™">2ã€è‡ªåŠ¨æ›´æ–°Maskè§„åˆ™</h4>
<p>â€‹
å…·ä½“æ›´æ–°è§„åˆ™æè¿°å¦‚ä¸‹ï¼šå¦‚æœå·ç§¯èƒ½å¤Ÿæ ¹æ®è‡³å°‘ä¸€ä¸ªæœ‰æ•ˆè¾“å…¥å€¼æ¥è®¡ç®—è¾“å‡ºè¾“å‡ºï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨ä¸‹ä¸€æ­¥ä¸­ï¼Œå°±æŠŠæ­¤åƒç´ ç‚¹çš„maskæ ‡è®°ä¸º1.å†è®²çš„é€šä¿—ä¸€ç‚¹ï¼Œå…¶å®å°±æ˜¯è¯¥èŒƒå›´çš„maskå†…åªè¦æœ‰1ï¼Œé‚£å°±åœ¨ä¸‹ä¸€å±‚çš„å·ç§¯ä¸­ï¼Œæ›´æ–°maskåœ¨æ­¤ç‚¹çš„å€¼è‡³1.</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114211755555.png" /></p>
<p>â€‹ å…·ä½“çš„ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å›¾ç‰‡3.png" /></p>
<p>â€‹
æ‰€ä»¥ä½ ä¼šå‘ç°ï¼Œåœ¨éƒ¨åˆ†å·ç§¯çš„è‡ªåŠ¨æ›´æ–°maskçš„è¿‡ç¨‹ä¸­ï¼Œåªè¦éƒ¨åˆ†å·ç§¯å±‚å åŠ çš„è¶³å¤Ÿå¤šï¼Œæœ€åä»»ä½•maskéƒ½ä¼šé€æ¸å˜ä¸ºæ‰€æœ‰éƒ½æ˜¯1çš„å½¢å¼ï¼Œä»è€Œè®¡ç®—å‡ºéœ€å¡«è¡¥åŒºåŸŸçš„å†…å®¹ã€‚</p>
<p>â€‹
æ‰€ä»¥æœ€ç»ˆè¯¥è®ºæ–‡åœ¨å›¾åƒè¾¹ç•Œä½¿ç”¨å¸¦æœ‰é€‚å½“æ©ç çš„éƒ¨åˆ†å·ç§¯æ¥ä»£æ›¿å…¸å‹çš„å¡«å……ã€‚è¿™ç¡®ä¿äº†å›¾åƒmaskè¾¹ç¼˜å¤„çš„ä¿®å¤å†…å®¹ä¸ä¼šå—åˆ°å›¾åƒå¤–éƒ¨æ— æ•ˆå€¼çš„å½±å“ã€‚</p>
<h3 id="å››å¯å˜å½¢å·ç§¯deformable-convolution">å››ã€å¯å˜å½¢å·ç§¯ï¼ˆDeformable
Convolutionï¼‰</h3>
<p>â€‹
æ™®é€šçš„å·ç§¯åœ¨åº”å¯¹ä¸€äº›ç‰©ä½“å¤æ‚å½¢å˜çš„åœºæ™¯çš„æ—¶å€™ï¼Œå¾€å¾€æ— æ³•å¾—åˆ°å¥½çš„ç»“æœã€‚è¿™ä¸ªæ—¶å€™å°±æœ‰äººæå‡ºäº†å¯å˜æ€§å·ç§¯ã€‚</p>
<p>â€‹ ç®€å•è€Œè¨€ï¼ŒDeformable Conv
åœ¨æ„Ÿå—é‡ä¸­å¼•å…¥äº†åç§»é‡ï¼Œè€Œä¸”è¿™åç§»é‡æ˜¯å¯å­¦ä¹ çš„ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—æ„Ÿå—é‡ä¸å†æ˜¯å•ä¸€çš„æ–¹å½¢ï¼Œè€Œæ˜¯èƒ½å¤Ÿå°½å¯èƒ½ä¸ç‰©ä½“çš„å®é™…å½¢çŠ¶è´´è¿‘ï¼Œäºæ˜¯å·ç§¯åŒºåŸŸä¾¿å§‹ç»ˆè¦†ç›–åœ¨ç‰©ä½“å½¢çŠ¶å‘¨å›´ï¼Œæ— è®ºç‰©ä½“å¦‚ä½•å½¢å˜ï¼ŒåŠ å…¥å¯å­¦ä¹ çš„åç§»é‡åéƒ½å¯ä»¥æå®šã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114211950684.png" alt="image-20220114211950684" style="zoom:150%;" /></p>
<p>â€‹</p>
<p>â€‹ ä¸€ä¸ªäºŒç»´çš„å·ç§¯é€šå¸¸ç”±ä¸¤æ­¥ç»„æˆï¼Œç¬¬ä¸€æ­¥æ˜¯ä½¿ç”¨ä¸€ä¸ªgrid
Rå»åˆ°è¾“å…¥çš„ç‰¹å¾å›¾ä¸Šè¿›è¡Œé‡‡æ ·ã€‚ç¬¬äºŒæ­¥æ˜¯æ ¹æ®å·ç§¯æ ¸çš„æƒé‡ï¼Œå¯¹æ‰€æœ‰é‡‡æ ·çš„ç‚¹è¿›è¡ŒåŠ æƒæ±‚å’Œã€‚æ¯”å¦‚è¯´åƒä¸‹è¿°è¿™æ ·ä¸€ä¸ªå°±å®šä¹‰äº†ä¸€ä¸ª3*3çš„æ–¹å½¢çš„è¢«å·ç§¯åŒºåŸŸã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114212003778.png" /></p>
<p>â€‹
é‚£ä¹ˆå¯¹äºä¸€ä¸ªæ™®é€šçš„å·ç§¯è€Œè¨€ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹å…¬å¼æ¥è¿›è¡Œè¡¨ç¤ºï¼Œp0å°±æ˜¯å½“å‰ç‚¹ï¼Œpnæ˜¯Rä¸­çš„å€¼ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114212010083.png" /></p>
<p>â€‹ åœ¨å¯å˜å½¢å·ç§¯ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼ŒRè¢«åŠ å¼ºäº†ï¼Œè¿˜å¤šäº†ä¸€ä¸ªoffsetã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114212018393.png" /></p>
<p>â€‹
è¿™æ ·çš„è¯å‘¢ï¼Œé‡‡æ ·å°±åœ¨ä¸€ä¸ªä¸è§„åˆ™çš„å¹¶ä¸”å¸¦æœ‰åç§»çš„ä½ç½®ä¸Šè¿›è¡Œäº†ã€‚é€šå¸¸è€Œè¨€è¿™ä¸ªoffset
âˆ†pn
æ˜¯å°æ•°ï¼Œæ‰€ä»¥é€šå¸¸éœ€è¦é€šè¿‡çº¿æ€§æ’å€¼æ¥è®¡ç®—åƒç´ çš„å€¼ï¼Œå…¬å¼å¦‚ä¸‹æ‰€ç¤ºï¼šå…¶å®å°±æ˜¯x(p)çš„å€¼è¦ç”±å…¶å‘¨å›´æ•´æ•°åƒç´ x(q)åŠ æƒå¾—åˆ°ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114212038364.png" /></p>
<p>â€‹
é‚£ä¹ˆï¼Œå…³é”®çš„é—®é¢˜æ¥äº†ï¼šè¿™ä¸ªoffsetæ€ä¹ˆå¾—åˆ°å‘¢ï¼Ÿ<strong>è¿™ä¸ªoffsetæ˜¯é€šè¿‡å¦ä¸€ä¸ªåœ¨ç›¸åŒçš„è¾“å…¥å›¾åƒä¸Šçš„å·ç§¯å¾—åˆ°çš„ã€‚è¿™ä¸ªå·ç§¯çš„å·ç§¯æ ¸ä¸å½“å‰çš„å¯å˜å½¢å·ç§¯çš„å·ç§¯æ ¸æœ‰ç›¸åŒçš„ç©ºé—´åˆ†è¾¨ç‡ã€‚åŒæ—¶ï¼Œç»è¿‡è¿™ä¸ªå·ç§¯åå¾—åˆ°çš„offestçš„è¾“å‡ºåŸŸï¼Œå’Œè¾“å…¥ä¹Ÿæœ‰åŒæ ·çš„ç©ºé—´åˆ†è¾¨ç‡ã€‚è¾“å‡ºç»´åº¦ä¸º2Nï¼Œåˆ†åˆ«å¯¹åº”Nä¸ª2ç»´çš„offsetsã€‚</strong></p>
<p>â€‹
åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œç”¨æ¥ç”Ÿæˆè¾“å‡ºç‰¹å¾çš„å·ç§¯æ ¸å’Œç”¨æ¥è®¡ç®—offsetsçš„å·ç§¯æ ¸æ˜¯åŒæ—¶è¿›è¡Œå­¦ä¹ çš„ã€‚ä¸‹å›¾æ˜¯ä¸€ä¸ª3*3çš„å¯å˜å½¢å·ç§¯çš„ç¤ºæ„å›¾ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114212046759.png" /></p>
<p>â€‹ è‡³äºæ›´ä¸ºè¯¦ç»†çš„å¯å˜å½¢å·ç§¯æ€æƒ³ä»¥åŠå®éªŒï¼Œå¯ä»¥æ›´æ·±å…¥çš„ç²¾è¯»ã€ŠDeformable
Convolutional Networksã€‹è¿™ç¯‡è®ºæ–‡ã€‚</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
        <tag>Convolution</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°6â€”â€”å…¨å·ç§¯ç½‘ç»œFCN &amp; U-Netç»“æ„</title>
    <url>/2022/01/12/8c9b3da724b3/</url>
    <content><![CDATA[<p>æœ¬æ–‡è®²è§£FCNä¸U-Netç›¸å…³çš„çŸ¥è¯†ï¼Œåœ¨æ­¤ä¹‹å‰ä½ éœ€è¦äº†è§£CNNæ˜¯ä»€ä¹ˆ</p>
<h3 id="ä¸€fcnå…¨å·ç§¯ç½‘ç»œ">ä¸€ã€FCNå…¨å·ç§¯ç½‘ç»œ</h3>
<p>â€‹
é¦–å…ˆï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦å›é¡¾ä¸€ä¸‹CNNçš„æ•´ä½“ç½‘ç»œæ¶æ„ä¸ä¼˜åŠ¿ï¼šCNNç½‘ç»œæœ€åè¾“å‡ºçš„æ˜¯ç±»åˆ«çš„æ¦‚ç‡å€¼ã€‚CNN
çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒçš„å¤šå±‚å·ç§¯ç»“æ„èƒ½è‡ªåŠ¨å­¦ä¹ ç‰¹å¾ï¼Œå¹¶ä¸”å¯ä»¥å­¦ä¹ åˆ°å¤šä¸ªå±‚æ¬¡çš„ç‰¹å¾ï¼š</p>
<p>â€‹ è¾ƒæµ…çš„å·ç§¯å±‚æ„ŸçŸ¥åŸŸè¾ƒå°ï¼Œå­¦ä¹ åˆ°ä¸€äº›å±€éƒ¨åŒºåŸŸçš„ç‰¹å¾ã€‚</p>
<p>â€‹
è€Œè¾ƒæ·±çš„å·ç§¯å±‚å…·æœ‰è¾ƒå¤§çš„æ„ŸçŸ¥åŸŸï¼Œèƒ½å¤Ÿå­¦ä¹ åˆ°æ›´åŠ æŠ½è±¡ä¸€äº›çš„ç‰¹å¾ã€‚è¿™äº›æŠ½è±¡ç‰¹å¾å¯¹ç‰©ä½“çš„å¤§å°ã€ä½ç½®å’Œæ–¹å‘ç­‰æ•æ„Ÿæ€§æ›´ä½ï¼Œä»è€Œæœ‰åŠ©äºè¯†åˆ«æ€§èƒ½çš„æé«˜ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114212245766.png" /></p>
<p>â€‹
è€ŒFCNç›¸è¾ƒäºCNNæ¥è¯´ï¼Œå…¶å°†CNNæœ€åå‡ ä¸ªç”¨äºè¾“å‡ºæ¦‚ç‡çš„å…¨è¿æ¥å±‚éƒ½æ”¹æˆäº†å·ç§¯å±‚ï¼Œä»è€Œä½¿å¾—æ¨¡å‹ç½‘ç»œä¸­æ‰€æœ‰çš„å±‚éƒ½æ˜¯å·ç§¯å±‚ï¼Œæœ€ç»ˆè¾“å‡ºä¸€å¼ å·²ç»labelå¥½çš„å›¾åƒï¼Œæ•…ç§°ä¸ºå…¨å·ç§¯ç½‘ç»œã€‚å…¨å·ç§¯ç¥ç»ç½‘ç»œä¸»è¦ä½¿ç”¨äº†ä¸‰ç§æŠ€æœ¯ï¼š</p>
<p>â€‹ 1ã€å·ç§¯åŒ–ï¼ˆConvolutionalï¼‰</p>
<p>â€‹ 2ã€ä¸Šé‡‡æ ·ï¼ˆUpsampleï¼‰</p>
<p>â€‹ 3ã€è·³è·ƒç»“æ„ï¼ˆSkip Layerï¼‰</p>
<p>â€‹ æ•´ä¸ªFCNç½‘ç»œåŸºæœ¬åŸç†å¦‚å›¾5ï¼ˆåªæ˜¯åŸç†ç¤ºæ„å›¾ï¼‰ï¼š</p>
<p>â€‹ 1ã€imageç»è¿‡å¤šä¸ªå·ç§¯å’Œ+ä¸€ä¸ªmax poolingå˜ä¸ºpool1
featureï¼Œå®½é«˜å˜ä¸º1/2</p>
<p>â€‹ 2ã€pool1 featureå†ç»è¿‡å¤šä¸ªconv+ä¸€ä¸ªmax poolingå˜ä¸ºpool2
featureï¼Œå®½é«˜å˜ä¸º1/4</p>
<p>â€‹ 3ã€pool2 featureå†ç»è¿‡å¤šä¸ªconv+ä¸€ä¸ªmax poolingå˜ä¸ºpool3
featureï¼Œå®½é«˜å˜ä¸º1/8</p>
<p>â€‹ 4ã€......</p>
<p>â€‹ 5ã€ç›´åˆ°pool5 featureï¼Œå®½é«˜å˜ä¸º1/32ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/dsawqeasd.png" /></p>
<p>é‚£ä¹ˆï¼Œå¯¹äºä¸‰ç§ä¸åŒè§„æ ¼å‚æ•°çš„FCNï¼Œåç»­è¿˜åŸæ“ä½œä¹Ÿä¸å¤ªä¸€æ ·ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>â€‹ 1ã€å¯¹äºFCN-32sï¼Œç›´æ¥å¯¹pool5 featureè¿›è¡Œ32å€ä¸Šé‡‡æ ·è·å¾—32x upsampled
featureï¼Œå†å¯¹32x upsampled featureæ¯ä¸ªç‚¹åšsoftmax predictionè·å¾—32x
upsampled feature predictionï¼ˆå³è¯­ä¹‰åˆ†å‰²å›¾ï¼‰ã€‚</p>
<p>â€‹ 2ã€å¯¹äºFCN-16sï¼Œé¦–å…ˆå¯¹pool5 featureè¿›è¡Œ2å€ä¸Šé‡‡æ ·è·å¾—2x upsampled
featureï¼Œå†æŠŠpool4 featureå’Œ2x upsampled
featureé€ç‚¹ç›¸åŠ ï¼Œç„¶åå¯¹ç›¸åŠ çš„featureè¿›è¡Œ16å€ä¸Šé‡‡æ ·ï¼Œå¹¶softmax
predictionï¼Œè·å¾—16x upsampled feature predictionã€‚</p>
<p>â€‹ 3ã€å¯¹äºFCN-8sï¼Œé¦–å…ˆè¿›è¡Œpool4+2x upsampled
featureé€ç‚¹ç›¸åŠ ï¼Œç„¶ååˆè¿›è¡Œpool3+2x
upsampledé€ç‚¹ç›¸åŠ ï¼Œå³è¿›è¡Œæ›´å¤šæ¬¡ç‰¹å¾èåˆã€‚å…·ä½“è¿‡ç¨‹ä¸16sç±»ä¼¼ï¼Œä¸å†èµ˜è¿°ã€‚</p>
<p>â€‹ åœ¨ä¸Šè¿°å¤„ç†è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å‘ç°FCN-16så’ŒFCN-8séƒ½å¼•å…¥äº†skip
connectionï¼Œå°†pool3æˆ–æ˜¯pool4
featureä¸pool5ä¸Šé‡‡æ ·åçš„featureé€åƒç´ ç›¸åŠ ï¼Œè¿›è¡Œå¤šæ¬¡ç‰¹å¾èåˆï¼Œè¿™æ ·å¤„ç†çš„åŸå› åœ¨äºï¼š</p>
<p>â€‹
FCNæ¨¡å‹è™½ç„¶é€šè¿‡å·ç§¯å’Œåå·ç§¯æˆ‘ä»¬åŸºæœ¬èƒ½å®šä½åˆ°ç›®æ ‡åŒºåŸŸï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬ä¼šå‘ç°æ¨¡å‹å‰æœŸæ˜¯é€šè¿‡å·ç§¯ã€æ± åŒ–ã€éçº¿æ€§æ¿€æ´»å‡½æ•°ç­‰ä½œç”¨è¾“å‡ºäº†ç‰¹å¾æƒé‡å›¾åƒï¼Œæˆ‘ä»¬ç»è¿‡åå·ç§¯ç­‰æ“ä½œè¾“å‡ºçš„<strong>å›¾åƒå®é™…æ˜¯å¾ˆç²—ç³™çš„</strong>ï¼Œæ¯•ç«Ÿä¸¢äº†å¾ˆå¤šç»†èŠ‚ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ç§æ–¹å¼å¡«è¡¥ä¸¢å¤±çš„ç»†èŠ‚æ•°æ®ï¼Œæ‰€ä»¥å°±æœ‰äº†è·³è·ƒç»“æ„ã€‚</p>
<p>â€‹ ä½œè€…åœ¨åŸæ–‡ç§ç»™å‡º3ç§ç½‘ç»œç»“æœå¯¹æ¯”ï¼Œæ˜æ˜¾å¯ä»¥çœ‹å‡ºæ•ˆæœï¼šFCN-32s &lt;
FCN-16s &lt; FCN-8sï¼Œå³ä½¿ç”¨å¤šå±‚featureèåˆæœ‰åˆ©äºæé«˜åˆ†å‰²å‡†ç¡®æ€§ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114212421618.png" /></p>
<h4 id="fcnä¼˜ç‚¹">FCNä¼˜ç‚¹ï¼š</h4>
<p>â€‹
ä¸ä¼ ç»Ÿç”¨CNNè¿›è¡Œå›¾åƒåˆ†å‰²çš„æ–¹æ³•ç›¸æ¯”ï¼ŒFCNæœ‰ä¸¤å¤§æ˜æ˜¾çš„ä¼˜ç‚¹ï¼šä¸€æ˜¯å¯ä»¥æ¥å—ä»»æ„å¤§å°çš„è¾“å…¥å›¾åƒï¼Œè€Œä¸ç”¨è¦æ±‚æ‰€æœ‰çš„è®­ç»ƒå›¾åƒå’Œæµ‹è¯•å›¾åƒå…·æœ‰åŒæ ·çš„å°ºå¯¸ã€‚äºŒæ˜¯æ›´åŠ é«˜æ•ˆï¼Œå› ä¸ºé¿å…äº†ç”±äºä½¿ç”¨åƒç´ å—è€Œå¸¦æ¥çš„é‡å¤å­˜å‚¨å’Œè®¡ç®—å·ç§¯çš„é—®é¢˜ã€‚</p>
<h4 id="fcnç¼ºç‚¹">FCNç¼ºç‚¹ï¼š</h4>
<p>1ã€åˆ†å‰²çš„ç»“æœä¸å¤Ÿç²¾ç»†ã€‚å›¾åƒè¿‡äºæ¨¡ç³Šæˆ–å¹³æ»‘ï¼Œæ²¡æœ‰åˆ†å‰²å‡ºç›®æ ‡å›¾åƒçš„ç»†èŠ‚</p>
<p>2ã€å› ä¸ºæ¨¡å‹æ˜¯åŸºäºCNNæ”¹è¿›è€Œæ¥ï¼Œå³ä¾¿æ˜¯ç”¨å·ç§¯æ›¿æ¢äº†å…¨è¿æ¥ï¼Œä½†æ˜¯ä¾ç„¶æ˜¯ç‹¬ç«‹åƒç´ è¿›è¡Œåˆ†ç±»ï¼Œæ²¡æœ‰å……åˆ†è€ƒè™‘åƒç´ ä¸åƒç´ ä¹‹é—´çš„å…³ç³»</p>
<h2
id="äºŒå…³äºå·ç§¯ç½‘ç»œä¸­é™é‡‡æ ·ä¸ä¸Šé‡‡æ ·ä»¥åŠç‰¹å¾æå–é˜¶æ®µçš„ç†è§£">äºŒã€å…³äºå·ç§¯ç½‘ç»œä¸­é™é‡‡æ ·ä¸ä¸Šé‡‡æ ·ä»¥åŠç‰¹å¾æå–é˜¶æ®µçš„ç†è§£ï¼š</h2>
<p>â€‹
1ã€é™é‡‡æ ·çš„ç†è®ºæ„ä¹‰æ˜¯ï¼Œå®ƒå¯ä»¥å¢åŠ å¯¹è¾“å…¥å›¾åƒçš„ä¸€äº›å°æ‰°åŠ¨çš„é²æ£’æ€§ï¼Œæ¯”å¦‚å›¾åƒå¹³ç§»ï¼Œæ—‹è½¬ç­‰ï¼Œå‡å°‘è¿‡æ‹Ÿåˆçš„é£é™©ï¼Œé™ä½è¿ç®—é‡ï¼Œå¢åŠ æ„Ÿå—é‡çš„å¤§å°ã€‚</p>
<p>â€‹
2ã€ä¸Šé‡‡æ ·çš„æœ€å¤§çš„ä½œç”¨å…¶å®å°±æ˜¯æŠŠæŠ½è±¡çš„ç‰¹å¾å†è¿˜åŸåˆ°åŸå›¾çš„å°ºå¯¸ï¼Œæœ€ç»ˆå¾—åˆ°åˆ†å‰²ç»“æœã€‚ä½†å¾ˆå®¹æ˜“å¾—åˆ°æ¨¡ç³Šæˆ–è¿‡äºå¹³æ»‘çš„ç»“æœï¼Œæ— æ³•è¿˜åŸç»†èŠ‚éƒ¨åˆ†ã€‚</p>
<p>â€‹
3ã€å¯¹äºç‰¹å¾æå–é˜¶æ®µï¼Œæµ…å±‚ç»“æ„å¯ä»¥æŠ“å–å›¾åƒçš„ä¸€äº›ç®€å•çš„ç‰¹å¾ï¼Œæ¯”å¦‚è¾¹ç•Œï¼Œé¢œè‰²ï¼Œè€Œæ·±å±‚ç»“æ„å› ä¸ºæ„Ÿå—é‡å¤§äº†ï¼Œè€Œä¸”ç»è¿‡çš„å·ç§¯æ“ä½œå¤šäº†ï¼Œèƒ½æŠ“å–åˆ°å›¾åƒçš„ä¸€äº›æŠ½è±¡ç‰¹å¾ã€‚</p>
<h3 id="ä¸‰unetç½‘ç»œ">ä¸‰ã€UNetç½‘ç»œ</h3>
<p>â€‹ UNetç½‘ç»œæ•´ä½“ç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114212533302.png" /></p>
<p>â€‹ è“è‰²ç®­å¤´ä»£è¡¨3*3çš„å·ç§¯å±‚+ReLUæ¿€æ´»å‡½æ•°å±‚</p>
<p>â€‹ çº¢è‰²ç®­å¤´ä»£è¡¨2*2çš„æœ€å¤§æ± åŒ–å±‚</p>
<p>â€‹ ç»¿è‰²ç®­å¤´ä»£è¡¨2*2çš„ä¸Šé‡‡æ ·å±‚ï¼ˆé€šå¸¸é‡‡ç”¨åå·ç§¯ï¼‰</p>
<p>â€‹ æµ…è“è‰²ç®­å¤´ä»£è¡¨1*1çš„å·ç§¯å±‚ï¼Œåœ¨æœ€åç”¨äºè°ƒæ•´è¾“å‡ºé€šé“æ•°ç›®</p>
<p>â€‹
åœ¨æ•´ä¸€ä¸ªè¿‡ç¨‹ä¸­ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ç°è‰²ç®­å¤´ï¼Œæˆ‘ä»¬ä¼šæ³¨æ„åˆ°ç°è‰²ç®­å¤´ä»£è¡¨çš„æ˜¯â€œcopy
and cropâ€ï¼Œå³å¤åˆ¶å’Œå‰ªåˆ‡ã€‚æˆ‘ä»¬ä»¥ç¬¬ä¸€å±‚çš„ç°è‰²ç®­å¤´ä¸¾ä¾‹æ¥çœ‹ï¼šå…¶å·¦ä¾§å¤§å°ä¸º64
* 568 * 568ï¼Œå³ä¾§å¤§å°ä¸º128 * 392 *
392ã€‚å…¶ä¸­ï¼Œå³ä¾§æœ‰64ä¸ªé€šé“çš„æ•°æ®æ¥æºäºå·¦ä¾§ï¼Œ64ä¸ªé€šé“çš„æ•°æ®æ¥æºäºä¸Šä¸€å±‚çš„ä¸Šé‡‡æ ·ã€‚é‚£ä¹ˆç°è‰²ç®­å¤´åº”è¯¥å°±æ˜¯æŠŠå·¦ä¾§çš„å†…å®¹å¤åˆ¶åˆ°äº†å³ä¾§ï¼Œå¹¶ä¸”concatåœ¨äº†åŸå…ˆä¸Šé‡‡æ ·åå¾—åˆ°çš„64
* 392 * 392çš„æ•°æ®ä¸Šï¼Œå½¢æˆäº†128 * 392 * 392çš„æ•°æ®ã€‚</p>
<p>â€‹ ä½†æ˜¯é—®é¢˜åœ¨äºï¼Œ568 * 568å’Œ392 *
392è¿˜æœ‰è¾ƒå¤§çš„å°ºå¯¸å·®åˆ«ï¼Œè¿™å°±éœ€è¦åˆ©ç”¨cropæ¥å®Œæˆï¼Œç”±äºåœ¨æ¯ä¸ªå·ç§¯ä¸­éƒ½ä¼šä¸¢å¤±è¾¹ç•Œåƒç´ ï¼Œå› æ­¤è£å‰ªcropæ˜¯å¿…è¦çš„</p>
<p>â€‹
åœ¨ä¸Šè¿°ç½‘ç»œå½¢å¼ä¸­ï¼Œæœ€é‡è¦çš„ç»“æ„å°±æ˜¯å…¶ä¸­çš„<strong>skip-connection</strong>ã€‚UNetä¸­<strong>Concat</strong>å½¢å¼çš„skip-connectionçš„å¥½å¤„æ˜¯ï¼Œ<strong>å¯¹äºåˆ†å‰²è¿™ä¸ªä»»åŠ¡ï¼Œç©ºé—´åŸŸä¿¡æ¯éå¸¸é‡è¦</strong>ã€‚è€Œç½‘ç»œçš„encoderéƒ¨åˆ†ï¼Œé€šè¿‡å„ä¸ªpoolingå±‚å·²ç»æŠŠç‰¹å¾å›¾åˆ†è¾¨ç‡é™å¾—éå¸¸å°äº†ï¼Œè¿™ä¸€ç‚¹ä¸åˆ©äºç²¾ç¡®çš„åˆ†å‰²maskç”Ÿæˆï¼Œé€šè¿‡skip-connectionå¯ä»¥æŠŠè¾ƒæµ…çš„å·ç§¯å±‚ç‰¹å¾å¼•è¿‡æ¥ï¼Œé‚£äº›ç‰¹å¾åˆ†è¾¨ç‡è¾ƒé«˜ï¼Œä¸”å±‚æ•°æµ…ï¼Œä¼šå«æœ‰æ¯”è¾ƒä¸°å¯Œçš„low-levelä¿¡æ¯ï¼Œæ›´åˆ©äºç”Ÿæˆåˆ†å‰²maskã€‚</p>
<p>â€‹
æ€»ä½“æ¥è¯´ï¼Œå°±æ˜¯æŠŠå¯¹åº”å°ºåº¦ä¸Šçš„ç‰¹å¾ä¿¡æ¯å¼•å…¥åˆ°ä¸Šé‡‡æ ·æˆ–åå·ç§¯è¿‡ç¨‹ï¼Œä¸ºåæœŸå›¾åƒåˆ†å‰²æä¾›å¤šå°ºåº¦å¤šå±‚æ¬¡çš„ä¿¡æ¯ï¼Œç”±æ­¤å¯ä»¥å¾—åˆ°æ›´ç²¾ç»†çš„åˆ†å‰²æ•ˆæœï¼Œå¦‚U-Netè®ºæ–‡æè¿°çš„åˆ†å‰²ç»“æœä¸€æ ·ã€‚è¿™æ¯”å•çº¯ç”¨ç¼–è§£ç å™¨æ¡†æ¶è¦å¥½ï¼Œçº¯ç²¹çš„ç¼–è§£ç å™¨æ¡†æ¶ï¼Œåœ¨ç¼–ç è¿‡ç¨‹ä¸­å‹ç¼©å’Œä¸¢å¤±äº†å¤§é‡ç»†èŠ‚ä¿¡æ¯ï¼Œè€Œè¿™äº›ä¿¡æ¯å¾ˆå¯èƒ½ä¼šæœ‰åŠ©äºåæœŸçš„å›¾åƒåˆ†å‰²ã€‚</p>
<p>â€‹
åŒæ—¶ï¼Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼šæ­¤å¤„çš„skip-connectionä¸ResNetä¸­ç›´æ¥ç›¸åŠ å½¢å¼çš„skip-connectionä¸åŒï¼ŒResNetä¸­çš„è·³è·ƒè¿æ¥å¯ä»¥æœ‰æ•ˆçš„å‡å°‘æ¢¯åº¦æ¶ˆå¤±å’Œç½‘ç»œé€€åŒ–é—®é¢˜ï¼Œä½¿è®­ç»ƒæ›´å®¹æ˜“ã€‚ç›´è§‚ä¸Šç†è§£å¯ä»¥è®¤ä¸ºBPçš„æ—¶å€™ï¼Œæ·±å±‚çš„æ¢¯åº¦å¯ä»¥æ›´å®¹æ˜“çš„ä¼ å›æµ…å±‚ï¼Œå› ä¸ºè¿™ç§ç»“æ„çš„å­˜åœ¨ï¼Œå¯¹ç¥ç»ç½‘ç»œå±‚æ•°çš„è®¾å®šå¯ä»¥æ›´éšæ„ä¸€äº›ã€‚</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
        <tag>FCN</tag>
        <tag>UNet</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°8â€”â€”å›¾åƒé£æ ¼è¿ç§»æ–¹æ³•AdaIN</title>
    <url>/2022/01/17/27fde64f6abc/</url>
    <content><![CDATA[<p><strong>AdaIN</strong>æ˜¯ä¸€ç§ç»å…¸çš„å›¾ç‰‡é£æ ¼è¿ç§»ç®—æ³•ï¼Œåœ¨ 2017
å¹´ICCVä¸­æå‡ºã€‚ä¸»è¦ç”¨äºå°†ä¸€å¼ å›¾ç‰‡(é£æ ¼å›¾) ä¸­çš„é£æ ¼ã€çº¹ç†è¿ç§»åˆ°å¦ä¸€å¼ å›¾ç‰‡
(å†…å®¹å›¾)ï¼ŒåŒæ—¶è¦ä¿ç•™å†…å®¹å›¾çš„ä¸»ä½“ç»“æ„ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>â€‹ <strong>è®ºæ–‡åç§°ï¼šã€ŠArbitrary Style Transfer in Real-time with
Adaptive Instance Normalizationã€‹</strong></p>
<p>â€‹ <strong>è®ºæ–‡é“¾æ¥ï¼šhttps://arxiv.org/abs/1703.06868</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/b219ebc4b74543a95e9180d3cb15748ab9011436.jpeg" /></p>
<h2 id="ä¸€adainç®€ä»‹">ä¸€ã€AdaINç®€ä»‹</h2>
<p>â€‹ è¿™ç¯‡è®ºæ–‡çš„ä¸»è¦ç›®æ ‡æ˜¯å®ç°<strong>å®æ—¶çš„ã€ä»»æ„é£æ ¼çš„é£æ ¼è¿ç§»ï¼ˆstyle
transferï¼‰</strong>ï¼Œæ ¸å¿ƒæ–¹æ³•å°±æ˜¯å…¶æå‡ºçš„è‡ªé€‚åº”å®ä¾‹æ ‡å‡†åŒ–ï¼ˆ<strong>Adaptive
Instance
Normalizationï¼ŒAdaIN</strong>ï¼‰ï¼Œé€šè¿‡<strong>å°†å†…å®¹å›¾åƒï¼ˆcontent
imageï¼‰ç‰¹å¾çš„å‡å€¼å’Œæ–¹å·®å¯¹é½åˆ°é£æ ¼å›¾åƒï¼ˆstyle
imageï¼‰çš„å‡å€¼å’Œæ–¹å·®</strong>æ¥å®ç°é£æ ¼è¿ç§»ã€‚</p>
<p>â€‹ æ­¤å¤–ï¼Œè¿™ä¸ªæ–¹æ³•è¿˜ç»™ç”¨æˆ·éå¸¸å¤šçš„æ§åˆ¶æƒï¼ŒåŒ…æ‹¬å¦‚ä¸‹ï¼š</p>
<ul>
<li>å†…å®¹å’Œé£æ ¼çš„æŠ˜ä¸­ï¼ˆtrade offï¼‰
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220116183935766.png" /></li>
</ul></li>
<li>é£æ ¼æ’å€¼ï¼ˆæ··åˆé£æ ¼è¿ç§»ï¼‰
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220116183943127.png" /></li>
</ul></li>
<li>æ˜¯å¦ä¿ç•™é¢œè‰²
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220116183918123.png" /></li>
</ul></li>
<li>å¯¹å›¾åƒçš„ç‰¹å®šåŒºåŸŸè¿›è¡Œé£æ ¼è¿ç§»
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220116183906461.png" /></li>
</ul></li>
</ul>
<h2 id="äºŒå‰å¤‡çŸ¥è¯†">äºŒã€å‰å¤‡çŸ¥è¯†ï¼š</h2>
<p>â€‹ ä½ éœ€è¦ç†Ÿæ‚‰Batch Normaliztionï¼ˆBNï¼‰ã€Layer Normï¼ˆLNï¼‰ã€Instance
Normï¼ˆINï¼‰ã€Group Normï¼ˆGNï¼‰ã€Conditional Instance
Normï¼ˆCINï¼‰ç­‰æ¦‚å¿µã€‚</p>
<p>â€‹
ä¸‹å›¾ä¸ºç‰¹å¾å›¾å¼ é‡ï¼Œå¯ä»¥ç›´è§‚çœ‹å‡ºBNï¼ŒLNï¼ŒINï¼ŒGNç­‰è§„èŒƒåŒ–æ–¹æ³•çš„åŒºåˆ«ã€‚Nä¸ºæ ·æœ¬ç»´åº¦ï¼ŒCä¸ºé€šé“ç»´åº¦ï¼ŒHä¸ºheightï¼ŒWå³widthï¼Œä»£è¡¨ç‰¹å¾å›¾çš„å°ºå¯¸ã€‚</p>
<p><img
src="https://img-blog.csdnimg.cn/2019061216413530.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zNTU3Njg4MQ==,size_16,color_FFFFFF,t_70" /></p>
<p>â€‹ å…·ä½“æ¯ç§Normalizationçš„æ–¹æ³•ä»‹ç»å¯ä»¥å‚è§æˆ‘çš„è¿™ä¸€ç¯‡Blogï¼š</p>
<p>â€‹ https://blog.fantast.top/2022/01/16/basic7/</p>
<p>â€‹</p>
<h2 id="ä¸‰adainå…·ä½“ä»‹ç»">ä¸‰ã€AdaINå…·ä½“ä»‹ç»</h2>
<h5 id="è¾“å…¥content-input-x-style-input-y">è¾“å…¥ï¼šContent Input x
&amp;&amp; Style Input y</h5>
<p>â€‹ AdaIN ç®€å•åœ°å°† x çš„é€šé“å‡å€¼å’Œæ–¹å·®å¯¹é½ä»¥åŒ¹é… y çš„å‡å€¼å’Œæ–¹å·®ã€‚
ä¸åƒBNã€INæˆ–CINï¼ŒAdaINæ²¡æœ‰éœ€è¦ä»ç½‘ç»œä¸­è¿›è¡Œå­¦ä¹ çš„ä»¿å°„å˜æ¢å‚æ•°ï¼Œå®ƒèƒ½å¤Ÿè‡ªé€‚åº”çš„ä»style
inputä¸­è®¡ç®—å¾—åˆ°ä»¿å°„å˜æ¢çš„å‚æ•°ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220117103448955.png" /></p>
<p>â€‹ æˆ‘ä»¬ç®€å•åœ°ç”¨ Ïƒ(y) ç¼©æ”¾å½’ä¸€åŒ–çš„Content Inputï¼Œå¹¶ç”¨ Âµ(y) ç§»åŠ¨å®ƒã€‚ ä¸
IN
ç±»ä¼¼ï¼Œè¿™äº›ç»Ÿè®¡æ•°æ®æ˜¯è·¨ç©ºé—´ä½ç½®è®¡ç®—çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå…¶å®å¯¹äºå•ä¸ªå®ä¾‹çš„å•ä¸ªç‰¹å¾é€šé“è®¡ç®—çš„å‡å€¼å’Œæ–¹å·®æ•°æ®ã€‚</p>
<p>â€‹ ç›´è§‚åœ°è¯´ï¼Œè®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªæ£€æµ‹ç‰¹å®šé£æ ¼ç¬”è§¦çš„ç‰¹å¾é€šé“ã€‚</p>
<p>â€‹ å…·æœ‰è¿™ç§é£æ ¼çš„å›¾åƒä¼šå¯¹å®ƒçš„ç‰¹å¾éƒ¨åˆ†äº§ç”Ÿè¾ƒé«˜çš„å¹³å‡æ¿€æ´»ã€‚AdaIN
äº§ç”Ÿçš„è¾“å‡ºå°†å¯¹è¯¥ç‰¹å¾å…·æœ‰ç›¸åŒçš„é«˜å¹³å‡æ¿€æ´»ï¼ŒåŒæ—¶å…¶ä¹Ÿä¿ç•™å†…å®¹å›¾åƒçš„ç©ºé—´ç»“æ„ã€‚
ç„¶åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‰é¦ˆè§£ç å™¨å°†é£æ ¼ç‰¹å¾è½¬æ¢å›å›¾åƒç©ºé—´ã€‚åŒæ—¶ï¼Œè¿™ä¸ªç‰¹å¾é€šé“çš„æ–¹å·®å¯ä»¥ç¼–ç æ›´ç»†å¾®çš„é£æ ¼ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ä¹Ÿä¼ é€’åˆ°
AdaIN è¾“å‡ºå’Œæœ€ç»ˆè¾“å‡ºå›¾åƒã€‚</p>
<p>â€‹ ç®€è€Œè¨€ä¹‹ï¼ŒAdaIN
é€šè¿‡ä¼ è¾“ç‰¹å¾ç»Ÿè®¡æ•°æ®ï¼ˆç‰¹åˆ«æ˜¯é€šé“å‡å€¼å’Œæ–¹å·®ï¼‰åœ¨ç‰¹å¾ç©ºé—´ä¸­æ‰§è¡Œé£æ ¼è¿ç§»ã€‚æˆ‘ä»¬çš„
AdaIN å±‚å°±åƒä¸€ä¸ª IN å±‚ä¸€æ ·ç®€å•ï¼Œå‡ ä¹ä¸å¢åŠ è®¡ç®—æˆæœ¬ã€‚</p>
<h2 id="å››ç½‘ç»œç»“æ„">å››ã€ç½‘ç»œç»“æ„</h2>
<p>â€‹
åœ¨è®ºæ–‡ä¸­ï¼Œå…¶ä½¿ç”¨VGG-19æ¥ç¼–ç å†…å®¹å’Œé£æ ¼ï¼Œåœ¨æµ…å±‚ç©ºé—´å°†ç‰¹å¾å›¾é€šè¿‡AdaINå±‚ï¼Œè¿›è¡Œä¸Šè¿°ä»¿å°„å˜æ¢ï¼Œè§£ç å™¨æ ¹æ®å˜æ¢åçš„ç‰¹å¾å›¾è¯•å›¾é‡å»ºå›¾åƒï¼Œé€šè¿‡åå‘ä¼ æ’­è®­ç»ƒè§£ç å™¨ï¼Œä½¿å¾—è§£ç å™¨è¾“å‡ºè¶Šæ¥è¶ŠçœŸå®çš„å›¾åƒã€‚æ•´ä½“æ¶æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/2019061217185282.png" /></p>
<p>â€‹ æ›´ä¸ºå…·ä½“çš„ä»£ç å¯è§ä»¥ä¸‹é“¾æ¥åœ°å€ï¼š</p>
<p>â€‹ https://github.com/xunhuang1995/AdaIN-style</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Style Transfer</tag>
        <tag>AdaIN</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°7â€”â€”å„ç§å½’ä¸€åŒ–Normalizationæ–¹æ³•ï¼ˆå«BNã€LNã€INã€CINã€GNï¼‰</title>
    <url>/2022/01/16/8bf646a3f959/</url>
    <content><![CDATA[<p><strong>æœ¬æ–‡ä»‹ç»äº†å¸¸è§çš„å‡ ç§ <a
href="æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°2â€”æ•°æ®è¡¨å¾ä¸è‡ªåŠ¨ç¼–ç å™¨.md">æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°2â€”æ•°æ®è¡¨å¾ä¸è‡ªåŠ¨ç¼–ç å™¨.md</a>
Normaliza <a
href="æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°0â€”å¸¸è§æ¦‚å¿µä¸å‡½æ•°ï¼ˆæ›´æ–°ä¸­ï¼‰.md">æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°0â€”å¸¸è§æ¦‚å¿µä¸å‡½æ•°ï¼ˆæ›´æ–°ä¸­ï¼‰.md</a>
tionæ–¹å¼ï¼Œå¦‚BatchNormã€LayerNormã€InstanceNormã€Conditional Instance
Normã€Group Normã€‚
å„ç§Normalizationåœ¨ç†è®ºä¸Šéƒ½èƒ½å¤Ÿèµ·åˆ°å¹³æ»‘æŸå¤±å‡½æ•°å¹³é¢çš„æ•ˆæœï¼ŒåŠ é€Ÿå‡½æ•°çš„æ”¶æ•›æ•ˆæœï¼Œä½†æ˜¯å®ƒä»¬åœ¨æœºå™¨å­¦ä¹ çš„å„ä¸ªé¢†åŸŸä¸Šï¼Œå„æœ‰åé‡ä¸ä¼˜åŠ¿ã€‚</strong></p>
<h3 id="ç›®å½•æ¦‚è¿°">ç›®å½•æ¦‚è¿°ï¼š</h3>
<ul>
<li><strong>BatchNorm</strong>ï¼šbatchæ–¹å‘åšå½’ä¸€åŒ–ï¼Œç®—N * H * Wçš„å‡å€¼,
å¸¸ç”¨äºCNNç­‰è§†è§‰è¯†åˆ«é¢†åŸŸï¼Œå¦‚æœå½“Batchçš„å°ºå¯¸æ¯”è¾ƒå°æˆ–æ˜¯åœ¨ä¸€äº›åŠ¨æ€ç½‘ç»œä¸­æ—¶ä¸é€‚ç”¨ã€‚</li>
<li><strong>LayerNorm</strong>ï¼šchannelæ–¹å‘åšå½’ä¸€åŒ–ï¼Œç®—C * H *
Wçš„å‡å€¼ï¼ŒLNä¸é€‚ç”¨äºCNNç­‰è§†è§‰è¯†åˆ«é¢†åŸŸï¼Œä½†æ˜¯å¯åœ¨BNæ— æ³•ä½¿ç”¨çš„é¢†åŸŸå¦‚RNNå’ŒBatch
Sizeè¾ƒå°æ—¶è¿›è¡Œä½¿ç”¨ã€‚</li>
<li><strong>InstanceNorm</strong>ï¼šä¸€ä¸ªchannelä¸€ä¸ªå®ä¾‹å†…åšå½’ä¸€åŒ–ï¼Œç®—H *
Wçš„å‡å€¼ï¼Œå…¶é€‚ç”¨äºæ‰¹é‡è¾ƒå°ä¸”å•ç‹¬è€ƒè™‘æ¯ä¸ªåƒç´ ç‚¹çš„åœºæ™¯ä¸­ï¼Œå¦‚GANç”Ÿæˆç½‘ç»œï¼Œä½†åœ¨MLPæˆ–RNNæˆ–Feature
Mapè¾ƒå°çš„æ—¶å€™ä¸é€‚ç”¨ã€‚</li>
<li><strong>GroupNorm</strong>ï¼šå°†channelæ–¹å‘åˆ†groupï¼Œç„¶åæ¯ä¸ªgroupå†…åšå½’ä¸€åŒ–ï¼Œç®—(C
Â G) * H * Wçš„å‡å€¼</li>
</ul>
<h3 id="batch-normbn">1ã€Batch Normï¼ˆBNï¼‰</h3>
<p>â€‹ Ioffe å’Œ Szegedy
çš„å¼€åˆ›æ€§å·¥ä½œå¼•å…¥äº†æ‰¹é‡å½’ä¸€åŒ–ï¼ˆBNï¼‰å±‚ï¼Œé€šè¿‡å½’ä¸€åŒ–ç‰¹å¾ç»Ÿè®¡æ˜¾ç¤ºç®€åŒ–äº†å‰é¦ˆç½‘ç»œçš„è®­ç»ƒã€‚
BN å±‚æœ€åˆæ—¨åœ¨åŠ é€Ÿåˆ¤åˆ«ç½‘ç»œçš„è®­ç»ƒï¼Œä½†ä¹Ÿè¢«å‘ç°åœ¨ç”Ÿæˆå›¾åƒå»ºæ¨¡ä¸­æœ‰æ•ˆã€‚</p>
<h5 id="è¾“å…¥"><strong>è¾“å…¥</strong>ï¼š</h5>
<p>â€‹ <strong>An input batch</strong> <span class="math inline">\(x \in
R^{N \times C \times H \times W}\)</span></p>
<h5 id="è¯´æ˜"><strong>è¯´æ˜</strong>ï¼š</h5>
<p>â€‹ Batch
Normalizationå°±æ˜¯å¯¹ä¸€ä¸ªBatchä¸­çš„æ•°æ®è¿›è¡Œæ ‡å‡†åŒ–ï¼Œå°±æ˜¯æ¯ä¸€ä¸ªå€¼å‡å»batchçš„å‡å€¼ï¼Œé™¤ä»¥batchçš„æ ‡å‡†å·®ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220116184553370.png" /></p>
<ul>
<li><p><span class="math inline">\(\gamma , \beta \in
R^{C}\)</span>æ˜¯ä»æ•°æ®ä¸­è®­ç»ƒå¾—åˆ°çš„å‚æ•°ã€‚</p></li>
<li><p><span class="math inline">\(\mu(x) , \sigma(x) \in
R^{C}\)</span>æ˜¯å‡å€¼å’Œæ–¹å·®ï¼Œä¸ºæ¯ä¸ªç‰¹å¾é€šé“ï¼ˆCï¼‰ç‹¬ç«‹è®¡ç®—æ‰¹é‡å¤§å°ï¼ˆNï¼‰å’Œç©ºé—´ç»´åº¦ï¼ˆH
* Wï¼‰</p></li>
<li><p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220116185246851.png" /></p></li>
</ul>
<h5 id="å·ç§¯ç½‘ç»œä¸­çš„bn"><strong>å·ç§¯ç½‘ç»œä¸­çš„BN</strong></h5>
<p>â€‹
BNé™¤äº†å¯ä»¥åº”ç”¨åœ¨MLPä¸Šï¼Œå…¶åœ¨CNNç½‘ç»œä¸­çš„è¡¨ç°ä¹Ÿéå¸¸å¥½ï¼Œ<strong>å·ç§¯ç½‘ç»œå’ŒMLPçš„ä¸åŒç‚¹æ˜¯å·ç§¯ç½‘ç»œä¸­æ¯ä¸ªæ ·æœ¬çš„éšå±‚èŠ‚ç‚¹çš„è¾“å‡ºæ˜¯ä¸‰ç»´ï¼ˆå®½åº¦ï¼Œé«˜åº¦ï¼Œç»´åº¦ï¼‰çš„</strong>ï¼Œè€ŒMLPæ˜¯ä¸€ç»´çš„ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_01_17_09_33_31_622.png" /></p>
<p>â€‹ åœ¨ä¸Šå›¾ä¸­ï¼Œå‡è®¾ä¸€ä¸ªæ‰¹é‡æœ‰ <span
class="math inline">\(m\)</span>ä¸ªæ ·æœ¬ï¼ŒFeature Mapçš„å°ºå¯¸æ˜¯ <span
class="math inline">\({p \times q}\)</span>ï¼Œé€šé“æ•°æ˜¯<span
class="math inline">\(d\)</span>ã€‚<strong>åœ¨å·ç§¯ç½‘ç»œä¸­ï¼ŒBNçš„æ“ä½œæ˜¯ä»¥Feature
Mapä¸ºå•ä½çš„</strong>ï¼Œå› æ­¤ä¸€ä¸ªBNè¦ç»Ÿè®¡çš„æ•°æ®ä¸ªæ•°ä¸º <span
class="math inline">\({m \times p \times q}\)</span>ï¼Œæ¯ä¸ªFeature
Mapä½¿ç”¨ä¸€ç»„<span class="math inline">\(\gamma\)</span>å’Œ<span
class="math inline">\({\beta}\)</span>.</p>
<h5 id="ç±»æ¯”"><strong>ç±»æ¯”</strong>ï¼š</h5>
<p>â€‹ å¦‚æœæŠŠè¾“å…¥<span class="math inline">\(x \in R^{N \times C \times H
\times W}\)</span>ç±»æ¯”ä¸ºä¸€æ‘ä¹¦ï¼Œè¿™æ‘ä¹¦æ€»å…±æœ‰ N æœ¬ï¼Œæ¯æœ¬æœ‰ C é¡µï¼Œæ¯é¡µæœ‰ H
è¡Œï¼Œæ¯è¡Œ W ä¸ªå­—ç¬¦ã€‚BN
æ±‚å‡å€¼æ—¶ï¼Œç›¸å½“äºæŠŠè¿™äº›ä¹¦æŒ‰é¡µç ä¸€ä¸€å¯¹åº”åœ°åŠ èµ·æ¥ï¼ˆä¾‹å¦‚ç¬¬1æœ¬ä¹¦ç¬¬36é¡µï¼Œç¬¬2æœ¬ä¹¦ç¬¬36é¡µ......ï¼‰ï¼Œå†é™¤ä»¥æ¯ä¸ªé¡µç ä¸‹çš„å­—ç¬¦æ€»æ•°ï¼šN<strong>Ã—</strong>H<strong>Ã—</strong>Wï¼Œå› æ­¤å¯ä»¥æŠŠ
<strong>BN
çœ‹æˆæ±‚â€œå¹³å‡ä¹¦â€</strong>çš„æ“ä½œï¼ˆæ³¨æ„è¿™ä¸ªâ€œå¹³å‡ä¹¦â€æ¯é¡µåªæœ‰ä¸€ä¸ªå­—ï¼‰ã€‚</p>
<h5 id="æ€»ç»“"><strong>æ€»ç»“ï¼š</strong></h5>
<p>â€‹
BNæ˜¯æ·±åº¦å­¦ä¹ è°ƒå‚ä¸­éå¸¸å¥½ç”¨çš„ç­–ç•¥ä¹‹ä¸€ï¼ˆå¦å¤–ä¸€ä¸ªå¯èƒ½å°±æ˜¯Dropoutï¼‰ï¼Œå½“ä½ çš„æ¨¡å‹å‘ç”Ÿ<strong>æ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸æˆ–è€…æŸå¤±å€¼éœ‡è¡æ¯”è¾ƒä¸¥é‡</strong>çš„æ—¶å€™ï¼Œåœ¨BNä¸­åŠ å…¥ç½‘ç»œå¾€å¾€èƒ½å–å¾—éå¸¸å¥½çš„æ•ˆæœï¼Œå› ä¸ºBNèƒ½å¤Ÿèµ·åˆ°å¹³æ»‘æŸå¤±å¹³é¢çš„ä½œç”¨ã€‚</p>
<p>â€‹ BNä¹Ÿæœ‰ä¸€äº›ä¸æ˜¯éå¸¸é€‚ç”¨çš„åœºæ™¯ï¼Œåœ¨é‡è§è¿™äº›åœºæ™¯æ—¶è¦è°¨æ…çš„ä½¿ç”¨BNï¼š</p>
<ul>
<li>å—åˆ¶äºç¡¬ä»¶é™åˆ¶ï¼Œæ¯ä¸ªBatchçš„å°ºå¯¸æ¯”è¾ƒå°ï¼Œè¿™æ—¶å€™è°¨æ…ä½¿ç”¨BNï¼›</li>
<li>åœ¨ç±»ä¼¼äºRNNçš„<strong>åŠ¨æ€ç½‘ç»œ</strong>ä¸­è°¨æ…ä½¿ç”¨BNï¼›</li>
<li>è®­ç»ƒæ•°æ®é›†å’Œæµ‹è¯•æ•°æ®é›†æ–¹å·®è¾ƒå¤§çš„æ—¶å€™ã€‚</li>
</ul>
<h3 id="layer-normln">2ã€Layer Normï¼ˆLNï¼‰</h3>
<p>â€‹ Layer
Normalizationï¼ˆLNï¼‰çš„æå‡ºæœ‰æ•ˆçš„è§£å†³äº†BNçš„è¿™ä¸¤ä¸ªé—®é¢˜ï¼ˆä¸€ä¸ªæ˜¯ä¸é€‚ç”¨äºåŠ¨æ€ç½‘ç»œï¼Œä¸€ä¸ªæ˜¯batchå°ºå¯¸è¾ƒå°çš„æ—¶å€™ï¼‰ã€‚LNå’ŒBNä¸åŒç‚¹æ˜¯å½’ä¸€åŒ–çš„ç»´åº¦æ˜¯äº’ç›¸å‚ç›´çš„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚åœ¨å›¾1ä¸­<span
class="math inline">\(N\)</span>è¡¨ç¤ºæ ·æœ¬è½´ï¼Œ <span
class="math inline">\(C\)</span>è¡¨ç¤ºé€šé“è½´ï¼Œ <span
class="math inline">\(F\)</span>æ˜¯æ¯ä¸ªé€šé“çš„ç‰¹å¾æ•°é‡( W*H )ã€‚BN
å¦‚å³ä¾§æ‰€ç¤ºï¼Œå®ƒæ˜¯å–ä¸åŒæ ·æœ¬çš„åŒä¸€ä¸ªé€šé“çš„ç‰¹å¾åšå½’ä¸€åŒ–ï¼›LNåˆ™æ˜¯å¦‚å·¦ä¾§æ‰€ç¤ºï¼Œå®ƒå–çš„æ˜¯åŒä¸€ä¸ªæ ·æœ¬çš„ä¸åŒé€šé“åšå½’ä¸€åŒ–ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_01_17_09_33_37_355.png" /></p>
<h5 id="mlpä¸­çš„ln"><strong>MLPä¸­çš„LN</strong></h5>
<p>â€‹
BNçš„ä¸¤ä¸ªç¼ºç‚¹çš„äº§ç”ŸåŸå› å‡æ˜¯å› ä¸º<strong>è®¡ç®—å½’ä¸€åŒ–ç»Ÿè®¡é‡æ—¶è®¡ç®—çš„æ ·æœ¬æ•°å¤ªå°‘</strong>ã€‚LNæ˜¯ä¸€ä¸ªç‹¬ç«‹äºbatch
sizeçš„ç®—æ³•ï¼Œæ‰€ä»¥æ— è®ºæ ·æœ¬æ•°å¤šå°‘éƒ½ä¸ä¼šå½±å“å‚ä¸LNè®¡ç®—çš„æ•°æ®é‡ï¼Œä»è€Œè§£å†³BNçš„ä¸¤ä¸ªé—®é¢˜ã€‚</p>
<p>â€‹ å…ˆçœ‹MLPä¸­çš„LNã€‚è®¾<span
class="math inline">\(H\)</span>æ˜¯ä¸€å±‚ä¸­éšå±‚èŠ‚ç‚¹çš„æ•°é‡ï¼Œ <span
class="math inline">\(l\)</span>æ˜¯MLPçš„å±‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—LNçš„å½’ä¸€åŒ–ç»Ÿè®¡é‡<span
class="math inline">\(\mu\)</span>å’Œ<span
class="math inline">\(\sigma\)</span>ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_01_17_09_24_28_295.png" /></p>
<p>â€‹
æ³¨æ„ä¸Šé¢<strong>ç»Ÿè®¡é‡çš„è®¡ç®—æ˜¯å’Œæ ·æœ¬æ•°é‡æ²¡æœ‰å…³ç³»</strong>çš„ï¼Œå®ƒçš„<strong>æ•°é‡åªå–å†³äºéšå±‚èŠ‚ç‚¹çš„æ•°é‡</strong>ï¼Œæ‰€ä»¥åªè¦éšå±‚èŠ‚ç‚¹çš„æ•°é‡è¶³å¤Ÿå¤šï¼Œæˆ‘ä»¬å°±èƒ½ä¿è¯LNçš„å½’ä¸€åŒ–ç»Ÿè®¡é‡è¶³å¤Ÿå…·æœ‰ä»£è¡¨æ€§ã€‚</p>
<p>â€‹ é€šè¿‡<span class="math inline">\(\mu ^{l}\)</span>å’Œ<span
class="math inline">\(\sigma
^{l}\)</span>å¯ä»¥è®¡ç®—å¾—åˆ°å½’ä¸€åŒ–åçš„å€¼ï¼š<span
class="math inline">\(\hat{a}^l\)</span></p>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_01_17_09_26_22_177.png" /></p>
<p>â€‹
BNçš„æ–‡ç« ä¸­ä»‹ç»è¿‡å‡ ä¹æ‰€æœ‰çš„å½’ä¸€åŒ–æ–¹æ³•éƒ½èƒ½èµ·åˆ°å¹³æ»‘æŸå¤±å¹³é¢çš„ä½œç”¨ã€‚<strong>æ‰€ä»¥ä»åŸç†ä¸Šè®²ï¼ŒLNèƒ½åŠ é€Ÿæ”¶æ•›é€Ÿåº¦çš„ã€‚</strong>ä½†æˆ‘ä»¬å‘ç°ï¼Œå°†LNæ·»åŠ åˆ°CNNåï¼Œå®éªŒç»“æœè¡¨æ˜LNç ´åäº†å·ç§¯å±‚å­¦ä¹ åˆ°çš„ç‰¹å¾ï¼Œä½¿å¾—æ¨¡å‹æ— æ³•æ”¶æ•›ï¼Œæ‰€ä»¥åœ¨CNNä¹‹åä½¿ç”¨BNæ˜¯ä¸€ä¸ªè¾ƒå¥½çš„é€‰æ‹©ã€‚</p>
<h5 id="ç±»æ¯”-1"><strong>ç±»æ¯”</strong>ï¼š</h5>
<p>â€‹ LN æ±‚å‡å€¼æ—¶ï¼Œç›¸å½“äºæŠŠæ¯ä¸€æœ¬ä¹¦çš„æ‰€æœ‰å­—åŠ èµ·æ¥ï¼Œå†é™¤ä»¥è¿™æœ¬ä¹¦çš„
å­—ç¬¦æ€»æ•°ï¼šC<strong>Ã—</strong>H<strong>Ã—</strong>Wï¼Œå³æ±‚æ•´æœ¬ä¹¦çš„â€œå¹³å‡å­—â€ï¼Œæ±‚æ ‡å‡†å·®æ—¶ä¹Ÿæ˜¯åŒç†ã€‚</p>
<h5 id="æ€»ç»“-1"><strong>æ€»ç»“</strong></h5>
<p>â€‹
æ€»ä½“è€Œè¨€ï¼ŒLNæ˜¯å’ŒBNéå¸¸è¿‘ä¼¼çš„ä¸€ç§å½’ä¸€åŒ–æ–¹æ³•ï¼Œä¸åŒçš„æ˜¯<strong>BNå–çš„æ˜¯ä¸åŒæ ·æœ¬çš„åŒä¸€ä¸ªç‰¹å¾ï¼Œè€ŒLNå–çš„æ˜¯åŒä¸€ä¸ªæ ·æœ¬çš„ä¸åŒç‰¹å¾</strong>ã€‚åœ¨BNå’ŒLNéƒ½èƒ½ä½¿ç”¨çš„åœºæ™¯ä¸­ï¼Œ<strong>BNçš„æ•ˆæœä¸€èˆ¬ä¼˜äºLNï¼ŒåŸå› æ˜¯åŸºäºä¸åŒæ•°æ®ï¼ŒåŒä¸€ç‰¹å¾å¾—åˆ°çš„å½’ä¸€åŒ–ç‰¹å¾æ›´ä¸å®¹æ˜“æŸå¤±ä¿¡æ¯ã€‚</strong></p>
<p>â€‹
ä½†æ˜¯æœ‰äº›åœºæ™¯æ˜¯ä¸èƒ½ä½¿ç”¨BNçš„ï¼Œä¾‹å¦‚batchsizeè¾ƒå°æˆ–è€…åœ¨RNNä¸­ï¼Œè¿™æ—¶å€™å¯ä»¥é€‰æ‹©ä½¿ç”¨LNï¼ŒLNå¾—åˆ°çš„æ¨¡å‹æ›´ç¨³å®šä¸”èµ·åˆ°æ­£åˆ™åŒ–çš„ä½œç”¨ã€‚RNNèƒ½åº”ç”¨åˆ°å°æ‰¹é‡å’ŒRNNä¸­æ˜¯å› ä¸ºLNçš„å½’ä¸€åŒ–ç»Ÿè®¡é‡çš„è®¡ç®—æ˜¯å’Œbatchsizeæ²¡æœ‰å…³ç³»çš„</p>
<h3 id="instance-normin">3ã€Instance Normï¼ˆINï¼‰</h3>
<p>â€‹
å¯¹äºå›¾åƒé£æ ¼è¿ç§»è¿™ç±»<strong>æ³¨é‡æ¯ä¸ªåƒç´ çš„ä»»åŠ¡</strong>æ¥è¯´ï¼Œæ¯ä¸ªæ ·æœ¬çš„æ¯ä¸ªåƒç´ ç‚¹çš„ä¿¡æ¯éƒ½æ˜¯éå¸¸é‡è¦çš„ï¼Œäºæ˜¯åƒBatch
Normlizationè¿™ç§æ¯ä¸ªæ‰¹é‡çš„æ‰€æœ‰æ ·æœ¬éƒ½åšå½’ä¸€åŒ–çš„ç®—æ³•å°±ä¸å¤ªé€‚ç”¨äº†ï¼Œå› ä¸ºBNè®¡ç®—å½’ä¸€åŒ–ç»Ÿè®¡é‡æ—¶è€ƒè™‘äº†ä¸€ä¸ªæ‰¹é‡ä¸­æ‰€æœ‰å›¾ç‰‡çš„å†…å®¹ï¼Œä»è€Œ<strong>é€ æˆäº†æ¯ä¸ªæ ·æœ¬ç‹¬ç‰¹ç»†èŠ‚çš„ä¸¢å¤±</strong>ã€‚åŒç†å¯¹äºLayerNormalizationè¿™ç±»éœ€è¦è€ƒè™‘ä¸€ä¸ªæ ·æœ¬æ‰€æœ‰é€šé“çš„ç®—æ³•æ¥è¯´å¯èƒ½å¿½ç•¥äº†ä¸åŒé€šé“çš„å·®å¼‚ï¼Œä¹Ÿä¸å¤ªé€‚ç”¨äºå›¾åƒé£æ ¼è¿ç§»è¿™ç±»åº”ç”¨ã€‚</p>
<p>â€‹ æ‰€ä»¥ä¸€ç¯‡è®ºæ–‡æå‡ºäº†Instance
Normalizationï¼ˆINï¼‰ï¼Œä¸€ç§æ›´é€‚åˆå¯¹å•ä¸ªåƒç´ æœ‰æ›´é«˜è¦æ±‚çš„åœºæ™¯çš„å½’ä¸€åŒ–ç®—æ³•ï¼ˆISTï¼ŒGANç­‰ï¼‰ã€‚INçš„ç®—æ³•éå¸¸ç®€å•ï¼Œ<strong>è®¡ç®—å½’ä¸€åŒ–ç»Ÿè®¡é‡æ—¶è€ƒè™‘å•ä¸ªæ ·æœ¬ï¼Œå•ä¸ªé€šé“çš„æ‰€æœ‰å…ƒç´ </strong>ã€‚INï¼ˆå³ï¼‰å’ŒBNï¼ˆä¸­ï¼‰ä»¥åŠLNï¼ˆå·¦ï¼‰çš„ä¸åŒä»å›¾1ä¸­å¯ä»¥éå¸¸æ˜æ˜¾çš„çœ‹å‡ºã€‚<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_01_17_09_33_44_819.png" /></p>
<p>â€‹ INæ–¹æ³•è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220117093553291.png" /></p>
<p>â€‹ ä¸åŒäºBN(x),è¿™è¾¹çš„<span class="math inline">\(\mu(x) , \sigma(x) \in
R^{C}\)</span>æ˜¯å‡å€¼å’Œæ–¹å·®ï¼Œæ˜¯ä¸ºæ¯ä¸ªå®ä¾‹çš„æ¯ä¸ªç‰¹å¾é€šé“ï¼ˆCï¼‰ç‹¬ç«‹è®¡ç®—çš„ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220117093715421.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220117093735940.png" /></p>
<p>â€‹
INåœ¨è®¡ç®—å½’ä¸€åŒ–ç»Ÿè®¡é‡æ—¶å¹¶æ²¡æœ‰åƒBNé‚£æ ·è·¨æ ·æœ¬ã€å•é€šé“ï¼Œä¹Ÿæ²¡æœ‰åƒLNé‚£æ ·å•æ ·æœ¬ã€è·¨é€šé“ã€‚å®ƒæ˜¯å–çš„å•é€šé“ï¼Œå•æ ·æœ¬ä¸Šçš„æ•°æ®è¿›è¡Œè®¡ç®—ã€‚æ‰€ä»¥å¯¹æ¯”BNçš„å…¬å¼ï¼Œå®ƒåªéœ€è¦å®ƒåªéœ€è¦å»æ‰æ‰¹é‡ç»´çš„æ±‚å’Œå³å¯ã€‚</p>
<h5 id="ç±»æ¯”-2"><strong>ç±»æ¯”</strong>ï¼š</h5>
<p>â€‹ IN
æ±‚å‡å€¼æ—¶ï¼Œç›¸å½“äºæŠŠä¸€é¡µä¹¦ä¸­æ‰€æœ‰å­—åŠ èµ·æ¥ï¼Œå†é™¤ä»¥è¯¥é¡µçš„æ€»å­—æ•°ï¼šH<strong>Ã—</strong>Wï¼Œå³æ±‚æ¯é¡µä¹¦çš„â€œå¹³å‡å­—â€ï¼Œæ±‚æ ‡å‡†å·®æ—¶ä¹Ÿæ˜¯åŒç†ã€‚</p>
<h5 id="æ€»ç»“-2"><strong>æ€»ç»“</strong>ï¼š</h5>
<p>â€‹
INæœ¬èº«æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ç®—æ³•ï¼Œ<strong>å°¤å…¶é€‚ç”¨äºæ‰¹é‡è¾ƒå°ä¸”å•ç‹¬è€ƒè™‘æ¯ä¸ªåƒç´ ç‚¹çš„åœºæ™¯ä¸­</strong>ï¼Œå› ä¸ºå…¶è®¡ç®—å½’ä¸€åŒ–ç»Ÿè®¡é‡æ—¶æ²¡æœ‰æ··åˆæ‰¹é‡å’Œé€šé“ä¹‹é—´çš„æ•°æ®ï¼Œå¯¹äºè¿™ç§åœºæ™¯ä¸‹çš„åº”ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨INã€‚</p>
<p>â€‹
å¦å¤–éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯åœ¨å›¾åƒè¿™ç±»åº”ç”¨ä¸­ï¼Œæ¯ä¸ªé€šé“ä¸Šçš„å€¼æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œå› æ­¤ä¹Ÿèƒ½å¤Ÿå–å¾—æ¯”è¾ƒåˆé€‚çš„å½’ä¸€åŒ–ç»Ÿè®¡é‡ã€‚ä½†æ˜¯æœ‰ä¸¤ä¸ªåœºæ™¯å»ºè®®ä¸è¦ä½¿ç”¨IN:</p>
<ol type="1">
<li>MLPæˆ–è€…RNNä¸­ï¼šå› ä¸ºåœ¨MLPæˆ–è€…RNNä¸­ï¼Œæ¯ä¸ªé€šé“ä¸Šåªæœ‰ä¸€ä¸ªæ•°æ®ï¼Œè¿™æ—¶ä¼šè‡ªç„¶ä¸èƒ½ä½¿ç”¨INï¼›</li>
<li>Feature
Mapæ¯”è¾ƒå°æ—¶ï¼šå› ä¸ºæ­¤æ—¶INçš„é‡‡æ ·æ•°æ®éå¸¸å°‘ï¼Œå¾—åˆ°çš„å½’ä¸€åŒ–ç»Ÿè®¡é‡å°†ä¸å†å…·æœ‰ä»£è¡¨æ€§ã€‚</li>
</ol>
<h3 id="group-normgn">4ã€Group Normï¼ˆGNï¼‰</h3>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/n6ck05dvpj.png" /></p>
<p>â€‹ GN æŠŠé€šé“åˆ†ä¸ºç»„ï¼Œå¹¶è®¡ç®—æ¯ä¸€ç»„ä¹‹å†…çš„å‡å€¼å’Œæ–¹å·®ï¼Œä»¥è¿›è¡Œå½’ä¸€åŒ–ã€‚GN
çš„è®¡ç®—ä¸æ‰¹é‡å¤§å°æ— å…³ï¼Œå…¶ç²¾åº¦ä¹Ÿåœ¨å„ç§æ‰¹é‡å¤§å°ä¸‹ä¿æŒç¨³å®šã€‚å¯ä»¥çœ‹åˆ°ï¼ŒGNå’ŒLNå¾ˆåƒã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/1496926-9e0fd762d02d26c1.webp" /></p>
<h5 id="ç±»æ¯”-3"><strong>ç±»æ¯”</strong>ï¼š</h5>
<p>â€‹ GN ç›¸å½“äºæŠŠä¸€æœ¬ C é¡µçš„ä¹¦å¹³å‡åˆ†æˆ G ä»½ï¼Œæ¯ä»½æˆä¸ºæœ‰ C/G
é¡µçš„å°å†Œå­ï¼Œæ±‚æ¯ä¸ªå°å†Œå­çš„â€œå¹³å‡å­—â€å’Œå­—çš„â€œæ ‡å‡†å·®â€ã€‚</p>
<h5 id="æ€»ä½“"><strong>æ€»ä½“</strong>ï¼š</h5>
<p>â€‹ <strong>LN å’Œ IN
åœ¨è§†è§‰è¯†åˆ«ä¸Šçš„æˆåŠŸç‡éƒ½æ˜¯å¾ˆæœ‰é™çš„</strong>ï¼Œå¯¹äº<strong>è®­ç»ƒåºåˆ—æ¨¡å‹ï¼ˆRNN/LSTMï¼‰æˆ–ç”Ÿæˆæ¨¡å‹ï¼ˆGANï¼‰</strong>å¾ˆæœ‰æ•ˆã€‚æ‰€ä»¥ï¼Œ<strong>åœ¨è§†è§‰è¯†åˆ«é¢†åŸŸï¼ŒBNç”¨çš„æ¯”è¾ƒå¤šï¼ŒGNå°±æ˜¯ä¸ºäº†æ”¹å–„BNçš„ä¸è¶³è€Œæ¥çš„ã€‚</strong></p>
<p>â€‹
<strong>GNé€‚ç”¨äºå ç”¨æ˜¾å­˜æ¯”è¾ƒå¤§çš„ä»»åŠ¡ï¼Œä¾‹å¦‚å›¾åƒåˆ†å‰²</strong>ã€‚å¯¹è¿™ç±»ä»»åŠ¡ï¼Œå¯èƒ½
batchsize åªèƒ½æ˜¯ä¸ªä½æ•°ï¼Œå†å¤§æ˜¾å­˜å°±ä¸å¤Ÿç”¨äº†ã€‚è€Œå½“ batchsize
æ˜¯ä¸ªä½æ•°æ—¶ï¼ŒBN
çš„è¡¨ç°å¾ˆå·®ï¼Œå› ä¸ºæ²¡åŠæ³•é€šè¿‡å‡ ä¸ªæ ·æœ¬çš„æ•°æ®é‡ï¼Œæ¥è¿‘ä¼¼æ€»ä½“çš„å‡å€¼å’Œæ ‡å‡†å·®ã€‚GN
æ˜¯ç‹¬ç«‹äº batch çš„,æ‰€ä»¥å¯ä»¥é€‚ç”¨ã€‚</p>
<h3 id="conditional-instance-normcin">5ã€Conditional Instance
Normï¼ˆCINï¼‰</h3>
<p>â€‹ Dumoulinç­‰äººåœ¨è¿›è¡Œé£æ ¼è¿ç§»ä»»åŠ¡ï¼Œä½¿ç”¨INçš„æ—¶å€™ï¼Œç”¨ä¸åŒçš„<span
class="math inline">\(\gamma\)</span>å’Œ <span
class="math inline">\(\beta\)</span>å³å¯ç”Ÿæˆå‡ºé£æ ¼ä¸åŒçš„å›¾åƒï¼Œäºæ˜¯æå‡ºäº†Conditional
Instance Normalization(CIN)ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220117102111791.png" /></p>
<p>â€‹ å…¶ä¸­sä»£è¡¨é£æ ¼ï¼Œ<span class="math inline">\(\gamma ^s\)</span>å’Œ
<span class="math inline">\(\beta ^s\)</span>æ˜¯å­¦å‡ºæ¥çš„ï¼Œä¸€ç»„ <span
class="math inline">\((\gamma ^s,\beta
^s)\)</span>å¯¹åº”ä¸€ç§é£æ ¼ã€‚Dumoulinç­‰äººçš„æ–¹æ³•è¿ç§»æœ‰é™ç§çš„é£æ ¼ï¼Œæƒ³è¿ç§»æ–°çš„çš„é£æ ¼åˆ™éœ€è¦è®­ç»ƒæ–°çš„æ¨¡å‹ã€‚</p>
<p><strong>éƒ¨åˆ†å†…å®¹å‚è€ƒé“¾æ¥ï¼š</strong></p>
<p>https://zhuanlan.zhihu.com/p/54530247</p>
<p>https://zhuanlan.zhihu.com/p/56542480</p>
<p>https://www.jianshu.com/p/f15fcdf13438</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Normalization</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°9â€”â€”å½’ä¸€åŒ–æ–¹æ³•FRN(Filter Response Normalization)</title>
    <url>/2022/01/18/920f212c6758/</url>
    <content><![CDATA[<h4 id="ä¸€ç®€ä»‹">ä¸€ã€ç®€ä»‹</h4>
<p>â€‹
<strong>åœ¨å…ˆå‰çš„æ–‡ç« ä¸­ï¼Œé“¾æ¥ï¼šhttps://blog.fantast.top/2022/01/16/basic7/ï¼Œè®²è§£äº†BNã€LNã€INã€CINã€GNç­‰å¤šç§ä¸åŒçš„Normalizationï¼Œç”±äºåœ¨DG-Fontçš„é˜…è¯»è¿‡ç¨‹ä¸­ï¼Œåˆå‘ç°äº†ä¸€ä¸ªæ–°çš„å½’ä¸€åŒ–æ–¹æ³•å«åšFRNï¼Œæ•…è€Œåœ¨æ­¤ç¯‡ç•¥åšè®°å½•ã€‚</strong></p>
<p>â€‹
<strong>FRN</strong>æ˜¯è°·æ­Œæå‡ºçš„ä¸€ç§æ–°çš„å½’ä¸€åŒ–æ–¹æ³•ï¼Œå’ŒGNä¸€æ ·ä¸ä¾èµ–batchï¼Œæ•…è€ŒFRNå±‚ä¸ä»…æ¶ˆé™¤äº†æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­å¯¹batchçš„ä¾èµ–ï¼Œè€Œä¸”å½“batch
sizeè¾ƒå¤§æ—¶æ€§èƒ½ä¼˜äºBNã€‚</p>
<p>â€‹ <strong>åŸè®ºæ–‡åç§°ï¼š</strong>ã€ŠFilter Response Normalization Layer:
Eliminating Batch Dependence in the Training of Deep Neural
Networksã€‹</p>
<p>â€‹ <strong>åŸè®ºæ–‡åœ°å€ï¼š</strong>https://arxiv.org/abs/1911.09737</p>
<h4 id="äºŒç»“æ„">äºŒã€ç»“æ„ï¼š</h4>
<p>â€‹ å¦‚ä¸‹æ‰€ç¤ºï¼ŒFRNå±‚æ•´ä½“ç»“æ„åŒ…æ‹¬å½’ä¸€åŒ–å±‚FRNï¼ˆFilter Response
Normalizationï¼‰å’Œæ¿€æ´»å±‚TLUï¼ˆThresholded Linear Unitï¼‰ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220118102128474.png" /></p>
<p>â€‹ æ•´ä¸ªç»“æ„å¹¶ä¸å¤æ‚ï¼Œå°±æ˜¯é€šè¿‡ä¸€ä¸ªå…¬å¼è®¡ç®—ï¼Œæœ€åç»è¿‡ä¸€ä¸ªé˜ˆå€¼é™åˆ¶è¾“å‡º</p>
<p>â€‹ å…¶ä¸­FRNçš„æ“ä½œæ˜¯å¯¹æ¯ä¸ªæ ·ä¾‹çš„æ¯ä¸ªchannelå•ç‹¬è¿›è¡Œå½’ä¸€åŒ–çš„ï¼Œè¿™é‡Œ<span
class="math inline">\(x\)</span>å°±æ˜¯ä¸€ä¸ªNï¼ˆ=HxWï¼‰ç»´åº¦çš„å‘é‡ï¼Œæ‰€ä»¥FRNæ²¡æœ‰BNå±‚å¯¹batchä¾èµ–çš„é—®é¢˜ã€‚BNå±‚é‡‡ç”¨å½’ä¸€åŒ–æ–¹æ³•æ˜¯å‡å»å‡å€¼ç„¶åé™¤ä»¥æ ‡å‡†å·®ï¼Œè€ŒFRNå´ä¸åŒï¼Œè¿™é‡Œæ²¡æœ‰å‡å»å‡å€¼æ“ä½œï¼Œå…¬å¼ä¸­çš„<span
class="math inline">\(v^2\)</span>æ˜¯<span
class="math inline">\({x}\)</span>çš„äºŒæ¬¡èŒƒæ•°çš„å¹³å‡å€¼ã€‚è¿™ç§å½’ä¸€åŒ–æ–¹å¼ç±»ä¼¼BNå¯ä»¥ç”¨æ¥æ¶ˆé™¤ä¸­é—´æ“ä½œï¼ˆå·ç§¯å’Œéçº¿æ€§æ¿€æ´»ï¼‰å¸¦æ¥çš„å°ºåº¦é—®é¢˜ï¼Œæœ‰åŠ©äºæ¨¡å‹è®­ç»ƒã€‚
å…¬å¼é‡Œçš„<span
class="math inline">\({\epsilon}\)</span>æ˜¯ä¸€ä¸ªå¾ˆå°çš„æ­£å¸¸é‡ï¼Œä¸€èˆ¬ä¸º<span
class="math inline">\(1^{-6}\)</span>ä»¥é˜²æ­¢é™¤0ã€‚</p>
<p>â€‹
ä¸€èˆ¬æƒ…å†µä¸‹ç½‘ç»œçš„ç‰¹å¾å›¾å¤§å°N(=HxW)è¾ƒå¤§ï¼Œä½†æ˜¯æœ‰æ—¶å€™å¯èƒ½ä¼šå‡ºç°1x1çš„ç‰¹å¾å›¾çš„æƒ…å†µï¼Œæ¯”å¦‚InceptionV3å’ŒVGGç½‘ç»œï¼Œæ­¤æ—¶å°±<span
class="math inline">\({\epsilon}\)</span>æ¯”è¾ƒå…³é”®ï¼Œ</p>
<p>â€‹ å½’ä¸€åŒ–ä¹‹ååŒæ ·éœ€è¦è¿›è¡Œç¼©æ”¾å’Œå¹³ç§»å˜æ¢ï¼Œè¿™é‡Œçš„<span
class="math inline">\(\gamma\)</span>å’Œ<span
class="math inline">\(\beta\)</span>ä¹Ÿæ˜¯å¯å­¦ä¹ çš„å‚æ•°ï¼ˆå‚æ•°ä¸ºé•¿åº¦æ˜¯Cçš„å‘é‡,
å³ä¸ºç‰¹å¾æ•°ç›®ï¼Œä¹Ÿå°±æ˜¯é€šé“æ•°):</p>
<p>â€‹ <span class="math display">\[{y = \gamma \hat{x} +
\beta}\]</span></p>
<p>â€‹
FRNç¼ºå°‘å»å‡å€¼çš„æ“ä½œï¼Œè¿™å¯èƒ½ä½¿å¾—å½’ä¸€åŒ–çš„ç»“æœä»»æ„åœ°åç§»0ï¼Œå¦‚æœFRNä¹‹åæ˜¯ReLUæ¿€æ´»å±‚ï¼Œå¯èƒ½äº§ç”Ÿå¾ˆå¤š0å€¼ï¼Œè¿™å¯¹äºæ¨¡å‹è®­ç»ƒå’Œæ€§èƒ½æ˜¯ä¸åˆ©çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒFRNä¹‹åé‡‡ç”¨çš„é˜ˆå€¼åŒ–çš„ReLUï¼Œå³TLUï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_01_18_10_32_35_986.png" /></p>
<p>â€‹ è¿™é‡Œçš„<span
class="math inline">\(\tau\)</span>æ˜¯ä¸€ä¸ªå¯å­¦ä¹ çš„å‚æ•°ã€‚åŸè®ºæ–‡ä¸­å‘ç°FRNä¹‹åé‡‡ç”¨TLUå¯¹äºæå‡æ€§èƒ½æ˜¯è‡³å…³é‡è¦çš„ã€‚</p>
<h4 id="ä¸‰ä»£ç å®ç°coding">ä¸‰ã€ä»£ç å®ç°Coding</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FRN</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num_features, eps=<span class="number">1e-6</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(FRN, self).__init__()</span><br><span class="line">        self.tau = nn.Parameter(torch.zeros(<span class="number">1</span>, num_features, <span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">        self.gamma = nn.Parameter(torch.ones(<span class="number">1</span>, num_features, <span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">        self.beta = nn.Parameter(torch.zeros(<span class="number">1</span>, num_features, <span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">        self.eps = eps</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="comment">## input x  shape [B,C,H,W] (batch_size , channel , height , width)</span></span><br><span class="line">        x1 = torch.mean(x**<span class="number">2</span>, dim=[<span class="number">2</span>, <span class="number">3</span>], keepdim=<span class="literal">True</span>)</span><br><span class="line">        <span class="comment">## x1       shape [B,C,1,1] (batch_size , channel , 1 , 1)</span></span><br><span class="line">        x2 = x1 + self.eps</span><br><span class="line">        <span class="comment">## x2 	    shape [B,C,1,1] (batch_size , channel , 1 , 1),  ã€+ ä¸ºé€å…ƒç´ ç›¸åŠ ï¼Œä¸æ”¹å˜ç»´åº¦ã€‘</span></span><br><span class="line">        x3 = torch.rsqrt(x2)</span><br><span class="line">        <span class="comment">## x3       shape [B,C,1,1] (batch_size , channel , 1 , 1),  ã€sqrt ä¸ºé€å…ƒç´ æ“ä½œï¼Œä¸æ”¹å˜ä¸ºç»´åº¦ã€‘</span></span><br><span class="line">        x4 = x * x3</span><br><span class="line">        <span class="comment">## x4       shape [B,C,H,W] (batch_size , channel , height , width)  </span></span><br><span class="line">        <span class="comment">##          å¹¿æ’­æœºåˆ¶,é€å…ƒç´ ç›¸ä¹˜  [B,C,H,W] * [B,C,1,1] = [B,C,H,W]</span></span><br><span class="line">        output = torch.<span class="built_in">max</span>(self.gamma * x4 + self.beta, self.tau)</span><br><span class="line">        <span class="comment">## output   shape [B,C,H,W] (batch_size , channel , height , width)  torch.max é€å…ƒç´ æ“ä½œ</span></span><br><span class="line">        <span class="keyword">return</span> output</span><br><span class="line"></span><br><span class="line"><span class="comment">## ç›¸å…³æ³¨è§£ï¼š</span></span><br><span class="line"><span class="comment">## è¾“å…¥çš„ x.shape = [B,C,H,W] ( Batch_Size \ Channel \ Height \ Width )</span></span><br><span class="line"><span class="comment">## torch.rsqrt()  å¯¹æ¯ä¸ªå…ƒç´ å–å¹³æ–¹æ ¹åå†å–å€’æ•°ï¼Œå¹¶ä¸ä¼šå½±å“å¦‚ç»´åº¦ç­‰å› ç´ ã€‚</span></span><br><span class="line"><span class="comment">## torch.mean() å…¶ä¸­dim=[2,3] ä»£è¡¨æŒ‰ç¬¬2ã€3ç»´æ±‚å¹³å‡å€¼, å³åœ¨å•ä¸ªå®ä¾‹ã€å•ä¸ªChannelä¸Šæ±‚å¹³å‡</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Normalization</tag>
      </tags>
  </entry>
  <entry>
    <title>GANç³»åˆ—ç¬”è®°3â€”â€”GANçš„æ•°å­¦ç†è®ºæ”¯æ’‘</title>
    <url>/2021/12/02/147dd3a9b3ed/</url>
    <content><![CDATA[<h3 id="å‰è¨€">å‰è¨€ï¼š</h3>
<p>â€‹
æœ¬ç¯‡ç¬”è®°ä¸ºè§‚çœ‹æå®æ¯…è€å¸ˆçš„GANç›¸å…³è¯¾ç¨‹åæ‰€è®°å½•ï¼Œæ–‡ä¸­æ‰€æœ‰å›¾ç‰‡åŠå†…å®¹å‡æ¥æºäºæå®æ¯…è€å¸ˆçš„è¯¾ç¨‹ï¼Œæ­¤å¤„åªæ˜¯æ¬è¿+ä»¥è‡ªå·±çš„ç†è§£è¿›è¡Œè®°å½•ã€‚å…¨æ–‡è®²è¿°äº†GANçš„ç†è®ºæ•°å­¦éƒ¨åˆ†çš„æ”¯æ’‘ï¼Œå°†ç›´è§‚çš„GANè®­ç»ƒè¿‡ç¨‹èƒŒåçš„åŸç†ï¼Œä¸ºä»€ä¹ˆèƒ½è¿™ä¹ˆåšï¼Œè®­ç»ƒçš„æ—¶å€™åˆéœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ä¸ºä»€ä¹ˆè¿™äº›å†…å®¹è¿›è¡Œäº†è®²è§£ã€‚</p>
<h3
id="ä¸€æˆ‘ä»¬é€šå¸¸è¯´çš„ç”Ÿæˆé—®é¢˜ä»æœ¬è´¨ä¸Šæ¥çœ‹æ˜¯ä»€ä¹ˆå‘¢">ä¸€ã€æˆ‘ä»¬é€šå¸¸è¯´çš„ç”Ÿæˆé—®é¢˜ï¼Œä»æœ¬è´¨ä¸Šæ¥çœ‹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</h3>
<p>â€‹ ä»ç”Ÿæˆä¸€å¼ å›¾ç‰‡xæ¥è¯´ï¼Œå›¾ç‰‡xå…¶å®å°±æ˜¯åœ¨å›¾ç‰‡é«˜ç»´ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹ã€‚æ¯”å¦‚è¯´64
* 64çš„å›¾åƒï¼Œå…¶å®è´¨å°±æ˜¯64*64ç»´ç©ºé—´ä¸­çš„æŸä¸€ä¸ªç‚¹ã€‚</p>
<h3
id="äºŒganè®­ç»ƒçš„è¿‡ç¨‹åˆ°åº•æ˜¯åœ¨å¹²ä»€ä¹ˆå‘¢">äºŒã€GANè®­ç»ƒçš„è¿‡ç¨‹åˆ°åº•æ˜¯åœ¨å¹²ä»€ä¹ˆå‘¢ï¼Ÿ</h3>
<p>â€‹
åœ¨1ä¸­ï¼Œæˆ‘ä»¬å‘ç°å…¶å®åœ¨å›¾åƒçš„é«˜ç»´ç©ºé—´ä¸­ï¼Œå­˜åœ¨æ„ä¹‰çš„å›¾åƒçš„ç‚¹å…¶å®æ˜¯å¾ˆç¨€ç–çš„ï¼Œé‚£ä¹ˆè®­ç»ƒçš„æ—¶å€™ï¼Œå…¶å®æ˜¯æä¾›äº†ä¸€å †æœ‰æ„ä¹‰çš„å›¾åƒçš„é«˜ç»´ç‚¹ï¼Œç„¶åæƒ³è¦é€šè¿‡GANæ¥æ‰¾åˆ°è¿™äº›ç‚¹çš„åˆ†å¸ƒæƒ…å†µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰¾åˆ°åœ¨å›¾åƒé«˜ç»´ç©ºé—´ä¸­ï¼Œæœ‰æ„ä¹‰çš„å›¾åƒçš„ç‚¹æ‰€éµå¾ªçš„åˆ†å¸ƒæ˜¯æ€ä¹ˆæ ·çš„ã€‚è¿™ç§åˆ†å¸ƒæƒ…å†µï¼Œæˆ‘ä»¬äººæ˜¯æ— æ³•ç›´æ¥æ‰¾åˆ°çš„ã€‚</p>
<p>â€‹
æ‰¾åˆ°è¿™ç§åˆ†å¸ƒæƒ…å†µä»¥åï¼Œå…¶å®ç”Ÿæˆçš„è¿‡ç¨‹å°±æ˜¯åœ¨æ¦‚ç‡åˆ†å¸ƒä¸­è¾ƒé«˜æ¦‚ç‡çš„ä½ç½®è¿›è¡Œå–æ ·ï¼Œå¾—åˆ°çš„å¯èƒ½å°±æ˜¯èƒ½å¤Ÿä»¤æˆ‘ä»¬æ»¡æ„çš„å›¾åƒã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104004253.png" /></p>
<h3
id="ä¸‰åœ¨ganä¹‹å‰æˆ‘ä»¬çš„è®­ç»ƒæ‰€ä¾æ®çš„ç†è®ºæ˜¯ä»€ä¹ˆ">ä¸‰ã€åœ¨GANä¹‹å‰ï¼Œæˆ‘ä»¬çš„è®­ç»ƒæ‰€ä¾æ®çš„ç†è®ºæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>â€‹ ä½¿ç”¨Maximum Likelihood Estimation
æœ€å¤§ä¼¼ç„¶ä¼°è®¡ã€‚æ•´ä½“çš„æ€æƒ³ä¸è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104025964.png" /></p>
<p>â€‹ é¦–å…ˆæˆ‘ä»¬æœ‰ä¸€ä¸ªæ•°æ®é›†åˆ†å¸ƒï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šå¸¸ä½¿ç”¨çš„è®­ç»ƒé›†<span
class="math inline">\(P_{data}\)</span>ã€‚</p>
<p>â€‹ æˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªåˆ†å¸ƒ<span
class="math inline">\(P_G\)</span>ï¼Œå…¶æ˜¯Î¸çš„å‡½æ•°ï¼Œå°±æ˜¯æˆ‘ä»¬è¦è®­ç»ƒçš„ç”¨äºç”Ÿæˆçš„æ¦‚ç‡åˆ†å¸ƒã€‚æˆ‘ä»¬çš„ç›®æ ‡å…¶å®å°±æ˜¯è¯´æƒ³è¦æ‰¾åˆ°ä¸€ä¸ªÎ¸å€¼è®©<span
class="math inline">\(P_G\)</span>å»æ¥è¿‘<span
class="math inline">\(P_{data}\)</span>å°±å¯ä»¥äº†ã€‚ä½†æ˜¯æ€æ ·é‡åŒ–è®¡ç®—è¿™ä¸ªæ¦‚ç‡åˆ†å¸ƒçš„æ¥è¿‘å‘¢ï¼Ÿ</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104038477.png" /></p>
<p>â€‹ æˆ‘ä»¬å¯ä»¥å…ˆä»<span
class="math inline">\(P_{data}\)</span>ä¸­é‡‡é›†mä¸ªæ ·æœ¬ï¼Œç„¶åå¸¦å…¥åˆ°<span
class="math inline">\(P_{G}\)</span>è¿™ä¸ªæ¦‚ç‡åˆ†å¸ƒé‡Œé¢ï¼Œå¸Œæœ›å¾—åˆ°çš„å¯¹åº”çš„æ¦‚ç‡è¶Šå¤§è¶Šå¥½ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰çš„å‡ ç‡ç›¸ä¹˜ï¼Œå°±ä¼šå¾—åˆ°Lã€‚æœ€ç»ˆç›®æ ‡å°±æ˜¯è¦æ‰¾æœ€å¥½çš„Î¸ä½¿å¾—èƒ½å¤Ÿè®©è¿™ä¸ªLæœ€å¤§ã€‚</p>
<p>â€‹ å…¶å®æ‰€è°“çš„Maximum Likelihood ç­‰åŒäºæœºå™¨å­¦ä¹ ä¸­çš„ Minimize KL
Divergence.ä¸‹å›¾çš„è¯æ˜¯æ•°å­¦å…¬å¼ç›¸å…³çš„æ¨å¯¼è¿‡ç¨‹ï¼Œ</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104119273.png" /></p>
<p>â€‹ é‚£ä¹ˆç°åœ¨é—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬æ€ä¹ˆå»å®šä¹‰ä¸€ä¸ªgeneral çš„<span
class="math inline">\(P_G\)</span>ã€‚å¦‚æœè¿™ä¸ª<span
class="math inline">\(P_G\)</span>æ˜¯ç¬¦åˆé«˜æ–¯åˆ†å¸ƒæˆ–è€…å…¶ä»–ç®€å•åˆ†å¸ƒçš„è¯ï¼Œæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä½†æ˜¯å¦‚æœ<span
class="math inline">\(P_G\)</span>è¦ç¬¦åˆè¿™äº›åˆ†å¸ƒç„¶åå†å»æ‹Ÿåˆ<span
class="math inline">\(P_{data}\)</span>çš„è¯ï¼Œæ˜¾ç„¶å°±ä¼šå—åˆ°å¾ˆå¤šçš„é™åˆ¶ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ›´generalçš„åˆ†å¸ƒæ¥å»æ‹Ÿåˆ<span
class="math inline">\(P_{data}\)</span>ã€‚ä½†æ˜¯å¦‚æœ<span
class="math inline">\(P_{G}\)</span>ä¸å—é™åˆ¶ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¤æ‚çš„å¾ˆgeneralçš„åˆ†å¸ƒçš„è¯ï¼Œä¸Šè¿°è®¡ç®—å¼å­ä¸­<span
class="math inline">\(P_{G}(X;\theta)\)</span>è¿™ä¸€é¡¹å°±å¾ˆéš¾è®¡ç®—å‡ºæ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰æœ‰äº†ä¸‹è¿°çš„æƒ³æ³•ã€‚</p>
<h3
id="å››åœ¨ganä¸­æˆ‘ä»¬æ‰€ä¾æ®çš„ç†è®ºæ˜¯ä»€ä¹ˆ">å››ã€åœ¨GANä¸­ï¼Œæˆ‘ä»¬æ‰€ä¾æ®çš„ç†è®ºæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>â€‹
GANä¸­çš„Generatoræ˜¯ä¸€ä¸ªç½‘ç»œï¼Œæˆ‘ä»¬å‡è®¾è¾“å…¥çš„æ˜¯ä¸€ä¸ªç¬¦åˆæ­£æ€åˆ†å¸ƒçš„å„ç§é‡‡æ ·ç‚¹ï¼Œè¿™äº›ç‚¹é€šè¿‡Gä»¥åï¼Œä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„åˆ†å¸ƒï¼Œè¿™ä¸ªæ–°çš„åˆ†å¸ƒå…¶å®å°±æ˜¯<span
class="math inline">\(P_G(x)\)</span>ã€‚éšåæˆ‘ä»¬çš„ç›®æ ‡ä¹Ÿæ˜¯è®©è¿™ä¸ª<span
class="math inline">\(P_G(x)\)</span>å’Œ<span
class="math inline">\(P_{data}(x)\)</span>è¿™ä¸¤ä¸ªåˆ†å¸ƒè¶Šæ¥è¿‘è¶Šå¥½ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104254669.png" /></p>
<p>â€‹ ä»å…¬å¼æ¥çœ‹ï¼Œå°±æ˜¯æœ€å°åŒ–<span
class="math inline">\(P_G\)</span>å’Œ<span
class="math inline">\(P_{data}\)</span>ä¹‹é—´çš„æŸä¸€ç§å·®å¼‚ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104316362.png" /></p>
<p>â€‹ çœ‹åˆ°è¿™é‡Œï¼Œå¦‚æœæˆ‘ä»¬çŸ¥é“<span
class="math inline">\(P_G\)</span>å’Œ<span
class="math inline">\(P_{data}\)</span>çš„å…¬å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„ä»£å…¥Divergenceçš„å…¬å¼ä¸­ï¼Œç„¶åç”¨ç±»ä¼¼äºæ¢¯åº¦ä¸‹é™çš„æ–¹æ³•ï¼Œå»æœ€å°åŒ–å®ƒã€‚ä½†æ˜¯é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨å¹¶ä¸çŸ¥é“<span
class="math inline">\(P_G\)</span>å’Œ<span
class="math inline">\(P_{data}\)</span>çš„å…¬å¼ï¼Œä¹Ÿå°±æ˜¯æ ¹æœ¬æ— æ³•è®¡ç®—è¿™ä¸ªDivã€‚è¿™å°±æ˜¯GANç¥å¥‡ä¹‹å¤„ï¼š</p>
<p>è™½ç„¶æˆ‘ä»¬æ²¡æ³•çŸ¥é“<span class="math inline">\(P_G\)</span>å’Œ<span
class="math inline">\(P_{data}\)</span>çš„å…¬å¼ï¼Œä½†æ˜¯æˆ‘ä»¬æ˜¯å¯ä»¥ä»ä¸­è¿›è¡Œé‡‡æ ·çš„ã€‚ä»<span
class="math inline">\(P_{data}\)</span>ä¸­è¿›è¡Œé‡‡æ ·æ— éå°±æ˜¯ä»æˆ‘ä»¬çš„è®­ç»ƒé›†ä¸­å–æ•°æ®å‡ºæ¥ï¼Œä»<span
class="math inline">\(P_G\)</span>ä¸­è¿›è¡Œé‡‡æ ·ï¼Œæ— éå°±æ˜¯ä»æ­£æ€åˆ†å¸ƒä¸­é‡‡æ ·ç„¶åä¸¢åˆ°Generatorä¸­ï¼Œå¾—åˆ°çš„æ•°æ®ã€‚å¦‚ä¸‹æ‰€ç¤º</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104340643.png" /></p>
<p>â€‹
é‚£ä¹ˆå…¶å®GANè®­ç»ƒDiscriminatorçš„ç›®çš„ï¼Œå°±æ˜¯ä¸ºäº†èƒ½å¤Ÿé€šè¿‡Discriminatoræ¥è®¡ç®—å‡º<span
class="math inline">\(P_G\)</span>å’Œ<span
class="math inline">\(P_{data}\)</span>çš„Divergenceã€‚ä»å®è§‚ä¸Šæ¥çœ‹ï¼Œæ˜¯æ€ä¹ˆå®Œæˆè¿™æ ·ä¸€ä»¶äº‹æƒ…çš„å‘¢ï¼Ÿ</p>
<p>â€‹ æˆ‘ä»¬å‰é¢è¯´è¿‡è®­ç»ƒçš„Discriminatoråœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå°±æ˜¯è¦å­¦ä¼šç»™ä»<span
class="math inline">\(P_{data}\)</span>çš„ä¸­é‡‡æ ·å‡ºçš„æ•°æ®é«˜åˆ†ï¼Œç»™ä»<span
class="math inline">\(P_{G}\)</span>ä¸­é‡‡æ ·å‡ºçš„æ•°æ®ä½åˆ†ã€‚æ‰€ä»¥æˆ‘ä»¬å½“æ—¶åœ¨è®­ç»ƒDiscriminatorçš„æ—¶å€™ï¼Œå°±å†™äº†ä¸€ä¸ªç›®æ ‡å‡½æ•°ï¼ŒV(G,D)æ¥å®Œæˆä¸Šè¿°çš„ç›®æ ‡,ç„¶åè¦è®­ç»ƒDçš„å‚æ•°ï¼Œæ‰¾åˆ°ä¸€ç»„Dçš„å‚æ•°ä½¿å¾—V(D,G)æœ€å¤§ã€‚ç¥å¥‡çš„äº‹æƒ…å°±æ˜¯ï¼Œè¿™ä¸ªVå…¶å®å°±æ˜¯J-S
Divergenceæœ‰éå¸¸å¯†åˆ‡çš„å…³ç³»ã€‚</p>
<p>â€‹ ä»ç›´è§‚ä¸Šè®²ï¼Œå¦‚æœ<span class="math inline">\(P_{data}\)</span>å’Œ<span
class="math inline">\(P_G\)</span>é‡‡æ ·å‡ºæ¥çš„æ•°æ®é çš„å¾ˆè¿‘ï¼Œé‚£Discriminatorè‡ªç„¶æ— æ³•åŒºåˆ†ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åŠæ³•æ‰¾åˆ°ä¸€ä¸ªDä½¿å¾—Vå˜å¾—å¾ˆå¤§ï¼Œè¿™ä¸ªæ—¶å€™å…¶å®æ„å‘³ç€å°±æ˜¯<span
class="math inline">\(P_{data}\)</span>å’Œ<span
class="math inline">\(P_G\)</span>å¾ˆæ¥è¿‘ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒæ•°æ®çš„Divergenceå…¶å®æ˜¯å¾ˆå°çš„ã€‚æ‰€ä»¥å¦‚ä½•è¾¾åˆ°ä¸€ä¸ªæœ€å¤§çš„Vå€¼ï¼Œä¼šè·Ÿè¿™ä¸¤å †æ•°æ®çš„Divergenceæ˜¯è‚¯å®šå­˜åœ¨å…³ç³»çš„ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104420420.png" /></p>
<p>ä»¥ä¸‹æ˜¯è¯¦ç»†çš„æ¨å¯¼ï¼Œè¯æ˜ä¸ºä»€ä¹ˆVä¼šè·ŸDivergenceæœ‰å…³ç³»ï¼Ÿ</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104429437.png" /></p>
<p>â€‹ æˆ‘ä»¬æŠŠç§¯åˆ†é‡Œçš„æ¯ä¸€é¡¹éƒ½åˆ†å¼€æ¥ç®—ï¼Œä¸ºæ¯ä¸€é¡¹éƒ½æ‰¾ä¸€ä¸ªæœ€å¥½çš„D(x)ã€‚</p>
<p>ã€å› ä¸ºD(X)å‡è®¾å¯ä»¥æ˜¯ä»»ä½•å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯D(x)çš„è¾“å‡ºå¯ä»¥æ˜¯ä»»æ„å€¼ã€‘</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104440904.png" /></p>
<p>â€‹ å°†è¿™ä¸ªå…¬å¼å›ä»£åˆ°Vä¸­ï¼Œå°†åŸæ¥Vä¸­çš„D(x) ç”¨æˆ‘ä»¬å¾—åˆ°çš„ç»“æœè¿›è¡Œæ›¿ä»£ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104448302.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104454398.png" /></p>
<p>â€‹
æ‰€ä»¥æ¨å¯¼åˆ°æ­¤ï¼Œæˆ‘ä»¬å°±å¾—å‡ºäº†ä¸€ä¸ªç»“è®ºï¼Œå½“æˆ‘ä»¬trainä¸€ä¸ªDiscriminatorçš„æ—¶å€™ï¼Œæˆ‘ä»¬è®©ç›®æ ‡å‡½æ•°æœ€å¤§åŒ–ï¼Œè®©ç›®æ ‡å‡½æ•°æœ€å¤§åŒ–å…¶å®å°±æ˜¯è®©<span
class="math inline">\(P_{data}\)</span>å’Œ<span
class="math inline">\(P_G\)</span>è¿™ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒsampleå‡ºæ¥çš„æ•°æ®ä¹‹é—´çš„J-S
Divergenceæœ€å°ã€‚</p>
<p>â€‹ æ‰€ä»¥æ•´ä¸ªé—®é¢˜çš„é€»è¾‘å˜æˆäº†ç°åœ¨è¿™æ ·å­ï¼šæˆ‘ä»¬æœ¬æ¥æ˜¯è¦ä½¿å¾—<span
class="math inline">\(P_G\)</span>å’Œ<span
class="math inline">\(P_{data}\)</span>çš„Divæœ€å°ï¼Œç°åœ¨çš„è¯å‘¢ï¼Œç”±äºæˆ‘ä»¬max
V(D,G)å’ŒJ-S Divergenceç›¸å…³ï¼Œæ‰€ä»¥å¯ä»¥ç”¨max V(D,G)è¿™ä¸€é¡¹æŠŠåŸæ¥çš„Div
è¿™ä¸€é¡¹æ›¿æ¢æ‰ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104505340.png" /></p>
<p>â€‹ äºæ˜¯ä¹å°±å˜æˆäº†æˆ‘ä»¬è¦è§£çš„é—®é¢˜å°±æ˜¯å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä¸€ä¸ªå¼å­ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104513342.png" /></p>
<p>â€‹
ä»ç›´è§‚ä¸Šç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ä¸Šæ¥ç†è§£ï¼šæˆ‘ä»¬å‡è®¾ç°åœ¨åªæœ‰G1ï¼ŒG2ï¼ŒG3è¿™ä¸‰ä¸ªç”Ÿæˆå™¨å¯ä»¥é€‰ï¼ŒDçš„æ¨ªåæ ‡å˜åŒ–æˆ‘ä»¬å‡è®¾å°±æ˜¯é€‰æ‹©äº†ä¸åŒçš„Discriminator,
V(G1,D)çš„å‡½æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104521610.png" /></p>
<p>â€‹
æˆ‘ä»¬å…ˆæ¥ä»¥ä¸€ä¸ªå®ä¾‹ï¼Œæ¥ç†è§£ä¸€ä¸‹æˆ‘ä»¬è¦å®ç°çš„ç›®æ ‡ã€‚é¦–å…ˆå°±æ˜¯å½“Gå›ºå®šçš„æ—¶å€™ï¼Œè¦æ‰¾åˆ°ä¸€ä¸ªDï¼Œä½¿å¾—V(G,D)æœ€å¤§ï¼Œæ‰€ä»¥æŒ‰ç…§æˆ‘ä»¬çš„ç¤ºä¾‹ï¼Œå¯ä»¥åœ¨é€‰æ‹©ä¸åŒçš„Gçš„æ—¶å€™ï¼Œæ‰¾åˆ°ä¸‰ä¸ªå¯¹åº”çš„ç‚¹ï¼Œè¿™ä¸‰ä¸ªå¯¹åº”çš„ç‚¹æ‰€å¯¹åº”çš„æ¨ªåæ ‡Dï¼Œå°±æ˜¯èƒ½å¤Ÿä½¿å¾—ï¼Œåœ¨å½“å‰çš„Gä¸‹ï¼Œè®©Vï¼ˆG,Dï¼‰æœ€å¤§çš„é‚£ä¸ªDã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104529086.png" /></p>
<p>â€‹
ç„¶åæˆ‘ä»¬è¦æ‰¾ä¸€ä¸ªGï¼Œæœ€å°åŒ–å„ç§ä¸åŒçš„Gçš„æœ€å¤§V(G,D)ï¼ŒæŒ‰ç…§ä¸Šå›¾çš„ç¤ºä¾‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åº”è¯¥é€‰æ‹©G3ï¼Œå› ä¸ºåœ¨ä¸‰ä¸ªV(G,D)çš„çº¢ç‚¹ä¸­ï¼ŒV(G3,D)å¯¹åº”çš„å€¼æœ€ä½ï¼Œæ‰€ä»¥G3æ‰æ˜¯èƒ½å¤Ÿä½¿å¾—å„ç§ä¸åŒçš„Gçš„æœ€å¤§V(G,D)æœ€å°ã€‚</p>
<p>â€‹
ä»æ„ä¹‰çš„è§’åº¦æ¥çœ‹ï¼Œå…¶å®å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒV(G,D)ä¸­çš„è¿™ä¸ªæœ€å¤§å€¼çš„å‡½æ•°å€¼ï¼Œå…¶å®å°±æ˜¯ç”¨è¿™ä¸ª<span
class="math inline">\(P_G\)</span>å’Œ<span
class="math inline">\(P_{data}\)</span>ä¹‹é—´çš„Divergenceã€‚è¿™ä¹Ÿå°±å¾ˆå¥½ç†è§£ï¼Œåœ¨è¿™ä¹ˆå¤šçš„Gä¸­ï¼Œæˆ‘ä»¬è¦é€‰æ‹©é‚£ä¸ªæœ€å°çš„ï¼Œæ¥æœ€å°åŒ–Divergence.</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104536101.png" /></p>
<p>â€‹
ç°åœ¨çš„è¯ï¼Œå°±æ˜¯è¦æ‰¾åˆ°ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œæ€ä¹ˆæ ·å»æ•°å­¦ä¸Šæˆ–è€…æ˜¯ç¨‹åºä¸Šï¼Œæ±‚è§£è¿™ä¸ªç›®æ ‡ã€‚å…¶å®è¿™å°±æ˜¯æˆ‘ä»¬æœ€å¼€å§‹è®²è¿‡çš„è¿­ä»£çš„è®­ç»ƒGANçš„è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104548084.png" /></p>
<p>â€‹
æ¥ä¸‹å»æˆ‘ä»¬è¿›ä¸€æ­¥çš„è§£é‡Šï¼Œä¸ºä»€ä¹ˆè¿™æ ·ä¸€ä¸ªè¿­ä»£è®­ç»ƒçš„è¿‡ç¨‹ï¼Œå°±æ˜¯åœ¨è§£ä¸Šé¢æåˆ°çš„ä¸€ä¸ªmin
maxçš„é—®é¢˜ã€‚</p>
<p>â€‹ ä¸ºäº†ç®€åŒ–min,maxçš„æ±‚è§£ï¼Œä½¿å¾—æ›´å¥½ç†è§£ï¼Œæˆ‘ä»¬å…ˆä¸æƒ³max
V(G,D)é‡Œé¢çš„äº‹æƒ…ï¼Œæˆ‘ä»¬ç›´æ¥è®¾maxV(G,D) ä¸º
L(G),å› ä¸ºå¤–é¢é‚£å±‚minæ˜¯è·ŸDæ²¡å…³ç³»çš„ã€‚</p>
<p>â€‹
é‚£é—®é¢˜å°±å˜æˆäº†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé‚£å…¶å®å°±å¾ˆç®€å•ï¼Œå°±æ˜¯ç”¨æ¢¯åº¦ä¸‹é™å»è¿›è¡Œä¼˜åŒ–ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104602866.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104605809.png" /></p>
<p>â€‹ æ‰€ä»¥æ•´ä½“çš„æ±‚è§£æœ€ä¼˜åŒ–é—®é¢˜çš„ç®—æ³•åº”è¯¥æ˜¯åƒä¸‹å›¾ä¸€æ ·ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104613127.png" /></p>
<p>â€‹ å…¶å®åœ¨è¿™ä¸ªè¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼Œå¹¶ä¸æ˜¯éå¸¸å‡†ç¡®çš„åœ¨å‡å°‘JS
divergence,å› ä¸ºåœ¨æ±‚è§£çš„è¿‡ç¨‹ä¸­ï¼Œå…¶å®Gæ˜¯åœ¨ä¸€ä»£ä¸€ä»£å˜åŒ–çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çœ‹åˆ°çš„ä»G0åˆ°G1åˆ°G2è¿™æ ·å­ï¼Œé‚£ä¹ˆæ¯æ¬¡Gå˜åŒ–ä»¥åå‘¢ï¼Œå…¶å®V(G,D)åº”è¯¥éƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚æˆ‘ä»¬è¯´å…¶å®Œæˆäº†Decrease
js divergenceè¿™ä»¶äº‹å‘¢ï¼Œæ˜¯åŸºäºä¸€ä¸ªé»˜è®¤è¿‘ä¼¼çš„ï¼Œå°±æ˜¯æˆ‘ä»¬é»˜è®¤D0* å’Œ D1*
è¿‘ä¼¼ç›¸ç­‰ï¼Œä¹Ÿå°±æ˜¯è¯´G0å’ŒG1ä¹‹é—´ä¸ä¼šæœ‰å¤ªå¤§çš„å˜åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´Gçš„æ¯ä¸€ä»£çš„æ›´æ–°ä¸ä¼šå¤ªå¤§ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104624268.png" /></p>
<p>â€‹
<strong>ä¹Ÿå°±æ˜¯å› ä¸ºæœ‰è¿™æ ·ä¸€ä¸ªå‡è®¾ï¼Œæ‰€ä»¥ä½ æ¯ä¸€è½®è¿­ä»£è®­ç»ƒç”Ÿæˆå™¨çš„æ—¶å€™ï¼Œä¸èƒ½å¤Ÿupdateå¤ªå¤šæ¬¡ï¼Œè€Œåœ¨trainåˆ¤åˆ«å™¨çš„æ—¶å€™ï¼Œç†è®ºä¸Šåº”è¯¥è®­ç»ƒåˆ°åº•ï¼Œä½¿å¾—åˆ¤åˆ«å™¨è¾¾åˆ°æœ€ä¼˜ã€‚</strong></p>
<p>â€‹
<strong>ç„¶åæˆ‘ä»¬åœ¨å®é™…åšçš„æ—¶å€™ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬çš„ç›®æ ‡å‡½æ•°å…¶å®å’Œç†è®ºçš„Vè¿˜æœ‰ä¸€å®šçš„åŒºåˆ«ï¼Œç†è®ºçš„Væ˜¯æœŸæœ›å€¼ï¼Œä½†æ˜¯å®é™…ä¸Šä¸å¤ªå¯èƒ½åšçš„åˆ°è¿™ä¸€ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬å…¶å®æ˜¯ç”¨ç¦»æ•£çš„é‡‡æ ·æ¥è¿›è¡Œä»£æ›¿çš„ã€‚</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104649400.png" /></p>
<p>â€‹
æ‰€ä»¥æœ€åå›é¡¾ä¸€ä¸‹è®­ç»ƒGANçš„ç®—æ³•ï¼Œå¯¹äºæœ‰ä¸€äº›æ­¥éª¤å…¶å®å¯ä»¥ç†è§£çš„æ›´ä¸ºæ·±å…¥ã€‚æ¯”è¾ƒé‡è¦çš„å…¶å®å°±æ˜¯ä¹‹å‰æè¿‡çš„ï¼Œåœ¨æ¯ä¸€è½®è¿­ä»£ä¸­ï¼Œä½ å…¶å®å¯ä»¥ä½¿ç”¨æ¢¯åº¦ä¸‹é™å»æ›´æ–°å¾ˆå¤šéçš„åˆ¤åˆ«å™¨çš„å‚æ•°ï¼Œä½†æ˜¯åœ¨æ›´æ–°ç”Ÿæˆå™¨å‚æ•°çš„æ—¶å€™ï¼Œåªèƒ½æ›´æ–°ä¸€æ¬¡ï¼Œå¦‚æœæ›´æ–°çš„å¤ªå¤§äº†ï¼ŒG0
ä¸çº¦ç­‰äºG1äº†ï¼Œé‚£ä¹ˆä½ åœ¨åšçš„äº‹æƒ…ä¹Ÿå°±æ˜¯ä¸ä¼šåœ¨minimize js
divergenceäº†ï¼Œå°±å’Œç†è®ºä¸ç¬¦åˆäº†ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104659145.png" /></p>
<p>â€‹
æœ€åè¿˜æœ‰ä¸€ä¸ªéœ€è¦æåŠçš„å†…å®¹ï¼Œåœ¨åŸè®ºæ–‡ä¸­ï¼Œå…¶å®è®­ç»ƒGeneratorçš„å‚æ•°çš„ç›®æ ‡å‡½æ•°å¹¶ä¸æ˜¯æˆ‘ä»¬ä¸Šé¢æ‰€å†™çš„ï¼Œè€Œæ˜¯ä¼šæŠŠæŸä¸€é¡¹è¿›è¡Œéƒ¨åˆ†çš„æ”¹å˜å¦‚ä¸‹æ‰€ç¤ºã€‚ä½†å…¶å®ä¸¤ç§å‚æ•°éƒ½å¯ä»¥è¿›è¡Œè®­ç»ƒã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104707603.png" /></p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>GANç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>GAN</tag>
        <tag>Theoretical Basis</tag>
      </tags>
  </entry>
  <entry>
    <title>GANç³»åˆ—ç¬”è®°4â€”â€”GANè®­ç»ƒè¿‡ç¨‹ä¸­çš„ä¸€äº›Tipsä¸æ”¹è¿›çš„GANç½‘ç»œï¼ˆå«LSGANã€WGANã€EBGANï¼‰</title>
    <url>/2021/12/03/ce02100bd0a0/</url>
    <content><![CDATA[<h3 id="ä¸€tips1-æœ‰å…³å¦‚ä½•æ›´æœ‰æ•ˆçš„è®­ç»ƒåˆ¤åˆ«å™¨">ä¸€ã€Tips1
æœ‰å…³å¦‚ä½•æ›´æœ‰æ•ˆçš„è®­ç»ƒåˆ¤åˆ«å™¨</h3>
<p>â€‹
åœ¨ç¬¬ä¸‰ä»½ç¬”è®°ä¸­ï¼Œæˆ‘ä»¬è®²åˆ°å…¶å®åœ¨è®­ç»ƒGANçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°±æ˜¯åœ¨è®¡ç®—æœ€å°åŒ–JS
divergenceçš„è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ã€‚ä½†æ˜¯å…¶å®JS
divergenceå…¶å®å­˜åœ¨ä¸€ä¸ªéå¸¸ä¸¥é‡çš„é—®é¢˜ï¼Œæ ¹æºåœ¨äºgeneration
dataçš„åˆ†å¸ƒå’Œreal
dataçš„åˆ†å¸ƒå¾€å¾€æ˜¯æ²¡æœ‰ä»»ä½•é‡å çš„ï¼Œè¿™ä¸ªæ²¡æœ‰ä»»ä½•é‡å çš„é—®é¢˜æ˜¯ç”±ä»¥ä¸‹ä¸¤ä¸ªå› ç´ å¯¼è‡´çš„ï¼š</p>
<p>1ã€dataæœ¬è´¨å¯¼è‡´ã€‚Dataæœ¬èº«ï¼Œæˆ‘ä»¬è®¤ä¸ºæ˜¯ä¸€ä¸ªå›¾åƒæ˜¯ä¸€ä¸ªé«˜ç»´ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹ï¼Œ<span
class="math inline">\(P_G\)</span>å’Œ<span
class="math inline">\(P_{data}\)</span>åœ¨è¿™ä¸ªé«˜ç»´ç©ºé—´ä¸­éƒ½æ˜¯å±äºlow-dim
manifoldã€‚æ‰€ä»¥åŸºæœ¬æ˜¯ä¸å­˜åœ¨é‡å çš„éƒ¨åˆ†çš„ã€‚</p>
<p>2ã€å®é™…æ“ä½œçš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯å…ˆè¿›è¡Œçš„é‡‡æ ·ï¼Œç„¶åå†ç”¨discriminatorå»é‡ä»–ä»¬ä¹‹é—´çš„divergenceï¼Œè€Œä¸”é‡‡æ ·çš„æ ·ä¾‹ä¹Ÿä¸ä¼šå¤ªå¤šã€‚æ‰€ä»¥ç¦»æ•£çš„é‡‡æ ·ä¹Ÿä¼šå¯¼è‡´ï¼Œä¸¤å †é‡‡æ ·çš„ç‚¹åŸºæœ¬ä¸Šæ˜¯ä¸å¯èƒ½é‡å çš„ï¼Œåº”è¯¥æ˜¯æ²¡æœ‰äº¤é›†çš„ã€‚</p>
<p>â€‹ é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆå½“<span class="math inline">\(P_G\)</span>å’Œ<span
class="math inline">\(P_{data}\)</span>æ²¡æœ‰é‡åˆéƒ¨åˆ†çš„æ—¶å€™ï¼Œç”¨JS
divergenceè¡¡é‡ä¼šå‡ºé—®é¢˜å‘¢ï¼Ÿç²¾ç¡®ä¸€ç‚¹æ¥è¯´ï¼Œåº”è¯¥æ˜¯ä¼šå¯¹ä½ è®­ç»ƒæ—¶å€™ï¼Œé€ æˆæ¯”è¾ƒå¤§çš„éšœç¢ã€‚é¦–å…ˆæˆ‘ä»¬ä½ éœ€è¦çŸ¥é“ä¸€ä¸ªäº‹å®ï¼Œæœ‰å…³JS
divergenceï¼Œå°±æ˜¯å¦‚æœä¸¤ä¸ªåˆ†å¸ƒæ²¡æœ‰ä»»ä½•é‡åˆï¼Œé‚£ä¹ˆè®¡ç®—å‡ºæ¥çš„JS
divergenceå€¼å°±æ˜¯log2ï¼Œæ— è®ºå…¶ç›¸è·å¤šè¿œã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ›´ç›´è§‚ä¸€äº›ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115104959639.png" /></p>
<p>â€‹
å¯¹äºè¿™ä¸‰ç»„æ•°æ®è€Œè¨€ï¼Œå› ä¸ºç®—å‡ºæ¥çš„ç›®æ ‡å‡½æ•°éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥åˆ¤åˆ«å™¨ä¼šè®¤ä¸ºG0è·ŸG1æ˜¯ä¸€æ ·å·®çš„ï¼Œä¹Ÿå°±æ²¡æ³•æŠŠG0æ›´æ–°åˆ°G1.è¿™æ ·å­çš„è¯å°±ä¼šç»™åˆ¤åˆ«å™¨çš„è®­ç»ƒå¸¦æ¥ä¸€å®šçš„å›°éš¾</p>
<p>â€‹ è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®ä»¥ä¸€ä¸ªç›´è§‚çš„æ–¹æ³•æ¥è®²å°±å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå‡è®¾è“ç‚¹æ˜¯generated
dataï¼Œç»¿è‰²æ˜¯real
dataï¼Œä¸¤ç»„ç‚¹æ²¡æœ‰äº¤é›†ï¼Œæˆ‘ä»¬ç°åœ¨è®­ç»ƒä¸€ä¸ªåˆ¤åˆ«å™¨ï¼ˆå…¶å®å°±æ˜¯ä¸€ä¸ªbinary
classifierï¼‰,å¦‚æœè¿™ä¸ªåˆ¤åˆ«å™¨è®­ç»ƒçš„å¤ªå¥½çš„è¯å‘¢ï¼Œå°±ä¼šå¯¼è‡´å¦‚ä¸‹å›¾æ‰€ç¤ºçš„çº¢è‰²å®çº¿çš„æƒ…å†µï¼Œè“è‰²ç‚¹ä¸Šæ–¹çš„åŒºåŸŸå¯¼æ•°éƒ½æ˜¯é›¶ï¼Œè¿™å°±ä¼šä½¿çš„Generatoråœ¨æ¢¯åº¦ä¸‹é™çš„æ—¶å€™ï¼Œæ²¡æ³•ç»§ç»­ä¸‹å»ï¼Œgenerated
dataä¹Ÿå°±æ²¡æ³•åƒreal
dataé è¿‘ã€‚å¦‚æœè¿™ä¸ªåˆ¤åˆ«å™¨è®­ç»ƒçš„ä¸è¡Œçš„è¯ï¼Œåˆå¾ˆå®¹æ˜“å¯¼è‡´åˆ†è¾¨ä¸å‡ºä¸¤ç»„dataã€‚æ‰€ä»¥ï¼Œåœ¨åŸå§‹GANæ—©æœŸï¼Œè®­ç»ƒæ˜¯æ¯”è¾ƒä¸å®¹æ˜“çš„ä¸€ä»¶äº‹æƒ…ã€‚å› ä¸ºä½ æ²¡æœ‰åŠæ³•å»åˆ†è¾¨ï¼Œåˆ°åº•ä»€ä¹ˆæ˜¯è®­ç»ƒçš„å¤ªå¥½ï¼Œä»€ä¹ˆæ˜¯è®­ç»ƒçš„ä¸è¡Œã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105009691.png" /></p>
<h3 id="äºŒleast-square-gan-lsgan">äºŒã€Least Square GAN ( LSGAN )</h3>
<p>â€‹
æ‰¿æ¥ä¸Šä¸€æ®µè½çš„å†…å®¹ï¼Œä¸ºäº†ä½¿å¾—ä¸Šè¿°æè¿°çš„æ¢¯åº¦ä¸º0ï¼Œæœ€åå¯¼è‡´è“è‰²ç‚¹ä¸ä¼šåƒç»¿è‰²ç‚¹é è¿‘æƒ…å†µå‡ºç°ï¼Œæ‰€ä»¥å°±å‡ºç°äº†LSGANã€‚å®ƒå°±æ˜¯å°†ä¹‹å‰Discriminatoræ‰€ä½œçš„classifieråˆ†ç±»é—®é¢˜ï¼Œæ”¹å˜æˆäº†regressionå›å½’é—®é¢˜ã€‚ä»æ“ä½œä¸Šæ¥è®²ï¼Œå°±æ˜¯å°†è¾“å‡ºçš„sigmoidæ¿€æ´»å‡½æ•°ï¼Œå˜æˆäº†linearå‡½æ•°ã€‚è¿™æ ·çš„è¯ï¼Œå°±ä¼šä½¿å¾—æˆ‘ä»¬çš„åˆ¤åˆ«å™¨çš„å¾—åˆ†æ›²çº¿å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105022595.png" /></p>
<h3 id="ä¸‰wasserstein-gan-wgan">ä¸‰ã€Wasserstein GAN ( WGAN )</h3>
<p>â€‹ ç›¸æ¯”äºåŸå§‹çš„GANï¼Œå°±æ˜¯æŠŠåŸæ¥ç”¨æ¥è¡¡é‡çš„JS divergenceæ¢æˆäº†Earth
Moverâ€™s Distance.</p>
<p>â€‹ é¦–å…ˆæˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹Earth Moverâ€™s
Distanceæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼šä¸‹å›¾æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒPå’ŒQï¼Œç„¶åä½ è¦æƒ³åŠæ³•æŠŠæ¦‚ç‡åˆ†å¸ƒPç§»åˆ°Qçš„åœ°æ–¹å»ã€‚å¦‚æœPå’ŒQå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œéƒ½æ˜¯ä¸€ä¸ªä¸€ç»´ç©ºé—´ä¸Šçš„åˆ†å¸ƒï¼Œé‚£éå¸¸ç®€å•ï¼ŒEarth
Moverâ€™s Distanceå°±æ˜¯å®ƒä»¬ä¹‹é—´çš„è·ç¦»dã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105043352.png" /></p>
<p>â€‹
ç„¶åè®©æˆ‘ä»¬å†æ¥è€ƒè™‘ä¸€ä¸ªæ›´ä¸ºå¤æ‚çš„æƒ…å½¢ï¼šç°åœ¨På’ŒQçš„æ¦‚ç‡åˆ†å¸ƒå¦‚å›¾æ‰€ç¤ºï¼Œé‚£ä¹ˆä½ ä¼šå‘ç°æˆ‘è¦æƒ³æŠŠPå˜æˆQï¼Œæˆ‘ä¼šæœ‰è®¸å¤šç§æŒªåŠ¨çš„æ–¹å¼ã€‚å·¦è¾¹æ˜¯ä¸€ç§æŒªåŠ¨æ–¹å¼ï¼Œå³è¾¹æ˜¯ä¸€ç§æŒªåŠ¨æ–¹å¼ï¼Œæ¯ä¸€ç§æŒªåŠ¨æ–¹å¼éƒ½ä¼šç®—å‡ºä¸€ä¸ªä¸åŒçš„è·ç¦»ï¼Œæ¯ä¸€ç§æŒªåŠ¨æ–¹å¼ï¼Œæˆ‘ä»¬å°±ç§°ä¹‹ä¸ºä¸€ç§â€œmoving
planâ€ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨æ‰€æœ‰çš„moving
planä¸­è®¡ç®—å‡ºæœ€å°çš„é‚£ä¸ªè·ç¦»ï¼Œæ¥å°†å…¶å®šä¹‰ä¸ºEarth Moverâ€™s
Distanceã€‚ï¼ˆé€šä¿—ä¸€ç‚¹å°±æ˜¯ï¼Œæ‰€æœ‰æ–¹æ¡ˆç®—ä¸€éï¼Œè¦æœ€å°çš„é‚£ä¸ªæ–¹æ¡ˆï¼‰</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105052710.png" /></p>
<p>â€‹
æ¯”å¦‚è¯´ï¼ŒåŒä¸€å †ä¸œè¥¿æˆ‘ä»¬ç”¨åŒæ ·çš„é¢œè‰²æ¥è¡¨ç¤ºï¼Œä¸‹å›¾æ‰€ç¤ºçš„Påˆ°Qçš„æŒªåŠ¨æ–¹å¼ï¼Œå°±æ˜¯è¯¥ç¤ºä¾‹æœ€ä½³çš„ä¸€ä¸ªmoving
planã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105101411.png" /></p>
<p>â€‹ ä¸‹é¢è¿™å¼ å›¾æ˜¯ä¸€ä¸ªæ›´ä¸ºå®˜æ–¹ä¸å…¬å¼åŒ–çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªmoving
planè¡¨ç¤ºæˆåƒå·¦å›¾ä¸€æ ·çš„ä¸€ä¸ªçŸ©é˜µï¼Œå¯¹åº”çš„äº¤å‰çš„åŒºåŸŸå°±è¡¨ç¤ºè¯¥å—æŒªåŠ¨çš„é‡ã€‚é‚£ä¹ˆä½ ä¼šå‘ç°ï¼Œå·¦è¾¹çŸ©é˜µä¸­æ¯ä¸€è¡Œå€¼ç›¸åŠ åº”è¯¥éƒ½ä¼šç­‰äºå…¶å¯¹åº”çš„Pçš„é‚£ä¸€æ¡åŒºåŸŸçš„å€¼ï¼Œæ¯ä¸€åˆ—å€¼ç›¸åŠ èµ·æ¥éƒ½ä¼šç­‰äºå…¶å¯¹åº”çš„Qçš„é‚£ä¸€æ¡åŒºåŸŸçš„å€¼ã€‚æ‰€ä»¥ï¼Œç»™å®šè¿™æ ·ä¸€ä¸ªmoving
planï¼Œåº”è¯¥æ€ä¹ˆå»è®¡ç®—è¿™ä¸ªæ–¹æ¡ˆå¯¹åº”çš„ç§»åŠ¨è·ç¦»å‘¢ï¼Ÿå°±ç”¨åˆ°ä¸‹å›¾ä¸­B(Î³)çš„å…¬å¼ï¼Œéå†æ‰€æœ‰çš„xpå’Œxqï¼Œå…¶å®å°±æ˜¯éå†çŸ©é˜µçš„æ¯ä¸€ä¸ªå€¼ï¼Œç„¶ååšä¹˜ç§¯ã€æ±‚å’Œã€‚</p>
<p>â€‹ æœ€ç»ˆï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æ±‚è§£På’ŒQçš„Earth Moverâ€™s
Distanceï¼Œé‚£ä¹ˆå°±éœ€è¦ç©·ä¸¾æ‰€æœ‰çš„moving
planï¼Œç„¶åæ‰¾åˆ°æ‰€æœ‰B(Î³)æœ€å°çš„é‚£ä¸€ä¸ªå€¼,å°±æ˜¯På’ŒQçš„Earth Moverâ€™s
Distance.æ‰€ä»¥ä½ ä¼šå‘ç°æ±‚è§£è¿™æ ·ä¸€ä¸ªè·ç¦»è¿˜éœ€è¦è§£ä¸€ä¸ªæœ€ä¼˜åŒ–é—®é¢˜.</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105115495.png" /></p>
<p>â€‹ OK,åˆ°æ­¤ä¸ºæ­¢,æˆ‘ä»¬å·²ç»çŸ¥é“äº†Earth Moverâ€™s
Distanceæ˜¯æ€ä¹ˆæ ·ä¸€ä¸ªä¸œè¥¿,é‚£ä¹ˆå°±å…ˆæ¥è®¨è®ºä¸€ä¸‹,ä¸ºä»€ä¹ˆæˆ‘ä»¬ç”¨è¿™ä¸ªè·ç¦»æ¥è¿›è¡Œè¡¡é‡?æœ‰ä»€ä¹ˆæ ·çš„å¥½å¤„?
å¦‚ä¸‹å›¾æ‰€ç¤º,åŸæ¥çš„JS Divergenceè®¡ç®—å‡ºæ¥çš„,å¯¹äºG0,
G50æ¥è¯´,ä¸¤ä¸ªå·®è·ä¸€è‡´,ç”Ÿæˆå™¨å°±æ²¡æ³•ä»G0 Updateåˆ°G50,ä½†æ˜¯å¦‚æœæˆ‘ä»¬ä½¿ç”¨W
Distance,d50æ˜¯ä¼šæ¯”d0å¥½çš„,é‚£ä¹Ÿå°±æ˜¯è¯´å¯¹äºGeneratoræ¥è¯´,ä¼šæ…¢æ…¢çš„ä»G0 Update
åˆ°G50,ä¹Ÿå°±æ˜¯ä¹‹å‰å¯¼è‡´è®­ç»ƒä¸èµ·æ¥çš„å› ç´ ä¼šè¢«è§„é¿æ‰.</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105125389.png" /></p>
<p>â€‹ é‚£ä¹ˆåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­,WGANåˆ°åº•åº”è¯¥å¦‚ä½•ä½¿ç”¨Earth Moverâ€™s Distanceå‘¢?
æˆ‘ä»¬å°†åŸæ¥çš„V(G,D)å‡½æ•°æ›¿æ¢æˆå¦‚ä¸‹å…¬å¼å³å¯:</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105135075.png" /></p>
<p>â€‹
è¿™ä¸ªå…¬å¼å…¶å®æ¯”è¾ƒå¥½ç†è§£,æ¨å¯¼è¿‡ç¨‹éå¸¸å¤æ‚æˆ‘ä»¬å†æ¬¡ç•¥è¿‡.å°±æ˜¯æˆ‘ä»¬éœ€è¦è®©ä»real
dataä¸­äº§ç”Ÿå‡ºæ¥çš„å€¼è¶Šå¤§è¶Šå¥½,generate
ä¸­äº§ç”Ÿçš„å€¼è¶Šå°è¶Šå¥½.åŒæ—¶,ä¼šæœ‰ä¸€ä¸ªé¢å¤–çš„constrain,å°±æ˜¯Dè¿™ä¸ªå‡½æ•°å¿…é¡»æ˜¯ä¸€ä¸ª
1-Lipschitzå‡½æ•°,æˆ‘ä»¬æš‚æ—¶å…ˆä¸ç®¡è¿™ä¸ª
åè¯æ˜¯ä»€ä¹ˆ,åªéœ€è¦å…ˆçŸ¥é“,è¿™ä¸ªä»£è¡¨çš„å°±æ˜¯è¯´Déœ€è¦æ˜¯ä¸€ä¸ªéå¸¸å¹³æ»‘çš„å‡½æ•°.ä»ç›´è§‚çš„è§’åº¦,ä¸ºä»€ä¹ˆéœ€è¦å¢åŠ è¿™ä¸ªé™åˆ¶å‘¢?å¦‚ä¸‹å›¾æ‰€ç¤º,å¦‚æœä¸å¢åŠ è¿™ä¸ªé™åˆ¶,å°±ä¼šåƒä¸‹å›¾æ‰€ç¤ºçš„çº¢è‰²æ›²çº¿ä¸€æ ·,Discriminatoræ°¸è¿œéƒ½ä¸ä¼šæ”¶æ•›,ä¸¤è¾¹åˆ†åŒ–ä¼šè¶Šæ¥è¶Šå¤§.generated
dataéƒ¨åˆ†ä¼šå˜æˆæ— ç©·å°,real data å°±ä¼šå˜å¾—æ— ç©·å¤§.</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105142990.png" /></p>
<p>â€‹ é‚£ä¹ˆå®é™…ä¸Š1-Lipschitzå‡½æ•°æ˜¯ä»€ä¹ˆå‘¢?å®šä¹‰å¦‚ä¸‹:
å³è¾¹è“è‰²å‡½æ•°å°±ä¸æ˜¯,è€Œç»¿è‰²å‡½æ•°å°±æ˜¯.</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105150180.png" /></p>
<p>â€‹ é‚£æˆ‘ä»¬åº”è¯¥æ€ä¹ˆå»è¿›è¡Œè®­ç»ƒå‘¢? åŸå§‹çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨Weight Clipping
æ–¹æ³•,ä½†æ˜¯å…¶å®è¿™ä¸ªæ–¹æ³•å¹¶æ²¡æœ‰å®Œå…¨èƒ½å¤Ÿé™åˆ¶ä½Dæ˜¯ä¸€ä¸ª1-Lipschitzå‡½æ•°,ä½†å¯ä»¥ç›¸å¯¹æ¥è¯´è®©ä½ çš„Då˜å¾—å¹³æ»‘ä¸€äº›.</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105158514.png" /></p>
<p>â€‹ æ‰€ä»¥åé¢å°±å‡ºç°äº† Improved WGAN ( WGAN-GP )æ¥è§£å†³è¿™ä¸ªé—®é¢˜:
å®ƒçš„ä½œè€…æå‡ºäº†è¿™æ ·ä¸€ä¸ªè§‚å¯Ÿ:
å°±æ˜¯è¯´Dæ˜¯ä¸€ä¸ª1-Lipschitzå‡½æ•°æ˜¯å’Œå³ä¾§çš„ä¸ç­‰å¼ç­‰ä»·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´è¦å¯¹äºæ‰€æœ‰ç½‘ç»œå¯èƒ½çš„è¾“å…¥xæ¥è¯´ï¼Œå¦‚æœå°†å®ƒç»™åˆ¤åˆ«èµ·æ±‚å®ƒçš„æ¢¯åº¦çš„NormèŒƒå¼æ˜¯å°äºç­‰äº1çš„è¯ï¼Œå°±å¯ä»¥ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105204998.png" /></p>
<p>â€‹ é‚£ä¹ˆæˆ‘ä»¬ç°åœ¨çš„æ–¹æ³•ï¼Œå°±æ˜¯åœ¨æ•´ä¸ªçš„å¼å­åé¢è¿‘ä¼¼è¡¥ä¸Šä¸€é¡¹ï¼Œ</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105211649.png" /></p>
<p>â€‹
åœ¨æˆ‘ä»¬çš„ç›®æ ‡å‡½æ•°ä¸­åŠ ä¸Šè¿™æ ·ä¸€é¡¹ä»¥åï¼Œåœ¨ç½‘ç»œè®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œç½‘ç»œå°±ä¼šå¸Œæœ›å°½å¯èƒ½çš„æ»¡è¶³ä¸‹é¢è¿™ä¸ªå¼å­ï¼Œä½†æ˜¯é—®é¢˜åˆæ¥äº†ï¼Œæˆ‘ä»¬æ²¡åŠæ³•å¯¹æ‰€æœ‰çš„xåšç§¯åˆ†ï¼Œä½†æ˜¯å¦‚æœæƒ³è¦Dæ˜¯ä¸€ä¸ª1-Lipschitzå‡½æ•°ï¼Œæ˜¯éœ€è¦å¯¹æ‰€æœ‰çš„xæ¥è¯´çš„ã€‚æ‰€ä»¥æˆ‘ä»¬åˆè¿›è¡Œäº†éƒ¨åˆ†çš„è¿‘ä¼¼ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105219880.png" /></p>
<p>â€‹
å¦‚ä¸‹æ‰€ç¤ºï¼Œå°†æœ€åè¡¥å……çš„é‚£ä¸€é¡¹å˜æ›´æˆå¦‚ä¸‹çš„ä¸€é¡¹ï¼Œæ„æ€æ˜¯æˆ‘ä»¬åªä»ä¸€ä¸ªå«åš<span
class="math inline">\(P_{penalty}\)</span>çš„åˆ†å¸ƒä¸­è¿›è¡Œå–æ ·ï¼Œæˆ‘ä»¬åªä¿è¯ä»è¿™ä¸ªåˆ†å¸ƒä¸­å–å‡ºæ¥çš„xèƒ½å¤Ÿæ»¡è¶³ï¼Œå…¶ä»–çš„å°±å…ˆä¸ä¿è¯äº†ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105229709.png" /></p>
<p>â€‹ é‚£ä¹ˆ<span
class="math inline">\(P_{penalty}\)</span>é•¿ä»€ä¹ˆæ ·å­å‘¢ï¼Ÿå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬ä»<span
class="math inline">\(P_{data}\)</span>ä¸­å–ä¸€ä¸ªç‚¹ï¼Œä»<span
class="math inline">\(P_{G}\)</span>ä¸­éšæœºå–ä¸€ä¸ªç‚¹ï¼Œç„¶ååœ¨ä¸¤ç‚¹çš„ç›´çº¿ä¸Šéšæœºé‡‡æ ·ä¸€ä¸ªç‚¹ã€‚è¿™æ ·å­é‡‡å‡ºå¾—åˆ°çš„ç‚¹æ‰€å½¢æˆçš„ä¸€ä¸ªåˆ†å¸ƒæˆ‘ä»¬å°±è®¤ä¸ºæ˜¯<span
class="math inline">\(P_{penalty}\)</span>ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œå…¶å®å°±æ˜¯å¤§æ¦‚æ˜¯å›¾ä¸­è“è‰²éƒ¨åˆ†åŒºåŸŸã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105307969.png" /></p>
<p>â€‹ é‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ç”¨è€ƒè™‘æ•´ä¸ªImage Spaceç©ºé—´ä¸­çš„xï¼Œåªéœ€è¦è€ƒè™‘<span
class="math inline">\(P_{penalty}\)</span>åˆ†å¸ƒä¸Šçš„xäº†å‘¢ï¼ŸåŸå› å…¶å®åªæ˜¯é€šè¿‡å®éªŒåšå‡ºæ¥ï¼Œè¿™æ ·å­æ•ˆæœæ˜¯å¥½çš„ã€‚å…¶å®ä»ç›´è§‚çš„è§’åº¦ä¸Šä¹Ÿå¯ä»¥æœ‰ç†è§£ï¼Œå› ä¸ºæˆ‘ä»¬ä¹‹å‰è¯´è¿‡å…¶å®è®­ç»ƒè¿‡ç¨‹å°±æ˜¯<span
class="math inline">\(P_{G}\)</span>å‘<span
class="math inline">\(P_{data}\)</span>æ…¢æ…¢é è¿‘çš„è¿™ä¹ˆä¸€ä¸ªè¿‡ç¨‹ï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´å…¶å®åªæœ‰<span
class="math inline">\(P_{penalty}\)</span>è¿™å—éƒ¨åˆ†åŒºåŸŸçš„ç‚¹çš„æ¢¯åº¦æ‰ä¼šå½±å“ã€‚</p>
<p>â€‹
åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜è¦å†åšä¸€ä¸ªæ”¹è¿›ã€‚æˆ‘ä»¬åˆšæ‰ç›®æ ‡å‡½æ•°è¡¥å……çš„é‚£ä¸€é¡¹ï¼Œå°†å…¶è¿›ä¸€æ­¥ä¿®æ”¹ã€‚æˆ‘ä»¬å¸Œæœ›è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¢¯åº¦è¶Šæ¥è¿‘1è¶Šå¥½ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105332353.png" /></p>
<p>â€‹
å…¶å®åœ¨åˆšæ‰çš„WGAN-GPçš„è¿‡ç¨‹ä¸­ï¼Œåšäº†å¾ˆå¤šçš„è¿‘ä¼¼ï¼Œå¾ˆå¤šç»“æœä¹Ÿæ˜¯ç”±å®éªŒå¾—å‡ºçš„ï¼Œé‚£ä¹ˆSpectrum
Normæå‡ºäº†ä¸€ç§æ–¹æ³•ï¼ŒçœŸçš„å¯ä»¥é™åˆ¶åˆ¤åˆ«å™¨å­¦ä¹ å®Œä»¥åï¼Œåœ¨æ¯ä¸€ä¸ªä½ç½®çš„Gradient
Norméƒ½æ˜¯å¯ä»¥å°äº1çš„ã€‚</p>
<p>â€‹
åœ¨æœ€åï¼Œæˆ‘ä»¬å›åˆ°WGANçš„ç®—æ³•ï¼Œçœ‹çœ‹åœ¨å®é™…çš„è¿‡ç¨‹ä¸­ï¼Œæ€ä¹ˆä»GANå˜æˆWGANï¼šæ•´ä½“è€Œè¨€å°±æ˜¯ä¿®æ”¹ä¸‹å›¾ä¸­é»‘æ¡†æ¡†çš„å››ä¸ªéƒ¨åˆ†ï¼Œ1ä¸ªæ˜¯åœ¨LearningDçš„è¿‡ç¨‹ä¸­ï¼Œå°†ç›®æ ‡å‡½æ•°éƒ¨åˆ†çš„sigmoidè¾“å‡ºç§»é™¤æ‰ï¼ŒåŒæ—¶è¦è®°å¾—ä½¿ç”¨weight
cliipping è·å¾—gradient penaltyæ¥è¿›è¡Œé™åˆ¶ã€‚å†å°±æ˜¯åœ¨Learning
Gçš„è¿‡ç¨‹ä¸­ï¼Œå°†ç›®æ ‡å‡½æ•°è¿›è¡Œéƒ¨åˆ†çš„ä¿®æ”¹ï¼Œå°±å¯ä»¥äº†ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105348387.png" /></p>
<h3 id="å››energy-based-gan-ebgan">å››ã€Energy-Based GAN ( EBGAN )</h3>
<p>â€‹
å…¶ä¸åŸå§‹GANå”¯ä¸€çš„ä¸åŒåœ¨äºå…¶ä¿®æ”¹äº†DIscriminatorçš„æ¶æ„ï¼ŒDiscriminatoråŸæœ¬æ¥è¯´æ˜¯ä¸€ä¸ªBinary
Classifierï¼Œä½†æ˜¯åœ¨EBGANä¸­ï¼Œå°†å…¶å˜æˆäº†ä¸€ä¸ªAuto
Encoderè‡ªåŠ¨ç¼–ç å™¨ï¼ŒGeneratoræ˜¯è·ŸåŸæ¥ä¸€æ ·çš„ã€‚æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p>â€‹
æ•´ä¸€ä¸ªDiscriminatorä»æ—§ä¼šè¾“å‡ºä¸€ä¸ªScalaråˆ†æ•°ï¼Œä½†ç°åœ¨è¿™ä¸ªåˆ†æ•°æ˜¯ä»ä½•è€Œæ¥çš„å‘¢ï¼Ÿä»–æ˜¯åŸºäºAuto
Encoderçš„é‡å»ºè¯¯å·®å¾—åˆ°çš„ã€‚ä¹‹æ‰€ä»¥è¿™æ ·åšï¼ŒEBGANæ˜¯åŸºäºä»¥ä¸‹ä¸€ä¸ªå‡è®¾çš„ï¼šè¶ŠçœŸå®çš„Imageå®ƒç»è¿‡AutoEncoderä»¥åï¼Œé‡å»ºè¯¯å·®è¶Šå°ï¼Œè¶Šè™šå‡çš„Imageé‡å»ºè¯¯å·®è¶Šå¤§ã€‚é‚£ä¹ˆEBGANçš„å¥½å¤„åœ¨äºè¿™ä¸ªDiscriminatoræ˜¯å¯ä»¥é¢„è®­ç»ƒçš„ï¼Œå› ä¸ºAutoEncoderçš„è®­ç»ƒå¹¶ä¸éœ€è¦ç”¨åˆ°negativeçš„æ ·ä¾‹ã€‚åªéœ€è¦ç»™positiveçš„æ ·ä¾‹ï¼Œç„¶åæœ€å°åŒ–é‡å»ºè¯¯å·®å°±å¯ä»¥äº†ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105401559.png" /></p>
<p>â€‹ ç›¸æ¯”äºåŸæ¥çš„GANæ¥è¯´ï¼Œå› ä¸ºOrigin
GANå®ƒä¸èƒ½é¢„è®­ç»ƒDiscriminatorï¼Œæ‰€ä»¥ä¸€å¼€å§‹DIscriminatorå°±ä¼šå¾ˆå¼±ï¼Œè®­ç»ƒèµ·æ¥å°±ä¼šå¾ˆæ…¢ã€‚è€ŒEBGANçš„Discriminatorä¸€å¼€å§‹å°±ç›¸å¯¹æ¯”è¾ƒå¼ºã€‚</p>
<p>â€‹ åœ¨è®­ç»ƒEBGANçš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹ä¸€ç‚¹ï¼šä»¥ä¸‹å›¾ä¸ºç¤ºä¾‹ï¼Œæˆ‘ä»¬ä¼šæƒ³è¦è®©real
dataæœ€åå¾—åˆ°çš„å€¼æ¯”è¾ƒå¤§ï¼Œgenerate
dataå¾—åˆ°çš„å€¼æ¯”è¾ƒå°ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½è®©generate
dataå¾—åˆ°çš„å€¼æ— é™å°ï¼Œä¸åŠ é™åˆ¶ã€‚å› ä¸ºè¿™æ ·çš„è¯å°±ä¼šè®©Discriminatorå¯¹äºgenerate
dataçš„è¾“å…¥è€Œè¨€ï¼Œå…¶å…¨éƒ¨è¾“å‡ºnoiseï¼Œè¿™æ ·çš„è¯æ—¢å¯ä»¥æŠŠè¾“å‡ºåˆ†æ•°å‹çš„å¾ˆä½ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªmarginï¼Œè®©genrate
dataå¯¹åº”çš„åˆ†æ•°ï¼Œåªè¦å°äºmarginä»¥ä¸‹çš„å€¼å°±å¯ä»¥ï¼Œä¸éœ€è¦å†å˜å¾—æ›´å°ã€‚è€Œè‡³äºmarginçš„å€¼å°±æ˜¯ä¸€ä¸ªæˆ‘ä»¬éœ€è¦è°ƒæ•´çš„è¶…å‚æ•°ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105412942.png" /></p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>GANç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>GAN</tag>
        <tag>LSGAN</tag>
        <tag>WGAN</tag>
        <tag>EBGAN</tag>
      </tags>
  </entry>
  <entry>
    <title>GANç³»åˆ—ç¬”è®°5â€”â€”GANåº”ç”¨äºç‰¹å¾æå–ï¼ˆInfoGANï¼ŒVAEGANï¼ŒBiGANï¼‰</title>
    <url>/2021/12/04/554e29d255b4/</url>
    <content><![CDATA[<h3 id="å‰è¨€">å‰è¨€ï¼š</h3>
<p>â€‹
æœ¬ç¯‡ç¬”è®°ä¸ºè§‚çœ‹æå®æ¯…è€å¸ˆçš„GANç›¸å…³è¯¾ç¨‹åæ‰€è®°å½•ï¼Œæ–‡ä¸­æ‰€æœ‰å›¾ç‰‡åŠå†…å®¹å‡æ¥æºäºæå®æ¯…è€å¸ˆçš„è¯¾ç¨‹ï¼Œæ­¤å¤„åªæ˜¯æ¬è¿+ä»¥è‡ªå·±çš„ç†è§£è¿›è¡Œè®°å½•ã€‚å…¨æ–‡è®²è¿°äº†InfoGANã€VAEGANã€BiGANï¼Œä»¥åŠGANåœ¨ç‰¹å¾æå–é¢†åŸŸç›¸å…³çš„åº”ç”¨ã€‚</p>
<h3 id="ä¸€infogan">ä¸€ã€InfoGAN</h3>
<p>â€‹
æˆ‘ä»¬åœ¨å…ˆå‰çš„GANçš„ä»‹ç»ä¸­è¯´åˆ°è¿‡ï¼Œå¯¹äºä¸€ä¸ªè®­ç»ƒå¥½çš„GANï¼Œæˆ‘ä»¬æ˜¯å¸Œæœ›è¾“å…¥ä¸€ä¸ªå‘é‡ï¼Œç„¶åGANä¼šç»™æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªObjectï¼ˆå›¾åƒæˆ–è€…æ˜¯åºåˆ—ç­‰ï¼‰ã€‚ç„¶åæˆ‘ä»¬æœŸæœ›ï¼Œæˆ‘ä»¬è¾“å…¥çš„å‘é‡ï¼Œæ¯ä¸€ä¸ªç»´åº¦å¯èƒ½å°±ä¼šä»£è¡¨è¾“å‡ºçš„å›¾åƒçš„æŸä¸€ä¸ªç‰¹å¾ã€‚è¿™å…¶å®æ˜¯éå¸¸ç†æƒ³çš„æƒ…å†µï¼Œä½†å®é™…ä¸Šï¼Œå¯èƒ½å½“ä½ æ”¹å˜è¾“å…¥å‘é‡æŸä¸€ä¸ªç»´åº¦çš„å€¼çš„æ—¶å€™ï¼Œè¾“å‡ºçš„å†…å®¹å¹¶æ²¡æœ‰æŒ‰ç…§æŸä¸ªç‰¹å¾è¿›è¡Œå˜åŒ–ã€‚å¦‚æœç”¨å›¾ç¤ºæ„çš„è¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šä¸¤å¹…å›¾æ˜¯åœ¨ä½ç»´ç©ºé—´ä¸­é«˜ç»´ç‰¹å¾çš„åˆ†å¸ƒç¤ºæ„å›¾ï¼Œæˆ‘ä»¬æœ¬èº«æœŸæœ›å…¶åº”è¯¥æ˜¯å·¦å›¾çš„åˆ†å¸ƒï¼Œè¿™æ ·å½“æŸä¸ªçºµè½´ä¸å˜ï¼Œæ¨ªè½´çš„æ•°å€¼å˜åŒ–æ—¶ï¼Œé«˜ç»´æŸä¸ªç›¸å¯¹åº”ç‰¹å¾ä¹Ÿä¼šéšä¹‹å˜åŒ–ï¼Œä½†å®é™…ä¸Šåˆ†å¸ƒå¯èƒ½åƒå³å›¾ä¸€æ ·ã€‚InfoGANå°±æ˜¯æƒ³è¦è§£å†³è¿™æ ·ä¸€ä¸ªé—®é¢˜ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105527683.png" /></p>
<p>â€‹ InfoGANçš„æ¡†æ¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105540261.png" /></p>
<p>â€‹
é¦–å…ˆä¼šå°†è¾“å…¥å‘é‡zï¼Œæ‹†æˆä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯å‘é‡cï¼Œä¸€éƒ¨åˆ†æ˜¯å‘é‡zâ€™ï¼Œç„¶åè¾“å…¥Gåäº§ç”Ÿå›¾åƒxï¼ŒåŒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦è®­ç»ƒä¸€ä¸ªåˆ†ç±»å™¨ï¼Œè¿™ä¸ªåˆ†ç±»å™¨è¦èƒ½ä»xä¸­è¯†åˆ«å‡ºï¼Œäº§ç”Ÿè¿™ä¸ªxæ‰€ä½¿ç”¨çš„å‘é‡cçš„éƒ¨åˆ†çš„ç¼–ç ï¼ŒåŸæœ¬éœ€è¦è®­ç»ƒçš„åˆ¤åˆ«å™¨ä¹Ÿæ˜¯éœ€è¦è®­ç»ƒçš„ç¼ºä¸€ä¸å¯ã€‚ç„¶åæˆ‘ä»¬å®è§‚çš„çœ‹ä¸€ä¸‹è¿™ä¸€ä¸ªæ¶æ„ï¼ŒGeneratorå’ŒClassifierè¿™ä¸€å¥—å°±åƒæ˜¯ä¸€ä¸ªç±»AutoEncoderçš„ä¸œè¥¿ï¼Œåªä¸è¿‡å…¶å’Œæ­£å¸¸çš„AutoEncoderåˆšå¥½ç›¸åã€‚æ­£å¸¸çš„AutoEncoderçš„ç¼–ç å™¨æ˜¯è¾“å…¥å›¾ç‰‡ï¼Œè¾“å‡ºç‰¹å¾ç¼–ç å‘é‡ï¼Œç„¶åè§£ç å™¨æ˜¯å†åè§£å›å›¾ç‰‡ã€‚è€Œæ­¤å¤„çš„ç¼–ç å™¨éƒ¨åˆ†æ˜¯GANçš„Generatoréƒ¨åˆ†ï¼Œè¾“å…¥å‘é‡ï¼Œç”Ÿæˆå›¾ç‰‡ï¼Œç„¶ådecoderéƒ¨åˆ†éœ€è¦ä»å›¾ç‰‡ä¸­è¯†åˆ«å‡ºcodeã€‚åœ¨è¿™ä¸ªæ¶æ„ä¸­ï¼ŒDiscriminatoræ˜¯å¿…é¡»çš„ï¼Œä¸ç„¶çš„è¯è®­ç»ƒGeneratorçš„ç»“æœå¾ˆæœ‰å¯èƒ½å°±æ˜¯ä¼šæŠŠå‘é‡cç›´æ¥é™„åœ¨å›¾ç‰‡xçš„ä¿¡æ¯ä¸­é—´ï¼Œè¿™æ ·çš„è¯Classifierå¿…å®šèƒ½å¤Ÿåè§£å‡ºcï¼Œä½†æ˜¯è¿™æ ·çš„è¯ç”Ÿæˆçš„xæ˜¯ä¸æ˜¯ä¸€å¼ çœŸå®çš„å›¾ç‰‡å°±å°šæœªå¯çŸ¥äº†ã€‚æœ‰äº†Discriminatorå°±å¯ä»¥ä¿è¯ç”Ÿæˆçš„xæ˜¯çœŸå®ã€‚</p>
<p>â€‹
åŒæ—¶ï¼ŒDiscriminatorå’ŒClassifieråœ¨å®é™…è®­ç»ƒæ—¶å¾€å¾€å…±äº«å‚æ•°ï¼Œå› ä¸ºå®ƒä»¬çš„è¾“å…¥éƒ½æ˜¯xï¼Œåªæ˜¯æœ€åä¸€å±‚è¾“å‡ºå±‚ä¸ä¸€æ ·è€Œå·²ã€‚</p>
<p>â€‹
é‚£ä¹ˆï¼ŒåŠ ä¸Šè¿™æ ·ä¸€ä¸ªClassifierä»¥åï¼Œä¸ºä»€ä¹ˆå…ˆå‰çš„åŸå…ˆGANçš„è¾“å…¥å¯¹è¾“å‡ºçš„å½±å“ä¸æ˜ç¡®è¿™ä¸ªé—®é¢˜å°±èƒ½è§£å†³äº†å‘¢ï¼Ÿå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p>â€‹
å› ä¸ºæˆ‘ä»¬éœ€è¦åˆ†ç±»å™¨èƒ½ä»xä¸­æ¢å¤å‡ºç¼–ç cï¼Œæ‰€ä»¥å‘é‡cè¿™ä¸€éƒ¨åˆ†å¿…å®šéœ€è¦å¯¹xçš„å›¾åƒçš„æŸäº›ç»´åº¦æœ‰æ˜ç¡®çš„å½±å“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ŒæˆGANè®­ç»ƒä»¥åï¼Œcéƒ¨åˆ†çš„æ¯ä¸€ä¸ªç»´åº¦ï¼Œéƒ½ä¼šå¯¹xçš„å›¾åƒçš„æŸä¸€ä¸ªç‰¹å¾æœ‰æ˜ç¡®çš„å½±å“å¯¹åº”ï¼Œé‚£ä¹ˆz'éƒ¨åˆ†ç›¸å¯¹åº”çš„å¯èƒ½å°±æ˜¯é‚£äº›è¾ƒä¸ºéšæœºçš„ç»´åº¦ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105550729.png" /></p>
<p>â€‹
åœ¨è¿™é‡Œå¯èƒ½ä¼šå­˜åœ¨ä¸€ä¸ªç–‘é—®ï¼Œæˆ‘ä»¬æ€ä¹ˆåˆ’åˆ†å‘é‡zåˆ°cå’Œzâ€™å‘¢ï¼Ÿå“ªäº›ç»´åº¦åº”è¯¥è¢«åˆ’åˆ†ä¸ºcï¼Ÿå“ªäº›åº”è¯¥è¢«åˆ’åˆ†ä¸ºzâ€™ï¼Ÿæ­¤å¤„è¦æ³¨æ„ï¼šæˆ‘ä»¬å¹¶ä¸æ˜¯å…ˆå¯¹zè¿›è¡Œæ‰‹åŠ¨åˆ’åˆ†çš„ï¼Œæ˜¯åœ¨è®­ç»ƒå®Œæˆä¹‹åï¼Œé‚£éƒ¨åˆ†èƒ½è¢«æ¢å¤çš„å‘é‡ç¼–ç ç»´åº¦ï¼Œæ‰ä¼šè¢«ç§°ä¸ºcã€‚</p>
<h3 id="äºŒvae-gan">äºŒã€VAE GAN</h3>
<p>â€‹ VAE GANå¯ä»¥çœ‹ä½œç”¨GANå¼ºåŒ–VAE
AutoEncoderã€‚ç½‘ç»œæ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šè¿™æ ·çš„ç½‘ç»œæ¶æ„å®Œæˆäº†ä¸¤ä»¶äº‹ï¼Œä¸€ä¸ªæ˜¯åŸæœ¬çš„å¸Œæœ›é‡æ„æŸå¤±è¶Šå°è¶Šå¥½ï¼Œå¦ä¸€ä¸ªæ˜¯Discriminatorä¼šä¿è¯Generatorç”Ÿæˆçš„å›¾ç‰‡è¶ŠçœŸå®è¶Šå¥½ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105607065.png" /></p>
<p>â€‹
ä»VAEè§’åº¦ï¼Œå› ä¸ºæˆ‘ä»¬å¦‚æœåªè€ƒè™‘VAEçš„é‡å»ºæŸå¤±ï¼Œå¾€å¾€äº§ç”Ÿçš„å›¾ç‰‡æ˜¯ä¸çœŸå®çš„ï¼Œæ˜¯ä¼šå¾ˆæ¨¡ç³Šçš„ã€‚æ–°å¢äº†Discriminatorå¯ä»¥è®©è¾“å‡ºå›¾åƒæ›´åŠ çœŸå®ã€‚</p>
<p>â€‹
ä»GANè§’åº¦ï¼Œå…¶ä¸åªè€ƒè™‘åˆ¤åˆ«å™¨çš„åé¦ˆï¼Œå› ä¸ºå…¶çŸ¥é“çœŸå®å›¾ç‰‡é•¿ä»€ä¹ˆæ ·ï¼Œéœ€è¦æœ€å°åŒ–ç”Ÿæˆå›¾åƒå’ŒåŸå›¾çš„è¯¯å·®ï¼Œæ‰€ä»¥VAE
GANè®­ç»ƒèµ·æ¥ä¼šæ›´åŠ ç¨³å®šã€‚</p>
<p>â€‹ å¦‚ä¸‹æ‰€ç¤ºæ˜¯VAE
GANè®­ç»ƒçš„ç®—æ³•ï¼šæ•´ä½“çš„ç®—æ³•å¦‚ä¸‹æ‰€ç¤ºï¼Œåœ¨æ¯ä¸€è½®è¿­ä»£ä¸­ï¼Œé¦–å…ˆæ˜¯å›¾åƒçš„ç”Ÿæˆï¼šæœ‰ä¸‰ç±»xéœ€è¦ç”Ÿæˆï¼š1ã€ç¬¬ä¸€ç±»xæ˜¯ä»æ•°æ®åº“ä¸­ç›´æ¥é‡‡æ ·å‡ºæ¥çš„å›¾ç‰‡ã€‚2ã€ç¬¬äºŒç±»æ˜¯ç”±æ•°æ®åº“ä¸­é‡‡æ ·å‡ºçš„å›¾ç‰‡ç»è¿‡Encoderå†ç»è¿‡Decoderåé‡å»ºçš„å›¾ç‰‡3ã€ç¬¬ä¸‰ç±»å›¾ç‰‡æ˜¯ï¼Œç”±éšæœºçš„æ¦‚ç‡åˆ†å¸ƒç”Ÿæˆçš„ç¼–ç zé€šè¿‡Encoderä»¥åäº§ç”Ÿçš„å›¾åƒã€‚ï¼ˆæ³¨æ„å›¾ä¸­ç¬¬10è¡Œå…¬å¼Enåº”ä¸ºDeï¼Œå›¾ç‰‡æœ‰è¯¯ï¼‰</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105620194.png" /></p>
<p>â€‹
ç„¶åæˆ‘ä»¬å…ˆæ›´æ–°è®­ç»ƒENçš„å‚æ•°ï¼Œå¸Œæœ›é‡å»ºè¯¯å·®è¶Šå°è¶Šå¥½ï¼ŒåŒæ—¶ä¹Ÿå¸Œæœ›xç»è¿‡Encoderäº§ç”Ÿå‡ºæ¥çš„zè·ŸP(z)äº§ç”Ÿå‡ºæ¥çš„zè¶Šæ¥è¿‘è¶Šå¥½ï¼Œä¹Ÿå°±æ˜¯ä¸¤è€…KLæ•£åº¦è¶Šå°è¶Šå¥½ã€‚</p>
<p>â€‹
ç„¶åæ›´æ–°è®­ç»ƒDeçš„å‚æ•°ï¼Œå¸Œæœ›é‡å»ºè¯¯å·®è¶Šå°è¶Šå¥½ï¼ŒåŒæ—¶ä¹Ÿå¸Œæœ›å°†ç¬¬2ç±»å’Œç¬¬3ç±»å›¾ç‰‡ï¼Œä¸¢å…¥åˆ¤åˆ«å™¨ä»¥åï¼Œå¾—åˆ°çš„å€¼è¶Šå¤§è¶Šå¥½ã€‚</p>
<p>â€‹
æœ€åæ›´æ–°è®­ç»ƒDiscriminatorçš„å‚æ•°ï¼Œå¸Œæœ›ç¬¬1ç±»å›¾åƒè¿›å…¥åˆ¤åˆ«å™¨ä»¥åå€¼è¶Šå¤§è¶Šå¥½ï¼ŒåŒæ—¶ä¹Ÿå¸Œæœ›å°†ç¬¬2ç±»å’Œç¬¬3ç±»å›¾ç‰‡ï¼Œä¸¢å…¥åˆ¤åˆ«å™¨ä»¥åï¼Œå¾—åˆ°çš„å€¼è¶Šå°è¶Šå¥½ã€‚</p>
<h3 id="ä¸‰bigan">ä¸‰ã€BiGAN</h3>
<p>â€‹
BiGANçš„æ¶æ„å¦‚ä¸‹æ‰€ç¤ºï¼šå®ƒä¿®æ”¹äº†ä¼ ç»ŸAutoEncoderçš„éƒ¨åˆ†ï¼Œç„¶åæ–°å¢äº†åˆ¤åˆ«å™¨ã€‚åœ¨è¿™ä¸ªç½‘ç»œä¸­æœ‰ä¸€ä¸ªEncoderï¼Œè¾“å…¥ä¸€å¼ å›¾ç‰‡xï¼Œè¾“å‡ºcode
zã€‚æœ‰ä¸€ä¸ªDecoderï¼Œè¾“å…¥ä¸€ä¸ªcode zï¼Œè¾“å‡ºä¸€å¼ å›¾ç‰‡ã€‚ä½†æ˜¯è¿™ä¸ªè¾“å…¥çš„code
zå¹¶ä¸æ˜¯å…ˆå‰Encoderè¾“å‡ºçš„zï¼Œè€Œæ˜¯ä»ä¸€ä¸ªäº‹å…ˆå‡†å¤‡å¥½çš„åˆ†å¸ƒä¸­å–æ ·å¾—åˆ°çš„zã€‚ç„¶åæˆ‘ä»¬æœ‰ä¸€ä¸ªåˆ¤åˆ«å™¨ï¼Œè¾“å…¥
å‘é‡zå’Œ å›¾åƒxï¼Œè¦è®©åˆ¤åˆ«å™¨åˆ¤æ–­ï¼Œè¿™ä¸€å¯¹
ï¼ˆå‘é‡zï¼Œå›¾åƒxï¼‰æ˜¯æ¥è‡ªäºç¼–ç å™¨çš„è¾“å…¥è¾“å‡ºï¼Œè¿˜æ˜¯æ¥è‡ªäºè§£ç å™¨çš„è¾“å…¥è¾“å‡ºã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105637394.png" /></p>
<p>â€‹
è®­ç»ƒç®—æ³•å¦‚ä¸‹æ‰€ç¤ºï¼Œæ•´ä½“è€Œè¨€æè¿°å’Œå…¶ä»–çš„æè¿°è¯­è¨€æ¯”è¾ƒä¸€è‡´ï¼Œæ¯”è¾ƒå¥½ç†è§£ï¼Œæ­¤å¤„å°±ä¸å¤šèµ˜è¿°ï¼Œ</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105645100.png" /></p>
<p>â€‹
é‚£ä¹ˆä¸ºä»€ä¹ˆBiGANèƒ½å¤Ÿè¿™æ ·å­å»è¿›è¡Œè®­ç»ƒå‘¢ï¼Ÿå…¶å®BiGANå°±æ˜¯å¹²äº†ä¸€ä»¶è¿™æ ·çš„äº‹æƒ…ï¼šå¦‚æœæˆ‘ä»¬æŠŠEncoderçš„è¾“å…¥è¾“å‡ºçœ‹ä½œæ˜¯ä¸€ä¸ªJoinèµ·æ¥çš„åˆ†å¸ƒï¼ŒDecoderçš„è¾“å…¥è¾“å‡ºçœ‹ä½œæ˜¯ä¸€ä¸ªJoinèµ·æ¥çš„åˆ†å¸ƒï¼Œé‚£ä¹ˆåˆ¤åˆ«å™¨æ‰€å¹²çš„äº‹æƒ…å°±æ˜¯åŒºåˆ†På’ŒQä¹‹é—´çš„åˆ†å¸ƒçš„å·®è·ã€‚æƒ³è¦å°½å¯èƒ½çš„å»ä¼˜åŒ–Encoderå’ŒDecoderï¼Œä½¿å¾—På’ŒQé€æ¸å˜å¾—æ¥è¿‘ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105653272.png" /></p>
<p>â€‹
å¦‚æœè¿™ä¸ªæ¨¡å‹è®­ç»ƒåˆ°æœ€ä¼˜ï¼Œå°±åº”å½“æ˜¯Encoderå’ŒDecoderå¯ä»¥äº’ç›¸è§£ã€‚é‚£å…¶å®ä½ ä¼šå‘ç°å°±æ˜¯åšäº†å¦‚ä¸‹è¿™ä¹ˆä¸€ä»¶äº‹æƒ…ï¼šè®­ç»ƒä¸€ä¸ªAutoEncoderå’Œä¸€ä¸ªInverseçš„AutoEncoderã€‚ç¡®å®æ²¡é”™ï¼Œå¦‚æœå¦‚ä¸‹æ‰€ç¤ºçš„è¿™æ ·ä¸€ä¸ªç½‘ç»œè®­ç»ƒåˆ°æœ€ä¼˜ï¼Œå…¶å’Œä½¿ç”¨BiGANè®­ç»ƒåˆ°æœ€ä¼˜çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å®é™…ä¸ŠBiGANå’ŒAutoEncoderéƒ½æ²¡æ³•è®­ç»ƒåˆ°æœ€ä¼˜ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105700505.png" /></p>
<p>â€‹
æ‰€ä»¥åœ¨ä¸æ˜¯æ”¶æ•›åˆ°æœ€ä¼˜çš„æƒ…å†µä¸‹ï¼ŒBiGANä¼šæ¯”ä¸‹é¢è¿™ä¸ªæ¶æ„è®­ç»ƒå¥½å¾ˆå¤šã€‚ç”Ÿæˆçš„å›¾ç‰‡ä¼šçœŸå®å¾ˆå¤šï¼Œä¼šæ¯”AutoEncoderæ¶æ„ç”Ÿæˆçš„å›¾åƒæ¸…æ™°å¾ˆå¤šã€‚ä¸¤è€…çš„ç‰¹æ€§ä¸å¤ªä¸€æ ·ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚å¯èƒ½ç”¨BiGANï¼Œä½ è¾“å…¥ä¸€ä¸ªé¸Ÿçš„å›¾ç‰‡ï¼Œç»è¿‡Encoderï¼ŒDecoderåç”Ÿæˆçš„å›¾åƒä¹Ÿä¼šæ˜¯ä¸€åªæ¸…æ™°çš„çœŸå®çš„é¸Ÿï¼Œä½†å¯èƒ½è·Ÿè¾“å…¥çš„é¸Ÿä¸ä¸€æ ·ï¼Œè€Œå¦‚æœç”¨AutoEncoderæ¶æ„ï¼Œè¾“å…¥ä¸€ä¸ªé¸Ÿçš„å›¾ç‰‡ï¼Œç»è¿‡Encoderï¼ŒDecoderåç”Ÿæˆçš„å›¾åƒä¼šå’ŒåŸå›¾åƒæ¯”è¾ƒåƒï¼Œä½†æ˜¯ä¼šæ¯”è¾ƒæ¨¡ç³Šï¼Œæ˜¯ä¸€ä¸ªä¸æ˜¯å¾ˆæ¸…æ™°çœŸå®çš„å›¾åƒã€‚</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>GANç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>GAN</tag>
        <tag>InfoGAN</tag>
        <tag>VAEGAN</tag>
        <tag>BiGAN</tag>
      </tags>
  </entry>
  <entry>
    <title>GANç³»åˆ—ç¬”è®°6â€”â€”è¯„ä¼°GANçš„ç›¸å…³æ–¹æ³•æŒ‡æ ‡</title>
    <url>/2021/12/05/59cf77767a4c/</url>
    <content><![CDATA[<h3 id="å‰è¨€">å‰è¨€ï¼š</h3>
<p>â€‹
æœ¬ç¯‡ç¬”è®°ä¸ºè§‚çœ‹æå®æ¯…è€å¸ˆçš„GANç›¸å…³è¯¾ç¨‹åæ‰€è®°å½•ï¼Œæ–‡ä¸­æ‰€æœ‰å›¾ç‰‡åŠå†…å®¹å‡æ¥æºäºæå®æ¯…è€å¸ˆçš„è¯¾ç¨‹ï¼Œæ­¤å¤„åªæ˜¯æ¬è¿+ä»¥è‡ªå·±çš„ç†è§£è¿›è¡Œè®°å½•ã€‚å…¨æ–‡è®²è¿°äº†å¦‚ä½•å¯¹GANç”Ÿæˆçš„å›¾åƒç»“æœè¿›è¡Œä¸€ä¸ªæ›´ä¸ºå®¢è§‚çš„è¯„ä¼°çš„ç›¸å…³æ–¹æ³•ã€‚</p>
<h3 id="ä¸€ä¼ ç»Ÿæ–¹æ³•å¦‚ä½•è¯„ä¼°ç»“æœå¥½å">ä¸€ã€ä¼ ç»Ÿæ–¹æ³•å¦‚ä½•è¯„ä¼°ç»“æœå¥½åï¼Ÿ</h3>
<p>â€‹
åœ¨ä¼ ç»Ÿæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šé‡‡ç”¨è®¡ç®—<strong>Likelihood</strong>çš„æ–¹æ³•æ¥è¿›è¡Œè¡¡é‡ã€‚æˆ‘ä»¬è®­ç»ƒå‡ºäº†ä¸€ä¸ªGeneratorï¼Œç„¶åæˆ‘ä»¬å°±ä¼šç”¨ç”Ÿæˆå™¨çš„ç”Ÿæˆåˆ†å¸ƒæ¦‚ç‡å»è¿›è¡Œè®¡ç®—å…¶ç”ŸæˆçœŸå®æ•°æ®çš„å¯èƒ½æ€§ã€‚å…·ä½“çš„æ‰§è¡Œæ­¥éª¤å°±æ˜¯ï¼Œå…ˆé‡‡æ ·éƒ¨åˆ†çœŸå®æ•°æ®ç‚¹ï¼Œç„¶åè®¡ç®—Gæƒ³è¦ç”Ÿæˆæ¯ä¸ªçœŸå®å›¾åƒæ•°æ®ç‚¹çš„æ¦‚ç‡ï¼Œç„¶åæ±‚å’Œå¹³å‡å³å¯å¾—åˆ°Likelihoodã€‚ä½†æ˜¯åœ¨GANä¸­ï¼Œè¿™ç§æ–¹æ³•æ˜¯è¡Œä¸é€šçš„ï¼Œå› ä¸ºGANè®­ç»ƒå¥½ä»¥åæ˜¯ä¸€ä¸ªç½‘ç»œï¼Œæ˜¯æ²¡æ³•ç®—å‡ºå…¶äº§ç”Ÿå‡ºæŸä¸€å¼ å›¾åƒçš„æ¦‚ç‡çš„ã€‚ï¼ˆåƒä¼ ç»Ÿï¼Œå¦‚æœè¿™ä¸ªGeneratoræ˜¯ä¸€ä¸ªé«˜æ–¯ç”Ÿæˆæ¨¡å‹ï¼Œæ˜¯å¯ä»¥è¿›è¡Œè®¡ç®—çš„ï¼‰</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105752191.png" /></p>
<h3 id="äºŒkernel-density-estimation">äºŒã€Kernel Density Estimation</h3>
<p>â€‹
æœ‰ä¸€ç§è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼šè¾“å…¥ä¸€å †æ•°æ®Dataï¼Œç»è¿‡ç”Ÿæˆå™¨åï¼Œä¼šäº§ç”Ÿå¯¹åº”çš„ä¸€å †é«˜ç»´å‘é‡ï¼ˆå…¶å®å°±æ˜¯å›¾åƒï¼‰ï¼Œæˆ‘ä»¬å°†æ¯ä¸€ä¸ªé«˜ç»´å‘é‡è§†ä¸ºä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒçš„å‡å€¼ï¼Œè¿™æ ·ä¸€æ¥æ¯ä¸€ä¸ªsampleå°±è¢«è¿‘ä¼¼ä¸ºäº†ä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒã€‚ç„¶åæˆ‘ä»¬å†å°†è¿™äº›é«˜æ–¯åˆ†å¸ƒè¿›è¡Œèåˆï¼Œå°±èƒ½å¤Ÿå¾—åˆ°ä¸€ä¸ªé«˜æ–¯æ··åˆæ¨¡å‹ã€‚è¿™ä¸€é«˜æ–¯æ··åˆæ¨¡å‹æ˜¯å¯ä»¥è®¡ç®—å½¢æˆæŸä¸ªå›¾åƒçš„æ¦‚ç‡çš„ã€‚ä½†æ˜¯ä½¿ç”¨è¿™æ¬¡æ­¥éª¤åšå‡ºæ¥çš„ä¹Ÿä¼šæœ‰è®¸å¤šéš¾ç‚¹å’Œé—®é¢˜ï¼Œæ¯”å¦‚ä¸çŸ¥é“éœ€è¦ç”¨å¤šå°‘é«˜æ–¯åˆ†å¸ƒå»æ‹Ÿåˆï¼Œä¸çŸ¥é“éœ€è¦é‡‡æ ·å¤šå°‘ç‚¹ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105815158.png" /></p>
<p>â€‹
åŒæ—¶ï¼Œé€€ä¸€ä¸‡æ­¥è®²ï¼Œå…¶å®ä½¿ç”¨Likelihoodæ¥è¿›è¡Œä¼°è®¡å°±ä¸æ˜¯ä¸€ä¸ªå¾ˆä¸¥è°¨çš„äº‹æƒ…ï¼ŒLikelihoodä½ï¼Œå¯¹åº”çš„å›¾åƒè´¨é‡ä¹Ÿå¯èƒ½é«˜ã€‚Likelihoodé«˜ï¼Œå¯¹åº”çš„å›¾åƒè´¨é‡ä¹Ÿå¯èƒ½ä½ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå°±æ˜¯ä¸¤ç§å¯èƒ½çš„æƒ…å†µã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105822595.png" /></p>
<h3 id="ä¸‰å¸¸ç”¨è¯„ä¼°æ–¹æ³•">ä¸‰ã€å¸¸ç”¨è¯„ä¼°æ–¹æ³•ï¼š</h3>
<p>â€‹
ç°åœ¨çš„æ–‡çŒ®ï¼Œå¤§éƒ¨åˆ†å¸¸å¸¸çœ‹åˆ°çš„ç”¨äºè¯„ä¼°GANçš„æ–¹æ³•æ˜¯ï¼Œä½¿ç”¨ä¸€ä¸ªå·²ç»è®­ç»ƒå¥½çš„Classifierï¼ˆå¯ä»¥æ˜¯ä¸€ä¸ªVGGï¼Œä¹Ÿå¯ä»¥æ˜¯Inception
Netï¼‰ï¼Œæ¥åˆ¤æ–­è¿™ä¸ªç”Ÿæˆå™¨ç”Ÿæˆçš„å›¾åƒè´¨é‡å¥½åã€‚</p>
<p>æˆ‘ä»¬å¾€å¾€æœ‰ä»¥ä¸‹ä¸¤ä¸ªè¯„ä¼°åŸåˆ™ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p>â€‹ <strong>åŸåˆ™1</strong>:å°†ä¸€ä¸ªgenerated
imageè¾“å…¥åˆ†ç±»å™¨ï¼ŒæŸ¥çœ‹åˆ†ç±»å™¨è¾“å‡ºçš„å±äºå„ä¸ªç±»çš„æ¦‚ç‡ï¼Œå¦‚æœæ¦‚ç‡æ¯”è¾ƒé›†ä¸­ï¼Œè¯´æ˜ç”Ÿæˆå™¨ç”Ÿæˆçš„å›¾ç‰‡æ•ˆæœæ¯”è¾ƒå¥½ï¼Œå› ä¸ºåˆ†ç±»å™¨å¯ä»¥å¾ˆæ˜ç¡®çš„åˆ†å‡ºæ¥ã€‚</p>
<p>â€‹ <strong>åŸåˆ™2</strong>:å°†ä¸€ç³»åˆ—generated
imageè¾“å…¥åˆ†ç±»å™¨ï¼ŒæŸ¥çœ‹åˆ†ç±»å™¨è¾“å‡ºçš„å„ä¸ªç±»å„å­˜åœ¨å‡ å¼ å›¾åƒï¼Œå¦‚æœåˆ†å®Œç±»ä»¥åæ¯ä¸ªç±»åˆ«çš„å®ä¾‹å·®ä¸å¤šçš„è¯ï¼Œè¯´æ˜ç”Ÿæˆå™¨æ•ˆæœè¾ƒå¥½ï¼Œå¦‚æœæ•°é‡åå‘äºæŸç§ç±»åˆ«ï¼Œè¯´æ˜ç”Ÿæˆå™¨ä¼šç”Ÿæˆåå‘äºæŸä¸€ä¸ªç±»åˆ«çš„å›¾åƒã€‚æ‰€ä»¥æˆ‘ä»¬å¸Œæœ›åˆ†å‡ºæ¥çš„åˆ†å¸ƒèƒ½å¤Ÿå°½é‡çš„å¹³æ»‘ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105839124.png" /></p>
<p>â€‹ æœ‰äº†ä¸Šè¿°åŸåˆ™ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸‹å›¾æ‰€ç¤ºçš„Inception
Scoreæ¥è¿›è¡ŒæŒ‡æ ‡çš„é‡åŒ–ã€‚å…¶ä¸­çš„ç¬¬ä¸€é¡¹ä»£è¡¨åŸåˆ™1ï¼Œç¬¬äºŒé¡¹ä»£è¡¨åŸåˆ™2.</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115105847271.png" /></p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>GANç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>GAN</tag>
        <tag>GAN Evaluation</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”¨Pythonæ­å»ºæ·±åº¦å­¦ä¹ æ¡†æ¶ç³»åˆ—ç¬”è®°4â€”â€”ä¼˜åŒ–å™¨ç±»çš„ä»£ç å®ç°ï¼ˆä¸‹ï¼‰</title>
    <url>/2022/02/28/d9d77f183b68/</url>
    <content><![CDATA[<h4 id="å…­momentumå†²é‡ä¼˜åŒ–å™¨çš„å®ç°">å…­ã€Momentumå†²é‡ä¼˜åŒ–å™¨çš„å®ç°ï¼š</h4>
<h5 id="å…¬å¼">1ã€å…¬å¼ï¼š</h5>
<p>â€‹
ç”±äºå…ˆå‰çš„æ¢¯åº¦ä¸‹é™æ³•çš„é€Ÿåº¦å‘é‡våªä¾èµ–äºå½“å‰çš„æ¢¯åº¦ï¼Œè€Œä¸å‚è€ƒå†å²æ¢¯åº¦ï¼Œå¾ˆå®¹æ˜“è®©ä¼˜åŒ–å™¨é™·å…¥Critical
Pointä¸­ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/6E1655AA36BAFF6E77328731A966D476.jpg" style="zoom:33%;" /></p>
<p>â€‹ <span class="math inline">\(\beta\)</span> ä¸ºè¡°å‡ç³»æ•°ï¼Œä¸€èˆ¬ä¸º0.9</p>
<h5 id="ä»£ç ">2ã€ä»£ç ï¼š</h5>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Momentum</span>(<span class="title class_ inherited__">Optimizer</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    å†²é‡æ³•</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, graph, target, learning_rate=<span class="number">0.01</span>, momentum=<span class="number">0.9</span></span>):</span><br><span class="line"></span><br><span class="line">        Optimizer.__init__(self, graph, target)</span><br><span class="line">        self.learning_rate = learning_rate</span><br><span class="line">        <span class="comment"># è¡°å‡ç³»æ•°ï¼Œé»˜è®¤ä¸º0.9</span></span><br><span class="line">        self.momentum = momentum</span><br><span class="line">        <span class="comment"># ç§¯ç´¯å†å²é€Ÿåº¦çš„å­—å…¸</span></span><br><span class="line">        self.v = <span class="built_in">dict</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_update</span>(<span class="params">self</span>):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> node <span class="keyword">in</span> self.graph.nodes:</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">isinstance</span>(node, Variable) <span class="keyword">and</span> node.trainable:</span><br><span class="line">                <span class="comment"># å–å¾—è¯¥èŠ‚ç‚¹åœ¨å½“å‰æ‰¹çš„å¹³å‡æ¢¯åº¦</span></span><br><span class="line">                gradient = self.get_gradient(node)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># è¯¥èŠ‚ç‚¹æ²¡æœ‰å†å²é€Ÿåº¦ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å¯¹è¯¥èŠ‚ç‚¹æ›´æ–°æ¢¯åº¦</span></span><br><span class="line">                <span class="keyword">if</span> node <span class="keyword">not</span> <span class="keyword">in</span> self.v:</span><br><span class="line">                    self.v[node] = - self.learning_rate * gradient</span><br><span class="line">                <span class="keyword">else</span>: <span class="comment"># å¦‚æœè¯¥èŠ‚ç‚¹æœ‰å†å²é€Ÿåº¦</span></span><br><span class="line">                    <span class="comment"># æ›´æ–°å½“å‰èŠ‚ç‚¹çš„é€Ÿåº¦</span></span><br><span class="line">                    self.v[node] = self.momentum * self.v[node] - self.learning_rate * gradient</span><br><span class="line"></span><br><span class="line">                <span class="comment"># åˆ©ç”¨è®¡ç®—æ‰€å¾—çš„é€Ÿåº¦ æ›´æ–°å˜é‡èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">                node.set_value(node.value + self.v[node])</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="ä¸ƒadagradä¼˜åŒ–å™¨çš„å®ç°">ä¸ƒã€AdaGradä¼˜åŒ–å™¨çš„å®ç°ï¼š</h4>
<h5 id="å…¬å¼-1">1ã€å…¬å¼ï¼š</h5>
<p>â€‹
<strong>é’ˆå¯¹æ¢¯åº¦çš„æ¯ä¸ªåˆ†é‡å„è‡ªçš„å†å²ï¼Œé‡‡ç”¨ä¸åŒçš„å­¦ä¹ ç‡ã€‚</strong></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/B02ADB3A208B90C7E30118C018E24361.jpg" style="zoom: 25%;" /></p>
<p>â€‹ s æ˜¯
ä¸€ä¸ªå’Œæ¢¯åº¦åŒç»´åº¦çš„å‘é‡ï¼Œ<strong>å…¶ä¼šåœ¨å„ä¸ªåˆ†é‡ä¸Šç´¯åŠ å†å²æ¢¯åº¦å„ä¸ªåˆ†é‡çš„å¹³æ–¹</strong>ã€‚<strong>æ›´æ–°æ¢¯åº¦æ—¶ï¼Œæ±‚så„ä¸ªåˆ†é‡çš„å¹³æ–¹æ ¹,ç„¶åç”¨å­¦ä¹ ç‡å»é™¤ï¼Œå¾—åˆ°è‡ªé€‚åº”çš„ä¸€ä¸ªå‘é‡ï¼Œé‡Œé¢æ¯ä¸ªåˆ†é‡ä»£è¡¨çš„å°±æ˜¯å„ä¸ªåˆ†é‡å¯¹åº”çš„åˆé€‚çš„å­¦ä¹ ç‡</strong>ï¼Œå°†è¿™ä¸ªå‘é‡ä¸æ¢¯åº¦å‘é‡åšå†…ç§¯ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªåˆç†çš„ä¸‹é™æ–¹å‘ã€‚ä»ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è®²ï¼Œè¿™å·²ç»ä¸æ˜¯å†å‘æ¢¯åº¦çš„åæ–¹å‘ä¸‹é™äº†ã€‚<span
class="math inline">\(\epsilon\)</span>æ˜¯ç”¨äºé˜²æ­¢é™¤æ•°ä¸º0.</p>
<p>â€‹ <span class="math inline">\(\bigotimes\)</span>
ä»£è¡¨å‘é‡å†…å„ä¸ªåˆ†é‡åˆ†åˆ«ç›¸ä¹˜ï¼Œå°†ä¼šå¾—åˆ°ä¸€ä¸ªå’ŒåŸæ¥å‘é‡ç»´åº¦ä¸€è‡´çš„æ–°å‘é‡</p>
<h5 id="ä»£ç -1">2ã€ä»£ç ï¼š</h5>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AdaGrad</span>(<span class="title class_ inherited__">Optimizer</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    ä¸åŒåˆ†é‡ï¼Œè‡ªé€‚åº”å­¦ä¹ ç‡</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, graph, target, learning_rate=<span class="number">0.01</span></span>):</span><br><span class="line"></span><br><span class="line">        Optimizer.__init__(self, graph, target)</span><br><span class="line">        self.learning_rate = learning_rate</span><br><span class="line">        <span class="comment"># æå°é‡ï¼Œä¸ºäº†é˜²æ­¢é™¤æ•°ä¸º0</span></span><br><span class="line">        self.epsilon = <span class="number">1e-10</span></span><br><span class="line">        <span class="comment"># ç§¯ç´¯å†å²æ¢¯åº¦å‘é‡çš„å­—å…¸</span></span><br><span class="line">        self.s = <span class="built_in">dict</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_update</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">for</span> node <span class="keyword">in</span> self.graph.nodes:</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">isinstance</span>(node, Variable) <span class="keyword">and</span> node.trainable:</span><br><span class="line">                <span class="comment"># å–å¾—è¯¥èŠ‚ç‚¹åœ¨å½“å‰æ‰¹çš„å¹³å‡æ¢¯åº¦</span></span><br><span class="line">                gradient = self.get_gradient(node)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># è¯¥èŠ‚ç‚¹æ²¡æœ‰å†å²çš„å‘é‡sï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å¯¹è¯¥èŠ‚ç‚¹æ›´æ–°æ¢¯åº¦</span></span><br><span class="line">                <span class="keyword">if</span> node <span class="keyword">not</span> <span class="keyword">in</span> self.s:</span><br><span class="line">                    self.s[node] = np.power(gradient,<span class="number">2</span>)</span><br><span class="line">                <span class="keyword">else</span>: <span class="comment"># å¦‚æœè¯¥èŠ‚ç‚¹æœ‰å†å²ç´¯ç§¯çš„å‘é‡s</span></span><br><span class="line">                    <span class="comment"># æ›´æ–°å½“å‰èŠ‚ç‚¹çš„å†å²ç´¯ç§¯çš„s</span></span><br><span class="line">                    self.s[node] = self.s[node] + np.power(gradient,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">                <span class="comment"># åˆ©ç”¨è®¡ç®—æ‰€å¾—çš„é€Ÿåº¦ æ›´æ–°å˜é‡èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">                node.set_value(node.value - self.learning_rate * gradient / (np.sqrt(self.s[node] + self.epsilon)))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="å…«rmspropä¼˜åŒ–å™¨çš„å®ç°">å…«ã€RMSPropä¼˜åŒ–å™¨çš„å®ç°ï¼š</h4>
<h5 id="å…¬å¼-2">1ã€å…¬å¼ï¼š</h5>
<p>â€‹
AdaGradç´¯ç§¯äº†å…¨éƒ¨çš„å†å²æ¢¯åº¦ï¼Œè€Œæˆ‘ä»¬å…¶å®åº”è¯¥æ›´å¤šåœ°è€ƒè™‘è¿‘æœŸåœ°å†å²æ¢¯åº¦ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/35459FAB3F235381D94DED311CECB887.jpg" style="zoom:25%;" /></p>
<p>â€‹ <span class="math inline">\(\beta\)</span> ä¸ºè¡°å‡ç³»æ•°ï¼Œä¸€èˆ¬ä¸º0.9</p>
<h5 id="ä»£ç -2">2ã€ä»£ç ï¼š</h5>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RMSProp</span>(<span class="title class_ inherited__">Optimizer</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    RMSPropä¼˜åŒ–å™¨</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, graph, target, learning_rate=<span class="number">0.01</span>, beta=<span class="number">0.9</span></span>):</span><br><span class="line"></span><br><span class="line">        Optimizer.__init__(self, graph, target)</span><br><span class="line"></span><br><span class="line">        self.learning_rate = learning_rate</span><br><span class="line">        <span class="comment"># æå°é‡ï¼Œä¸ºäº†é˜²æ­¢é™¤æ•°ä¸º0</span></span><br><span class="line">        self.epsilon = <span class="number">1e-10</span></span><br><span class="line">        <span class="comment"># è¡°å‡ç³»æ•°</span></span><br><span class="line">        <span class="keyword">assert</span> <span class="number">0.0</span> &lt; beta &lt; <span class="number">1.0</span></span><br><span class="line">        self.beta = beta</span><br><span class="line">        <span class="comment"># ç§¯ç´¯å†å²æ¢¯åº¦å‘é‡çš„å­—å…¸</span></span><br><span class="line">        self.s = <span class="built_in">dict</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_update</span>(<span class="params">self</span>):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> node <span class="keyword">in</span> self.graph.nodes:</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">isinstance</span>(node, Variable) <span class="keyword">and</span> node.trainable:</span><br><span class="line">                <span class="comment"># å–å¾—è¯¥èŠ‚ç‚¹åœ¨å½“å‰æ‰¹çš„å¹³å‡æ¢¯åº¦</span></span><br><span class="line">                gradient = self.get_gradient(node)</span><br><span class="line"></span><br><span class="line">                <span class="comment"># æ»‘åŠ¨åŠ æƒç´¯ç§¯æ¢¯åº¦å„åˆ†é‡çš„å¹³æ–¹å’Œ</span></span><br><span class="line">                <span class="keyword">if</span> node <span class="keyword">not</span> <span class="keyword">in</span> self.s:</span><br><span class="line">                    self.s[node] = np.power(gradient, <span class="number">2</span>) <span class="comment"># æ³¨æ„æ­¤å¤„ä¸è¦ä¹˜ç³»æ•°</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    self.s[node] = self.beta * self.s[node] + (<span class="number">1</span> - self.beta) * np.power(gradient, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">                <span class="comment"># æ›´æ–°å˜é‡èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">                node.set_value(node.value - self.learning_rate *</span><br><span class="line">                               gradient / (np.sqrt(self.s[node] + self.epsilon)))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="ä¹adamä¼˜åŒ–å™¨çš„å®ç°">ä¹ã€Adamä¼˜åŒ–å™¨çš„å®ç°ï¼š</h4>
<h5 id="å…¬å¼-3">1ã€å…¬å¼ï¼š</h5>
<p>â€‹ é›†å¤§æˆè€…ï¼Œç»“åˆå†²é‡ä¸RMSPropçš„æ€æƒ³ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/F34B46DEC057822E872DE8B45F0EDB3F.jpg" style="zoom:25%;" /></p>
<h5 id="ä»£ç -3">2ã€ä»£ç ï¼š</h5>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Adam</span>(<span class="title class_ inherited__">Optimizer</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Adamä¼˜åŒ–å™¨</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, graph, target, learning_rate=<span class="number">0.01</span>, beta1=<span class="number">0.9</span>,beta2=<span class="number">0.99</span></span>):</span><br><span class="line"></span><br><span class="line">        Optimizer.__init__(self, graph, target)</span><br><span class="line"></span><br><span class="line">        self.learning_rate = learning_rate</span><br><span class="line">        <span class="comment"># æå°é‡ï¼Œä¸ºäº†é˜²æ­¢é™¤æ•°ä¸º0</span></span><br><span class="line">        self.epsilon = <span class="number">1e-10</span></span><br><span class="line">        <span class="comment"># è¡°å‡ç³»æ•°1</span></span><br><span class="line">        <span class="keyword">assert</span> <span class="number">0.0</span> &lt; beta1 &lt; <span class="number">1.0</span></span><br><span class="line">        self.beta1 = beta1</span><br><span class="line">        <span class="comment"># è¡°å‡ç³»æ•°2</span></span><br><span class="line">        <span class="keyword">assert</span> <span class="number">0.0</span> &lt; beta2 &lt; <span class="number">1.0</span></span><br><span class="line">        self.beta2 = beta2</span><br><span class="line">        <span class="comment"># ç§¯ç´¯å†å²æ¢¯åº¦å‘é‡çš„å­—å…¸</span></span><br><span class="line">        self.s = <span class="built_in">dict</span>()</span><br><span class="line">        <span class="comment"># ç§¯ç´¯å†å²é€Ÿåº¦å‘é‡çš„å­—å…¸</span></span><br><span class="line">        self.v = <span class="built_in">dict</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_update</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">for</span> node <span class="keyword">in</span> self.graph.nodes:</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">isinstance</span>(node, Variable) <span class="keyword">and</span> node.trainable:</span><br><span class="line">                <span class="comment"># å–å¾—è¯¥èŠ‚ç‚¹åœ¨å½“å‰æ‰¹çš„å¹³å‡æ¢¯åº¦</span></span><br><span class="line">                gradient = self.get_gradient(node)</span><br><span class="line"></span><br><span class="line">                <span class="comment"># æ»‘åŠ¨åŠ æƒç´¯ç§¯æ¢¯åº¦å„åˆ†é‡çš„å¹³æ–¹å’Œ</span></span><br><span class="line">                <span class="keyword">if</span> node <span class="keyword">not</span> <span class="keyword">in</span> self.s:</span><br><span class="line">                    self.s[node] = np.power(gradient, <span class="number">2</span>) <span class="comment"># æ³¨æ„æ­¤å¤„ä¸è¦ä¹˜ç³»æ•°</span></span><br><span class="line">                    self.v[node] = gradient <span class="comment"># æ³¨æ„æ­¤å¤„ä¸è¦ä¹˜ç³»æ•°</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="comment"># æ¢¯åº¦ç´¯ç§¯</span></span><br><span class="line">                    self.v[node] = self.beta1 * self.v[node] + (<span class="number">1</span> - self.beta1) * gradient</span><br><span class="line"></span><br><span class="line">                    <span class="comment"># å„åˆ†é‡å¹³æ–¹ç´¯ç§¯</span></span><br><span class="line">                    self.s[node] = self.beta2 * self.s[node] + (<span class="number">1</span> - self.beta2) * np.power(gradient, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">                <span class="comment"># æ›´æ–°å˜é‡èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">                node.set_value(node.value - self.learning_rate *</span><br><span class="line">                               self.v[node] / np.sqrt(self.s[node] + self.epsilon))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
        <category>Pythonæ­å»ºç®€æ˜“æ¡†æ¶ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Framework</tag>
      </tags>
  </entry>
  <entry>
    <title>ML2021è¯¾ç¨‹ç³»åˆ—ç¬”è®°1â€”â€”DeepLearningåŸºæœ¬ä»‹ç»</title>
    <url>/2021/12/17/d3d6f910aaf2/</url>
    <content><![CDATA[<h3
id="hung-yi-lee-æå®æ¯…-machine-learning2021springè¯¾ç¨‹week1ç¬”è®°">Hung-yi
Lee (æå®æ¯…) MACHINE LEARNING2021SPRINGè¯¾ç¨‹Week1ç¬”è®°</h3>
<h3
id="è¯¾ç¨‹ç½‘å€httpsspeech.ee.ntu.edu.twhyleeml2021-spring.html">è¯¾ç¨‹ç½‘å€ï¼šhttps://speech.ee.ntu.edu.tw/~hylee/ml/2021-spring.html</h3>
<p>å…¶å®Machine Learningçš„è¿‡ç¨‹å°±æ˜¯ä»¥ä¸‹çš„ä¸‰ä¸ªåŸºæœ¬æ­¥éª¤ï¼š</p>
<p>â€‹ 1ã€ Function with Unknown Parameters</p>
<p>â€‹ 2ã€ Define Loss From Training Data</p>
<p>â€‹ 3ã€ Optimization</p>
<p>æœ¬ç¯‡å°±å›´ç»•è¿™ä¸‰ä¸ªæ­¥éª¤è¿›è¡Œç®€å•çš„è®²è§£ï¼š</p>
<h2 id="ä¸€æœ€ç®€å•çš„mlæ¨¡å‹å‡½æ•°">ä¸€ã€æœ€ç®€å•çš„MLæ¨¡å‹å‡½æ•°ï¼š</h2>
<p>â€‹ åœ¨æœ€ç®€å•çš„MLçš„è¿‡ç¨‹ä¸­ï¼š</p>
<p>â€‹
æˆ‘ä»¬çš„ç¬¬ä¸€æ­¥å°±æ˜¯è¦æ‰¾ä¸€ä¸ªæœ‰æœªçŸ¥å‚æ•°çš„å‡½æ•°ï¼Œé‚£ä¹ˆæœ€ç®€å•çš„å°±æ˜¯æœ€ä¸ºçº¯ç²¹çš„çº¿æ€§æ¨¡å‹ï¼šY
= wx1 + b.</p>
<p>â€‹
æˆ‘ä»¬å°†x1ç§°ä¸ºfeatureï¼Œwï¼Œbç§°ä¸ºæœªçŸ¥å¾…è®­ç»ƒå‚æ•°ï¼Œåœ¨ç¬¬äºŒæ­¥ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæŸå¤±å‡½æ•°Lossï¼Œè¿™ä¸ªæŸå¤±å‡½æ•°ä»£è¡¨è¯¥çº¿æ€§æ¨¡å‹æ‹Ÿåˆæ•°æ®çš„å¥½åç¨‹åº¦ã€‚å®ƒæ˜¯æ¨¡å‹æœªçŸ¥å‚æ•°çš„å‡½æ•°ï¼Œå³L(w,b)ã€‚æˆ‘ä»¬åˆ©ç”¨è®­ç»ƒæ•°æ®é›†ï¼Œæ¥è®¡ç®—è¿™ä¸ªLosså‡½æ•°çš„å€¼ï¼Œä»è€Œåˆ¤æ–­è¯¥æ¨¡å‹æ‹Ÿåˆæ•°æ®çš„å¥½åã€‚</p>
<p>â€‹
ç¬¬ä¸‰æ­¥ï¼Œæˆ‘ä»¬å°±æ˜¯è¦æ‰¾åˆ°ä¸€ç»„æœ€å¥½çš„wå’Œbï¼Œä½¿å¾—Losså‡½æ•°æœ€å°ï¼Œä¹Ÿå°±æ˜¯ä½¿å¾—æˆ‘ä»¬çš„æ¨¡å‹æœ€èƒ½å¤Ÿæ‹Ÿåˆæ•°æ®ã€‚åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œå¸¸å¸¸ä¼šç”¨åˆ°æ¢¯åº¦ä¸‹é™çš„æ–¹æ³•å»è¿›è¡Œä¼˜åŒ–ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220121170849128.png" /></p>
<p>â€‹
è‡³æ­¤ï¼Œä¸€ä¸ªæœ€ä¸ºç®€å•çš„æœºå™¨å­¦ä¹ ä»»åŠ¡å°±å®Œæˆäº†ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªæœ€ç®€å•çš„å¸¦ä¸¤ä¸ªæœªçŸ¥å‚æ•°çš„å‡½æ•°ï¼Œå»æ‹Ÿåˆä¸€ç»„æ•°æ®ï¼Œæ‰¾åˆ°äº†æœ€èƒ½å¤Ÿæ‹Ÿåˆè¿™ç»„æ•°æ®çš„ä¸¤ä¸ªå‚æ•°çš„æ•°å€¼ã€‚ç®€å•è€Œè¨€ï¼Œè®­ç»ƒçš„æ­¥éª¤å°±æ˜¯ç”±ä»¥ä¸‹è¿™ä¸‰æ­¥ç»„æˆã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114105405284.png" alt="image-20220114105405284" style="zoom: 25%;" /></p>
<h2 id="äºŒè¿›é˜¶çš„mlæ¨¡å‹å‡½æ•°">äºŒã€è¿›é˜¶çš„MLæ¨¡å‹å‡½æ•°</h2>
<p>â€‹
ç„¶åæˆ‘ä»¬åœ¨æƒ³ï¼Œåˆšæ‰é‚£æ ·æ˜¯æœ€ç®€å•çš„çº¿æ€§æ¨¡å‹ï¼Œå¦‚æœæˆ‘ä»¬å¢åŠ featuresï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„å¸¦7ä¸ªå‚æ•°çš„æ¨¡å‹ï¼Œä¹Ÿå¯ä»¥å¾—åˆ°æœ‰28ä¸ªå‚æ•°çš„æ¨¡å‹â€¦â€¦å½“ç„¶åœ¨ç¬¬äºŒæ­¥å’Œç¬¬ä¸‰æ­¥ä¸­è¿‡ç¨‹æ˜¯ä¸€æ ·çš„ã€‚å‚æ•°è¶Šå¤šï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ‹Ÿåˆçš„featureså°±è¶Šå¤šã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114105522828.png" alt="image-20220114105522828" style="zoom: 8%;" />
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114105556231.png" alt="image-20220114105556231" style="zoom:8%;" /></p>
<p>â€‹
ä½†æ˜¯ï¼Œä»…ä»…æ˜¯çº¿æ€§çš„æ¨¡å‹çš„ç»„åˆï¼Œè¿˜æ˜¯è®©æˆ‘ä»¬èƒ½å¤Ÿæ‹Ÿåˆçš„å‡½æ•°å¤ªè¿‡æœ‰é™äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æƒ³åœ¨ç¬¬ä¸€æ­¥ä¸­æ‰¾åˆ°æ›´flexä¸€ç‚¹çš„å‡½æ•°ï¼Œäºæ˜¯ä¹ï¼Œæˆ‘ä»¬å°±å‘ç°äº†sigmoidå‡½æ•°ï¼šå®ƒä¹Ÿæœ‰bï¼Œwï¼Œcä¸‰ä¸ªæœªçŸ¥å‚æ•°ã€‚ã€‚é‚£ä¹ˆè¿›è¡Œæ¨å¹¿ä»¥åï¼Œä¹Ÿå¯ä»¥å°†æ‰€æœ‰çš„å‡½æ•°</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114105640184.png" alt="image-20220114105640184" style="zoom:19%;" /></p>
<p>â€‹
é‚£ä¹ˆè¿›è¡Œæ¨å¹¿ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥å°†å¦‚å›¾æ‰€ç¤ºçš„çº¢è‰²å‡½æ•°ï¼Œç”¨ä¸‰ä¸ªsigmoidå‡½æ•°çš„å åŠ æ¥è¿›è¡Œæ‹Ÿåˆï¼Œä¹Ÿå°±æ˜¯èƒ½å¤Ÿåˆ—å‡ºä¸€ä¸ªå›¾ç‰‡å·¦ä¸‹æ–¹çš„å…¬å¼ï¼Œè¿™ä¸ªå…¬å¼å…±æœ‰3*3
+ 1 = 10ä¸ªå‚æ•°ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114105705024.png" alt="image-20220114105705024" style="zoom:25%;" /></p>
<p>â€‹</p>
<p>â€‹ æˆ‘ä»¬å°†è¿™ä¸ªå¼å­æå–å‡ºæ¥ï¼Œå†ä»”ç»†çš„çœ‹ä¸€çœ‹ï¼š</p>
<p>â€‹
å…¶å®æˆ‘ä»¬å¯ä»¥è®²ä¸Šè¿°è¿™ä¸ªå¼å­å†™æˆçŸ©é˜µç›¸ä¹˜çš„å½¢å¼ï¼Œæˆ‘ä»¬é¦–å…ˆçœ‹sigmoidå‡½æ•°å†…éƒ¨æ‰€å¹²çš„äº‹æƒ…ï¼Œsigmoidå‡½æ•°å†…éƒ¨æ‰€å¹²çš„äº‹æƒ…å°±å¯ä»¥å†™æˆå¦‚ä¸‹æ‰€ç¤ºçš„çŸ©é˜µè¡¨ç¤ºå½¢å¼ï¼Œr
= b + W * x</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114105732731.png" alt="image-20220114105732731" style="zoom:25%;" /></p>
<p>â€‹ ç„¶åæˆ‘ä»¬çš„rå‘é‡ä¸­çš„æ¯ä¸€é¡¹å†åˆ†åˆ«é€šè¿‡sigmoidå‡½æ•°ï¼Œå¾—åˆ°aå‘é‡</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114105800543.png" alt="image-20220114105800543" style="zoom:25%;" /></p>
<p>â€‹
æœ€åaå‘é‡[a1,a2,a3]ä¹˜ä¸Šç³»æ•°c1,c2,c3ï¼Œå†åŠ ä¸Šåæ‰§bï¼Œå¾—åˆ°æœ€ç»ˆçš„é¢„æµ‹å€¼yã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114105825308.png" alt="image-20220114105825308" style="zoom:25%;" /></p>
<p>â€‹ æ•…è€Œæˆ‘ä»¬æœ€ç»ˆå°±å¯ä»¥å°†è¿™ä¸ªmore
flexibleçš„å‡½æ•°å†™æˆå¦‚ä¸‹å½¢å¼ï¼Œå…¶ä¸­çš„Wï¼Œb(ç»¿è‰²)ï¼Œcï¼Œb(ç°è‰²)ï¼Œéƒ½æ˜¯æœªçŸ¥å‚æ•°ï¼Œè€Œxæ˜¯featuresï¼Œyæ˜¯tagã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114105847631.png" alt="image-20220114105847631" style="zoom:25%;" /></p>
<p>â€‹ éšåï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰çš„æœªçŸ¥å‚æ•°æ‹¼æ¥èµ·æ¥ï¼Œç§°ä¸ºå‘é‡Î¸ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114105904095.png" alt="image-20220114105904095" style="zoom: 15%;" /></p>
<p>â€‹
ç„¶åï¼Œå†æ¬¡å›åˆ°MLæ¡†æ¶ä¸­ï¼Œåœ¨ç¬¬äºŒæ­¥çš„å¯»æ‰¾Losså‡½æ•°çš„æ—¶å€™ï¼Œä¸å‰é¢åŸºç¡€çš„å…¶å®ç›¸å·®ä¸å¤šã€‚æ­¤æ—¶Losså‡½æ•°åº”å½“æ˜¯Î¸çš„å‡½æ•°ï¼Œå³L(Î¸)ï¼Œæœ€åå†ä½¿ç”¨æ¢¯åº¦ä¸‹é™ä¼˜åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±æ˜¯è¦æ‰¾åˆ°ä¸€ä¸ªÎ¸*æ¥ä½¿å¾—Losså‡½æ•°å€¼æœ€å°ã€‚</p>
<p>â€‹ <span class="math inline">\(\theta^{*} = arg min_\theta
L\)</span></p>
<p>â€‹
è‡³äºæ–¹æ³•ï¼Œä¹Ÿä¸å‰é¢ä¸€è‡´ï¼šè®¡ç®—Losså‡½æ•°å¯¹å„ä¸ªæœªçŸ¥å‚æ•°çš„å€’æ•°ï¼Œç„¶åæ¢¯åº¦ä¸‹é™å³å¯ã€‚æŒ‰ç…§ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å°†Lå¯¹å„ä¸ªæœªçŸ¥å‚æ•°çš„å¯¼æ•°ç»„æˆäº†ä¸€ä¸ªå‘é‡ï¼Œç§°ä¸ºæ¢¯åº¦ã€‚ç„¶åä¾æ®å­¦ä¹ ç‡æ¥è¿›è¡ŒæœªçŸ¥å‚æ•°çš„æ›´æ–°ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114110015271.png" alt="image-20220114110015271" style="zoom:23%;" /></p>
<p>â€‹
åœ¨è¿™ä¸ªè®­ç»ƒä¼˜åŒ–å‚æ•°çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œæˆ‘ä»¬å¾€å¾€ä¸ä¼šä¸€æ¬¡æ€§æ‹¿æ‰€æœ‰çš„è®­ç»ƒæ•°æ®æ¥è®¡ç®—æŸå¤±å‡½æ•°ï¼Œä»è€Œæ›´æ–°æœªçŸ¥å‚æ•°ï¼Œè€Œæ˜¯ä¼šå°†è®­ç»ƒæ•°æ®åˆ†æˆä¸€ä¸ªbatchä¸€ä¸ªbatchï¼Œæ¯æ¬¡ä½¿ç”¨ä¸€ä¸ªbatchæ¥è®¡ç®—æŸå¤±å‡½æ•°ï¼Œè¿›è€Œè®¡ç®—æ¢¯åº¦ï¼Œæ›´æ–°æœªçŸ¥å‚æ•°ã€‚</p>
<p>â€‹ æ‰€æœ‰æˆ‘ä»¬éœ€è¦åŒºåˆ†ä»¥ä¸‹ä¸€äº›åè¯ï¼š<strong>Update / Epoch / Batch Size /
Training Data</strong></p>
<ul>
<li><p>Update: æ¯åšä¸€æ¬¡æ¢¯åº¦ä¸‹é™ï¼Œæ›´æ–°ä¸€æ¬¡å‚æ•°ï¼Œå°±å«åšä¸€æ¬¡Update</p></li>
<li><p>Batch Size:
æ¯æ¬¡ç”¨æ¥è®¡ç®—æ¢¯åº¦ä¸‹é™æ›´æ–°å‚æ•°ç”¨åˆ°çš„è®­ç»ƒé›†ä¸­æ ·æœ¬çš„ä¸ªæ•°ï¼Œæˆ‘ä»¬åœ¨è®­ç»ƒæ—¶å¾€å¾€ä¼šå°†å…¶åˆ†ä¸ºä¸€ä¸ªBatchä¸€ä¸ªBatchï¼Œæ¯æ¬¡ä½¿ç”¨ä¸€ä¸ªBatchæ¥è®¡ç®—æ¢¯åº¦ï¼Œæ›´æ–°å‚æ•°ã€‚</p></li>
<li><p>Training Data: æ‰€æœ‰çš„è®­ç»ƒæ•°æ®é›†æ ·æœ¬ã€‚</p></li>
<li><p>Epoch:
æ¯å½“ä½¿ç”¨è¿‡ä¸€è½®æ‰€æœ‰çš„è®­ç»ƒæ•°æ®é›†æ ·æœ¬ä»¥åï¼Œå«åšä¸€ä¸ªEpoch</p></li>
</ul>
<p>â€‹ æ•´ä¸ªçš„Optimizationçš„è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114110125128.png" alt="image-20220114110125128" style="zoom:23%;" /></p>
<p>â€‹ ä¸‹é¢æ˜¯ä¸€äº›å¸®åŠ©ç†è§£çš„ä¾‹å­ï¼š</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114110144324.png" alt="image-20220114110144324" style="zoom:25%;" /></p>
<h2
id="ä¸‰mlæ¨¡å‹æœ€ç»ˆè¿›åŒ–deeplearning">ä¸‰ã€MLæ¨¡å‹æœ€ç»ˆè¿›åŒ–â€”â€”DeepLearning</h2>
<p>â€‹
åœ¨ç¬¬äºŒéƒ¨åˆ†çš„functionä¸­ï¼Œæˆ‘ä»¬æ‹Ÿåˆäº†è®¸å¤šä¸ªsigmoidå‡½æ•°ï¼Œsigmoidå‡½æ•°å†…éƒ¨åˆæ˜¯çº¿æ€§çš„å‡½æ•°ã€‚æœ€ç»ˆï¼Œå½¢æˆäº†å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä¸€ä¸ªæ•°æ®æµã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114110230140.png" alt="image-20220114110230140" style="zoom:20%;" /></p>
<p>â€‹
å…¶å®ï¼Œæˆ‘ä»¬åœ¨å¾—åˆ°[a1,a2,a3]ä¹‹åï¼Œè¿˜å¯ä»¥å°†[a1,a2,a3]å†æ¬¡ä½œä¸ºè¾“å…¥ï¼Œè¾“å…¥åˆ°å¦ä¸€ä¸ªç±»ä¼¼ç»“æ„ä¸­å»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼šè¿™æ ·å­æ‰€å½¢æˆçš„æ¨¡å‹å¤Ÿæ›´å¥½çš„æ‹Ÿåˆæ•°æ®ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114110253145.png" alt="image-20220114110253145" style="zoom:25%;" />â€˜</p>
<p>â€‹
æˆ‘ä»¬å°†æ¯ä¸€ä¸ªsigmoidå‡½æ•°ç»„æˆçš„å•ä½å«åšä¸€ä¸ªNeuronï¼Œæ¯å¤„ç†ä¸€æ¬¡æ•°æ®æ‰€æœ‰çš„Neuronç»„æˆçš„å«åšä¸€ä¸ªHidden
Layerï¼Œç”±äºæ•´ä¸ªæ¶æ„ä¼šæœ‰å¾ˆå¤šä¸ªHidden
Layerç»„æˆï¼Œè¿™ç§æ¶æ„çš„æ¨¡å‹å‡½æ•°å°±å«åš<strong>Deep Neural Network ( DNN
)</strong>ï¼Œæ·±åº¦ç¥ç»ç½‘ç»œï¼Œ</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114110326577.png" alt="image-20220114110326577" style="zoom:20%;" />â€˜â€™</p>
<p>â€‹ ä»¥ä¸‹ä¾¿æ˜¯ä¸€äº›æ¯”è¾ƒç»å…¸çš„DNNæ¶æ„çš„ç½‘ç»œï¼šALexNetã€VGGã€GoogleNetç­‰ç­‰</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114110348644.png" alt="image-20220114110348644" style="zoom:25%;" /></p>
<h2 id="é™„å½•-hw1-å›å½’ä»»åŠ¡ä½œä¸šç¬”è®°">é™„å½•ï¼š HW1 å›å½’ä»»åŠ¡ä½œä¸šç¬”è®°</h2>
<h4
id="æœ‰å…³æ•°æ®é¢„å¤„ç†ä¸­çš„å½’ä¸€åŒ–å¤„ç†">1ã€æœ‰å…³æ•°æ®é¢„å¤„ç†ä¸­çš„å½’ä¸€åŒ–å¤„ç†</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">self.data[:, <span class="number">40</span>:] = (self.data[:, <span class="number">40</span>:] - self.data[:, <span class="number">40</span>:].mean(dim=<span class="number">0</span>, keepdim=<span class="literal">True</span>)) / self.data[:, <span class="number">40</span>:].std(dim=<span class="number">0</span>, keepdim=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>â€‹
å…¶å¯ä»¥å¸®åŠ©ä½ å°†æ•°æ®çš„ä¸åŒç»´åº¦çš„ç‰¹å¾æ•°å€¼ï¼Œå‹åˆ°ç±»ä¼¼çš„å°ºåº¦ä¸Šï¼Œä¸è‡³äºå‡ºç°æœ‰äº›ç»´åº¦çš„ç‰¹å¾æ•°å€¼æ˜¯kmçº§åˆ«ï¼Œæœ‰äº›å¯èƒ½æ˜¯mmçº§åˆ«ã€‚å¦‚æœä¸åŒç»´åº¦çš„ç‰¹å¾å°ºåº¦ç›¸å·®å¤ªå¤§ï¼Œä¼šå¯¼è‡´è®­ç»ƒæ—¶æ¢¯åº¦ä¸‹é™ç®—æ³•éå¸¸éš¾ä»¥æ‰§è¡Œï¼ŒLrè¿‡å°çš„è¯ï¼Œä½“ç°å‡ºçš„ç»“æœå°±æ˜¯è®­ç»ƒäº†åŠå¤©Lossé™ä¸ä¸‹å»ã€‚Lrè¿‡å¤§åˆå¯èƒ½å¯¼è‡´Lossä¹±çªœã€‚æ‰€ä»¥å½’ä¸€åŒ–å¤„ç†è¿˜æ˜¯å¾ˆé‡è¦çš„ã€‚</p>
<h4
id="å¦‚æœæ¨¡å‹å¤ªå¤æ‚æ˜“è¿‡æ‹Ÿåˆæˆ‘ä»¬å¯ä»¥åœ¨losså‡½æ•°ä¸­åŠ å…¥l2æ­£åˆ™åŒ–é¡¹">2ã€å¦‚æœæ¨¡å‹å¤ªå¤æ‚æ˜“è¿‡æ‹Ÿåˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Losså‡½æ•°ä¸­åŠ å…¥L2æ­£åˆ™åŒ–é¡¹</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">cal_loss</span>(<span class="params">self, pred, target</span>):</span><br><span class="line">	regularization_loss = <span class="number">0</span></span><br><span class="line">	<span class="comment"># ä½¿ç”¨L2æ­£åˆ™é¡¹</span></span><br><span class="line">	<span class="keyword">for</span> param <span class="keyword">in</span> model.parameters():</span><br><span class="line">		regularization_loss += torch.<span class="built_in">sum</span>(param ** <span class="number">2</span>)</span><br><span class="line">	<span class="keyword">return</span> self.criterion(pred, target) + <span class="number">0.00075</span> * regularization_loss</span><br></pre></td></tr></table></figure>
<h4
id="è®­ç»ƒæ¨¡å‹çš„åŸºæœ¬æ­¥éª¤ä»¥åŠä¸€äº›tricks">3ã€è®­ç»ƒæ¨¡å‹çš„åŸºæœ¬æ­¥éª¤ä»¥åŠä¸€äº›tricks</h4>
<ul>
<li>1ï¼‰æ¯ä¸€ä¸ªepochä¸­éœ€è¦æ‰§è¡Œçš„å¿…å¤‡æ­¥éª¤ï¼šåˆ‡æ¢æ¨¡å‹è‡³trainæ¨¡å¼ï¼Œé€šè¿‡dataLoaderè¿­ä»£éå†æ¯ä¸€ä¸ªBatchï¼Œåœ¨æ¯ä¸€ä¸ªBatchä¸­ï¼Œé¦–å…ˆå°†æ¢¯åº¦è°ƒæ•´è‡³0ï¼Œç„¶åå‰å‘è®¡ç®—ï¼Œç„¶åè®¡ç®—Lossï¼Œç„¶åé€šè¿‡Loss.backward()åå‘ä¼ æ’­ï¼Œæœ€åé€šè¿‡ä¼˜åŒ–å™¨æ›´æ–°æ¨¡å‹å‚æ•°ã€‚</li>
<li>2ï¼‰åœ¨æ¯ä¸€è½®epochç»“æŸå ï¼Œä½¿ç”¨éªŒè¯é›†è¿›è¡ŒéªŒè¯ï¼Œè®¡ç®—dev_mse.</li>
<li>3ï¼‰åœ¨æ¯ä¸€è½®epochç»“æŸåï¼Œå¦‚æœdev_mseæ²¡æœ‰è¿›æ­¥çš„è¯early_stop_cnt++,å½“early_stop_cntè¾¾åˆ°è®¾å®šå€¼æ—¶ï¼Œææ—©ç»“æŸè®­ç»ƒã€‚ï¼ˆä»£è¡¨å·²ç»å¾ˆå¤šè½®æ²¡æœ‰è¿›æ­¥äº†ï¼‰</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">min_mse = <span class="number">1000.</span></span><br><span class="line">early_stop_cnt = <span class="number">0</span></span><br><span class="line">epoch = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> epoch &lt; n_epochs:</span><br><span class="line">	model.train() <span class="comment"># set model to training mode</span></span><br><span class="line">	<span class="keyword">for</span> x, y <span class="keyword">in</span> tr_set: <span class="comment"># iterate through the dataloader</span></span><br><span class="line">		optimizer.zero_grad() <span class="comment"># set gradient to zero</span></span><br><span class="line">		x, y = x.to(device), y.to(device) <span class="comment"># move data to device (cpu/cuda)</span></span><br><span class="line">		pred = model(x) <span class="comment"># forward pass (compute output)</span></span><br><span class="line">		mse_loss = model.cal_loss(pred, y) <span class="comment"># compute loss</span></span><br><span class="line">		mse_loss.backward() <span class="comment"># compute gradient (backpropagation)</span></span><br><span class="line">		optimizer.step() <span class="comment"># update model with optimizer</span></span><br><span class="line">	<span class="comment"># After each epoch, test your model on the validation (development) set.</span></span><br><span class="line">	dev_mse = dev(dv_set, model, device)</span><br><span class="line">	<span class="keyword">if</span> dev_mse &lt; min_mse:</span><br><span class="line">		<span class="comment"># Save model if your model improved</span></span><br><span class="line">		min_mse = dev_mse</span><br><span class="line">		<span class="built_in">print</span>(<span class="string">&#x27;Saving model (epoch = &#123;:4d&#125;, loss = &#123;:.4f&#125;)&#x27;</span>.<span class="built_in">format</span>(epoch + <span class="number">1</span>, min_mse))</span><br><span class="line">		torch.save(model.state_dict(), config[<span class="string">&#x27;save_path&#x27;</span>]) <span class="comment"># Save model to specified path</span></span><br><span class="line">		early_stop_cnt = <span class="number">0</span></span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		early_stop_cnt += <span class="number">1</span></span><br><span class="line">	epoch += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">	<span class="comment"># Stop training if your model stops improving for &quot;config[&#x27;early_stop&#x27;]&quot; epochs.</span></span><br><span class="line">	<span class="keyword">if</span> early_stop_cnt &gt; config[<span class="string">&#x27;early_stop&#x27;</span>]:</span><br><span class="line">		<span class="keyword">break</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>ML2021è¯¾ç¨‹ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”¨Pythonæ­å»ºæ·±åº¦å­¦ä¹ æ¡†æ¶ç³»åˆ—ç¬”è®°5â€”â€”é€»è¾‘å›å½’ä¸­çš„æŸå¤±å‡½æ•°èŠ‚ç‚¹</title>
    <url>/2022/03/02/c830e3a9e023/</url>
    <content><![CDATA[<h3 id="ä¸€æ„ŸçŸ¥æœºæŸå¤±ä¸å¯¹æ•°æŸå¤±">ä¸€ã€æ„ŸçŸ¥æœºæŸå¤±ä¸å¯¹æ•°æŸå¤±ï¼š</h3>
<h4 id="åŸç†åŠåˆ©å¼Š">1ã€åŸç†åŠåˆ©å¼Š</h4>
<p>â€‹
<strong>æ„ŸçŸ¥æœºæŸå¤±</strong>åœ¨åŸç‚¹å¤„æœ‰ä¸€ä¸ªç¡¬è½¬æŠ˜ï¼Œè¯¥ç‚¹ä¸å¯å¯¼ã€‚åŒæ—¶ï¼Œåœ¨xå¤§äº0çš„åŒºé—´èŒƒå›´å†…ï¼Œå…¶å‡½æ•°å€¼ä¸€ç›´ä¸º0ï¼Œä½†è¿™å¹¶ä¸å¤ªå¥½ï¼Œè™½ç„¶æ­¤éƒ¨åˆ†çš„æ¨¡å‹åˆ†ç±»æ­£ç¡®ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›æ¨¡å‹èƒ½å¤Ÿæ›´æ­£ç¡®ï¼Œä¹Ÿå°±æ˜¯xè¶Šå¤§è¶Šå¥½ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_03_02_20_45_52_846.png" style="zoom: 50%;" /></p>
<p>â€‹ ä»‹äºä¸Šè¿°æƒ…å†µï¼Œå¼•å…¥äº†<strong>å¯¹æ•°æŸå¤±å‡½æ•°</strong>ï¼Œ<span
class="math inline">\(L(x) =
log(1+e^{-x})\)</span>ï¼Œå¤„å¤„å¯å¯¼ï¼Œä¸”åœ¨x&gt;0çš„æ—¶å€™ï¼Œxè¶Šå¤§ï¼Œå‡½æ•°å€¼è¶Šæ¥è¿‘0ï¼Œä½œäº†ä¸€å®šçš„åŒºåˆ†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹ä¸é‚£ä¹ˆæ­£ç¡®çš„æƒ…å†µæ–½åŠ äº†ä¸€å®šçš„æƒ©ç½šã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_03_02_20_46_33_157.png" style="zoom:50%;" /></p>
<h4 id="ä»£ç å®ç°">2ã€ä»£ç å®ç°ï¼š</h4>
<h5 id="æŸå¤±å‡½æ•°æŠ½è±¡ç±»">1ï¼‰æŸå¤±å‡½æ•°æŠ½è±¡ç±»ï¼š</h5>
<p>â€‹
æŒ‰ç…§å…ˆå‰æ‰€è¿°ï¼ŒæŸå¤±å‡½æ•°ä¹Ÿå¯ä»¥æŠ½è±¡ä¸ºè®¡ç®—å›¾ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œç»§æ‰¿Nodeç±»</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LossFunction</span>(<span class="title class_ inherited__">Node</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    å®šä¹‰æŸå¤±å‡½æ•°æŠ½è±¡ç±»</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h5 id="å®ç°æ„ŸçŸ¥æœºæŸå¤±">2ï¼‰å®ç°æ„ŸçŸ¥æœºæŸå¤±ï¼š</h5>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">PerceptionLoss</span>(<span class="title class_ inherited__">LossFunction</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æ„ŸçŸ¥æœºæŸå¤±ï¼Œè¾“å…¥ä¸ºæ­£æ—¶ä¸º0ï¼Œè¾“å…¥ä¸ºè´Ÿæ—¶ä¸ºè¾“å…¥çš„ç›¸åæ•°</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">compute</span>(<span class="params">self</span>): </span><br><span class="line">        <span class="keyword">assert</span> <span class="built_in">len</span>(self.parents) == <span class="number">1</span>  <span class="comment"># åªæ¥å—ä¸€ä¸ªçˆ¶èŠ‚ç‚¹</span></span><br><span class="line">        </span><br><span class="line">        x = self.parents[<span class="number">0</span>].value </span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å¯¹çˆ¶èŠ‚ç‚¹ä¸­æ¯ä¸€ä¸ªå…ƒç´ ï¼Œæ‰§è¡Œä¸Šè¿°æ“ä½œ</span></span><br><span class="line">        self.value = np.mat( np.where( x &gt;= <span class="number">0.0</span>, <span class="number">0.0</span>, -x ) )  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_jacobi</span>(<span class="params">self, parent</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        é›…å…‹æ¯”çŸ©é˜µä¸ºå¯¹è§’é˜µï¼Œæ¯ä¸ªå¯¹è§’çº¿å…ƒç´ å¯¹åº”ä¸€ä¸ªçˆ¶èŠ‚ç‚¹å…ƒç´ ã€‚è‹¥çˆ¶èŠ‚ç‚¹å…ƒç´ å¤§äº0ï¼Œåˆ™</span></span><br><span class="line"><span class="string">        ç›¸åº”å¯¹è§’çº¿å…ƒç´ ï¼ˆåå¯¼æ•°ï¼‰ä¸º0ï¼Œå¦åˆ™ä¸º-1ã€‚</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        diag = np.where(parent.value &gt;= <span class="number">0.0</span>, <span class="number">0.0</span>, -<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> np.diag(diag.ravel())  </span><br><span class="line">    	<span class="comment"># ravel å‡½æ•°å°† å¤šç»´æ•°ç»„ æ‰å¹³åŒ–å±•å¼€</span></span><br><span class="line">        <span class="comment"># np.diag(array) ä¸­</span></span><br><span class="line">        <span class="comment"># arrayæ˜¯ä¸€ä¸ª1ç»´æ•°ç»„æ—¶ï¼Œç»“æœå½¢æˆä¸€ä¸ªä»¥ä¸€ç»´æ•°ç»„ä¸ºå¯¹è§’çº¿å…ƒç´ çš„çŸ©é˜µ</span></span><br><span class="line">        <span class="comment"># arrayæ˜¯ä¸€ä¸ªäºŒç»´çŸ©é˜µæ—¶ï¼Œç»“æœè¾“å‡ºçŸ©é˜µçš„å¯¹è§’çº¿å…ƒç´ </span></span><br></pre></td></tr></table></figure>
<h5 id="å®ç°å¯¹æ•°æŸå¤±ç±»">3ï¼‰å®ç°å¯¹æ•°æŸå¤±ç±»ï¼š</h5>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LogLoss</span>(<span class="title class_ inherited__">LossFunction</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">compute</span>(<span class="params">self</span>):  <span class="comment"># æ ¹æ®çˆ¶èŠ‚ç‚¹çš„å€¼ï¼Œè®¡ç®—è¯¥èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">assert</span> <span class="built_in">len</span>(self.parents) == <span class="number">1</span>  <span class="comment"># åªæ¥å—ä¸€ä¸ªçˆ¶èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">        x = self.parents[<span class="number">0</span>].value </span><br><span class="line"></span><br><span class="line">        self.value = np.log(<span class="number">1</span> + np.power(np.e, np.where(-x &gt; <span class="number">1e2</span>, <span class="number">1e2</span>, -x))) <span class="comment"># å¯¹äºçˆ¶èŠ‚ç‚¹çš„æ¯ä¸ªå…ƒç´ éƒ½ä¾æ®å…¬å¼è¿›è¡Œè¿ç®—ï¼Œä¸ºäº†é˜²æ­¢æº¢å‡ºï¼Œå¯¹æŒ‡æ•°è¿›è¡Œäº†æˆªæ–­</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_jacobi</span>(<span class="params">self, parent</span>): <span class="comment"># è®¡ç®—æœ¬èŠ‚ç‚¹å¯¹æŸä¸ªçˆ¶èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µ</span></span><br><span class="line"></span><br><span class="line">        x = parent.value</span><br><span class="line">        diag = -<span class="number">1</span> / (<span class="number">1</span> + np.power(np.e, np.where(x &gt; <span class="number">1e2</span>, <span class="number">1e2</span>, x))) <span class="comment"># é€šè¿‡è®¡ç®—å¯ä»¥å¾—åˆ°ï¼Œå…¶å®å°±æ˜¯å¯¹æ•°æŸå¤±çš„å¯¼æ•°ï¼Œæ”¾åœ¨å¯¹è§’çº¿çš„æ¯ä¸ªå…ƒç´ ä¸Š</span></span><br><span class="line">        <span class="keyword">return</span> np.diag(diag.ravel())</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="äºŒlogisticå‡½æ•°">äºŒã€Logisticå‡½æ•°</h3>
<h4 id="åŸç†åŠæ“ä½œ">1ã€åŸç†åŠæ“ä½œï¼š</h4>
<p><span class="math display">\[
Logistic(x) = \frac{1}{1 + e^{-x}}
\]</span></p>
<p><img src="https://bkimg.cdn.bcebos.com/pic/f3d3572c11dfa9ec71464f3e60d0f703918fc1ab?x-bce-process=image/watermark,image_d2F0ZXIvYmFpa2U4MA==,g_7,xp_5,yp_5/format,f_auto" style="zoom:50%;" /></p>
<p>â€‹ æˆ‘ä»¬å¯ä»¥å¯¹æ¨¡å‹çš„çº¿æ€§éƒ¨åˆ†æ–½åŠ è¿™ä¸ªå˜æ¢ï¼Œæ¥ä»£æ›¿åŸå…ˆçš„é˜¶è·ƒå‡½æ•°ã€‚</p>
<h4 id="logisticæ“ä½œèŠ‚ç‚¹å®ç°">2ã€Logisticæ“ä½œèŠ‚ç‚¹å®ç°ï¼š</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Logistic</span>(<span class="title class_ inherited__">Operator</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    å¯¹å‘é‡çš„åˆ†é‡æ–½åŠ Logisticå‡½æ•°</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">compute</span>(<span class="params">self</span>):</span><br><span class="line">        x = self.parents[<span class="number">0</span>].value</span><br><span class="line">        <span class="comment"># å¯¹çˆ¶èŠ‚ç‚¹çš„æ¯ä¸ªåˆ†é‡æ–½åŠ Logistic</span></span><br><span class="line">        self.value = np.mat(</span><br><span class="line">            <span class="number">1.0</span> / (<span class="number">1.0</span> + np.power(np.e, np.where(-x &gt; <span class="number">1e2</span>, <span class="number">1e2</span>, -x))))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_jacobi</span>(<span class="params">self, parent</span>):</span><br><span class="line">        <span class="keyword">return</span> np.diag(np.mat(np.multiply(self.value, <span class="number">1</span> - self.value)).A1)  <span class="comment"># è¿™ä¸ªè®¡ç®—ä¾èµ–äºLogisticå‡½æ•°å¯¹xçš„å¯¼æ•°ï¼Œåœ¨åŒ–ç®€åå…¶å®å°±ç­‰äº Logistic(x) * (1-Logistic(x))</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="ä¸‰é€»è¾‘å›å½’">ä¸‰ã€é€»è¾‘å›å½’ï¼š</h3>
<h4 id="äºŒåˆ†ç±»é€»è¾‘å›å½’">1ã€äºŒåˆ†ç±»é€»è¾‘å›å½’ï¼š</h4>
<p>â€‹
å½“æˆ‘ä»¬å°†å…ˆå‰çš„AdaLineæ¨¡å‹çš„é˜¶è·ƒå‡½æ•°æ›¿æ¢æˆLogisticå‡½æ•°ï¼Œå¾—åˆ°è¾“å‡ºã€‚å¹¶ä¸”å¯¹çº¿æ€§éƒ¨åˆ†æ–½åŠ å¯¹æ•°æŸå¤±ï¼Œå°±å¯ä»¥å¾—åˆ°é€»è¾‘å›å½’æ¨¡å‹ã€‚</p>
<p>â€‹
éœ€è¦æ³¨æ„çš„æ˜¯ï¼šç”±äºæˆ‘ä»¬çš„è®­ç»ƒé›†ç”·å¥³æ ‡ç­¾ä¸º1/-1ï¼Œä½†æ˜¯ä½¿ç”¨Logisticå‡½æ•°è¾“å‡ºçš„å€¼æ˜¯åœ¨0-1ä¹‹é—´çš„ï¼Œè¾“å‡ºçš„å†…å®¹æ˜¯æ­£ç±»ï¼ˆç”·æ€§ï¼‰çš„æ¦‚ç‡å€¼ï¼Œè€Œæ²¡æœ‰åˆ¤å®šæ ·æœ¬å…·ä½“çš„ç±»åˆ«ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä»¥0.5ä¸ºé˜ˆå€¼ï¼Œè¿›è¡Œåˆ¤å®šã€‚é˜ˆå€¼å¤§å°ä¹Ÿæ˜¯å¯ä»¥æ ¹æ®å…·ä½“æƒ…å†µè‡ªå®šä¹‰çš„ã€‚</p>
<p>â€‹
<strong>æ•…è€Œï¼ŒäºŒåˆ†ç±»é€»è¾‘å›å½’æ¨¡å‹åªæä¾›æ¦‚ç‡ï¼Œé€‰æ‹©é˜ˆå€¼çš„å†³å®šæƒè¿˜æ˜¯åœ¨äºº</strong></p>
<p>â€‹ <strong>æ€»ç»“</strong>ï¼š</p>
<p>â€‹ ç”¨Logisticå‡½æ•°ï¼Œå¾—åˆ°<strong>æœ€ç»ˆçš„æ¦‚ç‡å€¼è¾“å‡º</strong>ã€‚</p>
<p>â€‹ å¯¹çº¿æ€§éƒ¨åˆ†æ–½åŠ <strong>å¯¹æ•°æŸå¤±ï¼Œä»¥ç”¨äºè®­ç»ƒ</strong>ã€‚</p>
<h4 id="å¤šåˆ†ç±»é€»è¾‘å›å½’">2ã€å¤šåˆ†ç±»é€»è¾‘å›å½’ï¼š</h4>
<p>â€‹
æˆ‘ä»¬ä¸€èˆ¬é‡‡ç”¨SoftMaxæ¥ä»£æ›¿â€œç¡¬â€çš„Maxå‡½æ•°ï¼Œå°†æ‰€æœ‰å€¼å½’çº¦è‡³0-1ä¹‹é—´ï¼Œè¿›è€Œè¿›è¡Œæ¦‚ç‡å€¼çš„è¾“å‡º</p>
<h5 id="softmaxèŠ‚ç‚¹å®ç°">SoftMaxèŠ‚ç‚¹å®ç°ï¼š</h5>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SoftMax</span>(<span class="title class_ inherited__">Operator</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    SoftMaxå‡½æ•°</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">softmax</span>(<span class="params">a</span>):</span><br><span class="line">        a[a &gt; <span class="number">1e2</span>] = <span class="number">1e2</span>  <span class="comment"># é˜²æ­¢æŒ‡æ•°è¿‡å¤§</span></span><br><span class="line">        ep = np.power(np.e, a)</span><br><span class="line">        <span class="keyword">return</span> ep / np.<span class="built_in">sum</span>(ep)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">compute</span>(<span class="params">self</span>):</span><br><span class="line">        self.value = SoftMax.softmax(self.parents[<span class="number">0</span>].value)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_jacobi</span>(<span class="params">self, parent</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        æˆ‘ä»¬ä¸å®ç°SoftMaxèŠ‚ç‚¹çš„get_jacobiå‡½æ•°ï¼Œ        è®­ç»ƒæ—¶ï¼Œä¸ä¼šé€šè¿‡SoftMaxèŠ‚ç‚¹è¿›è¡Œåå‘ä¼ æ’­</span></span><br><span class="line"><span class="string">        è®­ç»ƒæ—¶ä½¿ç”¨CrossEntropyWithSoftMaxèŠ‚ç‚¹</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError(<span class="string">&quot;Don&#x27;t use SoftMax&#x27;s get_jacobi&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>â€‹
ä¸€èˆ¬ä½¿ç”¨äº¤å‰ç†µï¼Œæ¥è¡¡é‡SoftMaxè¾“å‡ºçš„åˆ†å¸ƒï¼Œä¸çœŸå®æ ‡ç­¾çš„åˆ†å¸ƒæ˜¯å¦ç›¸ä¼¼ï¼Œå…·ä½“çš„å…¬å¼è§å¸¸è§çš„æŸå¤±å‡½æ•°ç« èŠ‚ã€‚</p>
<figure>
<img
src="https://www.zhihu.com/equation?tex=H%28p%2Cq%29%3D-%5Csum_%7Bi%3D1%7D%5Enp%28x_i%29log%28q%28x_i%29%29"
alt="[å…¬å¼]" />
<figcaption aria-hidden="true">[å…¬å¼]</figcaption>
</figure>
<p>â€‹ <span class="math inline">\(q(x_i)\)</span>æ˜¯é¢„æµ‹åˆ†å¸ƒï¼Œ<span
class="math inline">\(p(x_i)\)</span>æ˜¯æ ‡ç­¾çš„åˆ†å¸ƒã€‚äº¤å‰ç†µæ˜¯ç¬¦åˆç›´è§‰å¾—ï¼Œå½“æ ·æœ¬å±äºç¬¬iç±»çš„æ—¶å€™ï¼Œåªæœ‰<span
class="math inline">\(p(x_i)\)</span>ä¸º1ï¼Œå…¶ä»–pçš„åˆ†é‡éƒ½ä¸º0ï¼Œæœ€å°åŒ–äº¤å‰ç†µå‡½æ•°ï¼Œå…¶å®å°±æ˜¯åœ¨æœ€å¤§åŒ–<span
class="math inline">\(log(q(x_i))\)</span>è¿™ä¸€é¡¹çš„å€¼ï¼Œä¹Ÿå°±æ˜¯åœ¨æœ€å¤§åŒ–<span
class="math inline">\(q(x_i)\)</span>ï¼ŒåŠæœ€å¤§åŒ–æ¨¡å‹è¾“å‡ºçš„ç¬¬iç±»æ¦‚ç‡ã€‚</p>
<h5 id="crossentropywithsoftmax-å®ç°">CrossEntropyWithSoftMax
å®ç°ï¼š</h5>
<p>â€‹
åœ¨ä¸Šé¢å®ç°SoftmaxèŠ‚ç‚¹çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰å®ç°get_jacobiæ–¹æ³•ï¼ŒåŸå› å°±æ˜¯å®ƒçš„è¾“å‡ºä¼šå’Œç‹¬çƒ­å‘é‡ä¸€èµ·è¢«é€ç»™äº¤å‰ç†µã€‚è®¡ç®—äº¤å‰ç†µå¯¹äºçº¿æ€§éƒ¨åˆ†çš„é›…å¯æ¯”çŸ©é˜µï¼Œæ¯”è®¡ç®—å¯¹Softmaxè¾“å‡ºçš„é›…å¯æ¯”çŸ©é˜µä¼šæ›´å®¹æ˜“ã€‚Pytorchæ¡†æ¶ä¸­ä¹Ÿæ˜¯è¿™ä¹ˆå¹²çš„ã€‚å°†Softmaxæ“ä½œé™„åœ¨äº†CrossEntropyæŸå¤±å‡½æ•°ä¸­ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CrossEntropyWithSoftMax</span>(<span class="title class_ inherited__">LossFunction</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    å¯¹ç¬¬ä¸€ä¸ªçˆ¶èŠ‚ç‚¹æ–½åŠ SoftMaxä¹‹åï¼Œå†ä»¥ç¬¬äºŒä¸ªçˆ¶èŠ‚ç‚¹ä¸ºæ ‡ç­¾One-Hotå‘é‡è®¡ç®—äº¤å‰ç†µ</span></span><br><span class="line"><span class="string">    self.parents[0] ä¸ºlogitå‘é‡ï¼Œä¹Ÿå°±æ˜¯çº¿æ€§éƒ¨åˆ†</span></span><br><span class="line"><span class="string">    self.parents[1] ä¸ºOne-Hotç¼–ç çš„å‘é‡æ ‡ç­¾</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">compute</span>(<span class="params">self</span>):</span><br><span class="line">        prob = SoftMax.softmax(self.parents[<span class="number">0</span>].value)      </span><br><span class="line">        self.value = np.mat(</span><br><span class="line">            -np.<span class="built_in">sum</span>(np.multiply(self.parents[<span class="number">1</span>].value, np.log(prob + <span class="number">1e-10</span>))))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_jacobi</span>(<span class="params">self, parent</span>):</span><br><span class="line">        <span class="comment"># è¿™é‡Œå­˜åœ¨é‡å¤è®¡ç®—ï¼Œä½†ä¸ºäº†ä»£ç æ¸…æ™°ç®€æ´ï¼Œèˆå¼ƒè¿›ä¸€æ­¥ä¼˜åŒ–</span></span><br><span class="line">        <span class="comment"># æ¨å¯¼è§ä¸‹ï¼Œå‚è€ƒã€Šç”¨Pythonå®ç°æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‹</span></span><br><span class="line">        prob = SoftMax.softmax(self.parents[<span class="number">0</span>].value)</span><br><span class="line">        <span class="keyword">if</span> parent <span class="keyword">is</span> self.parents[<span class="number">0</span>]:</span><br><span class="line">            <span class="keyword">return</span> (prob - self.parents[<span class="number">1</span>].value).T</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> (-np.log(prob)).T</span><br></pre></td></tr></table></figure>
<h4
id="å¸¦äº¤å‰ç†µçš„å¤šåˆ†ç±»é€»è¾‘å›å½’è®¡ç®—å›¾ç¤ºä¾‹">3ã€å¸¦äº¤å‰ç†µçš„å¤šåˆ†ç±»é€»è¾‘å›å½’è®¡ç®—å›¾ç¤ºä¾‹ï¼š</h4>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/654F54B060F55AD5E7433929CC7A48B3.jpg" style="zoom: 25%;" /></p>
<p>â€‹</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
        <category>Pythonæ­å»ºç®€æ˜“æ¡†æ¶ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Framework</tag>
      </tags>
  </entry>
  <entry>
    <title>ML2021è¯¾ç¨‹ç³»åˆ—ç¬”è®°4â€”â€”æµ·æ£®çŸ©é˜µè®¡ç®—ï¼ˆè¯¾ç¨‹ä½œä¸šï¼‰</title>
    <url>/2021/12/23/9bb28e693fc9/</url>
    <content><![CDATA[<h3
id="hung-yi-lee-æå®æ¯…-machine-learning-2021-springè¯¾ç¨‹-hw2.2ç¬”è®°">Hung-yi
Lee (æå®æ¯…) MACHINE LEARNING 2021 SPRINGè¯¾ç¨‹ HW2.2ç¬”è®°</h3>
<p>â€‹
https://link.zhihu.com/?target=https%3A//speech.ee.ntu.edu.tw/~hylee/ml/2021-spring.html</p>
<p>â€‹ å…ˆç»™å‡ºè¯¾ç¨‹ä¸­åŠ©æ•™æä¾›çš„ä»£ç é“¾æ¥ï¼š</p>
<p>â€‹
https://colab.research.google.com/github/ga642381/ML2021-Spring/blob/main/HW02/HW02-2.ipynb</p>
<p>â€‹
å…ˆå‰åœ¨ç³»åˆ—ç¬”è®°2ä¸­â€”â€”æœºå™¨å­¦ä¹ ä»»åŠ¡æ”»ç•¥ç¬”è®°ä¸­ï¼Œå·²ç»æåŠäº†åœ¨æ•°å­¦ç†è®ºä¸Šï¼Œå½“æˆ‘ä»¬è®­ç»ƒä¸ä¸‹å»çš„æ—¶å€™ï¼Œå¦‚ä½•åˆ†è¾¨æ˜¯è¾¾åˆ°äº†ä¸€ä¸ªLocal
Minimalè¿˜æ˜¯ä¸€ä¸ªSaddle Pointã€‚</p>
<p>â€‹ https://zhuanlan.zhihu.com/p/447280599</p>
<p>â€‹
æ­¤ç¯‡ç¬”è®°ä»å®é™…çš„è§’åº¦è¿›è¡Œè®°å½•ï¼Œé€šè¿‡ä¸€ä¸ªå®ä¾‹ï¼Œè®²è§£å¦‚ä½•å»è¿›è¡Œåˆ†è¾¨ï¼Œæ•´ç†å‡ºçš„è¿™ä¸ªæ¡†æ¶åœ¨ä»Šåå¦‚æœé‡åˆ°äº†è®­ç»ƒä¸ä¸‹å»çš„æ—¶å€™ï¼Œå¯ä»¥é‡‡ç”¨æ­¤è®¡ç®—ï¼Œåˆ†è¾¨åˆ°åº•æ˜¯ç¢°åˆ°äº†ä½•ç§æƒ…å†µï¼š</p>
<p>â€‹
é¦–å…ˆï¼Œåœ¨å®é™…çš„è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¾ˆéš¾æ‰¾åˆ°æ¢¯åº¦ä¸º0çš„ç‚¹ï¼Œå¹¶ä¸”ä¹Ÿå¾ˆéš¾æ‰¾åˆ°ä¸€ä¸ªçœŸæ­£çš„Local
Minimalï¼ˆä¹Ÿå°±æ˜¯æµ·æ£®çŸ©é˜µç‰¹å¾å€¼å…¨å¤§äº0ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆéœ€è¦åšä¸€äº›è¿‘ä¼¼ï¼š</p>
<ul>
<li><p>æˆ‘ä»¬å°†gradientå°äº1^-3å³è§†ä¸ºè¿‘ä¼¼ä¸º0</p></li>
<li><p>å¦‚æœminimum ratio å¤§äº0.5 ä¸” gradient å°äº 1^-3
ï¼Œæˆ‘ä»¬å³è®¤ä¸ºå…¶ä¸ºä¸€ä¸ªLocal Minimalã€‚</p></li>
<li><p>é™„ï¼š Minimum ratio = æµ·æ£®çŸ©é˜µçš„æ‰€æœ‰ç‰¹å¾å€¼ä¸­æ­£çš„ç‰¹å¾å€¼çš„æ•°é‡ /
æµ·æ£®çŸ©é˜µçš„æ‰€æœ‰ç‰¹å¾å€¼çš„æ•°é‡</p></li>
</ul>
<p>â€‹
ç„¶åå°±å¼€å§‹é€šè¿‡ä»£ç æ¥å®ç°è®¡ç®—è¿‡ç¨‹ï¼šé¦–å…ˆæˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªç”¨æ¥ä½œä¸ºç¤ºä¾‹çš„ç½‘ç»œå’Œè®­ç»ƒç‚¹,è¿™ä¸ªåœ¨åŠ©æ•™ç»™çš„ä»£ç ä¸­å·²ç»å‡†å¤‡å¥½äº†ï¼Œæˆ‘æ­¤å¤„æŠŠé‡è¦çš„ä¸œè¥¿æŠ½å‡ºæ¥è®°å½•</p>
<h4 id="step1-å®šä¹‰ä¸€ä¸ªç®€å•çš„æ¨¡å‹">Step1: å®šä¹‰ä¸€ä¸ªç®€å•çš„æ¨¡å‹</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MathRegressor</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num_hidden=<span class="number">128</span></span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self.regressor = nn.Sequential(</span><br><span class="line">            nn.Linear(<span class="number">1</span>, num_hidden),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(num_hidden, <span class="number">1</span>)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = self.regressor(x)</span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<h4
id="step2-åŠ è½½å±äºè¯¥æ¨¡å‹çš„é¢„å…ˆå‡†å¤‡å¥½çš„æŸè®­ç»ƒç‚¹ä»¥åŠç”¨äºè®­ç»ƒçš„æ•°æ®å’Œæ ‡ç­¾">Step2:
åŠ è½½å±äºè¯¥æ¨¡å‹çš„é¢„å…ˆå‡†å¤‡å¥½çš„æŸè®­ç»ƒç‚¹ä»¥åŠç”¨äºè®­ç»ƒçš„æ•°æ®å’Œæ ‡ç­¾</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = MathRegressor()</span><br><span class="line">model.load_state_dict(<span class="string">&#x27;xxxx&#x27;</span>)  <span class="comment"># xxxxä¸ºäº‹å…ˆå‡†å¤‡å¥½çš„è®­ç»ƒåˆ°æŸä¸€ä¸ªç‚¹çš„æ¨¡å‹æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">train = Tensor([[<span class="number">0.2400</span>],  <span class="comment"># ç„¶åfeatureå’Œtarget(label)ä¹ŸåŠ è½½è¿›æ¥</span></span><br><span class="line">        [<span class="number">0.2500</span>],</span><br><span class="line">        [<span class="number">0.2600</span>],</span><br><span class="line">        [<span class="number">0.2700</span>],</span><br><span class="line">        [<span class="number">0.2800</span>],</span><br><span class="line">        [<span class="number">0.2900</span>]])</span><br><span class="line">target = Tensor([[-<span class="number">0.1559</span>],</span><br><span class="line">        [-<span class="number">0.1801</span>],</span><br><span class="line">        [-<span class="number">0.1981</span>],</span><br><span class="line">        [-<span class="number">0.2101</span>],</span><br><span class="line">        [-<span class="number">0.2162</span>],</span><br><span class="line">        [-<span class="number">0.2168</span>]])</span><br></pre></td></tr></table></figure>
<h4 id="step3-å®šä¹‰è®¡ç®—è¯¥è®­ç»ƒè¿›åº¦å½“å‰æ‰€åœ¨ä½ç½®losså‡½æ•°çš„æ¢¯åº¦">Step3:
å®šä¹‰è®¡ç®—è¯¥è®­ç»ƒè¿›åº¦å½“å‰æ‰€åœ¨ä½ç½®Losså‡½æ•°çš„æ¢¯åº¦</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># function to compute gradient norm</span></span><br><span class="line"><span class="comment"># model ä»£è¡¨æ¨¡å‹å®ä¾‹ ï¼Œä¾‹å¦‚ä¸º MathRegressor()</span></span><br><span class="line"><span class="comment"># criterionä¸ºæŸå¤±å‡½æ•°,ä¾‹å¦‚ä¸º nn.MSELoss()</span></span><br><span class="line"><span class="comment"># train ä¸ºè®­ç»ƒæ•°æ®feature è§ä¸Š</span></span><br><span class="line"><span class="comment"># targetä¸ºè®­ç»ƒæ•°æ®label è§ä¸Š</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">compute_gradient_norm</span>(<span class="params">model, criterion, train, target</span>):</span><br><span class="line">    model.train()</span><br><span class="line">    model.zero_grad()</span><br><span class="line">    output = model(train)</span><br><span class="line">    loss = criterion(output, target)</span><br><span class="line">    loss.backward()  <span class="comment"># é€šè¿‡åå‘ä¼ æ’­è®¡ç®—è¯¥ç‚¹æ¢¯åº¦</span></span><br><span class="line"></span><br><span class="line">    grads = []</span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> model.regressor.children():</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(p, nn.Linear):</span><br><span class="line">            param_norm = p.weight.grad.norm(<span class="number">2</span>).item()</span><br><span class="line">            grads.append(param_norm)</span><br><span class="line">		</span><br><span class="line">    grad_mean = np.mean(grads) <span class="comment"># compute mean of gradient norms</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> grad_mean</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">å¯¹äºå†…å®¹çš„ä¸€äº›æ³¨è§£ï¼š</span></span><br><span class="line"><span class="string">	å‰åŠéƒ¨åˆ†æ¯”è¾ƒå¥½ç†è§£ï¼Œå°±æ˜¯åšäº†å‰å‘è®¡ç®—ä»¥åï¼Œç„¶åé€šè¿‡åå‘ä¼ æ’­è®¡ç®—æ¢¯åº¦</span></span><br><span class="line"><span class="string">	ååŠéƒ¨åˆ†ï¼Œå…¶å®æ˜¯å¯¹æ‰€æœ‰çš„å±‚çš„å‚æ•°çš„æ¢¯åº¦åšäº†ä¸€ä¸ªå¹³å‡çš„è®¡ç®—ï¼š</span></span><br><span class="line"><span class="string">	1ã€model.regressor è¾“å‡ºçš„å†…å®¹å¦‚ä¸‹</span></span><br><span class="line"><span class="string">    Sequential(</span></span><br><span class="line"><span class="string">      (0): Linear(in_features=1, out_features=128, bias=True)</span></span><br><span class="line"><span class="string">      (1): ReLU()</span></span><br><span class="line"><span class="string">      (2): Linear(in_features=128, out_features=1, bias=True)</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">	2ã€ä»£ç ä¸­çš„påœ¨ä¸‰æ¬¡å¾ªç¯ä¸­åˆ†åˆ«ä¸ºï¼š</span></span><br><span class="line"><span class="string">    ç¬¬ä¸€éå¾ªç¯ï¼šLinear(in_features=1, out_features=128, bias=True)</span></span><br><span class="line"><span class="string">    ç¬¬äºŒéå¾ªç¯ï¼šReLU()</span></span><br><span class="line"><span class="string">    ç¬¬ä¸‰éå¾ªç¯ï¼šLinear(in_features=128, out_features=1, bias=True)</span></span><br><span class="line"><span class="string">    æ•…è€Œæˆ‘ä»¬çŸ¥é“ for p é‚£ä¸ªå¾ªç¯å…¶å®å°±æ˜¯åœ¨ï¼š å¦‚æœè¯¥å±‚æ˜¯å…¨è¿æ¥å±‚ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦è®¡ç®—æ‰€æœ‰æƒé‡å‚æ•°çš„æ¢¯åº¦ï¼Œå¦‚æœä¸æ˜¯ï¼ˆè¨€å¤–ä¹‹æ„æ˜¯å¦‚æœæ˜¯ReLUå±‚ï¼Œå› ä¸ºReLUå±‚æ˜¯æ¿€æ´»å‡½æ•°ï¼Œæ— æƒé‡å‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦è€ƒè™‘ï¼‰ã€‚æ‰€ä»¥éœ€è¦æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦è®¡ç®—çš„æ¨¡å‹æ˜¯ä¸€ä¸ªå«æœ‰é™¤äº†Linearä»¥å¤–çš„ å¸¦æƒé‡å‚æ•°çš„ç½‘ç»œæ¨¡å‹ï¼Œè¿™ä¸ªåœ°æ–¹å°±è¦æœ‰æ‰€æ›´æ”¹äº†</span></span><br><span class="line"><span class="string">  3ã€å¦‚æœpæ˜¯Linearå±‚ï¼Œåº”å½“å¦‚ä½•è®¡ç®—ï¼š</span></span><br><span class="line"><span class="string">  	p.weight æ˜¯ä¸€ä¸ªTensorï¼Œä¸ºæ‰€æœ‰çš„æƒé‡å‚æ•°</span></span><br><span class="line"><span class="string">  	p.weight.grad æ˜¯ä¸€ä¸ªTensorï¼Œä¸ºæ‰€æœ‰çš„æƒé‡å‚æ•°å¯¹åº”å½“å‰ç‚¹çš„å¯¼æ•°ï¼ˆæ¢¯åº¦ï¼‰</span></span><br><span class="line"><span class="string">  	p.weight.grad.norm(2) æ˜¯ä¸€ä¸ªä»…æœ‰ä¸€ä¸ªå…ƒç´ çš„Tensorï¼Œè®¡ç®—äº†å…ˆå‰çš„Tensorçš„äºŒé˜¶èŒƒå¼ï¼Œå…¶å®å°±æ˜¯å¹³æ–¹å’Œå¼€æ›´å·ã€‚</span></span><br><span class="line"><span class="string">    p.weight.grad.norm(2).item() æ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œå³ä»Tensorä¸­å–å‡ºæ•°å€¼æ¥ã€‚</span></span><br><span class="line"><span class="string">    æœ€åå°†è¯¥å±‚çš„ æ¢¯åº¦çš„äºŒé˜¶èŒƒå¼ append è‡³ gradsæ•°ç»„ä¸­</span></span><br><span class="line"><span class="string">  4ã€æœ€åè¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</span></span><br><span class="line"><span class="string">  	æœ€ågradsä¸­æœ‰ nä¸ªå…ƒç´ ï¼Œnä¸ºæ‰€æœ‰å¸¦æƒé‡å‚æ•°çš„å±‚çš„ä¸ªæ•°ï¼ˆç¤ºä¾‹ä¸­çš„ç½‘ç»œä¸º2ä¸ªï¼‰ï¼Œç„¶ååœ¨ç”¨np.meanè®¡ç®—å³å¾—åˆ°æœ€åçš„è¿”å›å€¼ï¼Œå³æ‰€æœ‰å±‚çš„æ¢¯åº¦çš„å¹³å‡å€¼ã€‚</span></span><br><span class="line"><span class="string">  	</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<h4 id="step4-è®¡ç®—hession-çŸ©é˜µ">Step4: è®¡ç®—Hession çŸ©é˜µ</h4>
<p>https://github.com/cybertronai/autograd-lib</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æˆ‘ä»¬ä½¿ç”¨autograd-lib è¿™ä¸ªpythonåº“è®¡ç®—HessionçŸ©é˜µ</span></span><br><span class="line">pip install autograd-lib</span><br><span class="line"><span class="comment"># åœ¨githubçš„é“¾æ¥ä¸­ï¼Œä½œè€…ç»™å‡ºäº†HessiançŸ©é˜µçš„è®¡ç®—ç¤ºä¾‹ï¼Œå…¶ä½¿ç”¨çš„æ˜¯é«˜æ–¯ç‰›é¡¿æ³•ï¼Œæˆ‘ä»¬åœ¨æ­¤ä¸è¿›è¡Œèµ˜è¿°ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹githubé“¾æ¥çš„è®¡ç®—æºç ã€‚</span></span><br><span class="line"><span class="comment"># ä»¥ä¸‹æ˜¯ä¸¤ä¸ªä¾èµ–å‡½æ•°ï¼Œä¸‹é¢ç”¨å¾—åˆ°ï¼Œä¹Ÿæ˜¯githubæºç ä¸­ç»™å‡ºçš„</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save_activations</span>(<span class="params">layer, A, _</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    A is the input of the layer, we use batch size of 6 here</span></span><br><span class="line"><span class="string">    layer 1: A has size of (6, 1)</span></span><br><span class="line"><span class="string">    layer 2: A has size of (6, 128)</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    activations[layer] = A</span><br><span class="line"></span><br><span class="line"><span class="comment"># helper function to compute Hessian matrix</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">compute_hess</span>(<span class="params">layer, _, B</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    B is the backprop value of the layer</span></span><br><span class="line"><span class="string">    layer 1: B has size of (6, 128)</span></span><br><span class="line"><span class="string">    layer 2: B ahs size of (6, 1)</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    A = activations[layer]</span><br><span class="line">    BA = torch.einsum(<span class="string">&#x27;nl,ni-&gt;nli&#x27;</span>, B, A) <span class="comment"># do batch-wise outer product</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># full Hessian</span></span><br><span class="line">    hess[layer] += torch.einsum(<span class="string">&#x27;nli,nkj-&gt;likj&#x27;</span>, BA, BA) <span class="comment"># do batch-wise outer product, then sum over the batch</span></span><br></pre></td></tr></table></figure>
<h4 id="step5-è®¡ç®—minimal-ratio">Step5: è®¡ç®—Minimal Ratio</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># function to compute the minimum ratio</span></span><br><span class="line"><span class="comment"># model ä»£è¡¨æ¨¡å‹å®ä¾‹ ï¼Œä¾‹å¦‚ä¸º MathRegressor()</span></span><br><span class="line"><span class="comment"># criterionä¸ºæŸå¤±å‡½æ•°,ä¾‹å¦‚ä¸º nn.MSELoss()</span></span><br><span class="line"><span class="comment"># train ä¸ºè®­ç»ƒæ•°æ®feature è§ä¸Š</span></span><br><span class="line"><span class="comment"># targetä¸ºè®­ç»ƒæ•°æ®label è§ä¸Š</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">compute_minimum_ratio</span>(<span class="params">model, criterion, train, target</span>):</span><br><span class="line">    model.zero_grad() </span><br><span class="line">    <span class="comment"># 1ã€è®¡ç®—HessiançŸ©é˜µ</span></span><br><span class="line">    <span class="keyword">with</span> autograd_lib.module_hook(save_activations):</span><br><span class="line">        output = model(train)</span><br><span class="line">        loss = criterion(output, target)</span><br><span class="line">    <span class="keyword">with</span> autograd_lib.module_hook(compute_hess):</span><br><span class="line">        autograd_lib.backward_hessian(output, loss=<span class="string">&#x27;LeastSquares&#x27;</span>)</span><br><span class="line">		</span><br><span class="line">    layer_hess = <span class="built_in">list</span>(hess.values())</span><br><span class="line">    <span class="comment"># 2ã€è®¡ç®—minimum_ratio</span></span><br><span class="line">    minimum_ratio = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> h <span class="keyword">in</span> layer_hess:</span><br><span class="line">        size = h.shape[<span class="number">0</span>] * h.shape[<span class="number">1</span>]</span><br><span class="line">        h = h.reshape(size, size)</span><br><span class="line">        h_eig = torch.symeig(h).eigenvalues </span><br><span class="line">        <span class="comment"># torch.symeig() returns eigenvalues and eigenvectors of a real symmetric matrix</span></span><br><span class="line">        num_greater = torch.<span class="built_in">sum</span>(h_eig &gt; <span class="number">0</span>).item()</span><br><span class="line">        minimum_ratio.append(num_greater / <span class="built_in">len</span>(h_eig))</span><br><span class="line"></span><br><span class="line">    ratio_mean = np.mean(minimum_ratio) <span class="comment"># compute mean of minimum ratio</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ratio_mean</span><br><span class="line">  </span><br><span class="line">activations = defaultdict(<span class="built_in">int</span>)</span><br><span class="line">hess = defaultdict(<span class="built_in">float</span>)</span><br><span class="line">gradient_norm = compute_gradient_norm(model, criterion, train, target)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">	åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæœ‰äº›è®¸éƒ¨åˆ†ä¸ç†è®ºä¸åŒã€‚ä»£ç å®ç°ä¸­æ˜¯åˆ†å±‚è®¡ç®—æµ·æ£®çŸ©é˜µçš„ï¼Œå³é’ˆå¯¹äºç¥ç»ç½‘ç»œçš„æ¯ä¸ªå±‚è®¡ç®—æµ·æ£®çŸ©é˜µï¼Œè€Œåå†æ±‚è§£ç‰¹å¾å€¼ã€‚ç„¶åå°†æ¯å±‚çš„ç»“æœåšä¸€ä¸ªå¹³å‡ã€‚è€Œç†è®ºä¸Šï¼Œåº”å½“è®¡ç®—ä¸€ä¸ªæ‰€æœ‰å‚æ•°çš„å¤§çš„æµ·æ£®çŸ©é˜µï¼Œå¯¹å…¶æ±‚è§£ç‰¹å¾å€¼ã€‚</span></span><br><span class="line"><span class="string">	å³åœ¨ä¸Šè¿°çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬åŸæœ¬åº”è¯¥å¾—åˆ°ä¸€ä¸ª256*256çš„æµ·æ£®çŸ©é˜µï¼Œä½†å®é™…ä¸Šå¾—åˆ°äº†2ä¸ª128*128çš„æµ·æ£®çŸ©é˜µï¼Œå¹¶ä¸”åº”å½“æ˜¯ç†è®ºä¸Š256*256æµ·æ£®çŸ©é˜µçš„å·¦ä¸Šè§’éƒ¨åˆ†ä¸å³ä¸‹è§’éƒ¨åˆ†ã€‚å³ä¸‹è¿°æ‰€ç¤ºçš„Aå’ŒBï¼Œå‰©ä¸‹çš„ä¸¤å—çš„ï¼Ÿæ˜¯Lå¯¹ä¸¤å±‚å‚æ•°äº¤å‰æ±‚å¾®åˆ†çš„éƒ¨åˆ†ï¼Œæ²¡æœ‰è®¡ç®—ã€‚</span></span><br><span class="line"><span class="string">	                              [ A   ? ]</span></span><br><span class="line"><span class="string">	                              [ ?   B ]</span></span><br><span class="line"><span class="string">	å¦‚æ­¤åšçš„åŸå› æˆ‘æ€ç´¢äº†å¾ˆä¹…ä¹Ÿæ²¡æœ‰å¾—å‡ºä¸€ä¸ªç»“è®ºï¼Œæœ‰ä¸¤ä¸ªåˆç†çš„å¯èƒ½çŒœæµ‹ï¼š</span></span><br><span class="line"><span class="string">		å¯èƒ½1:å®Œæ•´çš„æµ·æ£®çŸ©é˜µè®¡ç®—éš¾åº¦è¿‡å¤§ï¼Œæ•…è€Œæˆ‘ä»¬å•ç‹¬è®¡ç®—Lå¯¹æ¯ä¸€å±‚å‚æ•°çš„æµ·æ£®çŸ©é˜µï¼Œæ¥ä½œä¸ºè¿‘ä¼¼ã€‚</span></span><br><span class="line"><span class="string">		å¯èƒ½2:ç”±äºæŸäº›æ€§è´¨ï¼Œå‰©ä¸‹çš„æ²¡æœ‰è®¡ç®—çš„ä¸¤å—çš„å€¼ï¼Œä¸ä¼šå½±å“æœ€ç»ˆåˆ¤å®šæµ·æ£®çŸ©é˜µæ˜¯å¦æ­£å®šçš„ç»“æœï¼Œä½†æ˜¯æˆ‘å¹¶æ²¡æœ‰å®é™…è¿›è¡Œè¯å®ã€‚</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>ML2021è¯¾ç¨‹ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
      </tags>
  </entry>
  <entry>
    <title>ML2021è¯¾ç¨‹ç³»åˆ—ç¬”è®°3â€”â€”å·ç§¯ç¥ç»ç½‘ç»œCNN</title>
    <url>/2021/12/20/cedd3c9597c5/</url>
    <content><![CDATA[<h3
id="hung-yi-lee-æå®æ¯…-machine-learning-2021-springè¯¾ç¨‹-week3ç¬”è®°">Hung-yi
Lee (æå®æ¯…) MACHINE LEARNING 2021 SPRINGè¯¾ç¨‹ Week3ç¬”è®°</h3>
<p>###
è¯¾ç¨‹é“¾æ¥ï¼šhttps://speech.ee.ntu.edu.tw/~hylee/ml/2021-spring.html</p>
<p>â€‹
è¯¥ç¯‡è®°å½•äº†ä¸€ä¸ªç”¨äºå½±åƒå¤„ç†çš„éå¸¸ç»å…¸çš„ç½‘ç»œæ¶æ„ï¼šCNNç½‘ç»œï¼Œå…¶ä¸­ä¹ŸæåŠäº†å¦‚ä½•è®¾è®¡ç½‘ç»œæ¶æ„èƒ½å¤Ÿæ›´å¥½çš„ä¸ºæˆ‘ä»¬çš„æœºå™¨å­¦ä¹ ä»»åŠ¡ç›®æ ‡è¿›è¡ŒæœåŠ¡ã€‚</p>
<h2 id="ä¸€ä»neuron-versionè§’åº¦æ¥ä»‹ç»cnn">ä¸€ã€ä»Neuron
Versionè§’åº¦æ¥ä»‹ç»CNN</h2>
<p>â€‹
æˆ‘ä»¬å¦‚æœä½¿ç”¨å…¨è¿æ¥ç½‘ç»œæ¥è¿›è¡Œå½±åƒå¤„ç†çš„è¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å…ˆå°†ä¸€å¼ 100*100çš„3é€šé“RGBå›¾åƒå±•å¹³ï¼Œç„¶åå°†å±•å¹³åçš„å‘é‡ä½œä¸ºå…¨è¿æ¥å±‚çš„è¾“å…¥ï¼Œå‡è®¾ç¬¬ä¸€ä¸ªéšè—å±‚æœ‰1000ä¸ªç¥ç»Ã¥å…ƒï¼Œé‚£ä¹ˆç¬¬ä¸€å±‚çš„å‚æ•°å°±éœ€è¦æœ‰<span
class="math inline">\(310^7\)</span>ä¸ªï¼Œéå¸¸çš„å¤šã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114114729143.png" alt="image-20220114114729143" style="zoom:20%;" /></p>
<p>â€‹
æ‰€ä»¥è€ƒè™‘åˆ°å½±åƒæœ¬èº«çš„ç‰¹æ€§ï¼Œå…¶å®æˆ‘ä»¬å¹¶ä¸éœ€è¦è®©æ¯ä¸€ä¸ªneuralå’Œæ¯ä¸€ä¸ªåƒç´ ä¹‹é—´éƒ½æœ‰æƒé‡çš„è”ç³»å…³ç³»ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åŸºäºå½±åƒçš„ç‰¹ç‚¹ï¼Œæå‡ºä¸€ä¸ªé€‚ç”¨äºå½±åƒå¤„ç†çš„æ¶æ„CNNï¼š</p>
<p>â€‹ é¦–å…ˆæˆ‘ä»¬æå‡ºå¦‚ä¸‹çš„è§‚å¯Ÿï¼š</p>
<h3 id="è§‚å¯Ÿ1">è§‚å¯Ÿ1ï¼š</h3>
<p>â€‹
æˆ‘ä»¬è¾¨è¯†å½±å“å¾€å¾€æ˜¯é€šè¿‡å½±å“ä¸­çš„ä¸€äº›é‡è¦çš„éƒ¨åˆ†ï¼ˆPatternï¼‰æ¥åšå‡ºåˆ¤æ–­çš„ï¼Œæ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬è¦åˆ¤æ–­ä¸€å¼ å›¾ç‰‡ä¸­æ˜¯ä¸æ˜¯å«æœ‰é¸Ÿï¼Œæˆ‘ä»¬å¾€å¾€å¯èƒ½ä¼šåˆ¤æ–­è¯´æœ‰æ²¡æœ‰é¸Ÿå˜´ã€æœ‰æ²¡æœ‰é¸Ÿçœ¼ç›ã€æœ‰æ²¡æœ‰é¸Ÿçˆªå­ç­‰ç­‰é‡è¦çš„é¸Ÿçš„ç»„æˆéƒ¨åˆ†ã€‚è¿™æ ·çš„è¯å‘¢ï¼Œæˆ‘ä»¬å…¶å®ä¼šå‘ç°ï¼Œæˆ‘ä»¬åªè¦è®­ç»ƒç½‘ç»œå»è§‚å¯Ÿè¿™äº›é‡è¦çš„ç»„æˆéƒ¨åˆ†å°±å¯ä»¥äº†ï¼Œè€Œè¿™äº›ç»„æˆéƒ¨åˆ†å¾€å¾€æ˜¯å›¾ç‰‡çš„ä¸€å°éƒ¨åˆ†ï¼Œæ‰€ä»¥å¹¶ä¸éœ€è¦æ¯ä¸€ä¸ªç¥ç»å…ƒéƒ½å»è§‚å¯Ÿæ•´å¼ å›¾ç‰‡çš„ä¿¡æ¯ï¼ˆFCç½‘ç»œç”±äºæ¯ä¸ªç¥ç»å…ƒéƒ½å’Œæ‰€æœ‰çš„è¾“å…¥åƒç´ ç›¸è¿æ¥ï¼Œæ‰€ä»¥æ¯ä¸ªç¥ç»å…ƒä¸­éƒ½ä¼šæœ‰å…¨å±€çš„ä¿¡æ¯ï¼‰ï¼Œåªéœ€è¦è®©ç½‘ç»œä¾¦æµ‹ä¸€äº›é‡è¦çš„Patternæœ‰æ²¡æœ‰å‡ºç°å³å¯ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114114815294.png" alt="image-20220114114815294" style="zoom:25%;" /></p>
<p>â€‹ åŸºäºä¸Šè¿°è§‚å¯Ÿ1ï¼Œæˆ‘ä»¬å°±å¯ä»¥æå‡ºä¸€äº›æœºåˆ¶ï¼ˆç®€åŒ–1ï¼‰ï¼šReceptive
Fieldæ„ŸçŸ¥åŸŸæœºåˆ¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼šæœ¬æ¥çš„è¯ï¼Œåœ¨FCä¸­ï¼Œæ¯ä¸€ä¸ªNeuraléƒ½ä¼šå’Œæ•´å¼ å›¾ç‰‡çš„æ‰€æœ‰åƒç´ éƒ½æœ‰ä¸€ä¸ªweightç›¸è¿ï¼Œä½†æ˜¯æˆ‘ä»¬ç°åœ¨å¯ä»¥è®¾ç½®ä¸€ä¸ª3<em>3</em>3çš„æ„ŸçŸ¥åŸŸï¼Œæ¯”å¦‚å›¾ä¸­å·¦ä¸Šè§’çš„è¿™ä¸ªçº¢è‰²æ„ŸçŸ¥åŸŸï¼Œç„¶åæŸä¸€ä¸ªNeuralä»…å’Œè¿™ä¸ªæ„ŸçŸ¥åŸŸå†…æ‰€æœ‰çš„åƒç´ ç›¸è¿ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªç¥ç»å…ƒä»…æœ‰3<em>3</em>3
= 27
ä¸ªweightï¼Œå†åŠ ä¸Šbiasçš„å‚æ•°ï¼Œå°±å¯ä»¥å¾—åˆ°ç¥ç»å…ƒçš„è¾“å‡ºä½œä¸ºä¸‹ä¸€å±‚çš„è¾“å…¥ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114114832378.png" alt="image-20220114114832378" style="zoom:25%;" /></p>
<p>â€‹
é‚£ä¹ˆï¼Œä»¥æ­¤ç±»æ¨ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰å¾ˆå¤šå¾ˆå¤šçš„æ„ŸçŸ¥åŸŸï¼Œå¯¹åº”ä¸åŒçš„Neuralï¼Œæ¯ä¸€ä¸ªä¸åŒçš„Neuralè´Ÿè´£ä¸åŒçš„æ„ŸçŸ¥åŸŸéƒ¨åˆ†ï¼ˆå¦‚å›¾ä¸­æ‰€ç¤ºï¼‰ã€‚è¿™ä¸ªåœ°æ–¹å…¶å®ä¼šå­˜åœ¨æ¯”è¾ƒå¤šçš„ç–‘é—®ï¼Œæ¯”å¦‚è¯´ï¼šåŒä¸€ä¸ªæ„ŸçŸ¥åŸŸå¯ä»¥è¿æ¥ä¸¤ä¸ªä¸åŒçš„ç¥ç»å…ƒå—ï¼Ÿæ„ŸçŸ¥åŸŸä¹‹é—´å¯ä»¥é‡å å—ï¼Ÿæˆ‘ä»¬ä¸€å®šè¦3é€šé“çš„æ„ŸçŸ¥åŸŸå—ï¼Ÿå¯ä»¥æœ‰ä¸åŒå°ºåº¦çš„æ„ŸçŸ¥åŸŸå—ï¼Ÿæ„ŸçŸ¥åŸŸä¸€å®šè¦æ˜¯ç›¸é‚»çš„å—ï¼Ÿæ„ŸçŸ¥åŸŸå¯ä»¥æ˜¯éæ­£æ–¹å½¢å—ï¼Ÿç­”æ¡ˆéƒ½æ˜¯å¯ä»¥çš„ï¼Œæ„ŸçŸ¥åŸŸçš„è®¾è®¡æ˜¯ä¸€ä¸ªéå¸¸è‡ªç”±çš„é€‰é¡¹ï¼Œå…¶å½’æ ¹ç»“åº•æ˜¯éœ€è¦çœ‹ä½ å¯¹äºé—®é¢˜çš„ç†è§£ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘ä»¬è¯´æ„ŸçŸ¥åŸŸæœ€å¥½æ˜¯ç›¸é‚»çš„ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬è®¤ä¸ºåœ¨å½±å“æ£€æµ‹ä¸­ï¼Œå¦‚æœæƒ³è¦æ£€æµ‹ä¸€ä¸ªé‡è¦çš„Patternçš„è¯ï¼Œè¿™ä¸ªPatternåº”è¯¥æ˜¯ä¼šåœ¨å›¾åƒä»»æ„ä½ç½®éƒ½æœ‰å¯èƒ½å‡ºç°çš„ã€‚å¦‚æœæœ‰ä¸€ä¸ªç‰¹æ®Šçš„ä»»åŠ¡ï¼Œå…¶å†…å®¹éƒ½åœ¨å·¦ä¸Šè§’ï¼Œé‚£ä¹ˆä½ å¯ä»¥è®¾è®¡æ„ŸçŸ¥åŸŸéƒ½é‡å åœ¨å·¦ä¸Šè§’ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114114850796.png" alt="image-20220114114850796" style="zoom:25%;" /></p>
<p>â€‹ é‚£ä¹ˆæœ€ç»å…¸çš„Receipt
Fieldåº”è¯¥æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šè€ƒè™‘æ‰€æœ‰çš„é€šé“ï¼Œè€Œä¸æ˜¯å•ä¸ªé€šé“çš„è€ƒè™‘ï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬åªéœ€è¦ç¡®å®šå›¾åƒå¹³é¢çš„æ„ŸçŸ¥åŸŸå¤§å°å°±å¯ä»¥ï¼Œå°†ä¹‹ç§°ä¸ºkernal
sizeï¼Œä¸€èˆ¬çš„kernel
sizeå°±æ˜¯3<em>3ï¼Œ5</em>5å’Œ7*7å·²ç»å±äºè¾ƒå¤§çš„æ ¸å¤§å°äº†ã€‚ç„¶åå¯¹äºä¸€ä¸ªreceipt
fieldæ¥è¯´ï¼Œå¾€å¾€ä¸ä¼šåªæœ‰ä¸€ä¸ªneuralä¸ä¹‹å¯¹åº”ï¼Œè€Œæ˜¯ä¼šæœ‰ä¸€ç»„neuron(
64æˆ–128ä¸ª)å»å’Œè¿™ä¸ªæ„ŸçŸ¥åŸŸç›¸è¿ã€‚</p>
<p>â€‹ å„ä¸ªä¸åŒçš„receipt
fieldä¸€èˆ¬éƒ½æ˜¯ç›¸é‚»çš„ï¼Œæœ‰é‡å çš„ï¼Œç›¸é‚»è·ç¦»å«åšstrideã€‚åŒæ—¶è¾¹ç•Œçš„å¡«å……å¤§å°å«åšpaddingã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220121172659518.png" /></p>
<h3 id="è§‚å¯Ÿ2">2ã€è§‚å¯Ÿ2</h3>
<p>â€‹
æˆ‘ä»¬å‘ç°ï¼Œå½±åƒä¸­åŒä¸€ä¸ªæ¨¡å¼çš„éƒ¨åˆ†ï¼Œå¯èƒ½å‡ºç°åœ¨å›¾åƒçš„ä»»ä½•ä¸€ä¸ªåœ°æ–¹ï¼Œæ¯”å¦‚è¯´åœ¨ä¸åŒçš„å›¾åƒä¸Šï¼Œé¸Ÿå˜´å¯èƒ½å‡ºç°åœ¨è“è‰²æ–¹æ¡†å¤„ï¼Œä¹Ÿå¯èƒ½å‡ºç°åœ¨çº¢è‰²æ–¹æ¡†å¤„ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114115003492.png" alt="image-20220114115003492" style="zoom:25%;" /></p>
<p>â€‹
åŸºäºä¸Šè¿°çš„è§‚å¯Ÿï¼Œè™½ç„¶æˆ‘ä»¬åœ¨ç®€åŒ–1ä¸­æåˆ°äº†ï¼Œå¯¹äºä¸åŒçš„åŒºåŸŸï¼Œæˆ‘ä»¬éƒ½ä¼šæœ‰å¯¹åº”çš„ç¥ç»å…ƒå»è¿æ¥è¿™ä¸€å—åŒºåŸŸï¼ˆæ„ŸçŸ¥åŸŸï¼‰ï¼Œé‚£ä¹ˆç”±äºæˆ‘ä»¬æ˜¯è¦æ£€æµ‹åŒä¸€ä¸ªæ¨¡å¼ï¼Œæ‰€ä»¥ç”¨äºæ£€æµ‹åŒä¸€ä¸ªæ¨¡å¼çš„æ„ŸçŸ¥åŸŸçš„ç¥ç»å…ƒåº”è¯¥æ˜¯å¯ä»¥å…±äº«å‚æ•°çš„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç”¨äºæ£€æµ‹å·¦ä¸Šè§’çš„æŸæ¨¡å¼çš„ä¸€ä¸ªç¥ç»å…ƒæ ¸æ£€æµ‹ä¸­éƒ¨çš„åŒä¸€æ¨¡å¼çš„ç¥ç»å…ƒåº”å½“å…±äº«è®­ç»ƒå‚æ•°ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114115020687.png" alt="image-20220114115020687" style="zoom:25%;" /></p>
<p>â€‹
é‚£ä¹ˆä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•å»å…±äº«å‚æ•°çš„å‘¢ï¼Ÿæˆ‘ä»¬å…ˆå‰è¯´è¿‡ï¼Œä¸€èˆ¬è€Œè¨€ï¼Œæ¯ä¸€ä¸ªæ„ŸçŸ¥åŸŸéƒ½ä¼šå¯¹åº”è¿æ¥64ä¸ªæˆ–128ä¸ªä¸åŒçš„ç¥ç»å…ƒï¼Œæ‰€æœ‰çš„æ„ŸçŸ¥åŸŸæ‰€å¯¹åº”çš„ç›¸åŒåºå·çš„ç¥ç»å…ƒå…¨éƒ½æ˜¯å…±äº«å‚æ•°çš„ã€‚ä»¥ä¸‹å›¾ä¸­ä¸¤ä¸ªçº¢è‰²æ–¹æ¡†æ¡†èµ·çš„æ„ŸçŸ¥åŸŸä¸ºä¾‹ï¼Œæ¯ä¸ªæ„ŸçŸ¥åŸŸéƒ½å¯¹åº”äº†64ä¸ªç¥ç»å…ƒï¼Œå³64ç»„å‚æ•°ï¼Œå®ƒä»¬å„è‡ªçš„ç¬¬1ä¸ªç¥ç»å…ƒçš„å‚æ•°ï¼ˆfilter1ï¼‰é—´å‚æ•°æ˜¯å…±äº«çš„ï¼Œåç»­åŒç†ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114115047789.png" alt="image-20220114115047789" style="zoom:25%;" /></p>
<p>â€‹ æ‰€ä»¥æˆ‘ä»¬å‘ç°ï¼ŒConvolutional
Layerå…¶å®å°±æ˜¯äººä»¬é’ˆå¯¹äºå½±åƒçš„ä¸¤å¤§ç‰¹æ€§ï¼Œæå‡ºäº†æ„ŸçŸ¥åŸŸå’Œå‚æ•°å…±äº«è¿™ä¸¤ä¸ªç®€åŒ–ï¼Œä»è€Œä½¿å¾—FCè¿›åŒ–æˆäº†CNNï¼Œæ‰€ä»¥CNNä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬è¯´ä»…ç”¨äºå½±åƒå¤„ç†ï¼Œæˆ–è€…è¯´ç”¨äºå…·æœ‰ä¸Šè¿°æˆ‘ä»¬æåŠçš„ä¸¤å¤§ç‰¹æ€§çš„é—®é¢˜é¢†åŸŸï¼Œæ‰ä¼šæœ‰æ¯”è¾ƒå¥½çš„æ•ˆæœã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114115102350.png" alt="image-20220114115102350" style="zoom:25%;" /></p>
<h2 id="äºŒä»filter-visionè§’åº¦æ¥ä»‹ç»cnn">äºŒã€ä»Filter
Visionè§’åº¦æ¥ä»‹ç»CNN</h2>
<p>â€‹
ä¸Šè¿°çš„é‚£ä¸ªè§’åº¦ä»‹ç»CNNå…¶å®æ˜¯ä»¤æˆ‘è€³ç›®ä¸€æ–°çš„ï¼Œå®ƒéå¸¸å¥½çš„é˜æ˜äº†CNNè¿™ä¸ªæ¶æ„ä¹‹æ‰€ä»¥è¿™æ ·å­è®¾è®¡çš„åŸå› ã€‚é‚£ä¹ˆå…¶å®åœ¨æœ€å¼€å§‹çš„æ—¶å€™æˆ‘å­¦ä¹ çš„æ˜¯æ¥ä¸‹æ¥è¦è¯´çš„è¿™ä¸ªä»Filterçš„ç‰ˆæœ¬è¿›è¡Œçš„ä»‹ç»ã€‚</p>
<p>â€‹
é¦–å…ˆä½ éœ€è¦çŸ¥é“å·ç§¯çš„æ¦‚å¿µï¼Œåœ¨å·ç§¯å±‚ä¸­ï¼Œå…¶å®æˆ‘ä»¬å°±æ˜¯ç”¨è®¸å¤šä¸ªä¸åŒçš„å·ç§¯æ ¸Filterå»å·ç§¯æˆ‘ä»¬è¾“å…¥çš„å›¾åƒã€‚å‡è®¾æˆ‘ä»¬çš„å›¾åƒæ˜¯3é€šé“çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸€èˆ¬çš„å·ç§¯æ ¸å¤§å°å°±æ˜¯ä¸€ä¸ª<span
class="math inline">\(3 \times 3 \times
3(width*height*channel)\)</span>çš„ä¸‰ç»´Tensorã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114115134255.png" alt="image-20220114115134255" style="zoom:25%;" /></p>
<p>â€‹
æ¯ä¸€ä¸ªFilterå·ç§¯è¿‡åŸå›¾åƒä»¥åï¼Œéƒ½ä¼šç”Ÿæˆä¸€å¼ æ–°çš„å›¾åƒï¼Œè¢«æˆ‘ä»¬ç§°ä¹‹ä¸ºç‰¹å¾å›¾ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨64ä¸ªæˆ–128ä¸ªå·ç§¯æ ¸å»å¯¹å›¾åƒå·ç§¯ï¼Œåœ¨ç¬¬ä¸€å±‚çš„å·ç§¯å±‚è¿‡åï¼Œå°±ä¼šç”Ÿæˆä¸€å¼ 64æˆ–128é€šé“çš„å›¾åƒï¼Œæ¯ä¸€ä¸ªé€šé“éƒ½æ˜¯ä¸€ä¸ªFeature
Mapã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114115246463.png" alt="image-20220114115246463" style="zoom:20%;" /></p>
<p>é‚£ä¹ˆåœ¨å¤šå±‚çš„å·ç§¯å±‚ç½‘ç»œä¸­ï¼Œè¿™æ ·å­ç»è¿‡ç¬¬ä¸€å±‚å·ç§¯å±‚åå¾—åˆ°çš„ä¸€ä¸ªç‰¹å¾å›¾ç»„æˆçš„64é€šé“çš„å›¾åƒï¼Œå°†ä¼šå†æ¬¡è¢«è§†ä¸ºä¸€å¼ å›¾ç‰‡ï¼Œç»è¿‡ä¸‹ä¸€ä¸ªå·ç§¯å±‚ã€‚ä¸‹ä¸€å±‚çš„æ¯ä¸ªå·ç§¯æ ¸åº”å½“æ˜¯<span
class="math inline">\(3 \times 3 \times
64\)</span>çš„å¤§å°ã€‚ç„¶ååˆä¼šæ ¹æ®å·ç§¯æ ¸çš„æ•°ç›®ï¼Œå†³å®šè¯¥å±‚è¾“å‡ºçš„ç‰¹å¾å›¾çš„æ•°é‡</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114115306217.png" alt="image-20220114115306217" style="zoom:25%;" /></p>
<h2 id="ä¸‰-ä¸¤ä¸ªversionçš„ä»‹ç»ä¸­çš„ç›¸é€šç‚¹">ä¸‰ã€
ä¸¤ä¸ªVersionçš„ä»‹ç»ä¸­çš„ç›¸é€šç‚¹</h2>
<p>â€‹
å…¶å®ç¬¬äºŒä¸ªç‰ˆæœ¬ä¸­çš„Filterå°±æ˜¯ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¸­çš„æŸä¸ªæ„ŸçŸ¥åŸŸæ‰€å¯¹åº”çš„ç¥ç»å…ƒçš„å‚æ•°ï¼Œä¹Ÿå°±å¯¹åº”ç€æˆ‘ä»¬çš„è§‚å¯Ÿ1.å¦‚ä¸‹æ‰€ç¤ºï¼šæ¯”å¦‚è¯´ä¸€ä¸ªå¯¹åº”ç€<span
class="math inline">\(3 \times 3 \times
3\)</span>çš„æ„ŸçŸ¥åŸŸçš„ç¥ç»å…ƒï¼Œå…¶æ‹¥æœ‰27ä¸ªå‚æ•°ï¼Œè¿™27ä¸ªå‚æ•°å…¶å®å°±æ˜¯æˆ‘ä»¬åœ¨ç¬¬äºŒä¸ªç‰ˆæœ¬ä¸­æ‰€è¯´çš„Filterçš„å¤§å°ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114115437195.png" alt="image-20220114115437195" style="zoom:25%;" /></p>
<p>â€‹
åŒæ—¶ï¼Œæˆ‘ä»¬åœ¨å·ç§¯çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ‹¿å·ç§¯æ ¸éå†ä¸€éå›¾åƒï¼Œè¿˜ä¼šæœ‰strideå’Œpaddingï¼Œåœ¨æ‹¿å·ç§¯æ ¸éå†å·ç§¯å›¾åƒçš„æ—¶å€™ï¼Œå·ç§¯æ ¸çš„å‚æ•°ä¸ä¼šå˜åŒ–ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œå¯¹äºåŒä¸€ä¸ªå·ç§¯æ ¸ï¼ˆç¥ç»å…ƒï¼‰æ¥è¯´ï¼Œå½“å…¶å¯¹åº”å»è®¡ç®—ä¸åŒçš„æ„ŸçŸ¥åŸŸæ—¶ï¼Œå‚æ•°æ˜¯å…±äº«çš„ã€‚å¯¹åº”äº†æˆ‘ä»¬çš„è§‚å¯Ÿ2.</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114115455473.png" alt="image-20220114115455473" style="zoom:25%;" /></p>
<p>â€‹
æ‰€ä»¥å…¶å®æ¥è¯´ä¸¤ä¸ªç‰ˆæœ¬çš„ä»‹ç»æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œä»ä¸¤ä¸ªæ–¹å‘æ¥ä»‹ç»èƒ½å¤Ÿæ›´å¥½çš„åŠ æ·±æˆ‘ä»¬å¯¹äºCNNçš„ç†è§£ã€‚</p>
<h2 id="å››ä¸€äº›é—®é¢˜ä¸poolingå±‚çš„ä½œç”¨">å››ã€ä¸€äº›é—®é¢˜ä¸Poolingå±‚çš„ä½œç”¨</h2>
<p>â€‹ 1ã€æˆ‘ä»¬ä¸€èˆ¬é‡‡ç”¨<span class="math inline">\(3 \times
3\)</span>çš„filterï¼Œé‚£ä¹ˆéœ€è¦æ‹…å¿ƒæ£€æµ‹ä¸åˆ°æ¯”è¾ƒå¤§çš„Patternå—ï¼Ÿå› ä¸ºæœ‰äº›Patternè‚¯å®šä¸ä¼šåªåœ¨<span
class="math inline">\(3 \times 3\)</span>è¿™ä¹ˆå°çš„ä¸€ä¸ªåŒºåŸŸå†…å‡ºç°ã€‚</p>
<p>â€‹ ç­”æ¡ˆæ˜¯ä¸éœ€è¦æ‹…å¿ƒï¼Œå› ä¸ºåœ¨å¤šå±‚çš„å·ç§¯ç¥ç»ç½‘ç»œä¸­ï¼Œæˆ‘ä»¬ç¬¬ä¸€å±‚ä½¿ç”¨<span
class="math inline">\(3 \times
3\)</span>çš„filterï¼Œå¾—åˆ°çš„ç‰¹å¾å›¾ï¼Œåœ¨ç¬¬äºŒå±‚å·ç§¯çš„æ—¶å€™ï¼Œç¬¬äºŒå±‚å¦‚æœé‡‡ç”¨çš„æ˜¯<span
class="math inline">\(3 \times
3\)</span>çš„filterï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œç¬¬äºŒå±‚å·ç§¯çš„ç‰¹å¾å›¾ä¸­çš„ä¸€ä¸ªåƒç´ ï¼Œå…¶å®ä»£è¡¨çš„æ˜¯åŸå›¾åƒä¸­ä¸€ä¸ª<span
class="math inline">\(3 \times 3\)</span>çš„èŒƒå›´ï¼Œæ‰€ä»¥ç¬¬äºŒå±‚çš„<span
class="math inline">\(3 \times
3\)</span>çš„filteræ‰€æ„ŸçŸ¥åˆ°çš„æºå›¾åƒçš„èŒƒå›´å…¶å®æ˜¯æ¯”<span
class="math inline">\(3 \times 3\)</span>è¦å¤§çš„ï¼Œé‚£å°±æ˜¯<span
class="math inline">\(9 \times
9\)</span>å—ï¼Ÿä¹Ÿä¸ä¸€å®šï¼Œå› ä¸ºè€ƒè™‘åˆ°æ„ŸçŸ¥åŸŸä¹‹é—´ä¼šæœ‰æ‰€é‡å ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ¯”è¾ƒå¥½ç†è§£ï¼Œä¸Šé¢çš„çŸ©é˜µæ˜¯åŸå›¾ï¼Œä¸‹é¢çš„çŸ©é˜µæ˜¯ç¬¬ä¸€å±‚å·å®Œä»¥åçš„ç‰¹å¾å›¾ï¼Œåœ¨ç‰¹å¾å›¾ä¸Šåš<span
class="math inline">\(3 \times
3\)</span>çš„è“è‰²æ¡†å·ç§¯ï¼Œå…¶å®å°±ç›¸å½“äºæ„ŸçŸ¥åˆ°äº†åŸå›¾çš„<span
class="math inline">\(5 \times
5\)</span>çš„ä¸€ä¸ªè“è‰²æ–¹æ¡†åŒºåŸŸã€‚æ‰€ä»¥å·ç§¯ç¥ç»ç½‘ç»œå çš„è¶Šæ·±ï¼Œå…¶èƒ½ä¾¦æµ‹åˆ°çš„ç‰¹å¾çš„å°ºåº¦ä¸Šé™è¶Šå¤§ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114115621526.png" alt="image-20220114115621526" style="zoom:25%;" /></p>
<p>â€‹ 2ã€Poolingå±‚ï¼š</p>
<p>â€‹
æ± åŒ–å±‚åŸºäºè¿™æ ·ä¸€ä¸ªè§‚å¯Ÿï¼šæˆ‘ä»¬å‘ç°ï¼Œå½±åƒå¦‚æœåšäº†ä¸‹é‡‡æ ·ï¼Œå¹¶ä¸ä¼šå½±å“æ•´ä½“æ˜¾ç¤ºçš„å†…å®¹ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114115654899.png" alt="image-20220114115654899" style="zoom:25%;" /></p>
<p>â€‹
æ‰€ä»¥åœ¨ä¼ ç»Ÿçš„CNNä¸­ï¼ŒPoolingæœ€ä¸»è¦çš„ä½œç”¨æ˜¯å‡å°‘è¿ç®—é‡ï¼Œå‡å°‘å‚æ•°ã€‚äººä»¬å¾€å¾€æŠŠPoolingå±‚å’Œå·ç§¯å±‚äº¤æ›¿å åŠ ï¼Œå½¢æˆå·ç§¯ç¥ç»ç½‘ç»œã€‚ä½†å…¶å®åœ¨ç°é˜¶æ®µè€Œè¨€ï¼Œæˆ‘ä»¬çš„GPUè¿ç®—èƒ½åŠ›ä¸Šæ¥äº†ï¼Œæ± åŒ–å±‚åœ¨æœ‰äº›æ—¶å€™å¯æœ‰å¯æ— ï¼Œå°¤å…¶æ˜¯å½“æˆ‘ä»¬éœ€è¦æ‰§è¡Œä¸€äº›è¯†åˆ«ç»†å°Patternçš„ä»»åŠ¡çš„æ—¶å€™ï¼Œæ± åŒ–å±‚æ‰€è¿›è¡Œçš„ä¸‹é‡‡æ ·å¾ˆå¯èƒ½è®©æˆ‘ä»¬ä¸¢å¤±ä¸€äº›ä¿¡æ¯ï¼Œå¯¼è‡´ä¾¦æµ‹ä¸åˆ°ä¸€äº›ç»†å°çš„Patternã€‚</p>
<p>â€‹
æ•…è€Œæˆ‘ä»¬åœ¨ä½¿ç”¨ä¸€ä¸ªç½‘ç»œæ¶æ„çš„æ—¶å€™ï¼Œä¸€å®šè¦æƒ³æ¸…æ¥šè¿™ä¸ªç½‘ç»œæ¶æ„çš„æŸäº›éƒ¨åˆ†åˆ°åº•æ˜¯å¹²ä»€ä¹ˆç”¨çš„ï¼Œé’ˆå¯¹ä»€ä¹ˆç‰¹æ€§æ¥è¿›è¡Œè®¾è®¡çš„ï¼Œæ‰èƒ½è·å¾—æ¯”è¾ƒå¥½çš„æ•ˆæœä»¥åŠåº”ç”¨ã€‚</p>
<p>3ã€æœ€åCNNæ— æ³•å¤„ç†å›¾åƒçš„æ”¾ç¼©ä¸æ—‹è½¬ï¼Œæ‰€ä»¥åœ¨åšå½±åƒè¾¨è¯†çš„æ—¶å€™æˆ‘ä»¬å¾€å¾€è¦åšData
Augmentationï¼ˆå…ˆå‰æåŠè¿‡çš„æ–¹æ³•ï¼‰ï¼Œæ¥è®©æˆ‘ä»¬çš„è®­ç»ƒé›†å°½é‡å¤šå…ƒåŒ–ï¼Œé¿å…è¿™ä¸ªé—®é¢˜ã€‚å½“ç„¶ä¹Ÿæœ‰ä¸“é—¨åšäº†ç›¸åº”å¤„ç†çš„ç½‘ç»œå±‚ï¼Œå«åšSpatial
Transformer Layerï¼Œæ„Ÿå…´è¶£å¯ä»¥å­¦ä¹ ã€‚ https://youtu.be/SoCywZ1hZak</p>
<h2 id="äº”cnnåº”ç”¨-playing-go">äº”ã€CNNåº”ç”¨ï¼š Playing GO</h2>
<h4
id="å¦‚ä½•å°†ä¸‹å›´æ£‹å˜æˆä¸€ä¸ªåˆ†ç±»é—®é¢˜">1ã€å¦‚ä½•å°†ä¸‹å›´æ£‹å˜æˆä¸€ä¸ªåˆ†ç±»é—®é¢˜ï¼Ÿ</h4>
<p>â€‹
æˆ‘ä»¬æŠŠä¸‹å›´æ£‹å»å½“ä½œä¸€ä¸ªåˆ†ç±»çš„é—®é¢˜ï¼Œå‡è®¾æ£‹ç›˜æ˜¯19*19çš„å¤§å°ï¼Œç½‘ç»œçš„è¾“å…¥å°±æ˜¯ä¸€ä¸ª19*19çš„å‘é‡ï¼Œæ¯ä¸€ä¸ªä½ç½®å¯èƒ½ç”¨ä¸€ä¸ªå€¼æ¥ä»£è¡¨è¿™ä¸ªä½ç½®å½“å‰çš„çŠ¶æ€ï¼Œï¼ˆAlpha
GoåŸè®ºæ–‡ä¸­ï¼Œæ¯ä¸ªä½ç½®æ˜¯ç”±ä¸€ä¸ª48ç»´çš„å‘é‡è¿›è¡Œè¡¨ç¤ºçš„ï¼‰ï¼Œç»è¿‡ç½‘ç»œä»¥åï¼Œæˆ‘ä»¬è¦çš„è¾“å‡ºç»“æœæ˜¯ä¸‹ä¸€æ­¥æ£‹ä¼šä¸‹åœ¨å“ªé‡Œï¼Ÿ</p>
<p>â€‹ è¿™å°±æ˜¯ä¸€ä¸ª
19*19ä¸ªç±»åˆ«çš„åˆ†ç±»é—®é¢˜ï¼Œç½‘ç»œè¾“å‡ºåœ¨å„ä¸ªåœ°æ–¹çš„è½å­æ¦‚ç‡ï¼ŒæŒ‘é€‰è½å­æ¦‚ç‡æœ€å¤§çš„é‚£ä¸€ä¸ªä½ç½®ä¸‹å­å°±å¯ä»¥äº†ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_01_21_17_35_31_200.png" /></p>
<h4
id="ä¸ºä»€ä¹ˆcnnå¯ä»¥ç”¨åœ¨ä¸‹å›´æ£‹ä¸Šå‘¢">2ã€ä¸ºä»€ä¹ˆCNNå¯ä»¥ç”¨åœ¨ä¸‹å›´æ£‹ä¸Šå‘¢ï¼Ÿ</h4>
<p>â€‹
1ã€ä¸€äº›patternæ¯”æ•´ä¸ªæ£‹å±€è¦å°ï¼Œå¹¶ä¸”å¯ä»¥è¯†åˆ«å‡ºæ¥ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œå›´æ£‹ä¸­ä¹Ÿæœ‰ä¸€ä¸ªä¸ªå°çš„patternï¼Œé€šè¿‡ä¸€ä¸ªä¸ªå°çš„patternå°±å¯ä»¥å»è¿›è¡Œä¸€äº›çš„åˆ¤æ–­ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_01_21_17_32_54_32.png" /></p>
<p>â€‹
2ã€åŒä¸€ä¸ªpatternå¯èƒ½å‡ºç°åœ¨æ£‹ç›˜ä¸Šçš„ä»»ä½•ä½ç½®ï¼Œå¯èƒ½å¯ä»¥å‡ºç°åœ¨å·¦ä¸‹è§’ï¼Œä¹Ÿå¯ä»¥å‡ºç°åœ¨å³ä¸Šè§’ã€‚å›´æ£‹ä¸­ä¹Ÿæ˜¯è¿™ä¸ªæ ·å­ã€‚</p>
<h4
id="é‚£ä¹ˆpoolingå±‚åœ¨å›´æ£‹ä¸­ä¹Ÿä¼šé€‚ç”¨å—">3ã€é‚£ä¹ˆPoolingå±‚åœ¨å›´æ£‹ä¸­ä¹Ÿä¼šé€‚ç”¨å—ï¼Ÿ</h4>
<p>â€‹
ï¼å®Œå…¨ä¸é€‚ç”¨ï¼å¹¶ä¸”ä¸å¯ä»¥ä½¿ç”¨ï¼å¦‚æœæˆ‘ä»¬åœ¨æ£‹ç›˜ä¸­ä½¿ç”¨MaxPoolingå±‚çš„è¯ï¼Œç§»é™¤äº†å¶æ•°è¡Œå’Œå¥‡æ•°è¡Œä»¥åï¼Œä¼šå¯¼è‡´å¾ˆå¤šå›´æ£‹çš„ç»†èŠ‚ä¸¢å¤±ã€‚æ‰€ä»¥Poolingå±‚è™½ç„¶é€‚åˆåšå½±åƒå¤„ç†ï¼Œä½†åœ¨ä¸‹å›´æ£‹è¿™ä¸ªä»»åŠ¡ä¸­ï¼Œæ˜¾ç„¶ä¸æ˜¯å¾ˆåˆé€‚ã€‚</p>
<p>â€‹ æ‰€ä»¥Alpha
Goçš„åŸè®ºæ–‡ä¸­ï¼Œåœ¨é™„ä»¶ä¸­é˜è¿°çš„ç½‘ç»œç»“æ„ä¸­ä¹Ÿæåˆ°äº†ï¼Œå…¶è®¾è®¡çš„ç½‘ç»œç»“æ„ä¸­ï¼Œå·²ç»æ²¡æœ‰Poolingå±‚äº†ï¼Œæ˜¯éå¸¸åˆç†çš„ã€‚</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>ML2021è¯¾ç¨‹ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
        <tag>CNN</tag>
      </tags>
  </entry>
  <entry>
    <title>Transformerç³»åˆ—ç¬”è®°1â€”â€”Self Attentionæœºåˆ¶</title>
    <url>/2021/12/06/59e48d4d462f/</url>
    <content><![CDATA[<h3 id="ä¸€èƒŒæ™¯ä»‹ç»é—®é¢˜å¼•å…¥">ä¸€ã€èƒŒæ™¯ä»‹ç»é—®é¢˜å¼•å…¥</h3>
<p>â€‹
åœ¨å…ˆå‰çš„ç½‘ç»œæ¶æ„ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬è¾“å…¥çš„éƒ½æ˜¯ä¸€ä¸ªå‘é‡ï¼Œä½†æ˜¯æœ‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦è€ƒè™‘æ›´ä¸ºå¤æ‚çš„è¾“å…¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ¯”å¦‚è¯´ä¸€ä¸ªå‘é‡çš„é›†åˆï¼Œå¹¶ä¸”å‘é‡é›†åˆçš„é•¿åº¦è¿˜ä¼šå‘ç”Ÿå˜åŒ–ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115111555364.png" /></p>
<p>â€‹
ä¸€èˆ¬æŒ‰æ¥è¯´å¯¹äºè¾“å…¥æ˜¯å‘é‡é›†åˆçš„è¯ï¼Œæˆ‘ä»¬å…ˆè¦å¯¹å…¶è¿›è¡Œç¼–ç å¤„ç†ï¼Œä¸€ç§ç¼–ç æ–¹æ¡ˆä¸ºOne-hot
Encoding,ç§°ä¸ºç‹¬çƒ­å‘é‡ç¼–ç ï¼Œå¦ä¸€ç§ç¼–ç æ–¹æ¡ˆä¸ºWord
Embeddingæ–¹æ³•ï¼Œç§°ä¸ºè¯åµŒå…¥æ–¹å¼ã€‚</p>
<p>ä¸ºäº†æ›´å¥½çš„ç†è§£ï¼Œè¾“å…¥ä¸ºä¸€ä¸ªå‘é‡çš„é›†åˆï¼Œä¸‹é¢æœ‰ä¸€äº›ç›¸å…³çš„ä¾‹å­ï¼š</p>
<p>â€‹
<strong>ç¤ºä¾‹1ï¼š</strong>æ¯”å¦‚è¯´ï¼Œè¾“å…¥æ˜¯ä¸€æ®µè¯­éŸ³ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€æ®µ1sä¸­çš„è¯­éŸ³è§†ä¸ºä¸€ä¸ªå‘é‡çš„é›†åˆè¾“å…¥ï¼Œæ¯25msè§†ä¸ºä¸€ä¸ªwindowçª—å£ï¼Œç§°ä¸º1å¸§ï¼Œå°†é‡Œé¢çš„ä¿¡æ¯æå–å‡ºæ¥ä»¥åï¼Œå°±æˆä¸ºä¸€ä¸ªå‘é‡ã€‚æˆ‘ä»¬å°†è¿™ä¸ªçª—å£æ¯æ¬¡å‘åç§»åŠ¨10msï¼Œæ¯ç§»åŠ¨10mså°±é‡æ–°å–ä¸€æ¬¡æ ·ï¼Œä¹Ÿå°±æ˜¯å¤šè¾“å‡ºä¸€ä¸ªå‘é‡ã€‚è¿™æ ·é¢„å¤„ç†çš„è¯ï¼Œå…¶å®å°±æ˜¯ä¸€æ®µ1sçš„è¯­éŸ³æˆ‘ä»¬å¯ä»¥æŠŠå®ƒè§†ä½œä¸º100ä¸ªå‘é‡çš„ä¸€ä¸ªé›†åˆè¾“å…¥ã€‚
ï¼ˆåœ¨ä¸Šè¿°å¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œè‡³äºä¸ºä»€ä¹ˆ25msè§†ä¸ºä¸€ä¸ªwindowï¼Œæ¯æ¬¡è¦å‘åç§»åŠ¨10msï¼Œè¿™äº›éƒ½éœ€è¦è§†å…·ä½“çš„è¯­éŸ³ä»»åŠ¡è€Œå®šï¼Œæœ‰å…´è¶£å¯ä»¥è¿›ä¸€æ­¥çœ‹è¯­éŸ³å¤„ç†æ–¹é¢ç›¸å…³çš„æ–‡ç« ï¼‰</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115111649129.png" /></p>
<p>â€‹
<strong>ç¤ºä¾‹2</strong>ï¼šæ¯”å¦‚è¯´ä¸€ä¸ªå›¾ï¼Œä¹Ÿå¯ä»¥è¢«è§†ä½œä¸€ä¸ªå‘é‡çš„é›†åˆï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½è¢«å½“ä½œä¸€ä¸ªå‘é‡ï¼Œè¿™ä¸ªå‘é‡ä¸­ç¼–ç äº†å…³äºè¿™ä¸ªèŠ‚ç‚¹æ‰€æœ‰çš„ç›¸å…³ä¿¡æ¯ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112432503.png" /></p>
<p>â€‹
é‚£ä¹ˆå¯¹äºè¿™æ ·å¤æ‚çš„è¾“å…¥è€Œè¨€ï¼Œè¾“å‡ºå¯èƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæœ‰ä¸‰ç§å¯èƒ½ï¼Œç¬¬ä¸€ä¸ªæ˜¯å¯¹äºæ¯ä¸ªè¾“å…¥çš„å‘é‡ï¼Œéƒ½è¾“å‡ºä¸€ä¸ªlabelç»“æœï¼Œæ¯”å¦‚è¯´POS
taggingä»»åŠ¡ã€‚ç¬¬äºŒä¸ªæ˜¯æ•´ä½“å°±è¾“å‡ºä¸€ä¸ªlabelç»“æœï¼Œæ¯”å¦‚è¯´Sentiment
analysisä»»åŠ¡ã€‚åˆæˆ–è€…æ˜¯ç¬¬ä¸‰ä¸ªæ‰€ç¤ºçš„seq2seqçš„ä»»åŠ¡ï¼Œæ¯”å¦‚è¯´è¯­å¥ç¿»è¯‘ï¼Œæˆ–è€…æ˜¯è¯­éŸ³è¯†åˆ«çš„ä»»åŠ¡ã€‚æ­¤ç¯‡æ–‡ç« èšç„¦äºç¬¬ä¸€ç§æƒ…å†µæ¢è®¨Self-Attentionæœºåˆ¶ä¸æ•´ä½“çš„æ¶æ„ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112440152.png" /></p>
<h3
id="äºŒself-attentionè§£å†³æ–¹æ¡ˆå¼•å…¥">äºŒã€Self-Attentionè§£å†³æ–¹æ¡ˆå¼•å…¥ï¼š</h3>
<p>â€‹
ä¸ºäº†è§£å†³ä¸Šé¢æˆ‘ä»¬è¯´çš„å¯¹äºæ¯ä¸ªè¾“å…¥çš„vectoréƒ½è¾“å‡ºä¸€ä¸ªlabelç»“æœçš„äº‹æƒ…ï¼Œæœ€ç®€å•ä¹Ÿæœ€ä¸ºç›´è§‚çš„æ–¹æ³•å°±æ˜¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå‡è®¾è¾“å…¥çš„å‘é‡é›†åˆé•¿åº¦ä¸º4ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†æ¯ä¸ªè¾“å…¥çš„å‘é‡å•ç‹¬è€ƒè™‘ï¼Œç„¶åè¿›è¡Œç»“æœçš„è¾“å‡ºã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112458834.png" /></p>
<p>â€‹
ä½†æ˜¯è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬ç›¸å½“äºæ²¡æœ‰è€ƒè™‘å‘é‡ä¸å‘é‡ä¹‹é—´çš„å…³ç³»ï¼Œé‚£ä¹ˆè¿™ç§æ¶æ„ä¸‹æˆ‘ä»¬å¯èƒ½è€ƒè™‘ä¸Šä¸‹æ–‡å—ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šæˆ‘ä»¬å¯ä»¥å°†å‰åçš„å‘é‡ä¹Ÿè¾“å…¥åˆ°å½“å‰çš„å…¨è¿æ¥å±‚ä¸­ï¼Œè¿™å°±è€ƒè™‘åˆ°äº†ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ä½†æ˜¯è¿™æ ·ä¸€æ¥é—®é¢˜åˆå‘ç”Ÿäº†ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦è€ƒè™‘æ•´ä¸ªåºåˆ—çš„ä¸Šä¸‹æ–‡å‘¢ï¼Ÿé‚£ä¹ˆè¿™ä¸ªçª—å£çš„é•¿åº¦åˆ°åº•åº”è¯¥é€‰å¤šå°‘å‘¢ï¼Ÿè¦çŸ¥é“æˆ‘ä»¬è¾“å…¥çš„å‘é‡çš„ä¸ªæ•°æ˜¯ä¼šå˜åŒ–çš„ã€‚åŒæ—¶ï¼Œå¦‚æœå°†æ¯ä¸ªå‘é‡éƒ½è¦è¿æ¥åˆ°æ¯ä¸ªFCä¸­çš„è¯ï¼Œéœ€è¦è®­ç»ƒçš„å‚æ•°å°±ä¼šå¤§å¤§å¢åŠ ï¼Œéšä¹‹è€Œæ¥çš„å°±æ˜¯éå¸¸å®¹æ˜“è¿‡æ‹Ÿåˆã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112507468.png" /></p>
<p>â€‹
åœ¨è¿™æ ·ä¸€ä¸ªé—®é¢˜èƒŒæ™¯ä¸‹ï¼ŒSelf-Attentionæœºåˆ¶åº”è¿è€Œç”Ÿã€‚å¦‚ä¸‹é¢ä¸¤å¼ å›¾ç‰‡æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºï¼Œæ¯ä¸€ä¸ªå•ç‹¬çš„å‘é‡ç»è¿‡Self-Attentionæœºåˆ¶è®¡ç®—åï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„å‘é‡ï¼Œè¿™ä¸ªæ–°çš„å‘é‡ä¸­æ˜¯å«æœ‰æ‰€æœ‰çš„ä¸Šä¸‹æ–‡ä¿¡æ¯çš„ã€‚åŒæ—¶Self-Attentionä¹Ÿå¯ä»¥åšå¥½å¤šå±‚ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥åƒç¬¬äºŒå¼ å›¾ä¸€æ ·ï¼Œå…ˆèµ°ä¸€æ¬¡Self-Attentionç„¶åè¿‡FCå±‚ï¼Œç„¶åå†èµ°ä¸€æ¬¡Self-Attentionå±‚ï¼Œç„¶åå†è¿‡å…¨è¿æ¥å±‚ï¼Œç„¶åè¾“å‡ºã€‚ä½¿å¾—Self-Attentionå‘æ‰¬å…‰å¤§çš„æ˜¯ä¸€ç¯‡å«åšã€ŠAttention
is All you
Needã€‹çš„è®ºæ–‡ï¼Œé‚£ä¹ˆSelf-Attentionå†…éƒ¨ï¼Œåˆ°åº•æ˜¯å¦‚ä½•è€ƒè™‘è¿›ä¸Šä¸‹æ–‡ä¹‹é—´çš„å…³ç³»çš„å‘¢ï¼Ÿ</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112528529.png" /></p>
<h3 id="ä¸‰self-attentionæ¶æ„ä»‹ç»">ä¸‰ã€Self-Attentionæ¶æ„ä»‹ç»</h3>
<p>â€‹
æˆ‘ä»¬é¦–å…ˆä»ç»“æœæ¥çœ‹Self-Attentionåšäº†ä¸€ä»¶ä»€ä¹ˆäº‹æƒ…ï¼Œå®ƒçš„è¾“å…¥å¯ä»¥æ˜¯åŸå§‹inputï¼Œä¹Ÿå¯ä»¥æ˜¯éšè—å±‚ã€‚ç„¶åç»è¿‡è¯¥ç»“æ„åï¼Œå°±å¯ä»¥å°†å‘é‡a1å˜æˆä¸€ä¸ªå¸¦ç€ä¸Šä¸‹æ–‡ä¿¡æ¯çš„å‘é‡b1ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112544934.png" /></p>
<p>â€‹
é¦–å…ˆï¼Œæˆ‘ä»¬ä»¥ç”Ÿæˆå‘é‡b1ä¸ºä¾‹ï¼Œè®°å½•æ•´ä¸€ä¸ªè¿‡ç¨‹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦è€ƒè™‘a1å’Œå¦å¤–ä¸‰ä¸ªå‘é‡çš„ç›¸å…³æ€§ï¼Œç„¶åç”¨ä¸€ä¸ªå˜é‡Î±å»è¿›è¡Œè¡¡é‡ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112553361.png" /></p>
<p>â€‹
é‚£ä¹ˆå¦‚ä½•è®¡ç®—å¾—åˆ°è¿™ä¸ªÎ±çš„å€¼å‘¢ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—è¾“å…¥ä¸¤ä¸ªå‘é‡ï¼Œä¸€ä¸ªå‘é‡ä¹˜ä»¥çŸ©é˜µWqå¾—åˆ°å‘é‡qï¼Œä¸€ä¸ªä¹˜ä»¥çŸ©é˜µWkå¾—åˆ°å‘é‡kï¼Œç„¶åæˆ‘ä»¬å†æŠŠqå’Œkåšç‚¹ç§¯ï¼Œå°±å¾—åˆ°äº†Î±ï¼Œè¿™ä¸ªÎ±å°±ä»£è¡¨è¾“å…¥çš„ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„ç›¸å…³æ€§ã€‚è‡³äºWqå’ŒWkå†…éƒ¨æ˜¯ä»€ä¹ˆæˆ‘ä»¬å…ˆä¸ç”¨ç®¡ï¼Œå› ä¸ºå…¶å†…éƒ¨çš„å‚æ•°æ˜¯æˆ‘ä»¬éœ€è¦ç”¨è®­ç»ƒé›†è®­ç»ƒç½‘ç»œå¾—åˆ°çš„ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112601252.png" /></p>
<p>â€‹
æ‰€ä»¥ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿä¾æ®ä¸Šè¿°è¿™ä¸ªæ¡†æ¶è®¡ç®—å‡ºa1åˆ†åˆ«å’Œa1,a2,a3,a4çš„ç›¸å…³æ€§Î±(1,1),Î±(1,2),Î±(1,3),Î±(1,4)ï¼Œæˆ‘ä»¬å°†ä¹‹ç§°ä¸ºAttention
Scoreã€‚å…·ä½“å†™æˆå…¬å¼çš„å½¢å¼å°±æ˜¯ä¸‹å›¾ä¸‹é¢çš„åŠéƒ¨åˆ†ã€‚ç„¶åçš„è¯å‘¢æˆ‘ä»¬éœ€è¦å°†ä¹‹é€šè¿‡Soft-maxå‡½æ•°ï¼Œåšä¸€ä¸ªå½’çº¦åŒ–ï¼Œä½¿å¾—ä»–ä»¬çš„å’Œä¸º1ï¼Œå¾—åˆ°Î±â€™(1,1),Î±â€™(1,2),Î±â€™(1,3),Î±â€™(1,4)ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112614866.png" /></p>
<p>â€‹
æœ‰äº†Î±â€™(1,1),Î±â€™(1,2),Î±â€™(1,3),Î±â€™(1,4)ä¹‹åï¼Œæˆ‘ä»¬å…ˆå°†a1,a2,a3,a4ä¹˜ä¸ŠçŸ©é˜µWvå¾—åˆ°v1,v2,v3,v4ï¼Œç„¶åç”¨å¯¹åº”çš„Î±â€™å’Œvåšå‰ç§¯ï¼Œä»vä¸­æå–ä¿¡æ¯ï¼Œæœ€ç»ˆå°†æ‰€æœ‰å¯¹åº”çš„å‰ç§¯ç›¸åŠ ï¼Œå°±å¾—åˆ°äº†æœ€ç»ˆçš„ç»“æœb1ã€‚å½¢å¼åŒ–çš„å…¬å¼å†™åœ¨ä¸‹å›¾çš„å³ä¸Šæ–¹ã€‚ç„¶åb2,b3,b4ä¹Ÿæ˜¯åŒæ ·çš„è¿‡ç¨‹å»è¿›è¡Œè®¡ç®—ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112623695.png" /></p>
<p>â€‹
æŒ‰ç…§æˆ‘ä»¬ä»‹ç»çš„é¡ºåºb1,b2,b3,b4æˆ‘ä»¬éœ€è¦ä¸€ä¸€ç®—å‡ºï¼Œå…¶å®è¿™ä¸€è®¡ç®—è¿‡ç¨‹æ˜¯å¯ä»¥é€šè¿‡çŸ©é˜µä¹˜æ³•å¹¶è¡Œæ‰§è¡Œçš„ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†a1,a2,a3,a4æ‹¼æ¥ç»„åˆæˆä¸€ä¸ªå¤§çš„çŸ©é˜µï¼Œç§°ä¸ºIã€‚å°†Iåˆ†åˆ«ä¹˜ä¸ŠçŸ©é˜µWqï¼ŒWkï¼ŒWvä¹‹åï¼Œå°±ä¼šå¾—åˆ°å¤§çš„çŸ©é˜µQ,K,Vã€‚ä»ç»“æœä¸Šè€Œè¨€ï¼Œå¤§çš„çŸ©é˜µQ,K,Vå°±æ˜¯å…ˆå‰ä¸€ä¸ªä¸ªå‘é‡è®¡ç®—æ—¶å€™å¾—åˆ°çš„ç»“æœå‘é‡q1,q2,q3,q4æ‹¼æ¥ç»„åˆè€Œæˆã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112631291.png" /></p>
<p>â€‹
æˆ‘ä»¬ç°åœ¨æ‹¥æœ‰Q,K,Vä¸‰ä¸ªçŸ©é˜µï¼Œæˆ‘ä»¬å¯ä»¥ç”¨çŸ©é˜µKçš„è½¬ç½®ä¹˜ä¸ŠçŸ©é˜µQå°±ä¼šå¾—åˆ°ä¸€ä¸ªÎ±çš„çŸ©é˜µï¼Œå…¶ä»ç»“æœä¸Šè€Œè¨€ç­‰ä»·äºä¸€ä¸ªä¸ªÎ±è®¡ç®—å¾—åˆ°çš„ç»“æœç»„æˆçš„çŸ©é˜µã€‚å…·ä½“çš„æ¨å¯¼è¿‡ç¨‹è§ä¸‹å›¾ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ï¼Œåªæ˜¯æŠŠä¸€äº›é‡å¤çš„çŸ©é˜µè¿ç®—è¿›è¡Œäº†åˆå¹¶è€Œå·²ã€‚å¾—åˆ°å¯¹åº”çš„çŸ©é˜µAä»¥åï¼Œæˆ‘ä»¬å¯¹æ¯ä¸€åˆ—åšSoftMaxå½’ä¸€åŒ–æ“ä½œï¼Œå¾—åˆ°çŸ©é˜µAâ€™ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112638932.png" /></p>
<p>â€‹
æœ€åæˆ‘ä»¬å°†çŸ©é˜µAâ€™å’ŒçŸ©é˜µVç›¸ä¹˜ï¼Œå°±èƒ½ç”Ÿæˆç»“æœçŸ©é˜µOã€‚Oå°±æ˜¯b1,b2,b3,b4å‘é‡çš„æ‹¼æ¥ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112647706.png" /></p>
<p>â€‹
æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•´ä¸ªè¿‡ç¨‹è¡¨ç¤ºå¦‚ä¸‹å›¾ï¼šWq,Wk,Wvä¸‰ä¸ªçŸ©é˜µå†…éƒ¨çš„å‚æ•°å°±æ˜¯æˆ‘ä»¬éœ€è¦è®­ç»ƒçš„å‚æ•°ï¼ŒAâ€™å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„Attention
Matrix.</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112657080.png" /></p>
<h3
id="å››self-attentionæ¶æ„æ‰©å±•æ”¹è¿›">å››ã€Self-Attentionæ¶æ„æ‰©å±•æ”¹è¿›</h3>
<h4 id="multi-head-self-attention-å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶">1ã€Multi-head
Self-Attention å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶</h4>
<p>â€‹
åœ¨ä¸Šè¿°çš„è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°±æ˜¯ç”¨qiå»æ‰¾ç›¸å…³çš„kiï¼Œä½†æ˜¯ç›¸å…³å¯èƒ½ä¼šå­˜åœ¨å¾ˆå¤šç§ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥éœ€è¦æœ‰ä¸åŒçš„qï¼Œç„¶åä¸åŒçš„qå»è´Ÿè´£ä¸åŒçš„ç›¸å…³æ€§ï¼Œäºæ˜¯ä¹å‡ºç°äº†Multi-head
Self-Attentionæ¶æ„ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œç›¸æ¯”äºSelf-Attentionï¼Œå…¶åªæ˜¯å°†è®¡ç®—å¾—åˆ°çš„qiå’Œkiè¿›è¡Œæ‹†åˆ†ã€‚æˆ‘ä»¬å…ˆä»aä¹˜ä¸ŠçŸ©é˜µWqå˜æˆqï¼Œç„¶åå†å°†qä¹˜ä¸Šä¸¤ä¸ªä¸åŒçš„çŸ©é˜µW(q,1)ï¼ŒW(q,2)ï¼Œåˆ†åˆ«å˜æˆä¸¤ä¸ªä¸åŒçš„å‘é‡q1å’Œq2ã€‚kå’Œvä¹Ÿæ˜¯åŒæ ·çš„è¿›è¡Œæ“ä½œã€‚ç„¶åçš„è¯ç”¨q1,k1,v1å»æŒ‰ç…§ä¹‹å‰çš„æ–¹æ³•è®¡ç®—å‡ºä¸€ä¸ªb1å‡ºæ¥ï¼Œå†ç”¨q2,k2,v2å»è®¡ç®—å‡ºä¸€ä¸ªb2å‡ºæ¥</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112728011.png" /></p>
<p>æœ€åå†å°†b1å’Œb2ç»„åˆèµ·æ¥ï¼Œä¹˜ä¸Šä¸€ä¸ªæƒé‡çŸ©é˜µï¼Œå¾—åˆ°æœ€ç»ˆçš„ç»“æœå‘é‡b.</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112737330.png" /></p>
<h4 id="positional-encoding">2ã€Positional Encoding</h4>
<p>â€‹
æˆ‘ä»¬ä¼šå‘ç°ï¼Œåœ¨å…ˆå‰çš„Self-Attentionæ¶æ„ä¸­ï¼Œå…¶å¹¶æ²¡æœ‰è€ƒè™‘è¾“å…¥å‘é‡ç»„ä¹‹é—´å‘é‡çš„è¿œè¿‘å¯¹äºå…¶ç›¸å…³æ€§çš„å½±å“ã€‚å°±æ¯”å¦‚a1å¦‚æœå’Œa2æ¢äº†ä½ç½®ï¼Œä¹Ÿä¸ä¼šå½±å“a1å’Œa4çš„ç›¸å…³æ€§åº¦é‡ã€‚æ‰€ä»¥æˆ‘ä»¬ä¼šæƒ³è¦æœ‰å¦‚ä¸‹çš„æƒ³æ³•ï¼šå¯¹äºè¾“å…¥å‘é‡é›†åˆä¸­çš„æ¯ä¸ªå‘é‡æ¥è¯´ï¼Œéƒ½å…ˆåŠ ä¸Šä¸€ä¸ªä¸åŒçš„å‘é‡eï¼Œç„¶åå†å»è¿›è¡Œå…ˆå‰çš„æ“ä½œã€‚è¿™ä¸ªeå¯ä»¥æ˜¯äººå·¥æŒ‡å®šçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æœºå™¨å­¦åˆ°çš„è§„å¾‹ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112754051.png" /></p>
<p>â€‹
å…³äºeç©¶ç«Ÿéœ€è¦æ˜¯æ€ä¹ˆæ ·çš„ä¸œè¥¿æ•ˆæœæ‰ä¼šå¥½ï¼Œæœ‰è®¸è®¸å¤šå¤šçš„æ–‡ç« ç ”ç©¶ã€‚æ­¤å¤„åªæ˜¯è®²è§£ä¸€ä¸ªåŸºæœ¬çš„åšæ³•ï¼Œå…·ä½“æ„Ÿå…´è¶£å¯ä»¥æŸ¥çœ‹ä¸‹é¢çš„è®ºæ–‡ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112802708.png" /></p>
<h3 id="äº”self-attentionåº”ç”¨">äº”ã€Self-Attentionåº”ç”¨</h3>
<p>â€‹
Self-Attentionæœºåˆ¶åº”ç”¨å¹¿æ³›ï¼Œæœ€å¤šçš„å°±æ˜¯åº”ç”¨åœ¨Transformeræ¶æ„å’ŒBERTæ¶æ„ä¸­ï¼Œå¹¿æ³›çš„ç”¨äºNLPé¢†åŸŸã€‚ä½†é™¤äº†NLPé¢†åŸŸï¼Œå…¶å®å…¶åœ¨å¾ˆå¤šé¢†åŸŸä¹Ÿé€‚ç”¨ã€‚</p>
<p>â€‹
æ¯”å¦‚è¯´ä¸‹å›¾æ‰€ç¤ºçš„è¯­éŸ³å¤„ç†é¢†åŸŸï¼Œæˆ‘ä»¬æœ€å¼€å§‹å°±è¯´è¿‡å¦‚ä½•å°†ä¸€æ®µè¯­éŸ³çœ‹ä½œæ˜¯ä¸€ä¸ªå‘é‡é›†åˆä½œä¸ºè¾“å…¥ï¼Œç„¶åå°±å¯ä»¥é‡‡ç”¨Self-Attentionçš„æœºåˆ¶ï¼Œè¿›è¡Œç›¸å…³çš„ä»»åŠ¡ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112819190.png" /></p>
<p>â€‹
æˆ–è€…åœ¨å›¾åƒå¤„ç†çš„é¢†åŸŸï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€å¼ RGBå›¾çš„æ¯ä¸€ä¸ªåƒç´ ç‚¹çš„RGBä¸‰ä¸ªå€¼ï¼Œè§†ä¸ºä¸€ä¸ªå‘é‡è¾“å…¥ï¼Œç„¶åä¸€å¼ Imageå°±å¯ä»¥è¢«è§†ä¸ºä¸€ä¸ªImageWidth*ImageHeighté•¿åº¦çš„å‘é‡çš„é›†åˆã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112827842.png" /></p>
<p>â€‹
ä»¥ä¸‹ä¸¤ç¯‡æ˜¯ä½¿ç”¨äº†Self-Attentionæ¶æ„çš„æœ‰å…³ä¸å›¾åƒç”Ÿæˆå’Œå›¾åƒæ£€æµ‹çš„è®ºæ–‡ï¼Œåç»­å¯èƒ½ä¼šå‡ºç›¸å…³çš„è®ºæ–‡é˜…è¯»ç¬”è®°ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112836400.png" /></p>
<p>â€‹
é‚£ä¹ˆSelf-Attentionå’ŒCNNåˆ°åº•æœ‰å•¥åŒºåˆ«å‘¢ï¼Ÿå…¶å®æŒ‰ç…§æˆ‘ä»¬ä¸Šé¢å¯¹å›¾åƒçš„ç†è§£ï¼ŒCNNå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªåªæœ‰ä¸€å°éƒ¨åˆ†æ„ŸçŸ¥åŸŸçš„Self-Attentionã€‚å› ä¸ºCNNçš„å…¶ä¸­ä¸€ä¸ªç‰¹å¾ï¼Œå°±æ˜¯å®ƒæœ‰ç‹¬ç‰¹çš„æ„ŸçŸ¥åŸŸï¼Œåªæ„ŸçŸ¥æŸåƒç´ å‘¨å›´ä¸€éƒ¨åˆ†å’Œè¯¥åƒç´ çš„å…³è”ï¼Œè€ŒSelf-Attetionåˆ™æ˜¯ä¼šè€ƒè™‘æ•´ä¸ªåºåˆ—ï¼Œä¹Ÿå°±æ˜¯è¯¥åƒç´ å’Œæ‰€æœ‰åƒç´ ä¹‹é—´çš„å…³è”ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112848232.png" /></p>
<p>â€‹ æœ‰äººåšè¿‡ç ”ç©¶ï¼Œåœ¨ã€ŠOn the Relationship between Self-Attention and
Convolutional
Layersã€‹è¿™ç¯‡è®ºæ–‡ä¸­ï¼Œä»¥ä¸¥æ ¼çš„æ•°å­¦è¯æ˜äº†CNNæ˜¯Self-Attentionçš„å­é›†ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ä¸€å®šæ¡ä»¶ä¸‹ï¼ŒSelf-Attentionå¯ä»¥å’ŒCNNå®ç°å®Œå…¨ç›¸åŒçš„æ•ˆæœã€‚</p>
<p>â€‹ åŒæ—¶ï¼Œåœ¨ã€ŠAn Image is Worth 16x16 Words: Transformers for Image
Recognition at
Scaleã€‹è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä½œè€…ä¹Ÿæ¯”è¾ƒäº†ä¸¤è€…çš„å·®åˆ«ã€‚è®­ç»ƒæ•°æ®è¶Šå¤šï¼ŒSelf-Attentionæœ€åæ‹Ÿåˆçš„æ•ˆæœè¶Šå¥½ï¼Œè€ŒCNNåœ¨è®­ç»ƒæ•°æ®è¾ƒå°‘æ—¶ï¼Œæ•ˆæœè¾ƒå¥½ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112858420.png" /></p>
<p>â€‹
æ­¤å¤„è¿˜æœ‰ä¸€äº›Self-Attentionç”¨äºRNNå’ŒGraphé¢†åŸŸçš„å†…å®¹ï¼Œç”±äºä¸æˆ‘æ‰€å­¦ä¹ çš„é¢†åŸŸç›¸å…³æ€§ä¸å¤§ï¼Œæ‰€ä»¥å°±æš‚ä¸”å¿½ç•¥äº†ï¼Œæ„Ÿå…´è¶£å¯ä»¥å»æå®æ¯…è€å¸ˆçš„Attentionçš„è¯¾ç¨‹æœ€åæ‰¾åˆ°å¯¹åº”çš„è®ºæ–‡å†…å®¹ã€‚</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Transformerç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Transformer</tag>
        <tag>Self Attention</tag>
      </tags>
  </entry>
  <entry>
    <title>Pytorchå­¦ä¹ ç¬”è®°10â€”â€”PyTorch ä¸­ï¼Œnnä¸nn.functionalæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼ˆæ¬è¿ï¼‰</title>
    <url>/2022/01/18/acaa679c551a/</url>
    <content><![CDATA[<h1 id="pytorch-ä¸­nn-ä¸-nn.functional-æœ‰ä»€ä¹ˆåŒºåˆ«">PyTorch ä¸­ï¼Œnn ä¸
nn.functional æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h1>
<p>â€‹
æ³¨ï¼šåœ¨é˜…è¯»ä»£ç ä»¥åŠPytorchæ–‡æ¡£çš„æ—¶å€™å‘ç°ï¼Œnnå’Œnn.functionalæœ‰å¾ˆå¤šç›¸åŒçš„å‡½æ•°ï¼Œæ–‡æ¡£ä¸­ä¹Ÿæœ‰è®¸å¤šå¼•ç”¨ï¼Œæ•…è€Œæœç´¢äº†ä¸€ä¸‹æœ‰ä½•åŒºåˆ«ï¼Œè¯¥æ–‡ä¸ºæ¬è¿æ–‡ï¼Œä»¥ä¸‹ä¸ºå¼•ç”¨è¯´æ˜ï¼Œé¿å…äº§ç”Ÿè¯¯ä¼šã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä½œè€…ï¼šè‚¥æ³¢å–‡é½</span><br><span class="line">é“¾æ¥ï¼šhttps://www.zhihu.com/question/66782101/answer/579393790</span><br><span class="line">æ¥æºï¼šçŸ¥ä¹</span><br><span class="line">è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="ä¸¤è€…çš„ç›¸åŒä¹‹å¤„">1ã€ä¸¤è€…çš„ç›¸åŒä¹‹å¤„ï¼š</h4>
<ul>
<li><code>nn.Xxx</code>å’Œ<code>nn.functional.xxx</code>çš„å®é™…åŠŸèƒ½æ˜¯ç›¸åŒçš„ï¼Œå³<code>nn.Conv2d</code>å’Œ<code>nn.functional.conv2d</code>
éƒ½æ˜¯è¿›è¡Œå·ç§¯ï¼Œ<code>nn.Dropout</code>
å’Œ<code>nn.functional.dropout</code>éƒ½æ˜¯è¿›è¡Œdropout,â€¦â€¦â€¦â€¦â€¦â€¦ï¼›</li>
<li>è¿è¡Œæ•ˆç‡ä¹Ÿæ˜¯è¿‘ä¹ç›¸åŒã€‚</li>
</ul>
<p>â€‹
<code>nn.functional.xxx</code>æ˜¯å‡½æ•°æ¥å£ï¼Œè€Œ<code>nn.Xxx</code>æ˜¯<code>nn.functional.xxx</code>çš„ç±»å°è£…ï¼Œå¹¶ä¸”<strong><code>nn.Xxx</code>éƒ½ç»§æ‰¿äºä¸€ä¸ªå…±åŒç¥–å…ˆ<code>nn.Module</code>ã€‚</strong>è¿™ä¸€ç‚¹å¯¼è‡´<code>nn.Xxx</code>é™¤äº†å…·æœ‰<code>nn.functional.xxx</code>åŠŸèƒ½ä¹‹å¤–ï¼Œå†…éƒ¨é™„å¸¦äº†<code>nn.Module</code>ç›¸å…³çš„å±æ€§å’Œæ–¹æ³•ï¼Œä¾‹å¦‚<code>train(), eval(),load_state_dict, state_dict</code>ç­‰ã€‚</p>
<h4 id="ä¸¤è€…çš„å·®åˆ«ä¹‹å¤„">2ã€ä¸¤è€…çš„å·®åˆ«ä¹‹å¤„ï¼š</h4>
<ul>
<li><strong>ä¸¤è€…çš„è°ƒç”¨æ–¹å¼ä¸åŒã€‚</strong></li>
</ul>
<p><code>nn.Xxx</code>
éœ€è¦å…ˆå®ä¾‹åŒ–å¹¶ä¼ å…¥å‚æ•°ï¼Œç„¶åä»¥å‡½æ•°è°ƒç”¨çš„æ–¹å¼è°ƒç”¨å®ä¾‹åŒ–çš„å¯¹è±¡å¹¶ä¼ å…¥è¾“å…¥æ•°æ®ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">inputs = torch.rand(<span class="number">64</span>, <span class="number">3</span>, <span class="number">244</span>, <span class="number">244</span>)</span><br><span class="line">conv = nn.Conv2d(in_channels=<span class="number">3</span>, out_channels=<span class="number">64</span>, kernel_size=<span class="number">3</span>, padding=<span class="number">1</span>)</span><br><span class="line">out = conv(inputs)</span><br></pre></td></tr></table></figure>
<p><code>nn.functional.xxx</code>åŒæ—¶ä¼ å…¥è¾“å…¥æ•°æ®å’Œweight,
biasç­‰å…¶ä»–å‚æ•° ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">weight = torch.rand(<span class="number">64</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line">bias = torch.rand(<span class="number">64</span>) </span><br><span class="line">out = nn.functional.conv2d(inputs, weight, bias, padding=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong><code>nn.Xxx</code>ç»§æ‰¿äº<code>nn.Module</code>ï¼Œ
èƒ½å¤Ÿå¾ˆå¥½çš„ä¸<code>nn.Sequential</code>ç»“åˆä½¿ç”¨ï¼Œ
è€Œ<code>nn.functional.xxx</code>æ— æ³•ä¸<code>nn.Sequential</code>ç»“åˆä½¿ç”¨ã€‚</strong></p></li>
<li><p><strong><code>nn.Xxx</code>ä¸éœ€è¦ä½ è‡ªå·±å®šä¹‰å’Œç®¡ç†weightï¼›è€Œ<code>nn.functional.xxx</code>éœ€è¦ä½ è‡ªå·±å®šä¹‰weightï¼Œæ¯æ¬¡è°ƒç”¨çš„æ—¶å€™éƒ½éœ€è¦æ‰‹åŠ¨ä¼ å…¥weight,
ä¸åˆ©äºä»£ç å¤ç”¨ã€‚</strong></p>
<p>ä¾‹å¦‚ï¼šä½¿ç”¨<code>nn.Xxx</code>å®šä¹‰ä¸€ä¸ªCNN</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CNN</span>(nn.Module):</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(CNN, self).__init__()</span><br><span class="line">        </span><br><span class="line">        self.cnn1 = nn.Conv2d(in_channels=<span class="number">1</span>,  out_channels=<span class="number">16</span>, kernel_size=<span class="number">5</span>,padding=<span class="number">0</span>)</span><br><span class="line">        self.relu1 = nn.ReLU()</span><br><span class="line">        self.maxpool1 = nn.MaxPool2d(kernel_size=<span class="number">2</span>)</span><br><span class="line">        </span><br><span class="line">        self.cnn2 = nn.Conv2d(in_channels=<span class="number">16</span>, out_channels=<span class="number">32</span>, kernel_size=<span class="number">5</span>,  padding=<span class="number">0</span>)</span><br><span class="line">        self.relu2 = nn.ReLU()</span><br><span class="line">        self.maxpool2 = nn.MaxPool2d(kernel_size=<span class="number">2</span>)</span><br><span class="line">        </span><br><span class="line">        self.linear1 = nn.Linear(<span class="number">4</span> * <span class="number">4</span> * <span class="number">32</span>, <span class="number">10</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = x.view(x.size(<span class="number">0</span>), -<span class="number">1</span>)</span><br><span class="line">        out = self.maxpool1(self.relu1(self.cnn1(x)))</span><br><span class="line">        out = self.maxpool2(self.relu2(self.cnn2(out)))</span><br><span class="line">        out = self.linear1(out.view(x.size(<span class="number">0</span>), -<span class="number">1</span>))</span><br><span class="line">        <span class="keyword">return</span> out</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>nn.function.xxx</code>å®šä¹‰ä¸€ä¸ªä¸ä¸Šé¢ç›¸åŒçš„CNNã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CNN</span>(nn.Module):</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(CNN, self).__init__()</span><br><span class="line">        </span><br><span class="line">        self.cnn1_weight = nn.Parameter(torch.rand(<span class="number">16</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>))</span><br><span class="line">        self.bias1_weight = nn.Parameter(torch.rand(<span class="number">16</span>))</span><br><span class="line">        </span><br><span class="line">        self.cnn2_weight = nn.Parameter(torch.rand(<span class="number">32</span>, <span class="number">16</span>, <span class="number">5</span>, <span class="number">5</span>))</span><br><span class="line">        self.bias2_weight = nn.Parameter(torch.rand(<span class="number">32</span>))</span><br><span class="line">        </span><br><span class="line">        self.linear1_weight = nn.Parameter(torch.rand(<span class="number">4</span> * <span class="number">4</span> * <span class="number">32</span>, <span class="number">10</span>))</span><br><span class="line">        self.bias3_weight = nn.Parameter(torch.rand(<span class="number">10</span>))</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = x.view(x.size(<span class="number">0</span>), -<span class="number">1</span>)</span><br><span class="line">        out = F.conv2d(x, self.cnn1_weight, self.bias1_weight)</span><br><span class="line">        out = F.relu(out)</span><br><span class="line">        out = F.max_pool2d(out)</span><br><span class="line">        </span><br><span class="line">        out = F.conv2d(x, self.cnn2_weight, self.bias2_weight)</span><br><span class="line">        out = F.relu(out)</span><br><span class="line">        out = F.max_pool2d(out)</span><br><span class="line">        </span><br><span class="line">        out = F.linear(x, self.linear1_weight, self.bias3_weight)</span><br><span class="line">        <span class="keyword">return</span> out</span><br></pre></td></tr></table></figure></li>
</ul>
<p>â€‹
ä¸Šé¢ä¸¤ç§å®šä¹‰æ–¹å¼å¾—åˆ°CNNåŠŸèƒ½éƒ½æ˜¯ç›¸åŒçš„ï¼Œä½†PyTorchå®˜æ–¹æ¨èï¼šå…·æœ‰å­¦ä¹ å‚æ•°çš„ï¼ˆä¾‹å¦‚ï¼Œconv2d,
linear,
batch_norm)é‡‡ç”¨<code>nn.Xxx</code>æ–¹å¼ï¼Œæ²¡æœ‰å­¦ä¹ å‚æ•°çš„ï¼ˆä¾‹å¦‚ï¼Œmaxpool,
loss func, activation
funcï¼‰ç­‰æ ¹æ®ä¸ªäººé€‰æ‹©ä½¿ç”¨<code>nn.functional.xxx</code>æˆ–è€…<code>nn.Xxx</code>æ–¹å¼ã€‚</p>
<p>â€‹
ä½†å…³äº<strong>dropout</strong>ï¼Œä¸ªäººå¼ºçƒˆæ¨èä½¿ç”¨<code>nn.Xxx</code>æ–¹å¼ï¼Œå› ä¸ºä¸€èˆ¬æƒ…å†µä¸‹åªæœ‰è®­ç»ƒé˜¶æ®µæ‰è¿›è¡Œdropoutï¼Œåœ¨evalé˜¶æ®µéƒ½ä¸ä¼šè¿›è¡Œdropoutã€‚ä½¿ç”¨<code>nn.Xxx</code>æ–¹å¼å®šä¹‰dropoutï¼Œåœ¨è°ƒç”¨<code>model.eval()</code>ä¹‹åï¼Œmodelä¸­æ‰€æœ‰çš„dropout
layeréƒ½å…³é—­ï¼Œä½†ä»¥<code>nn.function.dropout</code>æ–¹å¼å®šä¹‰dropoutï¼Œåœ¨è°ƒç”¨<code>model.eval</code>ä¹‹åå¹¶ä¸èƒ½å…³é—­dropoutã€‚</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Pytorchç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>Transformerç³»åˆ—ç¬”è®°3â€”â€”Vision Transformeræ€æƒ³ä¸æ¶æ„</title>
    <url>/2021/12/08/5899e5598f03/</url>
    <content><![CDATA[<p>è®ºæ–‡åç§°ï¼šã€ŠAn Image is Worth 16x16 Words: Transformers for Image
Recognition at Scaleã€‹</p>
<h4
id="è®ºæ–‡åœ°å€httpsarxiv.orgabs2010.11929">è®ºæ–‡åœ°å€ï¼šhttps://arxiv.org/abs/2010.11929</h4>
<h4 id="æ¨¡å‹vision-transformer-vit">æ¨¡å‹ï¼šVision Transformer (ViT)</h4>
<h3 id="ä¸€è®ºæ–‡æ‘˜è¦ä¸vision-transformerèƒŒæ™¯ä»‹ç»">ä¸€ã€è®ºæ–‡æ‘˜è¦ä¸Vision
TransformerèƒŒæ™¯ä»‹ç»</h3>
<p>â€‹
è‡ªä»Transfomeræœºåˆ¶å‡ºç°ä»¥åï¼Œå·²ç»æˆä¸ºäº†NLPé¢†åŸŸçš„ä¸šç•Œæ ‡å‡†æµç¨‹ï¼Œä½†æ˜¯åœ¨CVé¢†åŸŸçš„åº”ç”¨è¾ƒå°‘ã€‚CVé¢†åŸŸä¸­å¾€å¾€éƒ½æ˜¯ä¼šå°†å…¶å’ŒCNNç»“åˆä½¿ç”¨ï¼Œæˆ–æ˜¯ä»£æ›¿CNNæ¶æ„ä¸­çš„ä¸€éƒ¨åˆ†ã€‚è¿™ç¯‡è®ºæ–‡å°±æå‡ºäº†å…¶å®åœ¨CVé¢†åŸŸä¸­ï¼ŒTransformerå¹¶ä¸éœ€è¦ä¾èµ–äºCNNæ¥è¿›è¡Œä½¿ç”¨ï¼Œå…¶æå‡ºçš„Vision
Transformeræ¶æ„ï¼Œåœ¨åŸºäºä¸€äº›å¤§ä½“é‡æ•°æ®çš„é¢„è®­ç»ƒçš„ç½‘ç»œå‚æ•°ç„¶åå†è¿ç§»å­¦ä¹ åˆ°ä¸€äº›è®­ç»ƒä»»åŠ¡æ—¶ï¼Œèƒ½å¤Ÿå–å¾—éå¸¸å¥½çš„æ•ˆæœï¼Œå¹¶ä¸”ä¹Ÿèƒ½èŠ‚çœè®­ç»ƒçš„è®¡ç®—èµ„æºã€‚æ‰€ä»¥Vision
Transformeræ˜¯åº”ç”¨äºCVé¢†åŸŸçš„ï¼Œä¸ç®€å•ä¾æ‰˜äºCNNæ¶æ„çš„ä¸€ç±»Transformeræ¶æ„çš„è¡ç”Ÿå†…å®¹ã€‚åœ¨æ­¤è®ºæ–‡ä¸­ï¼Œå…¶åº”ç”¨äºäº†CVé¢†åŸŸçš„å›¾è±¡è¯†åˆ«ä»»åŠ¡ã€‚</p>
<h3 id="äºŒvision-transformerç½‘ç»œæ¶æ„">äºŒã€Vision
Transformerç½‘ç»œæ¶æ„</h3>
<p>â€‹
å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå·¦ä¾§ä¸ºViTç½‘ç»œçš„æ¦‚è§ˆï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¯¥ç½‘ç»œå°†å›¾ç‰‡åˆ†ä¸ºä¸€å°å—ä¸€å°å—çš„ï¼Œå°†æ¯ä¸€ä¸ªå°å—è§†ä¸ºä¸€ä¸ªå‘é‡(è¢«ç§°ä¸ºFlattened
Patches),ç„¶åå›¾ä¸­çš„Linear Projection of
è¿™å±‚å¯ä»¥è¢«è§†ä¸ºæ˜¯ä¸€ä¸ªEmbeddingå±‚ï¼Œå°†æ¯ä¸€å—å›¾åƒEmbeddingæˆä¸ºä¸€ä¸ªå¯¹åº”çš„å‘é‡ï¼Œç„¶åå†åœ¨è¿™ä¸€ç³»åˆ—å‘é‡å‰é¢ï¼Œæ–°å¢ä¸€ä¸ªç”¨äºåˆ†ç±»çš„å‘é‡ï¼Œå«åšClass
Token,å†ç»™æ¯ä¸€ä¸ªå‘é‡åŠ ä¸Šä¸€ä¸ªè¡¨ç¤ºä½ç½®ä¿¡æ¯çš„å‘é‡ã€‚éšåå°†è¿™äº›å‘é‡è¾“å…¥è¿›Transformer
Encoderä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒEncoderå¯¹äºä¸€ä¸ªè¾“å…¥åºåˆ—ä¸­çš„æ¯ä¸€ä¸ªå‘é‡ï¼Œéƒ½ä¼šè¾“å‡ºä¸€ä¸ªå¯¹åº”çš„å‘é‡ï¼Œæˆ‘ä»¬ä»…å–Class
Tokenè¾“å…¥å¯¹åº”çš„è¾“å‡ºå‘é‡ï¼Œå°†å…¶æ”¾å…¥MLP
Headæ¨¡å—ï¼ˆè¿™æ˜¯ä¸€ä¸ªæœ€ç»ˆç”¨äºåˆ†ç±»çš„å±‚ç»“æ„ï¼‰ä¸­ï¼Œç„¶åå†ç”±MLP
Headæ¨¡å—è¾“å‡ºåˆ†ç±»ç±»åˆ«ã€‚Transformer
Encoderå†…éƒ¨çš„å—ç»“æ„ä¸Transformerçš„ç»“æ„ç±»ä¼¼ï¼Œå…¶ä¸­MLPæ˜¯æ–°çš„æ¨¡å—ï¼Œåç»­ä¼šè¯¦ç»†å†è®²ã€‚åˆ°æ­¤ä¸ºæ­¢å°±æ˜¯æ•´ä¸ªViTç½‘ç»œåŸºæœ¬çš„æ¶æ„ã€‚æ¥ä¸‹æ¥ä¼šæŒ‰ç…§é¡ºåºï¼Œä¸€ä¸ªä¸€ä¸ªæ¨¡å—çš„è¿›è¡Œè¯¦ç»†çš„ä»‹ç»ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115115915557.png" /></p>
<h4 id="linear-projection-of-flattened-patchesembeddingå±‚">1ã€Linear
Projection of Flattened Patchesï¼ˆEmbeddingå±‚ï¼‰</h4>
<p>â€‹
å¯¹äºæ ‡å‡†çš„Transformerçš„Encoderæ¨¡å—ï¼Œä¸€èˆ¬è¦æ±‚è¾“å…¥çš„æ˜¯å‘é‡åºåˆ—ï¼Œä¹Ÿå°±æ˜¯åº”è¯¥æ˜¯ä¸€ä¸ªäºŒç»´çŸ©é˜µ[num_token,token_dim]ã€‚åœ¨è¯¥ç½‘ç»œæ¶æ„çš„ä»£ç å®ç°ä¸­ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ä¸€ä¸ªå·ç§¯å±‚æ¥å®ç°ï¼Œæ¯”å¦‚è¯´ViT-B/16ï¼ŒBä»£è¡¨Baseï¼Œ16ä»£è¡¨åˆ†å‰²ä»¥16*16ä¸ºå•ä½åˆ†å‰²æºå›¾åƒã€‚åœ¨è¿™ä¸ªç½‘ç»œä¸­ï¼Œä½¿ç”¨å·ç§¯æ ¸å¤§å°ä¸º16*16ï¼Œæ­¥é•¿ä¸º16ã€‚</p>
<p>â€‹
å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„å›¾ç‰‡æ˜¯[224,224,3]çš„å¤§å°ï¼Œé‚£ä¹ˆç»è¿‡å·ç§¯ä»¥åå°±ä¼šå˜æˆ[14,14,768]çš„å¤§å°ï¼Œç„¶åå±•å¹³å°±ä¼šæœ€ç»ˆå˜æˆ[196,768]çš„äºŒç»´çŸ©é˜µã€‚</p>
<p>â€‹ åœ¨è¾“å…¥åˆ°Encoderä¹‹å‰ï¼Œè¿˜éœ€è¦åŠ ä¸Š ç”¨äºåˆ†ç±»çš„å‘é‡class tokenå’Œposition
embeddingï¼Œè¿™ä¸¤è€…éƒ½æ˜¯å¯è®­ç»ƒå‚æ•°ã€‚</p>
<p>â€‹ æ‹¼æ¥[class]token:Cat([1,768],[196,768]) -&gt;[197,768]</p>
<p>â€‹ å åŠ Position Embedding: [197,768] -&gt; [197,768]</p>
<p>â€‹ Position
Embeddingåœ¨æ­¤å¤„æ˜¯é€šè¿‡ç›´æ¥å åŠ ç›¸åŠ çš„æ–¹æ³•å®Œæˆçš„ï¼Œæ‰€ä»¥çŸ©é˜µçš„ç»´åº¦ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼ŒåŒæ—¶ï¼ŒåŸè®ºæ–‡ä¸­ç»™å‡ºäº†ä¸åŒç»´åº¦çš„Position
Embeddingçš„æ•ˆæœï¼Œæˆ‘ä»¬å‘ç°1ç»´å’Œ2ç»´çš„æ•ˆæœå·®ä¸å¤šï¼Œä½†æ˜¯éƒ½æ¯”æ²¡æœ‰Position
Embeddingçš„ç»“æœè¦å¥½ï¼Œæ‰€ä»¥åœ¨å®ç°è¿‡ç¨‹ä¸­å°±å¯ä»¥å®ç°ä¸€ç»´çš„Pisition
Embeddingè¿›è¡Œå åŠ ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115115949427.png" /></p>
<p>â€‹ é‚£ä¹ˆï¼Œå…·ä½“å åŠ çš„ä¸€ç»´çš„Position
Embeddingåº”è¯¥æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯¹äºæ¯ä¸ªä½ç½®è®¡ç®—å…¶å’Œå…¶ä»–ä½ç½®çš„ä½™å¼¦ç›¸ä¼¼åº¦ã€‚å³å¯å¾—åˆ°å åŠ çš„å…·ä½“æ•°å€¼ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120001864.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120004895.png" /></p>
<h4 id="transformer-encoderå±‚">2ã€Transformer Encoderå±‚</h4>
<p>â€‹ å…¶å’ŒTransformerä¸­Encoderç±»ä¼¼ï¼Œç”±è®¸å¤šä¸ªBlockç»„æˆ</p>
<p>â€‹ æˆ‘ä»¬å…ˆçœ‹Encoder
Blockçš„ç»“æ„ï¼Œå…¶ä¸­åŸºæœ¬ç»“æ„ä¸åŸå§‹çš„Transformerçš„Encoder
Blockç±»ä¼¼ï¼Œä½†æ˜¯å…¶ä¸­æœ‰ä¸€ä¸ªä¸å¤ªä¸€æ ·çš„MLP Blockç»“æ„ã€‚MLP
Blockçš„ç»“æ„æ˜¾ç¤ºå¦‚å³ä¾§ï¼Œå…¶ä¸­æ˜¯å‡ ä¸ªLinearå±‚ï¼Œç„¶åé…åˆä¸€äº›Dropoutå’Œæ¿€æ´»å‡½æ•°ã€‚MLP
Blockçš„ç¬¬ä¸€ä¸ªLinearå±‚ï¼Œä¼šå°†åŸå§‹çš„è¾“å…¥æ‰©å¤§4å€ï¼Œå°±ä¾‹å¦‚å¦‚æœLinearå±‚çš„è¾“å…¥æ˜¯197
* 768çš„ï¼Œé‚£ä¹ˆè¯¥å±‚çš„è¾“å‡ºæ˜¯197 *
3072ï¼Œç„¶åç¬¬äºŒä¸ªLinearå±‚åˆä¼šå°†è¾“å‡ºå˜å›197*768çš„å¤§å°ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120029921.png" /></p>
<h4 id="mlp-headå±‚">3ã€MLP Headå±‚</h4>
<p>â€‹
æ­¤å±‚åœ¨è®­ç»ƒä¸åŒçš„æ•°æ®é›†æ—¶ï¼Œç»„æˆæ¨¡å—ä¸å¤ªä¸€æ ·ã€‚å¦‚æœè®­ç»ƒImageNet21Kæˆ–ä¸€äº›æ›´å¤§çš„æ•°æ®é›†çš„æ—¶å€™ï¼Œè¯¥å±‚ç”±Linear+tanhæ¿€æ´»å‡½æ•°+Linearå±‚ç»„æˆã€‚ä½†æ˜¯å¦‚æœè¿ç§»åˆ°ImageNet1Kæˆ–è€…ä¸€äº›å°è§„æ¨¡çš„æ•°æ®é›†ä¸Šï¼Œé‚£å…¶å®åªéœ€è¦ä¸€ä¸ªLinearå±‚å³å¯ã€‚å…·ä½“çš„å†…å®¹å¯ä»¥æŸ¥çœ‹è®ºæ–‡çš„æºç éƒ¨åˆ†ã€‚</p>
<h3 id="ä¸‰ä»¥vit-b16-ä¸ºä¾‹çš„vision-transformeræ¶æ„">ä¸‰ã€ä»¥ViT-B/16
ä¸ºä¾‹çš„Vision Transformeræ¶æ„</h3>
<p>â€‹
æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…ˆå‰æ‰€è®²çš„å„ä¸ªæ¨¡å—ç»„åˆåœ¨ä¸€èµ·ä»¥åï¼Œæ•´ä¸ªç½‘ç»œçš„ä¸€ä¸ªæ¶æ„ã€‚å›¾ä¸­çš„Pre-Logitséƒ¨åˆ†å…¶å®å°±æ˜¯ä¸€ä¸ªå…¨è¿æ¥å±‚+æ¿€æ´»å‡½æ•°ï¼Œè§†æƒ…å†µå¯ä»¥èˆå¼ƒã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120118127.png" /></p>
<h3 id="å››ä¸åŒvitæ¨¡å‹çš„å‚æ•°">å››ã€ä¸åŒViTæ¨¡å‹çš„å‚æ•°</h3>
<p>â€‹ åœ¨è®ºæ–‡çš„Table1ä¸­æœ‰ç»™å‡ºä¸‰ä¸ªæ¨¡å‹ï¼ˆBase/ Large/ Hugeï¼‰çš„å‚æ•°</p>
<ul>
<li><p>Layers æ˜¯Transformer Encoderä¸­é‡å¤å †å Encoder
Blockçš„æ¬¡æ•°ã€‚</p></li>
<li><p>Hidden Sizeæ˜¯é€šè¿‡Embeddingå±‚åæ¯ä¸ªå‘é‡çš„é•¿åº¦ï¼ˆtoken çš„
dimï¼‰ã€‚</p></li>
<li><p>MLP Size æ˜¯Transformer Encoderä¸­MLP
Blockç¬¬ä¸€ä¸ªå…¨è¿æ¥çš„èŠ‚ç‚¹ä¸ªæ•°ï¼Œä¸€èˆ¬æ¥è¯´æ˜¯Hidden Sizeçš„4å€ã€‚</p></li>
<li><p>Heads ä»£è¡¨Transformerä¸­Multi-Head Attentionçš„headsæ•°ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120147916.png" /></p></li>
</ul>
<h3 id="äº”hybridæ··åˆæ¨¡å‹">äº”ã€Hybridæ··åˆæ¨¡å‹</h3>
<p>â€‹
å¼•ç”¨ï¼šhttps://blog.csdn.net/qq_37541097/article/details/118242600</p>
<p>åœ¨è®ºæ–‡ä¸­å…¶ä¹ŸæåŠäº†Hybridæ··åˆæ¨¡å‹ï¼Œå…¶å°±æ˜¯å…ˆå‰æ‘˜è¦ä¸­æåˆ°çš„å°†ä¼ ç»ŸCNNç‰¹å¾æå–å’ŒTransformerè¿›è¡Œç»“åˆçš„åšæ³•ã€‚</p>
<p>â€‹ å…¶é¦–å…ˆç”¨ä¼ ç»Ÿçš„CNNæå–ç‰¹å¾ï¼Œç„¶åå†ç”¨Vitæ¨¡å‹è¿›ä¸€æ­¥å¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚</p>
<p>â€‹
æ•´ä½“çš„ç½‘ç»œæ¶æ„å¦‚ä¸‹ï¼šä»¥ResNet50ä½œä¸ºç‰¹å¾æå–å™¨çš„æ··åˆæ¨¡å‹ï¼Œä½†è¿™é‡Œçš„Resnetæœ‰äº›ä¸åŒã€‚é¦–å…ˆè¿™é‡Œçš„R50çš„å·ç§¯å±‚é‡‡ç”¨çš„StdConv2dä¸æ˜¯ä¼ ç»Ÿçš„Conv2dï¼Œç„¶åå°†æ‰€æœ‰çš„BatchNormå±‚æ›¿æ¢æˆGroupNormå±‚ã€‚åŒæ—¶åœ¨åŸResnet50ç½‘ç»œä¸­ï¼Œstage1é‡å¤å †å 3æ¬¡ï¼Œstage2é‡å¤å †å 4æ¬¡ï¼Œstage3é‡å¤å †å 6æ¬¡ï¼Œstage4é‡å¤å †å 3æ¬¡ï¼Œä½†åœ¨è¿™é‡Œçš„R50ä¸­ï¼ŒæŠŠstage4ä¸­çš„3ä¸ªBlockç§»è‡³stage3ä¸­ï¼Œæ‰€ä»¥stage3ä¸­å…±é‡å¤å †å 9æ¬¡ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120211640.png" /></p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Transformerç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Transformer</tag>
        <tag>Vision Transformer</tag>
        <tag>Computer Vision</tag>
      </tags>
  </entry>
  <entry>
    <title>Transformerç³»åˆ—ç¬”è®°4â€”â€”Swin Transformeræ€æƒ³ä¸æ¶æ„</title>
    <url>/2021/12/09/aba242d32ac9/</url>
    <content><![CDATA[<h4
id="è®ºæ–‡åç§°swin-transformer-hierarchical-vision-transformer-using-shifted-windows">è®ºæ–‡åç§°ï¼šã€ŠSwin
Transformer: Hierarchical Vision Transformer using Shifted
Windowsã€‹</h4>
<h4
id="è®ºæ–‡åœ°å€httpsarxiv.orgabs2103.14030">è®ºæ–‡åœ°å€ï¼šhttps://arxiv.org/abs/2103.14030</h4>
<h4 id="æ¨¡å‹swin-transformer">æ¨¡å‹ï¼šSwin Transformer</h4>
<h3 id="ä¸€è®ºæ–‡æ‘˜è¦ä¸swin-transformerèƒŒæ™¯ä»‹ç»">ä¸€ã€è®ºæ–‡æ‘˜è¦ä¸Swin
TransformerèƒŒæ™¯ä»‹ç»</h3>
<p>â€‹
è®ºæ–‡æ‘˜è¦éƒ¨åˆ†å³æŒ‡å‡ºäº†Transformeråœ¨è§†è§‰é¢†åŸŸåº”ç”¨ä¸NLPé¢†åŸŸçš„ä¸€äº›è¾ƒå¤§çš„å·®åˆ«ï¼Œé¦–å…ˆå°±æ˜¯åœ¨è§†è§‰é¢†åŸŸï¼Œè§†è§‰å®ä½“çš„è§„æ¨¡å°ºåº¦ä¼šå­˜åœ¨è¾ƒå¤§çš„å˜åŒ–ï¼Œä¸¾ä¾‹è€Œè¨€ï¼Œæƒ³è¦è¯†åˆ«åŒä¸€å¼ å›¾åƒä¸­çš„åŒä¸€è·ç¦»çš„æœå®å’Œæ±½è½¦ï¼Œä¸¤è€…çš„è§„æ¨¡å°ºåº¦å¤§å°å¯èƒ½ä¼šå­˜åœ¨è¾ƒå¤§çš„ä¸åŒã€‚ç¬¬äºŒç‚¹å°±æ˜¯ç›¸æ¯”äºæ–‡å­—è€Œè¨€ï¼Œå›¾åƒåƒç´ çš„åˆ†è¾¨ç‡æ›´é«˜ï¼Œä¿¡æ¯é‡æ›´å¤šï¼Œè®¡ç®—æ›´ä¸ºå¤æ‚ï¼Œéœ€è¦æ¶ˆè€—æ›´å¤šçš„è®¡ç®—èµ„æºä¸è®­ç»ƒæ—¶é—´ã€‚ç›¸æ¯”äºå…ˆå‰çš„Vision
Transformerçš„æ¶æ„ï¼ŒSwin Transformerä½¿ç”¨Shifted
Windowsè¿™æ ·ä¸€ä¸ªæŠ€å·§ï¼Œä¸ä»…å¤§å¤§åŠ é€Ÿäº†è®¡ç®—é€Ÿåº¦ï¼Œå’Œå›¾åƒçš„å°ºåº¦å‘ˆçº¿æ€§è®¡ç®—å¤æ‚åº¦ï¼Œå¹¶ä¸”å…¶ä¹Ÿä»ç„¶èƒ½å¤Ÿè€ƒè™‘åˆ°ä¸åŒçª—å£ä¹‹é—´çš„ä¿¡æ¯äº¤äº’ï¼Œåœ¨è¯†åˆ«è´¨é‡ä¸Šä¹Ÿæé«˜äº†2-3ä¸ªç™¾åˆ†ç‚¹ã€‚æ•…è€Œæˆä¸ºäº†åº”ç”¨æ€§éå¸¸å¹¿æ³›çš„ä¸€ä¸ªæ¶æ„ã€‚é‚£ä¹ˆå…·ä½“è€Œè¨€ï¼Œå¦‚ä½•åŠ é€Ÿè®¡ç®—ï¼Œå¹¶ä¸”ä»ç„¶èƒ½å¤Ÿè€ƒè™‘ä¸åŒçª—å£çš„ä¿¡æ¯äº¤äº’ï¼Œåé¢ä¼šè¯¦ç»†è®²è§£ã€‚</p>
<h3 id="äºŒswin-transformeræ•´ä½“æ¶æ„ä»‹ç»">äºŒã€Swin
Transformeræ•´ä½“æ¶æ„ä»‹ç»</h3>
<p>â€‹ åœ¨ä¸Šä¸€ç¯‡ç¬”è®°ä¸­ï¼Œè®²è¿‡äº†ViTç½‘ç»œæ¶æ„ï¼Œç›¸æ¯”äºViTç½‘ç»œæ¶æ„ï¼ŒSwin
Transformerè€ƒè™‘äº†<strong>å¤šå°ºåº¦ä¸‹çš„å›¾åƒ</strong>ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå…¶é€šè¿‡ä¸æ–­çš„ä¸‹é‡‡æ ·ï¼Œåœ¨å¤šä¸ªå›¾åƒçš„å°ºåº¦ç»´åº¦è¿›è¡Œæ£€æµ‹ï¼Œè¿™æ ·çš„è¯ç›´è§‚ä¸Šå¯ä»¥å¾ˆå¥½çš„è§£å†³æˆ‘ä»¬å…ˆå‰è¯´çš„è§†è§‰å®ä½“çš„è§„æ¨¡å°ºåº¦çš„å¤§å°ä¸åŒçš„é—®é¢˜ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120312596.png" /></p>
<p>â€‹ åŒæ ·ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹Swin
Transformeræ•´ä½“çš„ä¸€ä¸ªæ¶æ„æµç¨‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼šå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å‡è®¾è¾“å…¥çš„å›¾åƒæ˜¯é«˜ä¸ºHï¼Œå®½ä¸ºWï¼ŒRGBä¸‰é€šé“24ä½çœŸå½©å›¾ï¼Œé¦–å…ˆå…¶ä¼šæœ‰ä¸€ä¸ªPatch
Partitionå±‚ï¼Œå›¾åƒå®½é«˜å‡å°‘ä¸ºåŸæ¥çš„1/4ï¼Œç»´åº¦ç”±3å˜è‡³48.
ç„¶ååé¢è·Ÿç€å››ä¸ªé˜¶æ®µçš„è¿ç®—ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªé˜¶æ®µä¸­ç»è¿‡çš„æ˜¯Linear
Embeddingå±‚ï¼Œåç»­æ¯ä¸ªé˜¶æ®µå¼€å§‹éƒ½ä¼šç»è¿‡Patch
Mergingä¹Ÿå°±æ˜¯å¯¹å›¾åƒè¿›è¡Œä¸‹é‡‡æ ·ï¼Œç„¶åç»è¿‡å †å çš„Swin Transformer
Blockã€‚æ­¤å¤„å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šæˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼ŒSwin Transformer
Blockçš„å †å æ¬¡æ•°éƒ½æ˜¯å¶æ•°ï¼ŒåŸå› åœ¨äºåœ¨è¯¥æ¶æ„ä¸­ï¼ŒBlockæ˜¯æˆå¯¹å‡ºç°çš„ï¼Œçœ‹åˆ°ä¸‹å›¾çš„å³ä¾§éƒ¨åˆ†ï¼Œæœ‰ä¸¤ä¸ªä¸åŒçš„Blockï¼Œæˆ‘ä»¬æš‚ä¸”å°†ä¹‹ç§°ä¸ºBlock1å’ŒBlock2ï¼Œå¦‚æœSwin
Transformer Blockå †å 2æ¬¡é‚£ä¹ˆå°±æ˜¯Block1+Block2,å¦‚æœSwin Transformer
Blockå †å 6æ¬¡é‚£ä¹ˆå°±æ˜¯Block1+Block2+Block1+Block2+Block1+Block2ã€‚</p>
<p>â€‹ åœ¨æ¯ä¸€ä¸ªBlockä¸­ï¼ŒLNå°±æ˜¯Layer
Normå±‚ï¼Œè¿™ä¸ªå±‚åœ¨å…ˆå‰çš„Transformeræ¶æ„ä¸­å·²ç»å‡ºç°è¿‡å¤šæ¬¡äº†ï¼Œç„¶åMLPæ˜¯å¤šå±‚æ„ŸçŸ¥çº§ï¼Œé€šå¸¸ç”±å…¨è¿æ¥å±‚æ„æˆï¼Œåœ¨Swin
Transformerçš„Blockä¸­ï¼Œæ¯”è¾ƒæ–°çš„å°±æ˜¯W-MSAæ¨¡å—å’ŒSW-MSAæ¨¡å—ï¼Œä¹Ÿå°±æ˜¯è®ºæ–‡æ ‡é¢˜ä¸­æ‰€æåˆ°çš„Shift-Window-Multihead-Self-Attentionæœºåˆ¶ã€‚æ­¤æœºåˆ¶æˆ‘ä»¬åœ¨åç»­ä¸€ä¸ªä¸ªæ¨¡å—æ—¶ä¼šè¿›è¡Œè¯¦ç»†è®²è§£ã€‚</p>
<p>â€‹
åœ¨æ•´ä½“çš„æµç¨‹ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªå†…å®¹å€¼å¾—æˆ‘ä»¬æ³¨æ„ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æ˜¾ç¤ºçš„æ¯ç»è¿‡ä¸€ä¸ªé˜¶æ®µï¼ŒçŸ©é˜µçš„ç»´åº¦å˜åŒ–ã€‚æˆ‘ä»¬å‘ç°ï¼Œæ¯è¿‡ä¸€ä¸ªé˜¶æ®µç‰¹å¾å›¾çš„å®½å’Œé«˜éƒ½ä¼šå‡åŠï¼Œè€Œéšä¹‹ç‰¹å¾å›¾æ•°é‡å°±ä¼šç¿»å€ã€‚å…¶å®æ¯ä¸€ä¸ªä¸åŒçš„é˜¶æ®µå°±æ˜¯åœ¨ä¸åŒçš„å›¾åƒå°ºåº¦ä¸‹å»è¿›è¡Œå†…å®¹æ¨¡å¼çš„è¯†åˆ«è§‚å¯Ÿã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/cvbvbng.png" /></p>
<h3 id="ä¸‰swin-transformerç»†èŠ‚ä»‹ç»">ä¸‰ã€Swin Transformerç»†èŠ‚ä»‹ç»</h3>
<h4 id="patch-partition-linear-embeddingä»‹ç»">1ã€Patch Partition &amp;
Linear Embeddingä»‹ç»</h4>
<p>â€‹
å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯¹äºè¾“å…¥çš„Imagesæ¥è¯´ï¼Œæˆ‘ä»¬å‡è®¾è¾“å…¥çš„å›¾åƒä¸ºH*W*3ï¼Œé‚£ä¹ˆåœ¨Patch
Partitionçš„è¿‡ç¨‹ä¸­ä¼šå°†å…¶åˆ†å‰²æˆ4*4å¤§å°çš„å—ï¼Œç„¶åå°†æ¯ä¸€ä¸ªå—åœ¨ç»´åº¦æ–¹å‘è¿›è¡Œå±•å¹³ï¼Œä¹Ÿå°±æ˜¯è¯´å…ˆå‰çš„H*W*3çš„çŸ©é˜µç»è¿‡æ­¤æ­¥éª¤åï¼Œé•¿å®½ä¼šå˜æˆH/4
* W/4ï¼Œè‡³äºæœ€åä¸€ä¸ªç»´åº¦ï¼Œå°†ä¼šå˜ä¸º3*16 =
48ç»´ï¼Œå› ä¸ºæˆ‘ä»¬å°†å…¶åˆ†å‰²æˆ4*4å¤§å°çš„å—åï¼Œæ˜¯åœ¨ç»´åº¦æ–¹å‘å¯¹å…¶è¿›è¡Œå±•å¹³çš„ã€‚å±•å¹³åï¼Œå†é€šè¿‡Stage1çš„ä¸€ä¸ªLinear
Embeddingå±‚ï¼Œè¯¥å±‚å°±æ˜¯å¯¹åŸæ¥çš„ç¬¬ä¸‰ç»´åº¦ä¸º48ç»´çš„ä¸‰ç»´çŸ©é˜µè¿›è¡Œä¸€ä¸ªç¼–ç ï¼ˆå…¶å®å°±æ˜¯å†è¿›è¡Œä¸€ä¸ªæ˜ å°„ï¼‰ï¼Œç„¶åä¸‰ç»´çŸ©é˜µçš„æœ€åä¸€ä¸ªç»´åº¦çš„å¤§å°å°±ä¼šå˜ä¸ºCã€‚å…·ä½“Cä¸ºå¤šå°‘ï¼Œæ˜¯ä¸åŒç±»å‹çš„Swin
Transformerçš„ä¸€ä¸ªå‚æ•°ï¼Œåæ–‡ä¸­ä¼šè¯¦ç»†æåŠã€‚åœ¨è¿™ä¸¤å±‚çš„å®é™…å®ç°ä¸­ï¼Œå…¶å®éƒ½æ˜¯é€šè¿‡å·ç§¯æ¥å®ç°ç»´åº¦çš„å˜åŒ–ä»¥åŠç¼–ç çš„ï¼Œæ¯”å¦‚åœ¨Patch
Partitionä¸­å°±å¯ä»¥ä½¿ç”¨å¤§å°ä¸º4*4,æ­¥é•¿ä¸º4çš„16ä¸ªå·ç§¯æ ¸æ¥å¯¹åŸå›¾è¿›è¡Œå·ç§¯å¾—åˆ°ç»“æœã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120418491.png" /></p>
<h4 id="patch-merging">2ã€Patch Merging</h4>
<p>â€‹ Patch
Mergingå±‚æ‰€èµ·åˆ°çš„ä½œç”¨å°±æ˜¯å°†å›¾ç‰‡ä¸‹é‡‡æ ·ï¼Œç„¶ååœ¨æ·±åº¦æ–¹å‘è¿›è¡Œæ‹¼æ¥ã€‚ä¸»è¦ç”±å¦‚ä¸‹å›¾æ‰€ç¤ºçš„å‡ æ­¥ç»„æˆï¼š</p>
<p>é¦–å…ˆæ˜¯ä»¥2 *
2çš„æ ¼å­ä¸ºä¸€ç»„ï¼Œå°†æ¯ç»„ä¸­ç›¸åŒä½ç½®çš„åƒç´ æŠ½å‡ºï¼Œå½¢æˆä¸€ä¸ªæ–°çš„çŸ©é˜µã€‚ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼ŒåŸç‰¹å¾çŸ©é˜µä¸º4
* 4ï¼Œé‚£ä¹ˆä»¥2 * 2æ ¼å­ä¸º1ç»„ï¼Œä¼šå½¢æˆ4ç»„æ–°çš„çŸ©é˜µï¼Œæ¯ç»„çš„çŸ©é˜µå¤§å°ä¸º2 *
2ï¼Œä¹Ÿå°±æ˜¯åŸæ¥çš„ä¸€åŠã€‚ç„¶åå°†è¿™4ç»„æ–°å½¢æˆçš„çŸ©é˜µï¼Œåœ¨æ·±åº¦æ–¹å‘åšè¿æ¥ï¼Œç„¶åå®ŒæˆLayerNormï¼Œæœ€åå†åœ¨æ·±åº¦ç»´åº¦è¿›è¡Œä¸€ä¸ªçº¿æ€§æ˜ å°„ï¼Œå°†æ·±åº¦ç»´åº¦å‡åŠã€‚æ­¤æ—¶å°±å®Œæˆäº†æœ€ç»ˆçš„Patch
Mergingå±‚çš„è¾“å‡ºã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120447510.png" /></p>
<p>â€‹
å¯¹æ¯”è¯¥æ¨¡å—çš„è¾“å…¥ä¸è¾“å‡ºï¼Œå¯ä»¥å‘ç°ï¼Œè¾“å‡ºçš„Hå’ŒWæ˜¯è¾“å…¥çš„ä¸€åŠï¼Œæ·±åº¦ç»´åº¦æ˜¯è¾“å…¥çš„2å€ã€‚ç¬¦åˆå…ˆå‰å…¨æµç¨‹ç¤ºæ„å›¾ä¸­çš„H/4
* W/4 * C å˜æˆäº†H/8 * W/8 *
2Cï¼ŒæˆåŠŸçš„å°†å›¾åƒç©ºé—´ä¸Šçš„å°ºå¯¸ç¼©å°ï¼Œç”±è¾ƒå¥½çš„ä¿ç•™äº†ä¿¡æ¯ã€‚</p>
<h4 id="w-msaæ¨¡å—">3ã€W-MSAæ¨¡å—</h4>
<p>â€‹ W-MSA å…¨ç§°ä¸ºWindows Multi-head
Self-Attentionä¹Ÿå°±æ˜¯çª—å£åŒ–çš„Self-Attentionæœºåˆ¶ï¼Œæ­¤å¤„ä»¥åœ¨ä¸€ä¸ª4*4çš„ç‰¹å¾å›¾ä¸Šåšä¸ºä¾‹å­ï¼Œåœ¨ä¸Šä¸€ç¯‡Vision
Transformerä¸­çš„MSAæ¨¡å—ï¼Œ4*4ä¸­çš„æ¯ä¸ªåƒç´ éƒ½è¦å»å’Œå…¶ä»–åƒç´ è¿›è¡Œå…³è”åº¦çš„è®¡ç®—ï¼Œé‚£ä¹ˆåœ¨W-MSAä¸­ï¼Œå…¶å°†åŸ4*4çš„ç‰¹å¾å›¾é¦–å…ˆåˆ†å‰²æˆäº†4ä¸ª2*2çš„Windowçª—å£ï¼Œç„¶åå†åœ¨æ¯ä¸ªçª—å£å†…éƒ¨è¿›è¡Œå•ç‹¬çš„Self-Attentionçš„è®¡ç®—ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªåƒç´ åªéœ€è¦å’Œè‡ªå·±æ‰€å±Windowå†…éƒ¨çš„åƒç´ è¿›è¡Œå…³è”åº¦çš„è®¡ç®—å³å¯ã€‚è¿™æ ·ä¸€æ¥ï¼Œç¡®å®å¤§å¤§å‡å°‘äº†è®¡ç®—é‡ï¼Œä½†æ˜¯ä½ ä¼šå‘ç°çª—å£ä¹‹é—´çš„åƒç´ ä¹Ÿæ— æ³•è¿›è¡Œé€šä¿¡äº†ï¼Œå¯¼è‡´æˆ‘ä»¬çš„æ„Ÿå—é‡å˜å°ï¼Œå¯¹äºæœ€ç»ˆçš„ç»“æœäº§ç”Ÿå½±å“ã€‚ä¼˜åŠ£åŠ¿è¿˜æ˜¯éå¸¸çš„æ˜ç¡®çš„ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120506850.png" /></p>
<p>â€‹
åœ¨åŸè®ºæ–‡ä¸­ï¼Œç»™å‡ºäº†MSAå’ŒW-MSAçš„è®¡ç®—å¤æ‚åº¦çš„æ¨å¯¼ç»“æœå…¬å¼ï¼Œæˆ‘ä»¬å‡è®¾æ¯ä¸ªçª—å£å«æœ‰M
*
Mä¸ªåƒç´ ï¼Œè®¡ç®—å›¾åƒçš„å®½é«˜ä¸ºhå’Œwï¼ŒCå³ä¸ºçŸ©é˜µçš„ç¬¬ä¸‰ç»´åº¦çš„å¤§å°ï¼ˆä¹Ÿå°±æ˜¯æ·±åº¦ï¼‰ã€‚è¯¦ç»†çš„æ¨å¯¼æ­¤å¤„çœç•¥ã€‚æˆ‘ä»¬ä»å…¬å¼ä¸­åº”è¯¥å¯ä»¥çœ‹å‡ºï¼Œç›¸æ¯”äºMSAå¹³æ–¹çš„å¤æ‚åº¦ï¼ˆå¯¹äºhwï¼‰ï¼ŒW-MSAç›¸å¯¹äºhwçš„å¤æ‚åº¦æ˜¯çº¿æ€§çš„ã€‚èƒ½å¤Ÿå¤§å¤§çš„æé«˜è®¡ç®—æ•ˆç‡ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120516476.png" /></p>
<h4 id="sw-msaæ¨¡å—">4ã€SW-MSAæ¨¡å—</h4>
<p>â€‹
ç›¸æ¯”äºW-MSAè€Œè¨€ï¼ŒSW-MSAæ‰æ˜¯æœ¬ç¯‡è®ºæ–‡ä¸­çš„é‡ç‚¹æ¨¡å—ï¼Œè¯¥æ¨¡å—å¼¥è¡¥äº†W-MSAçª—å£ä¸çª—å£é—´æ— æ³•è¿›è¡Œä¿¡æ¯äº¤äº’çš„ç¼ºé™·ï¼ŒåŒæ—¶ä¹Ÿä¿è¯äº†å’ŒW-MSAä¸€æ ·çš„è®¡ç®—å¤æ‚åº¦ã€‚</p>
<p>â€‹
å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å…ˆå‰è¯´è¿‡ï¼Œåœ¨Swin-Transformerä¸­ï¼Œå †å çš„Blockéƒ½æ˜¯å¶æ•°æ¬¡ï¼Œæ˜¯ä¸¤ä¸ªä¸åŒçš„Blockçš„ç»„åˆã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸‹å›¾çš„Layerlæ‰€ç¤ºæ˜¯ç¬¬ä¸€æ¬¡çš„Blockå †å ï¼Œä½¿ç”¨çš„æ˜¯W-MSAï¼Œç„¶ååœ¨Layerl+1ä¸­ï¼Œæˆ‘ä»¬å°†windowè¿›è¡Œäº†é‡æ–°çš„åˆ†å‰²ï¼Œç„¶ååœ¨æ¯ä¸ªwindowä¸­å®Œæˆè®¡ç®—ï¼Œæ–°çš„windowä¸­æœ‰äº›ä»ç„¶æ˜¯è€çš„windowçš„ä¸€éƒ¨åˆ†ï¼Œä½†æœ‰äº›æ–°çš„windowå·²ç»å«æœ‰è€çš„å¤šä¸ªwindowçš„ä¿¡æ¯äº†ï¼Œä¹Ÿå°±æ˜¯å®Œæˆäº†windowé—´çš„ä¿¡æ¯çš„äº¤äº’ã€‚</p>
<p>é‚£ä¹ˆç°åœ¨å°±è®©æˆ‘ä»¬æ¥ä¸€ä¸€è§£å†³ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<p>â€‹ 1ã€è¿™ä¸ªæ˜¯å¦‚ä½•è¿›è¡Œé‡æ–°çš„åˆ†å‰²çš„å‘¢ï¼Ÿ</p>
<p>â€‹
2ã€è¿™æ ·å­é‡æ–°åˆ†å‰²ä»¥åï¼Œç”±äºè¦è®¡ç®—çš„Windowæ•°ç›®å˜æˆäº†9ä¸ªï¼Œå¦‚æœéœ€è¦å¹¶è¡Œè®¡ç®—çš„è¯ï¼Œéœ€è¦å°†æ¯ä¸ªwindowéƒ½å¡«å……è‡³4*4ï¼Œè¿™æ ·å­å°±ä¼šåŠ å¤§æˆ‘ä»¬çš„è®¡ç®—é‡ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120536278.png" /></p>
<p>â€‹ é¦–å…ˆæ˜¯å¦‚ä½•åˆ†å‰²çš„é—®é¢˜ï¼šShifted
Windowé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å°†åŸæ¥çš„åˆ†å‰²çº¿å‘å³å’Œå‘ä¸‹åç§»ä¸€å®šçš„åƒç´ ï¼Œç„¶åå¯¹åŸå›¾å½¢æˆçš„åˆ†å‰²çº¿ï¼Œå°±æ˜¯æ–°çš„windowçš„åˆ’åˆ†çº¿ã€‚ä»¥ä¸Šé¢çš„ç¤ºæ„å›¾ä¸ºä¾‹ï¼Œå°±æ˜¯å°†åŸæ¥çš„åˆ†å‰²çº¿å‘å³ä»¥åŠå‘ä¸‹ç§»åŠ¨äº†2ä¸ªåƒç´ ç‚¹ï¼Œå°±å¾—åˆ°äº†æ–°çš„åˆ’åˆ†ã€‚è¿™ä¸ªç§»åŠ¨çš„è·ç¦»ï¼Œä¸€èˆ¬æ¥è¯´æ˜¯çª—å£çš„ä¸€åŠï¼Œä¹Ÿå°±æ˜¯<span
class="math inline">\(Math.floor(M/2)\)</span>ã€‚</p>
<p>â€‹ æ¥ä¸‹æ¥æ˜¯ç¬¬äºŒä¸ªé—®é¢˜ï¼ŒåŸè®ºæ–‡ä¸­ç»™å‡ºäº†å¦‚ä¸‹çš„ç¤ºæ„å›¾ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120606229.png" /></p>
<p>â€‹
æˆ‘ä»¬å°†æ‰€æœ‰windowä¸­çš„ä¸€äº›windowè¿›è¡Œä¸€ä¸ªåˆ’åˆ†ï¼Œ0æ‰€åœ¨çš„éƒ¨åˆ†æ ‡å¿—ä¸ºAï¼Œ1ï¼Œ2æ‰€åœ¨çš„æ ‡å¿—ä¸ºCï¼Œ3ï¼Œ6æ‰€åœ¨çš„æ ‡å¿—ä¸ºBï¼Œå¦‚å›¾1æ‰€ç¤ºï¼Œç„¶åè¿›è¡Œä¸€ä¸ªå¹³ç§»ï¼Œä¹Ÿå°±æ˜¯å˜æˆå›¾2çš„å½¢å¼ï¼Œè¿™æ ·å­çš„è¯æˆ‘ä»¬å‘ç°åˆå¯ä»¥å°†å…¶ç»„æˆ4ä¸ªæ–°çš„4
*
4çš„windowè¿›è¡Œself-Attentionçš„è®¡ç®—ï¼Œè®¡ç®—é‡å’Œä»¥å‰ä¸€è‡´ã€‚åˆ°æ­¤ä¸ºæ­¢ï¼Œä½ å¯èƒ½ä¼šé—®ï¼Œæˆ‘ä»¬ä¸æ˜¯è¦æŒ‰ç…§åŸæ¥åˆ’åˆ†çš„9ä¸ªwindowè¿›è¡Œè®¡ç®—å—ï¼Ÿå¦‚æœæŒ‰ç…§ç°åœ¨è¿™ä¸ªå¹³ç§»è¿‡çš„4
*
4çš„windowè¿›è¡Œè®¡ç®—ï¼ŒåŸå…ˆwindowå’Œwindowä¹‹é—´çš„è¾¹ç¼˜éƒ½æ˜¯è·³è·ƒçš„ï¼Œè€Œä¸”æˆ‘ä»¬æœ¬æ¥å°±æ˜¯è¦åŸæ¥æ¯ä¸ªwindowå†…éƒ¨å•ç‹¬è®¡ç®—çš„ï¼Œåªæ˜¯ä¸ºäº†å‡è½»è®¡ç®—é‡æ‰è¿›è¡Œçš„å¹³ç§»ï¼Œæ‰€ä»¥è®¡ç®—æŸä¸€ä¸ªæ–°çš„4
*
4çš„æ··åˆwindowçš„æ—¶å€™ï¼Œè‡ªç„¶ä¸å¸Œæœ›å†…éƒ¨çš„ä¸¤ä¸ªåŸæ¥çš„windowä¹‹é—´ä¿¡æ¯æœ‰äº¤äº’å’Œæ··åˆã€‚ï¼ˆå°±æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¹³ç§»åï¼Œå˜æˆäº†4å·å—è‡ªå·±ç®—è‡ªå·±çš„ï¼Œ5ã€3å·å—åˆèµ·æ¥ç®—ï¼Œ1ã€7å·å—åˆèµ·æ¥ç®—ï¼Œ2ã€0ã€6ã€8å·å—åˆèµ·æ¥ç®—ï¼Œ4å·å—æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå†…éƒ¨åƒç´ æœ¬èº«å°±æ˜¯è¿ç»­çš„ï¼Œä½†æ˜¯5ã€3å·å—ä¸€èµ·ç®—å°±ä¼šå‡ºç°é—®é¢˜ï¼Œ5å·å—å’Œ3å·å—è¾¹ç¼˜å¤„çš„åƒç´ æ˜¯ä¸è¿ç»­çš„ï¼Œè€Œä¸”ç†è®ºä¸Šè€Œè¨€ï¼Œæˆ‘ä»¬æ˜¯è¦å•ç‹¬è®¡ç®—3ã€5å·å—å„è‡ªçš„Self-Attentionçš„å†…éƒ¨åƒç´ å…³è”åº¦çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è®¡ç®—åŒºåŸŸ5çš„æ—¶å€™ä¸è¦å¼•å…¥åŒºåŸŸ3çš„ä¿¡æ¯ï¼‰</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120637174.png" /></p>
<p>â€‹
æ‰€ä»¥ï¼Œå¹³ç§»ä»¥åå¯¹4ä¸ªæ–°çš„4*4çš„windowè¿›è¡Œçš„Self-Attentionæ˜¯æˆ‘ä»¬å…ˆå‰æåˆ°è¿‡çš„Masked
MSA,ä¹Ÿå°±æ˜¯è®©æ¯ä¸€ä¸ªæ–°å½¢æˆçš„windowä¸­ï¼Œæ ¹æ®åŸæ¥çš„åˆ†å‰²è§„åˆ™ç»™å®ƒå¥—ä¸Šä¸€ä¸ªmaskã€‚è¿™æ ·å­çš„è¯ï¼Œè™½ç„¶å®ƒä»¬åœ¨ä¸€èµ·è®­ç»ƒï¼Œä½†æ˜¯é€šè¿‡è¿™ä¸ªmaskï¼Œä»ç„¶ä½¿å¾—åŸæ¥çš„9ä¸ªwindowåˆ’åˆ†è§„åˆ™ä¸­ï¼Œä¸åŒçš„windowä¹‹é—´çš„åƒç´ æ˜¯ä¸ä¼šè®¡ç®—å…³è”åº¦çš„ï¼Œæˆ–è€…è¯´å…³è”åº¦ä¸º0.</p>
<p>â€‹
ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šæˆ‘ä»¬è®¡ç®—åŒºåŸŸ5å’ŒåŒºåŸŸ3çš„è¿™å—çš„Self-Attentionçš„æ—¶å€™ï¼ŒåŸå…ˆæ˜¯è®¡ç®—äº†16ä¸ªÎ±å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç­‰å®ƒè®¡ç®—å®Œä»¥åï¼Œå°†å›¾ä¸­è“è‰²æ¡†åœˆå‡ºæ¥çš„ç³»æ•°å…¨éƒ½å‡å»100ï¼Œè¿™ä¸ªå‡100çš„å«ä¹‰æ˜¯ä»€ä¹ˆå‘¢ï¼ŸåŸå…ˆè®¡ç®—å‡ºçš„Î±ç³»æ•°ï¼Œä¸€èˆ¬éƒ½æ˜¯æ¯”è¾ƒå°é‡çº§çš„ï¼Œå‡å»100ä»¥åï¼Œå¿…å®šæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤§çš„è´Ÿæ•°ï¼Œé‚£ä¹ˆç»è¿‡SoftMaxçš„è®¡ç®—ä»¥åï¼Œç³»æ•°å°±ä¼šå˜æˆ0ï¼Œä¹Ÿå°±å®ç°äº†åŒºåŸŸ5å’ŒåŒºåŸŸ3ä¹‹é—´çš„åƒç´ å¦‚æœè®¡ç®—å…³è”åº¦ï¼Œé‚£ä¹ˆå°±æ˜¯0ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120650353.png" /></p>
<p>â€‹ æœ€åçš„è¯ï¼Œæˆ‘ä»¬è¦æ³¨æ„ï¼Œè®¡ç®—å®Œä»¥åå°†å¯¹åº”çš„å°å—ç§»å›åŸä½ç½®ã€‚</p>
<h4 id="relative-position-biasä»‹ç»">5ã€Relative Position Biasä»‹ç»ï¼š</h4>
<p>â€‹
åœ¨è®ºæ–‡ä¸­è¿˜ç®€å•ä»‹ç»äº†è¿™æ ·ä¸€ç§ç›¸å¯¹ä½ç½®åç§»çš„è®¡ç®—æœºåˆ¶ã€‚è¿™ç§æœºåˆ¶åº”ç”¨äºè®¡ç®—Self-Attentionçš„æ—¶å€™ã€‚å¦‚ä¸‹å…¬å¼æ‰€ç¤ºï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120718204.png" /></p>
<p>â€‹
å…¶ç»™å‡ºäº†ä¸€ç»„æ•°æ®ï¼Œåœ¨ä¸åŒçš„å­¦ä¹ ç½‘ç»œä¸­ï¼Œæ˜¯å¦ä½¿ç”¨åç§»ã€æˆ–è€…æ˜¯ä½¿ç”¨ç›¸å¯¹/ç»å¯¹ä½ç½®åç§»æ¥è®¡ç®—Attentionä¼šå¯¼è‡´çš„ç»“æœè¯¯å·®ã€‚æˆ‘ä»¬å¯ä»¥å‘ç°ç›¸å¯¹ä½ç½®åå·®èƒ½å¤Ÿå°†ç»“æœæå‡1ä¸ªç™¾åˆ†ç‚¹å·¦å³ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120725660.png" /></p>
<p>â€‹
é‚£ä¹ˆç›¸å¯¹ä½ç½®åå·®æ˜¯æ€ä¹ˆç¡®å®šçš„å‘¢ï¼Ÿå¦‚ä¸‹æ‰€ç¤ºï¼Œå‡è®¾æˆ‘ä»¬çš„ç‰¹å¾å›¾æ˜¯å·¦ä¾§çš„2*2çš„æ ¼å­ï¼Œä¸‹æ–¹æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„ç»å¯¹ä½ç½®ç´¢å¼•ï¼Œç›¸å¯¹ä½ç½®ç´¢å¼•å¦‚å³ä¾§ä¸Šé¢ä¸€æ’æ‰€ç¤ºï¼Œå…¶å®å°±æ˜¯å½“å‰è®¡ç®—æ ¼å­çš„ç»å¯¹ä½ç½®ç´¢å¼•å‡å»å…¶ä»–æ ¼å­çš„ç»å¯¹ä½ç½®ç´¢å¼•ã€‚ç„¶åå°†å››ä¸ªåƒç´ çš„ç›¸å¯¹ä½ç½®ç´¢å¼•å±•å¼€åæ‹¼æ¥åœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ–°çš„çŸ©é˜µã€‚è¿™ä¸ªçŸ©é˜µå°±æ˜¯äºŒç»´çš„ç›¸å¯¹ä½ç½®ç´¢å¼•çŸ©é˜µã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/iiioio.png" /></p>
<p>â€‹
åœ¨ä½œè€…çš„æºç ä¸­ï¼Œå…¶ä½¿ç”¨çš„æ˜¯1ç»´çš„çš„ç›¸å¯¹ä½ç½®ç´¢å¼•çŸ©é˜µï¼Œæˆ‘ä»¬ä¸èƒ½ç®€å•çš„å°†x,yç›¸åŠ ï¼Œä¸ç„¶å¯èƒ½å¯¼è‡´ä¸åŒä½ç½®çš„ç›¸å¯¹ä½ç½®ç´¢å¼•ä¸€è‡´ï¼Œå¯¼è‡´å‡ºç°é—®é¢˜ã€‚æ‰€ä»¥ä½œè€…åœ¨æºç ä¸­ç»è¿‡äº†ä¸€ä¸ªç®€å•å¤„ç†ã€‚æˆ‘ä»¬å…ˆæŠŠæ‰€æœ‰çš„è¡Œåˆ—æ ‡åŠ ä¸ŠM-1ï¼Œç„¶åå†å°†è¡Œæ ‡ä¹˜2M-1ï¼Œç„¶åå†å°†è¡Œåˆ—æ ‡ç›¸åŠ ï¼Œå¾—åˆ°çš„çŸ©é˜µã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120758495.png" /></p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120804811.png"
alt="image-20220115120804811" />
<figcaption aria-hidden="true">image-20220115120804811</figcaption>
</figure>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120807646.png"
alt="image-20220115120807646" />
<figcaption aria-hidden="true">image-20220115120807646</figcaption>
</figure>
<p>â€‹ ç„¶åæˆ‘ä»¬éœ€è¦æŠŠRelative Position Indexé€šè¿‡ä¸€å¼ Bias
Tableæ˜ å°„æˆrelative position
biasæ‰æ˜¯ç”¨äºè®¡ç®—Self-Attentionæœ€ç»ˆç”¨äºè®¡ç®—çš„Biaså€¼ï¼Œä¹Ÿå°±æ˜¯å…¬å¼é‡Œçš„çŸ©é˜µBã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115120814669.png" /></p>
<h3 id="å››swin-transformer-æ¨¡å‹æ‰©å±•å‚æ•°">å››ã€Swin Transformer
æ¨¡å‹æ‰©å±•å‚æ•°</h3>
<p>â€‹
è®ºæ–‡ä¸­ç»™å‡ºäº†ä»¥ä¸‹ä¸€å¼ è¡¨æ ¼ï¼Œé‡Œé¢æ˜¯å››ç§ä¸åŒçš„Swinæ¨¡å‹çš„å„ä¸ªé˜¶æ®µçš„å‚æ•°ã€‚å…¶ä¸­æœ‰Swin-T,Swin-S,Swin-B,Swin-Lå››ç§ä¸åŒçš„Swin
Transformeræ¨¡å‹ï¼Œåˆ†åˆ«ä»£è¡¨Tinyã€‚</p>
<p>â€‹ æˆ‘ä»¬è§£ææŸä¸€åˆ—çš„å‚æ•°ï¼Œconcat 4 * 4
å°±ä»£è¡¨è¦å°†é«˜å’Œå®½ä¸‹é‡‡æ ·4å€ï¼Œ96-då°±ä»£è¡¨ç»è¿‡Linear
Embeddingå±‚ä»¥åçš„Cå¤§å°ã€‚æ¥ä¸‹æ¥çš„æ‹¬å·å†…çš„ä¸œè¥¿å°±ä»£è¡¨å †å çš„blockå†…çš„å‚æ•°ï¼Œwindow
size = 7*7,é€šè¿‡è¯¥Blockä¹‹åè¾“å‡ºç»´åº¦ä¸º96ï¼ŒMulti_Headçš„Head = 3ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/bvbcf123.png" /></p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Transformerç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Transformer</tag>
        <tag>Computer Vision</tag>
        <tag>Swin Transformer</tag>
      </tags>
  </entry>
  <entry>
    <title>Pytorchå­¦ä¹ ç¬”è®°11â€”â€”torchvisionå›¾åƒæ•°æ®é¢„å¤„ç†</title>
    <url>/2022/03/12/796f9da33963/</url>
    <content><![CDATA[<h3 id="ä¸€torchvisionç®€ä»‹">ä¸€ã€TorchVisionç®€ä»‹ï¼š</h3>
<p>torchvision æ˜¯Pytorchä¸­ä¸“é—¨ç”¨æ¥å¤„ç†å›¾åƒçš„åº“ã€‚è¿™ä¸ªåŒ…ä¸­æœ‰å››ä¸ªå¤§ç±»ã€‚</p>
<ul>
<li><p>torchvision.datasets
åŒ…å«äº†å¾ˆå¤šæå‰å¤„ç†å¥½çš„æ•°æ®é›†ï¼šå¦‚COCOã€ImageNetç­‰</p></li>
<li><p>torchvision.models
åŒ…å«äº†å·²ç»è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œå¯ä»¥åŠ è½½åç›´æ¥ç”¨ï¼šå¦‚AlexNetã€VGGç­‰</p></li>
<li><p>torchvision.transforms åŒ…å«ä¸€èˆ¬çš„å›¾åƒè½¬æ¢æ“ä½œç±»
å¦‚å½’ä¸€åŒ–ã€å±•å¹³</p></li>
<li><p>torchvision.utils</p></li>
</ul>
<h3 id="äºŒtransformsçš„ä¸€äº›å‡½æ•°">äºŒã€Transformsçš„ä¸€äº›å‡½æ•°ï¼š</h3>
<h4
id="transforms.normalizemeanstdinplacefalse">1ã€transforms.Normalize(mean,std,inplace=False)</h4>
<ul>
<li>mean:å„é€šé“çš„å‡å€¼</li>
<li>stdï¼šå„é€šé“çš„æ ‡å‡†å·®</li>
<li>inplaceï¼šæ˜¯å¦åŸåœ°æ“ä½œ</li>
</ul>
<p>ä¸€èˆ¬å¯ä»¥å¦‚ä¸‹ä¼ å…¥meanå’Œstd:ä»£è¡¨æˆ‘è¦å°†æ•°æ®å½’çº¦åŒ–è‡³å¦‚ä¸‹çš„å‡å€¼å’Œæ–¹å·®çš„åˆ†å¸ƒ</p>
<p><code>mean = (0.5,0.5,0.5) std = (0.5,0.5,0.5)</code></p>
<p>è¯¥å‡½æ•°å°±æ˜¯é€šè¿‡ä»¥ä¸‹å…¬å¼ï¼Œå¯¹å›¾åƒ3ä¸ªé€šé“åˆ†åˆ«ä¾æ®è¾“å…¥çš„meanå’Œstdè¿›è¡Œå½’çº¦åŒ–ã€‚</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">x = (x - mean) / std</span><br></pre></td></tr></table></figure>
<p>æœ€ç»ˆå¾—åˆ°æ–°çš„æ•°æ®ã€‚æ•´ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torchvision.transforms <span class="keyword">as</span> transforms</span><br><span class="line">mean = (<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>) </span><br><span class="line">std = (<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>)`</span><br><span class="line">new_data = transforms.Normalize(mean, std)(data)</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼šå…¶å® transforms.Normalize(mean, std)
åªæ˜¯æŒ‡å®šäº†ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥è¿˜å¯ä»¥å¦‚ä¸‹æ“ä½œï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torchvision.transforms <span class="keyword">as</span> transforms</span><br><span class="line">mean = (<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>) </span><br><span class="line">std = (<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>)`</span><br><span class="line">normalize = transforms.Normalize(mean=mean, std=std)</span><br><span class="line">new_data = normalize(data)</span><br></pre></td></tr></table></figure>
<h4 id="transforms.totensor">2ã€transforms.ToTensor()</h4>
<p>è¯¥å‡½æ•°æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼š</p>
<ol type="1">
<li>æ˜¯å°†è¾“å…¥çš„æ•°æ®æ”¹å˜Shpaeï¼Œå›¾åƒæ•°æ®æœ¬èº«æ˜¯ä¸‰ç»´çš„ï¼š Wï¼ŒHï¼ŒC
ï¼Œè¯¥å‡½æ•°ä¼šå°†å…¶å˜æˆ Cï¼ŒWï¼ŒHçš„ç»´åº¦</li>
<li>å°†æ‰€æœ‰æ•°é™¤ä»¥255ï¼Œå°†åƒç´ æ•°æ®å½’ä¸€åŒ–åˆ°<code>[0,1]</code></li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(data.shape)   <span class="comment">#ï¼ˆ5ï¼Œ5ï¼Œ3ï¼‰</span></span><br><span class="line">data = transforms.ToTensor()(data)</span><br><span class="line"><span class="built_in">print</span>(data.shape)	<span class="comment">#ï¼ˆ3ï¼Œ5ï¼Œ5ï¼‰</span></span><br></pre></td></tr></table></figure>
<p>å’ŒNormalizeå‡½æ•°ä¸€æ ·ï¼šä¹Ÿå¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ–¹æ³•ä½¿ç”¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">toTensor = transforms.ToTensor()</span><br><span class="line">data = toTensor(data)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Pytorchç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>Pytorchå­¦ä¹ ç¬”è®°12â€”â€”åˆ†å¸ƒå¼DDPåŸºæœ¬æ¦‚å¿µ</title>
    <url>/2022/03/29/5a94914aa20a/</url>
    <content><![CDATA[<h4 id="node">1ã€Node</h4>
<p>â€‹ ç‰©ç†èŠ‚ç‚¹ï¼Œå°±æ˜¯ä¸€å°æœºå™¨ï¼ŒèŠ‚ç‚¹å†…éƒ¨å¯ä»¥æœ‰å¤šä¸ªGPU(ä¸€å°æœºå™¨æœ‰å¤šå¡)ã€‚</p>
<h4 id="rank-local_rank">2ã€Rank &amp; Local_Rank</h4>
<p>â€‹
ç”¨äºè¡¨ç¤ºè¿›ç¨‹çš„åºå·ï¼Œç”¨äºè¿›ç¨‹é—´é€šä¿¡ã€‚æ¯ä¸€ä¸ªè¿›ç¨‹å¯¹åº”äº†ä¸€ä¸ªrankã€‚rank=0çš„è¿›ç¨‹å°±æ˜¯masterè¿›ç¨‹ã€‚</p>
<p>â€‹
rankæ˜¯æŒ‡åœ¨æ•´ä¸ªåˆ†å¸ƒå¼ä»»åŠ¡ä¸­è¿›ç¨‹çš„åºå·ï¼›local_rankæ˜¯æŒ‡<strong>åœ¨ä¸€å°æœºå™¨ä¸Š(ä¸€ä¸ªnodeä¸Š)è¿›ç¨‹çš„ç›¸å¯¹åºå·</strong>ï¼Œä¾‹å¦‚æœºå™¨ä¸€ä¸Šæœ‰0,1,2,3,4,5,6,7ï¼Œæœºå™¨äºŒä¸Šä¹Ÿæœ‰0,1,2,3,4,5,6,7ã€‚local_rankåœ¨nodeä¹‹é—´ç›¸äº’ç‹¬ç«‹ã€‚</p>
<h4 id="n_nodes">3ã€n_nodes</h4>
<p>â€‹ ç‰©ç†èŠ‚ç‚¹æ•°é‡</p>
<h4 id="node_rank">4ã€node_rank</h4>
<p>â€‹ ç‰©ç†èŠ‚ç‚¹çš„åºå·</p>
<h4 id="nproc_per_node">5ã€nproc_per_node</h4>
<p>â€‹ æ¯ä¸ªç‰©ç†èŠ‚ç‚¹ä¸Šé¢è¿›ç¨‹çš„æ•°é‡</p>
<h4 id="world-size">6ã€world size</h4>
<p>â€‹ å…¨å±€ï¼ˆä¸€ä¸ªåˆ†å¸ƒå¼ä»»åŠ¡ï¼‰ä¸­ï¼Œè¿›ç¨‹çš„æ•°é‡</p>
<p>â€‹
æ¯ä¸ªnodeåŒ…å«16ä¸ªGPUï¼Œä¸”nproc_per_node=8ï¼Œn_nodes=3ï¼Œæœºå™¨çš„node_rank=5ï¼Œè¯·é—®world_sizeæ˜¯å¤šå°‘ï¼Ÿ</p>
<p>â€‹ ç­”æ¡ˆï¼šworld_size = 3*8 = 24</p>
<p><img
src="https://img-blog.csdnimg.cn/20210811144558161.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2h4eGp4dw==,size_16,color_FFFFFF,t_70" /></p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Pytorchç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>Pytorchå­¦ä¹ ç¬”è®°2â€”â€”Datasetä»‹ç»</title>
    <url>/2021/12/13/9d4aeea992ce/</url>
    <content><![CDATA[<h1 id="äºŒdataset">äºŒã€Dataset</h1>
<p>Pytorch ä½¿ç”¨ torch.utils.data.DataLoader å’Œ torch.utils.data.Dataset
æ¥å…è®¸æˆ‘ä»¬ä½¿ç”¨å…¶é¢„å…ˆåŠ è½½å¥½çš„æ•°æ®ï¼Œæˆ–æ˜¯è‡ªå·±å‡†å¤‡çš„æ•°æ®é›†ã€‚</p>
<p>Datasetå­˜å‚¨æ ·æœ¬åŠå…¶ç›¸åº”çš„æ ‡ç­¾ï¼ŒDataLoaderåœ¨æ•°æ®é›†å‘¨å›´åŒ…è£…ä¸€ä¸ªiterableï¼Œä»¥ä¾¿äºè®¿é—®æ ·æœ¬ã€‚</p>
<p>ä¸€äº›å¸¸ç”¨çš„Datasetså¯ä»¥åœ¨è¿™è¾¹è¿›è¡ŒæŸ¥è¯¢
https://pytorch.org/tutorials/beginner/basics/data_tutorial.html</p>
<h3 id="ä¸‹è½½æ•°æ®é›†ç¤ºä¾‹">1ã€ä¸‹è½½æ•°æ®é›†ç¤ºä¾‹</h3>
<h4 id="æœ‰ä»¥ä¸‹å››ä¸ªå‚æ•°">æœ‰ä»¥ä¸‹å››ä¸ªå‚æ•°</h4>
<h5 id="root-æ˜¯è®­ç»ƒé›†æµ‹è¯•é›†æ•°æ®å­˜å‚¨çš„ä½ç½®">1ã€root :
æ˜¯è®­ç»ƒé›†/æµ‹è¯•é›†æ•°æ®å­˜å‚¨çš„ä½ç½®</h5>
<h5 id="train-è¡¨æ˜æ˜¯è®­ç»ƒé›†è¿˜æ˜¯æµ‹è¯•é›†">2ã€train:
è¡¨æ˜æ˜¯è®­ç»ƒé›†è¿˜æ˜¯æµ‹è¯•é›†</h5>
<h5 id="download-è¡¨æ˜å¦‚æœæ•°æ®é›†åœ¨rootä¸å­˜åœ¨æ˜¯å¦ä»ç½‘ç»œä¸‹è½½">3ã€downloadï¼š
è¡¨æ˜å¦‚æœæ•°æ®é›†åœ¨rootä¸å­˜åœ¨ï¼Œæ˜¯å¦ä»ç½‘ç»œä¸‹è½½</h5>
<h5 id="transform-å’Œ-target_transform-æŒ‡å®šç‰¹å¾å’Œæ ‡ç­¾è½¬æ¢">4ã€transform
å’Œ target_transform æŒ‡å®šç‰¹å¾å’Œæ ‡ç­¾è½¬æ¢</h5>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> Dataset</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> datasets</span><br><span class="line"><span class="keyword">from</span> torchvision.transforms <span class="keyword">import</span> ToTensor</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">training_data = datasets.FashionMNIST(</span><br><span class="line">    root=<span class="string">&quot;data&quot;</span>,</span><br><span class="line">    train=<span class="literal">True</span>,</span><br><span class="line">    download=<span class="literal">True</span>,</span><br><span class="line">    transform=ToTensor()</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<pre><code>Downloading http://fashion-mnist.s3-website.eu-central-1.amazonaws.com/train-images-idx3-ubyte.gz
Downloading http://fashion-mnist.s3-website.eu-central-1.amazonaws.com/train-images-idx3-ubyte.gz to data\FashionMNIST\raw\train-images-idx3-ubyte.gz


100.0%


Extracting data\FashionMNIST\raw\train-images-idx3-ubyte.gz to data\FashionMNIST\raw

Downloading http://fashion-mnist.s3-website.eu-central-1.amazonaws.com/train-labels-idx1-ubyte.gz
Downloading http://fashion-mnist.s3-website.eu-central-1.amazonaws.com/train-labels-idx1-ubyte.gz to data\FashionMNIST\raw\train-labels-idx1-ubyte.gz


100.6%


Extracting data\FashionMNIST\raw\train-labels-idx1-ubyte.gz to data\FashionMNIST\raw

Downloading http://fashion-mnist.s3-website.eu-central-1.amazonaws.com/t10k-images-idx3-ubyte.gz
Downloading http://fashion-mnist.s3-website.eu-central-1.amazonaws.com/t10k-images-idx3-ubyte.gz to data\FashionMNIST\raw\t10k-images-idx3-ubyte.gz


100.0%


Extracting data\FashionMNIST\raw\t10k-images-idx3-ubyte.gz to data\FashionMNIST\raw

Downloading http://fashion-mnist.s3-website.eu-central-1.amazonaws.com/t10k-labels-idx1-ubyte.gz
Downloading http://fashion-mnist.s3-website.eu-central-1.amazonaws.com/t10k-labels-idx1-ubyte.gz to data\FashionMNIST\raw\t10k-labels-idx1-ubyte.gz


119.3%

Extracting data\FashionMNIST\raw\t10k-labels-idx1-ubyte.gz to data\FashionMNIST\raw</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">test_data = datasets.FashionMNIST(</span><br><span class="line">    root=<span class="string">&quot;data&quot;</span>,</span><br><span class="line">    train=<span class="literal">False</span>,</span><br><span class="line">    download=<span class="literal">True</span>,</span><br><span class="line">    transform=ToTensor()</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä½¿ç”¨Indexæ¥è®¿é—®æ•°æ®é›†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">img, label = training_data[<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<h4
id="pytorchä¸­squeezeå’Œunsqueezeå‡½æ•°">pytorchä¸­squeeze()å’Œunsqueeze()å‡½æ•°</h4>
<p>torch.squeeze()
ä¸»è¦å¯¹æ•°æ®çš„ç»´åº¦è¿›è¡Œå‹ç¼©ï¼Œå»æ‰ç»´æ•°ä¸º1çš„çš„ç»´åº¦ï¼Œæ¯”å¦‚æ˜¯ä¸€è¡Œæˆ–è€…ä¸€åˆ—ï¼Œä¸€ä¸ªä¸€è¡Œä¸‰åˆ—ï¼ˆ1,3ï¼‰çš„æ•°å»æ‰ç¬¬ä¸€ä¸ªç»´æ•°ä¸ºä¸€çš„ç»´åº¦ä¹‹åå°±å˜æˆï¼ˆ3ï¼‰è¡Œ</p>
<p>torch.unsqueeze()
ç»™æŒ‡å®šä½ç½®åŠ ä¸Šç»´æ•°ä¸ºä¸€çš„ç»´åº¦ï¼Œæ¯”å¦‚åŸæœ¬æœ‰ä¸ªä¸‰è¡Œçš„æ•°æ®ï¼ˆ3ï¼‰ï¼Œåœ¨0çš„ä½ç½®åŠ äº†ä¸€ç»´å°±å˜æˆä¸€è¡Œä¸‰åˆ—ï¼ˆ1,3ï¼‰ã€‚a.unsqueeze(N)
å°±æ˜¯åœ¨aä¸­æŒ‡å®šä½ç½®NåŠ ä¸Šä¸€ä¸ªç»´æ•°ä¸º1çš„ç»´åº¦ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(img.shape)</span><br><span class="line"><span class="built_in">print</span>(img.squeeze().shape)</span><br></pre></td></tr></table></figure>
<pre><code>torch.Size([1, 28, 28])
torch.Size([28, 28])</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">plt.imshow(img.squeeze())</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<figure>
<img src="output_14_0.png" alt="png" />
<figcaption aria-hidden="true">png</figcaption>
</figure>
<h3 id="åˆ›å»ºè‡ªå®šä¹‰çš„æ•°æ®é›†">2ã€åˆ›å»ºè‡ªå®šä¹‰çš„æ•°æ®é›†</h3>
<p>ä¸€ä¸ªè‡ªå®šä¹‰çš„æ•°æ®é›†ç±»å¿…é¡»è¦å®ç°ä»¥ä¸‹ä¸‰ä¸ªå‡½æ•°ï¼š <strong>init</strong>,
<strong>len</strong>, and <strong>getitem</strong></p>
<h4
id="é¦–å…ˆæ˜¯initå‡½æ•°å½“å®ä¾‹åŒ–æ•°æ®é›†å¯¹è±¡çš„æ—¶å€™åˆå§‹åŒ–ç›®å½•æ ‡ç­¾æ–‡ä»¶ç­‰ç­‰">1ï¼‰é¦–å…ˆæ˜¯Initå‡½æ•°ï¼Œå½“å®ä¾‹åŒ–æ•°æ®é›†å¯¹è±¡çš„æ—¶å€™ï¼Œåˆå§‹åŒ–ç›®å½•ã€æ ‡ç­¾æ–‡ä»¶ã€ç­‰ç­‰</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">def __init__(self, annotations_file, img_dir, transform=None, target_transform=None):</span><br><span class="line">    self.img_labels = pd.read_csv(annotations_file, names=[&#x27;file_name&#x27;, &#x27;label&#x27;])</span><br><span class="line">    self.img_dir = img_dir</span><br><span class="line">    self.transform = transform</span><br><span class="line">    self.target_transform = target_transform</span><br></pre></td></tr></table></figure>
<h4 id="len__å‡½æ•°è¿”å›æ•°æ®é›†ä¸­æ ·ä¾‹çš„æ•°é‡">2)
__len__å‡½æ•°è¿”å›æ•°æ®é›†ä¸­æ ·ä¾‹çš„æ•°é‡</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">def __len__(self):</span><br><span class="line">    return len(self.img_labels)</span><br></pre></td></tr></table></figure>
<h4
id="getitem__å‡½æ•°æ ¹æ®ç»™å®šçš„idxä»æ•°æ®é›†ä¸­åŠ è½½å¹¶ä¸”è¿”å›ä¸€ä¸ªæ ·ä¾‹">3ï¼‰__getitem__å‡½æ•°æ ¹æ®ç»™å®šçš„idxä»æ•°æ®é›†ä¸­åŠ è½½å¹¶ä¸”è¿”å›ä¸€ä¸ªæ ·ä¾‹</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">def __getitem__(self, idx):</span><br><span class="line">    img_path = os.path.join(self.img_dir, self.img_labels.iloc[idx, 0])</span><br><span class="line">    image = read_image(img_path)</span><br><span class="line">    label = self.img_labels.iloc[idx, 1]</span><br><span class="line">    if self.transform:</span><br><span class="line">        image = self.transform(image)</span><br><span class="line">    if self.target_transform:</span><br><span class="line">        label = self.target_transform(label)</span><br><span class="line">    return image, label</span><br></pre></td></tr></table></figure>
<h3
id="ä½¿ç”¨dataloadersæ¥ä¸ºè®­ç»ƒå‡†å¤‡æ•°æ®">3ã€ä½¿ç”¨DataLoadersæ¥ä¸ºè®­ç»ƒå‡†å¤‡æ•°æ®</h3>
<p>å…ˆå‰å®šä¹‰çš„Datasetèƒ½å¤Ÿä¸€æ¬¡æ£€ç´¢ä¸€ä¸ªæ ·æœ¬çš„æ•°æ®é›†åŠŸèƒ½å’Œæ ‡ç­¾ã€‚ä½†æ˜¯åœ¨è®­ç»ƒæ¨¡å‹æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸å¸Œæœ›ä»¥â€œbatchesâ€çš„æ–¹å¼ä¼ é€’æ ·æœ¬ï¼Œåœ¨æ¯ä¸ªepoché‡æ–°æ’åˆ—æ•°æ®ä»¥å‡å°‘æ¨¡å‹è¿‡åº¦æ‹Ÿåˆï¼Œå¹¶ä½¿ç”¨Pythonçš„å¤šå¤„ç†æ¥åŠ é€Ÿæ•°æ®æ£€ç´¢ã€‚</p>
<p>DataLoader
å°±æ˜¯å¸®åŠ©æˆ‘ä»¬å®Œæˆä¸Šè¿°äº‹æƒ…çš„ä¸€ä¸ªä¸œè¥¿ï¼Œä¸‹é¢å°±æ˜¯å°†æ•°æ®è£…è½½è¿›DataLoaderçš„è¿‡ç¨‹ï¼Œå¯ä»¥è¿­ä»£è®¿é—®æ•°æ®é›†ä¸­çš„å†…å®¹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> DataLoader</span><br><span class="line"></span><br><span class="line">train_dataloader = DataLoader(training_data, batch_size=<span class="number">64</span>, shuffle=<span class="literal">True</span>)</span><br><span class="line">test_dataloader = DataLoader(test_data, batch_size=<span class="number">64</span>, shuffle=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢çš„æ¯æ¬¡è¿­ä»£éƒ½ä¼šè¿”å›ä¸€æ‰¹è®­ç»ƒå®ä¾‹å’Œè®­ç»ƒæ ‡ç­¾ï¼ˆåˆ†åˆ«åŒ…å«batch_size=64ä¸ªç‰¹å¾å’Œæ ‡ç­¾ï¼‰ã€‚å› ä¸ºæˆ‘ä»¬æŒ‡å®šäº†shuffle=Trueï¼Œæ‰€ä»¥åœ¨å¯¹æ‰€æœ‰æ‰¹è¿›è¡Œè¿­ä»£ä¹‹åï¼Œæ•°æ®å°†è¢«æ´—ç‰Œã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">train_dataloader</span><br></pre></td></tr></table></figure>
<pre><code>&lt;torch.utils.data.dataloader.DataLoader at 0x1f88dccf4f0&gt;</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">iter</span>(train_dataloader)</span><br></pre></td></tr></table></figure>
<pre><code>&lt;torch.utils.data.dataloader._SingleProcessDataLoaderIter at 0x1f88e0796d0&gt;</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">next</span>(<span class="built_in">iter</span>(train_dataloader))</span><br></pre></td></tr></table></figure>
<pre><code>[tensor([[[[0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           ...,
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000]]],
 
 
         [[[0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0078, 0.0000],
           ...,
           [0.0000, 0.0000, 0.4510,  ..., 0.8157, 0.0549, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.4196, 0.0000, 0.0000],
           [0.0000, 0.0078, 0.0275,  ..., 0.0000, 0.0000, 0.0000]]],
 
 
         [[[0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           ...,
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000]]],
 
 
         ...,
 
 
         [[[0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           ...,
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000]]],
 
 
         [[[0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           ...,
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000]]],
 
 
         [[[0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           ...,
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000],
           [0.0000, 0.0000, 0.0000,  ..., 0.0000, 0.0000, 0.0000]]]]),
 tensor([3, 9, 0, 2, 7, 4, 4, 5, 1, 5, 3, 0, 6, 9, 7, 7, 6, 4, 1, 7, 7, 7, 3, 7,
         4, 4, 9, 9, 5, 1, 4, 2, 2, 0, 9, 3, 9, 9, 9, 8, 2, 4, 9, 3, 2, 0, 0, 0,
         5, 7, 5, 7, 1, 9, 8, 7, 0, 4, 9, 0, 2, 3, 8, 7])]</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">train_features, train_labels = <span class="built_in">next</span>(<span class="built_in">iter</span>(train_dataloader))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Feature batch shape: <span class="subst">&#123;train_features.size()&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Labels batch shape: <span class="subst">&#123;train_labels.size()&#125;</span>&quot;</span>)</span><br><span class="line">img = train_features[<span class="number">0</span>].squeeze()</span><br><span class="line">label = train_labels[<span class="number">0</span>]</span><br><span class="line">plt.imshow(img, cmap=<span class="string">&quot;gray&quot;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Label: <span class="subst">&#123;label&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>Feature batch shape: torch.Size([64, 1, 28, 28])
Labels batch shape: torch.Size([64])</code></pre>
<figure>
<img src="output_31_1.png" alt="png" />
<figcaption aria-hidden="true">png</figcaption>
</figure>
<pre><code>Label: 5</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Pytorchç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>Pytorchå­¦ä¹ ç¬”è®°1â€”â€”Tensorä»‹ç»</title>
    <url>/2021/12/13/81937a6b0d26/</url>
    <content><![CDATA[<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure>
<h2 id="ä¸€tensor-çš„åˆå§‹åŒ–">ä¸€ã€Tensor çš„åˆå§‹åŒ–</h2>
<h3 id="ä»æ•°æ®åˆå§‹åŒ–">1ã€ä»æ•°æ®åˆå§‹åŒ–</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data = [[<span class="number">1</span>, <span class="number">2</span>],[<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line">x_data = torch.tensor(data)</span><br><span class="line">x_data</span><br></pre></td></tr></table></figure>
<pre><code>tensor([[1, 2],
        [3, 4]])</code></pre>
<h3 id="ä»nparrayåˆå§‹åŒ–">2ã€ä»nparrayåˆå§‹åŒ–</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">np_array = np.array(data)</span><br><span class="line">x_np = torch.from_numpy(np_array)</span><br><span class="line">x_np</span><br></pre></td></tr></table></figure>
<pre><code>tensor([[1, 2],
        [3, 4]], dtype=torch.int32)</code></pre>
<h3
id="ä»å¦ä¸€ä¸ªtensoråˆå§‹åŒ–æ–°çš„tensorä¼šç»§æ‰¿ä½œä¸ºå‚æ•°çš„tensorçš„-å½¢çŠ¶å’Œæ•°æ®ç±»å‹é™¤éæ˜¾å¼å£°æ˜">3ã€ä»å¦ä¸€ä¸ªTensoråˆå§‹åŒ–ï¼Œæ–°çš„Tensorä¼šç»§æ‰¿ä½œä¸ºå‚æ•°çš„Tensorçš„
å½¢çŠ¶å’Œæ•°æ®ç±»å‹ï¼Œé™¤éæ˜¾å¼å£°æ˜</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x_ones = torch.ones_like(x_data) <span class="comment"># retains the properties of x_data</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Ones Tensor: \n <span class="subst">&#123;x_ones&#125;</span> \n&quot;</span>)</span><br><span class="line"></span><br><span class="line">x_rand = torch.rand_like(x_data, dtype=torch.<span class="built_in">float</span>) <span class="comment"># overrides the datatype of x_data</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Random Tensor: \n <span class="subst">&#123;x_rand&#125;</span> \n&quot;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>Ones Tensor: 
 tensor([[1, 1],
        [1, 1]]) 

Random Tensor: 
 tensor([[0.8288, 0.8223],
        [0.4349, 0.4734]]) </code></pre>
<h3
id="ä½¿ç”¨éšæœºå€¼è¿›è¡Œåˆå§‹åŒ–-rand-ones-zeroså‡½æ•°">4ã€ä½¿ç”¨éšæœºå€¼è¿›è¡Œåˆå§‹åŒ–
rand() ones() zeros()å‡½æ•°</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">shape = (<span class="number">2</span>,<span class="number">4</span>)</span><br><span class="line">rand_tensor = torch.rand(shape)</span><br><span class="line">ones_tensor = torch.ones(shape)</span><br><span class="line">zeros_tensor = torch.zeros(shape)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Random Tensor: \n <span class="subst">&#123;rand_tensor&#125;</span> \n&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Ones Tensor: \n <span class="subst">&#123;ones_tensor&#125;</span> \n&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Zeros Tensor: \n <span class="subst">&#123;zeros_tensor&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>Random Tensor: 
 tensor([[0.5132, 0.3130, 0.5135, 0.7438],
        [0.9011, 0.3348, 0.6246, 0.7321]]) 

Ones Tensor: 
 tensor([[1., 1., 1., 1.],
        [1., 1., 1., 1.]]) 

Zeros Tensor: 
 tensor([[0., 0., 0., 0.],
        [0., 0., 0., 0.]])</code></pre>
<h2
id="äºŒtensorçš„ä¸‰ä¸ªé‡è¦å±æ€§shapedtypedevice">äºŒã€Tensorçš„ä¸‰ä¸ªé‡è¦å±æ€§:shape,dtype,device</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tensor = torch.rand(<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Shape of tensor: <span class="subst">&#123;tensor.shape&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Datatype of tensor: <span class="subst">&#123;tensor.dtype&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Device tensor is stored on: <span class="subst">&#123;tensor.device&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>Shape of tensor: torch.Size([3, 4])
Datatype of tensor: torch.float32
Device tensor is stored on: cpu</code></pre>
<h2 id="ä¸‰tensorçš„ç›¸å…³æ“ä½œ">ä¸‰ã€Tensorçš„ç›¸å…³æ“ä½œ</h2>
<p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒTensorå°†ä¼šè¢«åˆ›å»ºäºCPUä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å°†å…¶å¤åˆ¶è‡³GPUä¸­ï¼Œä½†æ˜¯å¤§å‹çš„Tensoråœ¨æ‹·è´çš„è¿‡ç¨‹ä¸­æ‰€è€—è´¹çš„ä»£ä»·æ˜¯æ¯”è¾ƒæ˜‚è´µçš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> torch.cuda.is_available():</span><br><span class="line">    tensor = tensor.to(<span class="string">&#x27;cuda&#x27;</span>)</span><br><span class="line"></span><br><span class="line">tensor.device</span><br></pre></td></tr></table></figure>
<pre><code>device(type=&#39;cuda&#39;, index=0)</code></pre>
<h3 id="ä¸€äº›å¸¸è§„æ“ä½œ">1ã€ä¸€äº›å¸¸è§„æ“ä½œï¼š</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">tensor = torch.ones(<span class="number">4</span>, <span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;First row: &#x27;</span>, tensor[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;First column: &#x27;</span>, tensor[:, <span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Last column:&#x27;</span>, tensor[..., -<span class="number">1</span>])  <span class="comment"># ç­‰ä»·äº tensor[:,-1]</span></span><br><span class="line">tensor[:,-<span class="number">1</span>] = <span class="number">0</span></span><br><span class="line"><span class="built_in">print</span>(tensor)</span><br></pre></td></tr></table></figure>
<pre><code>First row:  tensor([1., 1., 1., 1.])
First column:  tensor([1., 1., 1., 1.])
Last column: tensor([1., 1., 1., 1.])
tensor([[1., 1., 1., 0.],
        [1., 1., 1., 0.],
        [1., 1., 1., 0.],
        [1., 1., 1., 0.]])</code></pre>
<h3 id="torch.cat-å’Œ-torch.stack">2ã€Torch.cat() å’Œ Torch.stack()</h3>
<h4
id="torch.cat-æ²¿ç€ä¸€ä¸ªç»´åº¦è¿›è¡Œå †å ä¸ä¼šæ”¹å˜åŸtensorçš„ç»´åº¦å³åŸæ¥æ˜¯2ç»´çŸ©é˜µå †å å®Œè¿˜æ˜¯äºŒç»´çŸ©é˜µ">torch.cat()
æ²¿ç€ä¸€ä¸ªç»´åº¦è¿›è¡Œå †å ,ä¸ä¼šæ”¹å˜åŸTensorçš„ç»´åº¦ï¼Œå³åŸæ¥æ˜¯2ç»´çŸ©é˜µï¼Œå †å å®Œè¿˜æ˜¯äºŒç»´çŸ©é˜µ</h4>
<p>ç¤ºä¾‹ï¼šdim=0çš„æ—¶å€™ï¼ŒåŸæ¥çš„4x4çš„çŸ©é˜µ A ä¼šå˜æˆ
[[A],[A],[A]]çºµå‘å åŠ ï¼Œå³12x4çš„çŸ©é˜µï¼Œç¤ºä¾‹ï¼šdim=1çš„æ—¶å€™ï¼ŒåŸæ¥çš„4x4çš„çŸ©é˜µ
A ä¼šå˜æˆ [A,A,A]æ¨ªå‘å åŠ ï¼Œå³4*12çš„çŸ©é˜µ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">t1 = torch.cat([tensor, tensor, tensor], dim=<span class="number">0</span>)</span><br><span class="line">t1</span><br></pre></td></tr></table></figure>
<pre><code>tensor([[1., 1., 1., 0.],
        [1., 1., 1., 0.],
        [1., 1., 1., 0.],
        [1., 1., 1., 0.],
        [1., 1., 1., 0.],
        [1., 1., 1., 0.],
        [1., 1., 1., 0.],
        [1., 1., 1., 0.],
        [1., 1., 1., 0.],
        [1., 1., 1., 0.],
        [1., 1., 1., 0.],
        [1., 1., 1., 0.]])</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">t1 = torch.cat([tensor, tensor, tensor], dim=<span class="number">1</span>)</span><br><span class="line">t1</span><br></pre></td></tr></table></figure>
<pre><code>tensor([[1., 1., 1., 0., 1., 1., 1., 0., 1., 1., 1., 0.],
        [1., 1., 1., 0., 1., 1., 1., 0., 1., 1., 1., 0.],
        [1., 1., 1., 0., 1., 1., 1., 0., 1., 1., 1., 0.],
        [1., 1., 1., 0., 1., 1., 1., 0., 1., 1., 1., 0.]])</code></pre>
<h4
id="torch.stack-æ²¿ç€ä¸€ä¸ªç»´åº¦è¿›è¡Œå †å ä½†æ˜¯ä¼šåœ¨åŸtensorçš„ç»´åº¦ä¸Šå¢åŠ ä¸€ä¸ªç»´åº¦å³åŸæ¥æ˜¯2ç»´çŸ©é˜µå †å å®Œä¼šå˜æˆ3ç»´çŸ©é˜µ">torch.stack()
æ²¿ç€ä¸€ä¸ªç»´åº¦è¿›è¡Œå †å ,ä½†æ˜¯ä¼šåœ¨åŸTensorçš„ç»´åº¦ä¸Šå¢åŠ ä¸€ä¸ªç»´åº¦ï¼Œå³åŸæ¥æ˜¯2ç»´çŸ©é˜µï¼Œå †å å®Œä¼šå˜æˆ3ç»´çŸ©é˜µ</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">t1 = torch.stack([tensor, tensor, tensor], dim=<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(t1.shape)</span><br><span class="line"><span class="built_in">print</span>(t1)</span><br><span class="line">t1 = torch.stack([tensor, tensor, tensor], dim=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(t1.shape)</span><br><span class="line"><span class="built_in">print</span>(t1)</span><br><span class="line">t1 = torch.stack([tensor, tensor, tensor], dim=<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(t1.shape)</span><br><span class="line"><span class="built_in">print</span>(t1)</span><br></pre></td></tr></table></figure>
<pre><code>torch.Size([3, 4, 4])
tensor([[[1., 1., 1., 0.],
         [1., 1., 1., 0.],
         [1., 1., 1., 0.],
         [1., 1., 1., 0.]],

        [[1., 1., 1., 0.],
         [1., 1., 1., 0.],
         [1., 1., 1., 0.],
         [1., 1., 1., 0.]],

        [[1., 1., 1., 0.],
         [1., 1., 1., 0.],
         [1., 1., 1., 0.],
         [1., 1., 1., 0.]]])
torch.Size([4, 3, 4])
tensor([[[1., 1., 1., 0.],
         [1., 1., 1., 0.],
         [1., 1., 1., 0.]],

        [[1., 1., 1., 0.],
         [1., 1., 1., 0.],
         [1., 1., 1., 0.]],

        [[1., 1., 1., 0.],
         [1., 1., 1., 0.],
         [1., 1., 1., 0.]],

        [[1., 1., 1., 0.],
         [1., 1., 1., 0.],
         [1., 1., 1., 0.]]])
torch.Size([4, 4, 3])
tensor([[[1., 1., 1.],
         [1., 1., 1.],
         [1., 1., 1.],
         [0., 0., 0.]],

        [[1., 1., 1.],
         [1., 1., 1.],
         [1., 1., 1.],
         [0., 0., 0.]],

        [[1., 1., 1.],
         [1., 1., 1.],
         [1., 1., 1.],
         [0., 0., 0.]],

        [[1., 1., 1.],
         [1., 1., 1.],
         [1., 1., 1.],
         [0., 0., 0.]]])</code></pre>
<h3 id="ç®—æœ¯è¿ç®—">3ã€ç®—æœ¯è¿ç®—</h3>
<h4 id="è®¡ç®—çŸ©é˜µä¹˜æ³•çš„å‡ ç§æ–¹å¼">è®¡ç®—çŸ©é˜µä¹˜æ³•çš„å‡ ç§æ–¹å¼</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(tensor)</span><br><span class="line">y1 = tensor @ tensor.T</span><br><span class="line">y2 = tensor.matmul(tensor.T)</span><br><span class="line">y3 = torch.rand_like(tensor)</span><br><span class="line">torch.matmul(tensor, tensor.T, out=y3)</span><br></pre></td></tr></table></figure>
<pre><code>tensor([[1., 1., 1., 0.],
        [1., 1., 1., 0.],
        [1., 1., 1., 0.],
        [1., 1., 1., 0.]])





tensor([[3., 3., 3., 3.],
        [3., 3., 3., 3.],
        [3., 3., 3., 3.],
        [3., 3., 3., 3.]])</code></pre>
<h4
id="element-wise-product-ç‚¹å¯¹ç‚¹ä¹˜ç§¯çŸ©é˜µå¯¹åº”å…ƒç´ ç›¸ä¹˜å¾—åˆ°ç»“æœ">element-wise
product ç‚¹å¯¹ç‚¹ä¹˜ç§¯ï¼ˆçŸ©é˜µå¯¹åº”å…ƒç´ ç›¸ä¹˜å¾—åˆ°ç»“æœï¼‰</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">z1 = tensor * tensor</span><br><span class="line">z2 = tensor.mul(tensor)</span><br><span class="line"></span><br><span class="line">z3 = torch.rand_like(tensor)</span><br><span class="line">torch.mul(tensor, tensor, out=z3)</span><br></pre></td></tr></table></figure>
<pre><code>tensor([[1., 1., 1., 0.],
        [1., 1., 1., 0.],
        [1., 1., 1., 0.],
        [1., 1., 1., 0.]])</code></pre>
<h3 id="in-place-æ“ä½œ">4ã€In-Place æ“ä½œ</h3>
<p>åƒä¸€äº›ä¼šå°†ç»“æœå­˜å‚¨åˆ°æ“ä½œæ•°é‡Œçš„è®¡ç®—ï¼Œæˆ‘ä»¬å°†ä¹‹ç§°ä¸ºIn-Placeæ“ä½œï¼Œå®ƒä»¬ä¼šåœ¨æ“ä½œç¬¦åé¢åŠ ä¸Šåç¼€
"_"</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(tensor, <span class="string">&quot;\n&quot;</span>)</span><br><span class="line">tensor.add_(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(tensor)</span><br></pre></td></tr></table></figure>
<pre><code>tensor([[1., 1., 1., 0.],
        [1., 1., 1., 0.],
        [1., 1., 1., 0.],
        [1., 1., 1., 0.]]) 

tensor([[6., 6., 6., 5.],
        [6., 6., 6., 5.],
        [6., 6., 6., 5.],
        [6., 6., 6., 5.]])</code></pre>
<h3 id="bridge-with-numpyæœºåˆ¶">5ã€Bridge with NumPyæœºåˆ¶</h3>
<p>Tensorså’ŒNumpyåœ¨è®¡ç®—æœºåº•å±‚å¯èƒ½å…±äº«åŒä¸€å—å†…å­˜ï¼Œæ”¹å˜å…¶ä¸­ä¸€ä¸ªå˜é‡å°±ä¼šå½±å“å¦å¤–ä¸€ä¸ªï¼Œéœ€è¦æ³¨æ„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">t = torch.ones(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;t: <span class="subst">&#123;t&#125;</span>&quot;</span>)</span><br><span class="line">n = t.numpy()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;n: <span class="subst">&#123;n&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>t: tensor([1., 1., 1., 1., 1.])
n: [1. 1. 1. 1. 1.]</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">t.add_(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;t: <span class="subst">&#123;t&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;n: <span class="subst">&#123;n&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>t: tensor([2., 2., 2., 2., 2.])
n: [2. 2. 2. 2. 2.]</code></pre>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Pytorchç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>Pytorchå­¦ä¹ ç¬”è®°3â€”â€”Transformæ•°æ®å˜æ¢</title>
    <url>/2021/12/13/af1b6d3a1966/</url>
    <content><![CDATA[<h1 id="ä¸‰transform">ä¸‰ã€Transform</h1>
<p>é€šå¸¸è€Œè¨€ï¼Œæ•°æ®ä¸ä¼šä»¥å¤„ç†å¥½çš„å½¢å¼å‡ºç°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨è®­ç»ƒå‰å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œä»¥é€‚åº”è®­ç»ƒ</p>
<p>æ‰€æœ‰ TorchVision çš„ Dataset éƒ½ä¼šæœ‰ä¸¤ä¸ªå‚æ•°â€”â€” transform
ç”¨äºä¿®æ”¹ç‰¹å¾ï¼Œtarget_transform
ç”¨äºä¿®æ”¹æ ‡ç­¾â€”â€”å®ƒä»¬æ¥å—åŒ…å«è½¬æ¢é€»è¾‘çš„å¯è°ƒç”¨å¯¹è±¡ï¼ˆå…¶å®å°±æ˜¯æ¥å—å‡½æ•°å¯¹è±¡ï¼‰ã€‚
torchvision.transforms æ¨¡å—æä¾›äº†å‡ ç§å¸¸è§çš„è½¬æ¢ã€‚</p>
<h3 id="ç¤ºä¾‹">1ã€ç¤ºä¾‹ï¼š</h3>
<p>å¦‚ä¸‹ä»£ç ä¸ºä¾‹ï¼Œæˆ‘ä»¬æ‰€æ‹¿åˆ°çš„FashionMNISTçš„ç‰¹å¾æ˜¯ä¸€ä¸ªPIL
Imageçš„æ ¼å¼ï¼Œå®ƒçš„æ ‡ç­¾æ˜¯ä¸€ä¸ªIntegeræ•´æ•°ã€‚ä½†æ˜¯æˆ‘ä»¬è®­ç»ƒçš„æ—¶å€™ï¼Œå¸Œæœ›ç‰¹å¾æ˜¯ä¸€ä¸ªæ­£åˆ™åŒ–åçš„å¼ é‡ï¼Œè€Œæ ‡ç­¾æ˜¯ä¸€ä¸ªOne-Hotå‘é‡å¼ é‡ã€‚æ‰€ä»¥åˆ†åˆ«é‡‡ç”¨ToTensorå’ŒLambdaå‡½æ•°æ¥è¿›è¡Œå¤„ç†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> datasets</span><br><span class="line"><span class="keyword">from</span> torchvision.transforms <span class="keyword">import</span> ToTensor, Lambda</span><br><span class="line"></span><br><span class="line">ds = datasets.FashionMNIST(</span><br><span class="line">    root=<span class="string">&quot;data&quot;</span>,</span><br><span class="line">    train=<span class="literal">True</span>,</span><br><span class="line">    download=<span class="literal">True</span>,</span><br><span class="line">    transform=ToTensor(),</span><br><span class="line">    target_transform=Lambda(<span class="keyword">lambda</span> y: torch.zeros(<span class="number">10</span>, dtype=torch.<span class="built_in">float</span>).scatter_(<span class="number">0</span>, torch.tensor(y), value=<span class="number">1</span>))</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>ToTensor() å‡½æ•°å¯ä»¥å°†ä¸€ä¸ª PIL image æˆ–è€… NumPy ndarray è½¬æ¢è‡³ä¸€ä¸ª
FloatTensorï¼ŒåŒæ—¶æ”¾ç¼©å›¾åƒçš„åƒç´ å€¼èŒƒå›´è‡³0-1.</p>
<p>Lambdaå¯ä»¥ç”¨äºå®šä¹‰ä»»ä½•ä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„lambdaè¡¨è¾¾å¼ï¼Œä½¿å…¶æˆä¸ºå‡½æ•°ï¼Œåœ¨ä¸Šè¿°å®šä¹‰çš„è¡¨è¾¾å¼ä¸­ï¼š
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Lambda(lambda y: torch.zeros(10, dtype=torch.float).scatter_(0, torch.tensor(y), value=1))</span><br></pre></td></tr></table></figure>
å…ˆåˆå§‹åŒ–äº†ä¸€ä¸ªç»´åº¦ä¸º10çš„é›¶å‘é‡ï¼Œç„¶ååˆ©ç”¨scatter_å‡½æ•°ï¼Œå°†æŸä¸€ä¸ªç»´åº¦çš„å€¼èµ‹ä¸º1</p>
<h4 id="scatterå‡½æ•°">Scatterå‡½æ•°</h4>
<p>scatter(dim, index, src) çš„å‚æ•°æœ‰ 3 ä¸ªï¼Œé€šè¿‡ä¸€ä¸ªå¼ é‡æˆ–æ ‡é‡ src
æ¥ä¿®æ”¹å¦ä¸€ä¸ªå¼ é‡ï¼Œå“ªä¸ªå…ƒç´ éœ€è¦ä¿®æ”¹ã€ç”¨ src ä¸­çš„å“ªä¸ªå…ƒç´ æ¥ä¿®æ”¹ç”± dim å’Œ
index å†³å®š - dimï¼šæ²¿ç€å“ªä¸ªç»´åº¦è¿›è¡Œç´¢å¼• - indexï¼šç”¨æ¥ scatter çš„å…ƒç´ ç´¢å¼•
- srcï¼šç”¨æ¥ scatter çš„æºå…ƒç´ ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ ‡é‡æˆ–ä¸€ä¸ªå¼ é‡</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Pytorchç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>Pytorchå­¦ä¹ ç¬”è®°4â€”â€”Building NeuralNetwork</title>
    <url>/2021/12/13/e052d246f1f0/</url>
    <content><![CDATA[<h1 id="å››ç¥ç»ç½‘ç»œå»ºç«‹">å››ã€ç¥ç»ç½‘ç»œå»ºç«‹</h1>
<p>ç¥ç»ç½‘ç»œç”±å¯¹æ•°æ®æ‰§è¡Œæ“ä½œçš„å±‚/æ¨¡å—ç»„æˆã€‚ torch.nn
å‘½åç©ºé—´æä¾›äº†æ„å»ºè‡ªå·±çš„ç¥ç»ç½‘ç»œæ‰€éœ€çš„æ‰€æœ‰æ„å»ºå—ã€‚ PyTorch
ä¸­çš„æ¯ä¸ªæ¨¡å—éƒ½æ˜¯ nn.Module çš„å­ç±»ã€‚
ç¥ç»ç½‘ç»œæ˜¯ä¸€ä¸ªæ¨¡å—æœ¬èº«ï¼Œç”±å…¶ä»–æ¨¡å—ï¼ˆå±‚ï¼‰ç»„æˆã€‚
è¿™ç§åµŒå¥—ç»“æ„å…è®¸è½»æ¾æ„å»ºå’Œç®¡ç†å¤æ‚çš„æ¶æ„ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> DataLoader</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> datasets, transforms</span><br></pre></td></tr></table></figure>
<h4 id="æ­¥éª¤-1å¦‚æœæœ‰æ¡ä»¶çš„è¯ä½¿ç”¨cudaè®¾å¤‡">æ­¥éª¤
1ã€å¦‚æœæœ‰æ¡ä»¶çš„è¯ï¼Œä½¿ç”¨Cudaè®¾å¤‡</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">device = <span class="string">&#x27;cuda&#x27;</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&#x27;cpu&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Using <span class="subst">&#123;device&#125;</span> device&#x27;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>Using cuda device</code></pre>
<h4
id="æ­¥éª¤-2æˆ‘ä»¬é€šè¿‡ç»§æ‰¿nn.moduleæ¥è‡ªå®šä¹‰æˆ‘ä»¬çš„ç¥ç»ç½‘ç»œç±»åœ¨__ini__ä¸­å®Œæˆç¥ç»ç½‘ç»œå±‚çš„å®šä¹‰ä¸”åœ¨forwardå‡½æ•°ä¸­å®Œæˆå¯¹è¾“å…¥çš„å¤„ç†">æ­¥éª¤
2ã€æˆ‘ä»¬é€šè¿‡ç»§æ‰¿nn.Moduleæ¥è‡ªå®šä¹‰æˆ‘ä»¬çš„ç¥ç»ç½‘ç»œç±»ï¼Œåœ¨__ini__ä¸­å®Œæˆç¥ç»ç½‘ç»œå±‚çš„å®šä¹‰ï¼Œä¸”åœ¨Forwardå‡½æ•°ä¸­ï¼Œå®Œæˆå¯¹è¾“å…¥çš„å¤„ç†</h4>
<p>nn.Sequential()
æ˜¯ä¸€ä¸ªæœ‰åºçš„å±‚çš„å®¹å™¨ï¼Œå°†ä¸€ç³»åˆ—çš„å±‚çº¿æ€§ç»„åˆåœ¨ä¸€èµ·ï¼ŒæŒ‰ç…§é¡ºåºæ‰§è¡Œ</p>
<p>nn.Flatten() å°†æ¯ä¸ª 2D 28x28 å›¾åƒè½¬æ¢ä¸º 784
ä¸ªåƒç´ å€¼çš„è¿ç»­æ•°ç»„ï¼ˆæ³¨æ„ï¼šbatchesçš„é‚£ä¸ªç»´åº¦è¢«ä¿ç•™äº†ï¼ˆä¹Ÿå°±æ˜¯dim=0çš„ç»´åº¦è¢«ä¿ç•™äº†ï¼‰ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œä¸€ä¸ª[3,28,28]çš„çŸ©é˜µï¼Œè¢«æ‘Šå¹³æˆäº†[3,784]çš„çŸ©é˜µ</p>
<p>nn.Linear(in_features=28*28, out_features=20) å…¨è¿æ¥å±‚</p>
<p>nn.ReLU() éçº¿æ€§æ¿€æ´»å‡½æ•°å±‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NeuralNetwork</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(NeuralNetwork, self).__init__()</span><br><span class="line">        self.flatten = nn.Flatten()</span><br><span class="line">        self.linear_relu_stack = nn.Sequential(</span><br><span class="line">            nn.Linear(<span class="number">28</span>*<span class="number">28</span>, <span class="number">512</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(<span class="number">512</span>, <span class="number">512</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(<span class="number">512</span>, <span class="number">10</span>),</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = self.flatten(x)</span><br><span class="line">        logits = self.linear_relu_stack(x)</span><br><span class="line">        <span class="keyword">return</span> logits</span><br></pre></td></tr></table></figure>
<h4 id="æ­¥éª¤-3å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡å¹¶å°†å…¶ç§»è‡³å¯¹åº”è®¾å¤‡æ‰“å°ç»“æ„">æ­¥éª¤
3ã€å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶å°†å…¶ç§»è‡³å¯¹åº”è®¾å¤‡ï¼Œæ‰“å°ç»“æ„</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = NeuralNetwork().to(device)</span><br><span class="line"><span class="built_in">print</span>(model)</span><br></pre></td></tr></table></figure>
<pre><code>NeuralNetwork(
  (flatten): Flatten(start_dim=1, end_dim=-1)
  (linear_relu_stack): Sequential(
    (0): Linear(in_features=784, out_features=512, bias=True)
    (1): ReLU()
    (2): Linear(in_features=512, out_features=512, bias=True)
    (3): ReLU()
    (4): Linear(in_features=512, out_features=10, bias=True)
  )
)</code></pre>
<h4
id="æ­¥éª¤-4åœ¨è¾“å…¥ä¸Šè°ƒç”¨æ¨¡å‹ä¼šè¿”å›ä¸€ä¸ª-10-ç»´å¼ é‡å…¶ä¸­åŒ…å«æ¯ä¸ªç±»çš„åŸå§‹é¢„æµ‹å€¼">æ­¥éª¤
4ã€åœ¨è¾“å…¥ä¸Šè°ƒç”¨æ¨¡å‹ä¼šè¿”å›ä¸€ä¸ª 10
ç»´å¼ é‡ï¼Œå…¶ä¸­åŒ…å«æ¯ä¸ªç±»çš„åŸå§‹é¢„æµ‹å€¼ã€‚</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">X = torch.rand(<span class="number">1</span>, <span class="number">28</span>, <span class="number">28</span>, device=device)</span><br><span class="line">logits = model(X)</span><br><span class="line">logits</span><br></pre></td></tr></table></figure>
<pre><code>tensor([[ 0.0394, -0.1041,  0.1203,  0.0809,  0.1222,  0.0305,  0.0539, -0.0241,
          0.0910,  0.0014]], device=&#39;cuda:0&#39;, grad_fn=&lt;AddmmBackward0&gt;)</code></pre>
<h3
id="softmaxå‡½æ•°logits-è¢«ç¼©æ”¾åˆ°å€¼-0-1-dim-å‚æ•°æŒ‡ç¤ºè¯¥ç»´åº¦ä¸Šçš„å€¼çš„æ€»å’Œå¿…é¡»ä¸º-1">Softmaxå‡½æ•°ï¼šlogits
è¢«ç¼©æ”¾åˆ°å€¼ [0, 1]ã€‚ dim å‚æ•°æŒ‡ç¤ºè¯¥ç»´åº¦ä¸Šçš„å€¼çš„æ€»å’Œå¿…é¡»ä¸º 1 ã€‚</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pred_probab = nn.Softmax(dim=<span class="number">1</span>)(logits) </span><br><span class="line"><span class="built_in">print</span>(pred_probab)</span><br><span class="line">y_pred = pred_probab.argmax(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Predicted class: <span class="subst">&#123;y_pred&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>tensor([[0.0996, 0.0863, 0.1080, 0.1038, 0.1082, 0.0987, 0.1011, 0.0935, 0.1049,
         0.0959]], device=&#39;cuda:0&#39;, grad_fn=&lt;SoftmaxBackward0&gt;)
Predicted class: tensor([4], device=&#39;cuda:0&#39;)</code></pre>
<h3 id="ç¥ç»ç½‘ç»œæ¨¡å‹å‚æ•°">ç¥ç»ç½‘ç»œæ¨¡å‹å‚æ•°ï¼š</h3>
<p>ç¥ç»ç½‘ç»œå†…çš„è®¸å¤šå±‚éƒ½æ˜¯å‚æ•°åŒ–çš„ï¼Œå³å…·æœ‰åœ¨è®­ç»ƒæœŸé—´ä¼˜åŒ–çš„ç›¸å…³æƒé‡å’Œåå·®ã€‚
å­ç±» nn.Module ä¼šè‡ªåŠ¨è·Ÿè¸ªæ¨¡å‹å¯¹è±¡ä¸­å®šä¹‰çš„æ‰€æœ‰å­—æ®µï¼Œå¹¶ä½¿ç”¨æ¨¡å‹çš„
parameters() æˆ– named_parameters() æ–¹æ³•ä½¿æ‰€æœ‰å‚æ•°éƒ½å¯ä»¥è®¿é—®ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Model structure: &quot;</span>, model, <span class="string">&quot;\n\n&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> name, param <span class="keyword">in</span> model.named_parameters():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Layer: <span class="subst">&#123;name&#125;</span> | Size: <span class="subst">&#123;param.size()&#125;</span> | Values : <span class="subst">&#123;param[:<span class="number">2</span>]&#125;</span> \n&quot;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>Model structure:  NeuralNetwork(
  (flatten): Flatten(start_dim=1, end_dim=-1)
  (linear_relu_stack): Sequential(
    (0): Linear(in_features=784, out_features=512, bias=True)
    (1): ReLU()
    (2): Linear(in_features=512, out_features=512, bias=True)
    (3): ReLU()
    (4): Linear(in_features=512, out_features=10, bias=True)
  )
) 


Layer: linear_relu_stack.0.weight | Size: torch.Size([512, 784]) | Values : tensor([[ 0.0354, -0.0090,  0.0262,  ..., -0.0218, -0.0343,  0.0239],
        [-0.0130,  0.0023, -0.0083,  ..., -0.0314,  0.0088,  0.0303]],
       device=&#39;cuda:0&#39;, grad_fn=&lt;SliceBackward0&gt;) 

Layer: linear_relu_stack.0.bias | Size: torch.Size([512]) | Values : tensor([ 0.0199, -0.0234], device=&#39;cuda:0&#39;, grad_fn=&lt;SliceBackward0&gt;) 

Layer: linear_relu_stack.2.weight | Size: torch.Size([512, 512]) | Values : tensor([[-0.0136,  0.0326, -0.0428,  ..., -0.0377, -0.0250,  0.0003],
        [-0.0187, -0.0297, -0.0096,  ...,  0.0277, -0.0320,  0.0395]],
       device=&#39;cuda:0&#39;, grad_fn=&lt;SliceBackward0&gt;) 

Layer: linear_relu_stack.2.bias | Size: torch.Size([512]) | Values : tensor([-0.0206, -0.0259], device=&#39;cuda:0&#39;, grad_fn=&lt;SliceBackward0&gt;) 

Layer: linear_relu_stack.4.weight | Size: torch.Size([10, 512]) | Values : tensor([[-0.0047, -0.0406, -0.0102,  ..., -0.0346,  0.0284,  0.0111],
        [-0.0308, -0.0165, -0.0334,  ...,  0.0257,  0.0339,  0.0208]],
       device=&#39;cuda:0&#39;, grad_fn=&lt;SliceBackward0&gt;) 

Layer: linear_relu_stack.4.bias | Size: torch.Size([10]) | Values : tensor([-0.0353,  0.0320], device=&#39;cuda:0&#39;, grad_fn=&lt;SliceBackward0&gt;) </code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Pytorchç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>Pytorchå­¦ä¹ ç¬”è®°5â€”â€”ä½¿ç”¨AutoGradè‡ªåŠ¨å¾®åˆ†</title>
    <url>/2021/12/13/2c757a5017fb/</url>
    <content><![CDATA[<h1 id="äº”ä½¿ç”¨autogradè®¡ç®—è‡ªåŠ¨å¾®åˆ†">äº”ã€ä½¿ç”¨AutoGradè®¡ç®—è‡ªåŠ¨å¾®åˆ†</h1>
<p>åœ¨è®­ç»ƒç¥ç»ç½‘ç»œæ—¶ï¼Œæœ€å¸¸ç”¨çš„ç®—æ³•æ˜¯åå‘ä¼ æ’­ã€‚
åœ¨è¯¥ç®—æ³•ä¸­ï¼Œå‚æ•°ï¼ˆæ¨¡å‹æƒé‡ï¼‰æ ¹æ®æŸå¤±å‡½æ•°ç›¸å¯¹äºç»™å®šå‚æ•°çš„æ¢¯åº¦è¿›è¡Œè°ƒæ•´ã€‚
ä¸ºäº†è®¡ç®—è¿™äº›æ¢¯åº¦ï¼ŒPyTorch æœ‰ä¸€ä¸ªåä¸º torch.autograd çš„å†…ç½®å¾®åˆ†å¼•æ“ã€‚
å®ƒæ”¯æŒä»»ä½•è®¡ç®—å›¾çš„æ¢¯åº¦è‡ªåŠ¨è®¡ç®—ã€‚</p>
<p>è€ƒè™‘æœ€ç®€å•çš„ä¸€å±‚ç¥ç»ç½‘ç»œï¼Œè¾“å…¥ xï¼Œå‚æ•° w å’Œ bï¼Œä»¥åŠä¸€äº›æŸå¤±å‡½æ•°ã€‚
å®ƒå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼åœ¨ PyTorch ä¸­å®šä¹‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">x = torch.ones(<span class="number">5</span>)  <span class="comment"># input tensor</span></span><br><span class="line">y = torch.zeros(<span class="number">3</span>)  <span class="comment"># expected output</span></span><br><span class="line">w = torch.randn(<span class="number">5</span>, <span class="number">3</span>, requires_grad=<span class="literal">True</span>)</span><br><span class="line">z = torch.matmul(x, w)+b</span><br><span class="line">loss = torch.nn.functional.binary_cross_entropy_with_logits(z, y)</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸‹æ˜¯è®¡ç®—å›¾ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦è®¡ç®—Losså‡½æ•°å¯¹wå’Œbçš„æ¢¯åº¦ï¼Œæ‰€ä»¥åœ¨ä¸Šé¢æˆ‘ä»¬å°†wå’Œbçš„requires_gradè®¾ç½®ä¸ºäº†True</p>
<figure>
<img src="https://pytorch.org/tutorials/_images/comp-graph.png"
alt="avatar" />
<figcaption aria-hidden="true">avatar</figcaption>
</figure>
<p>æˆ‘ä»¬åº”ç”¨äºå¼ é‡æ¥æ„å»ºè®¡ç®—å›¾çš„å‡½æ•°å®é™…ä¸Šæ˜¯ç±» Function çš„å¯¹è±¡ã€‚
è¯¥å¯¹è±¡çŸ¥é“å¦‚ä½•åœ¨å‰å‘è®¡ç®—å‡½æ•°ï¼Œä»¥åŠå¦‚ä½•åœ¨åå‘ä¼ æ’­æ­¥éª¤ä¸­è®¡ç®—å…¶å¯¼æ•°ã€‚
å¯¹åå‘ä¼ æ’­å‡½æ•°çš„å¼•ç”¨å­˜å‚¨åœ¨å¼ é‡çš„ grad_fn å±æ€§ä¸­ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Gradient function for z =&#x27;</span>, z.grad_fn)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Gradient function for loss =&#x27;</span>, loss.grad_fn)</span><br></pre></td></tr></table></figure>
<pre><code>Gradient function for z = &lt;AddBackward0 object at 0x00000271D5D03D90&gt;
Gradient function for loss = &lt;BinaryCrossEntropyWithLogitsBackward0 object at 0x00000271D5CF0F40&gt;</code></pre>
<h3 id="é€šè¿‡-backwardå‡½æ•°è®¡ç®—æ¢¯åº¦">é€šè¿‡ backward()å‡½æ•°è®¡ç®—æ¢¯åº¦</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">loss.backward()</span><br><span class="line"><span class="built_in">print</span>(w.grad)</span><br><span class="line"><span class="built_in">print</span>(b.grad)</span><br></pre></td></tr></table></figure>
<pre><code>tensor([[0.2175, 0.0032, 0.1359],
        [0.2175, 0.0032, 0.1359],
        [0.2175, 0.0032, 0.1359],
        [0.2175, 0.0032, 0.1359],
        [0.2175, 0.0032, 0.1359]])
tensor([0.2175, 0.0032, 0.1359])</code></pre>
<p>æ³¨æ„ï¼šæˆ‘ä»¬åªèƒ½è·å–è®¡ç®—å›¾çš„å¶å­èŠ‚ç‚¹çš„ grad å±æ€§ï¼Œè¿™äº›èŠ‚ç‚¹çš„
requires_grad å±æ€§è®¾ç½®ä¸º Trueã€‚
å¯¹äºå›¾ä¸­çš„æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹ï¼Œæ¢¯åº¦å°†ä¸å¯ç”¨ã€‚</p>
<p>å‡ºäºæ€§èƒ½åŸå› ï¼Œæˆ‘ä»¬åªèƒ½åœ¨ç»™å®šçš„è®¡ç®—å›¾ä¸Šä½¿ç”¨ä¸€æ¬¡backward()æ¥æ‰§è¡Œæ¢¯åº¦è®¡ç®—ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨åŒä¸€ä¸ªè®¡ç®—å›¾ä¸Šè¿›è¡Œå¤šæ¬¡backward()è°ƒç”¨ï¼Œæˆ‘ä»¬éœ€è¦å°†
retain_graph=True ä¼ é€’ç»™åå‘è°ƒç”¨ã€‚</p>
<h3 id="å¦‚ä½•åœæ­¢è·Ÿè¸ªæ¢¯åº¦">å¦‚ä½•åœæ­¢è·Ÿè¸ªæ¢¯åº¦ï¼Ÿ</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å…·æœ‰ requires_grad=True
çš„å¼ é‡éƒ½åœ¨è·Ÿè¸ªå®ƒä»¬çš„è®¡ç®—å†å²å¹¶æ”¯æŒæ¢¯åº¦è®¡ç®—ã€‚
ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹æˆ‘ä»¬ä¸éœ€è¦è¿™æ ·åšï¼Œä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬è®­ç»ƒäº†æ¨¡å‹å¹¶ä¸”åªæƒ³å°†å…¶åº”ç”¨äºæŸäº›è¾“å…¥æ•°æ®æ—¶ï¼Œå³æˆ‘ä»¬åªæƒ³é€šè¿‡ç½‘ç»œè¿›è¡Œå‰å‘è®¡ç®—ã€‚
æˆ‘ä»¬å¯ä»¥é€šè¿‡ç”¨ torch.no_grad() å—åŒ…å›´æˆ‘ä»¬çš„è®¡ç®—ä»£ç æ¥åœæ­¢è·Ÿè¸ªè®¡ç®—ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">z = torch.matmul(x, w)+b</span><br><span class="line"><span class="built_in">print</span>(z.requires_grad)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> torch.no_grad():</span><br><span class="line">    z = torch.matmul(x, w)+b</span><br><span class="line"><span class="built_in">print</span>(z.requires_grad)</span><br></pre></td></tr></table></figure>
<pre><code>True
False</code></pre>
<p>æˆ–è€…ä½¿ç”¨ detachæ–¹æ³•ä¹Ÿå¯ä»¥å®Œæˆæ­¤é¡¹å·¥ä½œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">z = torch.matmul(x, w)+b</span><br><span class="line">z_det = z.detach()</span><br><span class="line"><span class="built_in">print</span>(z_det.requires_grad)</span><br></pre></td></tr></table></figure>
<pre><code>False</code></pre>
<h3 id="åœæ­¢è·Ÿè¸ªæ¢¯åº¦çš„ä¸€äº›æƒ…å†µ">åœæ­¢è·Ÿè¸ªæ¢¯åº¦çš„ä¸€äº›æƒ…å†µ</h3>
<ul>
<li><p>1ã€å°†ç¥ç»ç½‘ç»œä¸­çš„æŸäº›å‚æ•°æ ‡è®°ä¸ºå†»ç»“å‚æ•°ã€‚ï¼ˆé€šå¸¸è§äºè¿ç§»å­¦ä¹ ï¼‰</p></li>
<li><p>2ã€åœ¨ä»…è¿›è¡Œå‰å‘ä¼ é€’æ—¶åŠ å¿«è®¡ç®—é€Ÿåº¦ï¼Œå› ä¸ºå¯¹ä¸è·Ÿè¸ªæ¢¯åº¦çš„å¼ é‡è¿›è¡Œè®¡ç®—ä¼šæ›´æœ‰æ•ˆã€‚</p></li>
</ul>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Pytorchç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>Pytorchå­¦ä¹ ç¬”è®°7â€”â€”ä¸€ä¸ªæ·±åº¦å­¦ä¹ ç¨‹åºçš„é€šç”¨æ¡†æ¶</title>
    <url>/2021/12/15/74d5fdd90932/</url>
    <content><![CDATA[<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ·±åº¦å­¦ä¹ ç¨‹åºçš„é€šç”¨æ¡†æ¶ï¼Œå¤§éƒ¨åˆ†åŸºç¡€çš„æ·±åº¦å­¦ä¹ ä»»åŠ¡éƒ½å¯ä»¥æŒ‰ç…§ä»¥ä¸‹è¿™ä¸ªæ¡†æ¶çš„æ­¥éª¤å»è¿›è¡Œä¹¦å†™ï¼š</p>
<h4 id="step0-ä¸€äº›ä¾èµ–é¡¹å‡½æ•°">Step0: ä¸€äº›ä¾èµ–é¡¹å‡½æ•°</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_device</span>():</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27; Get device (if GPU is available, use GPU) &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;cuda&#x27;</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&#x27;cpu&#x27;</span></span><br><span class="line">  </span><br><span class="line"> <span class="comment"># fix random seed</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">same_seeds</span>(<span class="params">seed</span>):</span><br><span class="line">    torch.manual_seed(seed)</span><br><span class="line">    <span class="keyword">if</span> torch.cuda.is_available():</span><br><span class="line">        torch.cuda.manual_seed(seed)</span><br><span class="line">        torch.cuda.manual_seed_all(seed)  </span><br><span class="line">    np.random.seed(seed)  </span><br><span class="line">    torch.backends.cudnn.benchmark = <span class="literal">False</span></span><br><span class="line">    torch.backends.cudnn.deterministic = <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<h4 id="step1-ä¸‹è½½æ•°æ®å‡†å¤‡æ•°æ®è¿™ä¸€æ­¥å°†ç¡¬ç›˜çš„æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­">Step1:
ä¸‹è½½æ•°æ®ã€å‡†å¤‡æ•°æ®ï¼ˆè¿™ä¸€æ­¥å°†ç¡¬ç›˜çš„æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼‰</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Loading data ...&#x27;</span>)</span><br><span class="line"><span class="comment"># åŠ è½½Train Featuresã€Train Labelsã€Test Features</span></span><br><span class="line">train = np.load(<span class="string">&#x27;train.npy&#x27;</span>)</span><br><span class="line">train_label = np.load(<span class="string">&#x27;train_label.npy&#x27;</span>)</span><br><span class="line">test = np.load(<span class="string">&#x27;test.npy&#x27;</span>)</span><br><span class="line"><span class="comment"># ä¸€èˆ¬è€Œè¨€å¯ä»¥æ‰“å°ä¸€ä¸‹æ•°æ®é›†çš„å¤§å°ï¼Œå¿ƒä¸­æœ‰æ•°</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Size of training data: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(train.shape))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Size of testing data: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(test.shape))</span><br></pre></td></tr></table></figure>
<h4 id="step2-åˆ›å»ºdatasetç±»">Step2: åˆ›å»ºDatasetç±»</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> Dataset</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyDataset</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, X, y=<span class="literal">None</span></span>):   <span class="comment"># ä¸»è¦å°±æ˜¯åœ¨initå‡½æ•°é‡Œå®šä¹‰å¥½ self.data å’Œ self.label</span></span><br><span class="line">        self.data = torch.from_numpy(X).<span class="built_in">float</span>()  <span class="comment"># è¿›è¡Œèµ‹å€¼</span></span><br><span class="line">        <span class="keyword">if</span> y <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:   <span class="comment"># è¿™å„¿éœ€è¦è€ƒè™‘æœ‰yçš„è®­ç»ƒé›† å’Œ æ²¡æœ‰yçš„æµ‹è¯•é›†</span></span><br><span class="line">            self.label = torch.LongTensor(y.astype(np.<span class="built_in">int</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.label = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, idx</span>):    <span class="comment"># åŸºæœ¬éƒ½æ˜¯å¦‚ä¸‹è¿™ä¸ªå½¢å¼ï¼Œä¸å¤ªéœ€è¦å˜åŒ–</span></span><br><span class="line">        <span class="keyword">if</span> self.label <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> self.data[idx], self.label[idx]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> self.data[idx]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):  <span class="comment"># è¿”å›æ•°æ®é›†é•¿åº¦ï¼Œä¸€èˆ¬éƒ½æ˜¯å¦‚ä¸‹è¿™ä¸ªå½¢å¼ï¼Œä¹Ÿä¸å¤ªéœ€è¦å˜åŒ–</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.data)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="step3-å°†è®­ç»ƒæ•°æ®åˆ†å‰²ä¸º-è®­ç»ƒé›†-å’Œ-éªŒè¯é›†">Step3: å°†è®­ç»ƒæ•°æ®åˆ†å‰²ä¸º
è®­ç»ƒé›† å’Œ éªŒè¯é›†</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">VAL_RATIO = <span class="number">0.2</span>  <span class="comment"># åˆ©ç”¨æ­¤å‚æ•°æ§åˆ¶ éªŒè¯é›†å  æ•´ä¸ªè®­ç»ƒæ•°æ®çš„æ¯”ä¾‹</span></span><br><span class="line"></span><br><span class="line">percent = <span class="built_in">int</span>(train.shape[<span class="number">0</span>] * (<span class="number">1</span> - VAL_RATIO))</span><br><span class="line">train_x, train_y, val_x, val_y = train[:percent], train_label[:percent], train[percent:], train_label[percent:]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Size of training set: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(train_x.shape))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Size of validation set: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(val_x.shape))</span><br></pre></td></tr></table></figure>
<h4 id="step4-å®ä¾‹åŒ–datasetå¯¹è±¡ä»¥åŠå¯¹åº”çš„dataloaderå¯¹è±¡">Step4:
å®ä¾‹åŒ–Datasetå¯¹è±¡ä»¥åŠå¯¹åº”çš„DataLoaderå¯¹è±¡</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">BATCH_SIZE = <span class="number">64</span>  <span class="comment"># è®¾å®š Batch_sizeï¼Œæ­¤å‚æ•°DataLoader</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> DataLoader</span><br><span class="line"></span><br><span class="line">train_set = MyDataset(train_x, train_y)</span><br><span class="line">val_set = MyDataset(val_x, val_y)</span><br><span class="line"></span><br><span class="line"><span class="comment">#only shuffle the training data</span></span><br><span class="line">train_loader = DataLoader(train_set, batch_size=BATCH_SIZE, shuffle=<span class="literal">True</span>) </span><br><span class="line">val_loader = DataLoader(val_set, batch_size=BATCH_SIZE, shuffle=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<h4 id="step5-åˆ›å»ºç½‘ç»œæ¨¡å‹">Step5: åˆ›å»ºç½‘ç»œæ¨¡å‹</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Classifier</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):   <span class="comment"># å®šä¹‰ç½‘ç»œå±‚çº§</span></span><br><span class="line">        <span class="built_in">super</span>(Classifier, self).__init__()</span><br><span class="line">        self.layer1 = nn.Linear(<span class="number">429</span>, <span class="number">1024</span>)</span><br><span class="line">        self.layer2 = nn.Linear(<span class="number">1024</span>, <span class="number">512</span>)</span><br><span class="line">        self.layer3 = nn.Linear(<span class="number">512</span>, <span class="number">128</span>)</span><br><span class="line">        self.out = nn.Linear(<span class="number">128</span>, <span class="number">39</span>) </span><br><span class="line">        self.act_fn = nn.Sigmoid()</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>): <span class="comment"># å®šä¹‰æ•°æ®çš„æµè½¬é€»è¾‘è¿‡ç¨‹</span></span><br><span class="line">        x = self.layer1(x)</span><br><span class="line">        x = self.act_fn(x)</span><br><span class="line">        </span><br><span class="line">        x = self.layer2(x)</span><br><span class="line">        x = self.act_fn(x)</span><br><span class="line"></span><br><span class="line">        x = self.layer3(x)</span><br><span class="line">        x = self.act_fn(x)</span><br><span class="line"></span><br><span class="line">        x = self.out(x)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>
<h4 id="step6-è®¾å®šä¸€äº›è®­ç»ƒå‚æ•°ä¸ºè®­ç»ƒä½œå‡†å¤‡">Step6:
è®¾å®šä¸€äº›è®­ç»ƒå‚æ•°ï¼Œä¸ºè®­ç»ƒä½œå‡†å¤‡</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># fix random seed for reproducibility</span></span><br><span class="line">same_seeds(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># get device </span></span><br><span class="line">device = get_device()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;DEVICE: <span class="subst">&#123;device&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># training parameters </span></span><br><span class="line">num_epoch = <span class="number">20</span>               <span class="comment"># number of training epoch</span></span><br><span class="line">learning_rate = <span class="number">0.0001</span>       <span class="comment"># learning rate</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># the path where checkpoint saved</span></span><br><span class="line">model_path = <span class="string">&#x27;./model.ckpt&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># create model, define a loss function, and optimizer</span></span><br><span class="line">model = Classifier().to(device)</span><br><span class="line">criterion = nn.CrossEntropyLoss() </span><br><span class="line">optimizer = torch.optim.Adam(model.parameters(), lr=learning_rate)</span><br></pre></td></tr></table></figure>
<h4 id="step7-å¼€å¯ç½‘ç»œè®­ç»ƒå‚æ•°ä¼˜åŒ–">Step7: å¼€å¯ç½‘ç»œè®­ç»ƒï¼Œå‚æ•°ä¼˜åŒ–</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># start training</span></span><br><span class="line"></span><br><span class="line">best_acc = <span class="number">0.0</span></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epoch):</span><br><span class="line">    train_loss = <span class="number">0.0</span></span><br><span class="line">    val_loss = <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># training</span></span><br><span class="line">    model.train() <span class="comment"># set the model to training mode</span></span><br><span class="line">    <span class="keyword">for</span> i, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(train_loader):</span><br><span class="line">        inputs, labels = data  <span class="comment"># ä»dataä¸­åŠ è½½inputså’Œlabels</span></span><br><span class="line">        inputs, labels = inputs.to(device), labels.to(device) <span class="comment"># æ‹·è´è‡³è®¾å¤‡</span></span><br><span class="line">        optimizer.zero_grad()  <span class="comment"># æ¸…é›¶æ¢¯åº¦</span></span><br><span class="line">        outputs = model(inputs)   <span class="comment"># å°†è¾“å…¥æ”¾åˆ°æ¨¡å‹ä¸­æ‹¿åˆ°è¾“å‡º</span></span><br><span class="line">        batch_loss = criterion(outputs, labels) <span class="comment"># é€šè¿‡æŸå¤±å‡½æ•°ï¼Œè®¡ç®—æœ¬æ¬¡æŸå¤±å€¼</span></span><br><span class="line">        batch_loss.backward()  <span class="comment"># æŸå¤±åå‘ä¼ æ’­ï¼Œè®¡ç®—æ¢¯åº¦</span></span><br><span class="line">        optimizer.step() <span class="comment"># ä½¿ç”¨optimizeræ›´æ–°ä¸€æ­¥æ¨¡å‹</span></span><br><span class="line"></span><br><span class="line">        train_loss += batch_loss.item()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ¯ä¸€ä¸ªepochå®Œæˆåï¼Œå¦‚æœæœ‰éªŒè¯é›†çš„è¯ï¼Œå°±è¿›è¡ŒvalidationéªŒè¯</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(val_set) &gt; <span class="number">0</span>:</span><br><span class="line">        model.<span class="built_in">eval</span>() <span class="comment"># set the model to evaluation mode</span></span><br><span class="line">        <span class="keyword">with</span> torch.no_grad(): <span class="comment"># éªŒè¯é›†ä¸éœ€è¦è®¡ç®—æ¢¯åº¦</span></span><br><span class="line">            <span class="keyword">for</span> i, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(val_loader):</span><br><span class="line">                inputs, labels = data </span><br><span class="line">                inputs, labels = inputs.to(device), labels.to(device)</span><br><span class="line">                outputs = model(inputs)</span><br><span class="line">                batch_loss = criterion(outputs, labels) </span><br><span class="line"></span><br><span class="line">                val_loss += batch_loss.item()</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;[&#123;:03d&#125;/&#123;:03d&#125;] Train Loss: &#123;:3.6f&#125; | Val Loss: &#123;:3.6f&#125;&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">                epoch + <span class="number">1</span>, num_epoch, train_loss/<span class="built_in">len</span>(train_loader), val_loss/<span class="built_in">len</span>(val_loader)</span><br><span class="line">            ))</span><br><span class="line"></span><br><span class="line">            <span class="comment"># å¿…å¤‡è¿‡ç¨‹ï¼Œå¦‚æœæ¨¡å‹æ¯”æˆªæ­¢å½“å‰æ›´ä¼˜äº†ï¼Œé‚£ä¹ˆå°±ä¿å­˜å¹¶è®°å½•ï¼Œç„¶åè¾“å‡º</span></span><br><span class="line">            <span class="keyword">if</span> val_acc &gt; best_acc:</span><br><span class="line">                best_acc = val_acc</span><br><span class="line">                torch.save(model.state_dict(), model_path)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;saving model with acc &#123;:.3f&#125;&#x27;</span>.<span class="built_in">format</span>(best_acc/<span class="built_in">len</span>(val_set)))</span><br><span class="line">    <span class="keyword">else</span>: <span class="comment"># æ²¡æœ‰éªŒè¯é›†è¿™ä¸€æ­¥çš„è¯ï¼Œå°±å¯ä»¥ç›´æ¥æ‰“å°è¾“å‡º</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;[&#123;:03d&#125;/&#123;:03d&#125;] Train Acc: &#123;:3.6f&#125; Loss: &#123;:3.6f&#125;&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">            epoch + <span class="number">1</span>, num_epoch, train_acc/<span class="built_in">len</span>(train_set), train_loss/<span class="built_in">len</span>(train_loader)</span><br><span class="line">        ))</span><br><span class="line">        </span><br><span class="line"><span class="comment"># å¦‚æœæ²¡æœ‰éªŒè¯è¿™ä¸€æ­¥éª¤çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦ä¿å­˜æœ€ç»ˆè®­ç»ƒå¾—åˆ°çš„è¿™ä¸ªæ¨¡å‹</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(val_set) == <span class="number">0</span>:</span><br><span class="line">    torch.save(model.state_dict(), model_path)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;saving model at last epoch&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="step8-test-æµ‹è¯•è®¡ç®—æµ‹è¯•é›†çš„é¢„æµ‹å€¼">Step8: Test
æµ‹è¯•,è®¡ç®—æµ‹è¯•é›†çš„é¢„æµ‹å€¼</h4>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®ä¾‹åŒ–æµ‹è¯•ç”¨çš„DataSetå’ŒDataLoader</span></span><br><span class="line">test_set = MyDataset(test, <span class="literal">None</span>)</span><br><span class="line">test_loader = DataLoader(test_set, batch_size=BATCH_SIZE, shuffle=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#  å®ä¾‹åŒ–æ¨¡å‹ï¼ŒåŠ è½½å‚æ•°</span></span><br><span class="line">model = Classifier().to(device)</span><br><span class="line">model.load_state_dict(torch.load(model_path))</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å§‹è¿›è¡Œé¢„æµ‹ï¼Œ </span></span><br><span class="line">predict = []</span><br><span class="line">model.<span class="built_in">eval</span>() <span class="comment"># å°†æ¨¡å‹è°ƒæ•´è‡³è¯„ä¼°çŠ¶æ€ï¼ˆå¿…å¤‡æ­¥éª¤ï¼‰</span></span><br><span class="line"><span class="keyword">with</span> torch.no_grad(): <span class="comment"># ç”±äºé¢„æµ‹ä¸éœ€è¦è·Ÿè¸ªæ¢¯åº¦</span></span><br><span class="line">    <span class="keyword">for</span> i, data <span class="keyword">in</span> <span class="built_in">enumerate</span>(test_loader): <span class="comment"># è®¡ç®—s</span></span><br><span class="line">        inputs = data</span><br><span class="line">        inputs = inputs.to(device)</span><br><span class="line">        outputs = model(inputs)</span><br><span class="line">        <span class="keyword">for</span> y <span class="keyword">in</span> test_pred.cpu().numpy():</span><br><span class="line">            predict.append(y)</span><br><span class="line">           </span><br><span class="line"><span class="comment"># è¾“å‡ºé¢„æµ‹çš„CSVæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;prediction.csv&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> i, y <span class="keyword">in</span> <span class="built_in">enumerate</span>(predict):</span><br><span class="line">        f.write(<span class="string">&#x27;&#123;&#125;,&#123;&#125;\n&#x27;</span>.<span class="built_in">format</span>(i, y))</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Pytorchç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>Pytorchå­¦ä¹ ç¬”è®°8â€”â€”å¸¸ç”¨å‡½æ•°æ•´ç†ï¼ˆæ›´æ–°ä¸­ï¼‰</title>
    <url>/2021/12/16/60a9625b780d/</url>
    <content><![CDATA[<h3 id="softmax-dimåº”å½“å¦‚ä½•å¡«">1ã€SoftMax â€” dimåº”å½“å¦‚ä½•å¡«ï¼Ÿ</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼šhttps://pytorch.org/docs/stable/generated/torch.nn.functional.softmax.html?highlight=softmax#torch.nn.functional.softmax</p>
<p>1ï¼‰æ ‡å‡†ç”¨æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">torch.nn.functional.softmax(<span class="built_in">input</span>, dim)</span><br><span class="line">ï¼ˆApplies a softmax function.ï¼‰</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ä¾èµ–åº“</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ç®€å•ç¤ºä¾‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=torch.rand(<span class="number">3</span>,<span class="number">16</span>,<span class="number">20</span>) <span class="comment"># æˆ‘ä»¬çœ‹ä¸€ä¸ªä¸‰ç»´çš„tensor</span></span><br><span class="line">b=F.softmax(a,dim=<span class="number">0</span>)  </span><br><span class="line"><span class="comment"># dim = 0ä»£è¡¨ è¾“å‡ºçš„æ˜¯åœ¨dim=0ç»´ä¸Šçš„æ¦‚ç‡åˆ†å¸ƒï¼Œä¹Ÿå°±æ˜¯è¯´ å¯¹äºä»»æ„çš„i,j (iæ˜¯dim=1ä¸Šçš„æŸä¸ªåæ ‡ï¼Œjæ˜¯dim=2ä¸Šçš„æŸä¸ªåæ ‡)ï¼Œé€šè¿‡softmaxä¹‹åï¼Œè¦æ±‚ a[0][i][j] + a[1][i][j] + a[2][i][j] = 1 ã€æ­¤å¤„ä»…æœ‰3é¡¹ç›¸åŠ ï¼ŒåŸå› æ˜¯aå‘é‡dim=0ç»´åº¦ é•¿åº¦ä¸º3ï¼Œä»…æœ‰3ä¸ªå…ƒç´ ã€‚ã€‘</span></span><br></pre></td></tr></table></figure>
<p>4ï¼‰ä¸€ä¸ªæ›´ä¸ºä¸€èˆ¬çš„ç¤ºä¾‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a=torch.rand(x1,x2,x3,x4,â€¦â€¦,xn) <span class="comment"># æˆ‘ä»¬çœ‹ä¸€ä¸ªnç»´çš„tensor</span></span><br><span class="line">b=F.softmax(a,dim=m)</span><br><span class="line"></span><br><span class="line"><span class="comment"># dim = mä»£è¡¨ è¾“å‡ºçš„æ˜¯åœ¨dim=mç»´ä¸Šçš„æ¦‚ç‡åˆ†å¸ƒï¼Œä¹Ÿå°±æ˜¯è¯´ é€šè¿‡softmaxä¹‹åï¼Œå¯¹äºä»»æ„çš„dim!=mçš„ç»´åº¦çš„ä¸€ä¸ªå®šä½ï¼ši1,i2,i3,â€¦â€¦im-1,im+1,â€¦â€¦inï¼Œéœ€è¦æ»¡è¶³å¦‚ä¸‹å…¬å¼ </span></span><br><span class="line"><span class="comment">#  a[i1][i2]â€¦â€¦[im-1][0][im+1]â€¦â€¦[in] + </span></span><br><span class="line"><span class="comment">#  a[i1][i2]â€¦â€¦[im-1][1][im+1]â€¦â€¦[in] +</span></span><br><span class="line"><span class="comment">#  a[i1][i2]â€¦â€¦[im-1][2][im+1]â€¦â€¦[in] +</span></span><br><span class="line"><span class="comment">#  â€¦â€¦ +</span></span><br><span class="line"><span class="comment">#  a[i1][i2]â€¦â€¦[im-1][xm][im+1]â€¦â€¦[in] = 1 å³å¯</span></span><br></pre></td></tr></table></figure>
<h3 id="viewå‡½æ•°">2ã€Viewå‡½æ•°</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼šhttps://pytorch.org/docs/stable/generated/torch.Tensor.view.html?highlight=view#torch.Tensor.view</p>
<p>1ï¼‰æ ‡å‡†ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Tensor.view(*shape) â†’ Tensor</span><br><span class="line">(Returns a new tensor with the same data as the `self` tensor but of a different `shape`.)</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ä¾èµ–åº“ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import torch</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ç®€å•ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = torch.rand(<span class="number">10</span>)  <span class="comment"># ä¸€ä¸ª1ç»´çš„Tensor</span></span><br><span class="line">y = x.view(<span class="number">2</span>, <span class="number">5</span>) <span class="comment"># å°†å…¶resizeæˆäº†ä¸€ä¸ª2*5å¤§å°çš„ äºŒç»´çš„Tensor</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">x: tensor([0.6611, 0.3041, 0.8008, 0.1733, 0.0197, 0.3914, 0.0468, 0.2380, 0.4159,</span></span><br><span class="line"><span class="string">        0.8241])</span></span><br><span class="line"><span class="string">y: tensor([[0.6611, 0.3041, 0.8008, 0.1733, 0.0197],</span></span><br><span class="line"><span class="string">        [0.3914, 0.0468, 0.2380, 0.4159, 0.8241]])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<p>4ï¼‰æ‰©å±•ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = torch.rand(<span class="number">20</span>)  <span class="comment"># ä¸€ä¸ª1ç»´çš„Tensor</span></span><br><span class="line">y = x.view(<span class="number">2</span>,<span class="number">5</span>,-<span class="number">1</span>) <span class="comment"># å°†å…¶resizeæˆäº†ä¸€ä¸ª 2*5*? å¤§å°çš„ ä¸‰ç»´çš„Tensorï¼Œï¼Ÿä»£è¡¨ç¬¬ä¸‰ç»´åº¦çš„å¤§å°éœ€è¦æ¨æ–­å¾—åˆ°ï¼Œåœ¨æ­¤å¤„çš„è¯ï¼Œæœ€ååº”è¯¥ä¼šå½¢æˆä¸€ä¸ª2*5*2çš„ä¸‰ç»´Tensorã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">x: tensor([0.5704, 0.4154, 0.0700, 0.8145, 0.1743, 0.1049, 0.1678, 0.2554, 0.9557,</span></span><br><span class="line"><span class="string">        0.0484, 0.7714, 0.5377, 0.8711, 0.6069, 0.0996, 0.6384, 0.9334, 0.2851,</span></span><br><span class="line"><span class="string">        0.5883, 0.5882])</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">y: tensor([[[0.5704, 0.4154],</span></span><br><span class="line"><span class="string">         [0.0700, 0.8145],</span></span><br><span class="line"><span class="string">         [0.1743, 0.1049],</span></span><br><span class="line"><span class="string">         [0.1678, 0.2554],</span></span><br><span class="line"><span class="string">         [0.9557, 0.0484]],</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        [[0.7714, 0.5377],</span></span><br><span class="line"><span class="string">         [0.8711, 0.6069],</span></span><br><span class="line"><span class="string">         [0.0996, 0.6384],</span></span><br><span class="line"><span class="string">         [0.9334, 0.2851],</span></span><br><span class="line"><span class="string">         [0.5883, 0.5882]]])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥ä¸‹ä¸ºé”™è¯¯ç¤ºä¾‹ï¼š</span></span><br><span class="line">x = torch.rand(<span class="number">10</span>)</span><br><span class="line">y = x.view(<span class="number">2</span>,<span class="number">3</span>)  <span class="comment"># ä¼šæŠ¥é”™</span></span><br><span class="line">y = x.view(<span class="number">2</span>,)   <span class="comment"># ä¼šæŠ¥é”™</span></span><br></pre></td></tr></table></figure>
<h3 id="permuteå‡½æ•°">3ã€Permuteå‡½æ•°</h3>
<p>1ï¼‰æ ‡å‡†ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">torch.permute(input, dims) â†’ Tensor</span><br><span class="line">- parameters:</span><br><span class="line">  input (Tensor) â€“ the input tensor.</span><br><span class="line">  dims (tuple of python:ints) â€“ The desired ordering of dimensions</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ä¾èµ–åº“ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ç®€å•ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = torch.randn(<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(x.size())</span><br><span class="line"><span class="comment"># torch.Size([2, 3, 5])</span></span><br><span class="line"><span class="built_in">print</span>(torch.permute(x, (<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>)).size())</span><br><span class="line"><span class="comment"># torch.Size([5, 2, 3])</span></span><br><span class="line"><span class="comment"># æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š  [dim0,dim1,dim2,dim3,dim4]  ç»è¿‡permute(2,0,1,4,3)ä»¥åï¼š</span></span><br><span class="line"><span class="comment"># ï¼ˆ permuteçš„å«ä¹‰ï¼š	ç°åœ¨çš„ç¬¬0ç»´åº”å½“ä¸ºåŸæ¥çš„ç¬¬2ç»´ï¼Œç°åœ¨çš„ç¬¬1ç»´åº”å½“ä¸ºåŸæ¥çš„ç¬¬0ç»´ï¼Œâ€¦â€¦ ï¼‰</span></span><br><span class="line"><span class="comment"># ä¼šå˜æˆå¦‚ä¸‹å½¢å¼ã€‚[dim2,dim0,dim1,dim4,dim3]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="nn.identity">4ã€nn.Identity()</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼šhttps://pytorch.org/docs/stable/generated/torch.nn.Identity.html#torch.nn.Identity</p>
<p>1ï¼‰æ ‡å‡†ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class torch.nn.Identity(*args, **kwargs)</span><br><span class="line">- A placeholder identity operator that is argument-insensitive.</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ä¾èµ–åº“ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import torch.nn</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ç®€å•ç¤ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; m = nn.Identity(54, unused_argument1=0.1, unused_argument2=False)</span><br><span class="line">&gt;&gt;&gt; input = torch.randn(128, 20)</span><br><span class="line">&gt;&gt;&gt; output = m(input)</span><br><span class="line">&gt;&gt;&gt; print(output.size())</span><br><span class="line">torch.Size([128, 20])</span><br><span class="line"></span><br><span class="line"># ç»è¿‡mç­‰äº æ²¡æœ‰å‘ç”Ÿä»»ä½•å˜æ¢ </span><br></pre></td></tr></table></figure>
<h3 id="nn.parameter">5ã€nn.Parameter</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼šhttps://pytorch.org/docs/stable/generated/torch.nn.parameter.Parameter.html?highlight=parameter#torch.nn.parameter.Parameter</p>
<p>1ï¼‰æ ‡å‡†ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class torch.nn.Parameter(data=None, requires_grad=True)</span><br><span class="line">- A kind of Tensor that is to be considered a module parameter.</span><br><span class="line">- åˆ›å»ºä¸€ä¸ªå¯è®­ç»ƒå‚æ•°</span><br><span class="line">- when theyâ€™re assigned as Module attributes they are automatically added to the list of its parameters, and will appear e.g. in parameters() iterator. </span><br><span class="line">- å½“å®ƒä»¬ä½œä¸ºæ¨¡å‹çš„ä¸€ä¸ªå±æ€§çš„æ—¶å€™ï¼Œä¼šè¢«è‡ªåŠ¨åŠ å…¥åˆ°æ¨¡å‹çš„å¯è®­ç»ƒå‚æ•°ä¸­å»</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ä¾èµ–åº“ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch.nn</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ç®€å•ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Layer</span>(nn.Module):</span><br><span class="line">	  <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">	  	self.cls_token = nn.Parameter(torch.zeros(<span class="number">1</span>, <span class="number">1</span>, <span class="number">762</span>))</span><br></pre></td></tr></table></figure>
<h3 id="nn.functional.pad">6ã€nn.functional.pad</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼šhttps://pytorch.org/docs/stable/generated/torch.nn.functional.pad.html?highlight=pad#torch.nn.functional.pad</p>
<p>1ï¼‰æ ‡å‡†ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">torch.nn.functional.pad(input, pad, mode=&#x27;constant&#x27;, value=0.0)</span><br><span class="line">-	input (Tensor) â€“ N-dimensional tensor</span><br><span class="line">- pad (tuple) â€“ m-elements tuple, where m/2 â‰¤ input dimensions and m is even.</span><br><span class="line">- mode â€“ &#x27;constant&#x27;, &#x27;reflect&#x27;, &#x27;replicate&#x27; or &#x27;circular&#x27;. Default: &#x27;constant&#x27;</span><br><span class="line">- value â€“ fill value for &#x27;constant&#x27; padding. Default: 0</span><br><span class="line"></span><br><span class="line">å¯¹äºpadding-sizeçš„è¯´æ˜ï¼š</span><br><span class="line">	å¡«å……å°ºå¯¸ç”¨æ¥å¡«å……è¾“å…¥çš„æŸäº›ç»´åº¦ï¼Œä»æœ€åä¸€ä¸ªç»´åº¦å¼€å§‹è¿›è¡Œæè¿°ã€‚æ¯”å¦‚è¯´:</span><br><span class="line">	å¦‚æœæƒ³è¦å¡«å……æœ€åä¸€ä¸ªç»´åº¦ï¼Œé‚£å°±è®¾ç½®ä¸º(padding_left,padding_right)</span><br><span class="line">	å¦‚æœæƒ³è¦å¡«å……æœ€åä¸¤ä¸ªç»´åº¦ï¼Œé‚£å°±è®¾ç½®ä¸º(padding_left,padding_right,padding_top,padding_bottom)</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ä¾èµ–åº“ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch.nn.function <span class="keyword">as</span> F</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ç®€å•ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn.functional <span class="keyword">as</span> F</span><br><span class="line">t2d = torch.rand(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">p1d = (<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(t2d)</span><br><span class="line">out = F.pad(t2d, p1d, <span class="string">&quot;constant&quot;</span>, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(out.size())</span><br><span class="line"><span class="built_in">print</span>(out)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">tensor([[0.6359, 0.0629],</span></span><br><span class="line"><span class="string">        [0.5814, 0.5980]])</span></span><br><span class="line"><span class="string">torch.Size([2, 4])</span></span><br><span class="line"><span class="string">tensor([[0.0000, 0.6359, 0.0629, 0.0000],</span></span><br><span class="line"><span class="string">        [0.0000, 0.5814, 0.5980, 0.0000]])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<p>4ï¼‰æ‰©å±•ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>t4d = torch.empty(<span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p3d = (<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>) <span class="comment"># pad by (0, 1), (2, 1), and (3, 3)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>out = F.pad(t4d, p3d, <span class="string">&quot;constant&quot;</span>, <span class="number">0</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(out.size())</span><br><span class="line">torch.Size([<span class="number">3</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<h3 id="flatten">7ã€flatten</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼šhttps://pytorch.org/docs/stable/generated/torch.flatten.html#torch.flatten</p>
<p>1ï¼‰æ ‡å‡†ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">torch.flatten(input, start_dim=0, end_dim=- 1) â†’ Tensor</span><br><span class="line">  - input (Tensor) â€“ the input tensor.</span><br><span class="line">  - start_dim (int) â€“ the first dim to flatten</span><br><span class="line">  - end_dim (int) â€“ the last dim to flatten</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ä¾èµ–åº“ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ç®€å•ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">t2d = torch.rand(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(t2d, t2d.size())</span><br><span class="line">out = torch.flatten(t2d, <span class="number">1</span>)  <span class="comment"># ä»ç¬¬1ç»´å¼€å§‹ï¼Œå±•å¹³åç»­æ‰€æœ‰ç»´åº¦</span></span><br><span class="line"><span class="built_in">print</span>(out, out.size())</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">tensor([[[0.4151, 0.8645],</span></span><br><span class="line"><span class="string">         [0.1289, 0.2260]],</span></span><br><span class="line"><span class="string">        [[0.3302, 0.0393],</span></span><br><span class="line"><span class="string">         [0.9822, 0.5305]]]) torch.Size([2, 2, 2])</span></span><br><span class="line"><span class="string">tensor([[0.4151, 0.8645, 0.1289, 0.2260],</span></span><br><span class="line"><span class="string">        [0.3302, 0.0393, 0.9822, 0.5305]]) torch.Size([2, 4])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<p>4ï¼‰æ‰©å±•ç¤ºä¾‹:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Q1ã€ç°åœ¨æœ‰ä¸€ä¸ªå‘é‡tï¼Œå…¶sizeä¸º [A,B,C,D,E,F,G] ,ç„¶åæˆ‘ä»¬å¯¹å…¶åº”ç”¨flatten: torch.flatten(t,2,4),</span><br><span class="line">é‚£ä¹ˆsizeä¼šå˜æˆï¼Ÿ</span><br><span class="line">Answer: [A,B,C*D*E,F,G]</span><br><span class="line"></span><br><span class="line">Q2ã€ç°åœ¨æœ‰ä¸€ä¸ªå‘é‡tï¼Œå…¶sizeä¸º [A,B,C,D,E,F,G] ,ç„¶åæˆ‘ä»¬å¯¹å…¶åº”ç”¨flatten: torch.flatten(t,-2),</span><br><span class="line">é‚£ä¹ˆsizeä¼šå˜æˆï¼Ÿ</span><br><span class="line">Answer: [A,B,C,D,E,F*G] ç­‰æ•ˆäºåº”ç”¨torch.flatten(t,5) ç­‰æ•ˆäºåº”ç”¨torch.flatten(t,5,6)</span><br><span class="line"></span><br><span class="line">Q3ã€ç°åœ¨æœ‰ä¸€ä¸ªå‘é‡tï¼Œå…¶sizeä¸º [A,B,C,D,E,F,G] ,ç„¶åæˆ‘ä»¬å¯¹å…¶åº”ç”¨flatten: torch.flatten(t),</span><br><span class="line">é‚£ä¹ˆsizeä¼šå˜æˆï¼Ÿ</span><br><span class="line">Answer: [A*B*C*D*E*F*G] </span><br><span class="line"></span><br><span class="line">Q3ã€ç°åœ¨æœ‰ä¸€ä¸ªå‘é‡tï¼Œå…¶sizeä¸º [A,B,C,D,E,F,G] ,ç„¶åæˆ‘ä»¬å¯¹å…¶åº”ç”¨flatten: torch.flatten(t,1),</span><br><span class="line">é‚£ä¹ˆsizeä¼šå˜æˆï¼Ÿ</span><br><span class="line">Answer: [A,B*C*D*E*F*G] </span><br></pre></td></tr></table></figure>
<h3 id="transpose">8ã€Transpose</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼šhttps://pytorch.org/docs/stable/generated/torch.transpose.html#torch.transpose</p>
<p>1ï¼‰æ ‡å‡†ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">torch.transpose(input, dim0, dim1) â†’ Tensor</span><br><span class="line"></span><br><span class="line">-	Returns a tensor that is a transposed version of input. The given dimensions dim0 and dim1 are swapped.</span><br><span class="line">- input (Tensor) â€“ the input tensor.</span><br><span class="line">- dim0 (int) â€“ the first dimension to be transposed</span><br><span class="line">- dim1 (int) â€“ the second dimension to be transposed</span><br><span class="line"></span><br><span class="line">æ³¨ï¼šæ­¤å¤„çš„è½¬ç½®é€šç”¨äºé«˜é˜¶çŸ©é˜µï¼Œå‡½æ•°å°†ä¼šå¯¹dim0å’Œdim1è¿™ä¸¤ä¸ªç»´åº¦å½¢æˆçš„å¹³é¢è¿›è¡Œè½¬ç½®ï¼Œäº¤æ¢dim0å’Œdim1,è€Œä¸å½±å“å…¶ä»–ç»´åº¦ã€‚</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ä¾èµ–åº“ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ç®€å•ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">t2d = torch.rand(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(t2d, t2d.size())</span><br><span class="line">out = torch.transpose(t2d, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(out, out.size())</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">tensor([[0.5228, 0.2990, 0.1111],</span></span><br><span class="line"><span class="string">        [0.4857, 0.4479, 0.6637]]) torch.Size([2, 3])</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">tensor([[0.5228, 0.4857],</span></span><br><span class="line"><span class="string">        [0.2990, 0.4479],</span></span><br><span class="line"><span class="string">        [0.1111, 0.6637]]) torch.Size([3, 2])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<p>4ï¼‰æ‰©å±•ç¤ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åœ¨é«˜ç»´çš„çŸ©é˜µä¸­ï¼Œä¸è¦å¤ªè¿‡æ³¨é‡æ‰“å°æ•°æ®æ˜¾ç¤ºçš„å˜åŒ–å½¢å¼ï¼Œä»ç»´åº¦é•¿åº¦çš„å˜åŒ–å…¥æ‰‹ï¼Œå³å¯æ¸…æ™°çš„ææ‡‚</span><br><span class="line"></span><br><span class="line">Q1ã€ç°åœ¨æœ‰ä¸€ä¸ªå‘é‡tï¼Œå…¶sizeä¸º [A,B,C,D,E,F,G] ,ç„¶åæˆ‘ä»¬å¯¹å…¶åº”ç”¨transpose: torch.transpose(t,2,4),</span><br><span class="line">é‚£ä¹ˆsizeä¼šå˜æˆï¼Ÿ</span><br><span class="line"></span><br><span class="line">Answer: [A,B,E,D,C,F,G]  å¯ä»¥çœ‹åˆ°ï¼Œä»sizeä¸Šæ¥è®²å…¶å®å°±æ˜¯äº¤æ¢äº†ç¬¬2ç»´å’Œç¬¬4ç»´çš„é•¿åº¦ã€‚ä»æ•°æ®ä¸Šæ¥è®²ï¼Œä½ å¯ä»¥æƒ³è±¡å…¶æ‰¾åˆ°äº†ç¬¬2ç»´å’Œç¬¬4ç»´å½¢æˆçš„æ•°æ®å¹³é¢ï¼Œç„¶ååº”ç”¨äº†æ­£å¸¸çš„è½¬ç½®ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="catå‡½æ•°">9ã€Catå‡½æ•°</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼šhttps://pytorch.org/docs/stable/generated/torch.cat.html?highlight=cat#torch.cat</p>
<p>1ï¼‰æ ‡å‡†ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">torch.cat(tensors, dim=0, *, out=None) â†’ Tensor</span><br><span class="line"></span><br><span class="line">- Concatenates the given sequence of seq tensors in the given dimension. All tensors must either have the same shape (except in the concatenating dimension) or be empty.</span><br><span class="line"></span><br><span class="line">- tensors (sequence of Tensors) â€“ any python sequence of tensors of the same type. Non-empty tensors provided must have the same shape, except in the cat dimension.</span><br><span class="line">- dim (int, optional) â€“ the dimension over which the tensors are concatenated</span><br><span class="line"></span><br><span class="line">æ³¨ï¼štensorså‚æ•°éœ€è¦è¾“å…¥ä¸€ä¸ªtensorçš„åºåˆ—ï¼Œæ‰€æœ‰çš„éœ€è¦æ‹¼æ¥çš„tensorséœ€è¦æœ‰åŒæ ·çš„å½¢çŠ¶ç»´åº¦ï¼ˆé™¤äº†æ‹¼æ¥çš„é‚£ä¸€ç»´ï¼‰</span><br><span class="line">dimæŒ‡å®šè¦æ‹¼æ¥çš„ç»´åº¦</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ä¾èµ–åº“ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ç®€å•ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">x = torch.randn(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(x, x.size())</span><br><span class="line">out = torch.cat((x, x, x), <span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(out, out.size())</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">tensor([[-1.2926, -0.3155,  0.5966],</span></span><br><span class="line"><span class="string">        [ 0.8921, -2.0986,  0.0748]]) torch.Size([2, 3])</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">tensor([[-1.2926, -0.3155,  0.5966],</span></span><br><span class="line"><span class="string">        [ 0.8921, -2.0986,  0.0748],</span></span><br><span class="line"><span class="string">        [-1.2926, -0.3155,  0.5966],</span></span><br><span class="line"><span class="string">        [ 0.8921, -2.0986,  0.0748],</span></span><br><span class="line"><span class="string">        [-1.2926, -0.3155,  0.5966],</span></span><br><span class="line"><span class="string">        [ 0.8921, -2.0986,  0.0748]]) torch.Size([6, 3])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<p>4ï¼‰æ‰©å±•ç¤ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Q1ã€ç°åœ¨æœ‰ä¸€ä¸ªå‘é‡t1ï¼Œå…¶sizeä¸º [A,B,C,D] ,å‘é‡t2ï¼Œå…¶sizeä¸º[A,B,E,D] ç„¶åæˆ‘ä»¬å¯¹å…¶åº”ç”¨cat: torch.cat((t1,t2),2),é‚£ä¹ˆsizeä¼šå˜æˆï¼Ÿ</span><br><span class="line"></span><br><span class="line">Answer: [A,B,C+E,D]</span><br><span class="line"></span><br><span class="line">Q2ã€ç°åœ¨æœ‰ä¸€ä¸ªå‘é‡t1ï¼Œå…¶sizeä¸º [A,B,C,D] ,å‘é‡t2ï¼Œå…¶sizeä¸º[A,B,E,D] ç„¶åæˆ‘ä»¬å¯¹å…¶åº”ç”¨cat: torch.cat((t1,t2),1),é‚£ä¹ˆsizeä¼šå˜æˆï¼Ÿ</span><br><span class="line"></span><br><span class="line">Answer: å‡½æ•°ä¼šæŠ¥é”™ï¼Œå› ä¸ºé™¤äº†ç»´åº¦1ä»¥å¤–ï¼Œt1å’Œt2çš„ç»´åº¦2çš„shapeä¸ä¸€æ ·</span><br></pre></td></tr></table></figure>
<h3 id="roll">10ã€Roll</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼šhttps://pytorch.org/docs/stable/generated/torch.roll.html?highlight=roll#torch.roll</p>
<p>1ï¼‰æ ‡å‡†ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">torch.roll(input, shifts, dims=None) â†’ Tensor</span><br><span class="line"></span><br><span class="line">	æ²¿ç€ç»™å®šçš„ç»´æ•°æ»šåŠ¨å¼ é‡ã€‚ç§»åŠ¨åˆ°æœ€åä¸€ä¸ªä½ç½®ä»¥å¤–çš„å…ƒç´ å°†åœ¨ç¬¬ä¸€ä¸ªä½ç½®é‡æ–°å¼•å…¥ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šå°ºå¯¸ï¼Œå¼ é‡åœ¨æ»šåŠ¨ä¹‹å‰å°†è¢«å‹å¹³ï¼Œç„¶åæ¢å¤åˆ°åŸæ¥çš„å½¢çŠ¶ã€‚</span><br><span class="line">	</span><br><span class="line">- input (Tensor) â€“ the input tensor.</span><br><span class="line">- shifts (int or tuple of python:ints) â€“ å¼ é‡çš„å…ƒç´ è¢«ç§»åŠ¨çš„ä½ç½®æ•°ã€‚å¦‚æœshiftæ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œdimå¿…é¡»æ˜¯ä¸€ä¸ªç›¸åŒå¤§å°çš„å…ƒç»„ï¼Œå¹¶ä¸”æ¯ä¸ªç»´åº¦å°†è¢«ç›¸åº”çš„å€¼æ»šåŠ¨</span><br><span class="line">- dims (int or tuple of python:ints) â€“ Axis along which to roll</span><br></pre></td></tr></table></figure>
<p>2ï¼‰ä¾èµ–åº“ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ç®€å•ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">x = torch.tensor([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]).view(<span class="number">4</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(x)</span><br><span class="line">y1 = torch.roll(x, <span class="number">1</span>, <span class="number">0</span>)  <span class="comment"># æ²¿ç€ç¬¬0ç»´ï¼ˆåˆ—ï¼‰ï¼Œæ»šåŠ¨1ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(y1)</span><br><span class="line">y2 = torch.roll(x, -<span class="number">1</span>, <span class="number">0</span>) <span class="comment"># æ²¿ç€ç¬¬0ç»´ï¼ˆåˆ—ï¼‰ï¼Œæ»šåŠ¨-1ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(y2)</span><br><span class="line">y3 = torch.roll(x, shifts=(<span class="number">2</span>, <span class="number">1</span>), dims=(<span class="number">0</span>, <span class="number">1</span>)) <span class="comment"># æ²¿ç€ç¬¬0ç»´ï¼ˆåˆ—ï¼‰ï¼Œæ»šåŠ¨2ä¸ªå…ƒç´ ï¼Œæ²¿ç€ç¬¬1ç»´ï¼ˆè¡Œï¼‰ï¼Œæ»šåŠ¨1ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="built_in">print</span>(y3)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">x:tensor([[1, 2],</span></span><br><span class="line"><span class="string">        [3, 4],</span></span><br><span class="line"><span class="string">        [5, 6],</span></span><br><span class="line"><span class="string">        [7, 8]])</span></span><br><span class="line"><span class="string">y1:tensor([[7, 8],</span></span><br><span class="line"><span class="string">        [1, 2],</span></span><br><span class="line"><span class="string">        [3, 4],</span></span><br><span class="line"><span class="string">        [5, 6]])</span></span><br><span class="line"><span class="string">y2:tensor([[3, 4],</span></span><br><span class="line"><span class="string">        [5, 6],</span></span><br><span class="line"><span class="string">        [7, 8],</span></span><br><span class="line"><span class="string">        [1, 2]])</span></span><br><span class="line"><span class="string">y3:tensor([[6, 5],</span></span><br><span class="line"><span class="string">        [8, 7],</span></span><br><span class="line"><span class="string">        [2, 1],</span></span><br><span class="line"><span class="string">        [4, 3]])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="contiguous">11ã€Contiguous</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼šhttps://pytorch.org/docs/stable/generated/torch.Tensor.contiguous.html?highlight=contiguous#torch.Tensor.contiguous</p>
<p>1ï¼‰æ ‡å‡†ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Tensor.contiguous(memory_format=torch.contiguous_format) â†’ Tensor</span><br><span class="line"></span><br><span class="line">è¿”å›ä¸€ä¸ªè¿ç»­çš„å†…å­˜å¼ é‡ï¼Œå…¶ä¸­åŒ…å«ä¸å½“å‰å¼ é‡ç›¸åŒçš„æ•°æ®ã€‚ å¦‚æœå½“å‰å·²ç»æ˜¯æŒ‡å®šçš„å†…å­˜æ ¼å¼ï¼Œåˆ™æ­¤å‡½æ•°è¿”å›å½“å‰å¼ é‡ã€‚ </span><br></pre></td></tr></table></figure>
<p>2ï¼‰ä¾èµ–åº“ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ä¸ºä»€ä¹ˆéœ€è¦Contiguous?</p>
<ul>
<li><strong><code>torch.view</code></strong>ç­‰æ–¹æ³•æ“ä½œéœ€è¦è¿ç»­çš„Tensorã€‚è¯¦ç»†åŸå› å¯è§ï¼šhttps://zhuanlan.zhihu.com/p/64551412</li>
<li>å‡ºäºæ€§èƒ½è€ƒè™‘ï¼Œè¿ç»­çš„Tensorï¼Œè¯­ä¹‰ä¸Šç›¸é‚»çš„å…ƒç´ ï¼Œåœ¨å†…å­˜ä¸­ä¹Ÿæ˜¯è¿ç»­çš„ï¼Œè®¿é—®ç›¸é‚»å…ƒç´ æ˜¯çŸ©é˜µè¿ç®—ä¸­ç»å¸¸ç”¨åˆ°çš„æ“ä½œï¼Œè¯­ä¹‰å’Œå†…å­˜é¡ºåºçš„ä¸€è‡´æ€§æ˜¯ç¼“å­˜å‹å¥½çš„ï¼Œåœ¨å†…å­˜ä¸­è¿ç»­çš„æ•°æ®å¯ä»¥ï¼ˆä½†ä¸ä¸€å®šï¼‰è¢«é«˜é€Ÿç¼“å­˜é¢„å–ï¼Œä»¥æå‡CPUè·å–æ“ä½œæ•°æ®çš„é€Ÿåº¦ã€‚</li>
</ul>
<h3 id="section">12ã€</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼š</p>
<p>1ï¼‰æ ‡å‡†ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>2ï¼‰ä¾èµ–åº“ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ç®€å•ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>4ï¼‰æ‰©å±•ç¤ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="section-1">13ã€</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼š</p>
<p>1ï¼‰æ ‡å‡†ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>2ï¼‰ä¾èµ–åº“ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ç®€å•ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>4ï¼‰æ‰©å±•ç¤ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="section-2">14ã€</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼š</p>
<p>1ï¼‰æ ‡å‡†ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>2ï¼‰ä¾èµ–åº“ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ç®€å•ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>4ï¼‰æ‰©å±•ç¤ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="section-3">15ã€</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼š</p>
<p>1ï¼‰æ ‡å‡†ç”¨æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>2ï¼‰ä¾èµ–åº“ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ç®€å•ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<p>4ï¼‰æ‰©å±•ç¤ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Pytorchç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>Pytorchå­¦ä¹ ç¬”è®°9â€”â€”å¸¸ç”¨ç¼–ç æŠ€å·§ï¼ˆæ›´æ–°ä¸­ï¼‰</title>
    <url>/2021/12/17/17d1273518ee/</url>
    <content><![CDATA[<h3 id="task1">Task1ï¼š</h3>
<h4
id="ä»»åŠ¡æè¿°å®Œæˆpaddingå¡«å……ä½¿å¾—hå’Œwä¸º2çš„å€æ•°åŒæ—¶å®ç°ä¸‹å›¾æ‰€ç¤ºçš„å˜æ¢">ä»»åŠ¡æè¿°ï¼šå®Œæˆpaddingå¡«å……ï¼Œä½¿å¾—Hå’ŒWä¸º2çš„å€æ•°åŒæ—¶ï¼Œå®ç°ä¸‹å›¾æ‰€ç¤ºçš„å˜æ¢ï¼š</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/image-20211229101356170.png" /></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¾“å…¥çš„xï¼Œç»´åº¦sizeä¸º[B,L,C] ,å…¶ä¸­L = H * W</span></span><br><span class="line">x = x.view(B, H, W, C) <span class="comment"># é¦–å…ˆå°†å…¶é‡æ–°å±•ä¸º [B,H,W,C]</span></span><br><span class="line"><span class="comment"># padding ç„¶åï¼Œå¦‚æœè¾“å…¥feature mapçš„Hï¼ŒWä¸æ˜¯2çš„æ•´æ•°å€ï¼Œéœ€è¦è¿›è¡Œpadding</span></span><br><span class="line">pad_input = (H % <span class="number">2</span> == <span class="number">1</span>) <span class="keyword">or</span> (W % <span class="number">2</span> == <span class="number">1</span>)</span><br><span class="line"><span class="keyword">if</span> pad_input:</span><br><span class="line">   <span class="comment"># (C_front, C_back, W_left, W_right, H_top, H_bottom)</span></span><br><span class="line">   <span class="comment"># æ³¨æ„è¿™é‡Œçš„Tensoré€šé“æ˜¯[B, H, W, C]ï¼Œæ‰€ä»¥ä¼šå’Œå®˜æ–¹æ–‡æ¡£æœ‰äº›ä¸åŒ</span></span><br><span class="line">   x = F.pad(x, (<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, W % <span class="number">2</span>, <span class="number">0</span>, H % <span class="number">2</span>)) <span class="comment"># åœ¨å³ä¾§å’Œåº•ä¾§è¿›è¡Œpadding</span></span><br><span class="line">   </span><br><span class="line"><span class="comment"># æ­¤æ—¶è¦å¼€å§‹è¿›è¡Œä¸‹é‡‡æ ·äº†ï¼Œå¦‚ä½•åœ¨Hï¼ŒWè¿™ä¸ªå¹³é¢ä¸Šè¿›è¡Œä¸‹é‡‡æ ·å‘¢ï¼Ÿ éå¸¸å…³é”®çš„ç¼–ç æŠ€å·§ï¼ï¼</span></span><br><span class="line">x0 = x[:, <span class="number">0</span>::<span class="number">2</span>, <span class="number">0</span>::<span class="number">2</span>, :]  <span class="comment"># [B, H/2, W/2, C]   ::2 ä»£è¡¨ æ­¥é•¿</span></span><br><span class="line">x1 = x[:, <span class="number">1</span>::<span class="number">2</span>, <span class="number">0</span>::<span class="number">2</span>, :]  <span class="comment"># [B, H/2, W/2, C]</span></span><br><span class="line">x2 = x[:, <span class="number">0</span>::<span class="number">2</span>, <span class="number">1</span>::<span class="number">2</span>, :]  <span class="comment"># [B, H/2, W/2, C]</span></span><br><span class="line">x3 = x[:, <span class="number">1</span>::<span class="number">2</span>, <span class="number">1</span>::<span class="number">2</span>, :]  <span class="comment"># [B, H/2, W/2, C]</span></span><br><span class="line"><span class="comment"># ç„¶åå°†å››ä¸ªå­çŸ©é˜µåœ¨channelç»´åº¦[ä¹Ÿå°±æ˜¯æœ€åä¸€ä¸ªç»´åº¦]ä¸Šè¿›è¡Œæ‹¼æ¥</span></span><br><span class="line">x = torch.cat([x0, x1, x2, x3], -<span class="number">1</span>)  <span class="comment"># [B, H/2, W/2, 4*C]</span></span><br><span class="line"><span class="comment"># å†é‡æ–°å°†H/2,W/2å¹³é¢å±•æˆ1ä¸ªç»´åº¦</span></span><br><span class="line">x = x.view(B, -<span class="number">1</span>, <span class="number">4</span> * C)  <span class="comment"># [B, H/2*W/2, 4*C]</span></span><br></pre></td></tr></table></figure>
<h3 id="task2">Task2:</h3>
<h4 id="ä»»åŠ¡æè¿°-pythonä¸­çš„å¹¿æ’­æœºåˆ¶">ä»»åŠ¡æè¿°ï¼š Pythonä¸­çš„å¹¿æ’­æœºåˆ¶</h4>
<p>â€‹
åœ¨pythonä¸­ä½¿ç”¨numpyè¿›è¡Œ<strong>æŒ‰ä½è¿ç®—</strong>çš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªå°æŠ€å·§å¯ä»¥å¸®åŠ©å‡å°‘ä»£ç é‡â€”â€”é‚£å°±æ˜¯broadcasting,å¹¿æ’­æœºåˆ¶ã€‚ç®€å•æ¥è¯´ï¼Œbroadcastingå¯ä»¥è¿™æ ·ç†è§£ï¼šå¦‚æœä½ æœ‰ä¸€ä¸ªm
* nçš„çŸ©é˜µï¼Œè®©å®ƒåŠ å‡ä¹˜é™¤ä¸€ä¸ª1 * nçš„çŸ©é˜µï¼Œå®ƒä¼šè¢«å¤åˆ¶mæ¬¡ï¼Œæˆä¸ºä¸€ä¸ªm *
nçš„çŸ©é˜µï¼Œç„¶åå†é€å…ƒç´ åœ°è¿›è¡ŒåŠ å‡ä¹˜é™¤æ“ä½œã€‚åŒæ ·åœ°å¯¹m * 1çš„çŸ©é˜µæˆç«‹ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/750.png" /></p>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A = numpy.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">result = A + <span class="number">100</span></span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">	[101 102 103]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># å°±ä¸å†éœ€è¦å»ä¹¦å†™ A + [100,100,100] äº†</span></span><br><span class="line"></span><br><span class="line">A = np.array([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]])  <span class="comment"># [3,2]</span></span><br><span class="line">result = A + [<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>]   <span class="comment"># [3,1]</span></span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">[[101 202 303]</span></span><br><span class="line"><span class="string"> [104 205 306]]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<p>### Task3:</p>
<h4 id="section"></h4>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Pytorchç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>è®ºæ–‡ç•¥è¯»ç¬”è®°â€”â€”CVPR2022 Transformerç›¸å…³ï¼ˆ1ï¼‰</title>
    <url>/2022/04/22/1076c1e77e53/</url>
    <content><![CDATA[<h2
id="ä¸€è®ºæ–‡åç§°batchformer-learning-to-explore-sample-relationships-for-robust-representation-learning">ä¸€ã€è®ºæ–‡åç§°ï¼šã€ŠBatchFormer:
Learning to Explore Sample Relationships for Robust Representation
Learningã€‹</h2>
<p>è®ºæ–‡åœ°å€ï¼š https://arxiv.org/abs/2203.01522</p>
<h4 id="å…³é”®è¯">1ã€å…³é”®è¯ï¼š</h4>
<p>â€‹ deep representation learning æ·±åº¦è¡¨å¾å­¦ä¹ </p>
<h4 id="æ‘˜è¦">2ã€æ‘˜è¦ï¼š</h4>
<p>â€‹
å°½ç®¡æ·±åº¦ç¥ç»ç½‘ç»œå–å¾—äº†æˆåŠŸï¼Œä½†ç”±äºæ•°æ®ä¸å¹³è¡¡ã€ä¸å¯è§åˆ†å¸ƒã€åŸŸæ¼‚ç§»ç­‰æ•°æ®ç¨€ç¼ºé—®é¢˜ï¼Œæ·±åº¦è¡¨å¾å­¦ä¹ ä»é¢ä¸´è®¸å¤šæŒ‘æˆ˜ã€‚ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå·²ç»è®¾è®¡äº†å„ç§æ–¹æ³•ä»¥ä¸€ç§æ™®é€šçš„æ–¹å¼(å³ä»è¾“å…¥å‡½æ•°æˆ–æŸå¤±å‡½æ•°çš„è§’åº¦)æ¢ç´¢æ ·æœ¬å…³ç³»ï¼Œä½†æœªèƒ½æ¢ç´¢å…·æœ‰æ ·æœ¬å…³ç³»å­¦ä¹ çš„æ·±åº¦ç¥ç»ç½‘ç»œçš„å†…éƒ¨ç»“æ„ã€‚å—æ­¤å¯å‘ï¼Œ<strong>æˆ‘ä»¬å»ºè®®ä½¿æ·±åº¦ç¥ç»ç½‘ç»œæœ¬èº«å…·æœ‰ä»æ¯ä¸ªå°æ‰¹ä¸­å­¦ä¹ æ ·æœ¬é—´å…³ç³»çš„èƒ½åŠ›ã€‚</strong></p>
<p>â€‹
<strong>æˆ‘ä»¬å¼•å…¥äº†ä¸€ä¸ªæ¨¡å—BatchFormerï¼Œç„¶åå°†å…¶åº”ç”¨åˆ°æ¯ä¸ªmini-batchçš„batchç»´åº¦ä¸Šï¼Œä»¥éšå¼åœ°æ¢ç´¢è®­ç»ƒæœŸé—´çš„æ ·æœ¬é—´å…³ç³»ã€‚é€šè¿‡è¿™æ ·åšï¼Œæ‰€æå‡ºçš„æ–¹æ³•å¯ä»¥å®ç°ä¸åŒæ ·æœ¬ä¹‹é—´çš„åä½œï¼Œä¾‹å¦‚ï¼Œå¤´ç±»æ ·æœ¬ä¹Ÿå¯ä»¥æœ‰åŠ©äºå°¾ç±»çš„å­¦ä¹ ä»¥è¿›è¡Œé•¿å°¾è¯†åˆ«ã€‚</strong></p>
<p>â€‹
<strong>æ­¤å¤–ï¼Œä¸ºäº†å‡å°‘è®­ç»ƒå’Œæµ‹è¯•ä¹‹é—´çš„å·®è·ï¼Œæˆ‘ä»¬åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä½¿ç”¨æˆ–ä¸ä½¿ç”¨BatchFormerå…±äº«åˆ†ç±»å™¨ï¼Œä»è€Œå¯ä»¥åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­åˆ é™¤ã€‚</strong></p>
<h4 id="ä¸»è¦è®¾è®¡æ€æƒ³">3ã€ä¸»è¦è®¾è®¡æ€æƒ³ï¼š</h4>
<p>â€‹
æˆ‘ä»¬å¼•å…¥äº†ä¸€ä¸ªæ¨¡å—BatchFormerï¼Œç„¶åå°†å…¶åº”ç”¨åˆ°æ¯ä¸ªmini-batchçš„batchç»´åº¦ä¸Šï¼Œä»¥éšå¼åœ°æ¢ç´¢è®­ç»ƒæœŸé—´çš„æ ·æœ¬é—´å…³ç³»ã€‚</p>
<p>â€‹
å¯¹äºæ·±åº¦ç¥ç»ç½‘ç»œæ¥è¯´ï¼Œç”±äºè®­ç»ƒå’Œæ¨ç†çš„å·®è·ï¼Œåœ¨æ‰¹å¤„ç†ç»´åº¦ä¸Šè¿›è¡Œå­¦ä¹ å¹¶ä¸å®¹æ˜“ã€‚å› æ­¤ï¼Œä¸ºäº†æ¢ç´¢ç”¨äºé²æ£’è¡¨ç¤ºå­¦ä¹ çš„æ ·æœ¬å…³ç³»ï¼Œæˆ‘ä»¬å»ºè®®é€šè¿‡æ ·æœ¬å…³ç³»å­¦ä¹ çš„ç»“æ„æ”¹è¿›æ¥å¢å¼ºæ·±åº¦ç¥ç»ç½‘ç»œã€‚</p>
<p>â€‹
<strong>å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬è¯•å›¾é€šè¿‡åœ¨æ‰¹ç»´åº¦ä¸­å¼•å…¥ä¸€ä¸ªTransformeræ¥æ•è·å’Œå»ºæ¨¡æ¯ä¸ªå°æ‰¹è®­ç»ƒæ•°æ®æ ·æœ¬ä¸­çš„æ ·æœ¬å…³ç³»ï¼Œæ­¤å¤–ï¼Œä¸ºäº†å‡å°‘è®­ç»ƒå’Œæµ‹è¯•ä¹‹é—´çš„å·®è·ï¼Œæˆ‘ä»¬åœ¨BatchFormeræ¨¡å—ä¹‹å‰å’Œä¹‹åä½¿ç”¨ä¸€ä¸ªå…±äº«åˆ†ç±»å™¨æ¥å¼ºåˆ¶æ‰¹ä¸å˜å­¦ä¹ ã€‚è¿™æ ·ï¼ŒBatchFormeræ¨¡å—åªåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨ï¼Œå³ä¸éœ€è¦æ”¹å˜æ·±åº¦ç¥ç»ç½‘ç»œçš„æ¨ç†ç»“æ„ã€‚</strong></p>
<p>â€‹
ä»ä¼˜åŒ–çš„è§’åº¦æ¥çœ‹ï¼ŒBatchFormerå®ç°äº†å°æ‰¹é‡æ ·æœ¬æ‰€æœ‰ç‰¹å¾çš„ä¿¡æ¯ä¼ æ’­ã€‚</p>
<p>â€‹
å› æ­¤ï¼Œæ‰€æœ‰çš„æ ·æœ¬éƒ½å¯ä»¥å¸®åŠ©å­¦ä¹ ä»»ä½•ç±»åˆ«çš„å¯¹è±¡ï¼Œè€Œè¿™å¯èƒ½ä¼šä»æ•´ä¸ªå°æ‰¹é‡ä¸­å«è“„åœ°ç”¨å¹»è§‰ç‰¹å¾ä¸°å¯Œå½“å‰çš„è®­ç»ƒæ ·æœ¬</p>
<h4 id="å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„">4ã€å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„ï¼š</h4>
<p>â€‹
è®¾è®¡äº†ä¸€ä¸ªç®€å•è€Œæœ‰æ•ˆçš„æ¨¡å—ï¼Œç§°ä¸ºBatchFormerï¼Œè¿™æ˜¯ä¸€ä¸ªå³æ’å³ç”¨æ¨¡å—ï¼Œç”¨äºæ¢ç´¢æ¯ä¸ªå°æ‰¹ä¸­çš„æ ·æœ¬å…³ç³».</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220422091934114.png" /></p>
<p>â€‹
å…·ä½“æ¥è¯´ï¼Œéª¨å¹²ç½‘é¦–å…ˆç”¨æ¥å­¦ä¹ å•ä¸ªæ•°æ®æ ·æœ¬çš„è¡¨ç¤ºï¼Œå³åœ¨æ¯ä¸ªå°æ‰¹é‡ä¸­ï¼Œä¸åŒæ ·æœ¬ä¹‹é—´ä¸å­˜åœ¨äº¤äº’ã€‚åœ¨æ­¤ä¹‹åï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸€ä¸ªæ–°çš„æ¨¡å—ï¼Œåˆ©ç”¨Transformerä¸­çš„äº¤å‰æ³¨æ„æœºåˆ¶å¯¹ä¸åŒæ ·æœ¬ä¹‹é—´çš„å…³ç³»è¿›è¡Œå»ºæ¨¡ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸ºBatch
transformeræˆ–BatchFormeræ¨¡å—ã€‚ç„¶åï¼ŒBatchFormerçš„è¾“å‡ºè¢«ç”¨ä½œæœ€ç»ˆåˆ†ç±»å™¨çš„è¾“å…¥ã€‚</p>
<p>â€‹
ä¸ºäº†æ»¡è¶³è®­ç»ƒå’Œæµ‹è¯•ä¹‹é—´çš„å·®è·ï¼Œæˆ‘ä»¬è¿˜åœ¨BatchFormeræ¨¡å—ä¹‹å‰ä½¿ç”¨äº†ä¸€ä¸ªè¾…åŠ©åˆ†ç±»å™¨ï¼Œ<strong>å³é€šè¿‡å…±äº«æœ€ç»ˆåˆ†ç±»å™¨å’Œè¾…åŠ©åˆ†ç±»å™¨ä¹‹é—´çš„æƒå€¼ï¼Œ</strong>æˆ‘ä»¬å¯ä»¥å°†ä»æ ·æœ¬å…³ç³»ä¸­å­¦ä¹ åˆ°çš„çŸ¥è¯†è½¬ç§»åˆ°éª¨å¹²å’Œè¾…åŠ©åˆ†ç±»å™¨ã€‚
å› æ­¤ï¼Œåœ¨æµ‹è¯•æ—¶æˆ‘ä»¬å¯ä»¥å»æ‰BatchFormerï¼Œç›´æ¥ä½¿ç”¨è¾…åŠ©åˆ†ç±»å™¨è¿›è¡Œåˆ†ç±»ã€‚</p>
<p>â€‹ å¤šå¤´æ³¨æ„å±‚å·²è¢«å¹¿æ³›ç”¨äºä»Channelå’ŒSpatialç»´åº¦å»ºæ¨¡å…³ç³»</p>
<p>â€‹
<strong>å› æ­¤ï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒä¹Ÿå¯ä»¥è¢«æ‰©å±•ä»¥æ¢ç´¢Batchç»´åº¦ä¸­çš„å…³ç³»ã€‚å› æ­¤ï¼Œä¸å˜å‹å™¨å±‚çš„å…¸å‹ä½¿ç”¨ä¸åŒï¼ŒBatchFormerçš„è¾“å…¥å°†é¦–å…ˆè¢«é‡æ„ï¼Œä»¥ä½¿å˜å‹å™¨å±‚èƒ½å¤Ÿå¤„ç†è¾“å…¥æ•°æ®çš„æ‰¹å¤„ç†ç»´åº¦ã€‚</strong>
â€‹
é€šè¿‡è¿™æ ·åšï¼Œå˜å‹å™¨å±‚ä¸­çš„è‡ªæˆ‘æ³¨æ„æœºåˆ¶å°±å˜æˆäº†BatchFormerä¸åŒæ ·æœ¬ä¹‹é—´çš„äº¤å‰æ³¨æ„ã€‚</p>
<ul>
<li>æµ‹è¯•æ—¶çš„å·®åˆ«ï¼š
<ul>
<li>ç”±äºæˆ‘ä»¬ä¸èƒ½ä¸ºæµ‹è¯•å‡å®šæ‰¹å¤„ç†ç»Ÿè®¡ä¿¡æ¯ï¼Œä¾‹å¦‚æ ·æœ¬å…³ç³»ï¼Œå› æ­¤åœ¨BatchFormeræ¨¡å—ä¹‹å‰å’Œä¹‹åçš„ç‰¹æ€§ä¹‹é—´å¯èƒ½å­˜åœ¨å·®è·ã€‚</li>
<li>å› æ­¤ï¼Œé™¤äº†æœ€ç»ˆçš„åˆ†ç±»å™¨ï¼Œæˆ‘ä»¬è¿˜å¼•å…¥äº†ä¸€ä¸ªæ–°çš„è¾…åŠ©åˆ†ç±»å™¨ï¼Œæ—¢å¯ä»¥å­¦ä¹ æœ€ç»ˆçš„åˆ†ç±»å™¨ï¼Œåˆå¯ä»¥ä¿æŒBatchFormerä¹‹å‰çš„ç‰¹å¾ã€‚</li>
<li>ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åªéœ€åœ¨è¾…åŠ©åˆ†ç±»å™¨å’Œæœ€ç»ˆåˆ†ç±»å™¨ä¹‹é—´å…±äº«å‚æ•°/æƒé‡ã€‚
æˆ‘ä»¬å°†è¿™ç§ç®€å•è€Œæœ‰æ•ˆçš„ç­–ç•¥ç§°ä¸ºâ€œå…±äº«åˆ†ç±»å™¨â€ã€‚
æœ‰äº†æè®®çš„â€œå…±äº«åˆ†ç±»å™¨â€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æµ‹è¯•æœŸé—´åˆ é™¤BatchFormeræ¨¡å—ï¼ŒåŒæ—¶ä»ç„¶å—ç›Šäºä½¿ç”¨BatchFormerçš„ç¤ºä¾‹å…³ç³»å­¦ä¹ ã€‚</li>
</ul></li>
<li><img
src="C:\Users\14012\AppData\Roaming\Typora\typora-user-images\image-20220422093222300.png" /></li>
</ul>
<h4 id="æ¢¯åº¦ä¼ æ’­è¿‡ç¨‹åŠè§†è§’">5ã€æ¢¯åº¦ä¼ æ’­è¿‡ç¨‹åŠè§†è§’ï¼š</h4>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220422093240599.png" /></p>
<p>â€‹
ç›´è§‚ä¸Šï¼Œæ²¡æœ‰BatchFormerï¼Œæ‰€æœ‰æŸå¤±åªä¼ æ’­æ¢¯åº¦åœ¨ç›¸åº”çš„æ ·æœ¬å’Œç±»åˆ«ã€‚ä¸å…¶ä»–ç¤ºä¾‹ç›¸æ¯”ï¼ŒBatchFormer(è™šçº¿)å…·æœ‰æ¢¯åº¦ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220422093454357.png" /></p>
<p>â€‹ ä»æ¢¯åº¦ä¼˜åŒ–çš„è§’åº¦æ¥çœ‹ï¼ŒLiè¿˜æ ¹æ®æ ·æœ¬Xj(j !=
i)å¯¹ç½‘ç»œè¿›è¡Œäº†ä¼˜åŒ–ï¼Œè¿™ä¸æ²¡æœ‰BatchFormerçš„æ¨¡å‹æœ‰æ˜¾è‘—çš„å·®å¼‚ã€‚æ¢å¥è¯è¯´ï¼ŒXj(j
!= i)å¯ä»¥çœ‹ä½œyiçš„ä¸€ä¸ªè™šæ‹Ÿæ ·æœ¬ï¼Œå…¶ä¸­yiæ˜¯Xiçš„æ ‡ç­¾ã€‚</p>
<p>â€‹ æˆ‘ä»¬è®¤ä¸ºBatchFormerå’ŒMixupéƒ½å¯ä»¥çœ‹ä½œæ˜¯æ•°æ®ä¾èµ–çš„æ‰©å……ã€‚</p>
<p>â€‹
BatchFormeréšå¼åœ°é€šè¿‡äº¤å‰æ³¨æ„æ¨¡å—ä»æ ·æœ¬çš„é™„è¿‘åˆ†å¸ƒä¸­æå–è™šæ‹Ÿç¤ºä¾‹ã€‚</p>
<p>â€‹
ä»è¿™ä¸ªè§’åº¦æ¥çœ‹ï¼ŒBatchFormeré€šè¿‡å°æ‰¹é‡æ ·å“ä¹‹é—´çš„å…³ç³»å»ºæ¨¡ï¼Œéšå¼å¢åŠ äº†æ¯ä¸ªæ ‡ç­¾yiçš„N
- 1è™šæ‹Ÿæ ·æœ¬ã€‚</p>
<h2
id="äºŒè®ºæ–‡åç§°beyond-fixation-dynamic-window-visual-transformer">äºŒã€è®ºæ–‡åç§°ï¼šã€ŠBeyond
Fixation: Dynamic Window Visual Transformerã€‹</h2>
<p>è®ºæ–‡åœ°å€ï¼šhttps://arxiv.org/abs/2203.12856</p>
<h4 id="å…³é”®è¯-1">1ã€å…³é”®è¯ï¼š</h4>
<p>â€‹ Dynamic Window</p>
<h4 id="æ‘˜è¦-1">2ã€æ‘˜è¦ï¼š</h4>
<p>â€‹
è¿‘å¹´æ¥ï¼Œäººä»¬å¯¹è§†è§‰å˜å‹å™¨çš„å…´è¶£è¶Šæ¥è¶Šå¤§ï¼Œä¸»è¦æ˜¯é€šè¿‡å°†è‡ªæˆ‘æ³¨æ„çš„è®¡ç®—é™åˆ¶åœ¨å±€éƒ¨çª—å£æ¥é™ä½è®¡ç®—æˆæœ¬ã€‚ç›®å‰å¤§å¤šæ•°å·¥ä½œé»˜è®¤ä½¿ç”¨å›ºå®šçš„å•å°ºåº¦çª—å£è¿›è¡Œå»ºæ¨¡ï¼Œå¿½ç•¥äº†çª—å£å¤§å°å¯¹æ¨¡å‹æ€§èƒ½çš„å½±å“ã€‚ç„¶è€Œï¼Œè¿™å¯èƒ½ä¼šé™åˆ¶è¿™äº›åŸºäºçª—å£çš„æ¨¡å‹å¯¹å¤šå°ºåº¦ä¿¡æ¯çš„å»ºæ¨¡æ½œåŠ›ã€‚</p>
<p>â€‹
<strong>ä½¿ç”¨åŠ¨æ€å¤šå°ºåº¦çª—å£æ¥æ¢ç´¢çª—å£è®¾ç½®å¯¹æ¨¡å‹æ€§èƒ½å½±å“çš„ä¸Šé™ã€‚åœ¨DW-ViTä¸­ï¼Œé€šè¿‡å°†ä¸åŒå¤§å°çš„çª—å£åˆ†é…ç»™ä¸åŒçš„WMSAæ¥è·å¾—å¤šå°ºåº¦ä¿¡æ¯ã€‚ç„¶åï¼Œé€šè¿‡å¯¹å¤šå°ºåº¦çª—å£åˆ†æ”¯åˆ†é…ä¸åŒçš„æƒé‡æ¥åŠ¨æ€èåˆä¿¡æ¯ã€‚</strong></p>
<h4 id="ä¸»è¦è®¾è®¡æ€æƒ³-1">3ã€ä¸»è¦è®¾è®¡æ€æƒ³ï¼š</h4>
<p>â€‹
Swinæå‡ºå°†è‡ªæˆ‘æ³¨æ„çš„è®¡ç®—é™åˆ¶åœ¨å±€éƒ¨çª—å£ï¼Œä»¥é™ä½è®¡ç®—å¤æ‚åº¦ï¼Œå¹¶å–å¾—äº†ä¸€å®šçš„æ•ˆæœã€‚è¿™ç§å±€éƒ¨çª—å£è‡ªæˆ‘æ³¨æ„å¾ˆå¿«å¸å¼•äº†å¤§é‡çš„æ³¨æ„.ç„¶è€Œï¼Œå¤§å¤šæ•°è¿™äº›æ–¹æ³•é»˜è®¤ä½¿ç”¨å›ºå®šçš„å•å°ºåº¦çª—å£(ä¾‹å¦‚ï¼Œwin
= 7)ã€‚ â€‹ ä»¥ä¸‹é—®é¢˜éšä¹‹äº§ç”Ÿ:</p>
<ul>
<li>è¿™ä¸ªçª—å£å¤§å°æ˜¯æœ€ä½³çš„å—?</li>
<li>æ›´å¤§çš„çª—å£æ„å‘³ç€æ›´å¥½çš„æ€§èƒ½å—?</li>
<li>å¤šå°ºåº¦çª—å£æ˜¯å¦æ¯”å•å°ºåº¦çª—å£æ›´æœ‰ä¼˜åŠ¿?</li>
<li>æ­¤å¤–ï¼ŒåŠ¨æ€å¤šå°ºåº¦çª—å£ä¼šäº§ç”Ÿæ›´å¥½çš„ç»“æœå—?</li>
</ul>
<p>ä½œè€…å®éªŒåå¾—å‡ºï¼š</p>
<p>â€‹
<strong>éšç€çª—å£å¤§å°çš„å¢åŠ ï¼Œæ¨¡å‹çš„æ€§èƒ½å¾—åˆ°äº†æ˜¾è‘—çš„æé«˜ï¼Œä½†è¿™å¹¶ä¸æ˜¯ç»å¯¹å•è°ƒçš„ã€‚æ­¤å¤–ï¼Œå¾ˆéš¾ä»å¤šä¸ªå¯é€‰çª—å£å¤§å°ä¸­é€‰æ‹©æœ€ä½³çª—å£å¤§å°ã€‚è€Œä¸åŒå›¾å±‚çš„æœ€ä½³çª—å£è®¾ç½®ä¹Ÿå¯èƒ½ä¸åŒã€‚ä¸€ä¸ªè‡ªç„¶çš„æƒ³æ³•æ˜¯å°†æ¥è‡ªä¸åŒè§„æ¨¡çª—å£çš„ä¿¡æ¯æ··åˆç”¨äºé¢„æµ‹ä»»åŠ¡ã€‚</strong></p>
<p>â€‹
åŸºäºè¿™ä¸€æ€æƒ³ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€ç§åŸºäºçª—å£çš„ViTçš„å¤šå°ºåº¦çª—å£å¤šå¤´è‡ªå…³æ³¨(MSW-MSA)æœºåˆ¶ã€‚</p>
<p>â€‹
<strong>åœ¨DW-ViTä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆé€šè¿‡ç»™å˜å‹å™¨ä¸­å¤šå¤´è‡ªæ³¨æ„çš„ä¸åŒå¤´ç»„åˆ†é…ä¸åŒçš„å°ºåº¦çª—å£æ¥è·å¾—å¤šå°ºåº¦ä¿¡æ¯ã€‚ç„¶åï¼Œé€šè¿‡å¯¹å¤šå°ºåº¦çª—å£åˆ†æ”¯åˆ†é…æƒé‡ï¼Œå®ç°ä¿¡æ¯çš„åŠ¨æ€èåˆã€‚å…·ä½“æ¥è¯´ï¼Œåœ¨DW-ViTä¸­ï¼ŒMSW-MSAè´Ÿè´£å¤šå°ºåº¦çª—å£ä¿¡æ¯çš„æå–ï¼Œè€ŒDMSWè´Ÿè´£è¿™äº›å¤šå°ºåº¦ä¿¡æ¯çš„åŠ¨æ€å¢å¼ºã€‚é€šè¿‡ä»¥ä¸Šä¸¤éƒ¨åˆ†ï¼ŒDW-ViTå¯ä»¥åŠ¨æ€åœ°æé«˜æ¨¡å‹çš„å¤šå°ºåº¦ä¿¡æ¯å»ºæ¨¡èƒ½åŠ›ï¼ŒåŒæ—¶ä¿è¯ç›¸å¯¹è¾ƒä½çš„è®¡ç®—å¤æ‚åº¦ã€‚</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220422095955551.png" /></p>
<h4 id="å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„-1">4ã€å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„ï¼š</h4>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220422100027793.png"
alt="DW-ViTç½‘ç»œç»“æ„å›¾" /></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220422100222424.png" alt="DWMæ¨¡å—ç¤ºæ„å›¾" style="zoom:150%;" /></p>
<p>â€‹
å¦‚å›¾5æ‰€ç¤ºï¼Œæˆ‘ä»¬è®¾è®¡çš„å¤šå°ºåº¦çª—å£è‡ªå…³æ³¨æ¨¡å—ä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆ:å¤šå°ºåº¦çª—å£å¤šå¤´è‡ªå…³æ³¨æ¨¡å—(MSW-MSA)å’ŒåŠ¨æ€å¤šå°ºåº¦çª—å£æ¨¡å—(DMSW)ã€‚</p>
<h5 id="msw-msaæ¨¡å—">1ï¼‰ MSW-MSAæ¨¡å—</h5>
<p>â€‹
å°†MSAçš„å¤šå¤´hå‡åŒ€åˆ†æˆnwinç»„ï¼Œåœ¨ä¸åŒå°ºåº¦çš„çª—å£ä¸Šè¿›è¡Œå¤šå¤´è‡ªæˆ‘æ³¨æ„ï¼Œè·å–å¤šå°ºåº¦çª—å£ä¿¡æ¯ã€‚</p>
<p>â€‹ å°†æ¯ä¸ªçª—å£å±•å¼€ä¸ºä¸€ä¸ªé•¿åº¦ä¸ºwini Ã—
winiçš„ä»¤ç‰Œåºåˆ—ï¼Œä½œä¸ºMSW-MSAçš„ç¬¬iæ”¯W-MSA çš„è¾“å…¥ã€‚</p>
<p>â€‹ å°†W- msaçš„è¾“å‡ºåœ¨ç©ºé—´ç»´æ•°ä¸Šé‡æ„ä¸ºH Ã— Wï¼Œæœ€ç»ˆè¾“å‡ºç»´æ•°ä¸ºH Ã— W Ã—
Cnwinã€‚</p>
<p>â€‹
æœ€åè¿™äº›åˆ†æ”¯çš„è¾“å‡ºåœ¨é€šé“ç»´åº¦ä¸Šè¢«è¿æ¥èµ·æ¥ï¼Œå¹¶ç”¨ä½œæ•´ä¸ªMSW-MSAæ¨¡å—çš„è¾“å‡ºã€‚</p>
<h5 id="dmswæ¨¡å—">2ï¼‰ DMSWæ¨¡å—ï¼š</h5>
<p>â€‹
è¿™ä¸ªè¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªä¸»è¦æ­¥éª¤:Fuseå’ŒSelectã€‚å‰è€…è´Ÿè´£æ•´åˆæ‰€æœ‰åˆ†æ”¯çš„ä¿¡æ¯ï¼Œåè€…æ ¹æ®å…¨å±€ä¿¡æ¯ä¸ºæ¯ä¸ªåˆ†æ”¯ç”Ÿæˆç›¸åº”çš„æƒå€¼ï¼Œå®Œæˆåˆ†æ”¯ä¿¡æ¯çš„èåˆã€‚</p>
<ul>
<li>Fuseä¸»è¦ç”±æ± åŒ–å±‚<span class="math inline">\(F_{gp}\)</span> å’Œ
ä¸¤å¯¹å…¨è¿æ¥å±‚<span class="math inline">\(F_{fc}\)</span> å’Œ æ¿€æ´»å±‚<span
class="math inline">\(F_a\)</span>ç»„æˆã€‚</li>
<li>Select ä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š
<ul>
<li>ç¬¬ä¸€éƒ¨åˆ†ç”±ä¸€ç»„å…¨è¿é€šå±‚<span class="math inline">\(F_{\alpha} =
\{F_{\alpha_i},i=1,2,â€¦â€¦,n_{win}\}\)</span>
å’Œsoftmaxå±‚ä¸ºæ¯ä¸ªåˆ†æ”¯ç”Ÿæˆç›¸åº”çš„æƒå€¼</li>
<li>ç¬¬äºŒéƒ¨åˆ†åŒ…å«ä¸¤ä¸ªçº¿æ€§æ˜ å°„å±‚<span
class="math inline">\(F_{fc}\)</span>ï¼Œç”¨äºæ¢å¤èåˆç‰¹å¾çš„é€šé“ç»´æ•°ã€‚</li>
</ul></li>
<li>æœ€ç»ˆè¿˜æœ‰ä¸€ä¸ªResçš„è¿‡ç¨‹</li>
</ul>
<h3
id="ä¸‰è®ºæ–‡åç§°mixformer-mixing-features-across-windows-and-dimensions">ä¸‰ã€è®ºæ–‡åç§°ï¼šã€ŠMixFormer:
Mixing Features across Windows and Dimensionsã€‹</h3>
<p>è®ºæ–‡åœ°å€ï¼šhttps://arxiv.org/abs/2204.02557</p>
<h4 id="å…³é”®è¯-2">1ã€å…³é”®è¯ï¼š</h4>
<p>â€‹ Mix</p>
<h4 id="æ‘˜è¦-2">2ã€æ‘˜è¦ï¼š</h4>
<p>â€‹
å±€éƒ¨çª—å£è‡ªæˆ‘æ³¨æ„åœ¨è§†è§‰ä»»åŠ¡ä¸­è¡¨ç°çªå‡ºï¼Œ<strong>ä½†å­˜åœ¨æ¥æ”¶é‡æœ‰é™å’Œå»ºæ¨¡èƒ½åŠ›å¼±çš„é—®é¢˜ã€‚</strong>è¿™ä¸»è¦æ˜¯å› ä¸ºå®ƒåœ¨éé‡å çª—å£ä¸­æ‰§è¡Œè‡ªæˆ‘æ³¨æ„ï¼Œå¹¶åœ¨é€šé“ç»´åº¦ä¸Šå…±äº«æƒé‡ã€‚
â€‹
æˆ‘ä»¬æå‡ºçš„MixFormeræ‰¾åˆ°ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†å±€éƒ¨çª—å£è‡ªå…³æ³¨ä¸æ·±åº¦å·ç§¯å¹¶è¡Œè®¾è®¡ï¼Œå»ºæ¨¡è·¨çª—å£è¿æ¥ï¼Œä»¥æ‰©å¤§æ¥æ”¶åŸŸã€‚å…¶æ¬¡ï¼Œæˆ‘ä»¬æå‡ºè·¨åˆ†æ”¯çš„åŒå‘äº¤äº’ï¼Œä»¥åœ¨æ¸ é“å’Œç©ºé—´ç»´åº¦ä¸Šæä¾›äº’è¡¥çš„çº¿ç´¢ã€‚
â€‹è¿™ä¸¤ç§è®¾è®¡é›†æˆåœ¨ä¸€èµ·ï¼Œä»¥å®ç°çª—å£å’Œå°ºå¯¸ä¹‹é—´çš„é«˜æ•ˆç‰¹å¾æ··åˆã€‚</p>
<h4 id="ä¸»è¦è®¾è®¡æ€æƒ³-2">3ã€ä¸»è¦è®¾è®¡æ€æƒ³ï¼š</h4>
<p>â€‹
æˆ‘ä»¬æå‡ºäº†æ··åˆå—ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†å±€éƒ¨çª—å£è‡ªå…³æ³¨ä¸æ·±åº¦å·ç§¯ç›¸ç»“åˆï¼Œä½†ä»¥å¹¶è¡Œçš„æ–¹å¼ã€‚å¹¶è¡Œè®¾è®¡é€šè¿‡åŒæ—¶æ¨¡æ‹Ÿçª—å£å†…å’Œçª—å£é—´çš„å…³ç³»æ¥æ‰©å¤§æ¥æ”¶åŸŸã€‚å…¶æ¬¡ï¼Œæˆ‘ä»¬å¼•å…¥è·¨åˆ†æ”¯çš„åŒå‘äº¤äº’(å¦‚å›¾1ä¸­çš„è“è‰²ç®­å¤´æ‰€ç¤º)ã€‚è¿™äº›äº¤äº’æŠµæ¶ˆäº†æƒé‡å…±äº«æœºåˆ¶é€ æˆçš„é™åˆ¶ï¼Œé€šè¿‡ä¸ºå±€éƒ¨çª—å£è‡ªå…³æ³¨å’Œæ·±åº¦å·ç§¯æä¾›äº’è¡¥çº¿ç´¢ï¼Œå¢å¼ºäº†é€šé“ç»´å’Œç©ºé—´ç»´çš„å»ºæ¨¡èƒ½åŠ›ã€‚ç»¼åˆä»¥ä¸Šè®¾è®¡ï¼Œå®ç°çª—å£å’Œå°ºå¯¸ä¹‹é—´çš„äº’è¡¥ç‰¹å¾æ··åˆã€‚</p>
<p>â€‹</p>
<h4 id="å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„-2">4ã€å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„ï¼š</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220422205646202.png" /></p>
<p>â€‹ æˆ‘ä»¬çš„æ··åˆå—(å›¾1)åœ¨æ ‡å‡†çš„åŸºäºçª—å£çš„æ³¨æ„å—ä¸Šå¢åŠ äº†ä¸¤ä¸ªå…³é”®è®¾è®¡:</p>
<ul>
<li><ol type="1">
<li>é‡‡ç”¨å¹¶è¡Œè®¾è®¡ï¼Œå°†å±€éƒ¨çª—å£è‡ªæˆ‘æ³¨æ„å’Œæ·±åº¦å·ç§¯ç»“åˆèµ·æ¥</li>
</ol></li>
<li>(2)å¼•å…¥è·¨åˆ†æ”¯çš„åŒå‘äº¤äº’ã€‚ç”¨äºè§£å†³ å±€éƒ¨çª—å£è‡ªæˆ‘æ³¨æ„ä¸­
æœ‰é™çš„æ¥å—åŸŸå’Œè–„å¼±çš„å»ºæ¨¡èƒ½åŠ› çš„é—®é¢˜ã€‚</li>
</ul>
<h5 id="å¹¶è¡Œè®¾è®¡">1 å¹¶è¡Œè®¾è®¡</h5>
<p>â€‹
è™½ç„¶åœ¨éé‡å çª—å£å†…æ‰§è¡Œè‡ªæˆ‘æ³¨æ„å¯ä»¥æé«˜è®¡ç®—æ•ˆç‡ï¼Œä½†ç”±äºæ²¡æœ‰æå–è·¨çª—å£è¿æ¥ï¼Œå®ƒä¼šå¯¼è‡´æœ‰é™çš„æ¥æ”¶åŸŸã€‚è€ƒè™‘åˆ°<strong>å·ç§¯å±‚æ˜¯ç”¨æ¥æ¨¡æ‹Ÿå±€éƒ¨å…³ç³»çš„ï¼Œæˆ‘ä»¬é€‰æ‹©äº†ä¸€ç§æœ‰æ•ˆçš„æ–¹æ³•(æ·±åº¦å·ç§¯)æ¥è¿æ¥çª—å£ã€‚</strong></p>
<p>â€‹
åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§å¹¶è¡Œè®¾è®¡ï¼Œé€šè¿‡åŒæ—¶å»ºæ¨¡çª—å£å†…å’Œçª—å£é—´å…³ç³»æ¥æ‰©å¤§æ¥æ”¶é‡</p>
<p>â€‹
å¦‚å›¾1æ‰€ç¤ºï¼Œå±€éƒ¨çª—å£è‡ªå…³æ³¨å’Œæ·±åº¦å·ç§¯ä½äºä¸¤æ¡å¹³è¡Œè·¯å¾„ä¸Šã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒä»¬ä½¿ç”¨ä¸åŒçš„çª—å£å¤§å°ã€‚
æœ¬åœ°çª—å£è‡ªæˆ‘æ³¨æ„é‡‡ç”¨7 Ã—
7çª—å£ï¼Œéµå¾ªå‰äººçš„å·¥ä½œï¼Œè€Œåœ¨æ·±åº¦å·ç§¯ä¸­ï¼Œè€ƒè™‘åˆ°æ•ˆç‡ï¼Œé‡‡ç”¨äº†ä¸€ä¸ªè¾ƒå°çš„æ ¸å¤§å°3
x 3ã€‚</p>
<p>â€‹ å®ƒä»¬çš„è¾“å‡ºè¢«ä¸åŒçš„å½’ä¸€åŒ–å±‚[1,27]å½’ä¸€åŒ–ï¼Œå¹¶é€šè¿‡æ‹¼æ¥è¿›è¡Œåˆå¹¶ã€‚ â€‹
åˆå¹¶åçš„ç‰¹å¾è¢«å‘é€åˆ°åç»­çš„å‰é¦ˆç½‘ç»œ(FFN)ï¼Œè·¨ä¿¡é“æ··åˆå­¦ä¹ åˆ°çš„å…³ç³»ï¼Œç”Ÿæˆæœ€ç»ˆçš„è¾“å‡ºç‰¹å¾ã€‚</p>
<p><strong>å¥½å¤„</strong>ï¼š
é¦–å…ˆï¼Œå°†å±€éƒ¨çª—å£çš„è‡ªæˆ‘å…³æ³¨ä¸è·¨åˆ†æ”¯çš„æ·±åº¦å·ç§¯ç»“åˆèµ·æ¥ï¼Œå»ºæ¨¡è·¨çª—å£çš„è¿æ¥ï¼Œè§£å†³æœ‰é™çš„æ¥å—åŸŸé—®é¢˜ã€‚å…¶æ¬¡ï¼Œå¹¶è¡Œè®¾è®¡åŒæ—¶å»ºæ¨¡çª—å£å†…å’Œçª—å£é—´çš„å…³ç³»ï¼Œä¸ºè·¨åˆ†æ”¯çš„ç‰¹å¾äº¤ç»‡æä¾›æœºä¼šï¼Œå¹¶å®ç°æ›´å¥½çš„ç‰¹å¾è¡¨ç¤ºå­¦ä¹ ã€‚</p>
<h5 id="åŒå‘äº¤äº’">2 åŒå‘äº¤äº’</h5>
<p>â€‹
é€šå¸¸ï¼Œå…±äº«æƒå€¼é™åˆ¶äº†å…±äº«ç»´åº¦ä¸Šçš„å»ºæ¨¡èƒ½åŠ›ã€‚è§£å†³è¿™ä¸€å›°å¢ƒçš„å¸¸è§æ–¹æ³•æ˜¯ç”Ÿæˆä¸æ•°æ®ç›¸å…³çš„æƒé‡ï¼Œå°±åƒåœ¨åŠ¨æ€ç½‘ç»œä¸­æ‰€åšçš„é‚£æ ·ã€‚å±€éƒ¨çª—å£è‡ªå…³æ³¨åœ¨ç©ºé—´ç»´åº¦ä¸ŠåŠ¨æ€è®¡ç®—æƒå€¼ï¼ŒåŒæ—¶è·¨Channel
å…±äº«æƒå€¼ï¼Œå¯¼è‡´åœ¨Channel ç»´åº¦ä¸Šå»ºæ¨¡èƒ½åŠ›å¼±ã€‚</p>
<p>â€‹ ä¸ºäº†æé«˜å±€éƒ¨çª—å£è‡ªå…³æ³¨åœ¨ Channel
ç»´åº¦ä¸Šçš„å»ºæ¨¡èƒ½åŠ›ï¼Œæˆ‘ä»¬å°è¯•ç”ŸæˆåŸºäºChannel çš„åŠ¨æ€æƒå€¼ã€‚
è€ƒè™‘åˆ°æ·±åº¦å·ç§¯åœ¨å…³æ³¨Channel
çš„åŒæ—¶ï¼Œåœ¨Spatialç»´åº¦ä¸Šå…±äº«æƒé‡,å®ƒå¯ä»¥ä¸ºå±€éƒ¨çª—å£çš„è‡ªæˆ‘æ³¨æ„æä¾›è¡¥å……çº¿ç´¢ï¼Œåä¹‹äº¦ç„¶ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æå‡ºäº†åŒå‘äº¤äº’(å¦‚å›¾1å’Œå›¾2æ‰€ç¤º)ï¼Œä»¥å¢å¼ºåœ¨Channelå’ŒSpatialç»´åº¦ä¸Šå¯¹å±€éƒ¨çª—å£è‡ªæˆ‘å…³æ³¨å’Œçš„å»ºæ¨¡èƒ½åŠ›ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220422210802291.png" /></p>
<h5 id="channeläº¤äº’è®¾è®¡">Channeläº¤äº’è®¾è®¡</h5>
<p>â€‹
å¯¹äºé€šé“äº¤äº’ï¼Œæˆ‘ä»¬éµå¾ªSEå±‚[24]çš„è®¾è®¡ï¼Œå¦‚å›¾2æ‰€ç¤ºã€‚é€šé“äº¤äº’åŒ…æ‹¬ä¸€ä¸ªå…¨å±€å¹³å‡æ± åŒ–å±‚ï¼Œç„¶åæ˜¯ä¸¤ä¸ªè¿ç»­çš„1X1å·ç§¯å±‚ï¼Œå®ƒä»¬ä¹‹é—´æœ‰å½’ä¸€åŒ–(BN[27])å’Œæ¿€æ´»(GELU[20])ã€‚
â€‹
æœ€åï¼Œæˆ‘ä»¬åœ¨Cç»´åº¦ä¸Šä½¿ç”¨sigmoidæ¥äº§ç”Ÿæ³¨æ„ã€‚è™½ç„¶æˆ‘ä»¬çš„é€šé“äº¤äº’ä¸SEå±‚[24]å…·æœ‰ç›¸åŒçš„è®¾è®¡ï¼Œä½†å®ƒä»¬åœ¨ä¸¤ä¸ªæ–¹é¢æœ‰æ‰€ä¸åŒ:</p>
<p>ï¼ˆ1ï¼‰æ³¨æ„æ¨¡å—çš„è¾“å…¥ä¸åŒã€‚æˆ‘ä»¬çš„é€šé“äº¤äº’çš„è¾“å…¥æ¥è‡ªå¦ä¸€ä¸ªå¹¶è¡Œåˆ†æ”¯ï¼Œè€ŒSEå±‚åœ¨åŒä¸€ä¸ªåˆ†æ”¯ä¸­æ‰§è¡Œã€‚
ï¼ˆ2ï¼‰æˆ‘ä»¬åªå°†é€šé“äº¤äº’åº”ç”¨äºlocal window
self-attentionä¸­çš„å€¼ï¼Œè€Œä¸æ˜¯åƒSEå±‚é‚£æ ·å°†å…¶åº”ç”¨äºæ¨¡å—çš„è¾“å‡ºã€‚</p>
<h5 id="spatialäº¤äº’è®¾è®¡">Spatialäº¤äº’è®¾è®¡</h5>
<p>â€‹ æˆ‘ä»¬è¿˜é‡‡ç”¨äº†ä¸€ç§ç®€å•çš„è®¾è®¡ï¼Œå®ƒç”±ä¸¤ä¸ª1 X
1å·ç§¯å±‚ç»„æˆï¼Œå…¶æ¬¡æ˜¯BN[27]å’ŒGELU[20]ã€‚ â€‹
è¿™ä¸¤å±‚å°†é€šé“çš„æ•°é‡å‡å°‘åˆ°ä¸€ä¸ªã€‚æœ€åï¼Œé‡‡ç”¨sigmoidå±‚ç”Ÿæˆç©ºé—´æ³¨æ„å›¾ã€‚ä¸æˆ‘ä»¬åœ¨é€šé“äº¤äº’ä¸­æ‰€åšçš„ä¸€æ ·ï¼Œç©ºé—´æ³¨æ„æ˜¯ç”±å¦ä¸€ä¸ªåˆ†æ”¯äº§ç”Ÿçš„ï¼Œå…¶ä¸­åº”ç”¨äº†æœ¬åœ°çª—å£è‡ªæˆ‘æ³¨æ„æ¨¡å—ã€‚
â€‹å®ƒæ¯”æ·±åº¦3 X 3å·ç§¯å…·æœ‰æ›´å¤§çš„æ ¸å¤§å°(7 X
7)ï¼Œå¹¶ä¸”ä¾§é‡äºç©ºé—´ç»´åº¦ï¼Œä¸ºæ·±åº¦å·ç§¯åˆ†æ”¯æä¾›äº†å¼ºæœ‰åŠ›çš„ç©ºé—´çº¿ç´¢ã€‚</p>
]]></content>
      <categories>
        <category>â“¶ è®ºæ–‡é˜…è¯»ç¬”è®°</category>
        <category>CVç›¸å…³è®ºæ–‡</category>
      </categories>
      <tags>
        <tag>Transformer</tag>
        <tag>CVPR2022</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŠSwinIR- Image Restoration Using Swin Transformerã€‹è®ºæ–‡ç¬”è®°</title>
    <url>/2022/01/13/45d8498aa8b8/</url>
    <content><![CDATA[<h3
id="è®ºæ–‡åç§°swinir-image-restoration-using-swin-transformer">è®ºæ–‡åç§°ï¼šã€ŠSwinIR:
Image Restoration Using Swin Transformerã€‹</h3>
<h3
id="è®ºæ–‡é“¾æ¥httpsopenaccess.thecvf.comcontenticcv2021waimhtmlliang_swinir_image_restoration_using_swin_transformer_iccvw_2021_paper.html">è®ºæ–‡é“¾æ¥ï¼šhttps://openaccess.thecvf.com/content/ICCV2021W/AIM/html/Liang_SwinIR_Image_Restoration_Using_Swin_Transformer_ICCVW_2021_paper.html</h3>
<h2 id="å…³é”®è¯">1ã€å…³é”®è¯ï¼š</h2>
<p>â€‹ å›¾åƒä¿®å¤ï¼ˆImage Restorationï¼‰ã€Transformer</p>
<h2 id="é¢†åŸŸèƒŒæ™¯å›¾åƒä¿®å¤">2ã€é¢†åŸŸèƒŒæ™¯â€”å›¾åƒä¿®å¤ï¼š</h2>
<p>â€‹
å›¾åƒä¿®å¤æ˜¯ä¸€ä¸ªç»å…¸é—®é¢˜ï¼Œä¸€èˆ¬è€Œè¨€å…¶ç›®æ ‡ä¸ºä»ä½åˆ†è¾¨ç‡çš„å›¾åƒä¸­æ¢å¤å‡ºé«˜åˆ†è¾¨ç‡çš„å›¾åƒã€‚é€šå¸¸å¯ä»¥ç”¨äºè¶…åˆ†è¾¨ç‡ã€å›¾åƒå»å™ªï¼Œä»¥åŠJPEGå‹ç¼©é¬¼å½±å»é™¤ç­‰åº”ç”¨ã€‚æ­¤ç¯‡æ–‡ç« å°†Swin
Transformeråº”ç”¨äºå›¾åƒä¿®å¤é¢†åŸŸä¸­ã€‚</p>
<h2 id="å…ˆå‰å·¥ä½œæè¿°ä¸æ¯”è¾ƒ">3ã€å…ˆå‰å·¥ä½œæè¿°ä¸æ¯”è¾ƒï¼š</h2>
<p>â€‹
å’ŒCNNæ¯”èµ·æ¥ï¼ŒTransformerè®¾è®¡äº†Self-Attentionæœºåˆ¶æ¥æ•è·å…¨å±€å†…å®¹ä¹‹é—´çš„ä¿¡æ¯äº¤äº’ï¼Œä¹Ÿåœ¨ä¸€ç³»åˆ—çš„ä»»åŠ¡é‡å¾—åˆ°äº†æ¯”è¾ƒå¥½çš„ç»“æœã€‚ä½†æ˜¯ViTç”¨äºå›¾åƒæ¢å¤çš„è¯ï¼Œå› ä¸ºVitè¦åˆ’åˆ†patchï¼Œæ‰€ä»¥å°±ä¼šä¸å¯é¿å…çš„å¯¼è‡´æ¢å¤çš„å›¾åƒåœ¨patchå’Œpatchä¹‹é—´æœ‰è¾¹ç•Œæ„Ÿï¼ŒåŒæ—¶æ¯ä¸€ä¸ªpatché‚»è¿‘è¾¹ç•Œçš„åƒç´ ä¹Ÿä¼šå› ä¸ºç¼ºå°‘ä¿¡æ¯è€Œæ²¡æ³•åšå‡ºæ›´å¥½çš„æ¢å¤æ•ˆæœã€‚</p>
<p>â€‹
<strong>å…ˆå‰æ–¹æ³•çš„é—®é¢˜</strong>ï¼šä½¿ç”¨åŸºäºCNNçš„æ–¹æ³•è¿›è¡Œå›¾åƒä¿®å¤ï¼šä¼šå­˜åœ¨ä¸¤ä¸ªæºäºå·ç§¯å±‚æœ¬èº«å¸¦æ¥çš„åŸºæœ¬çš„é—®é¢˜ï¼š</p>
<p>1ã€å›¾åƒå’Œå·ç§¯æ ¸ä¹‹é—´æ˜¯å†…å®¹æ— å…³çš„ï¼Œæˆ‘ä»¬ç”¨åŒä¸€ä¸ªå·ç§¯æ ¸å»ä¿®å¤ä¸åŒçš„å›¾åƒåŒºåŸŸï¼Œå¯èƒ½å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©</p>
<p>2ã€ç”±äºCNNçš„local processingæ–¹æ¡ˆï¼Œå·ç§¯å±‚æ˜¯åœ¨å±€éƒ¨é‚»åŸŸï¼ˆ local
neighborhood ï¼‰å†…å»ºç«‹åƒç´ å…³ç³»ï¼Œå…¶é•¿è·ç¦»çš„ä¾èµ–å…³ç³»ï¼ˆlong-range
dependencyï¼‰ä¸»è¦é€šè¿‡æ·±åº¦å åŠ å·ç§¯å±‚æ¥è¿›è¡Œå»ºæ¨¡ï¼Œæœ‰çš„æ—¶å€™å¯èƒ½å¹¶ä¸æ˜¯å¾ˆæœ‰æ•ˆ</p>
<p>â€‹ è€ŒSwin
Transformerï¼Œç»“åˆäº†ä¸¤è€…çš„ä¼˜åŠ¿ã€‚æ—¢èƒ½å¤ŸåƒCNNé‚£æ ·å¤„ç†å¤§å°ºåº¦çš„å›¾åƒï¼Œä¹Ÿèƒ½å¼¥è¡¥CNNåœ¨long-range
dependencyä¸Šçš„ä¸è¶³ï¼ˆä½¿ç”¨SW-MSAæœºåˆ¶ï¼‰</p>
<h2 id="ä¸»è¦è®¾è®¡æ€æƒ³">4ã€ä¸»è¦è®¾è®¡æ€æƒ³ï¼š</h2>
<p>â€‹
SwinIRç”±ä¸‰éƒ¨åˆ†ç»„æˆã€‚é¦–å…ˆæµ…å±‚ç‰¹å¾æå–éƒ¨åˆ†æ˜¯ç”±å·ç§¯å±‚ç»„æˆçš„ï¼Œè¾“å‡ºç»“æœå°†ç›´æ¥ä¼ è¾“åˆ°é‡å»ºæ¨¡å—ä¸­ï¼Œä¸ºäº†ä¿æŒå›¾åƒæœ¬èº«çš„ä½é¢‘ä¿¡æ¯ï¼Œè€Œæ·±å±‚ç‰¹å¾æå–æ¨¡å—ä¸»è¦ç”±RSTBï¼ˆResidual
Swin Transformer
blocksï¼‰ç»„æˆã€‚åŒæ—¶ï¼Œå…¶åœ¨æ¯ä¸€ä¸ªblockçš„åé¢è¿˜åŠ äº†ä¸€å±‚å·ç§¯å±‚ï¼Œæ¥åšç‰¹å¾åŠ å¼ºï¼Œä»¥åŠä½¿ç”¨æ®‹å·®ç½‘ç»œæ¥ä¸ºç‰¹å¾èšåˆæä¾›æ·å¾„ã€‚æœ€ç»ˆï¼Œæµ…å±‚å’Œæ·±å±‚ç‰¹å¾è¢«è¾“é€åˆ°é‡å»ºæ¨¡å—ï¼Œè¿›è¡Œé«˜è´¨é‡çš„å›¾åƒé‡å»ºã€‚æ€»ä½“æµç¨‹æ¦‚æ‹¬å¦‚ä¸‹ï¼š</p>
<ul>
<li>æµ…å±‚ç‰¹å¾æå–ï¼š<strong>ä½è´¨é‡å›¾åƒ</strong> <span
class="math inline">\(\to\)</span><strong>æµ…å±‚ç‰¹å¾å›¾</strong></li>
<li>æ·±å±‚ç‰¹å¾æå–ï¼š<strong>æµ…å±‚ç‰¹å¾å›¾</strong><span
class="math inline">\(\to\)</span><strong>æ·±å±‚ç‰¹å¾å›¾</strong></li>
<li>é«˜è´¨é‡å›¾ç‰‡ç”Ÿæˆï¼š<strong>æµ…å±‚ç‰¹å¾å›¾</strong>+<strong>æ·±å±‚ç‰¹å¾å›¾</strong><span
class="math inline">\(\to\)</span><strong>é«˜è´¨é‡å›¾åƒ</strong></li>
</ul>
<h2 id="å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„">5ã€å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„ï¼š</h2>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/network_swinir.png" /></p>
<p>â€‹
é¦–å…ˆï¼Œå¯¹äºè¿™ä¸€æ•´ä¸ªæ¶æ„è€Œè¨€ï¼Œåˆ†ä¸º3å¤§å—ï¼Œåˆ†åˆ«æ˜¯æµ…å±‚ç‰¹å¾æå–ã€æ·±å±‚ç‰¹å¾æå–ä»¥åŠå›¾åƒé‡å»ºï¼Œ<strong>å¯¹äºä¸åŒçš„ä»»åŠ¡è€Œè¨€ï¼Œæˆ‘ä»¬ä½¿ç”¨ç›¸åŒçš„ç‰¹å¾æå–æ¨¡å—ï¼Œä½†æ˜¯ä¼šä½¿ç”¨ä¸åŒçš„å›¾åƒé‡å»ºæ¨¡å—</strong>ã€‚</p>
<h3 id="æµ…å±‚ç‰¹å¾æå–shallow-feature-extraction">1ï¼‰æµ…å±‚ç‰¹å¾æå–(Shallow
Feature Extraction)</h3>
<ul>
<li><strong>æ¦‚è¿°</strong>ï¼šä½¿ç”¨å·ç§¯ç½‘ç»œä»<strong>ä½è´¨é‡å›¾åƒ</strong>ä¸­æå–<strong>æµ…å±‚ç‰¹å¾å›¾</strong></li>
<li><strong>è¾“å…¥</strong>ï¼š<strong>ä½è´¨é‡å›¾åƒ(LQ)</strong> <span
class="math inline">\(I_{LQ}\in R^{H\times W\times C_{in}}\)</span></li>
<li><strong>è¾“å‡º</strong>ï¼š<strong>æµ…å±‚ç‰¹å¾å›¾</strong> <span
class="math inline">\(F_{0}\in R^{H\times W\times
C_{embed}}\)</span>ï¼Œ<span
class="math inline">\(C_{embed}\)</span>ä¸ºç‰¹å¾é€šé“æ•°ç›®</li>
<li><strong>ç½‘ç»œç»“æ„</strong>ï¼šå•å±‚<span
class="math inline">\(3\times3\)</span>å·ç§¯ç½‘ç»œ</li>
<li><strong>å…¬å¼è¡¨è¾¾</strong>ï¼š<span
class="math inline">\(F_{0}=H_{SF}(I_{LQ})\)</span>ï¼Œå…¶ä¸­<span
class="math inline">\(H_{SF}\)</span>ä¸ºå·ç§¯ç½‘ç»œ</li>
<li><strong>å®ç°ç»†èŠ‚ï¼ˆå®˜æ–¹ä»£ç ï¼‰</strong>
<ul>
<li><span class="math inline">\(H_{SF}\)</span>ä¸ºå•å±‚ï¼Œè¾“å…¥å›¾åƒé€šé“<span
class="math inline">\(C_{in}=3\)</span>ï¼Œè¾“å‡ºç‰¹å¾é€šé“<span
class="math inline">\(C=96\)</span>ï¼Œæ­¥é•¿<span
class="math inline">\(stride=1\)</span>ï¼Œå¡«å……<span
class="math inline">\(pading=1\)</span>çš„<span
class="math inline">\(3\times3\)</span>å·ç§¯ç½‘ç»œ</li>
</ul></li>
<li><strong>æ„ä¹‰</strong>ï¼šå·ç§¯å±‚åœ¨å‰æœŸçš„è§†è§‰å¤„ç†ä¸­å¾€å¾€èƒ½èµ·åˆ°è¾ƒå¥½çš„æ•ˆæœï¼Œèƒ½å¤Ÿå¯¼è‡´ä¸€ä¸ªè¾ƒä¸ºç¨³å®šçš„ç»“æœï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†ä¸€ä¸ªä»å›¾åƒç©ºé—´æ˜ å°„åˆ°é«˜ç»´ç‰¹å¾ç©ºé—´çš„æ‰‹æ®µã€‚</li>
</ul>
<h3 id="æ·±å±‚ç‰¹å¾æå–deep-feature-extraction">2ï¼‰æ·±å±‚ç‰¹å¾æå–(Deep
Feature Extraction)ï¼š</h3>
<ul>
<li><p><strong>è¾“å…¥</strong>ï¼š<strong>æµ…å±‚ç‰¹å¾å›¾</strong><span
class="math inline">\(F_{0}\in R^{H\times W\times
C_{embed}}\)</span></p></li>
<li><p><strong>è¾“å‡º</strong>ï¼š<strong>æ·±å±‚ç‰¹å¾å›¾</strong><span
class="math inline">\(F_{DF}\in R^{H\times W\times
C_{embed}}\)</span></p></li>
<li><p><strong>ç½‘ç»œç»“æ„ï¼š</strong></p>
<ul>
<li><span class="math inline">\(K\)</span>ä¸ªä¸²è”çš„Residual Swin
Transformer Blockï¼ˆRSTBï¼‰å’Œ <span
class="math inline">\(1\)</span>ä¸ªå·ç§¯å±‚ æ„æˆ</li>
<li>æ¯ä¸ªRSTBï¼ˆResidual Swin Transformer Blockï¼‰å†…éƒ¨ç”±<span
class="math inline">\(L\)</span>ä¸ªä¸²è”çš„ Swin Transformer Layerï¼ˆSTLï¼‰å’Œ
ä¸€ä¸ªå·ç§¯å±‚æ„æˆï¼ˆå¦‚ä¸Šå›¾aï¼‰</li>
<li>STLï¼ˆSwin Transformer Layerï¼‰ç»“æ„ä¸ºLayer Norm<span
class="math inline">\(\to\)</span>MSA<span
class="math inline">\(\to\)</span>Layer Norm<span
class="math inline">\(\to\)</span>MLP ä¸”
MSAå’ŒMLPåæœ‰æ®‹å·®è¿æ¥ï¼ˆå¦‚ä¸Šå›¾bï¼‰</li>
</ul></li>
<li><p><strong>å…¬å¼è¡¨è¾¾</strong>ï¼š</p>
<ul>
<li><strong>æ•´ä½“ç»“æ„</strong>ï¼š
<ul>
<li><span class="math inline">\(F_i=H_{RSTB_i}(F_{i-1}),\
i=1,2,...,K\)</span></li>
<li><span class="math inline">\(F_{DF}=H_{CONV}(F_{K})\)</span></li>
</ul></li>
<li><strong>RSTB</strong>ï¼š
<ul>
<li><span class="math inline">\(F_{i,j}=H_{Swin_{i,j}}(F_{i,j-1}),\
j=1,2,...,L\)</span></li>
<li><span class="math inline">\(F_i=H_{CONV_i}(F_{i,L})\)</span></li>
</ul></li>
<li><strong>STL</strong>ï¼š
<ul>
<li><span
class="math inline">\(H_{Swin_{i,j}}(X)=STL_2(STL_1(X))\)</span></li>
<li><span class="math inline">\(STL_1(X)=MSA(LN(X))+X\)</span></li>
<li><span class="math inline">\(STL_2(X)=MLP(LN(X))+X\)</span></li>
</ul></li>
</ul></li>
<li><p><strong>å®ç°ç»†èŠ‚ï¼ˆå®˜æ–¹ä»£ç ï¼‰</strong></p>
<ul>
<li><p><strong>PatchEmbedå’ŒPatchUnEmbedæ“ä½œ</strong></p>
<ul>
<li>ä»£ç ä¸­ä½¿ç”¨PatchEmbedæ“ä½œå°†<span
class="math inline">\(224\times224\)</span>çš„ç‰¹å¾å›¾æ‹†åˆ†ä¸º<span
class="math inline">\(16\times16\)</span>çš„Patchï¼Œå¹¶ä¸”æœ‰å¯é€‰çš„LayerNormæ“ä½œ</li>
<li>å¯¹åº”çš„ä»£ç ä¸­ä½¿ç”¨PatchUnEmbedæ“ä½œå°†<span
class="math inline">\(16\times16\)</span>çš„Patchè¿˜åŸä¸º<span
class="math inline">\(224\times224\)</span>çš„ç‰¹å¾å›¾</li>
<li>PatchEmbedå’ŒPatchUnEmbedæ“ä½œçš„æ‰§è¡Œé€»è¾‘å¦‚ä¸‹
<ul>
<li>æ¯ä¸€ä¸ªRSTBçš„å¼€å¤´ï¼Œæ‰§è¡ŒPatchEmbedæ“ä½œ</li>
<li>æ¯ä¸€ä¸ªRSTBçš„å·ç§¯æ“ä½œå‰ï¼Œæ‰§è¡ŒPatchUnEmbedæ“ä½œ</li>
<li>åªåœ¨ç¬¬ä¸€ä¸ªRSTBå¼€å¤´çš„PatchEmbedæ“ä½œä¸­ï¼Œä½¿ç”¨LayerNorm</li>
</ul></li>
</ul></li>
<li><p><strong>RSTBçš„ä¸²è”æ•°é‡ï¼ˆ<span
class="math inline">\(K\)</span>çš„å–å€¼ï¼‰</strong></p>
<ul>
<li>è™½ç„¶è®ºæ–‡å›¾ç‰‡ä¸­çš„RSTBæœ‰6ä¸ªï¼Œä½†åœ¨ä»£ç ä¸­åªæœ‰4ä¸ªï¼Œå³<span
class="math inline">\(K=4\)</span></li>
</ul></li>
<li><p><strong>STLçš„ä¸²è”æ•°é‡ï¼ˆ<span
class="math inline">\(L\)</span>çš„å–å€¼ï¼‰</strong></p>
<ul>
<li>ä»£ç ä¸­æ¯ä¸ªRSTBå†…éƒ¨çš„STLçš„æ•°ç›®ä¸º6ä¸ªï¼Œä¸è®ºæ–‡å›¾ç‰‡ä¸­çš„ä¸€è‡´ï¼Œå³<span
class="math inline">\(L=6\)</span></li>
</ul></li>
<li><p><strong>é…å¯¹çš„STL</strong></p>
<ul>
<li>å¦‚å‰è¿°æ‰€è¯´ï¼Œæ¯ä¸ªRSTBä¸­STLçš„æ•°ç›®ä¸º6ä¸ªï¼Œå…¶ä¸­æ¯ä¸¤ä¸ªSTLæ„æˆä¸€ç»„ï¼Œç¬¬ä¸€ä¸ªSTLå†…çš„MSAä¸ºSwinä¸­çš„W-MSAï¼Œç¬¬äºŒä¸ªä¸ºSwinä¸­çš„SW-MSAï¼Œè¿™ä¸€æ“ä½œä¸åŸç‰ˆSwinä¸­çš„ä¸€è‡´</li>
</ul></li>
<li><p><strong>å·ç§¯æ“ä½œ</strong></p>
<ul>
<li>å¯¹äºæ•´ä¸ªæ·±å±‚ç‰¹å¾æå–æ¨¡å—æœ«å°¾å’ŒRSTBå†…éƒ¨çš„å·ç§¯ï¼Œä»£ç æ ¹æ®ä»»åŠ¡ä¸åŒåˆ†ä¸ºä¸¤ç§
<ol type="1">
<li>å¯¹äºå°æ¨¡å‹ä»»åŠ¡ï¼Œå¦‚ä¸€èˆ¬å›¾ç‰‡ã€è½»é‡å›¾ç‰‡çš„SRã€å›¾ç‰‡é™å™ªå’ŒJPEGæ ¼å¼å‹ç¼©å›¾åƒä¿®å¤ï¼Œé‡‡ç”¨çš„æ˜¯å•å±‚ï¼Œè¾“å…¥è¾“å‡ºç»´åº¦ä¸º<span
class="math inline">\(C_{embed}=96\)</span>ï¼Œæ­¥é•¿<span
class="math inline">\(stride=1\)</span>ï¼Œå¡«å……<span
class="math inline">\(pading=1\)</span>çš„<span
class="math inline">\(3\times3\)</span>å·ç§¯ç½‘ç»œ</li>
<li>å¯¹äºå¤§æ¨¡å‹ä»»åŠ¡ï¼Œå¦‚çœŸå®ä¸–ç•Œå›¾ç‰‡SRï¼Œé‡‡ç”¨çš„æ˜¯ä¸€ä¸ªå¤šå±‚å·ç§¯ç½‘ç»œ
<ul>
<li>ç¬¬ä¸€å±‚ä¸ºè¾“å…¥ç»´åº¦ä¸º<span
class="math inline">\(C_{embed}=96\)</span>ï¼Œè¾“å‡ºç»´åº¦ä¸º<span
class="math inline">\(C_{embed}/4\)</span>ï¼Œæ­¥é•¿<span
class="math inline">\(stride=1\)</span>ï¼Œå¡«å……<span
class="math inline">\(pading=1\)</span>çš„<span
class="math inline">\(3\times3\)</span>å·ç§¯ç½‘ç»œï¼Œå¹¶å¯¹è¾“å‡ºè¿›è¡ŒLeakyReLu</li>
<li>ç¬¬äºŒå±‚ä¸ºè¾“å…¥ç»´åº¦ä¸º<span
class="math inline">\(C_{embed}/4\)</span>ï¼Œè¾“å‡ºç»´åº¦ä¸º<span
class="math inline">\(C_{embed}/4\)</span>ï¼Œæ­¥é•¿<span
class="math inline">\(stride=1\)</span>ï¼Œå¡«å……<span
class="math inline">\(pading=1\)</span>çš„<span
class="math inline">\(3\times3\)</span>å·ç§¯ç½‘ç»œï¼Œå¹¶å¯¹è¾“å‡ºè¿›è¡ŒLeakyReLu</li>
<li>ç¬¬ä¸‰å±‚ä¸ºè¾“å…¥ç»´åº¦ä¸º<span
class="math inline">\(C_{embed}/4\)</span>ï¼Œè¾“å‡ºç»´åº¦ä¸º<span
class="math inline">\(C_{embed}\)</span>ï¼Œæ­¥é•¿<span
class="math inline">\(stride=1\)</span>ï¼Œå¡«å……<span
class="math inline">\(pading=1\)</span>çš„<span
class="math inline">\(3\times3\)</span>å·ç§¯ç½‘ç»œ</li>
</ul></li>
</ol></li>
</ul></li>
</ul></li>
<li><p><strong>æ„ä¹‰</strong>ï¼š</p>
<ul>
<li>ä½œè€…è®¤ä¸ºåœ¨æ‰€æœ‰RSTBåé¢ï¼Œå†åŠ ä¸€å±‚Convå±‚ï¼Œèƒ½å¤Ÿå°†å·ç§¯æ“ä½œçš„å½’çº³åç½®(inductive
bias)å¸¦å…¥è¿™ç±»åŸºäºTransformeréª¨æ¶çš„ç½‘ç»œä¸­ï¼Œä¸ºåç»­æµ…å±‚å’Œæ·±å±‚ç‰¹å¾çš„èåˆæ‰“å¥½åŸºç¡€ã€‚</li>
<li><!--å…·ä½“çš„ä½œç”¨éœ€è¦é€šè¿‡å®éªŒéªŒè¯ï¼Œè¿™ä¸ªConvå±‚æ˜¯å¦æ˜¯å¿…è¦çš„ã€‚--></li>
<li>å¯¹äºå•ä¸ªRSTBå†…éƒ¨çš„å·ç§¯æ“ä½œï¼Œè®ºæ–‡è®¤ä¸ºå·ç§¯æ ¸åœ¨ç©ºé—´ä¸Šçš„ä¸å˜æ€§å¯ä»¥å¢å¼ºæå–å‡ºç‰¹å¾çš„å¹³ç§»ä¸å˜æ€§</li>
<li>æ®‹å·®è¿æ¥ä¸ºä¸åŒçš„RSTBæ¨¡å—æä¾›äº†ä¸€ä¸ªåˆ°åç»­å›¾åƒé‡å»ºæ¨¡å—çš„çŸ­è¿æ¥ï¼Œå…è®¸ä¸åŒçº§åˆ«çš„ç‰¹å¾åœ¨æœ€åä¸€ä¸ªé‡å»ºæ¨¡å—ä¸­æ›´å¥½çš„è¿›è¡Œèšåˆã€‚</li>
<li><!--åŒæ ·ï¼Œå…·ä½“çš„ä½œç”¨éœ€è¦é€šè¿‡å®éªŒéªŒè¯ï¼Œè¿™ä¸ªConvå±‚æ˜¯å¦æ˜¯å¿…è¦çš„ã€‚--></li>
</ul></li>
</ul>
<h3 id="é«˜è´¨é‡å›¾åƒä¿®å¤-hq-image-reconstruction">3ï¼‰é«˜è´¨é‡å›¾åƒä¿®å¤ (HQ
Image Reconstruction)ï¼š</h3>
<ul>
<li><strong>æ¦‚è¿°</strong>ï¼šæ ¹æ®<strong>æµ…å±‚ä¸æ·±å±‚ç‰¹å¾å›¾</strong>ç”Ÿæˆ<strong>é«˜è´¨é‡å›¾åƒ</strong>ï¼Œæµ…å±‚ç‰¹å¾è´Ÿè´£åŒ…å«ä½é¢‘ä¿¡æ¯ï¼Œæ·±å±‚ç‰¹å¾èšç„¦äºæ¢å¤ä¸¢å¤±çš„é«˜é¢‘ä¿¡æ¯ã€‚</li>
<li><strong>è¾“å…¥</strong>ï¼š<strong>æµ…å±‚ç‰¹å¾å›¾</strong> <span
class="math inline">\(F_{0}\in R^{H\times W\times C_{embed}}\)</span>å’Œ
<strong>æ·±å±‚ç‰¹å¾å›¾</strong> <span class="math inline">\(F_{DF}\in
R^{H\times W\times C_{embed}}\)</span></li>
<li><strong>è¾“å‡º</strong>ï¼š<strong>é«˜è´¨é‡é‡å»ºå›¾åƒ(RHQ)</strong> <span
class="math inline">\(I_{RHQ}\in R^{H&#39;\times W&#39;\times
C_{out}}\)</span></li>
<li><strong>ç½‘ç»œç»“æ„</strong>ï¼šå·ç§¯ç½‘ç»œ</li>
<li><strong>å…¬å¼è¡¨è¾¾</strong>ï¼š<span
class="math inline">\(I_{RHQ}=H_{REC}(F_{0}+F_{DF})\)</span>ï¼Œå…¶ä¸­<span
class="math inline">\(H_{REC}\)</span>ä¸ºé‡å»ºæ¨¡å—å‡½æ•°ï¼Œå…¶å®åœ¨å®ç°ä¸Šå°±æ˜¯ä¸€ä¸ªå·ç§¯æ¨¡å—</li>
<li><strong>å®ç°ç»†èŠ‚ï¼ˆå®˜æ–¹ä»£ç ï¼‰</strong>
<ul>
<li><span
class="math inline">\(H_{REC}(F_{0}+F_{DF})\)</span>ä¸­çš„â€œ+â€å·å°±æ˜¯æ•°å­¦æ„ä¹‰ä¸Šçš„ç›¸åŠ ï¼Œæœ¬è´¨ä¸Šæ˜¯æ®‹å·®è¿æ¥</li>
<li><strong>å·ç§¯æ“ä½œ</strong>
<ul>
<li>æ ¹æ®ä»»åŠ¡ä¸åŒåˆ†ä¸ºå››ç§å·ç§¯æ“ä½œï¼š
<ol type="1">
<li>å¯¹äºå›¾åƒå»å™ªå’ŒJPEGæ ¼å¼å‹ç¼©å›¾åƒä¿®å¤ï¼Œé‡‡ç”¨çš„æ˜¯å•å±‚ï¼Œè¾“å…¥ç»´åº¦ä¸º<span
class="math inline">\(C_{embed}=96\)</span>ï¼Œè¾“å‡ºç»´åº¦ä¸º<span
class="math inline">\(C_{out}=3\)</span>ï¼Œæ­¥é•¿<span
class="math inline">\(stride=1\)</span>ï¼Œå¡«å……<span
class="math inline">\(pading=1\)</span>çš„<span
class="math inline">\(3\times3\)</span>å·ç§¯ç½‘ç»œï¼ŒåŒæ—¶å·ç§¯è¾“å‡ºä¸è¾“å…¥ä½¿ç”¨æ®‹å·®è¿æ¥ï¼Œå³<span
class="math inline">\(H_{REC}(X)=H_{CONV}(X)+X\)</span></li>
<li>å¯¹äºä¸€èˆ¬å›¾åƒSRï¼Œå·ç§¯åˆ†ä¸ºä¸‰å±‚
<ul>
<li>ç¬¬ä¸€å±‚è¿›è¡Œç‰¹å¾é™ç»´ï¼Œä¸ºè¾“å…¥ç»´åº¦ä¸º<span
class="math inline">\(C_{embed}=96\)</span>ï¼Œè¾“å‡ºç»´åº¦ä¸º<span
class="math inline">\(C_{feat}=64\)</span>ï¼Œæ­¥é•¿<span
class="math inline">\(stride=1\)</span>ï¼Œå¡«å……<span
class="math inline">\(pading=1\)</span>çš„<span
class="math inline">\(3\times3\)</span>å·ç§¯ç½‘ç»œï¼Œå¹¶å¯¹å·ç§¯è¾“å‡ºè¿›è¡ŒLeakyReLU</li>
<li>ç¬¬äºŒå±‚è¿›è¡Œä¸Šé‡‡æ ·ï¼Œå…ˆé€šè¿‡è¾“å…¥ç»´åº¦ä¸º<span
class="math inline">\(C_{feat}=64\)</span>ï¼Œè¾“å‡ºç»´åº¦ä¸º<span
class="math inline">\(4\times C_{feat}\)</span>ï¼Œæ­¥é•¿<span
class="math inline">\(stride=1\)</span>ï¼Œå¡«å……<span
class="math inline">\(pading=1\)</span>çš„<span
class="math inline">\(3\times3\)</span>å·ç§¯ç½‘ç»œï¼Œç„¶åå¯¹å·ç§¯è¾“å‡ºè¿›è¡ŒPixelShuffle</li>
<li>ç¬¬ä¸‰å±‚ä¸ºè¾“å…¥ç»´åº¦ä¸º<span
class="math inline">\(C_{feat}=64\)</span>ï¼Œè¾“å‡ºç»´åº¦ä¸º<span
class="math inline">\(C_{out}=3\)</span>ï¼Œæ­¥é•¿<span
class="math inline">\(stride=1\)</span>ï¼Œå¡«å……<span
class="math inline">\(pading=1\)</span>çš„<span
class="math inline">\(3\times3\)</span>å·ç§¯ç½‘ç»œ</li>
</ul></li>
<li>å¯¹äºè½»é‡å›¾åƒSRï¼Œä¸ºäº†å‡å°‘å‚æ•°ï¼Œé‡‡ç”¨çš„æ˜¯å•å±‚ï¼Œè¾“å…¥ç»´åº¦ä¸º<span
class="math inline">\(C_{feat}=64\)</span>ï¼Œè¾“å‡ºç»´åº¦ä¸º<span
class="math inline">\(Scale^2\times C_{out}\)</span>ï¼Œæ­¥é•¿<span
class="math inline">\(stride=1\)</span>ï¼Œå¡«å……<span
class="math inline">\(pading=1\)</span>çš„<span
class="math inline">\(3\times3\)</span>å·ç§¯ç½‘ç»œï¼Œç„¶åå¯¹å·ç§¯è¾“å‡ºè¿›è¡ŒPixelShuffle</li>
<li>å¯¹äºçœŸå®ä¸–ç•Œå›¾åƒSRï¼Œä½¿ç”¨å¤šå±‚å·ç§¯
<ul>
<li>ç¬¬ä¸€å±‚è¿›è¡Œç‰¹å¾é™ç»´ï¼Œä¸ºè¾“å…¥ç»´åº¦ä¸º<span
class="math inline">\(C_{embed}=96\)</span>ï¼Œè¾“å‡ºç»´åº¦ä¸º<span
class="math inline">\(C_{feat}=64\)</span>ï¼Œæ­¥é•¿<span
class="math inline">\(stride=1\)</span>ï¼Œå¡«å……<span
class="math inline">\(pading=1\)</span>çš„<span
class="math inline">\(3\times3\)</span>å·ç§¯ç½‘ç»œï¼Œå¹¶å¯¹å·ç§¯è¾“å‡ºè¿›è¡ŒLeakyReLu</li>
<li>ç¬¬äºŒã€ä¸‰å±‚è¿›è¡Œä¸Šé‡‡æ ·ï¼Œå…ˆä½¿ç”¨torch.nn.functional.interpolateå‡½æ•°è¿›è¡ŒæŒ‡å®š<span
class="math inline">\(Scale\)</span>çš„æœ€è¿‘é‚»ä¸Šé‡‡æ ·ï¼Œç„¶åé€šè¿‡è¾“å…¥è¾“å‡ºç»´åº¦ä¸º<span
class="math inline">\(C_{feat}=64\)</span>ï¼Œæ­¥é•¿<span
class="math inline">\(stride=1\)</span>ï¼Œå¡«å……<span
class="math inline">\(pading=1\)</span>çš„<span
class="math inline">\(3\times3\)</span>å·ç§¯ç½‘ç»œï¼Œå¹¶å¯¹å·ç§¯è¾“å‡ºè¿›è¡ŒLeakyReLU</li>
<li>ç¬¬å››å±‚ä¸ºè¾“å…¥è¾“å‡ºç»´åº¦ä¸º<span
class="math inline">\(C_{feat}=64\)</span>ï¼Œæ­¥é•¿<span
class="math inline">\(stride=1\)</span>ï¼Œå¡«å……<span
class="math inline">\(pading=1\)</span>çš„<span
class="math inline">\(3\times3\)</span>å·ç§¯ç½‘ç»œï¼Œå¹¶å¯¹å·ç§¯è¾“å‡ºè¿›è¡ŒLeakyReLU</li>
<li>ç¬¬äº”å±‚ä¸ºè¾“å…¥ç»´åº¦ä¸º<span
class="math inline">\(C_{feat}=64\)</span>ï¼Œè¾“å‡ºç»´åº¦ä¸º<span
class="math inline">\(C_{out}=3\)</span>ï¼Œæ­¥é•¿<span
class="math inline">\(stride=1\)</span>ï¼Œå¡«å……<span
class="math inline">\(pading=1\)</span>çš„<span
class="math inline">\(3\times3\)</span>å·ç§¯ç½‘ç»œ</li>
</ul></li>
</ol></li>
</ul></li>
</ul></li>
</ul>
<h3 id="å…¶ä»–ç»†èŠ‚">4ï¼‰ å…¶ä»–ç»†èŠ‚ï¼š</h3>
<p>â€‹
ä¸Šè¿°æ€»çš„ç»“æ„ä¸­çœ‹åˆ°çš„<strong>Skip-Connection</strong>ï¼Œæ˜¯èƒ½å¤Ÿå°†æµ…å±‚ç‰¹å¾ç›´æ¥è¾“å…¥åˆ°é‡å»ºæ¨¡å—ä¸­ï¼Œè®©æ·±å±‚ç‰¹å¾æå–æ¨¡å—ä¸“æ³¨äºé«˜é¢‘ä¿¡æ¯çš„æå–ä»¥åŠèƒ½å¤Ÿè·å¾—æ›´ç¨³å®šçš„è®­ç»ƒã€‚</p>
<h3 id="ä½¿ç”¨çš„æŸå¤±å‡½æ•°æ ¹æ®ä»»åŠ¡æƒ…å†µç•¥æœ‰ä¸åŒ">5ï¼‰
ä½¿ç”¨çš„æŸå¤±å‡½æ•°ï¼šï¼ˆæ ¹æ®ä»»åŠ¡æƒ…å†µç•¥æœ‰ä¸åŒï¼‰</h3>
<ul>
<li><p>å¯¹äºä¸€èˆ¬å›¾åƒä»¥åŠè½»é‡å›¾åƒSRï¼Œä½¿ç”¨<strong>L1 Loss</strong>,<span
class="math inline">\(I_{RHQ}\)</span>ä¸ºé‡å»ºçš„é«˜è´¨é‡å›¾åƒï¼Œ<span
class="math inline">\(I_{HQ}\)</span>ä¸ºGround_Truthé«˜è´¨é‡å›¾åƒ</p>
<ul>
<li><span class="math inline">\(L = \sqrt{||I_{RHQ} - I_{HQ}
||_1}\)</span></li>
</ul></li>
<li><p>å¯¹äºçœŸå®ä¸–ç•Œå›¾åƒSRï¼Œä¼šç»“åˆ<strong>Pixel
Loss</strong>å’Œ<strong>GAN Loss</strong>ä»¥åŠ<strong>Percepture
Loss</strong>æ¥æå‡ç”Ÿæˆè´¨é‡</p></li>
<li><p>å¯¹äºå»å™ªå’ŒJPEGå‹ç¼©ä»»åŠ¡è€Œè¨€ï¼Œæˆ‘ä»¬ä½¿ç”¨<strong>Charbonnier
Loss</strong>è¿›è¡Œä¼˜åŒ–</p>
<ul>
<li><span class="math inline">\(\sqrt{||I_{RHQ}-I_{HQ}||^2 +
\varepsilon^2 }\)</span>, <span
class="math inline">\(\varepsilon\)</span>æ˜¯ä¸ªå¸¸æ•°ï¼Œé€šå¸¸è¢«è®¾ç½®ä¸º<span
class="math inline">\(10^{-3}\)</span></li>
</ul></li>
</ul>
]]></content>
      <categories>
        <category>â“¶ è®ºæ–‡é˜…è¯»ç¬”è®°</category>
        <category>CVç›¸å…³è®ºæ–‡</category>
      </categories>
      <tags>
        <tag>Swin Transformer</tag>
        <tag>Image Restoration</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŠUformer A General U-Shaped Transformer for Image Restorationã€‹è®ºæ–‡ç¬”è®°</title>
    <url>/2022/01/13/56f3e5f0e0f5/</url>
    <content><![CDATA[<h3
id="è®ºæ–‡åç§°uformer-a-general-u-shaped-transformer-for-image-restoration">è®ºæ–‡åç§°ï¼šã€ŠUformer:
A General U-Shaped Transformer for Image Restorationã€‹</h3>
<h3 id="è®ºæ–‡åœ°å€-httpsarxiv.orgabs2106.03106">è®ºæ–‡åœ°å€ï¼š
https://arxiv.org/abs/2106.03106</h3>
<h2 id="å…³é”®è¯">1ã€å…³é”®è¯ï¼š</h2>
<p>â€‹ å›¾åƒä¿®å¤ï¼ˆImage Restorationï¼‰ã€ç±»UNetç»“æ„ã€Transformer</p>
<h2 id="é¢†åŸŸèƒŒæ™¯å›¾åƒä¿®å¤">2ã€é¢†åŸŸèƒŒæ™¯â€”å›¾åƒä¿®å¤ï¼š</h2>
<p>â€‹
å›¾åƒä¿®å¤æ˜¯ä¸€ä¸ªç»å…¸é—®é¢˜ï¼Œä¸€èˆ¬è€Œè¨€å…¶ç›®æ ‡ä¸ºä»ä½åˆ†è¾¨ç‡çš„å›¾åƒä¸­æ¢å¤å‡ºé«˜åˆ†è¾¨ç‡çš„å›¾åƒã€‚é€šå¸¸å¯ä»¥ç”¨äºè¶…åˆ†è¾¨ç‡ã€å›¾åƒå»å™ªï¼Œä»¥åŠJPEGå‹ç¼©é¬¼å½±å»é™¤ç­‰åº”ç”¨ã€‚æ­¤ç¯‡æ–‡ç« å°†Swin
Transformeråº”ç”¨äºå›¾åƒä¿®å¤é¢†åŸŸä¸­ã€‚</p>
<h2 id="å…ˆå‰å·¥ä½œæè¿°ä¸æ¯”è¾ƒ">3ã€å…ˆå‰å·¥ä½œæè¿°ä¸æ¯”è¾ƒï¼š</h2>
<p>â€‹ è¿‘å¹´æ¥å›¾åƒä¿®å¤å¾ˆå¥½ç»“æœçš„éƒ½æ˜¯åŸºäºå·ç§¯çš„ç½‘ç»œï¼Œä½†æ˜¯å·ç§¯ç½‘ç»œåœ¨long-range
dependenciesä¸Šä¾æ—§å­˜åœ¨å±€é™æ€§ã€‚åŒæ—¶ï¼Œæœ€è¿‘ä¹Ÿæœ‰å¾ˆå¤šæ–‡ç« ä½¿ç”¨transofmerå¯¹ä½åˆ†è¾¨ç‡çš„ç‰¹å¾å›¾è¿›è¡Œå¤„ç†ï¼ˆé™äºself-attentionçš„è®¡ç®—å¤æ‚åº¦ï¼‰ã€‚</p>
<h2 id="ä¸»è¦è®¾è®¡æ€æƒ³">4ã€ä¸»è¦è®¾è®¡æ€æƒ³ï¼š</h2>
<p>â€‹ è®ºæ–‡æ—¨åœ¨
åœ¨å¤šå°ºåº¦åˆ†è¾¨ç‡ä¸‹ï¼Œå»æ¢å¤æ›´å¤šçš„å›¾åƒç»†èŠ‚ã€‚UformeråŸºäºUNetï¼Œåªä¸è¿‡å°†æ‰€æœ‰çš„å·ç§¯å±‚æ›¿æ¢ä¸ºäº†Encoder-Decoderç»“æ„ï¼ŒåŒæ—¶ä¿ç•™äº†æ•´ä½“çš„Encoder-Decoderæ¶æ„ä»¥åŠskip-connectionsã€‚æ€»ä½“æ¥è¯´å°±æ˜¯ä½¿ç”¨TransformerBlock
æ„å»ºäº†ä¸€ä¸ªå±‚æ¬¡åŒ–çš„encoder-decoderç½‘ç»œã€‚</p>
<p>â€‹ <strong>2ä¸ªæ ¸å¿ƒè®¾è®¡</strong></p>
<p>â€‹ 1ã€<strong>LeWin Transformer Block</strong>( locally-enhanced window
Transformer block
),ä½¿ç”¨åˆ†å—çš„self-attetiondä»£æ›¿å…¨å±€çš„self-attentionï¼Œåœ¨æ•è·é«˜åˆ†è¾¨ç‡å›¾åƒçš„å±€éƒ¨ç‰¹å¾æ—¶ï¼Œå‡å°‘äº†è®¡ç®—é‡ã€‚</p>
<p>â€‹ 2ã€æå‡ºäº†<strong>å¯å­¦ä¹ çš„å¤šå°ºåº¦æ¢å¤è°ƒåˆ¶å™¨</strong>ï¼Œä»¥å¤šå°ºåº¦
<strong>spatial bias</strong>
çš„å½¢å¼å»åœ¨decoderçš„ä¸åŒå±‚ä¸Šè°ƒèŠ‚ç‰¹å¾ã€‚æ¥å¤„ç†ä¸åŒçš„å›¾åƒé€€åŒ–é—®é¢˜ï¼ˆæ¯”å¦‚è¯´è™šç„¦ã€è¿åŠ¨æ¨¡ç³Šç­‰ã€‚è¿™ä¸ªæ¨¡å—æœ¬èº«ç”±ä¸€ä¸ªå¤šå°ºåº¦çš„spatial
biasç»„æˆï¼Œç”¨æ¥åœ¨decoderçš„ä¸åŒå±‚çº§ä¸Šè°ƒæ•´ç‰¹å¾ã€‚æ›´å…·ä½“ä¸€ç‚¹çš„è¯ï¼Œå°±æ˜¯ä¸€ä¸ªå¯å­¦ä¹ çš„åŸºäºçª—å£çš„tensorå¼ é‡ï¼Œå’Œç‰¹å¾ç›´æ¥ç›¸åŠ ï¼Œä»è€Œæ¥è°ƒæ•´ç‰¹å¾èƒ½å¤Ÿæ¢å¤æ›´å¤šçš„ç»†èŠ‚ã€‚æ•´ä½“è€Œè¨€ï¼Œè¿™ä¸ªè°ƒåˆ¶å™¨å¯¹äºæ¢å¤å›¾åƒç»†èŠ‚è€Œè¨€æœ‰éå¸¸å¼ºçš„èƒ½åŠ›ï¼ŒåŒæ—¶åªå¸¦æ¥äº†ä¸€ç‚¹ç‚¹é¢å¤–çš„å‚æ•°å’Œè®¡ç®—ä»£ä»·ã€‚</p>
<h2 id="å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„">5ã€å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„ï¼š</h2>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220112112308268.png" /></p>
<h3 id="æ•´ä½“æ¶æ„overall-pipeline">1) æ•´ä½“æ¶æ„ï¼ˆOverall Pipelineï¼‰</h3>
<ul>
<li><strong>æ¦‚è¿°</strong>ï¼šUå‹å¸¦Skip-Connectionçš„Encoder-Decoderç½‘ç»œï¼ŒåŸºäºUNetç»“æ„ï¼Œä½†æ˜¯å°†UNetä¸­çš„æ‰€æœ‰å·ç§¯å±‚éƒ½æ›¿æ¢æˆäº†LeWinBlocksã€‚</li>
<li><strong>è¾“å…¥</strong>ï¼šé€€åŒ–å›¾åƒ <span class="math inline">\(I \in
R^{3\times H\times W}\)</span></li>
<li><strong>è¾“å‡º</strong>ï¼šä¿®å¤å›¾åƒ <span
class="math inline">\(I^{&#39;} \in R^{3\times H\times W}\)</span>
<ul>
<li><span class="math inline">\(Residual \in R^{3\times H\times W
}\)</span></li>
<li><span class="math inline">\(I^{&#39;} = I + R e sidual\)</span></li>
</ul></li>
</ul>
<h3 id="input-projection">2) Input Projection</h3>
<ul>
<li><strong>æ¦‚è¿°</strong>ï¼šç”¨äºä»é€€åŒ–å›¾åƒä¸­æå–ä½å±‚çº§ä¿¡æ¯</li>
<li><strong>è¾“å…¥</strong>ï¼šé€€åŒ–å›¾åƒ <span class="math inline">\(I \in
R^{3\times H\times W}\)</span></li>
<li><strong>è¾“å‡º</strong>ï¼šlow-level ç‰¹å¾å›¾ <span
class="math inline">\(X_0\)</span></li>
<li><strong>ç½‘ç»œç»“æ„</strong>ï¼š
<ul>
<li><span class="math inline">\(3\times 3\)</span>å·ç§¯å±‚ +
LeakyReLUæ¿€æ´»å‡½æ•°</li>
</ul></li>
</ul>
<h3 id="encoder---one-stage-encoderä¸­æ€»å…±kä¸ªstage">3) Encoder - One
Stage ï¼ˆ Encoderä¸­æ€»å…±Kä¸ªStage ï¼‰</h3>
<ul>
<li><strong>æ¦‚è¿°</strong>ï¼šç”¨äºä»é€€åŒ–å›¾åƒä¸­æå–ä½å±‚çº§ä¿¡æ¯</li>
<li><strong>è¾“å…¥</strong>ï¼šç‰¹å¾å›¾ <span
class="math inline">\(X_{l-1}\)</span></li>
<li><strong>è¾“å‡º</strong>ï¼šç¬¬<span
class="math inline">\(l\)</span>ä¸ªé˜¶æ®µçš„è¾“å‡ºç‰¹å¾å›¾ <span
class="math inline">\(X_l \in R^{2^lC \times \frac{H}{2^l} \times
\frac{W}{2^l}}\)</span></li>
<li><strong>ç½‘ç»œç»“æ„</strong>ï¼š
<ul>
<li><span class="math inline">\({N_l}\)</span>ä¸ª
LeWinBlocksçš„å åŠ ï¼Œä»¥åŠä¸€ä¸ªä¸‹é‡‡æ ·å±‚ï¼ˆ$4 $å·ç§¯ $stride$2ï¼‰</li>
</ul></li>
<li><strong>å®ç°ç»†èŠ‚ï¼ˆå®˜æ–¹ä»£ç ï¼‰</strong>
<ul>
<li>LeWinBlocks
<ul>
<li>å°†2Dç©ºé—´ç‰¹å¾å›¾å…ˆè¿›è¡Œpatchåˆ’åˆ†ï¼Œç„¶åå±•å¹³ï¼Œå…·ä½“è§å</li>
</ul></li>
<li>Down Samplingï¼šï¼ˆchannel ç¿»å€ï¼Œç‰¹å¾å›¾å®½é«˜ å‡åŠï¼‰
<ul>
<li>Reshape å±•å¹³çš„ç‰¹å¾ è‡³ 2Dçš„ç©ºé—´ç‰¹å¾å›¾ï¼Œç„¶åä½¿ç”¨ <span
class="math inline">\(4 \times 4\)</span>å·ç§¯
$stride$2ï¼Œå¯¹å…¶è¿›è¡Œå·ç§¯</li>
</ul></li>
</ul></li>
<li><strong>æ„ä¹‰</strong>ï¼šåœ¨ä¸€ééçš„ä¸‹é‡‡æ ·ä¸Lewin Transformer
Blocksä¸­æå–ç‰¹å¾ä¿¡æ¯ï¼ŒLewin Transformer
Blockå¯ä»¥æ›´å¥½çš„æå–è¿œè·ç¦»çš„ç›¸å…³æ€§ä¾èµ–ä¿¡æ¯ï¼Œå¹¶ä¸”æœ‰æ•ˆçš„é™ä½è®¡ç®—å¤æ‚åº¦</li>
</ul>
<h3 id="bottleneck-stage">4) BottleNeck Stage</h3>
<ul>
<li><strong>æ¦‚è¿°</strong>ï¼šç”¨äºæå–æ›´é•¿è·ç¦»çš„ä¿¡æ¯ï¼Œç”šè‡³æ˜¯å…¨å±€çš„ä¿¡æ¯</li>
<li><strong>è¾“å…¥</strong>ï¼šç‰¹å¾å›¾ <span
class="math inline">\(X_{K}\)</span></li>
<li><strong>è¾“å‡º</strong>ï¼šåºåˆ—å‘é‡ V</li>
<li><strong>ç½‘ç»œç»“æ„</strong>ï¼š
<ul>
<li><span class="math inline">\({N_?}\)</span>ä¸ª LeWinBlocksçš„å åŠ </li>
</ul></li>
<li><strong>å®ç°ç»†èŠ‚ï¼ˆå®˜æ–¹ä»£ç ï¼‰</strong>
<ul>
<li>LeWinBlocks
<ul>
<li>å°†2Dç©ºé—´ç‰¹å¾å›¾å…ˆè¿›è¡Œpatchåˆ’åˆ†ï¼Œç„¶åå±•å¹³ï¼Œå…·ä½“è§å</li>
</ul></li>
</ul></li>
<li><strong>æ„ä¹‰</strong>ï¼šç”±äºå‰é¢å·²ç»è¿›è¡Œäº†è®¸å¤šæ¬¡çš„ç‰¹å¾æå–ä»¥åŠä¸‹é‡‡æ ·äº†ï¼Œæ‰€ä»¥åœ¨æ­¤å¤„å†å¢åŠ ä¸€ä¸ªLeWinBlocksçš„æ¨¡å—ï¼Œèƒ½å¤Ÿæ•è·åˆ°æ›´é•¿è·ç¦»çš„ä¿¡æ¯ï¼Œç”šè‡³æ˜¯èƒ½å¤Ÿæ•è·å…¨å±€çš„ä¿¡æ¯ã€‚</li>
</ul>
<p><!-- ä½†æ˜¯è¿™ä¸ªæ¨¡å—éš¾é“ä¸å¯ä»¥ç”¨Encoderé˜¶æ®µæ›´å¤§çš„K æ¥å¼¥è¡¥å—ï¼Ÿéœ€è¦å®éªŒ --></p>
<h3
id="decoder---one-stage-decoderä¸­æ€»å…±kä¸ªstageä¸encoderä¸€è‡´">5ï¼‰Decoder -
One Stage ï¼ˆDecoderä¸­æ€»å…±Kä¸ªStageï¼Œä¸Encoderä¸€è‡´ ï¼‰</h3>
<ul>
<li><strong>æ¦‚è¿°</strong>ï¼šç”¨äºå°å°ºå¯¸çš„ç‰¹å¾å›¾ä¸­é€æ¸é‡å»ºæ¢å¤ç‰¹å¾ä¿¡æ¯</li>
<li><strong>è¾“å…¥</strong>ï¼š1ç»´ç‰¹å¾åºåˆ— <span
class="math inline">\(V_{in}\)</span></li>
<li><strong>è¾“å‡º</strong>ï¼š1ç»´ç‰¹å¾è¾“å‡ºåºåˆ— <span
class="math inline">\(V_{out}\)</span></li>
<li><strong>ç½‘ç»œç»“æ„</strong>ï¼š
<ul>
<li>ä¸€ä¸ªä¸Šé‡‡æ ·å±‚ï¼ˆ$2 $åå·ç§¯ $stride$2ï¼‰ä»¥åŠ <span
class="math inline">\({N_l}\)</span>ä¸ª LeWinBlocksçš„å åŠ </li>
</ul></li>
<li><strong>å®ç°ç»†èŠ‚ï¼ˆå®˜æ–¹ä»£ç ï¼‰</strong>
<ul>
<li>Up Samplingï¼šï¼ˆchannel å‡åŠï¼Œç‰¹å¾å›¾å®½é«˜ ç¿»å€ï¼‰
<ul>
<li>å…ˆå°†è¾“å…¥çš„ç‰¹å¾åºåˆ— Reshape æˆ
2Dç‰¹å¾å›¾ï¼Œç„¶åè¿›è¡Œä¸Šé‡‡æ ·ï¼Œå¾—åˆ°æ–°çš„2Dç‰¹å¾å›¾</li>
</ul></li>
<li>Residual Moduleï¼š
<ul>
<li>Up Sampling å®Œä»¥åå¾—åˆ°çš„2Dç‰¹å¾å›¾éœ€è¦å’Œå¯¹åº”Encoder-Stageä¸­
è¾“å‡ºçš„2Dç‰¹å¾å›¾è¿›è¡ŒConcatï¼Œç„¶åå¾—åˆ°ä¸€ä¸ªæ–°çš„2Dç‰¹å¾å›¾ã€‚</li>
</ul></li>
<li>LeWinBlocks
<ul>
<li>å°†æ®‹å·®Concatå¾—åˆ°çš„2Dç©ºé—´ç‰¹å¾å›¾å…ˆè¿›è¡Œpatchåˆ’åˆ†ï¼Œç„¶åå±•å¹³ï¼Œå…·ä½“è§å</li>
</ul></li>
</ul></li>
<li><strong>æ„ä¹‰</strong>ï¼šåœ¨ä¸€ééçš„ä¸Šé‡‡æ ·ä¸Lewin Transformer
Blocksä¸­é‡å»ºç‰¹å¾ä¿¡æ¯ã€‚</li>
</ul>
<h3 id="output-projection">6) Output Projection</h3>
<ul>
<li><strong>æ¦‚è¿°</strong>ï¼šç”¨äºå°†è¾“å‡ºçš„åºåˆ—ï¼Œå˜æ¢æˆ2Dç‰¹å¾å›¾åï¼Œå† æ˜ å°„è‡³
3é€šé“çš„æ®‹å·®å›¾åƒï¼Œå‡†å¤‡å’ŒåŸå›¾åƒå åŠ ã€‚</li>
<li><strong>è¾“å…¥</strong>ï¼š1ç»´ç‰¹å¾è¾“å‡ºåºåˆ— <span
class="math inline">\(V_{out}\)</span></li>
<li><strong>è¾“å‡º</strong>ï¼šæ®‹å·®å›¾åƒ <span class="math inline">\(Residual
\in R^{3\times H\times W }\)</span></li>
<li><strong>ç½‘ç»œç»“æ„</strong>ï¼š
<ul>
<li><span class="math inline">\(3\times 3\)</span>å·ç§¯å±‚</li>
</ul></li>
<li><strong>å®ç°ç»†èŠ‚ï¼ˆå®˜æ–¹ä»£ç ï¼‰</strong>ï¼š
<ul>
<li>å…ˆå°† æœ€åä¸€ä¸ªDecoder Stageè¾“å‡ºçš„ åºåˆ— <span
class="math inline">\(V_{out}\)</span>Reshapeæˆ2Dçš„ç‰¹å¾å›¾ï¼Œç„¶ååº”ç”¨<span
class="math inline">\(3 \times
3\)</span>çš„å·ç§¯å±‚ï¼Œæ¥è·å¾—ä¸€ä¸ªæ®‹å·®å›¾åƒ</li>
</ul></li>
</ul>
<h3 id="æœ€ç»ˆè¾“å‡º-losså‡½æ•°">7ï¼‰æœ€ç»ˆè¾“å‡º &amp; Losså‡½æ•°</h3>
<ul>
<li><strong>æ¦‚è¿°</strong>ï¼šå°†OutPut Projection å¾—åˆ°çš„Residual Image å’Œ
åŸæ¥çš„è¾“å…¥å›¾åƒç›¸åŠ ï¼Œå¾—åˆ° æœ€ç»ˆçš„ä¿®å¤å›¾åƒã€‚</li>
<li><strong>Loss</strong>ï¼šä½¿ç”¨ <strong>Charbonnier Loss</strong>ï¼Œ<span
class="math inline">\(I^{&#39;}\)</span>æ˜¯ ground-truth å›¾åƒ
<ul>
<li><span class="math display">\[l(I^{&#39;},\hat I) = \sqrt{||I^{&#39;}
- \hat I||^2 + \varepsilon^2}\]</span></li>
</ul></li>
</ul>
<h3 id="lewin-transformer-block">8ï¼‰LeWin Transformer Block</h3>
<ul>
<li><p><strong>æ¦‚è¿°</strong>ï¼šç”±W-MSA ä»¥åŠLeFFä¸¤ä¸ªæ¨¡å—ç»„æˆ</p></li>
<li><p><strong>è¾“å…¥</strong>ï¼š2Dç‰¹å¾å›¾</p></li>
<li><p><strong>è¾“å‡º</strong>ï¼š2Dç‰¹å¾å›¾</p></li>
<li><p><strong>ç½‘ç»œç»“æ„</strong>ï¼šå…¬å¼è¡¨è¾¾ï¼š</p>
<ul>
<li><span class="math inline">\(X_{l}^{&#39;} = W-MSA(LN(X_{l-1})) +
X_{l-1}\)</span><strong>W-MSA æ¨¡å—çš„è¾“å‡º</strong></li>
<li><span class="math inline">\(X_l = LeFF(LN(X_l^{&#39;})) +
X_l^{&#39;}\)</span>**LeFFæ¨¡å—çš„è¾“å‡º*</li>
</ul></li>
<li><p><strong>å®ç°ç»†èŠ‚ï¼ˆå®˜æ–¹ä»£ç ï¼‰</strong>ï¼š</p>
<ul>
<li><p>W-MSA ä¸ Vision Transformerä¸­ä¸€è‡´</p></li>
<li><p>ä½œè€…è®ºæ–‡ä¸­è¯´å°è¯•äº†ç§»åŠ¨çª—å£ï¼Œä½†æ˜¯å¸¦æ¥çš„ç»“æœå¥½åå¢é•¿å¾®ä¹å…¶å¾®ï¼Œè¯´æ˜ï¼šåœ¨å›¾åƒä¿®å¤é¢†åŸŸï¼Œçª—å£ä¸çª—å£ä¹‹é—´çš„ä¿¡æ¯äº¤äº’å¹¶ä¸æ˜¯å¾ˆé‡è¦ã€‚å›¾åƒä¿®å¤é¢†åŸŸæ¯”è¾ƒæ³¨é‡å±€éƒ¨çš„ä¿¡æ¯äº¤äº’ï¼Ÿ</p></li>
<li><p>LeFFæ¨¡å—ç»“æ„ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/æˆªå±2022-01-12%20ä¸‹åˆ3.31.12.png" /></p>
<ul>
<li>1ã€å¯¹äºæ¯ä¸ªTokenï¼Œåº”ç”¨ä¸€ä¸ªLinear Projectionï¼Œå¢åŠ ç‰¹å¾channel</li>
<li>2ã€å°†tokens Reshape æˆ 2D ç‰¹å¾å›¾ï¼Œç”¨ <span class="math inline">\(3
\times 3\)</span>depth-wise convolutional æ•è·å±€éƒ¨ä¿¡æ¯</li>
<li>3ã€å†å°†2Dç‰¹å¾å›¾å±•å¹³å›tokensï¼Œå†åº”ç”¨ä¸€ä¸ªLinear
Projectionï¼Œç¼©å‡ç‰¹å¾channel</li>
<li>åœ¨æ¯ä¸€ä¸ªLinear Projection / Convolution åéƒ½ä¼šåº”ç”¨
GELUæ¿€æ´»å‡½æ•°ã€‚</li>
</ul></li>
</ul></li>
<li><p><strong>æ„ä¹‰</strong>ï¼šè§£å†³äº†å¦‚ä¸‹ä¸¤ä¸ªé—®é¢˜
1ï¼‰å…¨å±€è®¡ç®—self-attentionå¤æ‚åº¦å¤ªé«˜
2ï¼‰åœ¨æ•æ‰å±€éƒ¨çš„ä¾èµ–å…³ç³»æ—¶æœ‰é™åˆ¶ã€‚</p></li>
</ul>
<h3 id="multi-scale-restoration-modulator">9ï¼‰Multi-Scale Restoration
Modulator</h3>
<ul>
<li><strong>æ¦‚è¿°</strong>ï¼šå› ä¸ºä¸åŒçš„å›¾åƒæœ‰ä¸åŒçš„æ··ä¹±æ®‹å·®å½¢å¼ï¼Œæ¯”å¦‚æ¨¡ç³Šã€å™ªéŸ³ã€ä¸‹é›¨ç­‰ç­‰ï¼Œä¸ºäº†æ›´å¥½çš„åº”å¯¹å„ç§ä¸åŒçš„ä¿®å¤ä»»åŠ¡ï¼Œæå‡ºäº†è¿™ä¸ªlight-weight
multi-scaleçš„æ¢å¤æ¨¡å—ã€‚æ¥calibrateç‰¹å¾ä»¥åŠæ›´å¥½çš„ä¿®å¤ç»†èŠ‚ã€‚<br />
</li>
<li><strong>ç½‘ç»œç»“æ„</strong>ï¼š
<ul>
<li>åœ¨æ¯ä¸€ä¸ªLeWin Transformer Blockä¸­ï¼Œå…¶ä¸ºä¸€ä¸ª<span
class="math inline">\(M \times M \times
C\)</span>å¤§å°çš„å¼ é‡ï¼ŒMä¸ºwindow_sizeï¼ŒCä¸ºç‰¹å¾å›¾é€šé“æ•°ã€‚</li>
<li>åœ¨ä¸€ä¸ªLeWin Transformer Blockä¸­ï¼Œå¯¹äºæ‰€æœ‰å…¶åˆ†å‰²å‡ºæ¥çš„windowsï¼Œè¿™ä¸ª
è°ƒåˆ¶å™¨æ¨¡å—çš„å‚æ•°éƒ½æ˜¯å…±äº«çš„ã€‚</li>
</ul></li>
<li><strong>å½¢å¼</strong>ï¼šåœ¨Self-Attentionè®¡ç®—å‰ï¼Œå°†å…¶ç›´æ¥åŠ åˆ°æ¯ä¸€ä¸ªçª—å£çš„åƒç´ å€¼ä¸Šã€‚</li>
<li><strong>æ„ä¹‰</strong>ï¼šåœ¨Image Deblurring å’Œ Image
Denoisingé‡Œé¢ï¼Œä½œè€…è¯å®äº†è¯¥æ¨¡å—çš„é‡è¦æ€§ï¼Œèƒ½å¤Ÿæ›´å¥½çš„ä¿®å¤ç»†èŠ‚ã€‚ä¸€ç§å¯èƒ½çš„è§£é‡Šæ˜¯æ·»åŠ 
åœ¨è§£ç å™¨çš„æ¯ä¸ªé˜¶æ®µçš„modulatorå¯ä»¥å¯¹ç‰¹å¾å›¾è¿›è¡Œæ›´ä¸ºçµæ´»çš„è°ƒæ•´ï¼Œä»è€Œæé«˜æ¢å¤çš„ç»†èŠ‚çš„æ€§èƒ½è¡¨ç°ã€‚è¿™ä¸ªè·Ÿå…ˆå‰çš„StyleGANçš„æŸä¸ªæ¨¡å—ä¸€è‡´ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>â“¶ è®ºæ–‡é˜…è¯»ç¬”è®°</category>
        <category>CVç›¸å…³è®ºæ–‡</category>
      </categories>
      <tags>
        <tag>UNet</tag>
        <tag>Swin Transformer</tag>
        <tag>Image Restoration</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŠDeep Residual Fourier Transformation for Single Image Deblurringã€‹è®ºæ–‡ç¬”è®°</title>
    <url>/2022/01/14/92b79ab7b72b/</url>
    <content><![CDATA[<h4
id="è®ºæ–‡åç§°deep-residual-fourier-transformation-for-single-image-deblurring">è®ºæ–‡åç§°ï¼šã€ŠDeep
Residual Fourier Transformation for Single Image Deblurringã€‹</h4>
<h4 id="è®ºæ–‡åœ°å€-httpsarxiv.orgabs2111.11745">è®ºæ–‡åœ°å€ï¼š
https://arxiv.org/abs/2111.11745</h4>
<h2 id="å…³é”®è¯">1ã€å…³é”®è¯ï¼š</h2>
<p>â€‹ Image Deblurringã€FFTã€ResBlock</p>
<h2 id="é¢†åŸŸèƒŒæ™¯">2ã€é¢†åŸŸèƒŒæ™¯ï¼š</h2>
<p>â€‹ Image Deblurring
å›¾åƒå»æ¨¡ç³Šï¼Œå¾€å¾€æŒ‡ç”±éå¸¸è§„ç›¸æœºæˆ–ç‰©ä½“ç§»åŠ¨ã€å…‰å­¦è™šç„¦ç­‰å› ç´ å¼•èµ·çš„ä¸€ç§ç°è±¡ï¼Œä»–ä»¬ä¼šå¯¼è‡´çœ‹ä¸Šå»ä½è´¨é‡çš„å›¾åƒã€‚</p>
<h2 id="å…ˆå‰å·¥ä½œæè¿°ä¸æ¯”è¾ƒ">3ã€å…ˆå‰å·¥ä½œæè¿°ä¸æ¯”è¾ƒï¼š</h2>
<p>â€‹
åœ¨å…ˆå‰ï¼ŒDeepDeblurä½¿ç”¨CNNé…åˆResBlockï¼Œæ„å»ºäº†å¤šå°ºåº¦çš„ä¸€ä¸ªç»“æ„ï¼Œä½¿ç”¨Residual
Blockæ¥èšç„¦å­¦ä¹ æ¨¡ç³Šçš„å›¾åƒå’Œæ¸…æ™°çš„å›¾åƒå¯¹ä¹‹é—´çš„å·®è·ã€‚å¹¶ä¸”å–å¾—äº†éå¸¸å¥½çš„æ•ˆæœã€‚ä½†æ˜¯ï¼Œå®ƒä¹Ÿæœ‰ä¸€å®šçš„å±€é™æ€§ï¼š</p>
<ul>
<li><p>ResBlocké€šå¸¸åœ¨CNNä¸­è¿›è¡Œï¼Œå…¶æ„ŸçŸ¥åŸŸå®¹æ˜“å—åˆ°é™åˆ¶ï¼ˆå°¤å…¶æ˜¯åœ¨æ¯”è¾ƒå‰é¢çš„å±‚ï¼‰ï¼Œæ‰€ä»¥ResBlockçš„æœºåˆ¶å¾€å¾€ä¼šæ— æ³•å¯¹å…¨å±€çš„ä¿¡æ¯è¿›è¡Œå»ºæ¨¡ï¼ˆè¿™äº›ä¿¡æ¯å¾€å¾€åœ¨ä»ä¸€ä¸ªæ¨¡ç³Šå›¾åƒé‡å»ºä¸€ä¸ªæ¸…æ™°å›¾åƒçš„æ—¶å€™è¾ƒä¸ºæœ‰ç”¨ï¼‰</p></li>
<li><p>å…ˆå‰çš„æ–¹æ³•å¾ˆå°‘ä»é¢‘åŸŸçš„è§’åº¦å»å…³æ³¨æ¨¡ç³Šçš„å›¾åƒå’Œæ¸…æ™°çš„å›¾åƒä¹‹é—´çš„å…³ç³»ï¼Œè€Œæˆ‘ä»¬å‘ç°ï¼Œç›¸è¾ƒäºæ¨¡ç³Šå›¾åƒï¼Œæ¸…æ™°çš„å›¾åƒå¾€å¾€åŒ…å«æ›´å°‘çš„ä½é¢‘ä¿¡æ¯ä»¥åŠæ›´å¤šçš„é«˜é¢‘ä¿¡æ¯ã€‚</p></li>
<li><p>CNNåœ¨æ•è·å¯è§çš„ç‰¹å¾çš„æ—¶å€™å¾ˆå‰å®³ï¼Œä½†æ˜¯å¯¹äºé¢‘åŸŸçš„ç‰¹å¾è¾ƒå¼±ï¼Œå¹¶ä¸”ResBlock
å¯èƒ½å…·å¤‡è‰¯å¥½çš„é«˜é¢‘ä¿¡æ¯çš„å­¦ä¹ ï¼Œä½†æ˜¯å¯¹äºä½é¢‘ä¿¡æ¯çš„å­¦ä¹ è¾ƒå¼±ä¸€äº›ã€‚</p></li>
<li><p>è®ºæ–‡è´¡çŒ®</p>
<ul>
<li>è¿™ç¯‡è®ºæ–‡æå‡ºçš„ <em>Residual Fast Fourier Transform with Convolution
Block (Res FFT-Conv
Block)</em>æ—¢èƒ½å¤Ÿæ•è·é•¿è·ç¦»ä¿¡æ¯ï¼Œä¹Ÿèƒ½æ•è·çŸ­è·ç¦»ä¿¡æ¯ï¼ŒåŒæ—¶ä¹Ÿæœ‰èƒ½åŠ›è€ƒè™‘æ•´ä¸ªé«˜é¢‘å’Œä½é¢‘çš„ä¿¡æ¯ã€‚é€šè¿‡ä½¿ç”¨è¿™ä¸ªBlockè¿˜æå‡ºäº†ä¸€ä¸ªæ¡†æ¶ï¼Œå¯ä»¥åº”ç”¨äºå›¾åƒå»æ¨¡ç³Šé¢†åŸŸ
<em>Residual Fourier Transformation (DeepRFT) framework</em></li>
</ul></li>
</ul>
<h2 id="ä¸»è¦è®¾è®¡æ€æƒ³">4ã€ä¸»è¦è®¾è®¡æ€æƒ³ï¼š</h2>
<p>â€‹ æå‡ºäº†<strong>Residual Fast Fourier Transform with Convolution
Blockï¼ˆRes FFT-Conv
Blockï¼‰</strong>æ¨¡å—ï¼Œè¿™æ˜¯ä¸€ä¸ªå³æ’å³ç”¨çš„æ¨¡å—ã€‚è®¾è®¡æ€æƒ³å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul>
<li>Res FFT-Convæ¨¡å— å°†å›¾åƒä»ç©ºé—´åŸŸè½¬è‡³é¢‘åŸŸï¼Œç„¶åä½¿ç”¨<span
class="math inline">\(1 \times
1\)</span>çš„å·ç§¯å±‚è¿›è¡Œå·ç§¯ã€‚ç”±äºFFTçš„ç‰¹æ€§ï¼Œå°±èƒ½å¤Ÿä½¿å¾—åœ¨å¾ˆearlyçš„å±‚ä¸Šå·ç§¯çš„æ„ŸçŸ¥åŸŸå°±èƒ½åŒ…å«æ•´ä¸ªå›¾åƒã€‚å…¶èƒ½æ›´å¥½çš„æ•è·æ¨¡ç³Šå›¾åƒå’Œæ¸…æ™°å›¾åƒä¹‹é—´å…¨å±€çš„å·®å¼‚ã€‚</li>
</ul>
<p>â€‹ æå‡ºäº†<strong>Deep Residual Fourier Transformation (DeepRFT)
æ¡†æ¶</strong>ï¼Œä¸»è¦æ“ä½œå¦‚ä¸‹ï¼š</p>
<ul>
<li>DeepRFTæ¡†æ¶é€šè¿‡å°†Res
FFT-Convæ¨¡å—æ’å…¥è¿›MIMO-UNetè¿™ä¸ªç½‘ç»œç»“æ„ä¸­ï¼Œæ¥è¿›è¡Œå›¾åƒå»æ¨¡ç³Šçš„ä»»åŠ¡åŒæ—¶ï¼Œä½¿ç”¨DepthWise
Over-parameterized Conolutionä»¥åŠ é€Ÿç½‘ç»œè®­ç»ƒï¼Œè¾¾åˆ°å¾ˆå¥½çš„æ•ˆæœã€‚</li>
</ul>
<h2 id="å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„">5ã€å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„ï¼š</h2>
<h3 id="resblocklook-back">1) ResBlockï¼ˆLook Backï¼‰</h3>
<ul>
<li><p><strong>ç½‘ç»œç»“æ„</strong>ï¼šåŒ…å«ä¸¤ä¸ª<span class="math inline">\(3
\times 3\)</span>å·ç§¯å±‚ ä»¥åŠ ä¸€ä¸ª RELUæ¿€æ´»å‡½æ•°å±‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114155111786.png" alt="image-20220114155111786" style="zoom: 50%;" /></p></li>
<li><p><strong>æ„ä¹‰</strong>ï¼šèƒ½å¤Ÿè®­ç»ƒæ›´æ·±çš„ç½‘ç»œç»“æ„ã€æ‹¥æœ‰æ›´å¤§çš„æ„ŸçŸ¥åŸŸã€åŠ å¿«è®­ç»ƒæ—¶çš„æ”¶æ•›é€Ÿåº¦ã€‚å·ç§¯æ“ä½œèƒ½å¤Ÿå¾ˆå¥½çš„å­¦ä¹ åˆ°ä¸€äº›å›¾åƒä¸­çš„é«˜é¢‘ä¿¡æ¯ï¼Œå› ä¸ºå…¶ç»å¸¸èƒ½å¤Ÿä»å›¾åƒçš„edgesä¸­æ•è·ä¿¡æ¯ã€‚</p></li>
<li><p><strong>ç¼ºé™·</strong>ï¼š</p>
<ul>
<li>ç¼ºå°‘å¯¹ä½é¢‘ä¿¡æ¯çš„å»ºæ¨¡èƒ½åŠ›</li>
<li>è™½ç„¶æˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡å †å æ¨¡å—æ¥åŠ å¤§æ„ŸçŸ¥åŸŸï¼Œä½†æ˜¯å †å ä¼šå¸¦æ¥å·¨å¤§çš„è®¡ç®—å¤æ‚åº¦ã€‚ä¸”åœ¨å‰å‡ å±‚ç½‘ç»œä¸­ï¼Œæ„ŸçŸ¥åŸŸå¤§å°è¿˜æ˜¯éå¸¸å±€éƒ¨çš„ï¼Œç¼ºå°‘å…¨å±€çš„ä¿¡æ¯ã€‚</li>
</ul></li>
</ul>
<h3
id="residual-fast-fourier-transform-blockcurrent-substitute">2ï¼‰Residual
Fast Fourier Transform Blockï¼ˆCurrent Substituteï¼‰</h3>
<ul>
<li><p><strong>è¾“å…¥</strong>ï¼š<span class="math inline">\(Z \in R^{H
\times W \times C}\)</span></p></li>
<li><p><strong>ç½‘ç»œç»“æ„</strong>ï¼šä¸¤æ¡æ®‹å·®æµï¼š</p>
<ul>
<li>ä¸ResBlockä¸€è‡´çš„ç©ºé—´åŸŸä¿¡æ¯æ®‹å·®æµ</li>
<li>åŸºäºChannel-Wise
FFTçš„é¢‘åŸŸä¿¡æ¯æµï¼Œç”¨äºåœ¨é¢‘åŸŸä¸­æ•è·å›¾åƒçš„å…¨å±€ä¿¡æ¯ã€‚</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114155802644.png" alt="image-20220114155802644" style="zoom: 50%;" /></p></li>
<li><p><strong>æ ¸å¿ƒå®ç°-å…¬å¼è¡¨è¾¾</strong>ï¼ˆæœ€å·¦ä¾§çš„é¢‘åŸŸä¿¡æ¯æµï¼‰</p>
<ol type="1">
<li><span class="math inline">\(F(Z) \in C^{H \times W/2 \times
C}\)</span>,å¯¹è¾“å…¥çš„ç‰¹å¾Zï¼Œè®¡ç®— 2D real FFT
,ç”±äºå‚…ç«‹å¶å˜æ¢ä¸¤ä¾§å¯¹ç§°ï¼Œæ‰€ä»¥å®½æ–¹å‘å¯ä»¥ä»…ä¿ç•™ä¸€åŠ</li>
<li><span class="math inline">\(\widetilde{Z} = R(F(Z)) \odot_C
I((F(Z))) \in R^{H \times W/2 \times 2C}\)</span>,
å°†å‚…ç«‹å¶å˜æ¢åçš„å®æ•°éƒ¨åˆ†å’Œè™šæ•°éƒ¨åˆ†åœ¨Channelå±‚é¢Concatenateèµ·æ¥</li>
<li>ç»è¿‡2ä¸ª<span class="math inline">\(1 \times
1\)</span>çš„å·ç§¯å±‚å’Œ1ä¸ªReLUæ¿€æ´»å‡½æ•°å±‚</li>
<li><span class="math inline">\(Y^{fft} = F^{-1}(f^{real} + jf^{img})
\in R^{H \times W \times C}\)</span>åº”ç”¨é€†å‘2D real FFTæ¥å°† f <span
class="math inline">\((f^{real} \odot_C f^{img}
)\)</span>å˜æ¢å›ç©ºé—´åŸŸ</li>
<li><span class="math inline">\(Y = Y^{fft} + Y^{res} +
Z\)</span>ï¼Œæœ€ç»ˆè¾“å‡ºä½¿ç”¨ä¸‰ä¸ªç›¸åŠ çš„å½¢å¼å¾—åˆ°ã€‚</li>
</ol></li>
</ul>
<h3 id="deep-residual-fourier-transform-framework">3ï¼‰ Deep Residual
Fourier Transform Framework</h3>
<ul>
<li><p><strong>ç®€ä»‹</strong>ï¼šåŸºäºMIMO-UNetè¿›è¡Œçš„è®¾è®¡ï¼ŒMIMO-UNetæ˜¯ä¸€ä¸ªç”¨äºåšå¤šå°ºåº¦å›¾åƒå»æ¨¡ç³Šçš„å¤šè¾“å…¥å¤šè¾“å‡ºçš„U-Netæ¶æ„ã€‚å°†MIMO-UNetä¸­çš„æ‰€æœ‰ResBlocksç”¨è¯¥è®ºæ–‡æå‡ºçš„Res
FFT-Conv Blocksè¿›è¡Œæ›¿æ¢ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬é¢å¤–å°†æ‰€æœ‰çš„<span
class="math inline">\(1 \times
1\)</span>å·ç§¯å±‚ç”¨æˆ‘ä»¬æå‡ºçš„DO-Convæ›¿æ¢æ‰äº†ã€‚</p></li>
<li><p>MIMO-UNet è¯¦ç»†å¯ä»¥å‚è§è¿™ç¯‡è®ºæ–‡ï¼šã€ŠRethinking Coarse-to-Fine
Approach in Single Image Deblurringã€‹</p></li>
<li><p><strong>ç½‘ç»œç»“æ„</strong>ï¼š</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114170635133.png" alt="image-20220114170635133" style="zoom:50%;" /></p></li>
</ul>
<h3 id="depthwise-over-parameterized-convolution">4ï¼‰<strong>Depthwise
over-parameterized convolution</strong></h3>
<ul>
<li><p><strong>ç®€ä»‹</strong>ï¼šDO-Convå·²ç»åœ¨è®¸å¤šé«˜çº§åˆ«çš„è§†è§‰ä»»åŠ¡ä¸­æ˜¾ç¤ºå‡ºäº†å®ƒçš„æ½œåŠ›ï¼Œå®ƒåŠ é€Ÿäº†è®­ç»ƒå¹¶ä¸”é€šè¿‡ä½¿ç”¨æ·±åº¦å·ç§¯å¢å¼ºå·ç§¯å±‚æ¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚DO-Conv
æ˜¯ä¸¤ä¸ªç›¸é‚»çš„çº¿æ€§è¿ç®—ï¼Œåœ¨æ“ä½œæ—¶å¯ä»¥ç»„åˆæˆä¼ ç»Ÿçš„å·ç§¯è¿ç®—ã€‚</p></li>
<li><p>å…·ä½“å¯ä»¥å‚è§è¿™ç¯‡è®ºæ–‡ã€ŠDO-Conv: Depthwise Over-parameterized
Convolutionalã€‹</p></li>
<li><p>è®ºæ–‡é“¾æ¥ï¼šhttps://arxiv.org/pdf/2006.12030.pdf</p></li>
</ul>
<h3 id="loss-function">5ï¼‰ Loss Function</h3>
<ul>
<li><p><span class="math inline">\(Let\)</span><span
class="math inline">\({k \in {0,â€¦â€¦,K-1}}\)</span>ä¸º
DeepRFTçš„ç¬¬kä¸ªå±‚çº§</p></li>
<li><p><span class="math inline">\({\hat{S_k}}\)</span>ä¸º <span
class="math inline">\(k_{th}\)</span>é‡å»ºå›¾åƒ</p></li>
<li><p><span class="math inline">\(S_k ä¸º\)</span> <span
class="math inline">\(k_{th}\)</span>GroundTruthæ¸…æ™°çš„å›¾åƒ</p></li>
<li><p>è€ƒè™‘3ç§ï¼Œä¸åŒç±»å‹çš„Loss Functionï¼š</p>
<ul>
<li><p>Multi-Scale Charbonnier lossï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114171903475.png" alt="image-20220114171903475" style="zoom:50%;" /></p></li>
<li><p>Multi-Scale Edge lossï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114171944558.png" alt="image-20220114171944558" style="zoom:50%;" /></p></li>
<li><p>Multi-Scale Frequency Reconstruction (MSFR)
åœ¨é¢‘åŸŸè®¡ç®—ï¼ŒFTä»£è¡¨FFTæ“ä½œ</p></li>
</ul></li>
</ul>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114172909832.png" alt="image-20220114172909832" style="zoom: 50%;" /></p>
<ul>
<li>æœ€ç»ˆLosså‡½æ•°ï¼š<span class="math inline">\(L = L_{msc} +
\alpha_1L_{msed}+ \alpha_2L_{msfr}\)</span></li>
<li><span class="math inline">\(\alpha_1\)</span>ã€<span
class="math inline">\(\alpha_2\)</span>ä¸ºtradeoffå‚æ•°ï¼Œé€šå¸¸ä¸º0.05 å’Œ
0.01</li>
</ul>
]]></content>
      <categories>
        <category>â“¶ è®ºæ–‡é˜…è¯»ç¬”è®°</category>
        <category>CVç›¸å…³è®ºæ–‡</category>
      </categories>
      <tags>
        <tag>FFT</tag>
        <tag>Image Deblurring</tag>
        <tag>Residual Block</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŠHandWritting Transformersã€‹(æ›´æ–°ä¸­)</title>
    <url>/2022/01/26/8f68bd6cb4f4/</url>
    <content><![CDATA[<h4
id="è®ºæ–‡åç§°handwriting-transformers">è®ºæ–‡åç§°ï¼šã€Š<strong>Handwriting
Transformers</strong>ã€‹</h4>
<h4 id="è®ºæ–‡åœ°å€-httpsarxiv.orgabs2104.03964">è®ºæ–‡åœ°å€ï¼š
https://arxiv.org/abs/2104.03964</h4>
<h2 id="å…³é”®è¯">1ã€å…³é”®è¯ï¼š</h2>
<p>â€‹ æ‰‹å†™å­—ä½“ç”Ÿæˆï¼ˆè‹±æ–‡ï¼‰ã€GANã€Transformer</p>
<h2 id="é¢†åŸŸèƒŒæ™¯æ‰‹å†™å­—ä½“ç”Ÿæˆ">2ã€é¢†åŸŸèƒŒæ™¯â€”æ‰‹å†™å­—ä½“ç”Ÿæˆï¼š</h2>
<p>â€‹
è‡ªåŠ¨çš„æ‰‹å†™æ–‡å­—ç”Ÿæˆå¯¹äºä¸€äº›ä¹¦å†™éšœç¢çš„äººååˆ†é‡è¦ã€‚é€šå¸¸ä½¿ç”¨çš„æ–¹æ³•æ˜¯åˆ©ç”¨GANæ¥è¿›è¡Œç¦»çº¿çš„æ‰‹å†™æ–‡å­—å›¾åƒç”Ÿæˆã€‚</p>
<h2 id="å…ˆå‰å·¥ä½œæè¿°ä¸æ¯”è¾ƒ">3ã€å…ˆå‰å·¥ä½œæè¿°ä¸æ¯”è¾ƒï¼š</h2>
<p>â€‹ ä¸¤ç±»ç”Ÿæˆæ–¹æ³•ï¼š åŸºäºç¬”ç”»çš„åœ¨çº¿ç”Ÿæˆæ–¹æ³•ï¼ˆéœ€è¦è®°å½•æ—¶åºæ•°æ®ï¼‰ å’Œ
åŸºäºå›¾åƒçš„ç¦»çº¿ç”Ÿæˆæ–¹æ³•ã€‚</p>
<ul>
<li><p>GANwriting
ï¼šè¯¥æ–¹æ³•åˆ©ç”¨åœ¨å°‘é‡ä¿¡æ¯ä¸­æå–æ ·å¼ç‰¹å¾å’Œé¢„å®šä¹‰å›ºå®šé•¿åº¦çš„æ–‡æœ¬å†…å®¹æ¥è¿›è¡Œæ–‡æœ¬ç”Ÿæˆã€‚</p></li>
<li><p>æˆ‘ä»¬çš„æ–¹æ³•ï¼šä¸GANwrittingç›¸ä¼¼ï¼Œæˆ‘ä»¬çš„æ–¹æ³•ä¹Ÿæ˜¯åœ¨å°‘é‡çš„é£æ ¼æ ·ä¾‹ä¸­å»æå–é£æ ¼ç‰¹å¾ï¼Œä½†åˆä¸
GANwriting ä¸åŒï¼Œæˆ‘ä»¬çš„æ–¹æ³•å…·æœ‰ç”Ÿæˆä»»æ„é•¿åº¦çš„é£æ ¼åŒ–æ–‡æœ¬çš„çµæ´»æ€§ã€‚
æˆ‘ä»¬èƒ½å¤ŸåŒæ—¶æ•è·å…¨å±€å’Œå±€éƒ¨çš„ä¹¦å†™é£æ ¼ã€‚</p></li>
</ul>
<h2 id="ä¸»è¦è®¾è®¡æ€æƒ³">4ã€ä¸»è¦è®¾è®¡æ€æƒ³ï¼š</h2>
<p>ä¸¤ä¸ªä¸»è¦æ”¹è¿›çš„Motivation:</p>
<p>1ã€é™¤äº†å­—/è¡Œçº§åˆ«çš„æ ·å¼-å†…å®¹çº ç¼ ä¹‹å¤–ï¼Œå­—ç¬¦çº§åˆ«çš„æ ·å¼å’Œå†…å®¹ä¹‹é—´çš„çº ç¼ æœ‰åŠ©äºæ¨¡ä»¿ç‰¹å®šå­—ç¬¦çš„å†™ä½œé£æ ¼ä»¥åŠæ³›åŒ–åˆ°è¯æ±‡å¤–çš„å†…å®¹ã€‚</p>
<p>2ã€ä¸ºäº†ç”Ÿæˆå‡†ç¡®çš„é£æ ¼æ–‡æœ¬å›¾åƒï¼Œéœ€è¦æ¨¡ä»¿å…¨å±€çš„ï¼ˆä¾‹å¦‚å¢¨æ°´å®½åº¦ã€å€¾æ–œåº¦ç­‰ï¼‰å’Œå±€éƒ¨çš„ï¼ˆä¾‹å¦‚å­—ç¬¦é£æ ¼ã€è¿å­—ç­‰ï¼‰é£æ ¼ç‰¹å¾ã€‚</p>
<h2 id="å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„">5ã€å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„ï¼š</h2>
<p><strong>é—®é¢˜å…¬å¼åŒ–æè¿°ï¼š</strong></p>
<ul>
<li><span class="math inline">\(i \in W\)</span>, <span
class="math inline">\(W\)</span>åŒ…å«Mä¸ªä½œè€…ï¼Œ<span
class="math inline">\(i\)</span>ä»£è¡¨æŸä¸€ä¸ªä½œè€…</li>
<li>ä¸€ä¸ªæ‰‹å†™æ–‡å­—å›¾åƒé›†åˆ P</li>
<li>è¾“å…¥çš„æ–‡æœ¬å†…å®¹<span class="math inline">\(A =
\{a_j\}_{j=1}^Q\)</span>ï¼Œè§†ä¸ºä¸€ä¸ªWord Stringçš„é›†åˆ</li>
<li>æ¯ä¸ªWordString åŒ…å«é•¿åº¦ä¸å®šçš„å­—ç¬¦ï¼Œå­—ç¬¦æ¥è‡ªäºå­—ç¬¦é›†C</li>
<li>å­—ç¬¦é›†CåŒ…å« å­—æ¯è¡¨ã€æ ‡ç‚¹ã€æ•°å­—</li>
<li><span class="math inline">\(\hat
X_i^t\)</span>ä»£è¡¨ä¾æ®æ–°çš„æ–‡æœ¬å†…å®¹tï¼Œç”Ÿæˆçš„ä½œè€…<span
class="math inline">\(i\)</span>çš„æ–°å›¾åƒ</li>
</ul>
<h3 id="æ•´ä½“æ¶æ„overall-pipeline">1) æ•´ä½“æ¶æ„ï¼ˆOverall Pipelineï¼‰</h3>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220127103226508.png" /></p>
<ul>
<li><strong>æ¦‚è¿°</strong>ï¼šå…ˆåˆ©ç”¨CNNï¼Œå°†é£æ ¼å›¾åƒå˜æ¢è‡³é«˜ç»´ç‰¹å¾ç©ºé—´ï¼Œç„¶åè¿›å…¥Transformer
Encoderä¸­ï¼Œç”Ÿæˆç‰¹å¾æ½œåœ¨å‘é‡Zï¼Œè¾“å…¥åˆ°Transformer Decoderä¸­ï¼Œä¸Query
Wordsè¿›è¡Œç»“åˆï¼Œè§£ç è¾“å‡ºFï¼Œå†é€šè¿‡CNN
Decoderï¼Œæœ€ç»ˆç”Ÿæˆå›¾åƒï¼Œç„¶åè¿›å…¥åˆ°ä¸åŒçš„åˆ¤åˆ«å™¨ä¸­ï¼ŒåŸºäºä¸åŒçš„è§’åº¦ï¼Œå®šä¹‰äº†4ä¸ªæŸå¤±å‡½æ•°ï¼Œè¿›è¡Œå‡½æ•°çš„ä¼˜åŒ–ã€‚</li>
<li>Query Wordsè¿›å…¥åˆ°Transformer
Decoderä¸­å‰ï¼Œéœ€è¦è¿›è¡Œè¯åµŒå…¥ç¼–ç ï¼Œå¯¹æ¯ä¸ªå­—ç¬¦ï¼Œå®šä¹‰äº†ä¸€ä¸ªå¯å­¦ä¹ çš„è¯åµŒå…¥å‘é‡ï¼Œ<span
class="math inline">\(q_c \in
R^{512}\)</span>ï¼Œè¿™æ ·ä¸€ç§åŸºäºå­—ç¬¦çš„è¡¨ç¤ºï¼Œä»¥åŠåŸºäºtransformerçš„åºåˆ—å¤„ç†æ–¹å¼ï¼Œå¸®åŠ©æ¨¡å‹èƒ½å¤Ÿç”Ÿæˆä»»æ„é•¿åº¦çš„æ‰‹å†™å•è¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ›´å¥½çš„æ³›åŒ–åˆ°è¯æ±‡è¡¨å¤–çš„æ•°æ®ã€‚
<ul>
<li><span
class="math inline">\(G_\theta\)</span>ç”Ÿæˆå™¨ï¼Œç”¨äºåˆæˆæ‰‹å†™æ–‡æœ¬å›¾åƒ</li>
<li><span
class="math inline">\(D_\Psi\)</span>åˆ¤åˆ«å™¨ï¼Œç”¨äºç¡®ä¿ç”Ÿæˆå›¾åƒçš„
æ‰‹å†™é£æ ¼çš„çœŸå®æ€§ï¼ˆå³ç¡®ä¿çœ‹ä¸Šå»æ˜¯æ‰‹å†™å›¾åƒï¼‰</li>
<li><span
class="math inline">\(R_\phi\)</span>è¯†åˆ«å™¨ï¼Œç”¨äºä¿æŒæ–‡æœ¬å†…å®¹æ­£ç¡®</li>
<li><span
class="math inline">\(S_\eta\)</span>é£æ ¼åˆ†ç±»å™¨ï¼Œç”¨äºç¡®ä¿è¿ç§»çš„æ‰‹å†™é£æ ¼æ­£ç¡®æ€§ï¼ˆå³ç¡®ä¿ç”Ÿæˆçš„é£æ ¼ä¸Style
Exampleä¸€è‡´ï¼‰</li>
</ul></li>
<li><strong>è¾“å…¥</strong>ï¼š <span class="math inline">\(a_j \in
A\)</span> &amp;&amp; <span class="math inline">\(X_i^s\)</span>æ–‡æœ¬ +
é£æ ¼å›¾åƒç¤ºä¾‹</li>
<li><strong>è¾“å‡º</strong>ï¼š <span class="math inline">\(\hat
X_i^t\)</span>æ–°ç”Ÿæˆçš„é£æ ¼åŒ–æ‰‹å†™å­—ç¬¦å›¾åƒï¼ˆæ–‡æœ¬å†…å®¹ä¸º t ï¼‰</li>
</ul>
<h3 id="encoder-network-tepsilon">2) Encoder Network <span
class="math inline">\(T\epsilon\)</span></h3>
<ul>
<li><strong>æ¦‚è¿°</strong>ï¼šå°†é£æ ¼æ‰‹å†™ç¤ºä¾‹å›¾ç¼–ç è‡³é£æ ¼ç‰¹å¾ç©ºé—´å‘é‡</li>
<li><strong>è¾“å…¥</strong>ï¼š<span
class="math inline">\(X_i^s\)</span>é£æ ¼æ‰‹å†™ç¤ºä¾‹å›¾</li>
<li><strong>è¾“å‡º</strong>ï¼š<span class="math inline">\(Z \in R^{N \times
d}\)</span>é£æ ¼ç‰¹å¾ç©ºé—´å‘é‡</li>
<li><strong>ç½‘ç»œç»“æ„</strong>ï¼š
<ul>
<li><strong>Part1 : CNN Encoder</strong>
<ul>
<li>é‡‡ç”¨<strong>ResNet18</strong>: ä¸ºæ¯ä¸ªstyle
imageç”Ÿæˆä½åˆ†è¾¨ç‡çš„æ¿€æ´»å›¾<span class="math inline">\(h_{ij} \in R^{h
\times w \times d}\)</span></li>
<li>å°†<span
class="math inline">\(h_{ij}\)</span>åœ¨ç©ºé—´ç»´åº¦ä¸Šå±•å¹³ï¼Œå¾—åˆ°ä¸€ä¸ªSequence,
<span class="math inline">\(n \times d\)</span>ï¼Œå…¶ä¸­<span
class="math inline">\(n = h \times w\)</span>,
è¿™ä¸ªåºåˆ—å¯ä»¥è¢«è§†ä¸ºé£æ ¼å›¾åƒæŸåŒºåŸŸçš„æè¿°å­</li>
<li>åŒæ—¶ï¼Œå› ä¸ºæ€»å…±æˆ‘ä»¬ä¼šæä¾›På¼ é£æ ¼ç¤ºä¾‹å›¾åƒï¼Œå°†æ‰€æœ‰é£æ ¼ç¤ºä¾‹å›¾åƒä¸­æå–å‡ºçš„Sequenceè¿›è¡Œæ‹¼æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªTensorï¼Œ<span
class="math inline">\(H_i \in R^{N \times d}\)</span>å…¶ä¸­ï¼Œ<span
class="math inline">\(N = n \times P\)</span></li>
</ul></li>
<li><strong>Part2: Transformer-Based Encoder</strong>
<ul>
<li>Lå±‚ï¼Œæ¯ä¸€å±‚éƒ½ç”±multihead-self-attention å’Œ
MLPæ¨¡å—ç»„æˆã€‚é‡å¤Léï¼Œå¾ˆæ ‡å‡†çš„Transformer
Encoderï¼ˆè®ºæ–‡ä¸­æ²¡æœ‰ç»†è®²æœ‰æ— Residualï¼‰</li>
<li>ä¸ºä¿ç•™æä¾›çš„è¾“å…¥åºåˆ—çš„æœªçŸ¥ä¿¡æ¯ï¼Œé‡‡ç”¨å›ºå®šä½ç½®ç¼–ç </li>
</ul></li>
</ul></li>
<li><strong>æ„ä¹‰</strong>ï¼šå¯¹å±€éƒ¨çš„å’Œå…¨å±€çš„æ‰‹å†™é£æ ¼å›¾åƒç‰¹å¾å»ºæ¨¡ï¼Œä¾‹å¦‚å€¾æ–œã€æ­ªæ–œã€å­—ç¬¦å½¢çŠ¶ã€è¿å­—ã€å¢¨æ°´å®½åº¦ç­‰</li>
</ul>
<h3 id="decoder-network-t_d">3) Decoder Network <span
class="math inline">\(T_d\)</span></h3>
<ul>
<li><strong>æ¦‚è¿°</strong>ï¼šç»“åˆè¾“å…¥çš„å­—ç¬¦åºåˆ—ï¼Œç”Ÿæˆé£æ ¼åŒ–çš„æ‰‹å†™å­—ç¬¦å›¾åƒ</li>
<li><strong>è¾“å…¥</strong>ï¼š<span class="math inline">\(Z \in R^{N \times
d}\)</span>é£æ ¼ç‰¹å¾ç©ºé—´å‘é‡ + <span
class="math inline">\(A\)</span>è¾“å…¥çš„å­—ç¬¦åºåˆ—</li>
<li><strong>è¾“å‡º</strong>ï¼š<span class="math inline">\(\hat
X_i^t\)</span>æ–°ç”Ÿæˆçš„é£æ ¼åŒ–æ‰‹å†™å­—ç¬¦å›¾åƒï¼ˆæ–‡æœ¬å†…å®¹ä¸º t ï¼‰</li>
<li><strong>ç½‘ç»œç»“æ„</strong>ï¼š
<ul>
<li><strong>Part1: Query Words å¤„ç†</strong>
<ul>
<li>å°†Query Words ç¼–ç æˆ Query
Embeddingï¼Œå…¶ä¸ºå¯å­¦ä¹ çš„ä½ç½®ç¼–ç å‚æ•°ï¼ŒåŠ å…¥åˆ°ä¹‹åTransformer-Based
Decoderä¸­ã€‚ç®€å•æ¥è®²ï¼Œè¿™ä¸€æ­¥çš„ä½œç”¨å°±æ˜¯è¦è®©æ¯ä¸€ä¸ªQuery
Embeddingéƒ½åœ¨æä¾›çš„æ ·å¼å›¾åƒä¸­ï¼Œèƒ½å¤Ÿå»æŸ¥æ‰¾æ„Ÿå…´è¶£çš„åŒºåŸŸï¼Œä»è€Œè¿›ä¸€æ­¥æ¨æ–­æ‰€æœ‰æŸ¥è¯¢å­—ç¬¦çš„é£æ ¼å±æ€§ã€‚</li>
<li>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œtå¯¹åº”çš„ä½ç½®ç¼–ç ï¼Œéœ€è¦å»å­¦ä¹ çš„å°±æ˜¯åœ¨æˆ‘ä»¬æä¾›çš„æ ·ä¾‹é£æ ¼å›¾åƒä¸­ï¼Œå¯»æ‰¾å­—ç¬¦tç›¸å…³çš„ä½ç½®ï¼ˆæ„Ÿå…´è¶£çš„åŒºåŸŸï¼‰ã€‚</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220127112528447.png" /></li>
</ul></li>
<li><strong>Part2: Transformer Based Decoder:</strong>
<ul>
<li>æ³¨æ„1ï¼šå’Œself-attentionä¸åŒï¼Œå…¶key &amp; value æ¥æºäºEncoderçš„è¾“å‡ºï¼Œ
queryå‘é‡æ¥æºäºDecoderè‡ªå·±çš„å±‚ã€‚</li>
<li>æ³¨æ„2ï¼šåœ¨æ‰€æœ‰çš„Transformer Based
Decoderä¸­ï¼Œæˆ‘ä»¬æ˜¯å¹¶è¡Œçš„å»å¤„ç†æ¯ä¸€ä¸ªQuery Embeddingsçš„ï¼Œæ¯ä¸ªQuery
Embeddingå°±ä»£è¡¨ä¸€ä¸ªå­—ç¬¦ã€‚</li>
<li>å°†ä¸Šä¸€æ­¥çš„Query Embeddings ç»è¿‡è¿ç»­çš„ Transformer Based
Decoderä»¥åï¼Œä¼šç´¯ç§¯ä¸€äº›é£æ ¼ä¿¡æ¯ï¼Œäº§ç”Ÿä¸€ä¸ªè¾“å‡º <span
class="math inline">\(F_{a_j} \in R^{m_j \times d}\)</span>. <span
class="math inline">\(m_j\)</span>æ˜¯æŸä¸ªå•è¯çš„å­—ç¬¦æ•°</li>
<li>ç„¶åï¼Œæˆ‘ä»¬ä¼šå°†<span
class="math inline">\(N(0,1)\)</span>çš„å™ªéŸ³ï¼ŒåŠ å…¥åˆ° <span
class="math inline">\(F_{a_j}\)</span>ä¸­ï¼Œæ¥æ¨¡æ‹Ÿè‡ªç„¶æƒ…å†µä¸‹çš„å¤–éƒ¨å¹²æ‰°å˜åŒ–ã€‚</li>
<li><strong>ä¸¾ä¾‹è€Œè¨€</strong>ï¼š
<ul>
<li>ä¸€ä¸ªmä¸ªå­—ç¬¦çš„å•è¯</li>
<li>æˆ‘ä»¬ä¼šå°†mä¸ªEmbeddings
Vectorsè¿æ¥èµ·æ¥ï¼Œç„¶åå†é€šè¿‡ä¸€ä¸ªFCå±‚ï¼Œå¾—åˆ°ä¸€ä¸ª<span
class="math inline">\(m_j \times 8192\)</span>çš„çŸ©é˜µï¼Œæˆ‘ä»¬å°†å…¶Reshapeæˆ
<span class="math inline">\(512 \times 4 \times
4m_j\)</span>,ç„¶åè¾“å…¥åˆ°CNN Decoderä¸­ã€‚</li>
</ul></li>
</ul></li>
<li><strong>Part3: CNN Decoder</strong>:
<ul>
<li>4 ä¸ªæ®‹å·®æ¨¡å— + tanhæ¿€æ´»å‡½æ•°</li>
<li>è·å¾—æœ€ç»ˆçš„è¾“å‡ºå›¾åƒ</li>
</ul></li>
</ul></li>
</ul>
<h3 id="training-loss-objectives">4) Training &amp; Loss Objectives</h3>
<ul>
<li><p><strong>æ¦‚è¿°</strong>ï¼šæ€»å…±ç”±4ä¸ªLosså‡½æ•°ç»„æˆï¼Œæ¯ä¸ªLossè´Ÿè´£ä¸åŒçš„éƒ¨åˆ†ï¼Œåœ¨ç½‘ç»œç»“æ„æ¦‚è¿°ä¸­å·²ç»æœ‰æ‰€æåŠã€‚</p>
<ul>
<li>1ã€<span
class="math inline">\(D_\Psi\)</span>åˆ¤åˆ«å™¨ï¼Œç”¨äºç¡®ä¿ç”Ÿæˆå›¾åƒçš„
æ‰‹å†™é£æ ¼çš„çœŸå®æ€§ï¼ˆå³ç¡®ä¿çœ‹ä¸Šå»æ˜¯æ‰‹å†™å›¾åƒï¼‰</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220127115520938.png" /></p>
<ul>
<li><p>2ã€<span
class="math inline">\(R_\phi\)</span>æ‰‹å†™æ–‡æœ¬è¯†åˆ«å™¨ï¼Œç”¨äºä¿æŒæ–‡æœ¬å†…å®¹æ­£ç¡®ï¼Œä½¿ç”¨CRNNæ­å»ºï¼Œä½¿ç”¨CTC
Losså‡½æ•°ï¼Œæ¯”è¾ƒquery wordså’Œè¯†åˆ«è¾“å‡ºçš„å·®åˆ«ã€‚è¯†åˆ«å™¨ RÏ†
ä»…é’ˆå¯¹çœŸå®çš„ã€æ ‡è®°çš„ã€æ‰‹å†™æ ·æœ¬è¿›è¡Œä¼˜åŒ–è®­ç»ƒï¼Œä½†å®ƒç”¨äºé¼“åŠ± GÎ¸
ç”Ÿæˆå…·æœ‰å‡†ç¡®å†…å®¹çš„å¯è¯»æ–‡æœ¬ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220127115740239.png" /></p></li>
<li><p>3ã€<span
class="math inline">\(S_\eta\)</span>é£æ ¼åˆ†ç±»å™¨ï¼Œç”¨äºç¡®ä¿è¿ç§»çš„æ‰‹å†™é£æ ¼æ­£ç¡®æ€§ï¼ˆå³ç¡®ä¿ç”Ÿæˆçš„é£æ ¼ä¸Style
Exampleä¸€è‡´ï¼‰
ï¼Œå…¶èƒ½å¤Ÿé¢„æµ‹ä¸€ä¸ªç»™å®šçš„æ‰‹å†™å›¾åƒçš„ä½œè€…ã€‚ä½¿ç”¨Cross-Entropyæ¥å®šä¹‰Losså‡½æ•°ï¼šå…¶åªåœ¨çœŸå®çš„æ ·ä¾‹ä¸Šåˆ©ç”¨å¦‚ä¸‹æŸå¤±å‡½æ•°è¿›è¡Œè®­ç»ƒï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220127115916996.png" /></p></li>
<li><p>4ã€åˆ©ç”¨Cycle Loss æ¥ç¡®ä¿ç¼–ç çš„style
featuresç”±å¾ªç¯ä¸€è‡´æ€§ã€‚è¿™ä¸ªæŸå¤±å‡½æ•°èƒ½å¤Ÿè®©decoderæœ€å¤§ç¨‹åº¦ä¸Šåœ¨è§£ç é˜¶æ®µä¿ç•™é£æ ¼ä¿¡æ¯ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿä»ç”Ÿæˆçš„å›¾åƒä¸­é‡å»ºå‡ºæœ€å¼€å§‹çš„é£æ ¼ç‰¹å¾åºåˆ—ã€‚ç»™å®šç”Ÿæˆçš„å›¾åƒ
<span class="math inline">\(\hat X_i^t\)</span>ï¼Œæˆ‘ä»¬ä½¿ç”¨ ç¼–ç å™¨<span
class="math inline">\(T\epsilon\)</span>æ¥é‡å»ºé£æ ¼ç‰¹å¾å‘é‡<span
class="math inline">\(\hat Z\)</span>ã€‚å¦‚ä¸‹æ‰€ç¤ºçš„å¾ªç¯æŸå¤±<span
class="math inline">\(L_c\)</span>ç”¨äºæœ€å°åŒ–<span
class="math inline">\(Z\)</span>å’Œ <span class="math inline">\(\hat
Z\)</span>ä¹‹é—´çš„L1å·®è·</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220127120112639.png" /></p>
<p>å¾ªç¯æŸå¤±å¯¹è§£ç å™¨æ–½åŠ äº†æ­£åˆ™åŒ–ï¼Œä»¥ä¸€è‡´åœ°æ¨¡ä»¿ç”Ÿæˆçš„æ ·å¼æ–‡æœ¬å›¾åƒä¸­çš„å†™ä½œé£æ ¼ã€‚</p></li>
</ul></li>
<li><p>æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬ä»¥ç«¯åˆ°ç«¯çš„æ–¹å¼è®­ç»ƒæˆ‘ä»¬çš„ HWT
æ¨¡å‹ï¼ŒæŸå¤±ç›®æ ‡å¦‚ä¸‹</p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220127120324671.png" /></p>
<ul>
<li>åŒæ—¶ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°å¹³è¡¡ç½‘ç»œ SÎ· å’Œ RÏ†
çš„æ¢¯åº¦æœ‰åŠ©äºä½¿ç”¨æˆ‘ä»¬çš„æŸå¤±å…¬å¼è¿›è¡Œè®­ç»ƒã€‚æ ¹æ® [3]ï¼Œæˆ‘ä»¬å°† âˆ‡SÎ· å’Œ âˆ‡RÏ†
å½’ä¸€åŒ–ï¼Œä½¿å…¶å…·æœ‰ä¸å¯¹æŠ—æ€§æŸå¤±æ¢¯åº¦ç›¸åŒçš„æ ‡å‡†åå·® (Ïƒ)</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220127120433481.png" /></li>
<li><span
class="math inline">\(\alpha\)</span>æ˜¯ä¸€ä¸ªè¶…å‚æ•°ï¼Œåœ¨è®­ç»ƒæˆ‘ä»¬çš„æ¨¡å‹çš„æ—¶å€™è¢«å›ºå®šä¸º1</li>
</ul>
]]></content>
      <categories>
        <category>â“¶ è®ºæ–‡é˜…è¯»ç¬”è®°</category>
        <category>CVç›¸å…³è®ºæ–‡</category>
      </categories>
      <tags>
        <tag>GAN</tag>
        <tag>Transformer</tag>
        <tag>HandWritting Generation</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŠUniFormer:Unifying Convolution and Self-attention for Visual Recognitionã€‹</title>
    <url>/2022/01/27/7d2ace115a28/</url>
    <content><![CDATA[<h4
id="è®ºæ–‡åç§°uniformer-unifying-convolution-and-self-attention-for-visual-recognition">è®ºæ–‡åç§°ï¼šã€ŠUniFormer:
Unifying Convolution and Self-attention for Visual Recognitionã€‹</h4>
<h4 id="è®ºæ–‡åœ°å€-httpsarxiv.orgpdf2201.09450.pdf">è®ºæ–‡åœ°å€ï¼š
https://arxiv.org/pdf/2201.09450.pdf</h4>
<h2 id="å…³é”®è¯">1ã€å…³é”®è¯ï¼š</h2>
<p>â€‹ Visual Recognitionã€CNNã€SelfAttentionã€Transformer</p>
<h2 id="é¢†åŸŸèƒŒæ™¯visual-recognition">2ã€é¢†åŸŸèƒŒæ™¯â€”Visual
Recognitionï¼š</h2>
<p>â€‹
è¡¨å¾å­¦ä¹ ä¸€ç›´æ˜¯è§†è§‰è¯†åˆ«é¢†åŸŸçš„æ¯”è¾ƒåŸºæœ¬çš„ç ”ç©¶ã€‚ä¸»è¦åœ¨é¢ä¸´å‘å›¾åƒä»¥åŠè§†é¢‘æ•°æ®çš„æ—¶å€™ï¼Œä¼šå­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>1ã€å±€éƒ¨åŒºåŸŸï¼ˆç©ºé—´ã€æ—¶é—´ã€æ—¶ç©ºï¼‰ä¸­çš„è§†è§‰å†…å®¹å¾€å¾€æ˜¯ç›¸ä¼¼çš„ï¼Œä¹Ÿå°±æ„å‘³ç€å±€éƒ¨å†—ä½™ä¼šæ¯”è¾ƒå¤§ï¼Œè¿™ä¼šå¯¼è‡´ä¸å¿…è¦çš„è®¡ç®—é‡</li>
<li>2ã€å…¨å±€çš„ä¾èµ–å…³ç³»æ¯”è¾ƒå¤æ‚ï¼Œåœ¨ä¸åŒåŒºåŸŸçš„ç›®æ ‡ç‰©ä½“ä¹‹é—´éƒ½ä¼šå­˜åœ¨ä¸€äº›åŠ¨æ€çš„å…³ç³»ã€‚</li>
</ul>
<h2 id="å…ˆå‰å·¥ä½œæè¿°ä¸æ¯”è¾ƒ">3ã€å…ˆå‰å·¥ä½œæè¿°ä¸æ¯”è¾ƒï¼š</h2>
<p>â€‹
åŸºäºé¢†åŸŸèƒŒæ™¯ä¸­çš„ä¸¤ä¸ªä¸»è¦é—®é¢˜ï¼Œä¸»æµçš„è§£å†³æ–¹æ¡ˆå°±æ˜¯CNNå’ŒViTï¼Œä½†æ˜¯å®ƒä»¬éƒ½åªé’ˆå¯¹ä¸Šè¿°é—®é¢˜ä¸­çš„æŸä¸€ä¸ªåšå‡ºäº†è§£å†³ï¼Œè€Œå¿½ç•¥äº†å¦ä¸€ä¸ªã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul>
<li><p>CNNèƒ½å¤Ÿé€šè¿‡å°èŒƒå›´çš„å·ç§¯ï¼Œé™ä½å±€éƒ¨å†—ä½™ï¼Œå‡å°è®¡ç®—é‡ï¼Œä½†åœ¨æ•è·å…¨å±€ä¾èµ–ä¸­å¾ˆæœ‰é™åˆ¶ã€‚</p></li>
<li><p>ViTèƒ½å¤Ÿé€šè¿‡Self-Attentionå¾ˆæœ‰æ•ˆçš„æ•è·é•¿è·ç¦»çš„ä¾èµ–ï¼Œä½†æ˜¯ç›²ç›®çš„å»è®¡ç®—æ‰€æœ‰tokensä¹‹é—´çš„ç›¸ä¼¼å…³ç³»ï¼Œä¼šå¸¦æ¥å¾ˆå¤§çš„è®¡ç®—å†—ä½™ã€‚å…¶åœ¨æµ…å±‚ç½‘ç»œä¸Šå¾ˆéš¾æœ‰æ•ˆçš„å»ç¼–ç å±€éƒ¨çš„ç‰¹å¾ã€‚</p>
<ul>
<li>æœ¬æ–‡çš„ä½œè€…è¿›è¡Œäº†ä¸€ä¸ªå®éªŒï¼šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ˜¾ç¤ºçš„æ˜¯ViTç½‘ç»œçš„ç¬¬ä¸‰å±‚çš„Attentionå›¾ï¼Œæˆ‘ä»¬å‘ç°è™½ç„¶Attentionæœºåˆ¶è®¡ç®—äº†å…¨å±€çš„tokenä¹‹é—´çš„å…³ç³»ï¼Œä½†æœ€ç»ˆåœ¨é”šç‚¹ï¼ˆç»¿è‰²æ–¹æ¡†ï¼‰å­¦ä¹ åˆ°çš„æœ‰æ•ˆä¿¡æ¯å‡æ¥æºäºå…¶å¾ˆå°çš„ä¸€ä¸ªé‚»åŸŸèŒƒå›´ï¼ˆçº¢è‰²å¡«å……æ–¹æ¡†ï¼‰ã€‚æ‰€ä»¥,ViTèŠ±è´¹äº†éå¸¸å¤§çš„è®¡ç®—å¤æ‚åº¦ï¼Œå»ç¼–ç äº†ä¸€ä¸ªå±€éƒ¨çš„è§†è§‰è¡¨ç¤ºç‰¹å¾ã€‚</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220129104342853.png" /></li>
</ul></li>
</ul>
<h2 id="ä¸»è¦è®¾è®¡æ€æƒ³">4ã€ä¸»è¦è®¾è®¡æ€æƒ³ï¼š</h2>
<p>â€‹
åŸºäºä¸Šè¿°çš„å·¥ä½œæè¿°ï¼Œä½œè€…æå‡ºäº†UniFormerï¼Œå°†3Då·ç§¯å’Œæ—¶ç©ºè‡ªæ³¨æ„åŠ›æœºåˆ¶ç»“åˆåœ¨ä¸€ä¸ªç®€æ´çš„<a
href="https://so.csdn.net/so/search?q=transformer&amp;spm=1001.2101.3001.7020">transformer</a>ç»“æ„ä¸­ï¼Œèƒ½å¤ŸåŒæ—¶å¤„ç†å±€éƒ¨å†—ä½™å’Œå…¨å±€ä¾èµ–ï¼Œå…¶ä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªæ¨¡å—ï¼š</p>
<ul>
<li>Dynamic Position Embedding( DPE )</li>
<li>Multi-Head Relation Aggregator ( MHRA )
<strong>ã€å’ŒCNNä¸ViTçš„ä¸»è¦ä¸åŒæ‰€åœ¨ã€‘</strong></li>
<li>Feed-Forward Network ( FFN )</li>
</ul>
<p>UniFormerä¸å…¶ä»–transformerçš„åŒºåˆ«ä¸»è¦åœ¨äºMHRAæ¨¡å—ï¼š</p>
<ul>
<li><p>åœ¨æµ…å±‚ï¼Œaggregatoråˆ©ç”¨ä¸€ä¸ªå°çš„learnable
matrixå­¦ä¹ å±€éƒ¨çš„tokenä¹‹é—´çš„ç›¸ä¼¼æ€§å…³ç³»ï¼Œé€šè¿‡èšåˆå°çš„3Dé‚»åŸŸçš„tokenä¿¡æ¯æå¤§åœ°å‡å°‘è®¡ç®—é‡ã€‚åœ¨æ·±å±‚ï¼Œaggregatorå­¦ä¹ å…¨å±€tokenä¹‹é—´çš„ç›¸ä¼¼æ€§å…³ç³»ï¼Œå¯ä»¥çµæ´»çš„å»ºç«‹è¿œè·ç¦»å›¾åƒåŒºåŸŸæˆ–è§†é¢‘å¸§çš„tokenä¹‹é—´çš„é•¿ç¨‹ä¾èµ–å…³ç³»ã€‚</p></li>
<li><p>æœ€åï¼Œé€šè¿‡ä»¥åˆ†å±‚æ–¹å¼é€æ­¥å †å å±€éƒ¨å’Œå…¨å±€ UniFormer
å—ï¼Œæˆ‘ä»¬å¯ä»¥çµæ´»åœ°æ•´åˆå®ƒä»¬çš„åä½œèƒ½åŠ›æ¥ä¿ƒè¿›Representation Learningã€‚
æœ€åï¼Œæˆ‘ä»¬ä¸ºè§†è§‰è¯†åˆ«æä¾›äº†ä¸€ä¸ªé€šç”¨ä¸”å¼ºå¤§çš„ä¸»å¹²ï¼Œå¹¶é€šè¿‡ç®€å•è€Œç²¾ç»†çš„é€‚åº”æˆåŠŸåœ°è§£å†³äº†å„ç§ä¸‹æ¸¸è§†è§‰ä»»åŠ¡ã€‚</p></li>
</ul>
<h2 id="å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„">5ã€å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„ï¼š</h2>
<h3 id="uniformer-block">1) UniFormer Block</h3>
<p>â€‹ ä¸‹é¢å›¾ç‰‡å°±æ˜¯UniFormer
Blockçš„æ•´ä½“æ¶æ„ï¼Œå…¶ä¸­åœ¨æ ‡æ³¨ç»´åº¦çš„åœ°æ–¹ï¼Œæ‰€æœ‰æ ‡çº¢çš„å­—ç¬¦éƒ½æ˜¯ä»…å¯¹äºè§†é¢‘è¾“å…¥æœ‰æ•ˆï¼Œä»£è¡¨äº†è¾“å…¥è§†é¢‘çš„å¸§æ•°ï¼Œå¦‚æœè¾“å…¥æ˜¯ä¸ªå›¾åƒï¼Œé‚£ä¹ˆè¿™äº›æ ‡çº¢çš„å€¼åº”è¯¥éƒ½
= 1.</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220127163758510.png" /></p>
<ul>
<li><strong>æ¦‚è¿°</strong>ï¼šUniformer Block
çš„æ•´ä½“æ¶æ„å¦‚ä¸Šæ‰€ç¤ºï¼Œåˆ†å‰²æˆäº†å‡ ä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µä¸­ç”±ä¸‰ä¸ªæ ¸å¿ƒçš„æ¨¡å—é‡å¤å †å Læ¬¡ç»„æˆï¼Œä¸‹é¢å°±æ˜¯å•è¯å †å ä¸­ï¼Œæ‰€æœ‰çš„æ¨¡å—çš„å¤§è‡´ä»‹ç»ï¼š
<ul>
<li>Dynamic Position Embedding( DPE )</li>
<li>Multi-Head Relation Aggregator ( MHRA )</li>
<li>Feed-Forward Network ( FFN )</li>
<li>æˆ‘ä»¬é¦–å…ˆå¼•å…¥ DPE
å°†ä½ç½®ä¿¡æ¯åŠ¨æ€é›†æˆåˆ°æ‰€æœ‰Tokensï¼ˆç­‰å¼1ï¼‰ã€‚å®ƒæ”¯æŒä»»æ„è¾“å…¥åˆ†è¾¨ç‡ï¼Œå¹¶å……åˆ†åˆ©ç”¨Tokensçš„é¡ºåºä»¥è·å¾—æ›´å¥½çš„è§†è§‰è¯†åˆ«æ•ˆæœã€‚
ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ MHRA
ï¼Œå…¶åˆ©ç”¨æ¯ä¸ªTokençš„ä¸Šä¸‹æ–‡tokenï¼Œé€šè¿‡å…³ç³»å­¦ä¹ çš„æ–¹å¼ï¼Œæ¥å¢å¼ºæ¯ä¸ªTokenï¼ˆç­‰å¼
2ï¼‰ã€‚ é€šè¿‡åœ¨æµ…å±‚å’Œæ·±å±‚çµæ´»è®¾è®¡Tokençš„ç›¸ä¼¼æ€§ï¼Œæˆ‘ä»¬çš„ MHRA
å¯ä»¥å·§å¦™åœ°ç»Ÿä¸€å·ç§¯å’Œè‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼Œä»¥å‡å°‘å±€éƒ¨å†—ä½™å¹¶å­¦ä¹ å…¨å±€ä¾èµ–æ€§ã€‚
æœ€åï¼Œæˆ‘ä»¬åƒä¼ ç»Ÿçš„ ViTs ä¸€æ ·æ·»åŠ 
FFNï¼Œå®ƒç”±ä¸¤ä¸ªçº¿æ€§å±‚å’Œä¸€ä¸ªéçº¿æ€§å‡½æ•°GELUç»„æˆï¼ˆç­‰å¼ 3ï¼‰ã€‚
é€šé“æ•°å…ˆæ‰©å¤§4å€å†æ¢å¤ï¼Œå› æ­¤æ¯ä¸ªtokenä¼šè¢«å•ç‹¬å¢å¼º.</li>
</ul></li>
<li><strong>è¾“å…¥</strong>ï¼š<span class="math inline">\(X_{in} \in R^{C
\times T \times H \times W}\)</span>, T ä¸ºè§†é¢‘å¸§æ•°ï¼Œå½“è¾“å…¥ä¸ºå›¾åƒæ—¶ï¼ŒT =
1</li>
<li><strong>è¾“å‡º</strong>ï¼š<span
class="math inline">\(Z\)</span>ç‰¹å¾ç©ºé—´å‘é‡</li>
<li><strong>å…¬å¼è¡¨è¾¾</strong>ï¼š
<ul>
<li><span class="math inline">\(X = DPE(X_{in}) + X_{in}\)</span></li>
<li><span class="math inline">\(Y = MHRA(Norm(X)) + X\)</span></li>
<li><span class="math inline">\(Z = FFN(Norm(Y)) + Y\)</span></li>
</ul></li>
</ul>
<h3 id="multi-head-relation-aggregator">2) Multi-Head Relation
Aggregator</h3>
<ul>
<li><p><strong>æ¦‚è¿°</strong>ï¼šè¯¥æ¨¡å—å¯ä»¥å·§å¦™åœ°ç»Ÿä¸€å·ç§¯å’Œè‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼Œä»¥å‡å°‘å±€éƒ¨å†—ä½™å¹¶å­¦ä¹ å…¨å±€ä¾èµ–æ€§ã€‚MHRAä½¿ç”¨multi-headæœºåˆ¶æ¥è®¡ç®—tokené—´çš„å…³ç³»ï¼Œå…¬å¼è¡¨è¾¾å¦‚ä¸‹ï¼š</p></li>
<li><p><strong>å…¬å¼è¡¨è¾¾</strong>ï¼š</p>
<ul>
<li><strong>MHRAæ¨¡å—çš„ç¬¬nä¸ªhead</strong>ï¼š <span
class="math inline">\(R_n(X) = A_nV_n(X)\)</span>ï¼Œè¾“å…¥å‘é‡<span
class="math inline">\(X \in R^{C \times T \times H \times
W}\)</span>ï¼Œæˆ‘ä»¬ä¼šå°†å…¶é¦–å…ˆReshapeæˆä¸€ä¸ªtokençš„åºåˆ—<span
class="math inline">\(X \in R^{L \times C}\)</span>, å…¶ä¸­ <span
class="math inline">\(L = T \times H \times W\)</span></li>
<li><strong>æ€»ä½“</strong>ï¼š <span class="math inline">\(MHRA(X) =
Concat(R_1(X);R_2(X);...;R_N(X))U\)</span>ï¼Œ<span
class="math inline">\(U \in R^{C \times
C}\)</span>æ˜¯ä¸€ä¸ªå¯å­¦ä¹ çŸ©é˜µï¼Œç”¨äºèšåˆNä¸ªHeadçš„å†…å®¹</li>
</ul></li>
<li><p><strong>å•ä¸ªHeadå†…éƒ¨å˜æ¢ç»†èŠ‚ä»‹ç»</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªRAåŒ…å«<strong>token context encoding </strong>å’Œ <strong>token
affinity learning</strong>ä¸¤æ­¥</li>
<li>1ã€æˆ‘ä»¬åº”ç”¨<strong>çº¿æ€§å˜æ¢</strong>å°†<strong>åŸå§‹æ ‡è®°</strong>ç¼–ç ä¸º<strong>ä¸Šä¸‹æ–‡æ ‡è®°</strong>ï¼š<span
class="math inline">\(V_n(X) \in R^{L \times \frac{C}{N}}\)</span></li>
<li>2ã€Anæ˜¯
<strong>tokenç›¸ä¼¼åº¦</strong>ï¼ŒRAå¯ä»¥åœ¨å…¶æŒ‡å¯¼ä¸‹æ¥æ¦‚æ‹¬ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè¿›è¡Œæ€»ç»“</li>
</ul></li>
<li><p><strong>æµ…å±‚ç½‘ç»œä¸­çš„Local MHRA</strong>:</p>
<ul>
<li><p><strong>æ¦‚è¿°ï¼š</strong>åœ¨å…ˆå‰çš„æ¯”è¾ƒä¸­ï¼Œæˆ‘ä»¬å‘ç°ï¼šåœ¨æµ…å±‚ç½‘ç»œè®¡ç®—å…¨å±€Self-Attentionæœ€ç»ˆå­¦åˆ°çš„ä¹Ÿåªæ˜¯å±€éƒ¨çš„ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æµ…å±‚ç½‘ç»œä¸­ï¼Œç°åœ¨åªåœ¨å±€éƒ¨åŒºåŸŸå†…æ¥è¿›è¡Œè®¡ç®—ã€‚å› æ­¤ï¼Œåœ¨æµ…å±‚ç½‘ç»œä¸­ï¼Œæˆ‘ä»¬å°†Local
Affinityä½œä¸ºä¸€ä¸ª<strong>å¯å­¦ä¹ å‚æ•°çš„çŸ©é˜µ</strong>ã€‚</p></li>
<li><p><strong>å…·ä½“è€Œè¨€ï¼š</strong>ç»™å®šanchor token <span
class="math inline">\(X_i\)</span> , å±€éƒ¨RAå­¦ä¹ è¯¥tokenå’Œä¸€ä¸ªå°é‚»åŸŸ<span
class="math inline">\(\Omega_i^{t \times h \times
w}\)</span>å†…çš„å…¶ä»–tokençš„ç›¸ä¼¼æ€§ã€‚<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220129110111062.png"
alt="image-20220129110111062" /></p>
<p><span class="math inline">\(a_n \in R^{t \times h \times w}\)</span>
, <span class="math inline">\(X_j\)</span>
ä»£è¡¨é‚»åŸŸå†…çš„ä»»ä¸€ä¸€ä¸ªtokenï¼Œ<span class="math inline">\(i-j\)</span>
è¡¨ç¤ºtoken iå’Œjçš„ç›¸å¯¹ä½ç½®å…³ç³»</p></li>
<li><p><strong>æ³¨æ„</strong>ï¼šå› ä¸ºtokensçš„æ„Ÿå—é‡å¾ˆå°ï¼Œç›¸é‚»tokenä¹‹é—´çš„è§†è§‰å†…å®¹åœ¨æµ…å±‚ä¸­ä¼šå‘ç”Ÿå¾®å¦™çš„å˜åŒ–ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ²¡æœ‰å¿…è¦å»è®©tokenç›¸ä¼¼åº¦åŠ¨æ€çš„è¿›è¡Œå˜åŒ–ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå¯å­¦ä¹ çš„å‚æ•°çŸ©é˜µæ¥æè¿°å±€éƒ¨çš„tokenç›¸ä¼¼åº¦ï¼Œtokençš„ç›¸ä¼¼åº¦ä»…å–å†³äºä¸¤ä¸ªtokenä¹‹é—´çš„ç›¸å¯¹ä½ç½®å…³ç³»ã€‚</p></li>
<li><p><strong>ä¸CNNçš„æ¯”è¾ƒ</strong>ï¼šå…¶å¯ä»¥è§†ä¸ºæ˜¯
PWConv-DWConv-PWConvçš„ç»„åˆï¼Œä½†æ˜¯è¯¥è®ºæ–‡ä¸­çš„Uniformerå—æ˜¯åŸºäºä¸€ä¸ªé€šç”¨çš„Transformerçš„æ ¼å¼è¿›è¡Œè®¾è®¡çš„ï¼Œä¹Ÿå°±æ˜¯è¯´é™¤äº†MHRAä¹‹å¤–ï¼Œè¿˜å¸¦æœ‰DPEå’ŒFFNï¼Œè¿™ä¸€ç®€å•çš„ç»§æ‰¿èƒ½å¤Ÿéå¸¸æœ‰æ•ˆçš„åŠ å¼ºtokençš„è¡¨ç¤ºèƒ½åŠ›ã€‚</p></li>
</ul></li>
<li><p><strong>æ·±å±‚ç½‘ç»œä¸­çš„Global MHRA</strong>:</p>
<ul>
<li><p><strong>æ¦‚è¿°</strong>ï¼šåœ¨æ·±å±‚ç½‘ç»œä¸­ï¼Œåœ¨æ›´å¹¿é˜”çš„ç©ºé—´ä¸­è·å–é•¿è·ç¦»ä¾èµ–å¾ˆé‡è¦ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨å…¨å±€æ¡ä»¶ä¸‹æ¯”è¾ƒå†…å®¹æ¥è¿›è¡Œtokenç›¸ä¼¼åº¦çš„è®¡ç®—ã€‚</p></li>
<li><p><strong>å…·ä½“è€Œè¨€</strong>ï¼šç»™å®šanchor token <span
class="math inline">\(X_i\)</span> , å±€éƒ¨RAå­¦ä¹ è¯¥tokenå’Œæ‰€æœ‰å…¶ä»–token
çš„ç›¸ä¼¼æ€§</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220129111415083.png" /></p>
<p><span class="math inline">\(X_j\)</span> ä»£è¡¨å…¨å±€èŒƒå›´<span
class="math inline">\(size = T \times H \times
W\)</span>å†…çš„ä»»æ„ä¸€ä¸ªtokenï¼Œ<span class="math inline">\(Q_n å’Œ
K_n\)</span>æ˜¯ä¸¤ä¸ªä¸åŒçš„çº¿æ€§å˜æ¢ã€‚</p></li>
<li><p><strong>ä¸Transformerçš„æ¯”è¾ƒ</strong>ï¼š</p>
<p>å¯ä»¥è¢«å®ä¾‹åŒ–ä¸ºä¸€ä¸ªæ—¶ç©ºself-attentionï¼Œ<span class="math inline">\(Q_n
ã€K_nã€V_n\)</span>ä»£è¡¨Queryã€Keyã€Value.ä½†æ˜¯ï¼ŒUniformerBlockåˆå’Œä¼ ç»Ÿçš„ViTå—ä¸åŒï¼š</p>
<ul>
<li>1ã€ä»¥å¾€çš„video
tranformeråœ¨è§†é¢‘åŸŸä¸­åˆ†å‰²å¼€äº†æ—¶é—´å’Œç©ºé—´çš„attentionï¼Œä¸ºäº†å‡å°‘åœ¨è®¡ç®—tokenç›¸ä¼¼åº¦æ¯”è¾ƒæ—¶å€™çš„è®¡ç®—é‡ã€‚ä½†æ˜¯è¿™ä¼šä¸å¯é¿å…åœ°æ¶åŒ–tokenä¹‹é—´çš„æ—¶ç©ºå…³ç³»ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œæˆ‘ä»¬çš„æ¨¡å—è”åˆç¼–ç æ—¶ç©ºtokenå…³ç³»ä»¥ç”Ÿæˆæ›´å…·è¾¨åˆ«åŠ›çš„è§†é¢‘è¡¨ç¤ºä»¥è¿›è¡Œè¯†åˆ«ã€‚å› ä¸ºæˆ‘ä»¬åœ¨æµ…å±‚çš„æ—¶å€™å¤§å¤§çš„èŠ‚çœäº†tokenæ¯”è¾ƒçš„è®¡ç®—é‡ï¼Œæ‰€ä»¥æ•´ä½“æ¨¡å‹ä¸Šè¿˜æ˜¯èƒ½åˆ°è¾¾ä¸€ä¸ªè®¡ç®—é‡-å‡†ç¡®åº¦æ¯”è¾ƒå¥½çš„ä¸€ä¸ªå¹³è¡¡ã€‚</li>
<li>2ã€å…¶æ¬¡ï¼Œæˆ‘ä»¬åœ¨ UniFormer ä¸­é‡‡ç”¨åŠ¨æ€ä½ç½®åµŒå…¥ (DPE)
ä»£æ›¿ç»å¯¹ä½ç½®åµŒå…¥ã€‚å®ƒæ˜¯å·ç§¯é£æ ¼çš„ï¼ˆè§ä¸‹èŠ‚ï¼‰ï¼Œå¯ä»¥å…‹æœæ’åˆ—ä¸å˜æ€§ï¼Œå¯¹ä¸åŒè¾“å…¥é•¿åº¦çš„è§†è§‰tokenså‹å¥½</li>
</ul></li>
</ul></li>
</ul>
<h3 id="dynamic-position-embedding">3) Dynamic Position Embedding</h3>
<ul>
<li><p><strong>æ¦‚è¿°ï¼š</strong>å…ˆå‰ç»å¤§å¤šæ•°çš„ä½ç½®ç¼–ç éƒ½é‡‡ç”¨<strong>ç»å¯¹æˆ–ç›¸å¯¹ä½ç½®åµŒå…¥</strong>ï¼Œç„¶è€Œç»å¯¹ä½ç½®åµŒå…¥å¿…é¡»é€šè¿‡å¾®è°ƒå¯¹å„ç§è¾“å…¥å¤§å°è¿›è¡Œæ’å€¼ï¼Œè€Œç›¸å¯¹ä½ç½®åµŒå…¥ç”±äºè‡ªæ³¨æ„åŠ›æœºåˆ¶çš„ä¿®æ”¹å®¹æ˜“æ— æ³•å¾ˆå¥½åœ°å·¥ä½œã€‚æœ€è¿‘ï¼Œæœ‰äººæå‡ºäº†å·ç§¯ä½ç½®ç¼–ç ï¼Œå…·ä½“è€Œè¨€ï¼Œå·ç§¯ä½ç½®ç¼–ç CPEï¼Œå¯ä»¥éšå¼åœ°å°†ä½ç½®ä¿¡æ¯é€šè¿‡å·ç§¯æ“ä½œè¿›è¡Œç¼–ç ï¼Œè¿™æ ·å¯ä»¥è®©Transformerå»å¤„ç†ä»»æ„çš„è¾“å…¥å¤§å°ï¼Œå¹¶ä¸”æé«˜è¯†åˆ«æ€§èƒ½ã€‚é‰´äºå…¶å³æ’å³ç”¨åœ°æ€§è´¨ï¼Œæˆ‘ä»¬å°†å…¶æ‹¿è¿‡æ¥ä½œä¸ºæˆ‘ä»¬çš„DPEæ¨¡å—ï¼š</p></li>
<li><p><span class="math inline">\(DPE(X_{in})= DWConv(X_in)\)</span> ,
DWConv ä»£è¡¨ depth-wise å·ç§¯ï¼Œzero padding</p></li>
<li><p><strong>åŸå› </strong>ï¼š</p>
<ul>
<li><p>1ã€depthwise å·ç§¯å¯¹ä»»æ„çš„è¾“å…¥å¤§å°å¾ˆå‹å¥½ï¼ˆä½¿ç”¨å…¶æ—¶ç©ºç‰ˆæœ¬å¯¹è§†é¢‘ä¸­çš„
3D ä½ç½®ä¿¡æ¯è¿›è¡Œç¼–ç å¾ˆç®€å•ï¼‰</p></li>
<li><p>2ã€å¾ˆè½»é‡åŒ–ï¼Œèƒ½å¤Ÿè¾ƒå¥½çš„å¹³è¡¡è®¡ç®—é‡ä¸å‡†ç¡®æ€§çš„å¹³è¡¡ã€‚</p></li>
<li><p>3ã€å¢åŠ Zero
paddingï¼Œå®ƒå¯ä»¥é€šè¿‡é€æ­¥æŸ¥è¯¢å®ƒä»¬çš„é‚»å±…æ¥å¸®åŠ©tokenäº†è§£å®ƒä»¬çš„ç»å¯¹ä½ç½®</p>
<p>ï¼ˆFinally, we add extra zero paddings, since it can help tokens be
aware of their absolute positions by querying their neighbors
progressively è®ºæ–‡3.3æœ€åä¸€å¥è¯ ï¼‰</p></li>
</ul>
<!-- Zero Padding ï¼Ÿ å¦‚ä½•é€æ­¥æŸ¥è¯¢ä»¤å±…è¿›è€Œå¸®åŠ©tokenäº†è§£ç»å¯¹ä½ç½®ï¼Ÿ --></li>
</ul>
<h2 id="è¡ç”Ÿæ¡†æ¶-framework">6ã€è¡ç”Ÿæ¡†æ¶ FrameWork</h2>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220129115021079.png" /></p>
<h3 id="å›¾åƒåˆ†ç±»æ¡†æ¶">1) å›¾åƒåˆ†ç±»æ¡†æ¶ï¼š</h3>
<ul>
<li>Stage1 å’Œ Stage2 ç”¨çš„æ˜¯ Local Uniformer Blocks
<ul>
<li>ä½¿ç”¨ PWConv-DWConv-PWConv è¿›è¡Œå®ä¾‹åŒ–</li>
</ul></li>
<li>Stage3 å’Œ Stage4 ç”¨çš„æ˜¯ Global Uniformer Blocks
<ul>
<li>ä½¿ç”¨ multi-head self-attention è¿›è¡Œå®ä¾‹åŒ–ï¼Œheads = 64</li>
</ul></li>
<li>DPE éƒ½å®ä¾‹åŒ–æˆ DWConvï¼Œ spatial size = 3 x 3</li>
<li>FFN çš„ Expand Ratio = 4</li>
<li>å·ç§¯ ç”¨ BNï¼Œ self-attention ç”¨ LN</li>
<li>ç‰¹å¾é™ç»´ï¼š
<ul>
<li>Stage1å‰ï¼š $ 4 ï¼Œ stride = 4 $</li>
<li>å…¶ä»–Stageå‰ï¼š $ 2 ï¼Œ stride = 2 $</li>
</ul></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220127163758510.png" /></p>
<h3 id="è§†é¢‘åˆ†ç±»-å¯†é›†é¢„æµ‹-ç­‰å…¶ä»–æ¡†æ¶è¯¦è§è®ºæ–‡ä¸»ä½“">2ï¼‰ è§†é¢‘åˆ†ç±»
&amp;&amp; å¯†é›†é¢„æµ‹ ç­‰å…¶ä»–æ¡†æ¶è¯¦è§è®ºæ–‡ä¸»ä½“</h3>
]]></content>
      <categories>
        <category>â“¶ è®ºæ–‡é˜…è¯»ç¬”è®°</category>
        <category>CVç›¸å…³è®ºæ–‡</category>
      </categories>
      <tags>
        <tag>CNN</tag>
        <tag>Transformer</tag>
        <tag>Visual Recognition</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŠStyTr2 Unbiased Image Style Transfer with Transformersã€‹</title>
    <url>/2022/03/21/58ee25c0143c/</url>
    <content><![CDATA[<h4
id="è®ºæ–‡åç§°stytr2-unbiased-image-style-transfer-with-transformers">è®ºæ–‡åç§°ï¼šã€ŠStyTr^2
Unbiased Image Style Transfer with Transformersã€‹</h4>
<h4 id="è®ºæ–‡åœ°å€-httparxiv.orgabs2105.14576">è®ºæ–‡åœ°å€ï¼š
http://arxiv.org/abs/2105.14576</h4>
<h2 id="å…³é”®è¯">1ã€å…³é”®è¯ï¼š</h2>
<p>â€‹ Image Style Transferã€Transformer</p>
<h2 id="æ‘˜è¦">2ã€æ‘˜è¦ï¼š</h2>
<p>â€‹
ç”±äºCNNçš„å±€éƒ¨æ„ŸçŸ¥åŸŸæ€§å’Œç©ºé—´ä¸å˜æ€§ï¼Œè¾“å…¥å›¾åƒçš„å…¨å±€ä¿¡æ¯éš¾ä»¥æå–å’Œç»´æŠ¤ã€‚å› æ­¤ï¼Œä¼ ç»Ÿçš„ç¥ç»ç½‘ç»œé£æ ¼ä¼ é€’æ–¹æ³•é€šå¸¸æ˜¯æœ‰åå·®çš„ï¼Œå¯¹äºåŒä¸€å¹…å‚è€ƒé£æ ¼å›¾åƒï¼Œ<strong>é€šè¿‡å¤šæ¬¡è¿è¡Œé£æ ¼è¿ç§»è¿‡ç¨‹å¯ä»¥è§‚å¯Ÿåˆ°å†…å®¹æ³„æ¼ã€‚</strong>ä¸ºäº†è§£å†³è¿™ä¸ªå…³é”®é—®é¢˜ï¼Œè¯¥æ–‡æå‡ºäº†ä¸€ç§åŸºäºTransformerçš„æ–¹æ³•ï¼Œå³StyTr2ï¼Œå°†è¾“å…¥å›¾åƒçš„é•¿æœŸä¾èµ–å…³ç³»è€ƒè™‘åˆ°æ— åé£æ ¼ä¼ è¾“ä¸­ã€‚
â€‹
ä¸ç”¨äºå…¶ä»–è§†è§‰ä»»åŠ¡çš„è§†è§‰è½¬æ¢å™¨ä¸åŒï¼Œæˆ‘ä»¬çš„StyTr2åŒ…å«ä¸¤ä¸ªä¸åŒçš„è½¬æ¢å™¨ç¼–ç å™¨ï¼Œåˆ†åˆ«ä¸ºå†…å®¹å’Œæ ·å¼ç”Ÿæˆç‰¹å¾åºåˆ—ã€‚åœ¨ç¼–ç å™¨ä¹‹åï¼Œé‡‡ç”¨å¤šå±‚Transformerè§£ç å™¨ï¼Œæ ¹æ®æ ·å¼åºåˆ—å¯¹å†…å®¹åºåˆ—è¿›è¡Œé£æ ¼åŒ–ã€‚</p>
<h2 id="é¢†åŸŸèƒŒæ™¯style-transfer">3ã€é¢†åŸŸèƒŒæ™¯â€”Style Transferï¼š</h2>
<p>â€‹
ç»å…¸çš„åŸºäºæ·±åº¦å­¦ä¹ çš„å›¾åƒé£æ ¼è¿ç§»ï¼Œæ ·å¼è½¬æ¢æ–¹æ³•ä½¿ç”¨å¤šå±‚cnnæ¥å­¦ä¹ æ ·å¼å’Œå†…å®¹è¡¨ç¤ºã€‚ç”±äºå·ç§¯å±‚çš„æ¥æ”¶åŸŸæœ‰é™ï¼ŒCNNæ— æ³•å¤„ç†é•¿è·ç¦»ä¾èµ–å…³ç³»ã€‚è¾“å…¥å›¾åƒéš¾ä»¥è·å¾—å…¨å±€ä¿¡æ¯ï¼Œè¿™æ˜¯å›¾åƒé£æ ¼ä¼ é€’ä»»åŠ¡çš„å…³é”®ã€‚å°†Transformeråº”ç”¨äºè®¡ç®—æœºè§†è§‰çš„é­…åŠ›åœ¨äº:</p>
<ul>
<li><ol type="1">
<li>å®ƒå…·æœ‰è¾ƒå¼ºçš„è¡¨ç¤ºèƒ½åŠ›ï¼Œå¯ä»¥é€šè¿‡è‡ªæ³¨æ„æœºåˆ¶è‡ªç”±åœ°å­¦ä¹ è¾“å…¥çš„å…¨å±€ä¿¡æ¯ï¼Œä»è€Œä½¿æ¯ä¸€å±‚éƒ½èƒ½è½»æ¾è·å¾—æ•´ä½“çš„ç†è§£ã€‚</li>
</ol></li>
<li><ol start="2" type="1">
<li>Transformerä¸åŒ…å«å±€éƒ¨æ€§å’Œç©ºé—´ä¸å˜æ€§å¼•èµ·çš„å½’çº³åå·®ï¼Œå¯ä»¥é¿å…é£æ ¼ä¼ é€’ä»»åŠ¡ä¸­çš„å†…å®¹æ³„æ¼</li>
</ol></li>
</ul>
<h2 id="å…ˆå‰å·¥ä½œæè¿°ä¸æ¯”è¾ƒ">4ã€å…ˆå‰å·¥ä½œæè¿°ä¸æ¯”è¾ƒï¼š</h2>
<p>â€‹ æš‚ç•¥</p>
<h2 id="ä¸»è¦è®¾è®¡æ€æƒ³">5ã€ä¸»è¦è®¾è®¡æ€æƒ³ï¼š</h2>
<p>â€‹ åœ¨StyTr2æ¡†æ¶ä¸­ä½¿ç”¨ä¸¤ä¸ªç¼–ç å™¨æ¥è·å–ç‰¹å®šé¢†åŸŸï¼ˆContent &amp;
Styleï¼‰çš„ä¿¡æ¯ã€‚åœ¨ç¼–ç å™¨ä¹‹åï¼Œä½¿ç”¨Transformerè§£ç å™¨é€æ­¥ç”Ÿæˆè¾“å‡ºåºåˆ—ã€‚æ­¤å¤–ï¼Œé’ˆå¯¹è‡ªç„¶è¯­è¨€å¤„ç†ä¸­æå‡ºçš„ä½ç½®ç¼–ç æ–¹æ³•ï¼Œæå‡ºäº†ä¸¤ä¸ªæ–¹é¢çš„è€ƒè™‘:</p>
<ul>
<li><ol type="1">
<li>ä¸åŒäºæŒ‰é€»è¾‘é¡ºåºæ’åˆ—çš„å¥å­ï¼Œå›¾åƒåºåˆ—ç¬¦å·æ˜¯é€šè¿‡å›¾åƒå†…å®¹çš„è¯­ä¹‰ä¿¡æ¯è¿›è¡Œå…³è”çš„;</li>
</ol></li>
<li><ol start="2" type="1">
<li>å¯¹äºé£æ ¼è¿ç§»ä»»åŠ¡ï¼Œç›®æ ‡æ˜¯ç”Ÿæˆä»»æ„å¤§å°çš„é£æ ¼åŒ–å›¾åƒã€‚è¾“å…¥å›¾åƒå¤§å°çš„æŒ‡æ•°å¢é•¿ä¼šå¯¼è‡´ä½ç½®ç¼–ç çš„å‰§çƒˆå˜åŒ–ï¼Œä»è€Œå¯¼è‡´è¾ƒå¤§çš„ä½ç½®åå·®å’Œè¾ƒå·®çš„è¾“å‡ºè´¨é‡ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè§†è§‰ä»»åŠ¡æ‰€éœ€çš„ä½ç½®ç¼–ç åº”ä»¥è¾“å…¥å†…å®¹ä¸ºæ¡ä»¶ï¼Œè€Œä¸å—å›¾åƒå°ºåº¦å˜æ¢çš„å½±å“ã€‚</li>
</ol></li>
</ul>
<p>ä¸ºæ­¤ï¼Œè¯¥æ–‡è¿˜æå‡ºäº†<strong>åŸºäºå›¾åƒè¯­ä¹‰ç‰¹å¾çš„ä½ç½®ç¼–ç </strong>ï¼Œå¹¶æ ¹æ®å›¾åƒå¤§å°åŠ¨æ€æ‰©å±•ä½ç½®ç¼–ç ã€‚</p>
<p><strong>æ€»ç»“ï¼šä¸»è¦è´¡çŒ®</strong></p>
<ul>
<li><ol type="a">
<li>ä¸€ä¸ªåŸºäºTransformerçš„é£æ ¼è½¬æ¢æ¡†æ¶ï¼Œå³StyTr2ï¼Œä»¥å‡å°‘å†…å®¹æ³„æ¼å¹¶å®ç°æ— åçš„é£æ ¼åŒ–;</li>
</ol></li>
<li><ol start="2" type="a">
<li>ä¸€ç§å†…å®¹æ„ŸçŸ¥çš„ä½ç½®ç¼–ç æœºåˆ¶ï¼Œè¯¥æœºåˆ¶æ˜¯å°ºåº¦ä¸å˜çš„ï¼Œé€‚ç”¨äºè§†è§‰ç”Ÿæˆä»»åŠ¡;</li>
</ol></li>
</ul>
<h2 id="å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„">6ã€å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„ï¼š</h2>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220321190212987.png" /></p>
<h3 id="å›¾åƒåˆ†å‰²ä¸ºpatches-linear-embeddingä¸vitç±»ä¼¼">1)
å›¾åƒåˆ†å‰²ä¸ºPatches + Linear Embeddingã€ä¸ViTç±»ä¼¼ã€‘</h3>
<ul>
<li><strong>è¾“å…¥ï¼š</strong><span class="math inline">\(I_c \in R^{H
\times W \times 3}\)</span> å’Œ <span class="math inline">\(I_s \in R^{H
\times W \times 3}\)</span></li>
<li><strong>è¾“å‡ºï¼š</strong>ä¸€ä¸ªç‰¹å¾åºåˆ—ï¼š$ L C<span
class="math inline">\(ï¼Œ\)</span>L = $ ï¼Œ<span
class="math inline">\(m\)</span>æ˜¯PatchSizeï¼Œ<span
class="math inline">\(L\)</span>æ˜¯ç‰¹å¾åºåˆ—tokensé•¿åº¦ï¼Œ<span
class="math inline">\(C\)</span>æ˜¯å•ä¸ªTokençš„ç»´åº¦ã€‚</li>
</ul>
<h3 id="ä½ç½®ç¼–ç content-aware-positional-encoding">2) ä½ç½®ç¼–ç ï¼ˆContent
Aware Positional Encodingï¼‰ï¼š</h3>
<ul>
<li><p><strong>æƒ³æ³•ï¼š</strong>å½“ä½¿ç”¨åŸºäºTransformerçš„æ¨¡å‹æ—¶ï¼Œéœ€è¦åœ¨è¾“å…¥åºåˆ—ä¸­åŠ å…¥ä½ç½®ç¼–ç (PE)ä»¥è·å–ç»“æ„ä¿¡æ¯ã€‚æ­¤è®ºæ–‡æå‡ºäº†åŸºäºå›¾åƒè¯­ä¹‰çš„ä½ç½®ç¼–ç ï¼Œè¿™ä¸€æ”¹è¿›åŸºäºä»¥ä¸‹ä¸¤ä¸ªæƒ³æ³•ï¼š</p></li>
<li><p>åœ¨ä¼ ç»Ÿçš„ä½ç½®ç¼–ç ä¸­ï¼šä¸¤ä¸ªpatchä¹‹é—´çš„ä½ç½®ç›¸å¯¹å…³ç³»ä»…ä»…ä¸å®ƒä»¬ä¹‹é—´çš„è·ç¦»æœ‰å…³ã€‚è€Œå¯¹äºå›¾åƒç”Ÿæˆä»»åŠ¡ï¼Œåœ¨è®¡ç®—ä½ç½®ç¼–ç æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥è€ƒè™‘å›¾åƒçš„è¯­ä¹‰</p></li>
<li><p>å½“è¾“å…¥å›¾åƒçš„å°ºå¯¸å‘ˆæŒ‡æ•°å¢é•¿æ—¶ï¼Œä¼ ç»Ÿçš„æ­£å¼¦ä½ç½®ç¼–ç æ˜¯å¦ä»ç„¶é€‚ç”¨äºè§†è§‰ä»»åŠ¡?
å¦‚ä¸‹æ‰€ç¤ºå½“è°ƒæ•´è¾“å…¥å›¾åƒçš„å¤§å°æ—¶ï¼Œç›¸åŒè¯­ä¹‰çš„patches (blue
blocks)ä¹‹é—´çš„ç›¸å¯¹å…³ç³»ä¼šå‘ç”Ÿå·¨å¤§çš„å˜åŒ–ï¼Œè¿™å¯èƒ½ä¸é€‚åˆè§†è§‰ä»»åŠ¡ä¸­å¤šå¤§å°çš„è¾“å…¥ã€‚</p></li>
<li><p><strong>ä¸»è¦åšæ³•ï¼š</strong>æå‡ºäº†å†…å®¹æ„ŸçŸ¥çš„ä½ç½®ç¼–ç (CAPE)ï¼Œè¯¥ç¼–ç å…·æœ‰<strong>å°ºåº¦ä¸å˜ç‰¹æ€§</strong>ï¼Œæ›´é€‚åˆäºé£æ ¼è¿ç§»ä»»åŠ¡ã€‚ä¸æ­£å¼¦PEåªè€ƒè™‘Patchesçš„ç›¸å¯¹è·ç¦»ä¸åŒï¼ŒCAPEä»¥å›¾åƒå†…å®¹è¯­ä¹‰ä¸ºæ¡ä»¶ã€‚</p></li>
<li><p>é¦–å…ˆå‡è®¾<span class="math inline">\(n \times n\)</span>
å¯ä»¥è¶³å¤Ÿç”¨äºè¡¨ç¤ºæ¯å¹…å›¾åƒçš„è¯­ä¹‰ä½ç½®ã€‚</p></li>
<li><p>å‡è®¾è¾“å…¥å›¾åƒä¸ºï¼š<span class="math inline">\(I \in R^{H \times W
\times 3}\)</span> ï¼Œæˆ‘ä»¬å°†<span class="math inline">\(n \times
n\)</span>çš„ä½ç½®ç¼–ç ï¼ˆä¾æ®å®éªŒç»“æœï¼Œä¸€èˆ¬æƒ…å†µä¸‹<span
class="math inline">\(n=18\)</span>ï¼‰ï¼Œæ”¾ç¼©è‡³<span
class="math inline">\(L = \frac{H}{m} \times
\frac{W}{m}\)</span>çš„å¤§å°ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿å¾—ä½ç½®ç¼–ç ä¸å—å›¾åƒå°ºåº¦çš„å½±å“ã€‚å³å¯¹äºä¸¤ä¸ªImage
Patchesè€Œè¨€ï¼Œå®ƒä»¬ç›´æ¥çš„ä½ç½®å…³ç³»ä¸ä¼šå—åˆ°å›¾åƒå°ºåº¦çš„å½±å“ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå‡è®¾æœ‰ä¸¤ä¸ªä¸åŒåˆ†è¾¨ç‡çš„å›¾åƒï¼Œåœ¨PatchSizeå¤§å°ä¸€æ ·çš„æƒ…å†µä¸‹ï¼Œå·¦å›¾åˆ†è¾¨ç‡å°ï¼Œè¢«åˆ†å‰²åï¼Œæˆä¸º<span
class="math inline">\(2 \times 2\)</span>çš„Patchå—ï¼Œå³å›¾æˆä¸º<span
class="math inline">\(4 \times
4\)</span>çš„Patchå—ã€‚å½“ä½ç½®ç¼–ç ä¼šè¿›è¡Œæ”¾ç¼©ä»¥é€‚åº”çš„æ—¶å€™ï¼Œå…¶å°±å¯ä»¥è‡ªå·±åŒ¹é…ä¸åŒå°ºåº¦çš„å›¾åƒã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220321210140364.png" /></p></li>
<li><p><strong>å…¬å¼åŒ–è¡¨è¾¾</strong>ï¼š</p>
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220321210523455.png" /></li>
<li><span class="math inline">\(P_{CA}(x,y)\)</span>ä»£è¡¨ç¬¬<span
class="math inline">\((x,y)\)</span>åæ ‡çš„Patchçš„ä½ç½®ç¼–ç å€¼</li>
<li><span
class="math inline">\(F_{pos}\)</span>æ˜¯ä¸€ä¸ªå¯å­¦ä¹ çš„ç¼–ç å‡½æ•°</li>
<li><span
class="math inline">\(P_L\)</span>æ˜¯ä¸€ä¸ªå¯å­¦ä¹ çš„ä½ç½®ç¼–ç ï¼Œæ˜¯åŸºäºå›¾åƒçš„tokenåºåˆ—çš„</li>
<li><span class="math inline">\(a_{ij}\)</span>ä¸ºæ’å€¼æƒé‡ï¼Œ<span
class="math inline">\(s\)</span>æ˜¯é‚»å±…çš„æ•°é‡ï¼Œå…¶æ˜¯ç”±å‘¨å›´é‚»å±…åŠ æƒå·®å€¼è®¡ç®—å¾—åˆ°çš„ã€‚</li>
<li>å¯¹äºtokenåºåˆ—<span
class="math inline">\(\epsilon\)</span>ä¸­çš„ç¬¬iä¸ªPatchå—ï¼Œå‡è®¾è¿™ä¸ªPatchå—çš„åæ ‡æ˜¯<span
class="math inline">\((x,y)\)</span>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†è®¡ç®—å¾—åˆ°çš„<span
class="math inline">\(P_{CAu}\)</span>å€¼åŠ åˆ°<span
class="math inline">\(\epsilon_i\)</span>ä¸­ï¼Œå½¢æˆæœ€åçš„åºåˆ—ã€‚å³ï¼Œå¦‚æœåŸæ¥çš„tokenåºåˆ—<span
class="math inline">\(\epsilon\)</span>å½¢çŠ¶æ˜¯<span
class="math inline">\(L \times C\)</span>ï¼Œé‚£ä¹ˆæ–°çš„ä¹Ÿåº”å½“ä¸º<span
class="math inline">\(L \times C\)</span></li>
</ul></li>
</ul>
<h3 id="transformer-encoder">3) Transformer Encoderï¼š</h3>
<p>â€‹ StyTr2æœ‰ä¸¤ä¸ªè½¬æ¢Encoderæ¥ç¼–ç ç‰¹å®šäºé£æ ¼ï¼ˆå†…å®¹å›¾åƒ &amp;&amp;
é£æ ¼å›¾åƒï¼‰çš„ç‰¹æ€§ï¼Œè¿™äº›ç‰¹æ€§ç”¨äºåœ¨ä¸‹ä¸€é˜¶æ®µå°†åºåˆ—ä»ä¸€ä¸ªé£æ ¼è½¬æ¢åˆ°å¦ä¸€ä¸ªé£æ ¼ã€‚</p>
<h4 id="part1-content-image">Part1: Content Image</h4>
<ul>
<li><strong>è¾“å…¥ï¼š</strong>Tokens åºåˆ— <span class="math inline">\(Z_c
\in L \times C\)</span></li>
<li><strong>è¾“å‡ºï¼š</strong>$Y_c L C $</li>
<li><strong>ç½‘ç»œç»“æ„ï¼š</strong>æ¯ä¸ªtransformer encoder
layeråŒ…å«ä¸€ä¸ªMSAå’Œä¸€ä¸ªFFNï¼Œä¸Transformerç»“æ„ä¸€è‡´ï¼Œè¾“å…¥åºåˆ—è¢«ç¼–ç è‡³Qï¼ŒKï¼ŒVã€‚
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220321215744833.png" /></li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220321215804639.png" /></li>
<li><span
class="math inline">\(W_q,W_k,W_v,W_o\)</span>æ˜¯å¯å­¦ä¹ å‚æ•°çŸ©é˜µã€‚</li>
<li>ç„¶åä½¿ç”¨æ®‹å·®è¿æ¥ç»“æ„ï¼Œæ¯ä¸ªæ¨¡å—åæœ‰LNå½’ä¸€åŒ–</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220321220112862.png" /></li>
</ul></li>
</ul>
<h4 id="part2-style-image">Part2: Style Imageï¼š</h4>
<p>â€‹ æŒ‰ç…§Content Imageé‚£æ ·å­è¿›è¡Œå¤„ç†ï¼Œä½†æ˜¯å¯¹äºStyle
Imageæˆ‘ä»¬<strong>ä¸éœ€è¦è¿›è¡Œä½ç½®ç¼–ç ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦ä¿æŒå®ƒçš„å›¾åƒç»“æ„ã€‚</strong></p>
<ul>
<li><strong>è¾“å…¥ï¼š</strong>é£æ ¼å›¾åƒTokens åºåˆ— <span
class="math inline">\(Z_s \in L \times C\)</span></li>
<li><strong>è¾“å‡ºï¼š</strong>$Y_s L C $</li>
</ul>
<h3 id="transformer-decoder">4ï¼‰Transformer Decoderï¼š</h3>
<ul>
<li><strong>è¾“å…¥ï¼š</strong>$Y_c L C $ ï¼Œ $Y_s L C $ ï¼ˆ<span
class="math inline">\(\hat Y_c\)</span>æ˜¯<span
class="math inline">\(Y_c\)</span>å¢åŠ äº†CAPEä½ç½®ç¼–ç åçš„åºåˆ—ï¼‰</li>
<li><strong>è¾“å‡ºï¼š</strong><span class="math inline">\(output \in
\frac{HW}{64} \times C\)</span></li>
</ul>
<p>â€‹
æ ¹æ®å‚è€ƒçš„é£æ ¼åºåˆ—ï¼Œç”¨å›å½’çš„æ–¹å¼æ¥ç”Ÿæˆå†…å®¹åºåˆ—ã€‚å’Œä¼ ç»ŸNLPä»»åŠ¡ä¸ä¸€æ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨åºåˆ—ä¸­çš„æ‰€æœ‰Patchesä¸€æ¬¡æ€§è¾“å…¥æ¥é¢„æµ‹ç»“æœã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220321224013009.png" style="zoom: 80%;" /></p>
<p>â€‹
ç”±ä¸¤ä¸ªMSAå’Œä¸€ä¸ªFNNæ¨¡å—ç»„æˆã€‚ç¬¬ä¸€ä¸ªMSAæ¨¡å—çš„Kã€Væ¥æºäºStyleåºåˆ—ï¼ŒQæ¥æºäºContentåºåˆ—ã€‚æ¯ä¸ªæ¨¡å—åé¢éƒ½æœ‰ä¸€ä¸ªLNå½’ä¸€åŒ–ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220321232914140.png" /></p>
<ul>
<li><p>å…¬å¼åŒ–è¡¨è¾¾ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220321232959747.png" /></p></li>
</ul>
<h3 id="decoder">5ï¼‰Decoderï¼š</h3>
<p>â€‹
è®ºæ–‡ä½¿ç”¨äº†ä¸€ä¸ªä¸‰å±‚çš„CNNè§£ç å™¨æ¥ç»†åŒ–åé¢çš„Transformerè§£ç å™¨çš„è¾“å‡ºï¼Œè€Œä¸æ˜¯ç›´æ¥å¯¹è¾“å‡ºè¿›è¡Œä¸Šé‡‡æ ·æ¥æ„é€ ç»“æœã€‚</p>
<ul>
<li>è¾“å…¥ï¼š<span class="math inline">\(input \in \frac{HW}{64} \times
C\)</span></li>
<li>è¾“å‡ºï¼š<span class="math inline">\(I_{out} \in H \times W \times
3\)</span></li>
<li>ç½‘ç»œç»“æ„ç»„æˆï¼š
<ul>
<li>$3 $ å·ç§¯å±‚</li>
<li>ReLU</li>
<li><span class="math inline">\(2 \times\)</span> ä¸Šé‡‡æ ·æ“ä½œ</li>
</ul></li>
</ul>
<h2 id="é‡‡ç”¨çš„æŸå¤±å‡½æ•°">7ã€é‡‡ç”¨çš„æŸå¤±å‡½æ•°ï¼š</h2>
<h4
id="content-percepture-loss-æ„ŸçŸ¥å†…å®¹æŸå¤±-style-percepture-lossæ„ŸçŸ¥é£æ ¼æŸå¤±">1ï¼‰Content
Percepture Loss æ„ŸçŸ¥å†…å®¹æŸå¤± &amp;&amp; Style Percepture
Lossæ„ŸçŸ¥é£æ ¼æŸå¤±</h4>
<p>â€‹
ä¼˜åŒ–ç»“æœåº”ä¿æŒåŸæœ‰çš„å†…å®¹ç»“æ„ï¼ŒåŒæ—¶ä¼ é€’å‚è€ƒé£æ ¼çš„æ¨¡å¼ã€‚VGGæå–çš„ç‰¹å¾å›¾å¯ä»¥ä½œä¸ºå†…å®¹ç‰¹å¾æ¥è¡¨ç¤ºå›¾åƒç»“æ„ã€‚<strong>Gram</strong>çŸ©é˜µæ˜¯ä¸¤ä¸¤å‘é‡çš„å†…ç§¯ç»„æˆ,æ‰€ä»¥<em>Gram</em>çŸ©é˜µå¯ä»¥åæ˜ å‡ºè¯¥ç»„å‘é‡ä¸­å„ä¸ªå‘é‡ä¹‹é—´çš„æŸç§å…³ç³»ã€‚ç‰¹å¾å›¾çš„GramçŸ©é˜µå¯ä»¥ä½œä¸ºé£æ ¼ç‰¹å¾æ¥è¡¨ç¤ºé¢œè‰²ã€çº¹ç†ç­‰ä¿¡æ¯ã€‚å› æ­¤ï¼Œè®ºæ–‡æ„å»ºäº†<strong>æ„ŸçŸ¥å†…å®¹æŸå¤±</strong>æ¥è¡¡é‡ç”Ÿæˆå›¾åƒ<span
class="math inline">\(I_{cs}\)</span>ä¸å‚è€ƒé£æ ¼å›¾åƒ<span
class="math inline">\(I_c\)</span>ä¹‹é—´çš„å†…å®¹å·®å¼‚ï¼Œæ„å»º<strong>æ„ŸçŸ¥é£æ ¼æŸå¤±</strong>æ¥è¡¡é‡ç”Ÿæˆå›¾åƒ<span
class="math inline">\(I_{cs}\)</span>ä¸å‚è€ƒé£æ ¼å›¾åƒ<span
class="math inline">\(I_s\)</span>ä¹‹é—´çš„é£æ ¼å·®å¼‚ã€‚</p>
<ul>
<li>Content Percepture Lossï¼š</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220322103100728.png" /></p>
<ul>
<li>Style Percepture Loss:</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220322103340777.png" /></p>
<p>â€‹ å› ä¸ºç¥ç»ç½‘ç»œå„å±‚çš„ç»Ÿè®¡é‡(å¦‚å‡å€¼å’Œæ–¹å·®)åŒ…å«äº†ä¸åŒé¢†åŸŸçš„ç‰¹å¾ã€‚<span
class="math inline">\(\phi_i\)</span>ä»£è¡¨ä½¿ç”¨é¢„è®­ç»ƒçš„VGG19ç½‘ç»œï¼Œå…¶ç¬¬iå±‚æå–å‡ºçš„ç‰¹å¾ã€‚<span
class="math inline">\(\mu()\)</span>ä»£è¡¨ç‰¹å¾çš„å‡å€¼ï¼Œ<span
class="math inline">\(\sigma()\)</span>ä»£è¡¨ç‰¹å¾çš„æ–¹å·®ã€‚é£æ ¼çš„æ„ŸçŸ¥æŸå¤±å¯ä»¥ä¹¦å†™å¦‚ä¸Šã€‚</p>
<h4 id="identity-loss">2) Identity Loss</h4>
<p>â€‹
è‡ªç›‘ç£å­¦ä¹ å¯ä»¥åˆ©ç”¨PreTextä»å¤§è§„æ¨¡çš„éç›‘ç£æ•°æ®ä¸­æŒ–æ˜å…¶ç›‘ç£ä¿¡æ¯ã€‚ç½‘ç»œå¯ä»¥ç”¨è¿™ç§æ„é€ çš„ç›‘ç£ä¿¡æ¯è¿›è¡Œè®­ç»ƒï¼Œä»¥å­¦ä¹ ä¸‹æ¸¸ä»»åŠ¡çš„æœ‰ä»·å€¼è¡¨ç¤ºã€‚
è®ºæ–‡é‡‡ç”¨ä¸€ä¸ªè¾…åŠ©çš„<strong>è‡ªæˆ‘é£æ ¼è¿ç§»ä»»åŠ¡</strong>æ¥å­¦ä¹ æ›´ä¸°å¯Œã€æ›´å‡†ç¡®çš„è¯­ä¹‰å’Œé£æ ¼è¡¨è¾¾ã€‚<strong>è¯¥ä»»åŠ¡å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</strong></p>
<p>â€‹
<strong>æ³¨</strong>ï¼šPretextä»»åŠ¡å¯ä»¥è¿›ä¸€æ­¥ç†è§£ä¸ºï¼š<strong>å¯¹ç›®æ ‡ä»»åŠ¡æœ‰å¸®åŠ©çš„è¾…åŠ©ä»»åŠ¡ã€‚</strong></p>
<p>â€‹ è®ºæ–‡åœ¨StyTr2ä¸­è¾“å…¥ä¸¤ä¸ªç›¸åŒçš„<span
class="math inline">\(å†…å®¹/é£æ ¼\)</span>å›¾åƒï¼Œç”Ÿæˆçš„å›¾åƒ<span
class="math inline">\(I_{cc}/I_{ss}\)</span>åº”è¯¥ä¸è¾“å…¥å›¾åƒ<span
class="math inline">\(I_{c}/I_{s}\)</span>ç›¸åŒã€‚å› æ­¤ï¼Œ<span
class="math inline">\(Identity Loss\)</span>æ¨¡æ‹Ÿ<span
class="math inline">\(I_{c}/I_{s}\)</span>ä¸<span
class="math inline">\(I_{cc}/I_{ss}\)</span>ä¹‹é—´çš„å·®å¼‚:</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220322104028070.png" /></p>
<h4 id="æœ€ç»ˆloss">3ï¼‰æœ€ç»ˆLoss</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220322104224116.png" /></p>
<p><span class="math inline">\(\lambda_c\)</span>ã€<span
class="math inline">\(\lambda_s\)</span>ã€<span
class="math inline">\(\lambda_{id1}\)</span>ã€<span
class="math inline">\(\lambda_{id2}\)</span> = { 10 , 7 , 50 , 1 }</p>
]]></content>
      <categories>
        <category>â“¶ è®ºæ–‡é˜…è¯»ç¬”è®°</category>
        <category>CVç›¸å…³è®ºæ–‡</category>
      </categories>
      <tags>
        <tag>Style Transfer</tag>
        <tag>CNN</tag>
        <tag>Transformer</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCodeã€Šå‰‘æŒ‡Offerã€‹é¢˜ç›®æƒ…å†µæ•´ç†ï¼ˆæŒç»­æ›´æ–°ï¼‰</title>
    <url>/2022/02/03/b62f2c89d90c/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="f71b80c18c346210f2fac8aa9357ced8018d796b64517d500c9771fe77d1edfa">0b64cd3abe5b0a0a039a37d86c66d75e6ec8e220ebc13f2625638343d94e3b658da8c40ea430452654890c623f4dcfb24f0642b20202d7d277d1f2eaf3401d7e8931cbb53388f684d3b93e2de9e153f12e895a94d070525ce2de906373fb4cbf94e92e031f207c298839595348f1501b4bf727abc1428dfc74b33b7500340198f1d3a287ba35df763ca88f190b4ec65f9d676337edc877b8c21ce07a08a995fd892898347b548004ec7204b456116e8b1081289da98b952774bba0123bae9a554ce991d3f4c089dc1beb9b187c241b72f075dc547471768b5fd797194b1c30b3eb864d8c75c7039f4aeb9dfacfadef6a221a5e56f6895ce4b6e22baf85cf0aa4bf137d21a4f7f90899e8f2ff6643be5717872df903679740e097a36d415f3f61ece25e16235a00b75e97dcb8cc1183f0447fec3391444e8166a92e8d3f371a46a92150509927d96271fa80f3b7e3895d98712a41b59210292ff7f02ace1b9407fe8d738971cc89b8d4cb18819381ee6cd4f85091586a007ce6ec3951393145270f3c28a74b822f168b3f7607fc8ba5065e3c51360a49a3559172433ecc2497ab3777dc2bb7b2c6a6b61ff02eff86c679de2cb9fef70cb668acf421373315ec2419f363fba02cc1eca437ac55cd71d8d8b7b958026bd36658115f4b14956087feb8c55144798d107957a74203da0b5d8e901729c9e86c7929ce736e631a35d91fbea4c29fc670ef43b8857ee49a699bcc73efcba64e1cc89c4cc1d4f90f694d34b342a24555726a7a48b2d2a97a68d840079783e2c771484e67420f210bb065e534e118de9942b7fea7d96090ed6e56a310b715a933c5703c644f82ad2d2077a836beabb24b73086cafb6ab57b378c17c54fadce0a473e0a3b14a7daeac6e2e10b5e25e40ffbb6e9f35491d23918719a6249733d661ed027c7ba236b50e7dffc26aade97266e6eb74aabdfc303cd30bb5f8ad111e5699d1937776c1bc711b7d20fb0d456c9e0d7e0b4efddf792ff0664d607c238e7ffb3d0226ab36407d8cfc6738e18fc52ed26fb4128b6b07fec6f2245770778a159bda581165bdcbb09e884218a8e18e374f5cfb99835947b8562bd797855c261bc79fe3e073cb221a1298ce56436aef4be23e3d31463b8842c4b831e98b799cea8e4aa0dad7b501a592b844a8ead93828a7c250d0841cd5a2d5b42026a540c4fd5e1be9284e13e8aaf794b1845cd5bb09fd481537513f28e511b6fa685bee5e8b9b15cb639cb35fc95c880369d8b275b21fce232ac9d236dfbd4d21e2b159ca2798c23740c93281a93899211d630d4ad4cbf0cefedadfbdd486c2ab58bb27d41ee7dbff0db28daac454d34bf48ceefd26c1413bbac1d7fc1a4f249d03f78a7e27dffab170bf996366d8b10f3b32a6ac33189bffcd816e39cdb40623322385c3f1ba816a604b3fc35bafae5b27b3320d18cb54a0ec3b45331625d52c74f1bf3d785db7f8d342437f32bcaa13544d97e278fb8d84fa9bc61a49c8b77f11afec3832e8423d54487534be065c271e15b052242f5ee28b69bb31cdac9c6871855d6ab7acc0fd6e17b7bd4533ca54e1081583bdbe5e635631b77debac45b11ebeee825f7695eb3b78d37a87a9b67424a934bfd6e9185d43b0c32d0fcac458d1d763bf16eda82823be3b1fa32fb44f1dea52378798fff35ec23f251337dcb1a8b4d836e7739966b827528a036bad305933e0ec623638a62183a10040f633cade78d07e3bafbb64c4ec62bbfa7b3677e85959e18557164106702839be7955986442359a21ae8aaadc3349b7cb1acd2f3d80fa4b9c3de03b57f8d4ec2d77e601d49273b80d47057a53726a9303b5dee063784182c2faef1adadf775bd5f24f50bc166b80a271a4d175f482f6bf4503a5f4de0bdf225f12c0a4eaed78287269eb597d39a23188b2d9e43ce11bea7be92b8bc10979692b406787222cc37816e3ca507d796414d446910d0589beb44f0b1710ab870933cf9653a62cf18fd135df236b6619909a87335a7656fe0f8e6896b189c3f7c8b38f9b9f6824f887074ec30e64b7b0bd291900be77b843020007d8706460d4414aa6b699a596399c04c23c2635bdd5f83c9d010dc3916861371598c8f9b4d4931b33bf28caedfa18e63dbe02b2be6c5c3451939e6eb34dfbea0ffcaf878a62f49a16a32c83b800c73470dbe66e2104ba7ebd855291d9930ca1c881be0bf9d0730f00362c2acbee48ab185317a9e3a1fb5b2096d016197c6d01d22bcb350da09bcb18798254d3734f1eec5a24e6dadca1e910a9ab107e495a6b4f49f385a153db47fc72f23e00414fa7f7f6773fc3f75de71479e90da0fa6de3f02b6bfe3b72aad50ab387934c749956951bc48de3ae783f80139592efc3f7788a81cad081b2ef0145f4226926b43af62a4b994ce022057184b3942244563be50f0f7c4ea829f01bdbc638a7fe340b029a38ede921e63e3560eea0921e5c22617b9db747a94eaac58207ef89c08a6c0a0e208c9d38fcf733b4854f58f22d3350cabba21669981aa93300d9ba54c495c44002a796ca16af5122916c81efe63abb3aa94dbbd0452419f951fb6406ab9eaeaacc99a6f5c708daadf225c9594835d96a7b6d379c32c0ba989bc173c476222818a73754a5f98e03ecddf25724cb4d742047ddb9a25d0bf41bda5c89c33058dcfdbd55cda6a2b6274dd42e0a84f7b792beb3c8c19404489e1660a594e244fe021708ea0515f1c411dca31aaacfeb0d461a468eef638422eb8cf3a8162243a63aca64e791232f1b30d82a28767297b91d914754f9bb05e7b8b2d7f2a6829f67ba00959bf106719e4390e82b08819c56c6561a520a8b7bbe957dbfd90a8750d809eeeab1bb783286bbee236b1c02cd3a6a1ebace416d7e9d9f0f09593baa309403383d20e984ff370848bb313a7b504fef0006c90a8a8875976528f3e4c0cd4aca3f39182602e9aae373d0094a90e6e4855df60e956222184e05f39cacfe86239a45f885ceed60680c4171173f4580efcd20ed84402c4f4e1bdd83f35241b346306cf0ae04fae3c706dd59b71a8651b9e27cc27c3a12296606671fed0969879075cf5f98af38797150411d697a61733d2f9589f0b37f6399f2cddd4ea618b35e75c36f7d2bcc13a4fa6ac51aa75e458f9325c7b0a6d644415363ccd56fdfa8bcffeb861a7b087c831fbb66d116d2062ed4de8b74d853cc712bbcc996ff0b1403dfb91217931b82c20ef7b619ef73a3922e9c109febc55f4be019e1427409d6ce8649c665f650c60f4ffbd5e9ee485c6c4d9917cf7345344811fcddc02aaa8f2cf479f137d5be04e85c3f00218704b0662a9e7adfe08373c42ab44ef9fa578c92f430bd1bd8e63f67936f5190ddb09b2f76799bda9b21e31eb749c30dd8a71b6a443458916207814255cde69d0614cc98c37165a20e0ad996fcd7802ce0c81d6260655af6995fee4984e4991102d2d7c265d9ab48a946a12542a7ee789410d676af706e05d47da482bdc8e20a171127fdb936a963d18cd2cf3a4b6191d71866b056fec3edf2a00023e6bee17ef1ef225fb16a4976cb19b3f6c597b66bfff1e4fea595e91459346b1d38d70e469228b709ad2bd530e2eb6f27bfc910721515d50b7581156bbfc9c2e346c5ac5fb9665c6448c74e7dc0ab7cd48047d5e80b226c10b14705e5f0a5bd024daca3ab965c47f08ab01e6702f9d04217f705add0b97cfa8b9a4594e570b8288be0fea50df66361f0d426a1e86f6e4595ca84b5b56c763c8f5b7c959ca39e52282b53ffc1cf104c84c19b9e6b864f16613beaad3cf798883c6c784ff146132e8cc8185d2a845d174476e45a7436c84183b6b69fbcb1cc6a843296077b43dd14eb7fbc9cc5c76a1bc8e97cda506ba75323aae0076bf3dfd430955f4c45a6c8bc3b944f109c22b20c25eae7be307221013005afe9f1ab1344da824bc8a4ad5f6683ccdd8b9d6a6eae14725e05c2948c316324d1e41b43e011e615a4773f2033edb75cc8322859a8168d49efc3064d0ef3a8b39c3e7e8132cab0c9a6f025c47e99b06f3f0e4e4b8971bc2d226876729f7d5f7206af939c10d003bbcac4d109f7572c85aaebdc085305d56420672dfb75a261a983b66521400a2a9161a0645adffed81cf70696b4d345e9df4dc5a76343bfadd2b5d7adea922b25694c0c84a519f9b30045eb1587a7e2ec195a113d5cbeba91629b18212d685fa45b2530d04665e7023b548729c4a3303e584144c23d5cf0597d4b1755bee4c69274ff873523bdec3ab23823039b289fa162a2a743926d4262d040805c8c85ab75c4005959d5ad452981645757ab92baef682c9d81b5e713e9ce2b43d34bd1a589419824d8a89db3c9fa1d9df137d85bed5df749233b10ab8bf14f1652f9339f0b0b0aeff33693d280647bb8b277397fccde02724e980377eb249939791c533810460cc9cb95525e5c77eda9ec90e05fad1380e1b964214a9f836927fe700e18bdc33dacf89ee7d0072a693d73a8bc84266b5aa9ba769fb62e40840a67f759081b7e06249fa0c8d8426a8687a819272856c488b51ba98e0759e4d19b545536c2e1cdcdf989ac851bf3d36fa75124aa0f33e854dc3631f5e756574b195f6596f788e37bfa259486c6d3378c264d6f9166808102d39d0c4337ec523f8a44f5c5d1af419c2d7f15b5eb12712c1e8fc5e8b4b1d63f3aba8698e7ad7a0bc8f42d7cd2fde1a62080624d97d389d653ef66bff0d2aac09308b3f1fc70fe75b03bd3cf8ab92a4e4391a26aca12800300a490d6564601a20a81a3fe3f400c7a38b86bfe4fcc84434264a3377b6eeecf8bc8691d9be06278dbad433f3b490bdf331f88d31bbd8cdef9ee3ee11b792d7c49f45ae16103455a801c57ea85e62a7f208012703faca5226a327e6497dce8c1d078c6a0754a0ecb86c753e1108a695336caba2b4e1bdeda5a6785ff0dfadd0d36a42754e153905bc80cc07c45173345744253177b1dca339043b475916da141827c6f16beed13b804023009f54fc73240bf36b7b7fc0d87eded80306ab7d997639301ef25f35e679a266edd8d19858ce0beb023f45ba53fcf47959b74ba83feed6810567707c188c6b621a4339bf7f8d4060a49f1da1f8dca64dc5c1a7f5f6615abe29159ea2433a60558252d88be1289285239bb512fd8a2d9a0b0a745f8b82644e63cf8bbc51e7ece01ea6be56687175260ef3a05e5c1e8fc9d4787ae421e559f8e89fe661d0224d1af5d9d7d72f059a32b5ce28a373a296dd94247d67b6f3822711bc620087a11ab0637a5eb2a389e1c209b7c3bfbfd2a590c4f9cd07baa5274efc70507e9f3208fbb5368deeed9c1849444d8cedce62519e2039518ee42185f2cb8a19cb9dffa3439e01baaa8581098194611daf693b97fc5f7c6d146168232b270797abd1389e00588c2c63a53e28d5076452e0d64bac896640a3e9e7f5a4ff614bdb1fb0cb1a1393169dcd4be9a403e1c57636990a5edbab1cb4fe122b117bce7c78e703d3b24b0589c1d6f46372b1b721b7252c564e5c528347479563d012b971df23e9a33e3f91cf643142e70b1295df5290ade155baadaa9052ca8a994ca745c3f0f9d66557f9ff45582d2a9b9e0c6acde364a316625991a3afb509d1093532daa3129fcacbf92e304a4cfe502827eec09e161ea91defe6015d67d2b9abf45fac3d10750a877a30bb2252e4485c776173d807d00146449c1a9d5b95ed7838017c2a946f0b4dcfcfd0dcc03821f7e1f5913742b2fc7f910702dabccf601ab41e8a84b6d75384acbff7bd7c28d119591f241e3abd424fee3813becbcc2b0f09ea52b942f4a9dd72dc034a824156f9e9f68da81ebf7433dbb70f0eb1770d4a4adabfdfe0ec06ee503897eaadfa14243423757bc5c2e7b18f1117bf280706e5a2367edb47fa336b2c4c7e12a18e5df039ac6101be1f8ff150718be9a728db6b38723f7e59a6883205e0bc9d9f42270ddddd31a538c04d72a675b70dd342f3fe516e218a4af5e59f4a9471c8795fa9d00bceb6a3ef7465ac8c69a72e235a72e66bf615c6e667fb53c1aeb6b950a4de76360d52b1b615f78ae87fd0fe21c36b6e2a1f6e8b92bd41a6da3f939a9827a264fc73d844de69cea9e5b214c8ff7b200053041f3688c7dc625c8faf50c39388093db171a4f15d27b4985ab6d62427b374ed8856ff58dee88ac3799c1f43613b049a2d19bb41fadddf927b3c300f6cbae27ea7ee0f767efef4eaa282f309a92e08384436f6092db9dc97b4651a10878dfdccdfac49a4ef3d0ff38b27ee66a1ebd07182fe140bfeaee472815dc0d385e61190dd3bff16b0029c9215e482eef8920173127481462bd99b5de4736eacbb75fc2575a45d95b868a7106255405e7d1ceec5cd450e7d0a6e6b720714b96b4a74a582a46d761cdc35a5f88830e73d0d87f18bf4adebec87a0319c63d61f52bb66bc399d147c3a5e219864acd49373b666a2b8262becfe7af5fbde9758079211ebf9de45032c932ae1e3594b805ee5d434122d139c88167a71d3d57b356e8da89030a4fde36ef348bc3ad76704fc67f163bfb100b340c42202cd18d90e1796150e84816dea70404b58dec2d34de9d867d495aede30bc1426fc726459ab981c95672d8e18c7fb0db825d28346c944468983d1ec0542d457d1b1c5291e04a63dad7e094a73902d864f380bb1414d89534de8c78336a14e7c9135e4a03d41eaeeb784a64b55d38bb7e807ce082036492feee181e04400ea60f247f23075f99facf4cf8e59faadb4d0853a6707396e1999a98e12048d7e20ed39bd5c374c15443925356927cb82332bd4f4ad90eac7c11ec943c580ec3b4cd7c6da71a8d08037d3630641404fd21de8607646994ca719aef30ee7b728ba948009dd9b290a515bff97612240bd586e8d8920794f4a2c808df64b44d66222289d2751198d7b909d28f0835a0dddc67f6af8da5625c2495bfa7dce7f64d13b043c22a0f8172897d87ad35c7b4f949c89b17d501d849aec99efbed1b033d9d08e5627dff121f098f49cbdac499ed69378ba08ab158db187d104abe0720e63eea8094329a83d30380f436a156e9a95276bb40292ca38668aeff87e6cc99146133945bc5bf926728df9ea0940fda6800d66d7997b1343595be346aeaabff30f2eb79549eb96364f971442f34d6ce9f6e676d8c16c0da591933bdb2214c1bb4ef2c8a52447bb5e15ceaea345e401a399a20ac8af1dd1d7a9006e32db9f75ad7cec2be3f6f5d6524219216c5d473849f537fcb41fa2084260ad6e7c7100e0dd921e94fe6bc2db9ffddfd4f919db72b7f4d1eb2a88d9cc6eb82d8e2276258e612430f5948e77f13944f6f99641a911eb1ba816e33b8ec774fd90b9cffeeca40aa1c61641164049a51bbfadf49c46b6923e11d12be024ecf0f4c67332036589791a99e5462833f4881617ce7e3fdc09aa9eb836408a61789c8b3eddc2c7e07fe334fbbb52f0d62a456b7576fe49270ee18fb78b34ed8722ec3640e278fdc7e0c41a839c6036435b1f0204ac52dc56017560841f2c3ed8c2a886151c0a050141170e07654469aedf168dca71fb560f2f94502d2f30620513d85a476e05d1997f1c2bb1c8e7918ded526af708020cca3a876faffdb257a0208069025d0229e1962b6f9e49d10c90b97e2b01d0623be677ceee4d6225fac294e0697b30958efc5a5b62aaf88a08c7d6cdb5ae457f800fc1f783f5d9e7eb1c3949a0d70dc48e0784b24a0aa700f9c507daa25c1191d3e27b457965e46f782d4d360a1b3aa0f65dee805669ea0ea79816dcfc37315e3390abeaf79aafcd680674326108a9d7b15af0a102c52d38caa87c65c88d12dd0c46a8c09e93ffc564b4e73154a073b4d041c416c89caec4f6ddcffbe42245dd4005f4eaf32f669738a822b4ba00709aaa34dd600a41c563d21310bc8e0ee462024f358e8c8b1b08e4da87545b122680cd22940b2935debf39c5670f09a1f0ee45efaa389e5e5327fb795234d76ec98e4dfc0a84a94ead1a33be1f95320d3702c42080186ae9dfb7a638cbd51656ab8976f655f315643bf304611584b65ef4fdd0b934810bf62a7eaea081e6b1de75051465c74c53a8bbc944cb57b561a97f342766b5c36f92a69a8b04ab125b6ad300f22cabe06083bcc070fe174e7a1832897f37d3078d87782d0c7b0b344bd01b38ad603b0eb2c2876aed6fc4a897d079cbddf635f6f81b9c4985a9442577bd5ffb972cdb8d55edb5474e27125865b4b93face0c4a02bbb862cc9cbd5dd77ee47afad1b53c7800c7ae3e8ab03db0de1bfaf0f02f098a1632cb2d1c1128849a788cd504a4c1a108e85d69a7ab7027e1c54f8c78f22b8389073c155f04a37a48a52894183655972c08e3b4450ae6d607aef471798cba9ec0c49876005b9a6dd0682d598ca521134d0bc6ae9afe4b2e1ea5f47ea671c403cf831b74b771e76640245be8dd34495388423f9379eec8e0a0acd3d7d67875082cab1d123adf47467bf9eef63ba147f533deb0d873f5f58f046c5209cba751647f95abb08137c96fe28f7e7e68ab60cf274f1038f97ede15b3ba58f385908738a9b63993c715fb8224d9f570b9a893045ee64a11570651b1c7805d8dc46dc3090aa49e1df48619c60733edf0e98b0fad8e99d1ed74c696972de9135f3e2098a92f8955ffe96bf19d45a15e45f6d3a2a5983c0d744e0ffcd0023b53f5bd25c07d31c62e8d31c643c718b2e64f0d0687008d62f93b842f8a1424e94155da4e155ada92d1c1bcda65ff26b8bf9fae17b97548384b01f881ee2c2cd35a31aa688c5a3551bc27e69e39620fedaa78b068f91395f534efe12c25e7b85a9dbdccc7bfcf8e4c24aaa92a8e6e8d2755df59a472f8f702db8dd6f0c512c5570d881c12caccd4b719d407d27321fd45da2f7c33d394b2cba4010afecfaaa36d22fe0a86de4f5a3051836d5d8d9d20e68e7d746085be921c5d5b755ba38dc0e171cf7b0f9036f12f22e111ceb86c7f36cd62dee7d04c2ef94d82e923ae5e947d3c62bf651275c6c5358fa85927b262e466a7e37303ab69c92cd0449eebe584908de3b76dc3c28a5f02615849764a8acefe143a0c5d2de26adebc9e1b5bca3b92e84cac47a10c97e874d2021d252042d4a1a13a1b2ebc8781aa3f8dda78ed84c9b4ab1c29cbf1c3f6df66c29c25bbb6a6bcb77a621b3d055aa7d6aebbc3271e8d4ca4d39be87817af8ad93f0077059a3c0d6633ae687b083f687f94a9728799fb985010d2af75b5e0b3a91f630349e3db64415476d6ab1805df39cca67921ffe8165cfc54845fc5a91be1ee99e5a4237a0d479a34f067dc4da21f3869c0b873807dfa9fe4f8886b67ac4709567ef863f5f434d556f3ce55fbc221fc7597ab5a5043a0065c3b7f5fb6eb5c05517a56d2447b964b7441faed21e041529778dba6c2ada0fff5e9c593ec4e8a307606eaf1c7854ac59f579544f598b75b0175c915609a2ccd1d84cf107b8f5173d35e8a5eaabab563b73df4b3fe35bdcd398a04a3c884b39a1b663db515fd76eaf9b42cf22f076fb0ea0e6fd22789591a153a18cec514bdeaa5dd26f40f7bae8ac7c36a27620ab86b28d432bda7180decd951daae04b1f90eba942065fd74b29a33ece7b0973df313b366a33c69f5cc2edd719f9dcf3b3010039650d5180e70052d4155066635f523f32ef658df1548f24a0e446023a8a9f76f3d5021b0a11a9ad0d6522716b3cf7d442be2337c7f80f98fe38d82f6bbaf129728943250224b078b3e23840818bb9028d6538acd6a2a5ae0da70ac7a769e1cd558e2a203578d7a102d8227821ec2b5a7036b5a1d706636004fa8d248722dc644891dfb6e749daa46014bc7ed6cc4eade82b0d0396ebeebd05facffe9f19ea3d0fd679ca12788185baf05b19c33e363c8c9f2289aab76ac9d7aad7b5901186679e15c5747987577f23f4529789321dc884f227338cc2a27a1bb80c4cf6a66e14af331c4ed58038d2168a522deffb928675626dca8b73608dfe39ecfd0483abd36def3df4fa41c329adb356269932cbf793b1be3d07a43cfc3144df3d222dd85677a2e66452b8db73820a707e57620c8bdb36607cd00007fbf6deb00479aefa3f648e242a6cea052f594fc90c4257a80bb28328cbfc86efa844368fd85c05939997bbdd52eb8893422f86b915b4a8d45aa8693fcebd766ec62bc58c9939bb7d48c550aa8312732b1fc2f3e3018c9bcfecd2df11ee667c82eddba4e48ce9f51d78bcdc452d684255225740e24bae4bf7ace86de1caa2935c3b8329d9bcd5a080742ea8e89498dee132c91b0290e49dfc5f47a45bb8842a77b46f4112049abc9bfcaaff484b3f2d41c33b94a50802dd0dfaf2f07c5de8c62a494c95a1b0403f5b6ab5cbf4adcf75a82742a71e9a998134c532ecfda141521d8646ff75015319cf57112da2fd134fe6f9c06de9e507347c81a44a804ce83bbb40a573081b9e052eb32930b4b35f80cd03f39f5e8e07f16c55eb45a137b77aa6baeba5c4557ccc72f1810604a65e6efcd8c6b45d8a541fa27c447dce8359cc3a14225119461697d77d487451ae7f48ec7b5c2a7d53919c7f53d34b4007d78768c9047712a698d9e13a5e1b24b0e11f7dbe9579d86c9b0eef08d381bf55a8eae7baaeb1addeedc7c752358d702ee134d03b49aad9397d84e961aeb6953bc2bc894a29b3981429ee5354b4cc9fc23150cdc4b1fc5758ad50219c721fb578f4701281f1ccd84dc9f12de942da9c00032ff2a040486043227ee66c3556e39e39fc46de144d263605dc2081e3ab145e6e0448983fd67bab51e1d911efd432e09f5a58ff9c44d490e578c6cb5161056901bae03461aed6f1220585b047ddd665de9ce639787dc05980887e32419142a534d2668ddb4bec9f0a2fe7de03ce19f9421438e464ac545b4e3466d20dc81b182ff5ab35bd296a55684d6c5fe600a5d09d34c1f62e23cdca28160f58ca58eb35b7e7036ee962166749e64dfe3f680359938515bd85e873d1b20af65a3adde5504cc65c86273427668a723c343201f47f56cf28cca66745723c94a51805e3c247e50aa2dc4f0fc4f5082ee57d98254c8400aa40d492c01453c9973f03cb1291f6ba573d8f559213031de61e2dfaf7fb0f3cbc366eb737ae6d1a545ff8b82881ada5e3ffee51753442e908935a77a9cb0433413f0bac4b002d8582e30e4e34cc312911da407dd052a29f88c53fd4db93e9b984b18494a2e98bf51cce9d0cc781a9824b19f956834136e15f3b660a464223c94e674a4d6509b3b22655536036e688178ec4cba14db98d2fe57d9c012458690b80543e887b347c66e474fddce9a9a1d994aa2018ab4d146b68502f378d25a3ee215440865715ed8ed9974131ee3b3d380134af7fd0459478cd2186dd1075bf61aeccf05fb0756f001470df6d9e3dd09206210a13029dfd0aff80ba8e03bcf72acc0db82bc7fd003d7c77287e1d6c9de11a16288f5c5dfb70d0a1b2a9456cbca4e7e82716a4e8c6a190528e052e753b54908e075c15491f645a76b30cbba4dcbfd5a6e6144edfb9b4010c5c0e9dbd899c80a966db941d4870db4e1e8fc93ebdd292ad4b2cefffb372f70c4c022620b08367227c248f93130b18bb6d8c54a2700239656722de7f370f4ef11fcd8ee575c562edb7f9aace1256984cc4db848715f2f0db2cc3d8b3137b2559a2604e42c810b36ed20dbd9abce08f832da49b371431bb508387c4ee320aae292ba7aaae22867c9e6af560d7a3bbe9ed3e2a3603c54a59ebcc3943f2ad7bad8e70462f4fcd4fde877b238cf4c9dcdb2c7bb8ed00dc74983ecedeada3635de298bf511fadbc74d21a2ebd0a22b7f50a043335de67d1f835f45df319e4b799cac84ccce0d8037cb045029a6b2e73f56f4009a88f753a50b8467a739cee894db1cd9fc1c2d51f091f52cf85429dc08a82503c7e6878f42294de92ae48d1363d3e15f7db04b83eab6473d3502b1f2867e877c3b09729eb1b2720726e6274c7f93624efc973b7543a95f494bc7f15cdf7e599847969f043c200bf53339f85201bcad6ce5e3d08a34bd250f23685f4ba13583cf54730353c41290cd395eb4cbd0a2a4166dc29fba50473fcee7ee07284a170d8dc6fbb60efdf4dc2ffe47c6e4f4a3dc65988105ceaad38c97a7c9355f9317230f62f4ab9fb5201652a48640f5280fc1dd501a472780311b6ed586d4c03dc52e26bccc5e7fffb78d061331aebb31ab31674c56848f9eefa8ef5008823309f45b05628ea916acfe58596c6bf576d5b2f575258626516559cc9a40df58dcb12e9b3220fff9d3a4c0c11d16ad9074a29076763fbe208fe8bb7c2b395bf7a8db5aa9096de975cfe2f18532cf8085471c0fd1d8389155347e5a62d6b09fcf300c1078ec2e841022611cfb36285c9ff81b8b513923aa97bbe26cfb8b3efabf7c3e604bb4780a7df6f62d20bffee9eec06481a45abd8c9fa75faaec5b928b3e25e406daf44278d1a8c8b7c8fe7a2ac16efb5c5050ddede6d2b1b59ab3527015ae60a46a9cce4edf5418bc61dc5b9e7df0952f6fd847c0763b30019a2b796089266f8e902db3cdc448c19d8ebf1b8109a2be0c89472d2202c7986bbd8c3ac820a4bad69e07f00b30394f3f8686a1b88ee20e708a5d394294aecf95921141d3b1a1790333ac2e949a10fba602219236e9b14a00a29531f82f8efc105bf38d3feadb26711bddb825e6e4408e512f67f4178446466be00573d1b9ba5d1acf3fc07434ec13b5c21d697134f0fdbefcd15cb76a52365c49839398e055938f87d9dbbba53c2926746d380528f1260341550e6f3047da81e8ad95ec65a67567d4d3cd0b228d830b8d834b998f110b6edff497388c908e42d620ec31aa3cdcd390738901653273c2e8cb6229135680c9e344b0db00d92c64ff236711afdae837d7f67252b4f420912e2b425c3ca8c6dd2b490e99378384547010f4ebc24a6c60d761006b7ea36cc32e2267b87bf8e5e938a2c898702031b3b667e4e5c226c18255273004c045e283b7712f21abb5c50657d62266d5b47f195cd33b5384f00a613808a3ce35d9c9024c585885ffe80c4c7e0afb4da0de76b016ad315fa7b5efd1fa747ef22c16d418b9a8e6ce3c9be3b41ad1d1ccd65cf4f33d2d48af6f3561ea3ff2688401493561c68ea63fe0c0ecafa747a44f327c5641529864c77fba57dfb3bbe665cff2a79a4a6e3fddd166f1d7d7dcd2625a29839ef5f1ffc3e7877cfbad53332857609aeb77eb5080ab25f2758bdf173b3884f20f378fa3c4ead3a2ce01088753ff7b9c3bdd0bcf8c954bc6604a81fd5715af190adb2636640da3f6b9639d8bc65dafd2a9d2357387748b8dc0189ce06bd17c847621a694fc89b6a45765a62205622c43a40c5da2bc4e737c0ae468a91bb2c09d18e4d02081fac324000378124d099997443c9a990ff01fe3311354286ae92fa72e38fc844bdd41ece3fe4cea5e7cf500d2aa26bf53d296095b08f10e29a58899d859467529b515b59a266b7572e22c28fe323c23fad31cf9f91f7a4011d7556b516b0018584d690cc5f2634941fe0ee58a09bd5ece8ea9017378f82e05bce1d94d115292c548b12d059bab4d525aef5f670bc58217900c3c7f255326806adc9c8e56d927415c0573130fd718c04cc733762e14722dfade186d5af60d74fb58de41048982232d5d202ade40f3a06410ecde80f3835c6a96418964dc90e158138937090074b5e79e53d505e7a60e28974d2fbae7e0984328db7eea92bb2d71025588e7823a472690e1588880c99b3982735e31c178af0f30cf68b2acb33018750bcce90715c49605297dd7ca047cb2681972b7f2c5f328be4602d76db030521ca9b1a67e3343ae08a5ddd0c3f067f70df07de729612986124562a8e3650587696bd9a5e86854568b10e0f994ed59de30d8490ff7d084e4f04b66e706f2a2a9505c9ba5e99e64070c5c3fa26ad21ddfa1381b7daa19ca7534549b0f4f14fa9a00ca0134d07551d999a506e33dc2b267df7bf9783b5e6e99edc8172bd368029a1469f5ac72042111f1ed9dbd4140f715ddd87ebc82ecb7117f42afe4fba33c03c5b6af4579098f607f53a08e49a543497461f9a64fd3f3068b03ea015a220798da307913c707e098ca49c611a7d9acf8a882f45f196469e21613f96206449ed74fb12fe9003b1765c1fc13d485e171f46deea7af63686c0b18abe440197c8bae4f148e564c8ab3576c614b15dc336e07b4efe7fbb799229a0a52cb2c7ba60bb461bf65fe3548ddc7cf28d91bd3d8557191f9d0777f792c9bd1eb63d17ba0fc37f3b4458214f7ba96b3116ac8bd11bf08a9985e5ddddeff8419a33af431db115853ca1d48351cc21175a80caa93a3078bc7f6a2c1d5912d45d2b53974ed5db87e99b817960e386593e4db7a816824cb93853d31fe5c68a268e70715a18a4e6ad2486fbc79d928818ec686fc95338c690303558033074e8ed0d141b5119527f0d59bfb1019cd037e739ff5fb86a4cfd7784c4dbbd4d565a6b7912312e37b865499094146c30bfde2ae6254ef4a3deaefc043a45a49c32901cf0ec23fabf5409dcad02869937537f6e4e91ab2d20b53cd18f47aa498a7bf882b4ebc813958496f4ef53ed6a1caf48a7f7502671190e15ad6c3d42d780c4a2e3f54b0521d94927b983ef690ccab4ee5daaa7f76267e93475c30fe4493fa10064aaf790c8abc7e352784597c1b9277e30c4840471411f69bfdebcee7acc949c8f17b6af6cb3010b31cb2cc5423780acf2a7b5e46c7a7afe1806fd2adcb4e0cad5c26fc3424d492ee8cb1798d5c83530fbf608c8465a88b49171b331a1589cbbd5eb10e4e4f96f82dbb236c9c57986275d0fa3257124a31fa75511a45056bcb22cf1a060c14209271826eadf5ee5f18b94d7e2386f100ca56b27fe17e8c326a558e214f587fc79312a3f15084f3d96c5536215bc01d68cb6d13e07e161fc81ef3eba9f43124673d0d5c6b7441aeb8928473b2cbcb1408293c8d197a41535fdcae210a27d6048081d34da7137918acb29d30fc6fbf6a1421eeed08e0fdf48b6aaead5dd92904960ea9a09b9745c28d99a2d64c31edb10c7b46ad9d794dffe25c8dad5cd88dd89bcb760ec21c48a53c68e45abbd70416ef9796e9de21e27c6383eb4b08d40b57f36b4778d27e5296c7006a11dbbeb79458f6a84f6a0ec251c48a653637afba68180f671fec90c7322b8fd931ad6ac300913627f339751d583cdaf7776ca43aa48941a8a508bae71d19822e8031c64394d98b9748056831587f99290839524b13f0bcc9ec5211238c74acf6fd8c276a1a21438fb7fd2a1d47eea4f0e8cbbe460879934182c45b368c7a4acc5271d3ac185a16b54de14688cdacf3e68ee9bd6c0c582d930aebe7693538328be3b38e6a7e31cf1476e703d6c7058cc0e7a96e2eed33ddbd015f219d1f5c915a80ef6033b54da8043920402c9746e4271b9fb8fa5a68bb43650316477ba57b3825a58bc749a56aa5c40ec8667191072999f73a91fd81a797960e44403d4341cd5b9f75c2b420eef831ce7db932fb52f8ad3e0ef819712a816a7830df8085a9cb10f460fb5ec81ca28a7ca3fcbe8508966d8c40c245508b47e6be1bf49d82884846fc1c0537fef7ba1254b2b00e0f00eaf5f1a4a2275ab6939d82492a0ef314a47d5c86b8950d919ffea85e4b5fb8bad583ab85689266654ea3c741b40f7e414b7fc3c06800cd665d2b3e072d8eb0884df2e8569664301a2ce6429b1282039afcec2c738331b778b94f8d4fbf704a0b66782a6bc4be5d63a2727558e5d00a2f41636374d9929c09bbfd141e0f53ce19e43f1afa5c99191a2c4a5b32d63877a2a169edc92da141a40b5ff3b94676b21831d0f6fb6321dbe258bc6fac27f58f73d63b4a81e53724cf21a0be6bd5e77c38b28803e01acdb435d4a6ca7de52f72a2d5703babb3857667f2fc656a088b932d4c4f9fe96890322e5bf80cac191a2505e4e6cbfd216fd532836d3c0439d403e19e5b1712cf04fc5f9b16aa9b5216e8889e09b772daf2b2b43160700b8f6b5b4c6886b417fb4d5ff4eb886530d6187684a45a82438b5cb610ceb054e53ef3d57e7fc5731f2c467bfe9096e79f4c352538b761855ca56d59ee8313bbd3d16d85490a8c56011633978c8cb592b75f023f59f0525b52c2ea3def029e0e99c9e574fb08a3b36d8a276fae963027b4becff367068dc7a76b17fbfe3b16f23e85491c8db65947da07e42d0e01e2154c0e4b97330ae042601e5de5390e7c4c414ef53c8b52a947fdcf2719589329fc8718a462a92d38438451160654ff3034a92033a1fdd734490988eb32e91b15878ee62399e2e08518c5fea38ea5634f112feb71f5b3b4e1bd77e4c45fc57d5fa62d1b6eb2c8a06afb0b8f688e5fd315f901314f94577b2a668e717f45b2dea18f7b6c8a7e3264f71dcafa3ba73cbc2e102683b11daf656e41c97b5dfe33b20ed89ab7c6524620c8df840ea1742e1d375b7ba1ccba77a3ea5b2f64c151af926fbf46a3753cb3a587271e9d9cee3febdfd72f3565596ec372c0b02a736806bb8417e95a5b7d8968f50d0184ac1e337c055d3191f65c5fbfce9b9406b1f64b5e766667e404d1762633c766b5500a0f57abd3a3763f7b2bce69622593915b16a26d21346504c257ff8aacb7337d995f1e8e75db94be8277e1200c8abd86e33d9508af2025023804579d5d2e8d9dccbaaa6a401ce336a4b56a95ae23e0648278955afbe868880f45ac2c2df9b727b5f1359992d2c95069343dd2364b1eded4533c796481e05e121df0709610fb6fe2d25d444a9ae3ac81ec7652e4e2af0f6a06e31185539bce4da54507ab286a7c5e7d6cb167a92c802379db18c30f60b193876e4a27cacca208de1fc67499831a4369ddeed845460b95187fd8d76563e391e2ebd097259839dc79f994ce629929a6b07059402cf3035004c2402e86173330e4dc1569dbb497475134c59ded811a3cb1b1025f3ab12c97cb464faf311a805e8ebccddf40824cbac7e1393f5aa7ba8342e035c434d649a4b5a7e010aa718f5ff0c04aa1d7769d14a4c8b95c8e564c6d3753a94b216136ac1241ec222a2e4ed5550c418e08696d5d383ec9dce6c9cf6dbe270fbf326508097e45fb1d25d188c5c9149feb377d7dcf23dc8ac8b8c779e379b663fd71efb712afec0dc321112bdc6d175036bd3a83bca54134ac678d62c2db369cbc2f4a9bd06f799d8a632ea7c7ee00a27a0f74313a9f46e47791fcf3dacf59c30465d8c69e505f07602bbe27c14004f89c535400f47329bd9348bd4424b9e5c555591bc6f3b5ea6f17d4e2a7064be73b834520bedeab3a19fc0a754d0f44231232b42ec74a6b5d2c7e0cbf0ceb88fbb1f90c2f5cc338347e5ba16063eadabe09ea63339d1f624fda3cbaf1301419f521663fa2e6a3a60f480c28245feaefe5f78319396e8aac002971c5720038bd56625c404056e453ebb79e1f0f59e68a671f127cbf6cc9df783b2469aa94bdbcac1f6737e1d13f4e193d198ba9e18a1a61889c274a9ce44049b3ae5bf7e973650cc3a23a8666755967d98f3ae30b73589f9abdfa537f93ed066ae449134a59dce0c683573f723a6284303b704429ffcaaebb0c6cfbc9e421f01a1dce74eb78a24951bd47fb16938cbb077a05fe8e9d34f9da9d6cea1862300a6638fda5d7229dbb1ba17015f153d3c02eb23ac62d6959d034a78b5f818c624638532262e8f8ab4ea4897f6ee94849637ec554a47b5a173a8eba361ce97c69054a5315c5bc81a891a8401d7d731c09d22836d9a15a7868f6aff147c1d98b6d4c1aed5ae404b67b2283a496ec6c807c9f2bb6cb3b1df01b4a553b87ea0534f307e8fa5b6fe07a62793bffa84af00408d889ab43abaad2d4a4190eb37ed64e6a4f3d339086f881fc6fa1c15fcd83c86213ebf2a93ea5a99ee46abf3257e68a1ec401a302863a0e079b8f65955fb259ac3ac465ec5d511dca46a5920967ed722ae311955cf50eb1398082bf5d7765eb54758aa2adfa9e54fe4dbdc0dccb3bf92615df839f555c426ed9b8a55c9607e692804223c95dc266525d52da4d54d8b4c7dbcdb7bdcd8f559cd17642c37a1f27ec62c8686da038b5c34f419ce52743e9d09ed30c5e7e9460db68706c4c223f5efa51e9b13b1d66f35d3da316379f2aaec652ff82b4064384123019407bb9dddba5c9f25ccad20a65989071bcc5e548b9d24bc57ee88ece503b6354e4c0e35f1c0c5c49c91a54ca15e8412dec6ef576864e3f2e54c2caa74edb3f103d57ae165c2b02661ee37233d421c912f639d0966b5b41f3dd42dfd34bfd306df2394754b3d0df79063b1ec6ea6658ab67a03c5543f50a0241292e83cadea9ccdd82e6d85ab53d04a1b18dc1ab96dfe705584251d4c3a645d4884fdcbad28b853def219d7e6fab0ec2bbef7093075c927b716fe8c645cc4f5975bc61b3a0366c7c39818642bb6369f2a13726af8c29dae285bb8c6b0baf41b965324552806ba2b8af6c692f928ed2887596af77faab19d7592e9ee751f50828f67b314ea2a3f108f85a3a4f173385322ca6ce08e529068674e485e6f3f5d55815f5ee72fe10909b49ea5ffa7b727e526ab17e32fc11b02a24b7331836a5a911ab6cd1d3a298dc5359d75771c77b6795bf6796ad258c59598b169981e1c556d165f3f39d5254f433ad4243949a886c553610feb2c77956eeb786216025a914fecafb95c13c2bbdcf4912449afe64e4af198fbd999c72701b2040dcc2b8fa52bcf522f375dcdc9133c83e464b376be00e0c78b7a1cdf107201bc53107087be5c0fb20fdefa1f72771c9105df153c3aa2ee41e1bfd5742ee2089d650db44011cd3d6e324c98c1269b52fc76e1d737ab967de5b233c599cbd3c325f92eadd6f8e7497327624eba050ee1630de121df4d66632a142a2c714edc992833af00b4c08e313591bf74e7e5c1a7f560fa9422e26491180d9935630b0be05040ba915bf59417b91b5326647ac6df16cdf6ab8f3497e2b566ceb53948b685703425c15f0e9eb8732526980ddebc75e6ab28778d3adb08e48f24ea8b021e94a35a60a9e8b6f0f13d5ca7c6bc73e86643b6cd430e02337971e9fab08e2590e97675c9ed3950c60e6aca834a5628171e8ee65f98478f97238e53f1b5fb5ca1bd1ba7c942abff881c3a855e701878b28b358736ff0ffce1568f2443bdbfd72a3120018fdec63aa6dbb12ae35a7e3727dce6ba612b297e36f8ea80adcd2b4c921c8042a75aa3070798749cda80a6b5c8d4f1292f54407093f308cace2a5c9724813b1e1e0af34fdd1a613d89c61469786480b235ccddb7b41f7c4ab1eb6fb585b352e02376f7777f075d6256fa9ac0df27d36dc3ce3e6e3fe156a06f0fb94e250c19ea826e1ddc18194f138b02b138c7feb33cdcb0308dd214071a3c35612c9465f8baff5cc74c8e62a76b11e59f5e0519cc9f0f2c7bfdd9b05a37b9ece3020cd80e45124b4ce128bade7beb64335ae8c30f7428e418046f921b5ac743b3df4d4a43922cd896bb0a5aeaaab07721e512b4df49a8c08ff37d5a0df2a2ab74fa75a0fa8a3258249a6011f6df8b2ef4fe35f591f1b9ed239b2ba12c7663d9d2b171fddcab91ae9ab811b107f2b8abd4ade39c450737cb2abfeac93848bf17045fdbaddfc88e34e594f70c7fbea50cce06f610042d6e4522f06096f862dcfc4cd798422868e719dba6a1537d6393b23601756c2af26d1c1b8db17b9c65082c27d0ba9cc13eddc10a160a3d92f673bab6c2a655919a7d947eb090aa387c0bbbe7aaf0e35150f342d66eac4fc5f4fa24606bbe2e2789cf6e3e09adb9757677e641e882837bff5faad29e32325b44fb66610ccd3d2a2675cb955a89b56132c92519238890cef5d87652a976e770fc83bd109a03281d1cd2667e8876186e825913df6b5348b04bddacd51d4eddb890c77bbb87ab9508318540ca9beb2c5bf823ae998f42c6ee57b81cbfb57b6a81dd85a101cc7c5236598ba8121a1e30fe602d8bb8ccc147d2e4ba74da1b4f1a3d632f42ed7ec0aacee94da4ab68e9fe40c8ebd11f580cd1b649951cade2e926918798bd9aedcf46483e0f9c1822baef3faac31e30b1277962b2c8735b2225faadccfbbb7fa2a07cce96b8f34bfba77abb0a95ce377f6502bb9b0d2b708b11f0be1ad8f602c2636ef4643fa585b3d5bf020708ae7687a64239a5ec960adc28ff394b0ff23357024189fe0c06246fca0da2eaf8e4f8c0f195d60984b6829d77cde762525a71ad674501c7028ce53e6c7a19114227f32914e6f5cee3e41d8ef2171de3e80bccf9ced21a9a927328345344cd21aaf85fe89f0db867c0232d9d719796b893e7a74bd2f09c7c63e7d2f26c545ac3c681df09906a513adc533348bb3e5c5ca7bc03bfc4788fe4fd47be3fdfd9c62540004a8abd713b3ef5570e4d943f6e9cf5a7d19a0d68de84c944f839249be93880f7ce65ff1018ca493c559f46bc53f391c6f63cb3e32141b0d682ceaefa4f96fc1e462e43356ee26ba88388df9bc74812be6f7ee23d71beacb3d8a5a4e30545fee82c05eeeb567eb99d14895a7d78ad30a5a1822fc4e75ba3697915d6a51d54e72063323d1a434b6a299680da322f5340858c6eb6b73a82af346abd7fe9c387261ce3f14802d1c11a29b342e5e36b83a3cce24041fbc16a1d09adcfef965ebee1bcbc3b6a60b618a27a987efbd9d062ac5cf228e157a9fdd0f1f9f9eae5c17e32488e8ce1093ab90fe10550a62f171629af0161a401106f164e636e5ac79ea51e2e6a646d30fc8aed48b0fe7ecb437a863f4376dc938a17d533605ca62c37daa77ea56a3451018c840968b6eb51aad594975ea6cfeeb9d7d9ef725e6d25131495e4de045251b78d75f4c30588cfb256a1cdd678164e4bd463d32c314e003e969569d10a4c9058ac09081a81df2c4d5b35f9db09c390a0b9091cdaa444705fc132652c7a440a7645b699f3939ac3a19605262f16c86471e34cb68b6e1fac7b8971827f8485458179cdeb5ae0b6d0c18d6f3b46008f5a754fbc067ff987bd165fa224ff246a6db9b5b6a7e8e774a06fc7e89f355edb0bd53f097bcce083d0b4a2a0911b9c3d91242d82eeed8f639afb553191eb74a41d1f71bb61496fed0aca3961de95e64acddce603a1d609a9e235b4b217d7c721eaf5e6a30f3b49d1c2e8700b08740de94204bd81c87ab5bf027889c92fa85d1d99fd3366a1689cf9773191f32e3a79267a13e7330c668deaa9bc13385f160944151a1d86752ab92d52ae61e40e2068ac491902a289af0fb31608e414d9dc691e8f128a5ecfb2e312d7e21bc4eb0400de8c83ae7a6cabf9300ffaf66fa862236b28697f332813116a01df859e26b4bcea7cdf795d61f512c9146d6c2b830daf4f58a519da2f7b919b215d89551a23db0d955e33c810be00af9e9df534cc8361fa1f93dcabaa7b3cff7dbb7477e08d6839756d859ec6bf617170382dca2bf4c59751c2f4f3a891f423629cc271cdbf7d818cfb6ef1f8208d793b23a27fa54e57111fc3e279282b9d20be0b284fa02279c50e4edfbad287c4dc3265b594ffb134916039256cfbc5fa7c377f0f896d06f09551e11b0a1ea26c3505bc08e308d0eccbf1d961164e67b1c5615980ff740733682c967a33ad2cc1e0e54671fc84216ca1a2886c4c85f78b97bdeb8ee7f0cc0c051a6f5505e3cbc6d7df5ece46db0b20f250b365a16f5d92dfb3a634ff5d90479bdbb3a0b7e76e0c202cdb1cf6a01bcdb9a8cae66b7f12c2c1dcd6093e86f15d3b47d0793184a2aa8f74fa249e06be6275f91e99e33245b1df5a97646492bbe86ad8dd60bf9196bd5507a20f43dbd47239dd72c9ff0d57c5d935210e74e1cff8ba45f3948931c1062430ca88b015b6ba857421070b56ad7d71b101f5da1bf6b2b60744d543d14915f8e92076b97d588f3ea9440c48eb72b5db09d08aa0e9b256a6518821c4c8b09b3483e8d0200b3b2b452896efbaa337e85cd32ed782291382026a413eeb2339b31a1e6b5d5bce5883c1a892cc5beaaf5703284a2cdac0e30bb24381ea69aa60aa6c42867e7d7699c20b3a431784de79d0571813a9f2aa4e4c8772f15f9ddc2833cab1161160d3778f1a85bd2d56cd7e7715383dcc26e3ee3b9fed0b5f931963d38ca696a70e3faaa00917c9dffa61c8f5780fe2a9abed9c6d694921161eb5613751132cfe5b0712fa2052ce94f7a72e9adbc81e6ef4d52785dfa8963ab7b6828a9f7515bdd10762ae296f9f0141b3385abf2433c7460adce8688996eecbea34a571ffdfe1018c1e6dd53a8abf69cfcbcab234a30dd39dc8f3ac719bbbff25e17f0b4a00d388f5680082bd729766927e73966134bc531e487eef8abb3636ca69a7724ae615a3a30b4820d6af935d7a1417912be154072c7bdfeda8cd4bc1634ae23d664fd35f2d7b29b495fcb4b5cdd4e4bdf9f2d0d362f0fafa7188cc0aef0779073b8eee8eb9135053bb8e3d737fd8cc08251009fc5411821175b9ebb68bb82d0023805c0bd52bc104378722eda9315d34ee711088ce81913a63a08130846d964381a113785f278df65dd5c7e846641b88e5071bb852b04c91b980cf9b913b0ede2737beb937e428b29eb5d8671281da7a8fbc58f718b53a8aa97c230626523a0e211b672b21bebd84176acd56425619b88306022941a7899ac45447f683d546f464b213d0f9c3beab2aecfa672be7c2996be62485e12538a8b24486e733d2f3c2f379dfb7048cf4956f278a76137565d9f5699e9f3f1796f477785f410dbeb79b5e4cea0a9ad47fa63484d1218b9728268f73d6fcab6fba71163f09ee201a3bb4acb33dd84503f16593b856b0ce78467cb3a1b319a05ede0a8f8998add885f59476cf84226a73775f6705e5e18f19b51b9a9ba941c0bdf6c4946053910e05627778ea284596923764c6b327aa2c49f3fe9ea4b6dc6791b1ff431ba222a452223801a20dae2cc1a1b003325f55e067cba67a75b2fd6cce9720207be70c6977cfb8d346cde8e7b69bf89234229e5abf168ccf142d603ae324d5610718e16c92aae09bb197cd7e5a9dce77c45587c04c1227b5a8973ae689b8425290929249f17bc213f8c719f3ef774d1f48811513a4c6e197a15ccb75fa33a50b55f61c40f78bb7947418a0f33088c8852e226070d1183073e9455f28a7cde75dd8308ad79061eff79b361d8950688351c9b8b9d0bc79fcf76276019b9629e7472c0d4e5e8bd41aa85becf9471f80820f3e7c50ccc8df506d597412c5110bbaf99ef31d1fb22210caa983bb4f8e52cb7acba0e8e791737ee1b86d5f7fe05718d3f928dbdbf3bbd44d7a4b6ad7c61365b52b9df779d0f2ba5b34d988e0bc42b0960cfd726fcbbec0d3037222bf3642b9a5c4be4c6c8977d78d7567df7dca69fc66d472889fd092b4e38a59fad6e35837940c3e9a380628d38ff9fabe1a0e8888c74b8a5461ba982b33f30d641eba669fc626e829519e0d770b7436096a295f0f69643f09bc4c731fee714832318e8bd9b8a3b042d62dbae443a8e5b6a11491a768c5ade820468eeccf4b48428da64a120765293b5df7b365dd6fe7ec89cee12578f2d95311bafcd7fc79086e3c78b2f4fd70e865039e9ebb0bf2069119c5be74c40a778710d436893d9a446256b2aa070aa2be201cab82b99421b6d5e3818b017a261659ae72abc5a132feb81d43b991bdfc4a74ba529b873910bf7782a9a1ea8ca8a782ae98fb6a5e226115b66002b698fcc4309dfccf27757016dd6dddbdba9f727ca3e729baba9924a9ac9327ba69079bcf9f0eaa44a85bf6a00e5ffa9a83824f0fd70c6136e34bb356ffd8d3f644ea4679cb8045a748661f74f</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>é¢˜é›†æ•´ç†</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŠNot All Tokens Are Equal Human-centric Visual Analysis via Token Clustering Transformerã€‹</title>
    <url>/2022/04/24/22e32ee5ba59/</url>
    <content><![CDATA[<h4
id="è®ºæ–‡åç§°not-all-tokens-are-equal-human-centric-visual-analysis-via-token-clustering-transformer">è®ºæ–‡åç§°ï¼šã€ŠNot
All Tokens Are Equal Human-centric Visual Analysis via Token Clustering
Transformerã€‹</h4>
<h4 id="è®ºæ–‡åœ°å€-httparxiv.orgabs2204.08680">è®ºæ–‡åœ°å€ï¼š
http://arxiv.org/abs/2204.08680</h4>
<h2 id="å…³é”®è¯">1ã€å…³é”®è¯ï¼š</h2>
<p>â€‹ Dynamic Token</p>
<h2 id="æ‘˜è¦">2ã€æ‘˜è¦ï¼š</h2>
<p>â€‹
ViTåœ¨è®¸å¤šè®¡ç®—æœºè§†è§‰ä»»åŠ¡ä¸­å–å¾—äº†å·¨å¤§çš„æˆåŠŸã€‚å¤§å¤šæ•°æ–¹æ³•é€šè¿‡å°†å›¾åƒåˆ†å‰²æˆè§„åˆ™çš„å›ºå®špatcheså¹¶å°†æ¯ä¸ªpatchä½œä¸ºä¸€ä¸ªtokenæ¥ç”Ÿæˆè§†è§‰tokenã€‚
â€‹
ç„¶è€Œï¼Œåœ¨ä»¥äººä¸ºä¸­å¿ƒçš„è§†è§‰ä»»åŠ¡ä¸­ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰åŒºåŸŸéƒ½åŒç­‰é‡è¦ï¼Œä¾‹å¦‚ï¼Œäººä½“éœ€è¦ä¸€ä¸ªå¸¦æœ‰è®¸å¤štokençš„ç²¾ç»†è¡¨ç¤ºï¼Œè€Œå›¾åƒèƒŒæ™¯å¯ä»¥ç”±å°‘é‡tokenå»ºæ¨¡ã€‚
â€‹
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè®ºæ–‡æå‡ºäº†ä¸€ç§æ–°çš„ViTï¼Œç§°ä¸ºä»¤ç‰Œèšç±»è½¬æ¢å™¨(TCFormer)ï¼Œå®ƒé€šè¿‡æ¸è¿›èšç±»æ¥åˆå¹¶tokenï¼Œå…¶ä¸­tokenå¯ä»¥ä»ä¸åŒçš„ä½ç½®ä»¥çµæ´»çš„å½¢çŠ¶å’Œå¤§å°åˆå¹¶ã€‚</p>
<p>â€‹
TCFormerä¸­çš„ä»¤ç‰Œä¸ä»…å¯ä»¥å…³æ³¨é‡è¦åŒºåŸŸï¼Œè¿˜å¯ä»¥è°ƒæ•´ä»¤ç‰Œå½¢çŠ¶ä»¥é€‚åº”è¯­ä¹‰æ¦‚å¿µï¼Œå¹¶å¯¹åŒ…å«å…³é”®ç»†èŠ‚çš„åŒºåŸŸé‡‡ç”¨ç²¾ç»†åˆ†è¾¨ç‡ï¼Œæœ‰åˆ©äºæ•è·è¯¦ç»†ä¿¡æ¯ã€‚</p>
<h2 id="é¢†åŸŸèƒŒæ™¯">3ã€é¢†åŸŸèƒŒæ™¯ï¼š</h2>
<p>â€‹ æš‚ç•¥</p>
<h2 id="å…ˆå‰å·¥ä½œæè¿°ä¸æ¯”è¾ƒ">4ã€å…ˆå‰å·¥ä½œæè¿°ä¸æ¯”è¾ƒï¼š</h2>
<p>â€‹ æš‚ç•¥</p>
<h2 id="ä¸»è¦è®¾è®¡æ€æƒ³">5ã€ä¸»è¦è®¾è®¡æ€æƒ³ï¼š</h2>
<p>â€‹
ä¸ºäº†è§£å†³ä¼ ç»ŸViTä¸­ï¼Œå¤§å¤šå°†å›¾åƒåˆ†å‰²æˆè§„åˆ™çš„å›ºå®špatcheså¹¶å°†æ¯ä¸ªpatchä½œä¸ºä¸€ä¸ªtokenæ¥ç”Ÿæˆè§†è§‰tokenã€‚ç„¶è€Œåœ¨ä»¥äººä¸ºä¸­å¿ƒçš„è§†è§‰ä»»åŠ¡ä¸­ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰åŒºåŸŸéƒ½åŒç­‰é‡è¦ï¼Œæ‰€ä»¥è®ºæ–‡æå‡ºäº†ä¸€ç§æ–°çš„ViT(TCFormer)ï¼Œå®ƒé€šè¿‡æ¸è¿›çš„ä»¤ç‰Œèšç±»ç”ŸæˆTOKENSã€‚</p>
<p>â€‹
TCFormeråœ¨æ¯ä¸ªé˜¶æ®µåŠ¨æ€ç”ŸæˆTOKENSã€‚å¦‚å›¾æ‰€ç¤ºï¼Œå®ƒèƒ½å¤Ÿç”Ÿæˆå…·æœ‰ä¸åŒä½ç½®ã€å¤§å°å’Œå½¢çŠ¶çš„Tokenã€‚é¦–å…ˆï¼Œä¸åŸºäºç½‘æ ¼çš„æ ‡è®°ä¸åŒï¼Œèšç±»åçš„æ ‡è®°ä¸å±€é™äºè§„åˆ™å½¢çŠ¶ï¼Œå¯ä»¥ä¸“æ³¨äºé‡è¦çš„åŒºåŸŸï¼Œå¦‚äººä½“ã€‚å…¶æ¬¡ï¼ŒTCFormeråŠ¨æ€ç”Ÿæˆå…·æœ‰é€‚å½“å¤§å°çš„ä»¤ç‰Œæ¥è¡¨ç¤ºä¸åŒçš„åŒºåŸŸã€‚æ¯”å¦‚è¯´ï¼š<strong>å¯¹äºå……æ»¡é‡è¦ç»†èŠ‚(å¦‚äººè„¸)çš„åŒºåŸŸï¼Œåˆ†é…æ›´å°å°ºå¯¸çš„ä»¤ç‰Œã€‚è€Œä»…æœ‰å•ä¸ªtoken(ä¾‹å¦‚ï¼Œå›¾ä¸­çš„è“è‰²æ ‡è®°)è¢«ç”¨æ¥è¡¨ç¤ºèƒŒæ™¯çš„å¤§ç‰‡åŒºåŸŸã€‚</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220424202223439.png" /></p>
<p>â€‹ åœ¨TCFormerä¸­ï¼Œç‰¹å¾å›¾ä¸­çš„æ¯ä¸ªåƒç´ åœ¨ç¬¬ä¸€é˜¶æ®µè¢«åˆå§‹åŒ–ä¸ºä¸€ä¸ªvision
tokenï¼Œå…¶tokenåŒºåŸŸå°±æ˜¯åƒç´ æ‰€è¦†ç›–çš„åŒºåŸŸã€‚æˆ‘ä»¬é€æ­¥åˆå¹¶è¯­ä¹‰ç›¸è¿‘çš„tokenï¼Œåœ¨ä¸åŒé˜¶æ®µå¾—åˆ°ä¸åŒæ•°é‡çš„tokenã€‚</p>
<p>â€‹ ä¸ºæ­¤ï¼Œæˆ‘ä»¬ç²¾å¿ƒè®¾è®¡äº†ä¸€ä¸ªèšç±»ä»¤ç‰Œåˆå¹¶(CTM)å—ï¼š</p>
<ul>
<li>é¦–å…ˆï¼Œç»™å®šä¸Šä¸€é˜¶æ®µçš„tokensï¼ŒCTMæ¨¡å—ä½¿ç”¨k-nearest-neighbor based
density peaks clusteringèšç±»ç®—æ³•å¯¹tokenè¿›è¡Œåˆ†ç»„ã€‚</li>
<li>é‚£äº›è¢«åˆ†åˆ°ä¸€ç»„çš„tokensï¼Œä¼šåˆå¹¶åˆ°ä¸€ä¸ªå•ç‹¬çš„tokenï¼Œå…¶å€¼ä¸ºæ‰€æœ‰ç‰¹å¾çš„å¹³å‡å€¼ã€‚</li>
<li>æœ€åï¼Œå°†tokensè¾“å…¥åˆ°ä¸€ä¸ªtransformer
blockä¸­è¿›è¡Œç‰¹å¾èšåˆã€‚æœ€ç»ˆåˆå¹¶å¾—åˆ°çš„tokenåŒºåŸŸæ˜¯æ‰€æœ‰è¾“å…¥å¯¼transformer
blockä¸­çš„tokensçš„å¹¶é›†ã€‚</li>
</ul>
<p>â€‹
å¤šé˜¶æ®µç‰¹å¾çš„èšåˆå·²ç»è¢«è¯æ˜æœ‰åˆ©äºä»¥äººä¸ºä¸­å¿ƒçš„åˆ†æã€‚å¤§å¤šæ•°ä¹‹å‰çš„ç ”ç©¶å°†è§†è§‰tokenè½¬æ¢ä¸ºç‰¹å¾å›¾ï¼Œå¹¶ä»¥ç‰¹å¾å›¾çš„å½¢å¼èšåˆç‰¹å¾ã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬å°†åŠ¨æ€è§†è§‰tokenè½¬æ¢ä¸ºç‰¹å¾å›¾æ—¶ï¼Œå¤šä¸ªtokenå¯èƒ½ä½äºåŒä¸€ä¸ªåƒç´ ç½‘æ ¼ä¸­ï¼Œå¯¼è‡´ç»†èŠ‚ä¸¢å¤±ã€‚
â€‹
ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§å¤šé˜¶æ®µä»¤ç‰Œèšåˆ(MTA)å—ï¼Œå®ƒèƒ½å¤Ÿæœ‰æ•ˆåœ°ä¿å­˜æ‰€æœ‰é˜¶æ®µçš„å›¾åƒç»†èŠ‚ã€‚å…·ä½“æ¥è¯´ï¼š</p>
<ul>
<li>MTAä»æœ€åä¸€ä¸ªé˜¶æ®µçš„ä»¤ç‰Œå¼€å§‹ï¼Œç„¶åä»å‰ä¸€ä¸ªé˜¶æ®µé€æ­¥ä¸Šé‡‡æ ·tokenså¹¶èšåˆtokenç‰¹å¾ï¼Œç›´åˆ°èšåˆæ‰€æœ‰é˜¶æ®µçš„ç‰¹å¾ã€‚èšåˆçš„tokensä¸ç‰¹å¾æ˜ å°„ä¸­çš„åƒç´ ä¸€ä¸€å¯¹åº”ï¼Œå¹¶è¢«reshapeä¸ºç‰¹å¾æ˜ å°„ä»¥è¿›è¡Œåç»­å¤„ç†ã€‚</li>
</ul>
<h2 id="å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„">6ã€å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„ï¼š</h2>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220424203340869.png" /><strong>æ¦‚è¿°ï¼š</strong>TCFormerç”±4ä¸ªé˜¶æ®µå’Œä¸€ä¸ª(MTA)å¤´ç»„æˆã€‚æ¯ä¸ªé˜¶æ®µåŒ…å«å‡ ä¸ªå †å çš„Transformerå—ã€‚åœ¨ä¸¤ä¸ªç›¸é‚»çš„é˜¶æ®µä¹‹é—´ï¼Œæ’å…¥ä¸€ä¸ª(CTM)å—ï¼Œä»¥åˆå¹¶ä»¤ç‰Œå¹¶ä¸ºä¸‹ä¸€ä¸ªé˜¶æ®µç”Ÿæˆä»¤ç‰Œã€‚æœ€åMTAå¤´å°†æ‰€æœ‰é˜¶æ®µçš„tokenç‰¹å¾èšé›†èµ·æ¥ï¼Œå¹¶è¾“å‡ºæœ€ç»ˆçš„çƒ­å›¾</p>
<h4 id="æ ¸å¿ƒ1-transformer-block">1ï¼‰ æ ¸å¿ƒ1ï¼š Transformer Blockï¼š</h4>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220424203928917.png" style="zoom:50%;" /></p>
<p>â€‹ é‡‡ç”¨Spatial Reductionå±‚æ¥é™ä½è®¡ç®—å¤æ‚åº¦ã€‚Spatial
Reductionå±‚é¦–å…ˆå°†è§†è§‰tokenè½¬æ¢ä¸ºç‰¹å¾æ˜ å°„ï¼Œç„¶åé€šè¿‡è·¨å·ç§¯å±‚é™ä½ç‰¹å¾æ˜ å°„åˆ†è¾¨ç‡ã€‚å¤„ç†åçš„ç‰¹å¾å›¾ä¸­çš„åƒç´ ï¼Œæ¯”è§†è§‰æ ‡è®°è¦å°‘å¾—å¤šï¼Œè¢«ä½œä¸ºKå’ŒVè¾“å…¥åˆ°å¤šå¤´æ³¨æ„æ¨¡å—ã€‚å¤šå¤´æ³¨æ„æ¨¡å—åœ¨tokenä¹‹é—´èšåˆç‰¹å¾ã€‚
â€‹æˆ‘ä»¬åˆ©ç”¨Depth-Wise
Convolutionæ¥æ•è·å±€éƒ¨ç‰¹å¾å’Œä½ç½®ä¿¡æ¯ï¼Œå¹¶å»é™¤æ˜¾å¼ä½ç½®åµŒå…¥ã€‚</p>
<h4 id="æ ¸å¿ƒ2-clustering-based-token-merge-ctm-block">2ï¼‰ æ ¸å¿ƒ2ï¼š
Clustering-based Token Merge (CTM) Blockï¼š</h4>
<p>â€‹
å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬çš„CTMå—æœ‰ä¸¤ä¸ªè¿‡ç¨‹ï¼Œå³Clusteringå’Œç‰¹å¾Mergeã€‚æˆ‘ä»¬ä½¿ç”¨é€šè¿‡Clusteringæ¥å°†vision
tokenså½’åˆ°ä¸€å®šæ•°é‡çš„èšç±»ä¸­.</p>
<ul>
<li>Clustering
<ul>
<li>åœ¨Clusteringè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ç§åŸºäºkè¿‘é‚»å¯†åº¦å³°å€¼èšç±»ç®—æ³•(DPC-KNN)çš„å˜ä½“ã€‚</li>
<li>ç»™å®šä¸€ç»„ä»¤ç‰ŒXï¼Œæˆ‘ä»¬æ ¹æ®å…¶kè¿‘é‚»è®¡ç®—æ¯ä¸ªä»¤ç‰Œçš„å±€éƒ¨å¯†åº¦Ï:</li>
<li>ç„¶åï¼Œå¯¹äºæ¯ä¸ªä»¤ç‰Œï¼Œæˆ‘ä»¬ è®¡ç®—è·ç¦»
ä½œä¸ºå®ƒä¸ä»»ä½•å…¶ä»–å…·æœ‰æ›´é«˜å±€éƒ¨å¯†åº¦çš„ä»¤ç‰Œä¹‹é—´çš„æœ€å°è·ç¦»ã€‚
å¯¹äºå±€éƒ¨å¯†åº¦æœ€é«˜çš„tokenï¼Œå…¶æŒ‡ç¤ºå™¨è®¾ç½®ä¸º
å®ƒä¸ä»»ä½•å…¶ä»–æ ‡è®°ä¹‹é—´çš„æœ€å¤§è·ç¦»ã€‚</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220425150522682.png" /></li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220425150412421.png" /></li>
<li>Î´i æ˜¯è·ç¦»æŒ‡ç¤ºæŒ‡æ ‡ ï¼ŒÏi æ˜¯å±€éƒ¨å¯†åº¦æŒ‡æ ‡</li>
<li>æˆ‘ä»¬å°†Î´i å’Œ Ïi ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°æ¯ä¸ªtokençš„å¾—åˆ†ä¸º ÏiÃ—Î´iã€‚</li>
<li>åˆ†æ•°è¶Šé«˜ï¼Œæˆä¸ºé›†ç¾¤ä¸­å¿ƒçš„å¯èƒ½æ€§å°±è¶Šå¤§ã€‚æˆ‘ä»¬é€šè¿‡é€‰æ‹©å¾—åˆ†æœ€é«˜çš„tokenæ¥ç¡®å®šèšç±»ä¸­å¿ƒï¼Œç„¶åæ ¹æ®ç‰¹å¾è·ç¦»å°†å…¶ä»–æ ‡è®°åˆ†é…åˆ°æœ€è¿‘çš„èšç±»ä¸­å¿ƒã€‚</li>
</ul></li>
<li>Merge</li>
</ul>
<p>â€‹
å¯¹äºtokenç‰¹å¾çš„åˆå¹¶ï¼Œä¸€ç§ç›´è§‚çš„æ–¹æ³•æ˜¯ç›´æ¥å¯¹ä¸€ä¸ªèšç±»ä¸­çš„tokenç‰¹å¾è¿›è¡Œå¹³å‡ã€‚ä½†æ˜¯ï¼Œå³ä½¿æ˜¯è¯­ä¹‰æ„ä¹‰ç›¸ä¼¼çš„ç¬¦å·ï¼Œå…¶é‡è¦æ€§ä¹Ÿä¸å®Œå…¨ç›¸åŒã€‚è®ºæ–‡å¼•å…¥äº†ä¸€ä¸ªé‡è¦åº¦è¯„åˆ†Pæ¥æ˜ç¡®è¡¨ç¤ºæ¯ä¸ªtokençš„é‡è¦æ€§ï¼Œå®ƒæ˜¯ç”±tokençš„ç‰¹å¾ä¼°è®¡çš„ã€‚ç„¶ååœ¨tokené‡è¦æ€§çš„æŒ‡å¯¼ä¸‹ï¼Œå¯¹tokenç‰¹å¾è¿›è¡Œå¹³å‡:</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220425150756742.png" /></p>
<p>â€‹ å…¶ä¸­<span class="math inline">\(C_i\)</span>è¡¨ç¤ºç¬¬<span
class="math inline">\(i\)</span>ä¸ªèšç±»çš„é›†åˆï¼Œ<span
class="math inline">\(x_j\)</span>å’Œ<span
class="math inline">\(p_j\)</span>åˆ†åˆ«ä¸ºåŸå§‹tokenç‰¹å¾å’Œå¯¹åº”çš„é‡è¦æ€§å¾—åˆ†ï¼Œyiä¸ºåˆå¹¶åtokençš„ç‰¹å¾ã€‚åˆå¹¶ä»¤ç‰Œçš„ä»¤ç‰ŒåŒºåŸŸæ˜¯åŸå§‹ä»¤ç‰ŒåŒºåŸŸçš„å¹¶é›†ã€‚</p>
<ul>
<li><p>Final</p>
<p>æœ€ç»ˆåˆå¹¶å¥½çš„ä»¤ç‰Œä½œä¸ºæŸ¥è¯¢Qè¢«é€å…¥ä¸€ä¸ªTransformer
Blockï¼ŒåŸå§‹çš„Tokenç”¨ä½œKå’ŒVã€‚ä¸ºäº†ä¿è¯
é‡è¦çš„tokenå¯¹è¾“å‡ºçš„è´¡çŒ®æ›´å¤§ï¼Œåœ¨æ³¨æ„åŠ›æœºåˆ¶ä¸­å¢åŠ é‡è¦æ€§æƒé‡Pï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220425151005438.png" style="zoom:50%;" /></p>
<p>å¼•å…¥tokené‡è¦æ€§è¯„åˆ†ä½¿æˆ‘ä»¬çš„CTMå—åœ¨åˆå¹¶è§†è§‰æ ‡è®°æ—¶èƒ½å¤Ÿä¸“æ³¨äºå…³é”®çš„å›¾åƒç‰¹å¾</p></li>
</ul>
<h4 id="æ ¸å¿ƒ3-multi-stage-token-aggregation-mta-head">3ï¼‰ æ ¸å¿ƒ3ï¼š
Multi-stage Token Aggregation (MTA) Headï¼š</h4>
<p>â€‹
ä¹‹å‰çš„ç ”ç©¶è¯æ˜äº†åœ¨ä»¥äººä¸ºä¸­å¿ƒçš„è§†è§‰ä»»åŠ¡ä¸­ï¼Œåœ¨å¤šä¸ªé˜¶æ®µä¸­è¿›è¡Œç‰¹å¾èšåˆçš„å¥½å¤„ã€‚ä¸ºäº†èšåˆç‰¹æ€§ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§åŸºäºTransformerçš„å¤šé˜¶æ®µä»¤ç‰Œèšåˆ(MTA)å¤´ï¼Œå®ƒèƒ½å¤Ÿç»´æŠ¤æ‰€æœ‰é˜¶æ®µçš„ç»†èŠ‚ä¿¡æ¯ã€‚</p>
<p>â€‹ ä¸‹å›¾
(a)æ˜¾ç¤ºäº†ä»¤ç‰Œä¸Šé‡‡æ ·è¿‡ç¨‹ã€‚åœ¨ä»¤ç‰Œåˆå¹¶è¿‡ç¨‹ä¸­(ç« èŠ‚3.3)ï¼Œæ¯ä¸ªä»¤ç‰Œè¢«åˆ†é…åˆ°ä¸€ä¸ªèšç±»ï¼Œæ¯ä¸ªèšç±»ç”±ä¸€ä¸ªåˆå¹¶çš„ä»¤ç‰Œè¡¨ç¤ºã€‚
æˆ‘ä»¬è®°å½•åŸå§‹tokenå’Œåˆå¹¶tokenä¹‹é—´çš„å…³ç³»ã€‚åœ¨tokenä¸Šé‡‡æ ·è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨æ‰€è®°å½•çš„ä¿¡æ¯å°†åˆå¹¶çš„tokenç‰¹å¾å¤åˆ¶åˆ°ç›¸åº”çš„ä¸Šé‡‡æ ·tokenä¸­ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220425152443159.png" style="zoom:67%;" /></p>
<p>â€‹ MTA
Headå°†ä¸Šä¸€é˜¶æ®µçš„tokenç‰¹å¾æ·»åŠ åˆ°ä¸Šé‡‡æ ·çš„è§†è§‰tokenã€‚ç„¶åï¼Œè§†è§‰tokenè¿›å…¥ä¸€ä¸ªTransformerå—ã€‚è¿™æ ·çš„å¤„ç†æ˜¯é€æ­¥æ‰§è¡Œçš„ï¼Œç›´åˆ°æ‰€æœ‰çš„è§†è§‰tokenè¢«èšåˆã€‚æœ€ç»ˆçš„tokenï¼Œå…¶tokenè¡¨ç¤ºçš„åŒºåŸŸæ˜¯é«˜åˆ†è¾¨ç‡ç‰¹å¾å›¾ä¸­çš„å•ä¸ªåƒç´ ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°é‡æ„ä¸ºç‰¹å¾å›¾è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ã€‚</p>
<p>â€‹ æ•´ä½“è€Œè¨€ï¼Œæœ‰ç‚¹åƒUFormerçš„é‚£ç§å½¢å¼ã€‚</p>
]]></content>
      <categories>
        <category>â“¶ è®ºæ–‡é˜…è¯»ç¬”è®°</category>
        <category>CVç›¸å…³è®ºæ–‡</category>
      </categories>
      <tags>
        <tag>Transformer</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŠVision Transformer with Deformable Attentionã€‹</title>
    <url>/2022/04/24/503bff4618b7/</url>
    <content><![CDATA[<h4
id="è®ºæ–‡åç§°vision-transformer-with-deformable-attention">è®ºæ–‡åç§°ï¼šã€ŠVision
Transformer with Deformable Attentionã€‹</h4>
<h4 id="è®ºæ–‡åœ°å€-httparxiv.orgabs2201.00520">è®ºæ–‡åœ°å€ï¼š
http://arxiv.org/abs/2201.00520</h4>
<h2 id="å…³é”®è¯">1ã€å…³é”®è¯ï¼š</h2>
<p>â€‹ Deformable Attention</p>
<h2 id="æ‘˜è¦">2ã€æ‘˜è¦ï¼š</h2>
<p>â€‹
Transformeræœ€è¿‘åœ¨å„ç§è§†è§‰ä»»åŠ¡ä¸­è¡¨ç°ä¼˜å¼‚ã€‚å…¨å±€çš„æ„ŸçŸ¥åŸŸä½¿Transformeræ¨¡å‹æ¯”CNNå…·æœ‰æ›´å¼ºçš„è¡¨ç¤ºèƒ½åŠ›ã€‚
â€‹
ç„¶è€Œï¼Œç®€å•åœ°æ‰©å¤§æ„Ÿå—é‡ä¹Ÿå¼•èµ·äº†ä¸€äº›é—®é¢˜ã€‚ä¸€æ–¹é¢ï¼Œä½¿ç”¨è¾ƒä¸ºå¯†é›†çš„æ³¨æ„åŠ›ï¼Œä¾‹å¦‚åœ¨ViTä¸­ï¼Œä¼šå¯¼è‡´è¿‡å¤šçš„å†…å­˜å’Œè®¡ç®—æˆæœ¬ï¼Œå¹¶ä¸”åŠŸèƒ½å¯èƒ½ä¼šå—åˆ°è¶…å‡ºå…´è¶£åŒºåŸŸçš„æ— å…³éƒ¨åˆ†çš„å½±å“ã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨PVTæˆ–Swin
Transformerä¸­é‡‡ç”¨çš„è¾ƒä¸ºç¨€ç–çš„æ³¨æ„æœºåˆ¶æ˜¯ä¸æ•°æ®æ— å…³çš„ï¼Œè¿™å¯èƒ½ä¼šé™åˆ¶å¯¹äºé•¿è·ç¦»å…³ç³»çš„å»ºæ¨¡èƒ½åŠ›ã€‚
â€‹ä¸ºäº†ç¼“è§£è¿™äº›é—®é¢˜ï¼Œè®ºæ–‡æå‡ºäº†ä¸€ç§æ–°çš„å¯å˜å½¢çš„Self
Attentionæ¨¡å—ï¼Œåœ¨è‡ªæˆ‘æ³¨æ„æ¨¡å—ä¸­ï¼ŒKVé”®å€¼å¯¹ä¸æ•°æ®ç›¸å…³ã€‚è¿™ç§çµæ´»çš„æ–¹æ¡ˆä½¿Self
Attentionæ¨¡å—èƒ½å¤Ÿå…³æ³¨ç›¸å…³åŒºåŸŸï¼Œå¹¶æ•è·æ›´å¤šçš„ä¿¡æ¯ç‰¹æ€§ã€‚ â€‹
å¤§é‡å®éªŒè¡¨æ˜ï¼Œæˆ‘ä»¬çš„æ¨¡å‹åœ¨ç»¼åˆåŸºå‡†ä¸Šå–å¾—äº†æŒç»­æ”¹è¿›çš„ç»“æœã€‚</p>
<p>ã€ç±»ä¼¼äºDCNå¯¹äºæ™®é€šå·ç§¯çš„æ”¹è¿›æ€æƒ³ã€‘</p>
<h2 id="ç ”ç©¶èƒŒæ™¯">3ã€ç ”ç©¶èƒŒæ™¯ï¼š</h2>
<p>â€‹
Transformeræœ€åˆæ˜¯ä¸ºäº†è§£å†³è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡è€Œå¼•å…¥çš„ã€‚è¿‘å¹´æ¥ï¼Œå®ƒåœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸæ˜¾ç¤ºå‡ºå·¨å¤§çš„æ½œåŠ›ã€‚Vision
Transformer
(ViT)è¿™é¡¹å¼€åˆ›æ€§çš„å·¥ä½œï¼Œå°†å¤šä¸ªTransformerå—å †å èµ·æ¥ï¼Œä»¥å¤„ç†ä¸é‡å çš„å›¾åƒpatchesåºåˆ—ï¼Œä»è€Œäº§ç”Ÿç”¨äºå›¾åƒåˆ†ç±»çš„æ— å·ç§¯æ¨¡å‹ã€‚ä¸CNNæ¨¡å‹ç›¸æ¯”ï¼ŒåŸºäºtransformerçš„æ¨¡å‹å…·æœ‰æ›´å¤§çš„æ¥å—åŸŸï¼Œæ“…é•¿å»ºæ¨¡è¿œç¨‹ä¾èµ–å…³ç³»ï¼Œåœ¨å¤§é‡è®­ç»ƒæ•°æ®å’Œæ¨¡å‹å‚æ•°çš„æƒ…å†µä¸‹å…·æœ‰æ›´ä¼˜è¶Šçš„æ€§èƒ½ã€‚</p>
<p>â€‹ ç„¶è€Œï¼Œåœ¨è§†è§‰è¯†åˆ«ä¸­è¿‡å¤šçš„æ³¨æ„åŠ›æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œå­˜åœ¨ç€å¤šæ–¹é¢çš„å¼Šç«¯ã€‚</p>
<p>â€‹
å…·ä½“æ¥è¯´ï¼Œå¦‚æœæ¯ä¸ªæŸ¥è¯¢patchè¦å‚ä¸çš„Keyæ•°è¿‡å¤šï¼Œä¼šå¯¼è‡´è®¡ç®—æˆæœ¬é«˜ã€æ”¶æ•›é€Ÿåº¦æ…¢ï¼Œå¹¶å¢åŠ è¿‡æ‹Ÿåˆçš„é£é™©ã€‚ä¸ºäº†é¿å…è¿‡åº¦çš„æ³¨æ„åŠ›è®¡ç®—ï¼Œç°æœ‰çš„ç ”ç©¶éƒ½åˆ©ç”¨ç²¾å¿ƒè®¾è®¡çš„é«˜æ•ˆæ³¨æ„åŠ›æ¨¡å¼æ¥é™ä½è®¡ç®—å¤æ‚åº¦ã€‚å…¶ä¸­ä»¥Swin
Transformerå’Œé‡‘å­—å¡”è§†è§‰è½¬æ¢å™¨(PVT)ä½œä¸ºä¸¤ä¸ªæœ€ç»å…¸çš„æ–¹å¼ã€‚</p>
<p>â€‹
ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æœŸæœ›å¯¹äºä¸€ä¸ªç»™å®šQueryè€Œè¨€ï¼ŒKeyå’ŒValueçš„é€‰æ‹©åº”è¯¥æ˜¯å…·æœ‰å¼¹æ€§çš„ï¼Œè¿™æ ·æ‰èƒ½é¿å…å› ä¸ºäººå·¥æŒ‡å®šçš„ç¨€ç–æ³¨æ„æ¨¡å¼ä¸­å­˜åœ¨çš„é—®é¢˜ã€‚</p>
<p>â€‹
äº‹å®ä¸Šï¼Œåœ¨cnnçš„æ–‡çŒ®ä¸­ï¼Œå­¦ä¹ å·ç§¯æ»¤æ³¢å™¨çš„å¯å˜å½¢æ„Ÿå—é‡å·²è¢«è¯æ˜å¯ä»¥æœ‰æ•ˆåœ°åœ¨æ•°æ®ä¾èµ–çš„åŸºç¡€ä¸Šé€‰æ‹©æ€§åœ°å…³æ³¨æ›´æœ‰ä¿¡æ¯çš„åŒºåŸŸï¼Œä¹Ÿå°±æ˜¯DCNå˜å½¢å·ç§¯ã€‚</p>
<p>â€‹
CNNä¸­DCNçš„æ€æƒ³å¦‚æœç›´æ¥åº”ç”¨åœ¨SelfAttentionæœºåˆ¶ä¸­ï¼Œä¼šå¯¼è‡´ä¸åˆç†çš„é«˜å†…å­˜/è®¡ç®—å¤æ‚åº¦ã€‚ç”±å¯å˜å½¢åç§»å¼•å…¥çš„å¼€é”€æ˜¯Patchesæ•°é‡çš„äºŒæ¬¡æ–¹ã€‚
â€‹
å› æ­¤ï¼Œå°½ç®¡æœ€è¿‘çš„ä¸€äº›å·¥ä½œç ”ç©¶äº†Transformerä¸­çš„å˜å½¢æœºåˆ¶çš„æ€æƒ³ï¼Œä½†ç”±äºè®¡ç®—æˆæœ¬é«˜ï¼Œå®ƒä»¬éƒ½æ²¡æœ‰å°†å…¶ä½œä¸ºæ„å»ºåƒDCNè¿™æ ·å¼ºå¤§çš„éª¨å¹²ç½‘ç»œçš„åŸºæœ¬æ„ä»¶ã€‚å®ƒä»¬çš„å˜å½¢æœºåˆ¶è¦ä¹ˆè¢«ç”¨äºHeadç½‘ç»œä¸­ï¼Œè¦ä¹ˆä½œä¸ºé¢„å¤„ç†å±‚å¯¹åç»­éª¨å¹²ç½‘ç»œä¸­çš„Patchesè¿›è¡Œé‡‡æ ·ã€‚</p>
<h2 id="å…ˆå‰å·¥ä½œæè¿°ä¸æ¯”è¾ƒ">4ã€å…ˆå‰å·¥ä½œæè¿°ä¸æ¯”è¾ƒï¼š</h2>
<p>â€‹ æš‚ç•¥</p>
<h2 id="ä¸»è¦è®¾è®¡æ€æƒ³">5ã€ä¸»è¦è®¾è®¡æ€æƒ³ï¼š</h2>
<p>â€‹
åŸºäºä¸Šè¿°ç ”ç©¶èƒŒæ™¯ï¼Œè¯¥è®ºæ–‡æå‡ºäº†ä¸€ä¸ªç®€å•é«˜æ•ˆçš„å¯å˜å½¢è‡ªæˆ‘æ³¨æ„æ¨¡å—ï¼Œå¹¶é€šè¿‡è¯¥æ¨¡å—æ„é€ äº†ä¸€ä¸ªå¼ºå¤§çš„é‡‘å­—å¡”å½¢å¼çš„éª¨å¹²ç½‘ç»œï¼Œåä¸ºDeformable
Attention Transformer(DAT)ï¼Œç”¨äºå›¾åƒåˆ†ç±»å’Œå„ç§å¯†é›†é¢„æµ‹ä»»åŠ¡ã€‚ â€‹
ä¸DCNå­¦ä¹ æ•´ä¸ªfeature
mapä¸­ä¸åŒåƒç´ çš„ä¸åŒåç§»é‡ä¸åŒï¼Œè®ºæ–‡æå‡ºçš„æ–¹æ³•åŸºäºè¿™æ ·ä¸€ä¸ªæ€æƒ³ï¼šå¯¹äºä¸åŒçš„æŸ¥è¯¢ï¼Œå…¨å±€attentioné€šå¸¸ä¼šå¯¼è‡´å¯¹äºä¸åŒçš„Queryæ¥è¯´ï¼Œéƒ½æ˜¯è¿‘ä¹ç›¸åŒçš„attentionæ¨¡å¼ã€‚äºæ˜¯è®ºæ–‡æå‡ºï¼Œç½‘ç»œé€šè¿‡å­¦ä¹ å‡ ç»„ä¸Queryæ— å…³çš„åç§»é‡ï¼Œå°†é”®å’Œå€¼ç§»åˆ°é‡è¦åŒºåŸŸã€‚</p>
<p>â€‹ è¯¥è®¾è®¡æ—¢å…·æœ‰çº¿æ€§ç©ºé—´å¤æ‚æ€§ï¼Œåˆå¼•å…¥äº†å˜å½¢çš„æ³¨æ„æ¨¡å¼ã€‚</p>
<p>â€‹ å…·ä½“æ¥è¯´ï¼Œå¯¹äºæ¯ä¸ªæ³¨æ„åŠ›æ¨¡å—ï¼š</p>
<ul>
<li>å‚è€ƒç‚¹é¦–å…ˆä½œä¸ºç»Ÿä¸€çš„ç½‘æ ¼ç”Ÿæˆï¼Œè¿™äº›ç½‘æ ¼åœ¨è¾“å…¥æ•°æ®ä¸­æ˜¯ç›¸åŒçš„ã€‚</li>
<li>ç„¶åï¼Œä¸€ä¸ªoffsetç½‘ç»œä»¥queryç‰¹å¾ä¸ºè¾“å…¥ï¼Œç”Ÿæˆæ‰€æœ‰å‚è€ƒç‚¹å¯¹åº”çš„åç§»é‡ã€‚</li>
<li>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå€™é€‰ é”®/å€¼
å‘é‡è¦åŒºåŸŸè½¬ç§»ï¼Œä»è€Œä½¿åŸæ¥çš„self-attentionæ¨¡å—å…·æœ‰æ›´é«˜çš„çµæ´»æ€§å’Œæ•ˆç‡ï¼Œä»è€Œæ•æ‰åˆ°æ›´å¤šçš„ä¿¡æ¯ç‰¹å¾ã€‚</li>
</ul>
<h2 id="å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„">6ã€å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„ï¼š</h2>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220425194741367.png" /></p>
<p>â€‹ ç°æœ‰çš„ViTï¼Œç‰¹åˆ«æ˜¯PVTå’ŒSwin
Transformerè¯•å›¾è§£å†³è¿‡åº¦å…³æ³¨çš„æŒ‘æˆ˜ã€‚å‰è€…çš„ä¸‹é‡‡æ ·æŠ€æœ¯ä¼šå¯¼è‡´ä¸¥é‡çš„ä¿¡æ¯ä¸¢å¤±ï¼Œè€Œåè€…çš„æ»‘åŠ¨çª—å£æ³¨æ„åŠ›ä¼šå¯¼è‡´æ¥æ”¶åŸŸçš„ç¼“æ…¢å¢é•¿ï¼Œè¿™é™åˆ¶äº†å¯¹å¤§å¯¹è±¡å»ºæ¨¡çš„æ½œåŠ›ã€‚
â€‹
å› æ­¤ï¼Œéœ€è¦ä¸€ç§ä¸æ•°æ®ç›¸å…³çš„ç¨€ç–Attentionæœºåˆ¶æ¥çµæ´»åœ°å»ºæ¨¡ç›¸å…³ç‰¹å¾ï¼Œè¿™å¯¼è‡´DCNä¸­é¦–æ¬¡æå‡ºäº†å¯å˜å½¢æœºåˆ¶ã€‚</p>
<p>â€‹
ç„¶è€Œï¼Œåœ¨Transformeræ¨¡å‹ä¸­ç®€å•åœ°å®ç°DCNå¹¶ä¸æ˜¯ä¸€ä¸ªå¾®ä¸è¶³é“çš„é—®é¢˜ã€‚åœ¨DCNä¸­ï¼Œfeature
mapä¸Šçš„æ¯ä¸ªå…ƒç´ å•ç‹¬å­¦ä¹ å…¶åç§»é‡ï¼Œå…¶ä¸­åœ¨<span class="math inline">\(H
\times W \times C\)</span> çš„ç‰¹å¾å›¾ä¸Šçš„<span class="math inline">\(3
\times 3\)</span>å¯å˜å½¢å·ç§¯çš„ç©ºé—´å¤æ‚åº¦ä¸º<span class="math inline">\(9
\times H \times W \times
C\)</span>ã€‚å¦‚æœæˆ‘ä»¬ç›´æ¥åœ¨Attentionæ¨¡å—ä¸­åº”ç”¨åŒæ ·çš„æœºåˆ¶ï¼Œç©ºé—´å¤æ‚åº¦å°†æ€¥å‰§ä¸Šå‡åˆ°<span
class="math inline">\(N_qN_kC\)</span>ï¼Œå…¶ä¸­<span
class="math inline">\(N_q,N_k\)</span>ä¸ºQueryå’ŒKeyçš„æ•°é‡ï¼Œé€šå¸¸ä¸ç‰¹å¾å›¾çš„sizeï¼š<span
class="math inline">\(HW\)</span>å…·æœ‰ç›¸åŒçš„æ¯”ä¾‹ï¼Œå¸¦æ¥è¿‘ä¼¼åŒäºŒæ¬¡å¤æ‚åº¦ã€‚</p>
<h4 id="æ ¸å¿ƒæœºåˆ¶1-deformable-attention">1ï¼‰æ ¸å¿ƒæœºåˆ¶1ï¼š Deformable
Attention</h4>
<p>â€‹ å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬æå‡ºäº†
åœ¨ç‰¹å¾å›¾ä¸­é‡è¦åŒºåŸŸçš„æŒ‡å¯¼ä¸‹ï¼Œä½¿ç”¨å¯å˜å½¢Attentionæ¥æœ‰æ•ˆåœ°å»ºæ¨¡tokensä¹‹é—´çš„å…³ç³»ã€‚
â€‹
è¿™äº›è¢«è§†ä¸ºé‡è¦çš„åŒºåŸŸæ˜¯ç”±åç§»ç½‘ç»œä»æŸ¥è¯¢ä¸­å­¦ä¹ åˆ°çš„å¤šç»„å˜å½¢é‡‡æ ·ç‚¹æ¥ç¡®å®šçš„ã€‚
æˆ‘ä»¬å¯¹ç‰¹å¾å›¾ä¸­çš„sampleç‰¹å¾åº”ç”¨åŒçº¿æ€§å·®å€¼ï¼Œç„¶ååœ¨å°†æ’å€¼åçš„ç‰¹å¾é€å…¥Keyå’ŒValueçš„æ˜ å°„çŸ©é˜µä¸­ï¼Œå¾—åˆ°å˜å½¢åçš„Keyå’ŒValueã€‚
â€‹
æœ€åï¼Œåº”ç”¨æ ‡å‡†çš„å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶å¯¹é‡‡æ ·ç‚¹Keyè¿›è¡ŒæŸ¥è¯¢ï¼Œå¹¶ä»å˜å½¢çš„Valueä¸­èšåˆç‰¹å¾ã€‚
â€‹æ­¤å¤–ï¼Œå˜å½¢ç‚¹çš„ä½ç½®æä¾›äº†ä¸€ä¸ªæ›´å¼ºå¤§çš„ç›¸å¯¹ä½ç½®åå·®ï¼Œä»¥ä¿ƒè¿›Deformable
Attentionçš„å­¦ä¹ ã€‚è¿™ä¸ªä¼šåœ¨ç¬¬äºŒä¸ªæ ¸å¿ƒæœºåˆ¶ä¸­è®¨è®ºã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220425201030829.png" /></p>
<ul>
<li><p><strong>Input:</strong> ç‰¹å¾å›¾: <span class="math inline">\(x \in
R^{H \times W \times C}\)</span></p></li>
<li><p><strong>Step1:</strong>
æ ¹æ®ç‰¹å¾å›¾å»ºç«‹å…¨å±€çš„ç½‘æ ¼å‚è€ƒç‚¹ï¼Œç½‘æ ¼çš„å°ºå¯¸æ˜¯ç”±è¾“å…¥ç‰¹å¾å›¾ä¾æ®å› å­rä¸‹é‡‡æ ·å¾—åˆ°çš„ã€‚ç½‘æ ¼
<span class="math inline">\(p \in R^{H_G \times W_G \times C}\)</span>,
<span class="math inline">\(H_G = H /r , W_G = W /r\)</span></p></li>
<li><p><strong>Step2:</strong> å‚è€ƒç‚¹çš„å€¼ä¸ºç½‘æ ¼çš„çº¿æ€§äºŒç»´åæ ‡ï¼š<span
class="math inline">\(\{
(0,0),â€¦â€¦,(H_G-1,W_G-1)\}\)</span>ï¼Œæˆ‘ä»¬å°†è¿™äº›å€¼æ ¹æ®ç½‘æ ¼çš„å¤§å°Normalizeå½’ä¸€åŒ–åˆ°[-1,+1]ä¹‹é—´ã€‚(-1,-1)ä»£è¡¨æœ€å·¦ä¸Šè§’çš„ç½‘æ ¼ç‚¹ï¼Œ(+1,+1)ä»£è¡¨æœ€å³ä¸‹è§’çš„ç½‘æ ¼ç‚¹ã€‚</p></li>
<li><p><strong>Step3:</strong>
ä¸ºäº†è·å¾—æ¯ä¸ªå‚è€ƒç‚¹çš„åç§»é‡Offsetï¼Œç‰¹å¾å›¾é€šè¿‡æ˜ å°„çŸ©é˜µ<span
class="math inline">\(W_q\)</span>å¾—åˆ°<span
class="math inline">\(q\)</span>ï¼Œç„¶åå°†<span
class="math inline">\(q\)</span>å–‚å…¥ä¸€ä¸ªè½»é‡çº§çš„å­ç½‘ç»œ<span
class="math inline">\(\theta_{offset}\)</span>ä¸­ï¼Œå¾—åˆ°æ¯ä¸ªQçš„Offsetsã€‚</p>
<p>ï¼ˆæ³¨ï¼šä¸ºäº†ç¨³å®šè®­ç»ƒè¿‡ç¨‹ï¼Œæˆ‘ä»¬å°†ç½‘æ ¼ç‚¹pçš„æŒ¯å¹…ç”¨ä¸€äº›é¢„å®šä¹‰çš„å› ç´ sæ¥ç¼©æ”¾ä»¥é˜²æ­¢è¿‡å¤§çš„åç§»ï¼Œå…·ä½“å…¬å¼å¦‚ä¸‹ï¼šä½¿ç”¨<span
class="math inline">\(s\times tanh(offset_p)\)</span> ä»£æ›¿ <span
class="math inline">\(offset_p\)</span></p></li>
<li><p><strong>Step4:</strong>
å°†Step2å¾—åˆ°çš„å‚è€ƒç‚¹å€¼å’ŒStep3å¾—åˆ°çš„Offsetç›¸åŠ ï¼Œå¾—åˆ°å˜å½¢åçš„ç½‘æ ¼å‚è€ƒç‚¹Deformed
Pointsã€‚</p></li>
<li><p><strong>Step5:
</strong>åœ¨å˜å½¢åçš„ç½‘æ ¼å‚è€ƒç‚¹çš„ä½ç½®è¿›è¡Œç‰¹å¾é‡‡æ ·ï¼Œä½¿ç”¨Bilinear
Interpolationä½œä¸ºé‡‡æ ·å‡½æ•°<span
class="math inline">\(\phi\)</span>ï¼Œå°†é‡‡æ ·åçš„å˜å½¢ç‰¹å¾ä½œä¸ºKeyå’ŒValueï¼Œç„¶åç»è¿‡æŠ•å½±çŸ©é˜µ<span
class="math inline">\(W_v\)</span>å’Œ<span
class="math inline">\(W_k\)</span>ï¼Œå¾—åˆ°<span class="math inline">\(\hat
v\)</span>å’Œ<span class="math inline">\(\hat k\)</span>ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220425202601636.png" style="zoom:67%;" /></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220425202654922.png" style="zoom: 67%;" /></p>
<p><span class="math inline">\(g(a,b) = max(0,1-|a-b|)\)</span>ï¼Œ<span
class="math inline">\((r_x,r_y)\)</span>ä»£è¡¨zä¸Šæ‰€æœ‰çš„ä½ç½®ç´¢å¼•ã€‚</p>
<p>â€‹
å› ä¸ºå‡½æ•°gä½¿å¾—åªæœ‰åœ¨4ä¸ªæœ€æ¥è¿‘(px,py)çš„ç‚¹ä¸Šæ‰ä¼šæ˜¯éé›¶ï¼Œæ‰€ä»¥å¯ä»¥å°†ç­‰å¼(8)ç®€åŒ–ä¸º4ä¸ªä½ç½®çš„åŠ æƒå¹³å‡å€¼</p></li>
<li><p><strong>Step6</strong>:</p>
<p>â€‹
å¯¹q,k,våº”ç”¨ç›¸å¯¹ä½ç½®åå·®ç¼–ç Rï¼Œç„¶åå†ç»è¿‡ç»å…¸çš„å¤šå¤´æ³¨æ„åŠ›å±‚ã€‚å•å±‚çš„è¾“å‡ºå¦‚ä¸‹ï¼šæœ€åï¼Œæ¯ä¸ªheadè¾“å‡ºçš„ç‰¹å¾æ‹¼æ¥åœ¨ä¸€èµ·ï¼Œç„¶åç»è¿‡Woè¿›è¡ŒæŠ•å½±ï¼Œå¾—åˆ°æœ€ç»ˆè¾“å‡ºã€‚<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220426100345837.png" style="zoom:67%;" /></p></li>
</ul>
<h4 id="æ ¸å¿ƒæœºåˆ¶2offset-generation">2ï¼‰æ ¸å¿ƒæœºåˆ¶2ï¼šOffset Generation</h4>
<p>â€‹
å…ˆå‰è¯´é“ï¼ŒOffsetä½¿ç”¨ä¸€ä¸ªå­ç½‘ç»œè¿›è¡Œç”Ÿæˆï¼Œè¿™ä¸ªè‡ªç½‘ç»œæ¥å—Queryç‰¹å¾ï¼Œç„¶åè¾“å‡ºå‚è€ƒç‚¹çš„åç§»å€¼ã€‚è€ƒè™‘åˆ°æ¯ä¸ªå‚è€ƒç‚¹è¦†ç›–äº†ä¸€ä¸ªå±€éƒ¨çš„<span
class="math inline">\(s \times
s\)</span>çš„åŒºåŸŸï¼Œä¸ºäº†å­¦ä¹ åˆ°åˆç†çš„åç§»é‡ï¼Œç”Ÿæˆç½‘ç»œè¿˜éœ€è¦å¯¹å±€éƒ¨ç‰¹å¾è¿›è¡Œæ„ŸçŸ¥ã€‚å› æ­¤ï¼Œå…·ä½“åšæ³•å¦‚ä¸‹ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220426100823173.png" style="zoom: 67%;" /></p>
<p>â€‹ è¾“å…¥ç‰¹å¾å…ˆé€šè¿‡ ä¸€ä¸ª <span class="math inline">\(5\times
5\)</span>çš„depthwiseå·ç§¯å±‚ï¼Œæ¥æ•è·å±€éƒ¨ç‰¹å¾ã€‚ç„¶åï¼Œåº”ç”¨GELUæ¿€æ´»å±‚ï¼Œä»¥åŠ<span
class="math inline">\(1\times1\)</span>çš„å·ç§¯å±‚ã€‚æ³¨æ„ï¼šæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨<span
class="math inline">\(1\times1\)</span>çš„å·ç§¯å±‚ä¸­çš„Biasï¼Œæ˜¯ä¸ºäº†é¿å…æ‰€æœ‰ä½ç½®çš„å¼ºåˆ¶ä½ç§»ã€‚</p>
<p>å…¶ä¸­ï¼š<strong>æ¨¡ä»¿MHSAè®¾è®¡äº†Offset Groupçš„æœºåˆ¶ï¼š</strong></p>
<p>â€‹ ä¸ºäº†æé«˜å˜å½¢å‚è€ƒç‚¹çš„å¤šæ ·æ€§ï¼Œæˆ‘ä»¬éµå¾ªMHSAï¼ˆMultiHead Self
Attentionï¼‰ä¸­ç±»ä¼¼çš„èŒƒå¼ï¼Œå°†ç‰¹å¾é€šé“åˆ’åˆ†ä¸ºGç»„ã€‚ â€‹
æ¯ä¸ªç»„çš„ç‰¹å¾ä½¿ç”¨å…±äº«çš„å­ç½‘ç»œå‚æ•°åˆ†åˆ«äº§ç”Ÿç›¸åº”çš„åç§»é‡ã€‚
åœ¨å®é™…æ“ä½œä¸­ï¼Œæ³¨æ„æ¨¡å—çš„Headæ•°ï¼šMï¼Œå°†ä¼šæ˜¯OffsetGroupä¸­Groupæ•°ï¼šGçš„æ•°å€ï¼Œä»¥ç¡®ä¿å¤šä¸ªæ³¨æ„å¤´èƒ½è¢«åˆ†é…ç»™ä¸€ç»„å˜å½¢Keyå’ŒValueã€‚</p>
<h4 id="æ ¸å¿ƒæœºåˆ¶3-deformable-relative-position-bias">3ï¼‰æ ¸å¿ƒæœºåˆ¶3ï¼š
Deformable Relative Position Bias</h4>
<p>â€‹
ç›¸å¯¹ä½ç½®åå·®å¯¹æ¯å¯¹æŸ¥è¯¢å’Œé”®ä¹‹é—´çš„ç›¸å¯¹ä½ç½®è¿›è¡Œç¼–ç ï¼Œç”¨ç©ºé—´ä¿¡æ¯æ¥å¢åŠ æ™®éçš„æ³¨æ„ã€‚è€ƒè™‘ä¸€ä¸ª<span
class="math inline">\(H \times
W\)</span>çš„ç‰¹å¾å›¾ï¼Œç›¸å¯¹ä½ç½®åå·®åº”è¯¥åœ¨<span
class="math inline">\([-H,H]å’Œ[-W,W]\)</span>é—´ã€‚</p>
<p>â€‹
å› ä¸ºæˆ‘ä»¬çš„å¯å˜å½¢çš„æ³¨æ„åŠ›ï¼Œæœ‰keysçš„è¿ç»­ä½ç½®ï¼Œæˆ‘ä»¬åœ¨æ­£åˆ™åŒ–çš„èŒƒå›´å†…è®¡ç®—ä½ç½®åå·®ï¼Œå³åœ¨<span
class="math inline">\([-1,+1]\)</span>ä¹‹é—´ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯¹Swin
Transformerä¸­çš„ BiasTable åº”ç”¨æ’å€¼å‡½æ•°ï¼Œæ¥è¦†ç›–æ‰€æœ‰å¯èƒ½çš„offsetå€¼ã€‚</p>
]]></content>
      <categories>
        <category>â“¶ è®ºæ–‡é˜…è¯»ç¬”è®°</category>
        <category>CVç›¸å…³è®ºæ–‡</category>
      </categories>
      <tags>
        <tag>Transformer</tag>
      </tags>
  </entry>
  <entry>
    <title>LeetCode ç®—æ³•è§£é¢˜Tricksï¼ˆæŒç»­æ›´æ–°ï¼‰</title>
    <url>/2022/02/02/e7e76d98fb52/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="48a19f5fc8e92bbfcd92f6b1cfa38edd5bb0e1cfef63cfea388c6ab5011f40d9">0b64cd3abe5b0a0a039a37d86c66d75e6ec8e220ebc13f2625638343d94e3b65f9d86782f69c158406c39071ab7e76a8d5cc95c136b737bb12ebe1033945ebf69ae7711e0f9664644f3bd4df64f659ee684506f786f8e3beeb0f5c810ef1aa85b2f7c0ecc8c7e21430346aad87dbc3fb5b36e37311a56ee0c28f8177dfdc0c4ce1f014da184041183e4dad1cb841e9b7cd9daaf2a180b8bc459f71cf44a1b09c0758b403f805704aa22ccdf62aa0d94334b5e4927e97c6378606c74ebc684a24227ab47441c8aade6b59cd39c4d74073e57f972117a956b9a39de39c651a635f3a3b263fb89a02b2e64bbcdb00a01e37fd0b211a49788cb8050e628abbcc02a44fe8274f191cba721f7835d8e734a422bb8eed312ce7b16b04a9a9d41ffd21410f316159e99edbada25ad170d3dabfe9535d5cd5cae3c4c685ab521adac136783bf90f99aa7c2d75e5abda6579b754c070456fdd4064632d95f49ef94a4e760e970ff04b20ee63ba14dab1ba9766563abe4c727eb1784af3361906a674579a328999ddce6720acb642cd6e08b5111ed9869c260b03b24c87f21e4c75a10327973636c98d159e608eb6f0aa7478212092d1192e62a58a843323e0a5d75f9a332e22ea95e4e66ccb66c1e7c2c52d9102a4b33969a385ddef8303b44360c5e2f8354107875d74e1d54b2d3d68d18517643cac87cd6fe05048bce0d0a928d75e1eb91ab005fc7ab56f1e4d4bbf1788a4bd48adbf0894f13af19218c2c9d1a7c206b9303f58640bf7e666703e32150fc29f876986d066006c6126ab676ed474c4e70705076913f14ad0d836995fa042173c3c98bb033074ca54e2ce1e110a92a2c64ded4ac35d3d11294b66c30dbd1723ec84ee8bd6bae914a18392fd6b96287668614ff41437d5345b015b1d2363dc82bdc3b48a6e1dc47ac9c8e3e3fa16683a7b58e0f7629690f083741a2c1aab04e0b9eb3106a96c22dbc2878cbbe8f344c958aa647e198282d65534c48bf710c2b015361db79353de260c9cd325ab3c39b4de74c3a98d01f385c7e970ffd25c2e47071f15e6993297f0090ca3524f27797b47cd1b2179ea82de87e070835bd6341af98c5fcb2b96166b813b6ac49e4dc03ff65423014a3bddb54f3609d6c7a2568c58ddacc8b62ae8c776e008f06c5eb4c3f01e0d9f8de813d2d50d869bf0a94b16e0817abcbfcde0bcf531a0550ae5a99bfb51a23f476841a8380da7d6e29397102e215db81ffe7d518a1fa64e032bb33723595bec61b8c279d323e68ab532da8a4c08e6b9921aa595a2cb04c835c438f781dad84c3c1a1f7249798e413bf9a3af362d251a630aef80f2fd4e60aa98b2493788df48fd53314ee5d688f515bfc59de8131cdd240955704149d9193b53094a69ef0b0e8dfdc122d7bd227ec4e2041cf213069148e431787c0a164f38aeb5d1a6e47bb64abb0445246e193f5ec4a1d078b3e947ace6e7d2a68dc142b79319e2d477dca081a467ea849669effac28372130ed05386187904c0aee9b4c9940106eb6ab87463060beec23f86951667033d44fe3bb752493a4e209464e63de1ec785f200b36da004a75fecb9cc1dd8b84f92b6ad5dda435b51475151617e2f79ae673c7aedd45df150cab6f3c017318d6a8150c9275081cae7ff3a7a13481938e5c2092be071364993bc373db72d4dd1fe2807edc91076106bd011d7e6c9f4915163e941ff9352b05405099b45726aee8039db5954acb02c1ddceea1c073ce9b4f121c790846b203342df3f95c8642ab023185b6a547af1a935670a4d1f7ea56c5444325c07f93fa209cdb5114366cb55babfb6544a5f88cb2188a58888cec9d9fe677ca9c6461beb298f78378a7620330b2db03197d3a49a980de1e122cc74c813b17b886f1785a119332d9477d87dd6e9208ef29b19f7586facaf2b4a20643dddafc2e1d4e034a85d0c6ccbbb4d6933f6b0bd7573b336d2f1022e6961e60cb40e867df0a7f73f13419ac1bc0aa2efa64b0ce79d19963830a23220ecf9168d90b86a8754804ebb41bc053a3fc1349679f6dfd5dce622a8e429a6dd6269022f5f9ab75fed32e8244eba9bf80c14bc696e10b9b8cbe38a9ef6557e8a294fc8e307b782788d6ea060ee465012d97fb7a4bdb32806301be25be23a966359d8d0be5a24a55d321dd71ff0f49590682d2b7b677f741e78e1b18805fba37d877fc03fb90ea712688fc40457bcc714e3489977c111ab41a88951a5e33d324027dcf4d0ba83b3a7cc4fc323bc53c0aaf9ac0dbf47ed17269379abdc14131d44518fd065d979f1310fbc6da95023cc58e3a649f2c030751abaddeec7f53d98d8e1404146e144f1ea4208a1d72dd6a2aac6986e0ece996a44ef9e71916e1a3bf9b2d3746921c7b24d987f95bb70131842f922d5f7b807a3a7d82f9bf0553272acc49c43d8f05c667e7ffeba075e48b83667c3a98bfcb7b6c4c91dafce58b8d6cc3be00462b33e73b084c425d8606f18ef28996603873ef9440df1bf933b2a2a5df31036451ca7617f3c4eb0fefd15a92a7884f81146faa71761b7e03f478f5db363ddb5ec816a716f173954ce189b059aa17c24e67a582e9973a8407eca416695bce27657eb90fecd5200801ce753bb6807faf486f883aeb0969916ee37a973117187fecee95214ac409dc33e6b395d27f43f2fa14292344d5ff0fe7ce3d940f0e0a3fa2a202088ff7fa5584c2adb7f7f340f1ac790a0e70d7ce01cf81e748566bb09b6c6523a1e8d0330674e2d7f62e959f2f345cc838a404a75d87b11d4b3b4471e26de279a8eafc99a417652fce4fe9fb1fa665e882dbceaa96ad9fbcaca2e420951944c916752dde271cf46f9c63551b82d75c17e26fde35fdc8fbf7b480a5fe9258ed62d124fc99cca079000d47cebbe661ab999e07953e54835389eeef287a73318709a82e10cbc32f5b132e3d2d04cb3ef4c4bfc31d53bddb6afda4c560021642d5ccbdb3ec9f2dbd987409b5152c9f4752eff6a2b6a50a563729fc3273e4c0401f46062221c506a894a5d63657c268e69a7bcb74e1084fb94567e9c05fb777880baf9ba0ecb0c09a75071b6bf17a2d9b1c89763029cc6fb23a181e2e6006d05e93bc24924408498f757a6a99a5eb4022057f3136c570d35c2c21806362df938fe49df86328db4b8b6afc1bbb5d37b6130855812b3db5d1d6da962bb85551d964796934123574185c98965098edd65fd178f3c66e4fa82a34b324ec7fc007e61734e61a13290b408614f6afc6729a8d2b8fb8300d530c73273d98bc2da2ee8e9398a9c7bbebe89b5eeb05dc819503077fab864bf4c648bbca8451da54903c3ec92b234a9c13b8a5165a5a903be2951e47bd85c30c3dde7fc4dc3d3d7d7731c7d6e14f9c632ba216529e8bd73e2a99ed086c034e21a8ef18acf9edd874645be49977bef56d03006883e10d8a3daf0c63c8329f7651043fd3edcda304e0f84b07d1fc1bdb88375f2435a213c933e726ea9f05974f9e7ee3fc86c5fad852d3db04b14b9d9fcb6de4541c8639e99702c2eb7d8a33b320babdde206aad3965bc73ed4aab8eb4c38770ef0d4cecf463b5d44438653fff03598438ecea01174f34f969b2828d080ab3fdde7b98a82e02b50e6ebc79d16321b4f0e628d83d3a55e1dac2a8395f0c51e82c77079fa10386b816e90c63c83c043550eb5d9b836391e97bed7dd36a5df23aebdb1a58cb300a1b48b5202fd467648c4be700be1c9e63303cc4ae1df895c0ae872a7004f2deb51bfa5b34fda8f448a9f5c38f2405bac3d5459569fca94b5ef2226c144f78d1c6ddf79926d36a576aa892440b237f479c4336e24e13a4b25c1fb489e60a2b33d4a5eceb725d84f0418700ae3c28fd7c1d9a96e4e572654709dec4fb3efa676cf7e97a4b780f839d96a9b205e4a2cd81f53576d02e189c52609534210ee287f4cf0033f2e1ff370c3c7d406eebd88b6be6e8ecd7713f31172aa80f5cda23b798bf41a01be23692d10669b4bdbaf97333ae9a9d61ead478556b0fd8f811596a0b6f325be9fac551566e48c2b5e7538909de8d5af3cfba6cff86a5c00eaa012102bb8e1626d83b695c6b6ff4b33f3a8336e7b43a6ffda46b410079b3e80871396d2ba444542c5fd644e5947171a2fa119f4e474936ccefbbc9718c73620a83cb0d26af176040094121ac55038557dbd18339b7fcc6c538c0ed995d44d8dd3f3fc1bb893d48c25ae475d8f2dcf663f8f708d443fe251b5cda9653dbabedf1c94ed4b25574672f8d9593e640fa502508a976716f7175e41b28e76b059ce5a1b821a6d2af14478ddc43d34015c1bf3a72eaaeec8292de705b8c2309ba5089d5be72432277f82a42caaa914a442385f5647e41d0e1d4f718560285b8b5089aecb32c6eb5159baa0a77c0a234813431d43c66b058e4b33f450359fd757794e014cb3ab9c1468d099429d065402387e0717095c13c52ce5d777c690652afc52f88ce6ccfeb9471273e72319cf5df4e5ada174096a2b1b62aaffc3f5a02ab3159b7a79432aed3f6558a6c8405408f48fc0a7af49bd46fc50929dbd68e51a915f954af9ecefc1cb104c44ec762ab922c57720f4038df2c842d7cf82f2962d126adee9bb43055439e9ad5acae91b1370ac4ca7b48aea23b5f819f706b571c5653a2ecf31fd918e4de358926be3cc6aee4347f5d489ac87455f4ae1711b84f3a898eb5349779ea2e3013eec3d17af6b9f20ee363c357e8a2f47c79872e6f0084680d33f147d9c139245d5b2c47fa8bd63f1d255f56f57d304739a48c3cd654f994ebcab3b57d56301c727132b670e46e52aae6df4b71532d14e45a0ac15f8fbd67470981468b117166de101a2d81ed815658ead7ffaaecacfdc42ba888a0fc3b98ecdeb602a5bc4ae7c37e125ca35b23c74c82ce7ca765e0d74b6f3723612be6db7768ce61ecb5db3ca2a230bdaaed77cd19a764e66751ca5c9f8efbe4add54ed0b94efb539b7dc60546f1fe82e9e518abdf9ca0bdff389db2318762559dac96ebf03d2b1b07f232995b471b80446a3a9125fcc6404ffcc5f07e13458369f8c2462231d9561c16acd93bacbc5be2f77da560e79c119337cbd57cddf52429fa7916c770c0f9d26198ee614d841a51d4fb0f3d35cf76825888a5893cc01a3ec962746bfa68da554734f6e3307c52f69add55bba87ea360ea8f78e0be2b82b695510f273f89fd264c50999c1e7433706051248dda5aa0b4fe8f7198ebbd392e51c66e33fb37c897a9ef9ee5ecf03c69655b3ab96c40f58a887d57fc96beeb63b31ea1c3936b29f0032f48d1710c0863fb775d2e535d51b8eb1180d0aeffed024e7f7181a51cfffc60f7daaa21c42e2607de58c1b1aff310a22aa65a20b89d2b99149ad76866862bc0b785829f2af8fd22b0f213c6fab5c63d485aca230dbeea6442ed38ee45a2a1712be1be645e67062f2c86835bbd1502dc347269712ed1aa2dd62cab8beba0a9dfd17d359f26109e411ab037113d921a3ede55be6f3cbf89be78d78b25dc83187b9c7ecb1ae5c09dea894b7b817daa22b2f28f9173fedcf3e849e37b11bb79b6b4d465c2765ddf73aff1f34477fe2d5b57639ab9d55eaf4cf166bd9be3597ac5d306162748eaf33d0dfe8c721ead8c286338e0ab060f724169dbbf5e5b627359a076174fac2f7ebcccdd824095d99c6d8c706f05c0a0d136b766b3183c2d3b6bbd13717e2519d0f42f341d920c59c45117103fe476828c5a029fb4d6a51fbf8b72d44c301fc0751c7c5b57035a9622671b5a8628572d5c687a8352dd8be5fc4823736c9973733e3f6f46887c0bc4d175a929299e9ea13b61e5d14a1a34f91a2135f478f0fbfa718882410f3da687cc0cdf563f3928cdce9e338c46d17dfb2504eac943b2484f6c92b7beb7dc1c289eaa6d9601ac534efdb9214cbcbed371b1832a8ac6a28ddbf6474b6f60b42138900d9d24d6b27156c452a3eb9a78702a5afd8211d87b2810f437e04cac8f73845e4c5c68f53ab63f1f59baefa8d28ed7bbe8d3a9155b8b2778c8b6fabad6e9a70662effc4694adece146f4da37de1280be1b2789db6b73ddbaef2445f5e04b0cf5dc4dd651e6e2ac832352fee161b944502b1b64e0368bf55ef68e1f99060809f2ce5d7b264a73344a34c5f283ada627a4cde1130233b422211e7b1ce24256dd652cb1addb81805fa7065643f14ecbd222e87e17d23a3cb93fcd78e2ab6ba9ef212934ff8c54903e54f02ed6c940323e3cbcb13ac7fb3d448b4078b4cc71bdaf06c7ad544f18e71526d5d3dcac5f574bc82953f27c0dd54e65f0bc98f61e373f0df32fd194cbae897c21285d5a88444ae80da4291c6cd96b9889c185bed8863f72fbf7569d2bcb158945dd6f4cf0ab89e8c7d24af7de1ba25d2fca4f0fd122e25144aa0022753a54dda195d</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>é¢˜é›†æ•´ç†</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç²¾ç®€ç³»åˆ—ç¬”è®°1â€”â€”javaåŸºç¡€</title>
    <url>/2022/07/18/457df2a64c92/</url>
    <content><![CDATA[<p><strong>çŸ¥è¯†æ¥æºï¼šã€ŠJavaæ ¸å¿ƒæŠ€æœ¯å·Iã€‹ç¬¬3ç« èŠ‚</strong></p>
<ul>
<li>Javaæ•´å‹çš„æ•°æ®èŒƒå›´ä¸è¿è¡Œjavaä»£ç çš„æœºå™¨æ— å…³</li>
<li>ä¸‰ä¸ªç‰¹æ®Šçš„æµ®ç‚¹ç±»å‹å€¼ï¼šï¼ˆæ³¨æ„ï¼šæ‰€æœ‰éæ•°å€¼çš„å€¼éƒ½è®¤ä¸ºæ˜¯ä¸åŒçš„ï¼‰
<ul>
<li><code>NaN</code>è¡¨ç¤ºNot a Number</li>
<li><code>Infinity</code>è¡¨ç¤ºæ— ç©·å¤§</li>
<li><code>-Infinity</code>è¡¨ç¤ºè´Ÿæ— ç©·å¤§</li>
</ul></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">double</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="number">0.0</span> / <span class="number">0</span>; <span class="comment">// NaN</span></span><br><span class="line"><span class="type">double</span> <span class="variable">d2</span> <span class="operator">=</span> <span class="number">1.0</span> / <span class="number">0</span>; <span class="comment">// Infinity</span></span><br><span class="line"><span class="type">double</span> <span class="variable">d3</span> <span class="operator">=</span> -<span class="number">1.0</span> / <span class="number">0</span>; <span class="comment">// -Infinity</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœåŠ ä¸Š<code>final</code>ä¿®é¥°ç¬¦ï¼Œè¿™ä¸ªå˜é‡å°±å˜æˆäº†å¸¸é‡ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="type">double</span> <span class="variable">PI</span> <span class="operator">=</span> <span class="number">3.14</span>; <span class="comment">// PIæ˜¯ä¸€ä¸ªå¸¸é‡</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>å¯ä»¥ç”¨<code>static final</code>å£°æ˜ç±»å¸¸é‡</p></li>
<li><p>å¯ä»¥ç”¨<code>"""..."""</code>è¡¨ç¤ºå¤šè¡Œå­—ç¬¦ä¸²ï¼ˆText
Blocksï¼‰ã€‚</p></li>
<li><p>ä¸€ä¸ª<code>char</code>ä¿å­˜ä¸€ä¸ªUnicodeå­—ç¬¦, å ç”¨ä¸¤ä¸ªå­—èŠ‚ï¼š</p></li>
<li><p>æšä¸¾ç±»å‹ï¼š</p></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Size</span> &#123; SMALL,MEDIUM,LARGE &#125;;</span><br><span class="line"><span class="type">Size</span> <span class="variable">m</span> <span class="operator">=</span> Size.SMALL;</span><br></pre></td></tr></table></figure>
<ul>
<li>floorModæ–¹æ³•ï¼Œç”¨äºæ•´æ•°å–ä½™ï¼Œè§£å†³ä¸€äº›å–ä½™çš„è´Ÿæ•°é—®é¢˜</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">floorMod(12,4); </span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>&gt;&gt;&gt;</code>è¿ç®—ç¬¦ä¼šç”¨0æ¥å¡«å……é«˜ä½ï¼Œè€Œ<code>&gt;&gt;</code>è¿ç®—ç¬¦ä¼šç”¨ç¬¦å·ä½å¡«å……é«˜ä½ã€‚</p></li>
<li><p><code>"Java".repeat(3)</code>æ–¹æ³•</p></li>
<li><p><code>"Hello".substring(1,3)</code></p></li>
<li><p>å­—ç¬¦ä¸²ä¸å¯å˜,<strong>å³ä¸èƒ½ä¿®æ”¹Javaå­—ç¬¦ä¸²ä¸­çš„å•ä¸ªå­—ç¬¦</strong></p></li>
<li><p>å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰çš„æ¯”è¾ƒå¿…é¡»ä½¿ç”¨<code>equals</code>æ–¹æ³•ï¼Œå¦‚æœè¦ä¸åŒºåˆ†å¤§å°å†™ï¼Œåˆ™ä½¿ç”¨<code>equalsIgnoreCase</code></p></li>
<li><p>ç ç‚¹ä¸ä»£ç å•å…ƒï¼š</p>
<ul>
<li><p>æœ€å¸¸ç”¨çš„ä¸€ä¸ªUnicodeå­—ç¬¦ä½¿ç”¨ä¸€ä¸ªä»£ç å•å…ƒå°±å¯ä»¥è¡¨ç¤ºï¼Œè€Œè¾…åŠ©å­—ç¬¦éœ€è¦ä¸€å¯¹ä»£ç å•å…ƒè¡¨ç¤ºã€‚</p></li>
<li><p>length()æ–¹æ³•è¿”å›ä»£ç å•å…ƒæ•°é‡ï¼ŒcodePointCount()è¡¨ç¤ºç ç‚¹æ•°é‡</p></li>
<li><p>å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•å°†éå†å­—ç¬¦ä¸²çš„æ¯ä¸€ä¸ªç ç‚¹ï¼š</p></li>
</ul></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] codePoints = str.codePoints().toArray()</span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚ä½•æ„å»ºå­—ç¬¦ä¸²ï¼Ÿé¿å…ä½¿ç”¨Stringç±»ï¼Œè¿™æ ·æ•ˆç‡è¾ƒä½ï¼Œåº”è¯¥ä½¿ç”¨StringBuilderç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">StringBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>()</span><br><span class="line">builder.append(ch)</span><br><span class="line">builder.append(str)</span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> builder.toString()</span><br></pre></td></tr></table></figure>
<ul>
<li>æ„é€ è¾“å…¥æµï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in); <span class="comment">// åˆ›å»ºScannerå¯¹è±¡</span></span><br><span class="line">        System.out.print(<span class="string">&quot;Input your name: &quot;</span>); <span class="comment">// æ‰“å°æç¤º</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> scanner.nextLine(); <span class="comment">// è¯»å–ä¸€è¡Œè¾“å…¥å¹¶è·å–å­—ç¬¦ä¸²</span></span><br><span class="line">        System.out.print(<span class="string">&quot;Input your part: &quot;</span>); <span class="comment">// æ‰“å°æç¤º</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">part</span> <span class="operator">=</span> scanner.next(); <span class="comment">// è¯»å–è¾“å…¥çš„ä¸‹ä¸€ä¸ªå•è¯</span></span><br><span class="line">        System.out.print(<span class="string">&quot;Input your age: &quot;</span>); <span class="comment">// æ‰“å°æç¤º</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> scanner.nextInt(); <span class="comment">// è¯»å–ä¸€è¡Œè¾“å…¥å¹¶è·å–æ•´æ•°</span></span><br><span class="line">        System.out.printf(<span class="string">&quot;Hi, %s, you are %d\n&quot;</span>, name, age); <span class="comment">// æ ¼å¼åŒ–è¾“å‡º</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ ¼å¼åŒ–è¾“å‡ºï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.out.printf(<span class="string">&quot;%tF %tT&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>(),<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">System.out.printf(<span class="string">&quot;%tF %&lt;tT&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br></pre></td></tr></table></figure>
<ul>
<li>æƒ³è¦è¯»å–ä¸€ä¸ªæ–‡ä»¶ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(Path.of(<span class="string">&quot;myfile.txt&quot;</span>),StandardCharsets.UTF_8); <span class="comment">// åˆ›å»ºScannerå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">dir</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>);  <span class="comment">//è·å–å½“å‰ç›®å½•</span></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(Path.of(dir + <span class="string">&quot;/myfile.txt&quot;</span>), StandardCharsets.UTF_8);</span><br></pre></td></tr></table></figure>
<ul>
<li>æƒ³è¦å†™å…¥æ–‡ä»¶ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="string">&quot;file.txt&quot;</span>,StandardCharsets.UTF_8)</span><br></pre></td></tr></table></figure>
<ul>
<li>æ–°Switchè¡¨è¾¾å¼</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">fruit</span> <span class="operator">=</span> <span class="string">&quot;apple&quot;</span>;</span><br><span class="line"><span class="keyword">switch</span> (fruit) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;apple&quot;</span> -&gt; System.out.println(<span class="string">&quot;Selected apple&quot;</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;pear&quot;</span> -&gt; System.out.println(<span class="string">&quot;Selected pear&quot;</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;mango&quot;</span> -&gt; &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Selected mango&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Good choice!&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">default</span> -&gt; System.out.println(<span class="string">&quot;No fruit selected&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>å¤§æ•°ç±»<code>BigInteger</code>å’Œ<code>BigDecimal</code></p></li>
<li><p>å‘½ä»¤è¡Œå‚æ•°ç±»å‹æ˜¯<code>String[]</code>æ•°ç»„ï¼›
å‘½ä»¤è¡Œå‚æ•°ç”±JVMæ¥æ”¶ç”¨æˆ·è¾“å…¥å¹¶ä¼ ç»™<code>main</code>æ–¹æ³•ï¼›å¦‚ä½•è§£æå‘½ä»¤è¡Œå‚æ•°éœ€è¦ç”±ç¨‹åºè‡ªå·±å®ç°ã€‚</p></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (String arg : args) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;-version&quot;</span>.equals(arg)) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;v 1.0&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Javaçš„ä¸è§„åˆ™æ•°ç»„ï¼š</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">double</span>[][] arr = <span class="keyword">new</span> <span class="title class_">double</span>[<span class="number">8</span>][]</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">0</span>;n&lt;<span class="number">8</span>;n++)</span><br><span class="line">    arr[n] = <span class="keyword">new</span> <span class="title class_">double</span>[n+<span class="number">1</span>];</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>äº¤æ¢æ•°ç»„ä¸­çš„è¡Œ</strong>ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">double</span>[] temp = arr[i]</span><br><span class="line">arr[i] = arr[i+<span class="number">1</span>]</span><br><span class="line">arr[i+<span class="number">1</span>] = temp</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaç²¾ç®€ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç²¾ç®€ç³»åˆ—ç¬”è®°2â€”â€”javaå¯¹è±¡ä¸ç±»</title>
    <url>/2022/07/19/a0c6d353048d/</url>
    <content><![CDATA[<p><strong>çŸ¥è¯†æ¥æºï¼šã€ŠJavaæ ¸å¿ƒæŠ€æœ¯å·Iã€‹ç¬¬4ç« èŠ‚</strong></p>
<ul>
<li><p>å¦‚æœä¸€ä¸ªç±»çš„æ–¹æ³•ä½¿ç”¨æˆ–æ“çºµå¦ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å°±è¯´ä¸€ä¸ªç±»ä¾èµ–äºå¦ä¸€ä¸ªç±»ã€‚åº”è¯¥å°½å¯èƒ½åœ°å°†ç›¸äº’ä¾èµ–çš„ç±»å‡è‡³æœ€å°‘ï¼Œå°½å¯èƒ½å‡å°‘ç±»ä¹‹é—´çš„è€¦åˆã€‚å› ä¸ºï¼šå¦‚æœç±»Aä¸çŸ¥é“Bçš„å­˜åœ¨ï¼Œå®ƒå°±ä¸ä¼šå…³å¿ƒBçš„ä»»ä½•æ”¹å˜ï¼Œæ„å‘³ç€Bçš„æ”¹å˜ä¸ä¼šå¯¼è‡´Aäº§ç”Ÿä»»ä½•BUGã€‚</p></li>
<li><p>æ‰€æœ‰Javaå¯¹è±¡éƒ½å­˜å‚¨åœ¨å †ä¸­ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åŒ…å«å¦ä¸€ä¸ªå¯¹è±¡å˜é‡æ—¶ï¼Œå…¶åªæ˜¯åŒ…å«ç€å¦ä¸€ä¸ªå †å¯¹è±¡çš„æŒ‡é’ˆ.</p></li>
<li><p>Date()æ–¹æ³•ç”¨äºè®°å½•æ—¶é—´æˆ³,è€Œ<strong>LocalDate</strong>ç±»å¯ä»¥ç”¨äºè®°å½•æ—¥å†ç›¸å…³çš„æ—¶é—´ä¿¡æ¯</p></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">LocalDate</span> <span class="variable">t</span> <span class="operator">=</span> LocalDate.of(<span class="number">1999</span>,<span class="number">12</span>,<span class="number">31</span>)</span><br><span class="line"><span class="type">LocalDate</span> <span class="variable">tAfter</span> <span class="operator">=</span> t.plusDays(<span class="number">1000</span>)</span><br><span class="line"><span class="type">int</span> <span class="variable">year</span> <span class="operator">=</span> t.getYear()</span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨æ„é€ ç±»çš„æ—¶å€™ï¼Œæœ€å¥½æ¸…æ¥šçš„çŸ¥é“å“ªäº›å­—æ®µå¯èƒ½ä¸ºnullï¼Œå¯¹äºé‚£äº›ä¸å¸Œæœ›ä¸ºnullçš„å­—æ®µï¼Œå¯ä»¥è®¾ç½®å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">(string n)</span>&#123;</span><br><span class="line">	Objects.requireNonNull(n,<span class="string">&quot;The name can not be null&quot;</span>);  <span class="comment">//ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ³¨æ„ä¸è¦ç¼–å†™è¿”å›å¯å˜å¯¹è±¡å¼•ç”¨çš„è®¿é—®å™¨æ–¹æ³•ï¼Œå¦‚æœéœ€è¦è¿”å›ï¼Œåˆ™åº”è¯¥è¿›è¡Œå…‹éš†ï¼Œå…·ä½“è§P113é¡µ</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> hireDay.clone()</span><br></pre></td></tr></table></figure>
<ul>
<li><p>ç§æœ‰æ–¹æ³•ä¸å…¬æœ‰æ–¹æ³•çš„åŒºåˆ«ï¼š</p>
<ul>
<li><strong>é‡ç‚¹åœ¨äºï¼Œåªè¦æ–¹æ³•æ˜¯ç§æœ‰çš„ï¼Œç±»çš„è®¾è®¡è€…å°±èƒ½ç¡®ä¿¡å…¶ä¸ä¼šåœ¨åˆ«å¤„ä½¿ç”¨ï¼Œå¯ä»¥å°†å…¶åˆ å»ã€‚å¦‚æœæ–¹æ³•æ˜¯å…¬æœ‰çš„ï¼Œåˆ™æ— æ³•ä¿è¯å®ƒæ²¡æœ‰åœ¨å…¶ä»–åœ°æ–¹è¢«è°ƒç”¨ï¼Œæ•…è€Œç»´æŠ¤çš„æ—¶å€™ä¸èƒ½ç®€å•åˆ å»ã€‚</strong></li>
</ul></li>
<li><p>finalå…³é”®å­—å¯ä»¥æŒ‡æ˜æŸæˆå‘˜å˜é‡åªèƒ½åœ¨åˆå§‹åŒ–æ„é€ çš„æ—¶å€™ç¡®å®šå€¼ï¼Œåç»­å€¼ä¸èƒ½å†æ”¹å˜</p></li>
<li><p>æ¯ä¸€ä¸ªç±»éƒ½å¯ä»¥æœ‰ä¸€ä¸ªmainæ–¹æ³•ï¼Œé€šå¸¸ç”¨äºåšå•å…ƒæµ‹è¯•ï¼Œè¿™æ ·çš„è¯ï¼Œè¿è¡Œjava
Employee å³å¯å®Œæˆå•å…ƒæµ‹è¯•</p></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Employee</span>()&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">		<span class="comment">//...</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>Javaä¸­çš„æ–¹æ³•å‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ å‚ï¼Œè€ŒéæŒ‰å¼•ç”¨ä¼ å‚ã€‚</p></li>
<li><p>å¯ä»¥åœ¨ç±»å®šä¹‰ä¸­ï¼Œç›´æ¥ç»™ä»»ä½•å­—æ®µèµ‹åˆå€¼ï¼Œä¾‹å¦‚</p></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Employee</span>()&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸€ä¸ªæ„é€ æ–¹æ³•å¯ä»¥è°ƒç”¨å…¶ä»–æ„é€ æ–¹æ³•ï¼Œä¾¿äºä»£ç å¤ç”¨</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>(name, <span class="number">18</span>); <span class="comment">// è°ƒç”¨å¦ä¸€ä¸ªæ„é€ æ–¹æ³•Person(String, int)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœç±»çš„é™æ€å­—æ®µéœ€è¦å¾ˆå¤æ‚çš„åˆå§‹åŒ–ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨é™æ€çš„åˆå§‹åŒ–å—</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>()&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> nextId;</span><br><span class="line">	<span class="keyword">static</span>&#123;</span><br><span class="line">		<span class="type">var</span> <span class="variable">generator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>()</span><br><span class="line">		nextId = generator.nextInt(<span class="number">10000</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>è¦æƒ³å°†ç±»æ”¾å…¥åŒ…ä¸­ï¼Œåˆ™å¿…é¡»å°†åŒ…çš„åå­—æ”¾åœ¨æºæ–‡ä»¶çš„å¼€å¤´ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> ming;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span>()&#123;</span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>ç±»çš„è·¯å¾„å¿…é¡»ä¸åŒ…ååŒ¹é…ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘æºæ–‡ä»¶æ—¶ä¸ä¼šæ£€æŸ¥ç›®å½•ç»“æ„</p></li>
<li><p>ä½äºåŒä¸€ä¸ªåŒ…çš„ç±»ï¼Œå¯ä»¥è®¿é—®åŒ…ä½œç”¨åŸŸçš„å­—æ®µå’Œæ–¹æ³•ã€‚ä¸ç”¨<code>public</code>ã€<code>protected</code>ã€<code>private</code>ä¿®é¥°çš„å­—æ®µå’Œæ–¹æ³•å°±æ˜¯åŒ…ä½œç”¨åŸŸã€‚</p></li>
<li><p><strong>JARæ–‡ä»¶</strong>æ˜¯ä¸€ä¸ªJavaå½’æ¡£æ–‡ä»¶ï¼Œå…¶æ—¢å¯ä»¥åŒ…å«ç±»æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åŒ…å«å…¶ä»–æ ¼å¼çš„æ–‡ä»¶ï¼Œå…¶ä½¿ç”¨ZIPå‹ç¼©æ ¼å¼è¿›è¡Œç»„ç»‡ã€‚</p></li>
<li><p><strong>javadocæ–‡æ¡£</strong>æ³¨é‡Šï¼Œå¯ä»¥è‡ªåŠ¨ä¸ºæºä»£ç ç”Ÿæˆä¸€äº›æ¥å£ç±»çš„æ³¨é‡Šé€‰é¡¹</p></li>
<li><p>ä¸€äº›ç±»è®¾è®¡æŠ€å·§ï¼š</p>
<ul>
<li>ä¸€å®šè¦ä¿è¯æ•°æ®ç§æœ‰ï¼Œå¯¹æ•°æ®è¿›è¡Œåˆå§‹åŒ–</li>
<li>ä¸è¦åœ¨ç±»ä¸­ä½¿ç”¨è¿‡å¤šçš„åŸºæœ¬ç±»å‹ï¼Œè€Œæ˜¯ç”¨å…¶ä»–ç±»æ¥æ›¿æ¢åŸºæœ¬ç±»å‹</li>
<li>åˆ†è§£æœ‰è¿‡å¤šèŒè´£çš„ç±»</li>
<li><strong>ä¼˜å…ˆä½¿ç”¨ä¸å¯å˜çš„ç±»</strong>ï¼Œå³æ²¡æœ‰æ–¹æ³•èƒ½å¤Ÿä¿®æ”¹å¯¹è±¡çš„çŠ¶æ€ï¼Œå¦‚æ­¤ä¸€æ¥å¯ä»¥å®‰å…¨åœ°åœ¨å¤šä¸ªçº¿ç¨‹é—´å…±äº«å…¶å¯¹è±¡</li>
</ul></li>
</ul>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaç²¾ç®€ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç²¾ç®€ç³»åˆ—ç¬”è®°3â€”â€”javaç»§æ‰¿</title>
    <url>/2022/07/21/bfa2f3ecdb39/</url>
    <content><![CDATA[<p><strong>çŸ¥è¯†æ¥æºï¼šã€ŠJavaæ ¸å¿ƒæŠ€æœ¯å·Iã€‹ç¬¬5ç« èŠ‚ï¼Œç»§æ‰¿</strong></p>
<ul>
<li>åœ¨Javaä¸­ï¼Œå¯¹è±¡å˜é‡æ˜¯å¤šæ€çš„ã€‚ä¸€ä¸ªçˆ¶ç±»å¯¹è±¡å¯ä»¥å¼•ç”¨å­ç±»å¯¹è±¡</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Employee</span> <span class="variable">e</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Manager</span>()</span><br></pre></td></tr></table></figure>
<ul>
<li><p>ä½¿ç”¨finalä¿®é¥°ç¬¦å°±ä»£è¡¨è¯¥ç±»æ— æ³•è¢«ç»§æ‰¿ã€‚ä½¿ç”¨finalä¿®é¥°ç¬¦ä¿®é¥°ç±»ä¸­çš„æŸä¸ªç‰¹å®šæ–¹æ³•ï¼Œä»£è¡¨å­ç±»ä¸èƒ½è¦†ç›–è¿™ä¸ªæ–¹æ³•</p></li>
<li><p>æŠ½è±¡æ–¹æ³•çš„å®šä¹‰ï¼š</p></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title function_">getDescription</span><span class="params">()</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæŠ½è±¡æ–¹æ³•çš„ç±»æœ¬èº«éœ€è¦å£°æ˜ä¸ºæŠ½è±¡çš„ï¼Œé™¤äº†æŠ½è±¡æ–¹æ³•ï¼ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«å­—æ®µå’Œå…·ä½“æ–¹æ³•</p></li>
<li><p>æŠ½è±¡ç±»æ˜¯ä¸èƒ½å®ä¾‹åŒ–çš„ï¼Œä½†æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»çš„å¯¹è±¡å˜é‡ï¼Œè¿™ä¸ªå˜é‡åªèƒ½å¼•ç”¨éæŠ½è±¡å­ç±»çš„å¯¹è±¡ã€‚</p></li>
<li><p>è®¿é—®æ§åˆ¶ç¬¦å°ç»“ï¼š</p>
<ul>
<li>ä»…å¯¹æœ¬ç±»å¯è§â€”â€”private</li>
<li>å¯¹å¤–éƒ¨å®Œå…¨å¯è§â€”â€”public</li>
<li>å¯¹æœ¬åŒ…å’Œæ‰€æœ‰å­ç±»å¯è§â€”â€”protected</li>
<li>å¯¹æœ¬åŒ…å¯è§â€”â€”é»˜è®¤ï¼Œä¸éœ€è¦ä¿®é¥°ç¬¦</li>
</ul></li>
<li><p>instanceof å‡½æ•°ï¼š</p></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Employee</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="string">&quot;ss&quot;</span>,<span class="number">12</span>);</span><br><span class="line"><span class="type">Manager</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Manager</span>(<span class="string">&quot;ss&quot;</span>,<span class="number">12</span>,<span class="number">14</span>);</span><br><span class="line">System.out.println(a <span class="keyword">instanceof</span> Manager);   <span class="comment">//false</span></span><br><span class="line">System.out.println(c <span class="keyword">instanceof</span> Employee);  <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<ul>
<li>getclasså‡½æ•°</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Employee</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="string">&quot;ss&quot;</span>,<span class="number">12</span>);</span><br><span class="line"><span class="type">Manager</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Manager</span>(<span class="string">&quot;ss&quot;</span>,<span class="number">12</span>,<span class="number">14</span>);</span><br><span class="line">System.out.println(a.getClass());  <span class="comment">// class com.company.Employee</span></span><br><span class="line">System.out.println(c.getClass());  <span class="comment">// class com.company.Manager</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>æ‰€æœ‰ç±»çš„è¶…ç±»â€”â€”Object</p>
<ul>
<li>Object.equalsæ–¹æ³•ç”¨äºæ£€æµ‹ä¸¤ä¸ªå¯¹è±¡çš„å¼•ç”¨æ˜¯å¦ç›¸ç­‰</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Employee</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="string">&quot;ss&quot;</span>,<span class="number">12</span>);</span><br><span class="line"><span class="type">Employee</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="string">&quot;ss&quot;</span>,<span class="number">12</span>);</span><br><span class="line">System.out.print(a.equals(b));  <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>å¦‚æœéœ€è¦åŸºäºå¯¹è±¡çŠ¶æ€è¿›è¡Œæ£€æµ‹ï¼Œé‚£ä¹ˆéœ€è¦é‡å†™ç±»çš„equalså‡½æ•°,å¦‚ä½•ç¼–å†™ä¸€ä¸ªæ­£ç¡®å®Œç¾çš„equalså‡½æ•°å‘¢ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span>&#123;</span><br><span class="line">    	<span class="meta">@override</span> <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object otherObject)</span>&#123;</span><br><span class="line">    		<span class="keyword">if</span>(<span class="built_in">this</span> == otherObject) <span class="keyword">return</span> <span class="literal">true</span>;    <span class="comment">//æ£€æŸ¥å¼•ç”¨æ˜¯å¦ç›¸ç­‰</span></span><br><span class="line">    		<span class="keyword">if</span>(otherObject == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span>;   <span class="comment">//æ£€æŸ¥æ˜¯å¦ä¸ºnull</span></span><br><span class="line">    		</span><br><span class="line">    		<span class="comment">//å¦‚æœéœ€è¦è¯¥ç±»ä¸åŒçš„å­ç±»è¢«åˆ¤å®šä¸ºä¸ä¸€æ ·ï¼Œåˆ™ä½¿ç”¨è¯¥è¡Œ      </span></span><br><span class="line">            <span class="keyword">if</span>(getClass() != otherObject.getClass()) <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">            </span><br><span class="line">            <span class="comment">//å¦‚æœè¯¥ç±»ä¸åŒçš„å­ç±»å¯èƒ½è¢«éœ€è¦åˆ¤å®šä¸ºä¸€æ ·ï¼Œåˆ™ä½¿ç”¨è¯¥è¡Œ (å³ åªè¦è¿™ä¸ªè¢«æ¯”è¾ƒçš„å¯¹è±¡æ˜¯Employeeç±»æˆ–å…¶å­ç±»å³å¯)</span></span><br><span class="line">            <span class="keyword">if</span>(!(otherObject <span class="keyword">instanceof</span> Employee)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    		</span><br><span class="line">            <span class="comment">//ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢</span></span><br><span class="line">    		<span class="type">Employee</span> <span class="variable">other</span> <span class="operator">=</span> (Employee)otherObject;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//éšåæ ¹æ®ç›¸ç­‰æ€§æ¦‚å¿µçš„è¦æ±‚æ¯”è¾ƒå­—æ®µå³å¯</span></span><br><span class="line">    		<span class="keyword">return</span> name.equals(other.name) &amp;&amp; salary == other.salary;</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">- hashCodeæ–¹æ³•ï¼šObjectç±»ä¸­å®šä¹‰çš„hashCodeæ–¹æ³•é»˜è®¤ä¼šä»å¯¹è±¡çš„å­˜å‚¨åœ°å€å¾—å‡ºæ•£åˆ—ç </span><br><span class="line"></span><br><span class="line">- æ³¨æ„equalså’ŒhashCodeçš„å®šä¹‰å¿…é¡»ç›¸å®¹ï¼Œå¦‚æœx.equals(y)è¿”å›<span class="literal">true</span>ï¼Œé‚£ä¹ˆx.hashCode(y)å°±å¿…é¡»è¿”å›<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">- toString()æ–¹æ³•ï¼Œå¼ºçƒˆå»ºè®®ä¸ºè‡ªå®šä¹‰çš„æ¯ä¸ªç±»æ·»åŠ è¿™ä¸ªæ–¹æ³•ï¼Œç”¨é€”å¹¿æ³›</span><br><span class="line">  - åªè¦å¯¹è±¡å’Œä¸€ä¸ªå­—ç¬¦ä¸²ç”¨åŠ å·è¿æ¥ï¼Œé‚£ä¹ˆjavaç¼–è¯‘å™¨å°±ä¼šè‡ªåŠ¨è°ƒç”¨toStringæ–¹æ³•æ¥è·å¾—è¿™ä¸ªå¯¹è±¡çš„å­—ç¬¦ä¸²æè¿°</span><br><span class="line"></span><br><span class="line">- æ³›å‹æ•°ç»„åˆ—è¡¨ArrayListï¼Œå¯ä»¥æ”¯æŒæ•°ç»„åˆ—è¡¨è‡ªåŠ¨æ‰©å±•å®¹é‡</span><br><span class="line"></span><br><span class="line">  ```java</span><br><span class="line">  ArrayList&lt;Employee&gt; staff = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Employee&gt;();</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">staff.ensureCapacity(<span class="number">100</span>); <span class="comment">//åˆ†é…ä¸€ä¸ªåŒ…å«100å„å¯¹è±¡çš„å†…éƒ¨æ•°ç»„ï¼Œè¿™æ ·çš„è¯å‰100æ¬¡addè°ƒç”¨ä¸ä¼šå¸¦æ¥å¾ˆå¤§çš„å¼€é”€</span></span><br></pre></td></tr></table></figure>
<ul>
<li>åªèƒ½ä½¿ç”¨setå’Œgetæ–¹æ³•è®¾ç½®å€¼ä»¥åŠå–å‡ºå€¼,å¯ä»¥ç”¨addå’Œremoveå¢åŠ åˆ é™¤å…ƒç´ </li>
</ul></li>
<li><p>ä¸€ä¸ªå°æŠ€å·§æ˜¯å¯ä»¥ç”¨ArrayListåŠ¨æ€æ‰©å±•å®Œæ‰€æœ‰å…ƒç´ ä»¥åï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var a = new Employee[list.size];</span><br><span class="line">list.toArray(a);</span><br></pre></td></tr></table></figure></li>
<li><p>å¯¹è±¡åŒ…è£…å™¨ä¸è‡ªåŠ¨è£…ç®±</p>
<ul>
<li><p>ç”±äºæ³›å‹çš„ç±»å‹å‚æ•°ä¸å¯ä»¥æ˜¯åŸºæœ¬ç±»å‹ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ç”¨å¯¹åº”çš„å¯¹è±¡åŒ…è£…å™¨ï¼Œå…¶å’ŒåŸºæœ¬ç±»å‹ä¸€ä¸€å¯¹åº”</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line">list.add(<span class="number">3</span>) <span class="comment">//ç­‰ä»·äº list.add(Integer.valueOf(3));  å«åšè‡ªåŠ¨è£…ç®±</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> list.get(<span class="number">1</span>); <span class="comment">// è‡ªåŠ¨æ‹†ç®±</span></span><br></pre></td></tr></table></figure></li>
<li><p>è£…ç®±ç±»éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œå³å°è£…å¥½æ•°æ®åå°±ä¸èƒ½å˜åŒ–å†…éƒ¨å°è£…çš„æ•°å€¼äº†ã€‚</p></li>
</ul></li>
<li><p>å¯å˜å‚æ•°æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public static double max(double... values)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸Šè¿°è¿™ä¸ªå‡½æ•°å¯ä»¥æ¥å—ä»»æ„ä¸ªdoubleç±»å‹çš„è¾“å…¥è°ƒç”¨</li>
</ul></li>
<li><p>æšä¸¾ç±»ï¼š</p></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Size</span>&#123; SMALL,MEDIUM,LARGE &#125;</span><br></pre></td></tr></table></figure>
<p>æ‰€æœ‰çš„æšä¸¾ç±»å‹éƒ½æ˜¯Enumç±»çš„å­ç±»ï¼Œå…¶ä¸­æœ‰è®¸å¤šæœ‰æ„ä¹‰çš„æ–¹æ³•ï¼Œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Size.SMALL.toString()</span><br><span class="line"><span class="type">Size</span> <span class="variable">s</span> <span class="operator">=</span> Enum.valueOf(Size.class,<span class="string">&quot;SMALL&quot;</span>)</span><br><span class="line">Size[] values = Size.values()</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaç²¾ç®€ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç²¾ç®€ç³»åˆ—ç¬”è®°4â€”â€”javaæ¥å£ã€lambdaè¡¨è¾¾å¼ã€å†…éƒ¨ç±»</title>
    <url>/2022/07/21/a3dcc1a0d43c/</url>
    <content><![CDATA[<p><strong>çŸ¥è¯†æ¥æºï¼šã€ŠJavaæ ¸å¿ƒæŠ€æœ¯å·Iã€‹ç¬¬6ç« èŠ‚</strong></p>
<h4 id="ä¸€æ¥å£interface">ä¸€ã€æ¥å£Interface</h4>
<ul>
<li><p>æ¥å£ç”¨æ¥æè¿°ç±»åº”å½“åšä»€ä¹ˆ</p></li>
<li><p>æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªComparableæ¥å£ï¼Œæ³¨æ„æ¥å£å†…çš„æ‰€æœ‰æ–¹æ³•éƒ½è‡ªåŠ¨æ˜¯publicæ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Comparable</span>&lt;T&gt;&#123;</span><br><span class="line">	<span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(T other)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>æ¥å£ä¸­ä¸èƒ½åŒ…å«å®ä¾‹å­—æ®µï¼Œä½†æ˜¯å¯ä»¥åŒ…å«å¸¸é‡ã€‚æ¥å£ä¸­çš„å­—æ®µæ€»æ˜¯public
static final</p></li>
<li><p>ä¸ºäº†è®©ç±»å®ç°ä¸€ä¸ªæ¥å£ï¼Œéœ€è¦å®Œæˆä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>1ã€å°†ç±»å£°æ˜ä¸ºå®ç°ç»™å®šçš„æ¥å£</li>
<li>2ã€å¯¹æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼Œåœ¨ç±»ä¸­æä¾›å®ç°ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Employee</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Employee&gt;&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Employee other)</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> Double.compare(salary,other.salary);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>æˆ‘ä»¬ä¸èƒ½æ„é€ æ¥å£çš„å¯¹è±¡ï¼Œä½†å¯ä»¥å£°æ˜æ¥å£çš„å˜é‡</p></li>
<li><p>æ¥å£çš„å˜é‡å¿…é¡»å¼•ç”¨å®ç°äº†è¿™ä¸ªæ¥å£çš„ç±»çš„å¯¹è±¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Comparable</span> <span class="variable">x</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(...)</span><br></pre></td></tr></table></figure></li>
<li><p>å¯ä»¥ä½¿ç”¨instanceofæ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å®ç°äº†æŸä¸ªç‰¹å®šçš„æ¥å£</p></li>
<li><p>æ¥å£ä¹Ÿå¯ä»¥ç»§æ‰¿æ‹“å±•,ä»é€šç”¨æ€§é«˜çš„æ¥å£æ‹“å±•åˆ°ä¸“ç”¨æ€§é«˜çš„æ¥å£</p></li>
<li><p>æ¯ä¸ªç±»è™½ç„¶åªèƒ½æœ‰ä¸€ä¸ªè¶…ç±»ï¼Œä½†æ˜¯å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Employee</span> <span class="keyword">implements</span> <span class="title class_">Cloneable</span>,Comparable</span><br></pre></td></tr></table></figure></li>
<li><p>å¯ä»¥ä¸ºæ¥å£æ–¹æ³•æä¾›ä¸€ä¸ªé»˜è®¤å®ç°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Comparable</span>&lt;T&gt;&#123;</span><br><span class="line">	<span class="keyword">default</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(T other)</span>&#123; <span class="keyword">return</span> <span class="number">0</span>; &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>å¦‚ä½•è§£å†³é»˜è®¤æ–¹æ³•å†²çªï¼Ÿ</p>
<ul>
<li><p>è¶…ç±»ä¼˜å…ˆåŸåˆ™ã€‚å¦‚æœè¶…ç±»æä¾›äº†ä¸€ä¸ªå…·ä½“æ–¹æ³•ï¼Œåˆ™æ¥å£çš„é»˜è®¤æ–¹æ³•ä¼šè¢«å¿½ç•¥</p>
<ul>
<li>å¦‚æœç±»Aç»§æ‰¿äº†ç±»Bï¼Œå®ç°äº†æ¥å£Cï¼ŒBå’ŒCä¸­æœ‰åŒåæ–¹æ³•ï¼Œåˆ™ç±»ä¼˜å…ˆ</li>
</ul></li>
<li><p>å¦‚æœä¸¤ä¸ªæ¥å£å®šä¹‰äº†åŒåçš„é»˜è®¤æ–¹æ³•ï¼Œæœ‰ä¸€ä¸ªç±»åŒæ—¶å®ç°äº†è¿™ä¸¤ä¸ªæ¥å£ï¼Œé‚£ä¹ˆä¼šæŠ¥é”™è®©ç¨‹åºå‘˜åœ¨ç±»ä¸­å®ç°ä¸€ä¸ªåŒåæ–¹æ³•ï¼Œæ¥å†³å®šä½¿ç”¨å“ªä¸ªã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Person</span>,Named&#123;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span>&#123; <span class="keyword">return</span> Person.<span class="built_in">super</span>().getName(); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li><p>æ¥å£ä¸å›è°ƒå‡½æ•°ï¼š</p>
<ul>
<li><p>ä¸€ä¸ªç»å…¸çš„å®šæ—¶å™¨å›è°ƒçš„å®ç°ï¼Œå…¶æ¥æ”¶ä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»å¿…é¡»æ˜¯å®ç°äº†ä»¥ä¸‹æ¥å£çš„</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ActionListener</span>&#123;</span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">actionPerformed</span><span class="params">(ActionEvent event)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TimePrinter</span> <span class="keyword">implements</span> <span class="title class_">ActionListener</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">actionPerformed</span><span class="params">(ActionEvent e)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;At the tone,the time is&quot;</span> + Instant.ofEpochMilli(e.getWhen()));</span><br><span class="line">        Toolkit.getDefaultToolkit().beep();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">listener</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TimePrinter</span>();</span><br><span class="line"><span class="type">Timer</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Timer</span>(<span class="number">1000</span>,listener);</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li><p>Comparatoræ¥å£ï¼š</p>
<ul>
<li><p>Arrays.sortå¯ä»¥æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºæ•°ç»„ï¼Œç¬¬äºŒä¸ªä¸ºæ¯”è¾ƒå™¨ï¼Œæ¯”è¾ƒå™¨éœ€è¦æ˜¯å®ç°äº†Comparatoræ¥å£çš„ç±»çš„å®ä¾‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LengthComparator</span> <span class="keyword">implements</span> <span class="title class_">Comparator</span>&lt;String&gt;&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(String first,String second)</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> first.length() - second.length();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String[] friends = &#123; <span class="string">&quot;peter&quot;</span>,<span class="string">&quot;paul&quot;</span>&#125;</span><br><span class="line">Arrays.sort(frineds, <span class="keyword">new</span> <span class="title class_">LengthComparator</span>())</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li><p>å¯¹è±¡å…‹éš† .clone() æ–¹æ³•ï¼š</p>
<ul>
<li>æ­£å¸¸å…‹éš†ä¸ºæµ…æ‹·è´ï¼Œå³å¦‚æœå¯¹è±¡ä¸­åŒ…å«å­å¯¹è±¡çš„å¼•ç”¨ï¼Œå°±å®¹æ˜“å‡ºé”™ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°åœ¨ç±»ä¸­å®šä¹‰cloneæ–¹æ³•ï¼Œæ¥å»ºç«‹ä¸€ä¸ªæ·±æ‹·è´ï¼ŒåŒæ—¶å…‹éš†æ‰€æœ‰å­å¯¹è±¡ã€‚ç±»éœ€è¦å®ç°Clonableæ¥å£ï¼Œå¹¶é‡æ–°å®šä¹‰cloneæ–¹æ³•ï¼Œå¹¶æŒ‡å®špublicä¿®é¥°ç¬¦ã€‚</li>
</ul></li>
</ul>
<h4 id="äºŒlambdaè¡¨è¾¾å¼">äºŒã€Lambdaè¡¨è¾¾å¼ï¼š</h4>
<ul>
<li><p>è¯­æ³•ç¤ºä¾‹ï¼šæ— éœ€æŒ‡å®šè¿”å›ç±»å‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">(String first, String second)-&gt;&#123;</span><br><span class="line">	first.length() - second.length();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Arrays.sort(friends,(String first, String second)-&gt;&#123;</span><br><span class="line">	first.length() - second.length();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li><p>å¯¹äºåªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œéœ€è¦è¿™ç§æ¥å£çš„å¯¹è±¡æ—¶ï¼Œå°±å¯ä»¥æä¾›ä¸€ä¸ªlambdaè¡¨è¾¾å¼ã€‚è¿™ç§æ¥å£ç§°ä¸ºå‡½æ•°å¼æ¥å£</p></li>
<li><p>æˆ‘ä»¬å¯ä»¥å°†lambdaè¡¨è¾¾å¼ä¿å­˜åœ¨å‡½æ•°å¼æ¥å£çš„å¼•ç”¨ä¸­ï¼Œjava.util.functionä¸­</p></li>
<li><p>å˜é‡çš„ä½œç”¨åŸŸï¼š</p>
<ul>
<li>lambdaè¡¨è¾¾å¼ä¸­å¯ä»¥è®¿é—®å¤–å›´æ–¹æ³•æˆ–è€…ç±»ä¸­çš„å˜é‡ï¼Œä½†æ˜¯å…¶åªèƒ½å¼•ç”¨å€¼ä¸ä¼šæ”¹å˜çš„å˜é‡ã€‚å¦å¤–å¦‚æœå¼•ç”¨äº†ä¸€ä¸ªå˜é‡ï¼Œè¯¥å˜é‡å¯èƒ½åœ¨å¤–éƒ¨æ”¹å˜ï¼Œè¿™ä¹Ÿæ˜¯ä¸åˆæ³•çš„ã€‚å…¶æ•è·çš„æ¯”é‚£è¾†å¿…é¡»æ˜¯
åˆå§‹åŒ–åä¸ä¼šä¸ºå…¶èµ‹æ–°å€¼çš„å˜é‡ã€‚</li>
</ul></li>
<li><p>å¦‚ä½•æ¥æ”¶Lambdaè¡¨è¾¾å¼ï¼Ÿå¦‚ä½•å¤„ç†ï¼Ÿ</p>
<ul>
<li><p>å¦‚æœæƒ³è¦æ¥æ”¶æŸä¸€ä¸ªLambdaè¡¨è¾¾å¼ï¼Œéœ€è¦é€‰æ‹©ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚P253é¡µæä¾›äº†å¸¸ç”¨çš„å‡½æ•°å¼æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">repeat</span><span class="params">(<span class="type">int</span> n,Runnable action)</span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) action.run();  <span class="comment">//è°ƒç”¨action.runæ—¶ä¼šæ‰§è¡Œä¼ å…¥çš„lambdaè¡¨è¾¾å¼çš„ä¸»ä½“</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li><p>æ›´ä¾¿æ·çš„Comparatorï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Arrays.sort(people,Comparator.comparing(Person::getName).thenComparing(Person::getFirstName));</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸ºcomparingæ–¹æ³•æå–çš„é”®æŒ‡å®šä¸€ä¸ªæ¯”è¾ƒå™¨</span></span><br><span class="line">Arrays.sort(people,Comparator.comparing(Person::getName,(s,t)</span><br><span class="line">                                        -&gt;Integer.compare(s.length(),t.length()));</span><br><span class="line"><span class="comment">//æ›´ç®€æ´</span></span><br><span class="line">Arrays.sort(people,Comparator.comparingInt(p-&gt;p.getName().length());</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="ä¸‰å†…éƒ¨ç±»">ä¸‰ã€å†…éƒ¨ç±»ï¼š</h4>
<ul>
<li><p>å†…éƒ¨ç±»å¯ä»¥å¯¹åŒä¸€ä¸ªåŒ…ä¸­çš„å…¶ä»–ç±»éšè—</p></li>
<li><p>å†…éƒ¨ç±»æ–¹æ³•å¯ä»¥è®¿é—®å®šä¹‰è¿™ä¸ªç±»çš„ä½œç”¨åŸŸä¸­çš„æ•°æ®ï¼ŒåŒ…æ‹¬private</p></li>
<li><p>å±€éƒ¨å†…éƒ¨ç±»ï¼š</p>
<ul>
<li><p>å¯ä»¥åœ¨ä¸€ä¸ªæ–¹æ³•ç§å±€éƒ¨åœ°å®šä¹‰ä¸€ä¸ªç±»ï¼Œå£°æ˜å±€éƒ¨ç±»æ—¶ä¸èƒ½æœ‰è®¿é—®è¯´æ˜ç¬¦</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span>&#123;</span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">TimePrinter</span> <span class="keyword">implements</span> <span class="title class_">ActionListener</span>&#123;</span><br><span class="line">		<span class="comment">//...</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li><p>åŒ¿åå†…éƒ¨ç±»ï¼š</p>
<ul>
<li><p>ä½¿ç”¨å±€éƒ¨å†…éƒ¨ç±»æ—¶ï¼Œå¦‚æœåªæƒ³åˆ›å»ºè¿™ä¸ªç±»çš„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½ä¸éœ€è¦æŒ‡å®šç±»çš„åå­—ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span>&#123;</span><br><span class="line">	<span class="type">var</span> <span class="variable">listener</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ActionListener</span>()   <span class="comment">//å«ä¹‰ä¸ºï¼šåˆ›å»ºä¸€ä¸ªç±»çš„æ–°å¯¹è±¡ï¼Œè¿™ä¸ªç±»å®ç°äº†ActionListeneræ¥å£</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//.........</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>æ³¨æ„æ­¤å’Œæ„é€ ä¸€ä¸ªæ–°å¯¹è±¡çš„åŒºåˆ«ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">queen</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Mary&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="type">var</span> <span class="variable">count</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Dracula&quot;</span>)&#123;&#125;</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li><p>é™æ€å†…éƒ¨ç±»ï¼š</p>
<ul>
<li><p>å½“å†…éƒ¨ç±»ä¸éœ€è¦è®¿é—®å¤–å›´ç±»å¯¹è±¡æ—¶ï¼Œå°±åº”å½“ä½¿ç”¨é™æ€å†…éƒ¨ç±»ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ArrayAlg</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Pair</span>&#123;</span><br><span class="line">		<span class="comment">//ä¸éœ€è¦è®¿é—®ArrayAlgå¯¹è±¡		</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>é™æ€å†…éƒ¨ç±»å¯ä»¥æœ‰é™æ€å­—æ®µå’Œæ–¹æ³•</p></li>
<li><p>åœ¨æ¥å£ä¸­å£°æ˜çš„å†…éƒ¨ç±»è‡ªåŠ¨æ˜¯staticå’Œpublic</p></li>
</ul></li>
</ul>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaç²¾ç®€ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç²¾ç®€ç³»åˆ—ç¬”è®°5â€”â€”å¼‚å¸¸ã€æ–­è¨€å’Œæ—¥å¿—</title>
    <url>/2022/08/02/22cd7f0d9b01/</url>
    <content><![CDATA[<p><strong>çŸ¥è¯†æ¥æºï¼šã€ŠJavaæ ¸å¿ƒæŠ€æœ¯å·Iã€‹ç¬¬7ç« èŠ‚</strong></p>
<h4 id="ä¸€å¼‚å¸¸">ä¸€ã€å¼‚å¸¸</h4>
<p>å½“å‘ç”Ÿé”™è¯¯çš„æ—¶å€™ï¼Œåº”å½“åšåˆ°ä»¥ä¸‹ä¸‰ç‚¹ï¼š</p>
<ul>
<li>å‘ç”¨æˆ·é€šçŸ¥é”™è¯¯</li>
<li>ä¿å­˜æ‰€æœ‰çš„å·¥ä½œ</li>
<li>å…è®¸ç”¨æˆ·å¦¥å–„çš„é€€å‡ºç¨‹åº</li>
</ul>
<p>å¼‚å¸¸å¤„ç†çš„ä»»åŠ¡æ˜¯å°†æ§åˆ¶æƒä»äº§ç”Ÿé”™è¯¯çš„åœ°æ–¹è½¬ç§»åˆ°èƒ½å¤Ÿå¤„ç†è¿™ç§æƒ…å†µçš„é”™è¯¯å¤„ç†å™¨</p>
<p>å¦‚ä¸‹æ˜¯Javaä¸­çš„å¼‚å¸¸å±‚æ¬¡ç»“æ„ï¼š</p>
<ul>
<li><p>Throwable</p>
<ul>
<li>Errorï¼šå†…éƒ¨é”™è¯¯å’Œèµ„æºè€—å°½é”™è¯¯</li>
<li>Exception
<ul>
<li>IOException å…¶ä»–å¼‚å¸¸ï¼Œä¾‹å¦‚è¯•å›¾æ‰“å¼€ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶ç­‰</li>
<li>RuntimeException ä¸€èˆ¬ç”±ç¼–ç¨‹é”™è¯¯å¯¼è‡´</li>
</ul></li>
</ul></li>
<li><p>Javaå°†æ´¾ç”ŸäºErrorå’ŒRuntimeExceptionç±»çš„æ‰€æœ‰å¼‚å¸¸ç§°ä¸ºéæ£€æŸ¥å‹å¼‚å¸¸ï¼Œæ‰€æœ‰å…¶ä»–çš„å¼‚å¸¸ç§°ä¸ºæ£€æŸ¥å‹å¼‚å¸¸ã€‚<strong>ç¼–è¯‘å™¨å°†æ£€æŸ¥ä½ æ˜¯å¦ä¸ºæ‰€æœ‰çš„æ£€æŸ¥å‹å¼‚å¸¸æä¾›äº†å¼‚å¸¸å¤„ç†å™¨</strong></p></li>
<li><p>è‡ªå·±ç¼–å†™æ–¹æ³•æ—¶ï¼Œä¸å¿…å£°æ˜è¿™ä¸ªæ–¹æ³•å¯èƒ½æŠ›å‡ºçš„æ‰€æœ‰å¼‚å¸¸ï¼Œéœ€è¦è®°ä½åœ¨ä»¥ä¸‹å››ç§æƒ…å†µä¸‹æŠ›å‡ºå¼‚å¸¸ï¼š</p>
<ul>
<li>è°ƒç”¨äº†ä¸€ä¸ªæŠ›å‡ºæ£€æŸ¥å‹å¼‚å¸¸çš„æ–¹æ³•</li>
<li>æ£€æµ‹åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œå¹¶åˆ©ç”¨throwè¯­å¥æŠ›å‡ºä¸€ä¸ªæ£€æŸ¥è¡Œå¼‚å¸¸</li>
<li>ç¨‹åºå‡ºç°é”™è¯¯</li>
<li>Javaè™šæ‹Ÿæœºæˆ–è¿è¡Œæ—¶åº“å‡ºç°å†…éƒ¨é”™è¯¯</li>
</ul></li>
<li><p>å¦‚æœä¸€ä¸ªç±»ä¸­çš„æ–¹æ³•å£°æ˜å®ƒä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œè¿™ä¸ªè¢«æŠ›å‡ºçš„å¼‚å¸¸å¯èƒ½å±äºè¿™ä¸ªç±»ï¼Œä¹Ÿå¯èƒ½å±äºè¿™ä¸ªç±»çš„å­ç±»ã€‚</p></li>
<li><p>åˆ›å»ºå¼‚å¸¸ç±»ï¼š</p>
<ul>
<li><p>æ ‡å‡†çš„åšæ³•æ˜¯åˆ›å»ºä¸¤ä¸ªæ„é€ å‡½æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FileFormatException</span> <span class="keyword">extends</span> <span class="title class_">IOException</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">FileFormatException</span><span class="params">()</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">FileFormatException</span><span class="params">(String gripe)</span>&#123;</span><br><span class="line">		<span class="built_in">super</span>(gripe)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li><p>å¦‚æœç¼–å†™ä¸€ä¸ªæ–¹æ³•è¦†ç›–è¶…ç±»çš„æ–¹æ³•ï¼Œè€Œè¿™ä¸ªè¶…ç±»æ–¹æ³•æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œä½ å°±å¿…é¡»æ•è·ä½ çš„æ–¹æ³•ä»£ç ä¸­å‡ºç°çš„æ¯ä¸€ä¸ªæ£€æŸ¥å‹å¼‚å¸¸ã€‚ä¸å…è®¸åœ¨å­ç±»çš„throwsè¯´æ˜ç¬¦ä¸­å‡ºç°è¶…ç±»æ–¹æ³•æœªåˆ—å‡ºçš„å¼‚å¸¸ç±»ã€‚</p></li>
<li><p>å¯ä»¥åœ¨catchä¸­å†æ¬¡æŠ›å‡ºå¼‚å¸¸ï¼Œé€šå¸¸å¸Œæœ›æ”¹å˜å¼‚å¸¸ç±»å‹çš„æ—¶å€™ä¼šè¿™ä¹ˆåšã€‚</p></li>
<li><p>ä¸ç®¡æ˜¯å¦æœ‰å¼‚å¸¸è¢«æŠ›å‡ºï¼Œfinallyå­å¥éƒ½ä¼šæ‰§è¡Œï¼Œä¸€èˆ¬ç”¨äºå…³é—­ä¸€äº›å·²ç»è¢«å ç”¨çš„ç³»ç»Ÿèµ„æºã€‚</p></li>
<li><p>try-with-Resourcesè¯­å¥</p></li>
<li><p>å‡è®¾èµ„æºå±äºä¸€ä¸ªå®ç°äº†AutoCloseableæ¥å£çš„ç±»ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹è¯­å¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>(Resource res)&#123;</span><br><span class="line">	<span class="keyword">while</span>(in.hasNext())&#123;</span><br><span class="line">		<span class="comment">//....</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>tryå—æ­£å¸¸é€€å‡ºæˆ–æ˜¯å­˜åœ¨ä¸€ä¸ªå¼‚å¸¸æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨res.close()å‡½æ•°ï¼Œå¦‚æœä½¿ç”¨å¸¸è§„æ–¹å¼ç¼–ç¨‹å°±éœ€è¦ä¸¤ä¸ªtryå’Œfinallyè¯­å¥ã€‚</p></li>
<li><p>åˆ†æå †æ ˆè½¨è¿¹å…ƒç´ </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var t = new Throwable()</span><br><span class="line">t.printStackTrace()</span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨StakcWalkerç±»ï¼Œæ¥é€ä¸ªåˆ†æ</li>
</ul></li>
<li><p>ä½¿ç”¨å¼‚å¸¸çš„æŠ€å·§ï¼š</p>
<ul>
<li>å¼‚å¸¸å¤„ç†ä¸èƒ½ä»£æ›¿ç®€å•çš„ifåˆ¤æ–­æµ‹è¯•ï¼Œå› ä¸ºè€—æ—¶è¾ƒä¹…</li>
<li>ä¸è¦è¿‡åˆ†åœ°ç»†åŒ–å¼‚å¸¸</li>
<li>å……åˆ†åˆ©ç”¨å¼‚å¸¸å±‚æ¬¡ç»“æ„
<ul>
<li>ä¸è¦åªæŠ›å‡ºRuntimeExceptionå¼‚å¸¸ï¼Œä¸è¦åªæ•è·Throwableå¼‚å¸¸ã€‚</li>
</ul></li>
<li>ä¸è¦å‹åˆ¶å¼‚å¸¸ï¼š</li>
<li>åœ¨æ£€æµ‹é”™è¯¯æ—¶ï¼Œå°½å¯èƒ½åœ°ä¸¥è‹›</li>
<li>ä¸è¦ç¾äºä¼ é€’å¼‚å¸¸ï¼Œè¿™æ ·å¯ä»¥è®©æ›´é«˜å±‚çš„æ–¹æ³•æ›´å¥½çš„é€šçŸ¥ç”¨æˆ·å‘ç”Ÿäº†é”™è¯¯</li>
</ul></li>
</ul>
<h4 id="äºŒæ–­è¨€">äºŒã€æ–­è¨€ï¼š</h4>
<ul>
<li><p>æ–­è¨€æœºåˆ¶å…è®¸åœ¨æµ‹è¯•æœŸé—´å‘ä»£ç ä¸­æ’å…¥ä¸€äº›æ£€æŸ¥ï¼Œè€Œåœ¨ç”Ÿäº§ä»£ç ä¸­ä¼šè‡ªåŠ¨åˆ é™¤è¿™äº›æ£€æŸ¥ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">assert</span> x&gt;=<span class="number">0</span>;   <span class="comment">//å¦‚æœæ¡ä»¶ä¸æˆç«‹ï¼ŒæŠ›å‡ºä¸€ä¸ªAssertionErrorå¼‚å¸¸</span></span><br><span class="line"><span class="keyword">assert</span> x&gt;=<span class="number">0</span> : x;  <span class="comment">//å¦‚æœæ¡ä»¶ä¸æˆç«‹ï¼ŒæŠ›å‡ºä¸€ä¸ªAssertionErrorå¼‚å¸¸ï¼Œæºå¸¦xçš„å®é™…å€¼</span></span><br></pre></td></tr></table></figure></li>
<li><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ–­è¨€æ˜¯ç¦ç”¨çš„ï¼Œå¯ä»¥åœ¨è¿è¡Œç¨‹åºæ—¶ç”¨-eaé€‰é¡¹å¯ç”¨æ–­è¨€ã€‚</p></li>
<li><p>ç¨‹åºå‘˜ä½¿ç”¨æ–­è¨€æ¥è¿›è¡Œè‡ªæˆ‘æ£€æŸ¥</p></li>
</ul>
<h4 id="ä¸‰æ—¥å¿—">ä¸‰ã€æ—¥å¿—</h4>
<ul>
<li><p>æ—¥å¿—APIç”¨äºè°ƒè¯•æ‰€ç”Ÿï¼Œå…¶ä¼˜ç‚¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul>
<li>å¯ä»¥å¾ˆå®¹æ˜“åœ°å–æ¶ˆå…¨éƒ¨æ—¥å¿—è®°å½•ï¼Œæˆ–ä»…ä»…å–æ¶ˆæŸä¸ªçº§åˆ«ä¸€ä¸‹åœ°æ—¥å¿—</li>
<li>å¯ä»¥å¾ˆç®€å•åœ°ç¦æ­¢æ—¥å¿—è®°å½•</li>
<li>æ—¥å¿—è®°å½•å¯ä»¥è¢«å®šå‘åˆ°ä¸åŒçš„å¤„ç†å™¨</li>
</ul></li>
<li><p>å…¨å±€æ—¥å¿—è®°å½•å™¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Logger.getGlobal().info(<span class="string">&quot;File-&gt;open menu&quot;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Logger.getGlobal().setLevel(Level.OFF)  <span class="comment">//å–æ¶ˆæ‰€æœ‰æ—¥å¿—</span></span><br></pre></td></tr></table></figure></li>
<li><p>ä½¿ç”¨getLoggeræ–¹æ³•åˆ›å»ºæˆ–è·å–æ—¥å¿—è®°å½•å™¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">mylogger</span> <span class="operator">=</span> Logger.getLogger(<span class="string">&quot;com.mycompany.myapp&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>æ—¥å¿—è®°å½•å™¨åå…·æœ‰å±‚æ¬¡ç»“æ„ï¼Œå¦‚æœå¯¹"com.mycompany"è®¾ç½®äº†æ—¥å¿—çº§åˆ«ï¼Œå®ƒçš„å­æ—¥å¿—è®°å½•å™¨ä¹Ÿä¼šç»§æ‰¿è¿™ä¸ªçº§åˆ«ã€‚</p></li>
<li><p>æ—¥å¿—çº§åˆ«ï¼š</p>
<ul>
<li>SEVERE</li>
<li>WARNING</li>
<li>INFO</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">logger.setLevel(Level.WARNING)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">logger.warning(message)</span><br><span class="line">logger.info(message)</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaç²¾ç®€ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç²¾ç®€ç³»åˆ—ç¬”è®°8â€”â€”ç½‘ç»œç¼–ç¨‹</title>
    <url>/2022/08/13/8699249df0f2/</url>
    <content><![CDATA[<h3 id="ä¸€inetaddressç±»">ä¸€ã€InetAddressç±»:</h3>
<ul>
<li><p>è·å–æœ¬æœºçš„InetAddresså¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">InetAddress.getLocalHost();</span><br></pre></td></tr></table></figure></li>
<li><p>æ ¹æ®ä¸»æœºå è·å¾—InetAddresså¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">InetAddress.getByName(&quot;DESKTOP-ICFPFA0&quot;)</span><br></pre></td></tr></table></figure></li>
<li><p>æ ¹æ®åŸŸå è·å¾—InetAddresså¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">InetAddress.getByName(&quot;www.baidu.com&quot;);</span><br></pre></td></tr></table></figure></li>
<li><p>æ ¹æ®InetAddresså¯¹è±¡ è·å–å¯¹åº”çš„ åœ°å€ æˆ–è€… ä¸»æœºå/åŸŸå</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">inet.getHostAddress(); </span><br><span class="line">inet.getHostName(); </span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="äºŒsocketç¼–ç¨‹">äºŒã€Socketç¼–ç¨‹</h3>
<p>Socketå…è®¸ç¨‹åºæŠŠç½‘ç»œè¿æ¥å½“æˆä¸€ä¸ªæµï¼Œæ•°æ®åœ¨ä¸¤ä¸ªSocketé—´é€šè¿‡IOä¼ è¾“ã€‚</p>
<p>å½“æˆ‘ä»¬éœ€è¦é€šè®¯æ—¶ï¼š</p>
<ul>
<li><p>socket.getOutputStream()</p></li>
<li><p>socket.getInputStream()</p></li>
</ul>
<h3
id="ä¸‰åŸºäºsocketçš„tcpå­—èŠ‚æµç¼–ç¨‹">ä¸‰ã€åŸºäºSocketçš„TCPå­—èŠ‚æµç¼–ç¨‹ï¼š</h3>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220813170808297.png" style="zoom:67%;" /></p>
<p>æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„äº’ç›¸é€šä¿¡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SocketTCPServer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//1.ç¨‹åºç›‘å¬åœ¨9999ç«¯å£ï¼Œç­‰å¾…é“¾æ¥</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.å½“æ²¡æœ‰å®¢æˆ·ç«¯è¿æ¥æ—¶ï¼Œç¨‹åºä¼šé˜»å¡ï¼Œç­‰å¾…è¿æ¥</span></span><br><span class="line">        <span class="comment">//å¦‚æœæœ‰å®¢æˆ·ç«¯è¿æ¥ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªsocketå¯¹è±¡ï¼Œç¨‹åºç»§ç»­æ‰§è¡Œ</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.é€šè¿‡socketè¯»å–å®¢æˆ·ç«¯å†™å…¥åˆ°æ•°æ®é€šé“çš„æ•°æ®ï¼Œæ˜¾ç¤º</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">        <span class="type">byte</span>[] buf = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">readLen</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>((readLen = inputStream.read(buf)) != -<span class="number">1</span>)&#123;   </span><br><span class="line">            <span class="comment">//è¯¥è¯»å–è¯­å¥ä¼šé˜»å¡ï¼ŒçŸ¥é“clientæ–¹è°ƒç”¨äº†socket.shutdownOutput();å³å‘ŠçŸ¥æ­¤æ¬¡æ¶ˆæ¯å·²ç»å‘é€ç»“æŸ</span></span><br><span class="line">            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(buf,<span class="number">0</span>,readLen));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.é€šè¿‡è¾“å‡ºæµï¼Œå†™å…¥æ•°æ®åˆ°æ•°æ®é€šé“</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">        outputStream.write(<span class="string">&quot;hello,client&quot;</span>.getBytes());</span><br><span class="line">        socket.shutdownOutput(); <span class="comment">//è®©å¯¹æ–¹çŸ¥é“ä½ è¯¥æ¬¡çš„æ¶ˆæ¯å·²ç»å‘é€å®Œæ¯•</span></span><br><span class="line"></span><br><span class="line">        outputStream.close();</span><br><span class="line">        inputStream.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        serverSocket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SocketTCPClient</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//1.è¿æ¥æœåŠ¡ç«¯ï¼ˆipï¼Œç«¯å£ï¼‰</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(InetAddress.getLocalHost(),<span class="number">9999</span>);</span><br><span class="line">        <span class="comment">//2.è¿æ¥ä¸Šåï¼Œç”ŸæˆSocketï¼Œé€šè¿‡socket.getOutputStreamï¼ˆï¼‰</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">        <span class="comment">//3.é€šè¿‡è¾“å‡ºæµï¼Œå†™å…¥æ•°æ®åˆ°æ•°æ®é€šé“ï¼Œå‘é€å®Œæ•°æ®ååº”å½“æœ‰ä¸€ä¸ªç»“æŸæ ‡è®°</span></span><br><span class="line">        outputStream.write(<span class="string">&quot;hello,server&quot;</span>.getBytes());</span><br><span class="line">        socket.shutdownOutput();  <span class="comment">//è®©å¯¹æ–¹çŸ¥é“ä½ è¯¥æ¬¡çš„æ¶ˆæ¯å·²ç»å‘é€å®Œæ¯•ï¼Œéå¸¸é‡è¦</span></span><br><span class="line"></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">        <span class="type">byte</span>[] buf = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">readLen</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>((readLen = inputStream.read(buf)) != -<span class="number">1</span>)&#123;  </span><br><span class="line">            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(buf,<span class="number">0</span>,readLen));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.å…³é—­æµå¯¹è±¡å’Œsocket</span></span><br><span class="line">        inputStream.close();</span><br><span class="line">        outputStream.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3
id="å››åŸºäºsocketçš„tcpå­—ç¬¦æµç¼–ç¨‹">å››ã€åŸºäºSocketçš„TCPå­—ç¬¦æµç¼–ç¨‹ï¼š</h3>
<p>å’Œå­—èŠ‚æµç¼–ç¨‹æœ‰å°‘è®¸å·®åˆ«ï¼Œéœ€è¦ä½¿ç”¨è½¬æ¢æµã€‚</p>
<p>æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„äº’ç›¸é€šä¿¡ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SocketTCPServer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//1.ç¨‹åºç›‘å¬åœ¨9999ç«¯å£ï¼Œç­‰å¾…é“¾æ¥</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.å½“æ²¡æœ‰å®¢æˆ·ç«¯è¿æ¥æ—¶ï¼Œç¨‹åºä¼šé˜»å¡ï¼Œç­‰å¾…è¿æ¥</span></span><br><span class="line">        <span class="comment">//å¦‚æœæœ‰å®¢æˆ·ç«¯è¿æ¥ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªsocketå¯¹è±¡ï¼Œç¨‹åºç»§ç»­æ‰§è¡Œ</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.é€šè¿‡socketè¯»å–å®¢æˆ·ç«¯å†™å…¥åˆ°æ•°æ®é€šé“çš„æ•°æ®ï¼Œæ˜¾ç¤º</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(inputStream));</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> bufferedReader.readLine();</span><br><span class="line">        System.out.println(s);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.é€šè¿‡è¾“å‡ºæµï¼Œå†™å…¥æ•°æ®åˆ°æ•°æ®é€šé“</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">bufferedWriter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(outputStream));</span><br><span class="line">        bufferedWriter.write(<span class="string">&quot;hello,client&quot;</span>);</span><br><span class="line">        bufferedWriter.newLine(); <span class="comment">// æ’å…¥æ¢è¡Œç¬¦ï¼Œä»£è¡¨å†™å…¥çš„å†…å®¹ç»“æŸäº†</span></span><br><span class="line">        bufferedWriter.flush(); <span class="comment">//éœ€è¦æ‰‹åŠ¨åˆ·æ–°ï¼Œå¦åˆ™ä¸ä¼šå†™å…¥æ•°æ®é€šé“</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        outputStream.close();</span><br><span class="line">        inputStream.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        serverSocket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SocketTCPClient</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//1.è¿æ¥æœåŠ¡ç«¯ï¼ˆipï¼Œç«¯å£ï¼‰</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(InetAddress.getLocalHost(),<span class="number">9999</span>);</span><br><span class="line">        <span class="comment">//2.è¿æ¥ä¸Šåï¼Œç”ŸæˆSocketï¼Œé€šè¿‡socket.getOutputStreamï¼ˆï¼‰</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">        <span class="comment">//3.é€šè¿‡è¾“å‡ºæµï¼Œå†™å…¥æ•°æ®åˆ°æ•°æ®é€šé“ï¼Œå‘é€å®Œæ•°æ®ååº”å½“æœ‰ä¸€ä¸ªç»“æŸæ ‡è®°</span></span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">bufferedWriter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(outputStream));</span><br><span class="line">        bufferedWriter.write(<span class="string">&quot;hello,server&quot;</span>);</span><br><span class="line">        bufferedWriter.newLine(); <span class="comment">// æ’å…¥æ¢è¡Œç¬¦ï¼Œä»£è¡¨å†™å…¥çš„å†…å®¹ç»“æŸäº†</span></span><br><span class="line">        bufferedWriter.flush(); <span class="comment">//éœ€è¦æ‰‹åŠ¨åˆ·æ–°ï¼Œå¦åˆ™ä¸ä¼šå†™å…¥æ•°æ®é€šé“</span></span><br><span class="line"></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(inputStream));</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> bufferedReader.readLine();</span><br><span class="line">        System.out.println(s);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.å…³é—­æµå¯¹è±¡å’Œsocket</span></span><br><span class="line">        inputStream.close();</span><br><span class="line">        outputStream.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="äº”tcpç¼–ç¨‹ç½‘ç»œä¸Šä¼ æ–‡ä»¶">äº”ã€TCPç¼–ç¨‹â€”â€”ç½‘ç»œä¸Šä¼ æ–‡ä»¶ï¼š</h3>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220814095756722.png" style="zoom:67%;" /></p>
<ul>
<li><p>å¸¸ç”¨ä¾èµ–ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> fileupload;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamUtil</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¾“å…¥æµå¯¹è±¡è½¬å­—èŠ‚æ•°ç»„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> is</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">byte</span>[] streamToByteArray(InputStream is) <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">ByteArrayOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>(); <span class="comment">//åˆ›å»ºè¾“å‡ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">byte</span>[] b = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len = is.read(b)) !=-<span class="number">1</span>)&#123;   <span class="comment">//ç›¸å½“äºä½¿ç”¨ByteArrayOutputStreamåšäº†ä¸­è½¬</span></span><br><span class="line">            bos.write(b,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">byte</span>[] array = bos.toByteArray();</span><br><span class="line">        bos.close();</span><br><span class="line">        <span class="keyword">return</span> array;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¾“å…¥æµå¯¹è±¡è½¬å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> is</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">streamToString</span><span class="params">(InputStream is)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(is)); <span class="comment">//åˆ›å»ºè¾“å‡ºæµå¯¹è±¡</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        String line;</span><br><span class="line">        <span class="keyword">while</span>((line = reader.readLine()) != <span class="literal">null</span>)&#123;</span><br><span class="line">            builder.append(line + <span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> builder.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>å®¢æˆ·ç«¯ç¨‹åº</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> fileupload;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileTCPClient</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//1.è¿æ¥æœåŠ¡ç«¯ï¼ˆipï¼Œç«¯å£ï¼‰</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(InetAddress.getLocalHost(),<span class="number">8000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="string">&quot;D:\\1.jpg&quot;</span>;</span><br><span class="line">        <span class="type">BufferedInputStream</span> <span class="variable">bufferedInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(filePath));</span><br><span class="line">        <span class="type">byte</span>[] fileBytes = StreamUtil.streamToByteArray(bufferedInputStream);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è¿æ¥ä¸Šåï¼Œç”ŸæˆSocketï¼Œé€šè¿‡socket.getOutputStream();</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">        <span class="type">BufferedOutputStream</span> <span class="variable">bufferedOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(outputStream);</span><br><span class="line">        bufferedOutputStream.write(fileBytes);</span><br><span class="line">        bufferedInputStream.close();</span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¯»å–æœåŠ¡å™¨è¿”å›çš„ä¿¡æ¯</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">        <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> StreamUtil.streamToString(inputStream);</span><br><span class="line">        System.out.println(msg);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//4.å…³é—­æµå¯¹è±¡å’Œsocket</span></span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>æœåŠ¡å™¨å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> fileupload;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileTCPServer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//1.ç¨‹åºç›‘å¬åœ¨9999ç«¯å£ï¼Œç­‰å¾…é“¾æ¥</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">8000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.å½“æ²¡æœ‰å®¢æˆ·ç«¯è¿æ¥æ—¶ï¼Œç¨‹åºä¼šé˜»å¡ï¼Œç­‰å¾…è¿æ¥</span></span><br><span class="line">        <span class="comment">//å¦‚æœæœ‰å®¢æˆ·ç«¯è¿æ¥ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªsocketå¯¹è±¡ï¼Œç¨‹åºç»§ç»­æ‰§è¡Œ</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.é€šè¿‡socketè¯»å–å®¢æˆ·ç«¯å†™å…¥åˆ°æ•°æ®é€šé“çš„æ•°æ®ï¼Œæ˜¾ç¤º</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">        <span class="type">BufferedInputStream</span> <span class="variable">bufferedInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(inputStream);</span><br><span class="line"></span><br><span class="line">        <span class="type">byte</span>[] fileBytes = StreamUtil.streamToByteArray(bufferedInputStream);</span><br><span class="line">        <span class="type">String</span> <span class="variable">savaPath</span> <span class="operator">=</span> <span class="string">&quot;src\\new.jpg&quot;</span>;</span><br><span class="line">        <span class="type">BufferedOutputStream</span> <span class="variable">bufferedOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(savaPath));</span><br><span class="line">        bufferedOutputStream.write(fileBytes);</span><br><span class="line">        bufferedOutputStream.close();</span><br><span class="line"></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">bufferedWriter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(outputStream));</span><br><span class="line">        bufferedWriter.write(<span class="string">&quot;file upload success&quot;</span>);</span><br><span class="line">        bufferedWriter.flush();</span><br><span class="line">        bufferedWriter.newLine();</span><br><span class="line"></span><br><span class="line">        bufferedWriter.close();  <span class="comment">//åœ¨closeçš„æ—¶å€™ï¼Œä¹Ÿä¼šè°ƒç”¨flushæ–¹æ³•</span></span><br><span class="line">        inputStream.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        serverSocket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="å…­å¸¸ç”¨å‘½ä»¤">å…­ã€å¸¸ç”¨å‘½ä»¤</h3>
<ul>
<li>netstat -an | more</li>
<li>netstat -anb | more</li>
</ul>
<h3 id="ä¸ƒudpç¼–ç¨‹">ä¸ƒã€UDPç¼–ç¨‹</h3>
<p><strong>DatagramSocketå’ŒDatagramPacketç±»</strong></p>
<ul>
<li>UDPæ•°æ®æŠ¥é€šè¿‡æ•°æ®æŠ¥å¥—æ¥å­—DatagramSocket
å‘é€å’Œæ¥æ”¶ï¼Œç³»ç»Ÿä¸ä¿è¯UDPUDPæ•°æ®æŠ¥é€šè¿‡æ•°æ®æŠ¥å¥—æ¥</li>
<li>DatagramSocket å‘é€å’Œæ¥æ”¶ï¼Œç³»ç»Ÿä¸ä¿è¯UDP
æ•°æ®æŠ¥ä¸€å®šèƒ½å¤Ÿå®‰å…¨é€åˆ°ç›®çš„åœ°ï¼Œä¹Ÿä¸èƒ½ç¡®å®šä»€ä¹ˆæ—¶å€™å¯ä»¥æŠµè¾¾ã€‚</li>
<li>DatagramPacket
å¯¹è±¡å°è£…äº†UDPæ•°æ®æŠ¥ï¼Œåœ¨æ•°æ®æŠ¥ä¸­åŒ…å«äº†å‘é€ç«¯çš„IPåœ°å€å’Œç«¯å£å·ä»¥åŠæ¥æ”¶ç«¯çš„IPåœ°å€å’Œç«¯å£å·ã€‚</li>
<li>UDPåè®®ä¸­æ¯ä¸ªæ•°æ®æŠ¥éƒ½ç»™å‡ºäº†å®Œæ•´çš„åœ°å€ä¿¡æ¯ï¼Œå› æ­¤æ— é¡»å»ºç«‹å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„è¿æ¥</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220814165451640.png" style="zoom:67%;" /></p>
<ul>
<li><p>åŸºæœ¬æµç¨‹ï¼š</p>
<ul>
<li>å»ºç«‹å‘é€ç«¯ï¼Œæ¥æ”¶ç«¯</li>
<li>å‘é€æ•°æ®å‰ï¼Œå»ºç«‹æ•°æ®åŒ… DatagramSocket å¯¹è±¡</li>
<li>è°ƒç”¨DatagramSocketçš„å‘é€ã€æ¥æ”¶æ–¹æ³•</li>
<li>å…³é—­DatagramSocket</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UDPClientA</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1ã€åˆ›å»ºä¸€ä¸ªDatagramSocketå¯¹è±¡ï¼Œå‡†å¤‡æ¥æ”¶æ•°æ®</span></span><br><span class="line">        <span class="type">DatagramSocket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>(<span class="number">8000</span>);</span><br><span class="line">        <span class="comment">// 2ã€æ„å»ºä¸€ä¸ªDatagramPacketå¯¹è±¡ï¼Œå‡†å¤‡æ¥å—æ•°æ®</span></span><br><span class="line">        <span class="type">byte</span>[] buf = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">DatagramPacket</span> <span class="variable">packet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(buf,buf.length);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3ã€è°ƒç”¨æ¥æ”¶æ–¹æ³•ï¼Œæ²¡æœ‰æ¥æ”¶åˆ°æ•°æ®åŒ…çš„æ—¶å€™ï¼Œç¨‹åºä¼šé˜»å¡ã€‚</span></span><br><span class="line">        socket.receive(packet);</span><br><span class="line">        <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> packet.getLength();</span><br><span class="line">        <span class="type">byte</span>[] data = packet.getData();</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(data,<span class="number">0</span>,length);</span><br><span class="line">        System.out.println(s);</span><br><span class="line"></span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UDPClientB</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 1ã€åˆ›å»ºä¸€ä¸ªDatagramSocketå¯¹è±¡ï¼Œå‡†å¤‡å‘é€æ•°æ®</span></span><br><span class="line">        <span class="type">DatagramSocket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>(<span class="number">8002</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2ã€æ„å»ºä¸€ä¸ªDatagramPacketå¯¹è±¡ï¼Œå‡†å¤‡å‘é€</span></span><br><span class="line">        <span class="type">byte</span>[] data = <span class="string">&quot;hello clientA&quot;</span>.getBytes();</span><br><span class="line">        <span class="type">DatagramPacket</span> <span class="variable">packet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(data,data.length, InetAddress.getLocalHost(),<span class="number">8000</span>);</span><br><span class="line">        socket.send(packet);</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaç²¾ç®€ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç³»åˆ—ç¬”è®°10â€”â€”javaå•å…ƒæµ‹è¯•JUnit</title>
    <url>/2022/02/02/e8aa8ccaa4fe/</url>
    <content><![CDATA[<p>å‚è€ƒæ•™ç¨‹ç½‘å€ï¼šhttps://www.liaoxuefeng.com/wiki/1252599548343744/1304048154181666</p>
<h3 id="ä¸€ç¼–å†™junitæµ‹è¯•">ä¸€ã€ç¼–å†™JUnitæµ‹è¯•ï¼š</h3>
<h4 id="ä»€ä¹ˆæ˜¯æµ‹è¯•é©±åŠ¨å¼€å‘">1ã€ä»€ä¹ˆæ˜¯æµ‹è¯•é©±åŠ¨å¼€å‘ï¼Ÿ</h4>
<p>â€‹
æ‰€è°“æµ‹è¯•é©±åŠ¨å¼€å‘ï¼Œæ˜¯æŒ‡å…ˆç¼–å†™æ¥å£ï¼Œç´§æ¥ç€ç¼–å†™æµ‹è¯•ã€‚ç¼–å†™å®Œæµ‹è¯•åï¼Œæˆ‘ä»¬æ‰å¼€å§‹çœŸæ­£ç¼–å†™å®ç°ä»£ç ã€‚åœ¨ç¼–å†™å®ç°ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œä¸€è¾¹å†™ï¼Œä¸€è¾¹æµ‹ï¼Œä»€ä¹ˆæ—¶å€™æµ‹è¯•å…¨éƒ¨é€šè¿‡äº†ï¼Œé‚£å°±è¡¨ç¤ºç¼–å†™çš„å®ç°å®Œæˆäº†ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">    ç¼–å†™æ¥å£</span><br><span class="line">     â”‚</span><br><span class="line">     â–¼</span><br><span class="line">    ç¼–å†™æµ‹è¯•</span><br><span class="line">     â”‚</span><br><span class="line">     â–¼</span><br><span class="line">â”Œâ”€&gt; ç¼–å†™å®ç°</span><br><span class="line">â”‚    â”‚</span><br><span class="line">â”‚ N  â–¼</span><br><span class="line">â””â”€â”€ è¿è¡Œæµ‹è¯•</span><br><span class="line">     â”‚ Y</span><br><span class="line">     â–¼</span><br><span class="line">    ä»»åŠ¡å®Œæˆ</span><br></pre></td></tr></table></figure>
<h4 id="junitæµ‹è¯•æ¡†æ¶">2ã€JUnitæµ‹è¯•æ¡†æ¶ï¼š</h4>
<p>â€‹
JUnitæ˜¯ä¸€ä¸ªå¼€æºçš„Javaè¯­è¨€çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œä¸“é—¨é’ˆå¯¹Javaè®¾è®¡ï¼Œä½¿ç”¨æœ€å¹¿æ³›ã€‚JUnitæ˜¯äº‹å®ä¸Šçš„å•å…ƒæµ‹è¯•çš„æ ‡å‡†æ¡†æ¶ï¼Œä»»ä½•Javaå¼€å‘è€…éƒ½åº”å½“å­¦ä¹ å¹¶ä½¿ç”¨JUnitç¼–å†™å•å…ƒæµ‹è¯•</p>
<p>â€‹
ä½¿ç”¨JUnitç¼–å†™å•å…ƒæµ‹è¯•çš„å¥½å¤„åœ¨äºï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸ç®€å•åœ°ç»„ç»‡æµ‹è¯•ä»£ç ï¼Œå¹¶éšæ—¶è¿è¡Œå®ƒä»¬ï¼ŒJUnitå°±ä¼šç»™å‡ºæˆåŠŸçš„æµ‹è¯•å’Œå¤±è´¥çš„æµ‹è¯•ï¼Œè¿˜å¯ä»¥ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šï¼Œä¸ä»…åŒ…å«æµ‹è¯•çš„æˆåŠŸç‡ï¼Œè¿˜å¯ä»¥ç»Ÿè®¡æµ‹è¯•çš„ä»£ç è¦†ç›–ç‡ï¼Œå³è¢«æµ‹è¯•çš„ä»£ç æœ¬èº«æœ‰å¤šå°‘ç»è¿‡äº†æµ‹è¯•ã€‚å¯¹äºé«˜è´¨é‡çš„ä»£ç æ¥è¯´ï¼Œæµ‹è¯•è¦†ç›–ç‡åº”è¯¥åœ¨80%ä»¥ä¸Šã€‚</p>
<h4 id="intellijä¸­å¦‚ä½•å¼€å¯å•å…ƒæµ‹è¯•">3ã€IntelliJä¸­å¦‚ä½•å¼€å¯å•å…ƒæµ‹è¯•ï¼Ÿ</h4>
<p>â€‹
æ•™ç¨‹ï¼šhttps://blog.csdn.net/qq754772661/article/details/107790362</p>
<h4 id="å•å…ƒæµ‹è¯•æ–‡ä»¶æ€ä¹ˆç¼–å†™">4ã€å•å…ƒæµ‹è¯•æ–‡ä»¶æ€ä¹ˆç¼–å†™ï¼Ÿ</h4>
<p>â€‹
æ ¸å¿ƒæµ‹è¯•æ–¹æ³•<code>testFact()</code>åŠ ä¸Šäº†<code>@Test</code>æ³¨è§£ï¼Œè¿™æ˜¯JUnitè¦æ±‚çš„ï¼Œå®ƒä¼šæŠŠå¸¦æœ‰<code>@Test</code>çš„æ–¹æ³•è¯†åˆ«ä¸ºæµ‹è¯•æ–¹æ³•ã€‚åœ¨æµ‹è¯•æ–¹æ³•å†…éƒ¨ï¼Œæˆ‘ä»¬ç”¨<code>assertEquals(1, Factorial.fact(1))</code>è¡¨ç¤ºï¼ŒæœŸæœ›<code>Factorial.fact(1)</code>è¿”å›<code>1</code>ã€‚<code>assertEquals(expected, actual)</code>æ˜¯æœ€å¸¸ç”¨çš„æµ‹è¯•æ–¹æ³•ï¼Œå®ƒåœ¨<code>Assertion</code>ç±»ä¸­å®šä¹‰ã€‚<code>Assertion</code>è¿˜å®šä¹‰äº†å…¶ä»–æ–­è¨€æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><code>assertTrue()</code>: æœŸå¾…ç»“æœä¸º<code>true</code></li>
<li><code>assertFalse()</code>: æœŸå¾…ç»“æœä¸º<code>false</code></li>
<li><code>assertNotNull()</code>: æœŸå¾…ç»“æœä¸ºé<code>null</code></li>
<li><code>assertArrayEquals()</code>:
æœŸå¾…ç»“æœä¸ºæ•°ç»„å¹¶ä¸æœŸæœ›æ•°ç»„æ¯ä¸ªå…ƒç´ çš„å€¼å‡ç›¸ç­‰</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itranswarp.learnjava;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.jupiter.api.Assertions.*;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FactorialTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testFact</span><span class="params">()</span> &#123;</span><br><span class="line">        assertEquals(<span class="number">1</span>, Factorial.fact(<span class="number">1</span>));</span><br><span class="line">        assertEquals(<span class="number">2</span>, Factorial.fact(<span class="number">2</span>));</span><br><span class="line">        assertEquals(<span class="number">6</span>, Factorial.fact(<span class="number">3</span>));</span><br><span class="line">        assertEquals(<span class="number">3628800</span>, Factorial.fact(<span class="number">10</span>));</span><br><span class="line">        assertEquals(<span class="number">2432902008176640000L</span>, Factorial.fact(<span class="number">20</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¼–å†™å®Œæˆåï¼Œåœ¨ç¼–è¯‘å™¨å†…ç›´æ¥é€‰æ‹©è¿è¡Œè¯¥æ–‡ä»¶å³å¯ã€‚</p>
<h4 id="å•å…ƒæµ‹è¯•çš„ç»“æœ">5ã€å•å…ƒæµ‹è¯•çš„ç»“æœï¼š</h4>
<ul>
<li>å¦‚æœå…¨éƒ¨é€šè¿‡æµ‹è¯•ï¼š</li>
</ul>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_02_02_10_13_50_410.png"
alt="å±å¹•æ•è·_2022_02_02_10_13_50_410" />
<figcaption
aria-hidden="true">å±å¹•æ•è·_2022_02_02_10_13_50_410</figcaption>
</figure>
<ul>
<li>å¦‚æœæœ‰æ¡ˆä¾‹é€šä¸è¿‡æµ‹è¯•ï¼š</li>
</ul>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_02_02_10_14_11_224.png"
alt="å±å¹•æ•è·_2022_02_02_10_14_11_224" />
<figcaption
aria-hidden="true">å±å¹•æ•è·_2022_02_02_10_14_11_224</figcaption>
</figure>
<h4 id="å•å…ƒæµ‹è¯•çš„å¥½å¤„">6ã€å•å…ƒæµ‹è¯•çš„å¥½å¤„ï¼š</h4>
<p>â€‹
å•å…ƒæµ‹è¯•å¯ä»¥ç¡®ä¿å•ä¸ªæ–¹æ³•æŒ‰ç…§æ­£ç¡®é¢„æœŸè¿è¡Œï¼Œå¦‚æœä¿®æ”¹äº†æŸä¸ªæ–¹æ³•çš„ä»£ç ï¼Œåªéœ€ç¡®ä¿å…¶å¯¹åº”çš„å•å…ƒæµ‹è¯•é€šè¿‡ï¼Œå³å¯è®¤ä¸ºæ”¹åŠ¨æ­£ç¡®ã€‚æ­¤å¤–ï¼Œæµ‹è¯•ä»£ç æœ¬èº«å°±å¯ä»¥ä½œä¸ºç¤ºä¾‹ä»£ç ï¼Œç”¨æ¥æ¼”ç¤ºå¦‚ä½•è°ƒç”¨è¯¥æ–¹æ³•ã€‚</p>
<p>â€‹
ä½¿ç”¨JUnitè¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ–­è¨€ï¼ˆ<code>Assertion</code>ï¼‰æ¥æµ‹è¯•æœŸæœ›ç»“æœï¼Œå¯ä»¥æ–¹ä¾¿åœ°ç»„ç»‡å’Œè¿è¡Œæµ‹è¯•ï¼Œå¹¶æ–¹ä¾¿åœ°æŸ¥çœ‹æµ‹è¯•ç»“æœã€‚æ­¤å¤–ï¼Œ<strong>JUnitæ—¢å¯ä»¥ç›´æ¥åœ¨IDEä¸­è¿è¡Œï¼Œä¹Ÿå¯ä»¥æ–¹ä¾¿åœ°é›†æˆåˆ°Mavenè¿™äº›è‡ªåŠ¨åŒ–å·¥å…·ä¸­è¿è¡Œã€‚</strong></p>
<p>åœ¨ç¼–å†™å•å…ƒæµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦éµå¾ªä¸€å®šçš„è§„èŒƒï¼š</p>
<p>â€‹
ä¸€æ˜¯å•å…ƒæµ‹è¯•ä»£ç æœ¬èº«å¿…é¡»éå¸¸ç®€å•ï¼Œèƒ½ä¸€ä¸‹çœ‹æ˜ç™½ï¼Œå†³ä¸èƒ½å†ä¸ºæµ‹è¯•ä»£ç ç¼–å†™æµ‹è¯•ï¼›</p>
<p>â€‹ äºŒæ˜¯æ¯ä¸ªå•å…ƒæµ‹è¯•åº”å½“äº’ç›¸ç‹¬ç«‹ï¼Œä¸ä¾èµ–è¿è¡Œçš„é¡ºåºï¼›</p>
<p>â€‹
<strong>ä¸‰æ˜¯æµ‹è¯•æ—¶ä¸ä½†è¦è¦†ç›–å¸¸ç”¨æµ‹è¯•ç”¨ä¾‹ï¼Œè¿˜è¦ç‰¹åˆ«æ³¨æ„æµ‹è¯•è¾¹ç•Œæ¡ä»¶ï¼Œä¾‹å¦‚è¾“å…¥ä¸º<code>0</code>ï¼Œ<code>null</code>ï¼Œç©ºå­—ç¬¦ä¸²<code>""</code>ç­‰æƒ…å†µã€‚</strong></p>
<h3 id="äºŒä½¿ç”¨fixture">äºŒã€ä½¿ç”¨Fixture</h3>
<p>â€‹
åœ¨ä¸€ä¸ªå•å…ƒæµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ç¼–å†™å¤šä¸ª<code>@Test</code>æ–¹æ³•ï¼Œæ¥åˆ†ç»„ã€åˆ†ç±»å¯¹ç›®æ ‡ä»£ç è¿›è¡Œæµ‹è¯•ã€‚åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä¸€ä¸ªå¯¹è±¡éœ€è¦åˆå§‹åŒ–ï¼Œæµ‹è¯•å®Œå¯èƒ½è¿˜éœ€è¦æ¸…ç†çš„æƒ…å†µã€‚å¦‚æœæ¯ä¸ª<code>@Test</code>æ–¹æ³•éƒ½å†™ä¸€éè¿™æ ·çš„é‡å¤ä»£ç ï¼Œæ˜¾ç„¶æ¯”è¾ƒéº»çƒ¦ã€‚</p>
<p>â€‹
<strong>JUnitæä¾›äº†ç¼–å†™æµ‹è¯•å‰å‡†å¤‡ã€æµ‹è¯•åæ¸…ç†çš„å›ºå®šä»£ç ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºFixtureã€‚</strong></p>
<ul>
<li>ä»¥ä¸‹ä¸ºè¦æµ‹è¯•çš„ä»£ç ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Calculator</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">add</span><span class="params">(<span class="type">long</span> x)</span> &#123;</span><br><span class="line">        n = n + x;</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">sub</span><span class="params">(<span class="type">long</span> x)</span> &#123;</span><br><span class="line">        n = n - x;</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
è¿™ä¸ªç±»çš„åŠŸèƒ½å¾ˆç®€å•ï¼Œä½†æ˜¯æµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦å…ˆåˆå§‹åŒ–å¯¹è±¡ï¼Œæˆ‘ä»¬ä¸å¿…åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•ä¸­éƒ½å†™ä¸Šåˆå§‹åŒ–ä»£ç ï¼Œè€Œæ˜¯<strong>é€šè¿‡<code>@BeforeEach</code>æ¥åˆå§‹åŒ–ï¼Œé€šè¿‡<code>@AfterEach</code>æ¥æ¸…ç†èµ„æºï¼š</strong>å¦‚ä¸‹æ‰€ç¤º</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CalculatorTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    Calculator calculator;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BeforeEach</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUp</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.calculator = <span class="keyword">new</span> <span class="title class_">Calculator</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterEach</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">tearDown</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.calculator = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testAdd</span><span class="params">()</span> &#123;</span><br><span class="line">        assertEquals(<span class="number">100</span>, <span class="built_in">this</span>.calculator.add(<span class="number">100</span>));</span><br><span class="line">        assertEquals(<span class="number">150</span>, <span class="built_in">this</span>.calculator.add(<span class="number">50</span>));</span><br><span class="line">        assertEquals(<span class="number">130</span>, <span class="built_in">this</span>.calculator.add(-<span class="number">20</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSub</span><span class="params">()</span> &#123;</span><br><span class="line">        assertEquals(-<span class="number">100</span>, <span class="built_in">this</span>.calculator.sub(<span class="number">100</span>));</span><br><span class="line">        assertEquals(-<span class="number">150</span>, <span class="built_in">this</span>.calculator.sub(<span class="number">50</span>));</span><br><span class="line">        assertEquals(-<span class="number">130</span>, <span class="built_in">this</span>.calculator.sub(-<span class="number">20</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
è¿˜æœ‰ä¸€äº›èµ„æºåˆå§‹åŒ–å’Œæ¸…ç†å¯èƒ½æ›´åŠ ç¹çï¼Œè€Œä¸”ä¼šè€—è´¹è¾ƒé•¿çš„æ—¶é—´ï¼Œä¾‹å¦‚åˆå§‹åŒ–æ•°æ®åº“ã€‚**JUnitè¿˜æä¾›äº†<code>@BeforeAll</code>å’Œ<code>@AfterAll</code>ï¼Œå®ƒä»¬åœ¨è¿è¡Œæ‰€æœ‰@Testå‰åè¿è¡Œã€‚</p>
<p>â€‹
å› ä¸º<code>@BeforeAll</code>å’Œ<code>@AfterAll</code>åœ¨æ‰€æœ‰<code>@Test</code>æ–¹æ³•è¿è¡Œå‰åä»…è¿è¡Œä¸€æ¬¡ï¼Œå› æ­¤ï¼Œå®ƒä»¬åªèƒ½åˆå§‹åŒ–é™æ€å˜é‡ã€‚</p>
<p><strong>äº‹å®ä¸Šï¼Œ<code>@BeforeAll</code>å’Œ<code>@AfterAll</code>ä¹Ÿåªèƒ½æ ‡æ³¨åœ¨é™æ€æ–¹æ³•ä¸Šã€‚</strong></p>
<p><strong>å› æ­¤ï¼Œæˆ‘ä»¬æ€»ç»“å‡ºç¼–å†™Fixtureçš„å¥—è·¯å¦‚ä¸‹ï¼š</strong></p>
<ol type="1">
<li>å¯¹äºå®ä¾‹å˜é‡ï¼Œåœ¨<code>@BeforeEach</code>ä¸­åˆå§‹åŒ–ï¼Œåœ¨<code>@AfterEach</code>ä¸­æ¸…ç†ï¼Œå®ƒä»¬åœ¨å„ä¸ª<code>@Test</code>æ–¹æ³•ä¸­äº’ä¸å½±å“ï¼Œå› ä¸ºæ˜¯ä¸åŒçš„å®ä¾‹ï¼›</li>
<li>å¯¹äºé™æ€å˜é‡ï¼Œåœ¨<code>@BeforeAll</code>ä¸­åˆå§‹åŒ–ï¼Œåœ¨<code>@AfterAll</code>ä¸­æ¸…ç†ï¼Œå®ƒä»¬åœ¨å„ä¸ª<code>@Test</code>æ–¹æ³•ä¸­å‡æ˜¯å”¯ä¸€å®ä¾‹ï¼Œä¼šå½±å“å„ä¸ª<code>@Test</code>æ–¹æ³•ã€‚</li>
</ol>
<p>â€‹
å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨<code>@BeforeEach</code>å’Œ<code>@AfterEach</code>å°±è¶³å¤Ÿäº†ã€‚åªæœ‰æŸäº›æµ‹è¯•èµ„æºåˆå§‹åŒ–è€—è´¹æ—¶é—´å¤ªé•¿ï¼Œä»¥è‡³äºæˆ‘ä»¬ä¸å¾—ä¸å°½é‡â€œå¤ç”¨â€æ—¶æ‰ä¼šç”¨åˆ°<code>@BeforeAll</code>å’Œ<code>@AfterAll</code>ã€‚</p>
<p>â€‹
<strong>æœ€åï¼Œæ³¨æ„åˆ°æ¯æ¬¡è¿è¡Œä¸€ä¸ª<code>@Test</code>æ–¹æ³•å‰ï¼ŒJUnité¦–å…ˆåˆ›å»ºä¸€ä¸ª<code>XxxTest</code>å®ä¾‹ï¼Œå› æ­¤ï¼Œæ¯ä¸ª<code>@Test</code>æ–¹æ³•å†…éƒ¨çš„æˆå‘˜å˜é‡éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸èƒ½ä¹Ÿæ— æ³•æŠŠæˆå‘˜å˜é‡çš„çŠ¶æ€ä»ä¸€ä¸ª<code>@Test</code>æ–¹æ³•å¸¦åˆ°å¦ä¸€ä¸ª<code>@Test</code>æ–¹æ³•ã€‚</strong></p>
<h3 id="ä¸‰å¼‚å¸¸æµ‹è¯•">ä¸‰ã€å¼‚å¸¸æµ‹è¯•ï¼š</h3>
<p>â€‹
å¯¹äºå¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸è¿›è¡Œæµ‹è¯•ï¼Œæœ¬èº«å°±æ˜¯æµ‹è¯•çš„é‡è¦ç¯èŠ‚ã€‚åœ¨ç¼–å†™JUnitæµ‹è¯•çš„æ—¶å€™ï¼Œé™¤äº†æ­£å¸¸çš„è¾“å…¥è¾“å‡ºï¼Œæˆ‘ä»¬è¿˜è¦ç‰¹åˆ«é’ˆå¯¹å¯èƒ½å¯¼è‡´å¼‚å¸¸çš„æƒ…å†µè¿›è¡Œæµ‹è¯•ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>è¢«æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼šåœ¨æ–¹æ³•å…¥å£ï¼Œæˆ‘ä»¬å¢åŠ äº†å¯¹å‚æ•°<code>n</code>çš„æ£€æŸ¥ï¼Œå¦‚æœä¸ºè´Ÿæ•°ï¼Œåˆ™ç›´æ¥æŠ›å‡º<code>IllegalArgumentException</code>ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Factorial</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">fact</span><span class="params">(<span class="type">long</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">r</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">long</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            r = r * i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æµ‹è¯•ä»£ç ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testNegative</span><span class="params">()</span> &#123;</span><br><span class="line">    assertThrows(IllegalArgumentException.class, () -&gt; &#123;</span><br><span class="line">        Factorial.fact(-<span class="number">1</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å››æ¡ä»¶æµ‹è¯•">å››ã€æ¡ä»¶æµ‹è¯•ï¼š</h3>
<h4 id="disabled">1ã€<span class="citation"
data-cites="Disabled">@Disabled</span></h4>
<p>â€‹
åœ¨è¿è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œæœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ’å‡ºæŸäº›<code>@Test</code>æ–¹æ³•ï¼Œä¸è¦è®©å®ƒè¿è¡Œï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»™å®ƒæ ‡è®°ä¸€ä¸ª<code>@Disabled</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Disabled</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testBug101</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// è¿™ä¸ªæµ‹è¯•ä¸ä¼šè¿è¡Œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ç›´æ¥æ³¨é‡Šæ‰<code>@Test</code>ï¼Œè€Œæ˜¯è¦åŠ ä¸€ä¸ª<code>@Disabled</code>ï¼Ÿè¿™æ˜¯å› ä¸ºæ³¨é‡Šæ‰<code>@Test</code>ï¼ŒJUnitå°±ä¸çŸ¥é“è¿™æ˜¯ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œè€ŒåŠ ä¸Š<code>@Disabled</code>ï¼ŒJUnitä»ç„¶è¯†åˆ«å‡ºè¿™æ˜¯ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œåªæ˜¯æš‚æ—¶ä¸è¿è¡Œã€‚å®ƒä¼šåœ¨æµ‹è¯•ç»“æœä¸­æ˜¾ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Tests run: 68, Failures: 2, Errors: 0, Skipped: 5</span><br></pre></td></tr></table></figure>
<p>â€‹
ç±»ä¼¼<code>@Disabled</code>è¿™ç§æ³¨è§£å°±ç§°ä¸ºæ¡ä»¶æµ‹è¯•ï¼ŒJUnitæ ¹æ®ä¸åŒçš„æ¡ä»¶æ³¨è§£ï¼Œå†³å®šæ˜¯å¦è¿è¡Œå½“å‰çš„<code>@Test</code>æ–¹æ³•ã€‚</p>
<h4 id="enabledonos">2ã€<span class="citation"
data-cites="EnabledOnOs">@EnabledOnOs</span></h4>
<p>ç»™ä¸¤ä¸ªæµ‹è¯•æ–¹æ³•åˆ†åˆ«åŠ ä¸Šæ¡ä»¶å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="meta">@EnabledOnOs(OS.WINDOWS)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testWindows</span><span class="params">()</span> &#123;</span><br><span class="line">    assertEquals(<span class="string">&quot;C:\\test.ini&quot;</span>, config.getConfigFile(<span class="string">&quot;test.ini&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="meta">@EnabledOnOs(&#123; OS.LINUX, OS.MAC &#125;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testLinuxAndMac</span><span class="params">()</span> &#123;</span><br><span class="line">    assertEquals(<span class="string">&quot;/usr/local/test.cfg&quot;</span>, config.getConfigFile(<span class="string">&quot;test.cfg&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@EnableOnOs</code>å°±æ˜¯ä¸€ä¸ªæ¡ä»¶æµ‹è¯•åˆ¤æ–­ã€‚</p>
<p>åœ¨Windowså¹³å°æ‰§è¡Œçš„æµ‹è¯•: <span class="citation"
data-cites="EnabledOnOs">@EnabledOnOs</span>(OS.WINDOWS)</p>
<h4 id="å…¶ä»–æ¡ä»¶æµ‹è¯•">3ã€å…¶ä»–æ¡ä»¶æµ‹è¯•ï¼š</h4>
<p>åªèƒ½åœ¨Java
9æˆ–æ›´é«˜ç‰ˆæœ¬æ‰§è¡Œçš„æµ‹è¯•ï¼Œå¯ä»¥åŠ ä¸Š<code>@DisabledOnJre(JRE.JAVA_8)</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="meta">@DisabledOnJre(JRE.JAVA_8)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testOnJava9OrAbove</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> this test is disabled on java 8</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åªèƒ½åœ¨64ä½æ“ä½œç³»ç»Ÿä¸Šæ‰§è¡Œçš„æµ‹è¯•ï¼Œå¯ä»¥ç”¨<code>@EnabledIfSystemProperty</code>åˆ¤æ–­ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="meta">@EnabledIfSystemProperty(named = &quot;os.arch&quot;, matches = &quot;.*64.*&quot;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testOnlyOn64bitSystem</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> this test is only run on 64 bit system</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>éœ€è¦ä¼ å…¥ç¯å¢ƒå˜é‡<code>DEBUG=true</code>æ‰èƒ½æ‰§è¡Œçš„æµ‹è¯•ï¼Œå¯ä»¥ç”¨<code>@EnabledIfEnvironmentVariable</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="meta">@EnabledIfEnvironmentVariable(named = &quot;DEBUG&quot;, matches = &quot;true&quot;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testOnlyOnDebugMode</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> this test is only run on DEBUG=true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äº”å‚æ•°åŒ–æµ‹è¯•">äº”ã€å‚æ•°åŒ–æµ‹è¯•ï¼š</h3>
<p>å¦‚æœå¾…æµ‹è¯•çš„è¾“å…¥å’Œè¾“å‡ºæ˜¯ä¸€ç»„æ•°æ®ï¼š å¯ä»¥æŠŠæµ‹è¯•æ•°æ®ç»„ç»‡èµ·æ¥
ç”¨ä¸åŒçš„æµ‹è¯•æ•°æ®è°ƒç”¨ç›¸åŒçš„æµ‹è¯•æ–¹æ³•</p>
<p>å‚æ•°åŒ–æµ‹è¯•å’Œæ™®é€šæµ‹è¯•ç¨å¾®ä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œä¸€ä¸ªæµ‹è¯•æ–¹æ³•éœ€è¦æ¥æ”¶è‡³å°‘ä¸€ä¸ªå‚æ•°ï¼Œç„¶åï¼Œä¼ å…¥ä¸€ç»„å‚æ•°åå¤è¿è¡Œã€‚</p>
<p>JUnitæä¾›äº†ä¸€ä¸ª<code>@ParameterizedTest</code>æ³¨è§£ï¼Œç”¨æ¥è¿›è¡Œå‚æ•°åŒ–æµ‹è¯•ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æƒ³å¯¹<code>Math.abs()</code>è¿›è¡Œæµ‹è¯•ï¼Œå…ˆç”¨ä¸€ç»„æ­£æ•°è¿›è¡Œæµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@ValueSource(ints = &#123; 0, 1, 5, 100 &#125;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testAbs</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    assertEquals(x, Math.abs(x));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å†ç”¨ä¸€ç»„è´Ÿæ•°è¿›è¡Œæµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@ValueSource(ints = &#123; -1, -5, -100 &#125;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testAbsNegative</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    assertEquals(-x, Math.abs(x));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„åˆ°å‚æ•°åŒ–æµ‹è¯•çš„æ³¨è§£æ˜¯<code>@ParameterizedTest</code>ï¼Œè€Œä¸æ˜¯æ™®é€šçš„<code>@Test</code>ã€‚</p>
<p>å®é™…çš„æµ‹è¯•åœºæ™¯å¾€å¾€æ²¡æœ‰è¿™ä¹ˆç®€å•ã€‚å‡è®¾æˆ‘ä»¬è‡ªå·±ç¼–å†™äº†ä¸€ä¸ª<code>StringUtils.capitalize()</code>æ–¹æ³•ï¼Œå®ƒä¼šæŠŠå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—æ¯å˜ä¸ºå¤§å†™ï¼Œåç»­å­—æ¯å˜ä¸ºå°å†™ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringUtils</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">capitalize</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (s.length() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> s;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Character.toUpperCase(s.charAt(<span class="number">0</span>)) + s.substring(<span class="number">1</span>).toLowerCase();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¦ç”¨å‚æ•°åŒ–æµ‹è¯•çš„æ–¹æ³•æ¥æµ‹è¯•ï¼Œæˆ‘ä»¬ä¸ä½†è¦ç»™å‡ºè¾“å…¥ï¼Œè¿˜è¦ç»™å‡ºé¢„æœŸè¾“å‡ºã€‚å› æ­¤ï¼Œæµ‹è¯•æ–¹æ³•è‡³å°‘éœ€è¦æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testCapitalize</span><span class="params">(String input, String result)</span> &#123;</span><br><span class="line">    assertEquals(result, StringUtils.capitalize(input));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨é—®é¢˜æ¥äº†ï¼šå‚æ•°å¦‚ä½•ä¼ å…¥ï¼Ÿ</p>
<p>æœ€ç®€å•çš„æ–¹æ³•æ˜¯é€šè¿‡<code>@MethodSource</code>æ³¨è§£ï¼Œå®ƒå…è®¸æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªåŒåçš„é™æ€æ–¹æ³•æ¥æä¾›æµ‹è¯•å‚æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@MethodSource</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testCapitalize</span><span class="params">(String input, String result)</span> &#123;</span><br><span class="line">    assertEquals(result, StringUtils.capitalize(input));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> List&lt;Arguments&gt; <span class="title function_">testCapitalize</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> List.of( <span class="comment">// arguments:</span></span><br><span class="line">            Arguments.arguments(<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;Abc&quot;</span>), <span class="comment">//</span></span><br><span class="line">            Arguments.arguments(<span class="string">&quot;APPLE&quot;</span>, <span class="string">&quot;Apple&quot;</span>), <span class="comment">//</span></span><br><span class="line">            Arguments.arguments(<span class="string">&quot;gooD&quot;</span>, <span class="string">&quot;Good&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç å¾ˆå®¹æ˜“ç†è§£ï¼šé™æ€æ–¹æ³•<code>testCapitalize()</code>è¿”å›äº†ä¸€ç»„æµ‹è¯•å‚æ•°ï¼Œæ¯ä¸ªå‚æ•°éƒ½åŒ…å«ä¸¤ä¸ª<code>String</code>ï¼Œæ­£å¥½ä½œä¸ºæµ‹è¯•æ–¹æ³•çš„ä¸¤ä¸ªå‚æ•°ä¼ å…¥ã€‚</p>
<p>å¦‚æœé™æ€æ–¹æ³•å’Œæµ‹è¯•æ–¹æ³•çš„åç§°ä¸åŒï¼Œ<span class="citation"
data-cites="MethodSourceä¹Ÿå…è®¸æŒ‡å®šæ–¹æ³•å">@MethodSourceä¹Ÿå…è®¸æŒ‡å®šæ–¹æ³•å</span>ã€‚ä½†ä½¿ç”¨é»˜è®¤åŒåæ–¹æ³•æœ€æ–¹ä¾¿ã€‚</p>
<p>å¦ä¸€ç§ä¼ å…¥æµ‹è¯•å‚æ•°çš„æ–¹æ³•æ˜¯ä½¿ç”¨<code>@CsvSource</code>ï¼Œå®ƒçš„æ¯ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºä¸€è¡Œï¼Œä¸€è¡ŒåŒ…å«çš„è‹¥å¹²å‚æ•°ç”¨<code>,</code>åˆ†éš”ï¼Œå› æ­¤ï¼Œä¸Šè¿°æµ‹è¯•åˆå¯ä»¥æ”¹å†™å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@CsvSource(&#123; &quot;abc, Abc&quot;, &quot;APPLE, Apple&quot;, &quot;gooD, Good&quot; &#125;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testCapitalize</span><span class="params">(String input, String result)</span> &#123;</span><br><span class="line">    assertEquals(result, StringUtils.capitalize(input));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæœ‰æˆç™¾ä¸Šåƒçš„æµ‹è¯•è¾“å…¥ï¼Œé‚£ä¹ˆï¼Œç›´æ¥å†™<code>@CsvSource</code>å°±å¾ˆä¸æ–¹ä¾¿ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæµ‹è¯•æ•°æ®æåˆ°ä¸€ä¸ªç‹¬ç«‹çš„CSVæ–‡ä»¶ä¸­ï¼Œç„¶åæ ‡æ³¨ä¸Š<code>@CsvFileSource</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@CsvFileSource(resources = &#123; &quot;/test-capitalize.csv&quot; &#125;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testCapitalizeUsingCsvFile</span><span class="params">(String input, String result)</span> &#123;</span><br><span class="line">    assertEquals(result, StringUtils.capitalize(input));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>JUnitåªåœ¨classpathä¸­æŸ¥æ‰¾æŒ‡å®šçš„CSVæ–‡ä»¶ï¼Œå› æ­¤ï¼Œ<code>test-capitalize.csv</code>è¿™ä¸ªæ–‡ä»¶è¦æ”¾åˆ°<code>test</code>ç›®å½•ä¸‹ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">apple, Apple</span><br><span class="line">HELLO, Hello</span><br><span class="line">JUnit, Junit</span><br><span class="line">reSource, Resource</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaå…¥é—¨ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç³»åˆ—ç¬”è®°1â€”â€”javaåŸºç¡€</title>
    <url>/2022/01/28/3f464858b7bd/</url>
    <content><![CDATA[<p>å‚è€ƒæ•™ç¨‹ç½‘å€ï¼šhttps://www.liaoxuefeng.com/wiki/1252599548343744/1260467032946976</p>
<h3 id="ä¸€ç¬¬ä¸€ä¸ªjavaç¨‹åº">ä¸€ã€ç¬¬ä¸€ä¸ªJavaç¨‹åº</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Hello</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello, world!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
javaè§„å®šï¼ŒæŸä¸ªç±»å®šä¹‰çš„<code>public static void main(String[] args)</code>æ˜¯javaç¨‹åºçš„å›ºå®šå…¥å£æ–¹æ³•ï¼Œå› æ­¤ï¼Œjavaç¨‹åºæ€»æ˜¯ä»<code>main</code>æ–¹æ³•å¼€å§‹æ‰§è¡Œã€‚</p>
<h3 id="äºŒå¦‚ä½•è¿è¡Œjavaç¨‹åº">äºŒã€å¦‚ä½•è¿è¡ŒJavaç¨‹åºï¼š</h3>
<p>1ã€ç”¨javacæŠŠHello.javaç¼–è¯‘æˆ<strong>å­—èŠ‚ç æ–‡ä»¶Hello.class</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">javac Hello.java</span></span><br></pre></td></tr></table></figure>
<p>2ã€ç„¶åç”¨<strong>javaå‘½ä»¤æ‰§è¡Œè¿™ä¸ªå­—èŠ‚ç æ–‡ä»¶ã€‚</strong>javacæ˜¯ç¼–è¯‘å™¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">java Hello</span></span><br><span class="line">Hello, world!</span><br></pre></td></tr></table></figure>
<p>ç»™è™šæ‹Ÿæœºä¼ é€’çš„å‚æ•°<code>Hello</code>æ˜¯æˆ‘ä»¬å®šä¹‰çš„ç±»åï¼Œ<strong>è™šæ‹Ÿæœºè‡ªåŠ¨æŸ¥æ‰¾å¯¹åº”çš„classæ–‡ä»¶å¹¶æ‰§è¡Œ</strong></p>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<p>ä¸€ä¸ªJavaæºç åªèƒ½å®šä¹‰ä¸€ä¸ª<code>public</code>ç±»å‹çš„classï¼Œå¹¶ä¸”classåç§°å’Œæ–‡ä»¶åè¦å®Œå…¨ä¸€è‡´ï¼›</p>
<p>ä½¿ç”¨<code>javac</code>å¯ä»¥å°†<code>.java</code>æºç ç¼–è¯‘æˆ<code>.class</code>å­—èŠ‚ç ï¼›</p>
<p>ä½¿ç”¨<code>java</code>å¯ä»¥è¿è¡Œä¸€ä¸ªå·²ç¼–è¯‘çš„Javaç¨‹åºï¼Œå‚æ•°æ˜¯ç±»åã€‚</p>
<h3 id="ä¸‰ç¨‹åºåŸºæœ¬ç»“æ„">ä¸‰ã€ç¨‹åºåŸºæœ¬ç»“æ„ï¼š</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯ä»¥ç”¨æ¥è‡ªåŠ¨åˆ›å»ºæ–‡æ¡£çš„æ³¨é‡Š</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// å‘å±å¹•è¾“å‡ºæ–‡æœ¬:</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Hello, world!&quot;</span>);</span><br><span class="line">        <span class="comment">/* å¤šè¡Œæ³¨é‡Šå¼€å§‹</span></span><br><span class="line"><span class="comment">        æ³¨é‡Šå†…å®¹</span></span><br><span class="line"><span class="comment">        æ³¨é‡Šç»“æŸ */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="comment">// classå®šä¹‰ç»“æŸ</span></span><br></pre></td></tr></table></figure>
<p><code>public</code>æ˜¯è®¿é—®ä¿®é¥°ç¬¦ï¼Œè¡¨ç¤ºè¯¥<code>class</code>æ˜¯å…¬å¼€çš„ã€‚ä¸å†™<code>public</code>ï¼Œä¹Ÿèƒ½æ­£ç¡®ç¼–è¯‘ï¼Œä½†æ˜¯è¿™ä¸ªç±»å°†æ— æ³•ä»å‘½ä»¤è¡Œæ‰§è¡Œã€‚</p>
<h3 id="å››æ•°æ®ç±»å‹">å››ã€æ•°æ®ç±»å‹</h3>
<p><strong>åŸºæœ¬æ•°æ®ç±»å‹ï¼š</strong></p>
<ul>
<li>æ•´æ•°ç±»å‹ï¼šbyteï¼Œshortï¼Œintï¼Œlong</li>
<li>æµ®ç‚¹æ•°ç±»å‹ï¼šfloatï¼Œdouble</li>
<li>å­—ç¬¦ç±»å‹ï¼šchar</li>
<li>å¸ƒå°”ç±»å‹ï¼šboolean</li>
</ul>
<p><strong>å¼•ç”¨ç±»å‹</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>å¼•ç”¨ç±»å‹çš„å˜é‡ç±»ä¼¼äºCè¯­è¨€çš„æŒ‡é’ˆï¼Œå®ƒå†…éƒ¨å­˜å‚¨ä¸€ä¸ªâ€œåœ°å€â€ï¼ŒæŒ‡å‘æŸä¸ªå¯¹è±¡åœ¨å†…å­˜çš„ä½ç½®</p>
<p><strong>å¸¸é‡</strong>ï¼š</p>
<p>å¦‚æœåŠ ä¸Š<code>final</code>ä¿®é¥°ç¬¦ï¼Œè¿™ä¸ªå˜é‡å°±å˜æˆäº†å¸¸é‡ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="type">double</span> <span class="variable">PI</span> <span class="operator">=</span> <span class="number">3.14</span>; <span class="comment">// PIæ˜¯ä¸€ä¸ªå¸¸é‡</span></span><br></pre></td></tr></table></figure>
<p><strong>varå…³é”®å­—:</strong></p>
<p>å¦‚æœæƒ³çœç•¥å˜é‡ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨<code>var</code>å…³é”®å­—</p>
<h3 id="äº”æµ®ç‚¹æ•°è¿ç®—">äº”ã€æµ®ç‚¹æ•°è¿ç®—ï¼š</h3>
<p>â€‹
ç”±äºæµ®ç‚¹æ•°å­˜åœ¨è¿ç®—è¯¯å·®ï¼Œæ‰€ä»¥æ¯”è¾ƒä¸¤ä¸ªæµ®ç‚¹æ•°æ˜¯å¦ç›¸ç­‰å¸¸å¸¸ä¼šå‡ºç°é”™è¯¯çš„ç»“æœã€‚æ­£ç¡®çš„æ¯”è¾ƒæ–¹æ³•æ˜¯åˆ¤æ–­ä¸¤ä¸ªæµ®ç‚¹æ•°ä¹‹å·®çš„ç»å¯¹å€¼æ˜¯å¦å°äºä¸€ä¸ªå¾ˆå°çš„æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">double</span> <span class="variable">r</span> <span class="operator">=</span> Math.abs(x - y);</span><br><span class="line"><span class="comment">// å†åˆ¤æ–­ç»å¯¹å€¼æ˜¯å¦è¶³å¤Ÿå°:</span></span><br><span class="line"><span class="keyword">if</span> (r &lt; <span class="number">0.00001</span>) &#123;</span><br><span class="line">    <span class="comment">// å¯ä»¥è®¤ä¸ºç›¸ç­‰</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸ç›¸ç­‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•´æ•°è¿ç®—åœ¨é™¤æ•°ä¸º<code>0</code>æ—¶ä¼šæŠ¥é”™ï¼Œè€Œæµ®ç‚¹æ•°è¿ç®—åœ¨é™¤æ•°ä¸º<code>0</code>æ—¶ï¼Œä¸ä¼šæŠ¥é”™ï¼Œä½†ä¼šè¿”å›å‡ ä¸ªç‰¹æ®Šå€¼ï¼š</p>
<ul>
<li><code>NaN</code>è¡¨ç¤ºNot a Number</li>
<li><code>Infinity</code>è¡¨ç¤ºæ— ç©·å¤§</li>
<li><code>-Infinity</code>è¡¨ç¤ºè´Ÿæ— ç©·å¤§</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">double</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="number">0.0</span> / <span class="number">0</span>; <span class="comment">// NaN</span></span><br><span class="line"><span class="type">double</span> <span class="variable">d2</span> <span class="operator">=</span> <span class="number">1.0</span> / <span class="number">0</span>; <span class="comment">// Infinity</span></span><br><span class="line"><span class="type">double</span> <span class="variable">d3</span> <span class="operator">=</span> -<span class="number">1.0</span> / <span class="number">0</span>; <span class="comment">// -Infinity</span></span><br></pre></td></tr></table></figure>
<h3 id="å…­å­—ç¬¦ç±»å‹">å…­ã€å­—ç¬¦ç±»å‹ï¼š</h3>
<p>ä¸€ä¸ª<code>char</code>ä¿å­˜ä¸€ä¸ªUnicodeå­—ç¬¦ï¼š</p>
<p>å› ä¸ºJavaåœ¨å†…å­˜ä¸­æ€»æ˜¯ä½¿ç”¨Unicodeè¡¨ç¤ºå­—ç¬¦ï¼Œæ‰€ä»¥ï¼Œä¸€ä¸ªè‹±æ–‡å­—ç¬¦å’Œä¸€ä¸ªä¸­æ–‡å­—ç¬¦éƒ½ç”¨ä¸€ä¸ª<code>char</code>ç±»å‹è¡¨ç¤ºï¼Œå®ƒä»¬éƒ½å ç”¨ä¸¤ä¸ªå­—èŠ‚ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int n1 = &#x27;A&#x27;; // å­—æ¯â€œAâ€çš„Unicoddeç¼–ç æ˜¯65</span><br><span class="line">int n2 = &#x27;ä¸­&#x27;; // æ±‰å­—â€œä¸­â€çš„Unicodeç¼–ç æ˜¯20013</span><br><span class="line">è¿˜å¯ä»¥ç›´æ¥ç”¨è½¬ä¹‰å­—ç¬¦\u+Unicodeç¼–ç æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼š</span><br><span class="line">// æ³¨æ„æ˜¯åå…­è¿›åˆ¶:</span><br><span class="line">char c3 = &#x27;\u0041&#x27;; // &#x27;A&#x27;ï¼Œå› ä¸ºåå…­è¿›åˆ¶0041 = åè¿›åˆ¶65</span><br><span class="line">char c4 = &#x27;\u4e2d&#x27;; // &#x27;ä¸­&#x27;ï¼Œå› ä¸ºåå…­è¿›åˆ¶4e2d = åè¿›åˆ¶20013</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å¦‚æœç”¨<code>+</code>è¿æ¥å­—ç¬¦ä¸²å’Œå…¶ä»–æ•°æ®ç±»å‹ï¼Œä¼šå°†å…¶ä»–æ•°æ®ç±»å‹å…ˆè‡ªåŠ¨è½¬å‹ä¸ºå­—ç¬¦ä¸²ï¼Œå†è¿æ¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">25</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;age is &quot;</span> + age;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»Java 13å¼€å§‹ï¼Œå­—ç¬¦ä¸²å¯ä»¥ç”¨<code>"""..."""</code>è¡¨ç¤ºå¤šè¡Œå­—ç¬¦ä¸²ï¼ˆText
Blocksï¼‰äº†ã€‚</p>
<p>å¤šè¡Œå­—ç¬¦ä¸²å‰é¢å…±åŒçš„ç©ºæ ¼ä¼šè¢«å»æ‰ï¼Œå³ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                   SELECT * FROM</span></span><br><span class="line"><span class="string">                     users</span></span><br><span class="line"><span class="string">                   WHERE id &gt; 100</span></span><br><span class="line"><span class="string">                   ORDER BY name DESC</span></span><br><span class="line"><span class="string">                   &quot;&quot;&quot;</span>;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ä¸å¯è§ç‰¹æ€§ï¼š</strong></p>
<p>Javaçš„å­—ç¬¦ä¸²é™¤äº†æ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹å¤–ï¼Œè¿˜æœ‰ä¸ªé‡è¦ç‰¹ç‚¹ï¼Œå°±æ˜¯å­—ç¬¦ä¸²ä¸å¯å˜ã€‚è€ƒå¯Ÿä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">        System.out.println(s); <span class="comment">// æ˜¾ç¤º hello</span></span><br><span class="line">        s = <span class="string">&quot;world&quot;</span>;</span><br><span class="line">        System.out.println(s); <span class="comment">// æ˜¾ç¤º world</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è§‚å¯Ÿæ‰§è¡Œç»“æœï¼Œéš¾é“å­—ç¬¦ä¸²<code>s</code>å˜äº†å—ï¼Ÿå…¶å®å˜çš„ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯å˜é‡<code>s</code>çš„â€œæŒ‡å‘â€ã€‚</p>
<p><strong>ç©ºå€¼null:</strong></p>
<p>å¼•ç”¨ç±»å‹çš„å˜é‡å¯ä»¥æŒ‡å‘ä¸€ä¸ªç©ºå€¼<code>null</code>ï¼Œå®ƒè¡¨ç¤ºä¸å­˜åœ¨ï¼Œå³è¯¥å˜é‡ä¸æŒ‡å‘ä»»ä½•å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="literal">null</span>; <span class="comment">// s1æ˜¯null</span></span><br><span class="line">String s2; <span class="comment">// æ²¡æœ‰èµ‹åˆå€¼å€¼ï¼Œs2ä¹Ÿæ˜¯null</span></span><br></pre></td></tr></table></figure>
<h3 id="ä¸ƒæ•°ç»„">ä¸ƒã€æ•°ç»„ï¼š</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] ns = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">5</span>];</span><br><span class="line"><span class="type">int</span>[] ns = &#123; <span class="number">68</span>, <span class="number">79</span>, <span class="number">91</span>, <span class="number">85</span>, <span class="number">62</span> &#125;;</span><br><span class="line">System.out.println(ns.length); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>
<h3 id="å…«æµç¨‹æ§åˆ¶æ‰‹æ®µ">å…«ã€æµç¨‹æ§åˆ¶æ‰‹æ®µ</h3>
<h4 id="è¾“å‡º">1ã€è¾“å‡º</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.out.print(<span class="string">&quot;A,&quot;</span>); <span class="comment">//è¾“å‡ºåä¸æ¢è¡Œ</span></span><br><span class="line">System.out.println() <span class="comment">//è¾“å‡ºåè‡ªåŠ¨æ¢è¡Œ</span></span><br><span class="line">System.out.printf(<span class="string">&quot;%.2f\n&quot;</span>, d); <span class="comment">// æ ¼å¼åŒ–è¾“å‡ºï¼Œæ˜¾ç¤ºä¸¤ä½å°æ•°3.14</span></span><br></pre></td></tr></table></figure>
<h4 id="è¾“å…¥">2ã€è¾“å…¥ï¼š</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in); <span class="comment">// åˆ›å»ºScannerå¯¹è±¡</span></span><br><span class="line">        System.out.print(<span class="string">&quot;Input your name: &quot;</span>); <span class="comment">// æ‰“å°æç¤º</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> scanner.nextLine(); <span class="comment">// è¯»å–ä¸€è¡Œè¾“å…¥å¹¶è·å–å­—ç¬¦ä¸²</span></span><br><span class="line">        System.out.print(<span class="string">&quot;Input your age: &quot;</span>); <span class="comment">// æ‰“å°æç¤º</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> scanner.nextInt(); <span class="comment">// è¯»å–ä¸€è¡Œè¾“å…¥å¹¶è·å–æ•´æ•°</span></span><br><span class="line">        System.out.printf(<span class="string">&quot;Hi, %s, you are %d\n&quot;</span>, name, age); <span class="comment">// æ ¼å¼åŒ–è¾“å‡º</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>é€šè¿‡<code>import</code>è¯­å¥å¯¼å…¥<code>java.util.Scanner</code></li>
<li>åˆ›å»º<code>Scanner</code>å¯¹è±¡å¹¶ä¼ å…¥<code>System.in</code></li>
<li>æœ‰äº†<code>Scanner</code>å¯¹è±¡åï¼Œè¦è¯»å–ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²ï¼Œä½¿ç”¨<code>scanner.nextLine()</code>ï¼Œè¦è¯»å–ç”¨æˆ·è¾“å…¥çš„æ•´æ•°ï¼Œä½¿ç”¨<code>scanner.nextInt()</code>ã€‚<code>Scanner</code>ä¼šè‡ªåŠ¨è½¬æ¢æ•°æ®ç±»å‹ï¼Œå› æ­¤ä¸å¿…æ‰‹åŠ¨è½¬æ¢ã€‚</li>
</ul>
<h3
id="ä¹åˆ¤æ–­å¼•ç”¨ç±»å‹å˜é‡å†…å®¹æ˜¯å¦ç›¸ç­‰">ä¹ã€åˆ¤æ–­å¼•ç”¨ç±»å‹å˜é‡å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼š</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;HELLO&quot;</span>.toLowerCase();</span><br><span class="line">        System.out.println(s1);</span><br><span class="line">        System.out.println(s2);</span><br><span class="line">        <span class="keyword">if</span> (s1 == s2) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;s1 == s2&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;s1 != s2&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¾“å‡ºç»“æœæ˜¯ s1 != s2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¦åˆ¤æ–­å¼•ç”¨ç±»å‹çš„å˜é‡å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼Œå¿…é¡»ä½¿ç”¨<code>equals()</code>æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">s1.equals(s2)</span><br></pre></td></tr></table></figure>
<h3 id="åæ–°switchè¡¨è¾¾å¼">åã€æ–°Switchè¡¨è¾¾å¼ï¼š</h3>
<p>â€‹ ä»Java
12å¼€å§‹ï¼Œ<code>switch</code>è¯­å¥å‡çº§ä¸ºæ›´ç®€æ´çš„è¡¨è¾¾å¼è¯­æ³•ï¼Œä½¿ç”¨ç±»ä¼¼æ¨¡å¼åŒ¹é…ï¼ˆPattern
Matchingï¼‰çš„æ–¹æ³•ï¼Œä¿è¯åªæœ‰ä¸€ç§è·¯å¾„ä¼šè¢«æ‰§è¡Œï¼Œå¹¶ä¸”ä¸éœ€è¦<code>break</code>è¯­å¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">fruit</span> <span class="operator">=</span> <span class="string">&quot;apple&quot;</span>;</span><br><span class="line"><span class="keyword">switch</span> (fruit) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;apple&quot;</span> -&gt; System.out.println(<span class="string">&quot;Selected apple&quot;</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;pear&quot;</span> -&gt; System.out.println(<span class="string">&quot;Selected pear&quot;</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;mango&quot;</span> -&gt; &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Selected mango&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Good choice!&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">default</span> -&gt; System.out.println(<span class="string">&quot;No fruit selected&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åä¸€switchä¸­çš„yieldè¿”å›å€¼">åä¸€ã€Switchä¸­çš„Yieldè¿”å›å€¼ï¼š</h3>
<p>å¤§å¤šæ•°æ—¶å€™ï¼Œåœ¨<code>switch</code>è¡¨è¾¾å¼å†…éƒ¨ï¼Œæˆ‘ä»¬ä¼šè¿”å›ç®€å•çš„å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fruit</span> <span class="operator">=</span> <span class="string">&quot;orange&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">opt</span> <span class="operator">=</span> <span class="keyword">switch</span> (fruit) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;apple&quot;</span> -&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;pear&quot;</span>, <span class="string">&quot;mango&quot;</span> -&gt; <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">default</span> -&gt; &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">code</span> <span class="operator">=</span> fruit.hashCode();</span><br><span class="line">                yield code; <span class="comment">// switchè¯­å¥è¿”å›å€¼</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(<span class="string">&quot;opt = &quot;</span> + opt);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åäºŒfor-each-å¾ªç¯">åäºŒã€for each å¾ªç¯</h3>
<p>å’Œ<code>for</code>å¾ªç¯ç›¸æ¯”ï¼Œ<code>for each</code>å¾ªç¯çš„å˜é‡nä¸å†æ˜¯è®¡æ•°å™¨ï¼Œè€Œæ˜¯ç›´æ¥å¯¹åº”åˆ°æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ã€‚<code>for each</code>å¾ªç¯çš„å†™æ³•ä¹Ÿæ›´ç®€æ´ã€‚ä½†æ˜¯ï¼Œ<code>for each</code>å¾ªç¯æ— æ³•æŒ‡å®šéå†é¡ºåºï¼Œä¹Ÿæ— æ³•è·å–æ•°ç»„çš„ç´¢å¼•ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] ns = &#123; <span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span> &#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> n : ns) &#123;</span><br><span class="line">            System.out.println(n);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="åä¸‰æ’åºåº“arrays.sort">åä¸‰ã€æ’åºåº“ï¼šArrays.sort()</h3>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] ns = &#123; <span class="number">28</span>, <span class="number">12</span>, <span class="number">89</span>, <span class="number">73</span>, <span class="number">65</span>, <span class="number">18</span>, <span class="number">96</span>, <span class="number">50</span>, <span class="number">8</span>, <span class="number">36</span> &#125;;</span><br><span class="line">        Arrays.sort(ns);</span><br><span class="line">        System.out.println(Arrays.toString(ns));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åå››å¤šç»´æ•°ç»„">åå››ã€å¤šç»´æ•°ç»„ï¼š</h3>
<h4 id="äºŒç»´æ•°ç»„">1) äºŒç»´æ•°ç»„</h4>
<p>äºŒç»´æ•°ç»„çš„æ¯ä¸ªæ•°ç»„å…ƒç´ çš„é•¿åº¦å¹¶ä¸è¦æ±‚ç›¸åŒ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[][] ns = &#123;</span><br><span class="line">            &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> &#125;,</span><br><span class="line">            &#123; <span class="number">5</span>, <span class="number">6</span> &#125;,</span><br><span class="line">            &#123; <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span> &#125;</span><br><span class="line">		&#125;;</span><br><span class="line">        System.out.println(ns.length); <span class="comment">// 3</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æ‰“å°å¤šç»´æ•°ç»„å¯ä»¥ä½¿ç”¨<code>Arrays.deepToString()</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[][] ns = &#123;</span><br><span class="line">            &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> &#125;,</span><br><span class="line">            &#123; <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span> &#125;,</span><br><span class="line">            &#123; <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span> &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(Arrays.deepToString(ns));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åäº”å‘½ä»¤è¡Œå‚æ•°">åäº”ã€å‘½ä»¤è¡Œå‚æ•°ï¼š</h3>
<p>å‘½ä»¤è¡Œå‚æ•°ç±»å‹æ˜¯<code>String[]</code>æ•°ç»„ï¼›
å‘½ä»¤è¡Œå‚æ•°ç”±JVMæ¥æ”¶ç”¨æˆ·è¾“å…¥å¹¶ä¼ ç»™<code>main</code>æ–¹æ³•ï¼›å¦‚ä½•è§£æå‘½ä»¤è¡Œå‚æ•°éœ€è¦ç”±ç¨‹åºè‡ªå·±å®ç°ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (String arg : args) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;-version&quot;</span>.equals(arg)) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;v 1.0&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaå…¥é—¨ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç³»åˆ—ç¬”è®°6â€”â€”javaæ³¨è§£</title>
    <url>/2022/01/31/0f79bd25febd/</url>
    <content><![CDATA[<p>å‚è€ƒæ•™ç¨‹ç½‘å€ï¼šhttps://www.liaoxuefeng.com/wiki/1252599548343744/1264799402020448</p>
<h3 id="ä¸€æ³¨è§£æ˜¯ä»€ä¹ˆ">ä¸€ã€æ³¨è§£æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>â€‹ æ³¨è§£æ˜¯æ”¾åœ¨Javaæºç çš„ç±»ã€æ–¹æ³•ã€å­—æ®µã€å‚æ•°å‰çš„ä¸€ç§ç‰¹æ®Šâ€œæ³¨é‡Šâ€ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// this is a component:</span></span><br><span class="line"><span class="meta">@Resource(&quot;hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span> &#123;</span><br><span class="line">    <span class="meta">@Inject</span></span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">(<span class="meta">@Param</span> String name)</span> &#123;</span><br><span class="line">        System.out.println(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
<strong>æ³¨é‡Šä¼šè¢«ç¼–è¯‘å™¨ç›´æ¥å¿½ç•¥ï¼Œæ³¨è§£åˆ™å¯ä»¥è¢«ç¼–è¯‘å™¨æ‰“åŒ…è¿›å…¥classæ–‡ä»¶</strong>ï¼Œå› æ­¤ï¼Œæ³¨è§£æ˜¯ä¸€ç§ç”¨ä½œæ ‡æ³¨çš„â€œå…ƒæ•°æ®â€ã€‚</p>
<h3 id="äºŒæ³¨è§£çš„ä½œç”¨">äºŒã€æ³¨è§£çš„ä½œç”¨ï¼š</h3>
<p>â€‹
ä»JVMçš„è§’åº¦çœ‹ï¼Œæ³¨è§£æœ¬èº«å¯¹ä»£ç é€»è¾‘æ²¡æœ‰ä»»ä½•å½±å“ï¼Œå¦‚ä½•ä½¿ç”¨æ³¨è§£å®Œå…¨ç”±å·¥å…·å†³å®šã€‚</p>
<p>â€‹ Javaçš„æ³¨è§£å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š</p>
<ul>
<li>1ã€<strong>ç”±ç¼–è¯‘å™¨ä½¿ç”¨çš„æ³¨è§£:</strong>(
è¿™ç±»æ³¨è§£ä¸ä¼šè¢«ç¼–è¯‘è¿›å…¥<code>.class</code>æ–‡ä»¶ï¼Œå®ƒä»¬åœ¨ç¼–è¯‘åå°±è¢«ç¼–è¯‘å™¨æ‰”æ‰äº†
)
<ul>
<li><code>@Override</code>ï¼šè®©ç¼–è¯‘å™¨æ£€æŸ¥è¯¥æ–¹æ³•æ˜¯å¦æ­£ç¡®åœ°å®ç°äº†è¦†å†™ï¼›</li>
<li><code>@SuppressWarnings</code>ï¼šå‘Šè¯‰ç¼–è¯‘å™¨å¿½ç•¥æ­¤å¤„ä»£ç äº§ç”Ÿçš„è­¦å‘Šã€‚</li>
</ul></li>
<li>2ã€<strong>ç”±å·¥å…·å¤„ç†<code>.class</code>æ–‡ä»¶ä½¿ç”¨çš„æ³¨è§£</strong>:
<ul>
<li>æ¯”å¦‚æœ‰äº›å·¥å…·ä¼šåœ¨åŠ è½½classçš„æ—¶å€™ï¼Œå¯¹classåšåŠ¨æ€ä¿®æ”¹ï¼Œå®ç°ä¸€äº›ç‰¹æ®Šçš„åŠŸèƒ½ã€‚<strong>è¿™ç±»æ³¨è§£ä¼šè¢«ç¼–è¯‘è¿›å…¥<code>.class</code>æ–‡ä»¶ï¼Œä½†åŠ è½½ç»“æŸåå¹¶ä¸ä¼šå­˜åœ¨äºå†…å­˜ä¸­</strong>ã€‚è¿™ç±»æ³¨è§£åªè¢«ä¸€äº›åº•å±‚åº“ä½¿ç”¨ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¸å¿…è‡ªå·±å¤„ç†ã€‚</li>
</ul></li>
<li>3ã€<strong>åœ¨ç¨‹åºè¿è¡ŒæœŸèƒ½å¤Ÿè¯»å–çš„æ³¨è§£</strong>ï¼š
<ul>
<li>å®ƒä»¬<strong>åœ¨åŠ è½½åä¸€ç›´å­˜åœ¨äºJVMä¸­</strong>ï¼Œè¿™ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„æ³¨è§£ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªé…ç½®äº†<code>@PostConstruct</code>çš„æ–¹æ³•ä¼šåœ¨è°ƒç”¨æ„é€ æ–¹æ³•åè‡ªåŠ¨è¢«è°ƒç”¨ï¼ˆè¿™æ˜¯Javaä»£ç è¯»å–è¯¥æ³¨è§£å®ç°çš„åŠŸèƒ½ï¼ŒJVMå¹¶ä¸ä¼šè¯†åˆ«è¯¥æ³¨è§£ï¼‰</li>
</ul></li>
</ul>
<h3 id="ä¸‰æ³¨è§£çš„é…ç½®å‚æ•°">ä¸‰ã€æ³¨è§£çš„é…ç½®å‚æ•°ï¼š</h3>
<p>å®šä¹‰ä¸€ä¸ªæ³¨è§£æ—¶ï¼Œè¿˜å¯ä»¥å®šä¹‰<strong>é…ç½®å‚æ•°</strong>ã€‚é…ç½®å‚æ•°å¯ä»¥åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ‰€æœ‰åŸºæœ¬ç±»å‹ï¼›</li>
<li>Stringï¼›</li>
<li>æšä¸¾ç±»å‹ï¼›</li>
<li>åŸºæœ¬ç±»å‹ã€Stringã€Classä»¥åŠæšä¸¾çš„æ•°ç»„ã€‚</li>
</ul>
<p>å› ä¸º<strong>é…ç½®å‚æ•°å¿…é¡»æ˜¯å¸¸é‡</strong>ï¼Œæ‰€ä»¥ï¼Œä¸Šè¿°é™åˆ¶ä¿è¯äº†æ³¨è§£åœ¨å®šä¹‰æ—¶å°±å·²ç»ç¡®å®šäº†æ¯ä¸ªå‚æ•°çš„å€¼ã€‚</p>
<p><strong>æ³¨è§£çš„é…ç½®å‚æ•°å¯ä»¥æœ‰é»˜è®¤å€¼ï¼Œç¼ºå°‘æŸä¸ªé…ç½®å‚æ•°æ—¶å°†ä½¿ç”¨é»˜è®¤å€¼ã€‚</strong></p>
<p>æ­¤å¤–ï¼Œå¤§éƒ¨åˆ†æ³¨è§£ä¼šæœ‰ä¸€ä¸ªåä¸º<code>value</code>çš„é…ç½®å‚æ•°ï¼Œå¯¹æ­¤å‚æ•°èµ‹å€¼ï¼Œå¯ä»¥åªå†™å¸¸é‡ï¼Œç›¸å½“äºçœç•¥äº†valueå‚æ•°ã€‚å¦‚æœåªå†™æ³¨è§£ï¼Œç›¸å½“äºå…¨éƒ¨ä½¿ç”¨é»˜è®¤å€¼ã€‚</p>
<p>ä¸¾ä¸ªæ —å­ï¼Œå¯¹ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span> &#123;</span><br><span class="line">    <span class="meta">@Check(min=0, max=100, value=55)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Check(value=99)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> p;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Check(99)</span> <span class="comment">// @Check(value=99)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> x;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Check</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@Check</code>å°±æ˜¯ä¸€ä¸ªæ³¨è§£ã€‚ç¬¬ä¸€ä¸ª<code>@Check(min=0, max=100, value=55)</code>æ˜ç¡®å®šä¹‰äº†ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ª<code>@Check(value=99)</code>åªå®šä¹‰äº†ä¸€ä¸ª<code>value</code>å‚æ•°ï¼Œå®ƒå®é™…ä¸Šå’Œ<code>@Check(99)</code>æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚æœ€åä¸€ä¸ª<code>@Check</code>è¡¨ç¤ºæ‰€æœ‰å‚æ•°éƒ½ä½¿ç”¨é»˜è®¤å€¼ã€‚</p>
<h3 id="å››å®šä¹‰æ³¨è§£">å››ã€å®šä¹‰æ³¨è§£ï¼š</h3>
<h4 id="å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ³¨è§£">1ã€å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼Ÿ</h4>
<p>javaè¯­è¨€ä½¿ç”¨<code>@interface</code>è¯­æ³•æ¥å®šä¹‰æ³¨è§£ï¼ˆ<code>Annotation</code>ï¼‰ï¼Œå®ƒçš„æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Report &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">type</span><span class="params">()</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line">    String <span class="title function_">level</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;info&quot;</span>;</span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
æ³¨è§£çš„å‚æ•°ç±»ä¼¼æ— å‚æ•°æ–¹æ³•ï¼Œå¯ä»¥ç”¨<code>default</code>è®¾å®šä¸€ä¸ªé»˜è®¤å€¼ï¼ˆå¼ºçƒˆæ¨èï¼‰ã€‚æœ€å¸¸ç”¨çš„å‚æ•°åº”å½“å‘½åä¸º<code>value</code>ã€‚</p>
<h4 id="å…ƒæ³¨è§£">2ã€å…ƒæ³¨è§£ï¼š</h4>
<p>â€‹ æœ‰ä¸€äº›æ³¨è§£å¯ä»¥ä¿®é¥°å…¶ä»–æ³¨è§£ï¼Œè¿™äº›æ³¨è§£å°±ç§°ä¸ºå…ƒæ³¨è§£ï¼ˆmeta
annotationï¼‰ã€‚Javaæ ‡å‡†åº“å·²ç»å®šä¹‰äº†ä¸€äº›å…ƒæ³¨è§£ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨å…ƒæ³¨è§£ï¼Œé€šå¸¸ä¸éœ€è¦è‡ªå·±å»ç¼–å†™å…ƒæ³¨è§£ã€‚</p>
<ul>
<li><p><span class="citation" data-cites="Target">@Target</span>ï¼š</p>
<ul>
<li><p>ä½¿ç”¨<code>@Target</code>å¯ä»¥å®šä¹‰<code>Annotation</code>èƒ½å¤Ÿè¢«åº”ç”¨äºæºç çš„å“ªäº›ä½ç½®</p>
<ul>
<li>ç±»æˆ–æ¥å£ï¼š<code>ElementType.TYPE</code>ï¼›</li>
<li>å­—æ®µï¼š<code>ElementType.FIELD</code>ï¼›</li>
<li>æ–¹æ³•ï¼š<code>ElementType.METHOD</code>ï¼›</li>
<li>æ„é€ æ–¹æ³•ï¼š<code>ElementType.CONSTRUCTOR</code>ï¼›</li>
<li>æ–¹æ³•å‚æ•°ï¼š<code>ElementType.PARAMETER</code>ã€‚</li>
</ul></li>
<li><p>ä¾‹å¦‚ï¼Œå®šä¹‰æ³¨è§£<code>@Report</code>å¯ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œæˆ‘ä»¬å¿…é¡»æ·»åŠ ä¸€ä¸ª<code>@Target(ElementType.METHOD)</code></p>
<ul>
<li>```java <span class="citation"
data-cites="Target">@Target</span>(ElementType.METHOD) public <span
class="citation" data-cites="interface">@interface</span> Report { int
type() default 0; String level() default "info"; String value() default
""; } <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- å®šä¹‰æ³¨è§£`@Report`å¯ç”¨åœ¨æ–¹æ³•æˆ–å­—æ®µä¸Šï¼Œå¯ä»¥æŠŠ`@Target`æ³¨è§£å‚æ•°å˜ä¸ºæ•°ç»„`&#123; ElementType.METHOD, ElementType.FIELD &#125;`ï¼š</span><br><span class="line"></span><br><span class="line">  - ```java</span><br><span class="line">    @Target(&#123;</span><br><span class="line">        ElementType.METHOD,</span><br><span class="line">        ElementType.FIELD</span><br><span class="line">    &#125;)</span><br><span class="line">    public @interface Report &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
</ul></li>
</ul></li>
<li><p><span class="citation"
data-cites="Retention">@Retention</span>:</p>
<ul>
<li><p><code>@Retention</code>å®šä¹‰äº†<code>Annotation</code>çš„ç”Ÿå‘½å‘¨æœŸ</p>
<ul>
<li>ä»…ç¼–è¯‘æœŸï¼š<code>RetentionPolicy.SOURCE</code>ï¼›</li>
<li>ä»…classæ–‡ä»¶ï¼š<code>RetentionPolicy.CLASS</code>ï¼›</li>
<li>è¿è¡ŒæœŸï¼š<code>RetentionPolicy.RUNTIME</code>ã€‚</li>
</ul></li>
<li><p>å¦‚æœ<code>@Retention</code>ä¸å­˜åœ¨ï¼Œåˆ™è¯¥<code>Annotation</code>é»˜è®¤ä¸º<code>CLASS</code>ã€‚å› ä¸ºé€šå¸¸æˆ‘ä»¬è‡ªå®šä¹‰çš„<code>Annotation</code>éƒ½æ˜¯<code>RUNTIME</code>ï¼Œæ‰€ä»¥ï¼ŒåŠ¡å¿…è¦åŠ ä¸Š<code>@Retention(RetentionPolicy.RUNTIME)</code>è¿™ä¸ªå…ƒæ³¨è§£ï¼š</p>
<ul>
<li></li>
<li>```java <span class="citation"
data-cites="Retention">@Retention</span>(RetentionPolicy.RUNTIME) public
<span class="citation" data-cites="interface">@interface</span> Report {
int type() default 0; String level() default "info"; String value()
default ""; } <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- @Repeatable</span><br><span class="line"></span><br><span class="line">  - `@Repeatable`è¿™ä¸ªå…ƒæ³¨è§£å¯ä»¥å®šä¹‰`Annotation`æ˜¯å¦å¯é‡å¤ã€‚</span><br><span class="line"></span><br><span class="line">    - ```</span><br><span class="line">      @Repeatable(Reports.class)</span><br><span class="line">      @Target(ElementType.TYPE)</span><br><span class="line">      public @interface Report &#123;</span><br><span class="line">          int type() default 0;</span><br><span class="line">          String level() default &quot;info&quot;;</span><br><span class="line">          String value() default &quot;&quot;;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      @Target(ElementType.TYPE)</span><br><span class="line">      public @interface Reports &#123;</span><br><span class="line">          Report[] value();</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li><p>ç»è¿‡<code>@Repeatable</code>ä¿®é¥°åï¼Œåœ¨æŸä¸ªç±»å‹å£°æ˜å¤„ï¼Œå°±å¯ä»¥æ·»åŠ å¤šä¸ª<code>@Report</code>æ³¨è§£ï¼š</p>
<ul>
<li>```java <span class="citation"
data-cites="Report">@Report</span>(type=1, level="debug") <span
class="citation" data-cites="Report">@Report</span>(type=2,
level="warning") public class Hello { } <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- @Inherited</span><br><span class="line"></span><br><span class="line">  - ä½¿ç”¨`@Inherited`å®šä¹‰å­ç±»æ˜¯å¦å¯ç»§æ‰¿çˆ¶ç±»å®šä¹‰çš„`Annotation`</span><br><span class="line"></span><br><span class="line">  - `@Inherited`ä»…é’ˆå¯¹`@Target(ElementType.TYPE)`ç±»å‹çš„`annotation`æœ‰æ•ˆï¼Œ**å¹¶ä¸”ä»…é’ˆå¯¹`class`çš„ç»§æ‰¿ï¼Œå¯¹`interface`çš„ç»§æ‰¿æ— æ•ˆ**</span><br><span class="line"></span><br><span class="line">    - ```java</span><br><span class="line">      @Inherited</span><br><span class="line">      @Target(ElementType.TYPE)</span><br><span class="line">      public @interface Report &#123;</span><br><span class="line">          int type() default 0;</span><br><span class="line">          String level() default &quot;info&quot;;</span><br><span class="line">          String value() default &quot;&quot;;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li><p>åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå¦‚æœä¸€ä¸ªç±»ç”¨åˆ°äº†<code>@Report</code>,åˆ™å®ƒçš„å­ç±»é»˜è®¤ä¹Ÿå®šä¹‰äº†è¯¥æ³¨è§£ï¼š</p>
<ul>
<li>```java <span class="citation"
data-cites="Report">@Report</span>(type=1) public class Person { }
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  public class Student extends Person &#123;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
</ul></li>
</ul></li>
</ul>
<h4 id="æ€»ç»“å®šä¹‰annotationçš„æ­¥éª¤">3ã€æ€»ç»“å®šä¹‰Annotationçš„æ­¥éª¤ï¼š</h4>
<h5 id="ç”¨interfaceå®šä¹‰æ³¨è§£">1ï¼‰ç”¨<code>@interface</code>å®šä¹‰æ³¨è§£ï¼š</h5>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Report &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5
id="æ·»åŠ å‚æ•°é»˜è®¤å€¼æŠŠæœ€å¸¸ç”¨çš„å‚æ•°å®šä¹‰ä¸ºvalueæ¨èæ‰€æœ‰å‚æ•°éƒ½å°½é‡è®¾ç½®é»˜è®¤å€¼">2)
æ·»åŠ å‚æ•°ã€é»˜è®¤å€¼ï¼š(æŠŠæœ€å¸¸ç”¨çš„å‚æ•°å®šä¹‰ä¸º<code>value()</code>ï¼Œæ¨èæ‰€æœ‰å‚æ•°éƒ½å°½é‡è®¾ç½®é»˜è®¤å€¼ã€‚)</h5>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Report &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">type</span><span class="params">()</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line">    String <span class="title function_">level</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;info&quot;</span>;</span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="ç¬¬ä¸‰æ­¥ç”¨å…ƒæ³¨è§£é…ç½®æ³¨è§£">3) ç¬¬ä¸‰æ­¥ï¼Œç”¨å…ƒæ³¨è§£é…ç½®æ³¨è§£ï¼š</h5>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Report &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">type</span><span class="params">()</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line">    String <span class="title function_">level</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;info&quot;</span>;</span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
å¿…é¡»è®¾ç½®<code>@Target</code>å’Œ<code>@Retention</code>ï¼Œ<code>@Retention</code>ä¸€èˆ¬è®¾ç½®ä¸º<code>RUNTIME</code>ï¼Œå› ä¸ºæˆ‘ä»¬è‡ªå®šä¹‰çš„æ³¨è§£é€šå¸¸è¦æ±‚åœ¨è¿è¡ŒæœŸè¯»å–ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸å¿…å†™<code>@Inherited</code>å’Œ<code>@Repeatable</code>ã€‚</p>
<h3 id="äº”å¤„ç†æ³¨è§£">äº”ã€å¤„ç†æ³¨è§£ï¼š</h3>
<p>â€‹
Javaçš„æ³¨è§£æœ¬èº«å¯¹ä»£ç é€»è¾‘æ²¡æœ‰ä»»ä½•å½±å“ã€‚æ ¹æ®<code>@Retention</code>çš„é…ç½®ï¼š</p>
<ul>
<li><code>SOURCE</code>ç±»å‹çš„æ³¨è§£åœ¨ç¼–è¯‘æœŸå°±è¢«ä¸¢æ‰äº†ï¼›</li>
<li><code>CLASS</code>ç±»å‹çš„æ³¨è§£ä»…ä¿å­˜åœ¨classæ–‡ä»¶ä¸­ï¼Œå®ƒä»¬ä¸ä¼šè¢«åŠ è½½è¿›JVMï¼›</li>
<li><code>RUNTIME</code>ç±»å‹çš„æ³¨è§£ä¼šè¢«åŠ è½½è¿›JVMï¼Œå¹¶ä¸”åœ¨è¿è¡ŒæœŸå¯ä»¥è¢«ç¨‹åºè¯»å–ã€‚</li>
</ul>
<p>â€‹
å¦‚ä½•ä½¿ç”¨æ³¨è§£å®Œå…¨ç”±å·¥å…·å†³å®šã€‚<code>SOURCE</code>ç±»å‹çš„æ³¨è§£ä¸»è¦ç”±ç¼–è¯‘å™¨ä½¿ç”¨ï¼Œå› æ­¤æˆ‘ä»¬ä¸€èˆ¬åªä½¿ç”¨ï¼Œä¸ç¼–å†™ã€‚<code>CLASS</code>ç±»å‹çš„æ³¨è§£ä¸»è¦ç”±åº•å±‚å·¥å…·åº“ä½¿ç”¨ï¼Œæ¶‰åŠåˆ°classçš„åŠ è½½ï¼Œä¸€èˆ¬æˆ‘ä»¬å¾ˆå°‘ç”¨åˆ°ã€‚<strong>åªæœ‰<code>RUNTIME</code>ç±»å‹çš„æ³¨è§£ä¸ä½†è¦ä½¿ç”¨ï¼Œè¿˜ç»å¸¸éœ€è¦ç¼–å†™ã€‚</strong></p>
<p>â€‹
å› ä¸ºæ³¨è§£å®šä¹‰åä¹Ÿæ˜¯ä¸€ç§<code>class</code>ï¼Œæ‰€æœ‰çš„æ³¨è§£éƒ½ç»§æ‰¿è‡ª<code>java.lang.annotation.Annotation</code>ï¼Œå› æ­¤ï¼Œè¯»å–æ³¨è§£ï¼Œéœ€è¦ä½¿ç”¨åå°„APIã€‚</p>
<p>â€‹ Javaæä¾›çš„ä½¿ç”¨åå°„APIè¯»å–<code>Annotation</code>çš„æ–¹æ³•åŒ…æ‹¬ï¼š</p>
<p>åˆ¤æ–­æŸä¸ªæ³¨è§£æ˜¯å¦å­˜åœ¨äº<code>Class</code>ã€<code>Field</code>ã€<code>Method</code>æˆ–<code>Constructor</code>ï¼š</p>
<ul>
<li><code>Class.isAnnotationPresent(Class)</code></li>
<li><code>Field.isAnnotationPresent(Class)</code></li>
<li><code>Method.isAnnotationPresent(Class)</code></li>
<li><code>Constructor.isAnnotationPresent(Class)</code></li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­@Reportæ˜¯å¦å­˜åœ¨äºPersonç±»:</span></span><br><span class="line">Person.class.isAnnotationPresent(Report.class);</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨åå°„APIè¯»å–Annotationï¼š</p>
<ul>
<li><code>Class.getAnnotation(Class)</code></li>
<li><code>Field.getAnnotation(Class)</code></li>
<li><code>Method.getAnnotation(Class)</code></li>
<li><code>Constructor.getAnnotation(Class)</code></li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–Personå®šä¹‰çš„@Reportæ³¨è§£:</span></span><br><span class="line"><span class="type">Report</span> <span class="variable">report</span> <span class="operator">=</span> Person.class.getAnnotation(Report.class);</span><br><span class="line"><span class="type">int</span> <span class="variable">type</span> <span class="operator">=</span> report.type();</span><br><span class="line"><span class="type">String</span> <span class="variable">level</span> <span class="operator">=</span> report.level();</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨åå°„APIè¯»å–<code>Annotation</code>æœ‰ä¸¤ç§æ–¹æ³•ã€‚æ–¹æ³•ä¸€æ˜¯å…ˆåˆ¤æ–­<code>Annotation</code>æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œå°±ç›´æ¥è¯»å–ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Class</span> <span class="variable">cls</span> <span class="operator">=</span> Person.class;</span><br><span class="line"><span class="keyword">if</span> (cls.isAnnotationPresent(Report.class)) &#123;</span><br><span class="line">    <span class="type">Report</span> <span class="variable">report</span> <span class="operator">=</span> cls.getAnnotation(Report.class);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒç§æ–¹æ³•æ˜¯ç›´æ¥è¯»å–<code>Annotation</code>ï¼Œå¦‚æœ<code>Annotation</code>ä¸å­˜åœ¨ï¼Œå°†è¿”å›<code>null</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Class</span> <span class="variable">cls</span> <span class="operator">=</span> Person.class;</span><br><span class="line"><span class="type">Report</span> <span class="variable">report</span> <span class="operator">=</span> cls.getAnnotation(Report.class);</span><br><span class="line"><span class="keyword">if</span> (report != <span class="literal">null</span>) &#123;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯»å–æ–¹æ³•ã€å­—æ®µå’Œæ„é€ æ–¹æ³•çš„<code>Annotation</code>å’ŒClassç±»ä¼¼ã€‚ä½†è¦è¯»å–æ–¹æ³•å‚æ•°çš„<code>Annotation</code>å°±æ¯”è¾ƒéº»çƒ¦ä¸€ç‚¹ï¼Œå› ä¸ºæ–¹æ³•å‚æ•°æœ¬èº«å¯ä»¥çœ‹æˆä¸€ä¸ªæ•°ç»„ï¼Œè€Œæ¯ä¸ªå‚æ•°åˆå¯ä»¥å®šä¹‰å¤šä¸ªæ³¨è§£ï¼Œæ‰€ä»¥ï¼Œä¸€æ¬¡è·å–æ–¹æ³•å‚æ•°çš„æ‰€æœ‰æ³¨è§£å°±å¿…é¡»ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„æ¥è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œå¯¹äºä»¥ä¸‹æ–¹æ³•å®šä¹‰çš„æ³¨è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">(<span class="meta">@NotNull</span> <span class="meta">@Range(max=5)</span> String name, <span class="meta">@NotNull</span> String prefix)</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¦è¯»å–æ–¹æ³•å‚æ•°çš„æ³¨è§£ï¼Œæˆ‘ä»¬å…ˆç”¨åå°„è·å–<code>Method</code>å®ä¾‹ï¼Œç„¶åè¯»å–æ–¹æ³•å‚æ•°çš„æ‰€æœ‰æ³¨è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–Methodå®ä¾‹:</span></span><br><span class="line"><span class="type">Method</span> <span class="variable">m</span> <span class="operator">=</span> ...</span><br><span class="line"><span class="comment">// è·å–æ‰€æœ‰å‚æ•°çš„Annotation:</span></span><br><span class="line">Annotation[][] annos = m.getParameterAnnotations();</span><br><span class="line"><span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆç´¢å¼•ä¸º0ï¼‰çš„æ‰€æœ‰Annotation:</span></span><br><span class="line">Annotation[] annosOfName = annos[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">for</span> (Annotation anno : annosOfName) &#123;</span><br><span class="line">    <span class="keyword">if</span> (anno <span class="keyword">instanceof</span> Range) &#123; <span class="comment">// @Rangeæ³¨è§£</span></span><br><span class="line">        <span class="type">Range</span> <span class="variable">r</span> <span class="operator">=</span> (Range) anno;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (anno <span class="keyword">instanceof</span> NotNull) &#123; <span class="comment">// @NotNullæ³¨è§£</span></span><br><span class="line">        <span class="type">NotNull</span> <span class="variable">n</span> <span class="operator">=</span> (NotNull) anno;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å…­ä½¿ç”¨æ³¨è§£">å…­ã€ä½¿ç”¨æ³¨è§£</h3>
<p>â€‹
æ³¨è§£å¦‚ä½•ä½¿ç”¨ï¼Œå®Œå…¨ç”±ç¨‹åºè‡ªå·±å†³å®šã€‚ä¾‹å¦‚ï¼ŒJUnitæ˜¯ä¸€ä¸ªæµ‹è¯•æ¡†æ¶ï¼Œå®ƒä¼šè‡ªåŠ¨è¿è¡Œæ‰€æœ‰æ ‡è®°ä¸º<code>@Test</code>çš„æ–¹æ³•ã€‚</p>
<p>â€‹
æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ª<code>@Range</code>æ³¨è§£ï¼Œæˆ‘ä»¬å¸Œæœ›ç”¨å®ƒæ¥å®šä¹‰ä¸€ä¸ª<code>String</code>å­—æ®µçš„è§„åˆ™ï¼šå­—æ®µé•¿åº¦æ»¡è¶³<code>@Range</code>çš„å‚æ•°å®šä¹‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.FIELD)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Range &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">min</span><span class="params">()</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">max</span><span class="params">()</span> <span class="keyword">default</span> <span class="number">255</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹ åœ¨æŸä¸ªJavaBeanä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥æ³¨è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="meta">@Range(min=1, max=20)</span></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Range(max=10)</span></span><br><span class="line">    <span class="keyword">public</span> String city;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
ä½†æ˜¯ï¼Œå®šä¹‰äº†æ³¨è§£ï¼Œæœ¬èº«å¯¹ç¨‹åºé€»è¾‘æ²¡æœ‰ä»»ä½•å½±å“ã€‚æˆ‘ä»¬å¿…é¡»è‡ªå·±ç¼–å†™ä»£ç æ¥ä½¿ç”¨æ³¨è§£ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ª<code>Person</code>å®ä¾‹çš„æ£€æŸ¥æ–¹æ³•ï¼Œå®ƒå¯ä»¥æ£€æŸ¥<code>Person</code>å®ä¾‹çš„<code>String</code>å­—æ®µé•¿åº¦æ˜¯å¦æ»¡è¶³<code>@Range</code>çš„å®šä¹‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">check</span><span class="params">(Person person)</span> <span class="keyword">throws</span> IllegalArgumentException, ReflectiveOperationException &#123;</span><br><span class="line">    <span class="comment">// éå†æ‰€æœ‰Field:</span></span><br><span class="line">    <span class="keyword">for</span> (Field field : person.getClass().getFields()) &#123;</span><br><span class="line">        <span class="comment">// è·å–Fieldå®šä¹‰çš„@Range:</span></span><br><span class="line">        <span class="type">Range</span> <span class="variable">range</span> <span class="operator">=</span> field.getAnnotation(Range.class);</span><br><span class="line">        <span class="comment">// å¦‚æœ@Rangeå­˜åœ¨:</span></span><br><span class="line">        <span class="keyword">if</span> (range != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// è·å–Fieldçš„å€¼:</span></span><br><span class="line">            <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> field.get(person);</span><br><span class="line">            <span class="comment">// å¦‚æœå€¼æ˜¯String:</span></span><br><span class="line">            <span class="keyword">if</span> (value <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> (String) value;</span><br><span class="line">                <span class="comment">// åˆ¤æ–­å€¼æ˜¯å¦æ»¡è¶³@Rangeçš„min/max:</span></span><br><span class="line">                <span class="keyword">if</span> (s.length() &lt; range.min() || s.length() &gt; range.max()) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Invalid field: &quot;</span> + field.getName());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬é€šè¿‡<code>@Range</code>æ³¨è§£ï¼Œé…åˆ<code>check()</code>æ–¹æ³•ï¼Œå°±å¯ä»¥å®Œæˆ<code>Person</code>å®ä¾‹çš„æ£€æŸ¥ã€‚æ³¨æ„æ£€æŸ¥é€»è¾‘å®Œå…¨æ˜¯æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ï¼ŒJVMä¸ä¼šè‡ªåŠ¨ç»™æ³¨è§£æ·»åŠ ä»»ä½•é¢å¤–çš„é€»è¾‘ã€‚</p>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaå…¥é—¨ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>annotation</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç³»åˆ—ç¬”è®°7â€”â€”javaæ³›å‹ï¼ˆæ›´æ–°ä¸­ï¼‰</title>
    <url>/2022/02/01/998c77b4c7e4/</url>
    <content><![CDATA[<p>å‚è€ƒæ•™ç¨‹ç½‘å€ï¼šhttps://www.liaoxuefeng.com/wiki/1252599548343744/1264799402020448</p>
<h3 id="ä¸€æ³›å‹å®šä¹‰ç®€ä»‹">ä¸€ã€æ³›å‹å®šä¹‰ç®€ä»‹</h3>
<p>â€‹ æ³›å‹æ˜¯ä¸€ç§â€œä»£ç æ¨¡æ¿â€ï¼Œå¯ä»¥ç”¨ä¸€å¥—ä»£ç å¥—ç”¨å„ç§ç±»å‹ã€‚</p>
<p>â€‹
æˆ‘ä»¬å¯ä»¥æŠŠ<code>ArrayList</code>å˜æˆä¸€ç§æ¨¡æ¿ï¼š<code>ArrayList&lt;T&gt;</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayList</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> T[] array;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(T e)</span> &#123;...&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> &#123;...&#125;</span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>T</code>å¯ä»¥æ˜¯ä»»ä½•classã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å®ç°äº†ï¼š<strong>ç¼–å†™ä¸€æ¬¡æ¨¡ç‰ˆï¼Œå¯ä»¥åˆ›å»ºä»»æ„ç±»å‹çš„<code>ArrayList</code>ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå¯ä»¥å­˜å‚¨Stringçš„ArrayList:</span></span><br><span class="line">ArrayList&lt;String&gt; strList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"><span class="comment">// åˆ›å»ºå¯ä»¥å­˜å‚¨Floatçš„ArrayList:</span></span><br><span class="line">ArrayList&lt;Float&gt; floatList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Float&gt;();</span><br><span class="line"><span class="comment">// åˆ›å»ºå¯ä»¥å­˜å‚¨Personçš„ArrayList:</span></span><br><span class="line">ArrayList&lt;Person&gt; personList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Person&gt;();</span><br></pre></td></tr></table></figure>
<p>â€‹
å› æ­¤ï¼Œ<strong>æ³›å‹å°±æ˜¯å®šä¹‰ä¸€ç§æ¨¡æ¿ï¼Œä¾‹å¦‚<code>ArrayList&lt;T&gt;</code>ï¼Œç„¶ååœ¨ä»£ç ä¸­ä¸ºç”¨åˆ°çš„ç±»åˆ›å»ºå¯¹åº”çš„<code>ArrayList&lt;ç±»å‹&gt;</code>ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ArrayList&lt;String&gt; strList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„</strong>ï¼šæ³¨æ„æ³›å‹çš„ç»§æ‰¿å…³ç³»ï¼šå¯ä»¥æŠŠ<code>ArrayList&lt;Integer&gt;</code>å‘ä¸Šè½¬å‹ä¸º<code>List&lt;Integer&gt;</code>ï¼ˆ<code>T</code>ä¸èƒ½å˜ï¼ï¼‰ï¼Œä½†ä¸èƒ½æŠŠ<code>ArrayList&lt;Integer&gt;</code>å‘ä¸Šè½¬å‹ä¸º<code>ArrayList&lt;Number&gt;</code>ï¼ˆ<code>T</code>ä¸èƒ½å˜æˆçˆ¶ç±»ï¼‰ã€‚</p>
<h3 id="äºŒä½¿ç”¨æ³›å‹">äºŒã€ä½¿ç”¨æ³›å‹</h3>
<h4 id="ç®€å†™æ³›å‹">1ã€ç®€å†™æ³›å‹ï¼š</h4>
<p>å½“æˆ‘ä»¬å®šä¹‰æ³›å‹ç±»å‹<code>&lt;Number&gt;</code>åï¼Œ<code>List&lt;T&gt;</code>çš„æ³›å‹æ¥å£å˜ä¸ºå¼ºç±»å‹<code>List&lt;Number&gt;</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;Number&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Number&gt;();</span><br><span class="line">list.add(<span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">123</span>));</span><br><span class="line">list.add(<span class="keyword">new</span> <span class="title class_">Double</span>(<span class="number">12.34</span>));</span><br><span class="line"><span class="type">Number</span> <span class="variable">first</span> <span class="operator">=</span> list.get(<span class="number">0</span>);</span><br><span class="line"><span class="type">Number</span> <span class="variable">second</span> <span class="operator">=</span> list.get(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p><strong>ç¼–è¯‘å™¨å¦‚æœèƒ½è‡ªåŠ¨æ¨æ–­å‡ºæ³›å‹ç±»å‹ï¼Œå°±å¯ä»¥çœç•¥åé¢çš„æ³›å‹ç±»å‹</strong>ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;Number&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Number&gt;();</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘å™¨çœ‹åˆ°æ³›å‹ç±»å‹<code>List&lt;Number&gt;</code>å°±å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡ºåé¢çš„<code>ArrayList&lt;T&gt;</code>çš„æ³›å‹ç±»å‹å¿…é¡»æ˜¯<code>ArrayList&lt;Number&gt;</code>ï¼Œå› æ­¤ï¼Œå¯ä»¥æŠŠä»£ç ç®€å†™ä¸ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯ä»¥çœç•¥åé¢çš„Numberï¼Œç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨æ–­æ³›å‹ç±»å‹ï¼š</span></span><br><span class="line">List&lt;Number&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨æ³›å‹æ¥å£">2ã€ä½¿ç”¨æ³›å‹æ¥å£ï¼š</h4>
<p>â€‹
é™¤äº†<code>ArrayList&lt;T&gt;</code>ä½¿ç”¨äº†æ³›å‹ï¼Œè¿˜å¯ä»¥åœ¨æ¥å£ä¸­ä½¿ç”¨æ³›å‹ã€‚ä¾‹å¦‚ï¼Œ
<code>Arrays.sort(Object[])</code>å¯ä»¥å¯¹ä»»æ„æ•°ç»„è¿›è¡Œæ’åºï¼Œä½†å¾…æ’åºçš„å…ƒç´ å¿…é¡»å®ç°<code>Comparable&lt;T&gt;</code>è¿™ä¸ªæ³›å‹æ¥å£ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public interface Comparable&lt;T&gt; &#123;</span><br><span class="line">    /**</span><br><span class="line">     * è¿”å›è´Ÿæ•°: å½“å‰å®ä¾‹æ¯”å‚æ•°oå°</span><br><span class="line">     * è¿”å›0: å½“å‰å®ä¾‹ä¸å‚æ•°oç›¸ç­‰</span><br><span class="line">     * è¿”å›æ­£æ•°: å½“å‰å®ä¾‹æ¯”å‚æ•°oå¤§</span><br><span class="line">     */</span><br><span class="line">    int compareTo(T o);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹ å¦‚ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼šå®ç°å¯¹æˆ‘ä»¬çš„è‡ªå®šä¹‰ç±»Personçš„å…ƒç´ æ’åºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Person[] ps = <span class="keyword">new</span> <span class="title class_">Person</span>[] &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Bob&quot;</span>, <span class="number">61</span>),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Alice&quot;</span>, <span class="number">88</span>),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Lily&quot;</span>, <span class="number">75</span>),</span><br><span class="line">        &#125;;</span><br><span class="line">        Arrays.sort(ps);</span><br><span class="line">        System.out.println(Arrays.toString(ps));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Person&gt; &#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="type">int</span> score;</span><br><span class="line">    Person(String name, <span class="type">int</span> score) &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Person other)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name.compareTo(other.name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name + <span class="string">&quot;,&quot;</span> + <span class="built_in">this</span>.score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿è¡Œä¸Šè¿°ä»£ç ï¼Œå¯ä»¥æ­£ç¡®å®ç°æŒ‰nameè¿›è¡Œæ’åºã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="ä¸‰ç¼–å†™æ³›å‹">ä¸‰ã€ç¼–å†™æ³›å‹</h3>
<h4 id="ä¸€èˆ¬æ–¹æ³•">1ã€ä¸€èˆ¬æ–¹æ³•ï¼š</h4>
<ul>
<li><p>é¦–å…ˆï¼ŒæŒ‰ç…§æŸç§ç±»å‹ï¼Œä¾‹å¦‚ï¼š<code>String</code>ï¼Œæ¥ç¼–å†™ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pair</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String first;</span><br><span class="line">    <span class="keyword">private</span> String last;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Pair</span><span class="params">(String first, String last)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.first = first;</span><br><span class="line">        <span class="built_in">this</span>.last = last;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getFirst</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> first;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> last;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ç„¶åï¼Œæ ‡è®°æ‰€æœ‰çš„ç‰¹å®šç±»å‹ï¼Œè¿™é‡Œæ˜¯<code>String</code>,å¹¶æ›¿æ¢ä¸ºTï¼Œå¹¶ç”³æ˜<code>&lt;T&gt;</code>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class Pair&lt;T&gt; &#123;</span><br><span class="line">    private T first;</span><br><span class="line">    private T last;</span><br><span class="line">    public Pair(T first, T last) &#123;</span><br><span class="line">        this.first = first;</span><br><span class="line">        this.last = last;</span><br><span class="line">    &#125;</span><br><span class="line">    public T getFirst() &#123;</span><br><span class="line">        return first;</span><br><span class="line">    &#125;</span><br><span class="line">    public T getLast() &#123;</span><br><span class="line">        return last;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ç†Ÿç»ƒåå³å¯ç›´æ¥ä»<code>T</code>å¼€å§‹ç¼–å†™ã€‚</p></li>
</ul>
<h4 id="é™æ€æ–¹æ³•">2ã€é™æ€æ–¹æ³•ï¼š</h4>
<p>â€‹ æ³›å‹ç±»å‹<code>&lt;T&gt;</code>ä¸èƒ½ç”¨äºé™æ€æ–¹æ³•ã€‚</p>
<p>â€‹
å¯¹äºé™æ€æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å•ç‹¬æ”¹å†™ä¸ºâ€œæ³›å‹â€æ–¹æ³•ï¼Œåªéœ€è¦ä½¿ç”¨å¦ä¸€ä¸ªç±»å‹å³å¯ã€‚å¯¹äºä¸Šé¢çš„<code>create()</code>é™æ€æ–¹æ³•ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠå®ƒæ”¹ä¸ºå¦ä¸€ç§æ³›å‹ç±»å‹ï¼Œä¾‹å¦‚ï¼Œ<code>&lt;K&gt;</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pair</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> T first;</span><br><span class="line">    <span class="keyword">private</span> T last;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Pair</span><span class="params">(T first, T last)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.first = first;</span><br><span class="line">        <span class="built_in">this</span>.last = last;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getFirst</span><span class="params">()</span> &#123; ... &#125;</span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getLast</span><span class="params">()</span> &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é™æ€æ³›å‹æ–¹æ³•åº”è¯¥ä½¿ç”¨å…¶ä»–ç±»å‹åŒºåˆ†:</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;K&gt; Pair&lt;K&gt; <span class="title function_">create</span><span class="params">(K first, K last)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Pair</span>&lt;K&gt;(first, last);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·æ‰èƒ½æ¸…æ¥šåœ°å°†é™æ€æ–¹æ³•çš„æ³›å‹ç±»å‹å’Œå®ä¾‹ç±»å‹çš„æ³›å‹ç±»å‹åŒºåˆ†å¼€ã€‚</p>
<h4 id="å¤šä¸ªæ³›å‹çš„ç±»å‹">3ã€å¤šä¸ªæ³›å‹çš„ç±»å‹ï¼š</h4>
<p>â€‹
æ³›å‹è¿˜å¯ä»¥å®šä¹‰å¤šç§ç±»å‹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ›<code>Pair</code>ä¸æ€»æ˜¯å­˜å‚¨ä¸¤ä¸ªç±»å‹ä¸€æ ·çš„å¯¹è±¡ï¼Œå°±å¯ä»¥ä½¿ç”¨ç±»å‹<code>&lt;T, K&gt;</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pair</span>&lt;T, K&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> T first;</span><br><span class="line">    <span class="keyword">private</span> K last;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Pair</span><span class="params">(T first, K last)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.first = first;</span><br><span class="line">        <span class="built_in">this</span>.last = last;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getFirst</span><span class="params">()</span> &#123; ... &#125;</span><br><span class="line">    <span class="keyword">public</span> K <span class="title function_">getLast</span><span class="params">()</span> &#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨çš„æ—¶å€™ï¼Œéœ€è¦æŒ‡å‡ºä¸¤ç§ç±»å‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Pair&lt;String, Integer&gt; p = <span class="keyword">new</span> <span class="title class_">Pair</span>&lt;&gt;(<span class="string">&quot;test&quot;</span>, <span class="number">123</span>);</span><br></pre></td></tr></table></figure>
<p>â€‹
<strong>Javaæ ‡å‡†åº“çš„<code>Map&lt;K, V&gt;</code>å°±æ˜¯ä½¿ç”¨ä¸¤ç§æ³›å‹ç±»å‹çš„ä¾‹å­ã€‚å®ƒå¯¹Keyä½¿ç”¨ä¸€ç§ç±»å‹ï¼Œå¯¹Valueä½¿ç”¨å¦ä¸€ç§ç±»å‹ã€‚</strong></p>
<h3
id="å››æ“¦æ‹­æ³•javaè¯­è¨€çš„æ³›å‹å®ç°æ–¹æ³•">å››ã€æ“¦æ‹­æ³•ï¼ˆjavaè¯­è¨€çš„æ³›å‹å®ç°æ–¹æ³•ï¼‰ï¼š</h3>
<h4 id="æ“¦æ‹­æ³•çš„åŸºæœ¬å«ä¹‰">1ã€æ“¦æ‹­æ³•çš„åŸºæœ¬å«ä¹‰</h4>
<p>â€‹
æ“¦æ‹­æ³•æ˜¯æŒ‡ï¼Œ<strong>è™šæ‹Ÿæœºå¯¹æ³›å‹å…¶å®ä¸€æ— æ‰€çŸ¥ï¼Œæ‰€æœ‰çš„å·¥ä½œéƒ½æ˜¯ç¼–è¯‘å™¨åšçš„ã€‚</strong></p>
<p>â€‹
ä¾‹å¦‚ï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªæ³›å‹ç±»<code>Pair&lt;T&gt;</code>ï¼Œè¿™æ˜¯ç¼–è¯‘å™¨çœ‹åˆ°çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pair</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> T first;</span><br><span class="line">    <span class="keyword">private</span> T last;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Pair</span><span class="params">(T first, T last)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.first = first;</span><br><span class="line">        <span class="built_in">this</span>.last = last;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è€Œè™šæ‹Ÿæœºæ ¹æœ¬ä¸çŸ¥é“æ³›å‹ã€‚è¿™æ˜¯è™šæ‹Ÿæœºæ‰§è¡Œçš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pair</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Object first;</span><br><span class="line">    <span class="keyword">private</span> Object last;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Pair</span><span class="params">(Object first, Object last)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.first = first;</span><br><span class="line">        <span class="built_in">this</span>.last = last;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å› æ­¤ï¼Œjavaä½¿ç”¨æ“¦æ‹­æ³•å®ç°æ³›å‹ï¼Œå¯¼è‡´äº†ï¼š</p>
<ul>
<li><strong>ç¼–è¯‘å™¨æŠŠç±»å‹<code>&lt;T&gt;</code>è§†ä¸º<code>Object</code>ï¼›</strong></li>
<li><strong>ç¼–è¯‘å™¨æ ¹æ®<code>&lt;T&gt;</code>å®ç°å®‰å…¨çš„å¼ºåˆ¶è½¬å‹ã€‚</strong></li>
</ul>
<p>ä½¿ç”¨æ³›å‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç¼–å†™çš„ä»£ç ä¹Ÿæ˜¯ç¼–è¯‘å™¨çœ‹åˆ°çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Pair&lt;String&gt; p = <span class="keyword">new</span> <span class="title class_">Pair</span>&lt;&gt;(<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;world&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">first</span> <span class="operator">=</span> p.getFirst();</span><br><span class="line"><span class="type">String</span> <span class="variable">last</span> <span class="operator">=</span> p.getLast();</span><br></pre></td></tr></table></figure>
<p>è€Œè™šæ‹Ÿæœºæ‰§è¡Œçš„ä»£ç å¹¶æ²¡æœ‰æ³›å‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Pair</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Pair</span>(<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;world&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">first</span> <span class="operator">=</span> (String) p.getFirst();</span><br><span class="line"><span class="type">String</span> <span class="variable">last</span> <span class="operator">=</span> (String) p.getLast();</span><br></pre></td></tr></table></figure>
<p><strong>Javaçš„æ³›å‹æ˜¯ç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å®è¡Œçš„ï¼Œç¼–è¯‘å™¨å†…éƒ¨æ°¸è¿œæŠŠæ‰€æœ‰ç±»å‹<code>T</code>è§†ä¸º<code>Object</code>å¤„ç†ï¼Œä½†æ˜¯ï¼Œåœ¨éœ€è¦è½¬å‹çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®<code>T</code>çš„ç±»å‹è‡ªåŠ¨ä¸ºæˆ‘ä»¬å®è¡Œå®‰å…¨åœ°å¼ºåˆ¶è½¬å‹ã€‚</strong></p>
<h4 id="javaæ³›å‹çš„å±€é™">2ã€javaæ³›å‹çš„å±€é™ï¼š</h4>
<ul>
<li><p>1ï¼‰
<code>&lt;T&gt;</code>ä¸èƒ½æ˜¯åŸºæœ¬ç±»å‹ï¼Œä¾‹å¦‚<code>int</code>ï¼Œå› ä¸ºå®é™…ç±»å‹æ˜¯<code>Object</code>ï¼Œ<code>Object</code>ç±»å‹æ— æ³•æŒæœ‰åŸºæœ¬ç±»å‹ï¼š</p></li>
<li><p>2ï¼‰
æ‰€æœ‰æ³›å‹å®ä¾‹ï¼Œæ— è®º<code>T</code>çš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Œ<code>getClass()</code>è¿”å›åŒä¸€ä¸ª<code>Class</code>å®ä¾‹ï¼Œå› ä¸ºç¼–è¯‘åå®ƒä»¬å…¨éƒ¨éƒ½æ˜¯<code>Pair&lt;Object&gt;</code>ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Pair&lt;String&gt; p1 = <span class="keyword">new</span> <span class="title class_">Pair</span>&lt;&gt;(<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;world&quot;</span>);</span><br><span class="line">Pair&lt;Integer&gt; p2 = <span class="keyword">new</span> <span class="title class_">Pair</span>&lt;&gt;(<span class="number">123</span>, <span class="number">456</span>);</span><br><span class="line"><span class="type">Class</span> <span class="variable">c1</span> <span class="operator">=</span> p1.getClass();</span><br><span class="line"><span class="type">Class</span> <span class="variable">c2</span> <span class="operator">=</span> p2.getClass();</span><br><span class="line">System.out.println(c1==c2); <span class="comment">// true</span></span><br><span class="line">System.out.println(c1==Pair.class); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></li>
<li><p>3ï¼‰æ— æ³•åˆ¤æ–­å¸¦æ³›å‹çš„ç±»å‹ï¼ŒåŸå› å’Œå‰é¢ä¸€æ ·ï¼Œå¹¶ä¸å­˜åœ¨<code>Pair&lt;String&gt;.class</code>ï¼Œè€Œæ˜¯åªæœ‰å”¯ä¸€çš„<code>Pair.class</code>ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Pair&lt;Integer&gt; p = <span class="keyword">new</span> <span class="title class_">Pair</span>&lt;&gt;(<span class="number">123</span>, <span class="number">456</span>);</span><br><span class="line"><span class="comment">// Compile error:</span></span><br><span class="line"><span class="keyword">if</span> (p <span class="keyword">instanceof</span> Pair&lt;String&gt;) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>4ï¼‰ä¸èƒ½å®ä¾‹åŒ–<code>T</code>ç±»å‹</p></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pair</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> T first;</span><br><span class="line">    <span class="keyword">private</span> T last;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Pair</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// Compile error:</span></span><br><span class="line">        first = <span class="keyword">new</span> <span class="title class_">T</span>();</span><br><span class="line">        last = <span class="keyword">new</span> <span class="title class_">T</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç æ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œå› ä¸ºæ„é€ æ–¹æ³•çš„ä¸¤è¡Œè¯­å¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">first = <span class="keyword">new</span> <span class="title class_">T</span>();</span><br><span class="line">last = <span class="keyword">new</span> <span class="title class_">T</span>();</span><br></pre></td></tr></table></figure>
<p>æ“¦æ‹­åå®é™…ä¸Šå˜æˆäº†ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">first = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">last = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä¸€æ¥ï¼Œåˆ›å»º<code>new Pair&lt;String&gt;()</code>å’Œåˆ›å»º<code>new Pair&lt;Integer&gt;()</code>å°±å…¨éƒ¨æˆäº†<code>Object</code>ï¼Œæ˜¾ç„¶ç¼–è¯‘å™¨è¦é˜»æ­¢è¿™ç§ç±»å‹ä¸å¯¹çš„ä»£ç ã€‚</p>
<p>è¦å®ä¾‹åŒ–<code>T</code>ç±»å‹ï¼Œæˆ‘ä»¬å¿…é¡»å€ŸåŠ©é¢å¤–çš„<code>Class&lt;T&gt;</code>å‚æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pair</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> T first;</span><br><span class="line">    <span class="keyword">private</span> T last;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Pair</span><span class="params">(Class&lt;T&gt; clazz)</span> &#123;</span><br><span class="line">        first = clazz.newInstance();</span><br><span class="line">        last = clazz.newInstance();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç å€ŸåŠ©<code>Class&lt;T&gt;</code>å‚æ•°å¹¶é€šè¿‡åå°„æ¥å®ä¾‹åŒ–<code>T</code>ç±»å‹ï¼Œä½¿ç”¨çš„æ—¶å€™ï¼Œä¹Ÿå¿…é¡»ä¼ å…¥<code>Class&lt;T&gt;</code>ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Pair&lt;String&gt; pair = <span class="keyword">new</span> <span class="title class_">Pair</span>&lt;&gt;(String.class);</span><br></pre></td></tr></table></figure>
<p>å› ä¸ºä¼ å…¥äº†<code>Class&lt;String&gt;</code>çš„å®ä¾‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å€ŸåŠ©<code>String.class</code>å°±å¯ä»¥å®ä¾‹åŒ–<code>String</code>ç±»å‹ã€‚</p>
<h4 id="ä¸æ°å½“çš„è¦†å†™æ–¹æ³•">3ã€ä¸æ°å½“çš„è¦†å†™æ–¹æ³•</h4>
<p>æœ‰äº›æ—¶å€™ï¼Œä¸€ä¸ªçœ‹ä¼¼æ­£ç¡®å®šä¹‰çš„æ–¹æ³•ä¼šæ— æ³•é€šè¿‡ç¼–è¯‘ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pair</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(T t)</span> &#123;</span><br><span class="line">        <span class="type">return</span> <span class="variable">this</span> <span class="operator">=</span>= t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯å› ä¸ºï¼Œå®šä¹‰çš„<code>equals(T t)</code>æ–¹æ³•å®é™…ä¸Šä¼šè¢«æ“¦æ‹­æˆ<code>equals(Object t)</code>ï¼Œè€Œè¿™ä¸ªæ–¹æ³•æ˜¯ç»§æ‰¿è‡ª<code>Object</code>çš„ï¼Œç¼–è¯‘å™¨ä¼šé˜»æ­¢ä¸€ä¸ªå®é™…ä¸Šä¼šå˜æˆè¦†å†™çš„æ³›å‹æ–¹æ³•å®šä¹‰ã€‚</p>
<p>æ¢ä¸ªæ–¹æ³•åï¼Œé¿å¼€ä¸<code>Object.equals(Object)</code>çš„å†²çªå°±å¯ä»¥æˆåŠŸç¼–è¯‘ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pair</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">same</span><span class="params">(T t)</span> &#123;</span><br><span class="line">        <span class="type">return</span> <span class="variable">this</span> <span class="operator">=</span>= t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ³›å‹ç»§æ‰¿å¾…è¡¥å……">4ã€æ³›å‹ç»§æ‰¿ï¼ˆå¾…è¡¥å……</h4>
<h3 id="äº”extendsé€šé…ç¬¦">äº”ã€Extendsé€šé…ç¬¦</h3>
<h3 id="å…­superé€šé…ç¬¦">å…­ã€Superé€šé…ç¬¦</h3>
<h3 id="ä¸ƒæ³›å‹å’Œåå°„">ä¸ƒã€æ³›å‹å’Œåå°„</h3>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaå…¥é—¨ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç³»åˆ—ç¬”è®°9â€”â€”java æ—¥æœŸä¸æ—¶é—´ï¼ˆæ›´æ–°ä¸­ï¼‰</title>
    <url>/2022/02/01/671534cf591b/</url>
    <content><![CDATA[<p>å‚è€ƒæ•™ç¨‹ç½‘å€ï¼šhttps://www.liaoxuefeng.com/wiki/1252599548343744/1298613246361634</p>
<h3 id="ä¸€åŸºæœ¬æ¦‚å¿µ">ä¸€ã€åŸºæœ¬æ¦‚å¿µï¼š</h3>
<h4 id="æœ¬åœ°æ—¶é—´">1ã€æœ¬åœ°æ—¶é—´</h4>
<p>â€‹
ä¸åŒçš„æ—¶åŒºï¼Œåœ¨åŒä¸€æ—¶åˆ»ï¼Œæœ¬åœ°æ—¶é—´æ˜¯ä¸åŒçš„ã€‚å…¨çƒä¸€å…±åˆ†ä¸º24ä¸ªæ—¶åŒºï¼Œ<strong>ä¼¦æ•¦æ‰€åœ¨çš„æ—¶åŒºç§°ä¸ºæ ‡å‡†æ—¶åŒºï¼Œå…¶ä»–æ—¶åŒºæŒ‰ä¸œï¼è¥¿åç§»çš„å°æ—¶åŒºåˆ†ï¼ŒåŒ—äº¬æ‰€åœ¨çš„æ—¶åŒºæ˜¯ä¸œå…«åŒºã€‚</strong></p>
<h4 id="æ—¶åŒº">2ã€æ—¶åŒº</h4>
<p>â€‹
å› ä¸ºå…‰é æœ¬åœ°æ—¶é—´è¿˜æ— æ³•å”¯ä¸€ç¡®å®šä¸€ä¸ªå‡†ç¡®çš„æ—¶åˆ»ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦ç»™æœ¬åœ°æ—¶é—´åŠ ä¸Šä¸€ä¸ªæ—¶åŒºã€‚æ—¶åŒºæœ‰å¥½å‡ ç§è¡¨ç¤ºæ–¹å¼ã€‚</p>
<p>â€‹
ä¸€ç§æ˜¯ä»¥<code>GMT</code>æˆ–è€…<code>UTC</code>åŠ æ—¶åŒºåç§»è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š<code>GMT+08:00</code>æˆ–è€…<code>UTC+08:00</code>è¡¨ç¤ºä¸œå…«åŒºã€‚</p>
<p>â€‹
<code>GMT</code>å’Œ<code>UTC</code>å¯ä»¥è®¤ä¸ºåŸºæœ¬æ˜¯ç­‰ä»·çš„ï¼Œåªæ˜¯<code>UTC</code>ä½¿ç”¨æ›´ç²¾ç¡®çš„åŸå­é’Ÿè®¡æ—¶ï¼Œæ¯éš”å‡ å¹´ä¼šæœ‰ä¸€ä¸ªé—°ç§’ï¼Œæˆ‘ä»¬åœ¨å¼€å‘ç¨‹åºçš„æ—¶å€™å¯ä»¥å¿½ç•¥ä¸¤è€…çš„è¯¯å·®ï¼Œå› ä¸ºè®¡ç®—æœºçš„æ—¶é’Ÿåœ¨è”ç½‘çš„æ—¶å€™ä¼šè‡ªåŠ¨ä¸æ—¶é—´æœåŠ¡å™¨åŒæ­¥æ—¶é—´ã€‚</p>
<p>â€‹
å¦ä¸€ç§æ˜¯ç¼©å†™ï¼Œä¾‹å¦‚ï¼Œ<code>CST</code>è¡¨ç¤º<code>China Standard Time</code>ï¼Œä¹Ÿå°±æ˜¯ä¸­å›½æ ‡å‡†æ—¶é—´ã€‚ä½†æ˜¯<code>CST</code>ä¹Ÿå¯ä»¥è¡¨ç¤ºç¾å›½ä¸­éƒ¨æ—¶é—´<code>Central Standard Time USA</code>ï¼Œå› æ­¤ï¼Œç¼©å†™å®¹æ˜“äº§ç”Ÿæ··æ·†ï¼Œæˆ‘ä»¬å°½é‡ä¸è¦ä½¿ç”¨ç¼©å†™ã€‚</p>
<p>â€‹
æœ€åä¸€ç§æ˜¯ä»¥æ´²ï¼åŸå¸‚è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼Œ<code>Asia/Shanghai</code>ï¼Œè¡¨ç¤ºä¸Šæµ·æ‰€åœ¨åœ°çš„æ—¶åŒºã€‚ç‰¹åˆ«æ³¨æ„åŸå¸‚åç§°ä¸æ˜¯ä»»æ„çš„åŸå¸‚ï¼Œè€Œæ˜¯ç”±å›½é™…æ ‡å‡†ç»„ç»‡è§„å®šçš„åŸå¸‚ã€‚</p>
<p>â€‹
å› ä¸ºæ—¶åŒºçš„å­˜åœ¨ï¼Œä¸œå…«åŒºçš„2019å¹´11æœˆ20æ—¥æ—©ä¸Š8:15ï¼Œå’Œè¥¿äº”åŒºçš„2019å¹´11æœˆ19æ—¥æ™šä¸Š19:15ï¼Œä»–ä»¬çš„æ—¶åˆ»æ˜¯ç›¸åŒçš„</p>
<h4 id="å¤ä»¤æ—¶">3ã€å¤ä»¤æ—¶</h4>
<p>â€‹
æ—¶åŒºè¿˜ä¸æ˜¯æœ€å¤æ‚çš„ï¼Œæ›´å¤æ‚çš„æ˜¯å¤ä»¤æ—¶ã€‚æ‰€è°“å¤ä»¤æ—¶ï¼Œå°±æ˜¯å¤å¤©å¼€å§‹çš„æ—¶å€™ï¼ŒæŠŠæ—¶é—´å¾€åæ‹¨1å°æ—¶ï¼Œå¤å¤©ç»“æŸçš„æ—¶å€™ï¼Œå†æŠŠæ—¶é—´å¾€å‰æ‹¨1å°æ—¶ã€‚</p>
<p>â€‹
å› ä¸ºæ¶‰åŠåˆ°å¤ä»¤æ—¶ï¼Œç›¸åŒçš„æ—¶åŒºï¼Œå¦‚æœè¡¨ç¤ºçš„æ–¹å¼ä¸åŒï¼Œè½¬æ¢å‡ºçš„æ—¶é—´æ˜¯ä¸åŒçš„ã€‚æˆ‘ä»¬ä¸¾ä¸ªæ —å­ï¼š</p>
<p>å¯¹äº2019-11-20å’Œ2019-6-20ä¸¤ä¸ªæ—¥æœŸæ¥è¯´ï¼Œå‡è®¾åŒ—äº¬äººåœ¨çº½çº¦ï¼š</p>
<ul>
<li>å¦‚æœä»¥<code>GMT</code>æˆ–è€…<code>UTC</code>ä½œä¸ºæ—¶åŒºï¼Œæ— è®ºæ—¥æœŸæ˜¯å¤šå°‘ï¼Œæ—¶é—´éƒ½æ˜¯<code>19:00</code>ï¼›</li>
<li>å¦‚æœä»¥å›½å®¶ï¼åŸå¸‚è¡¨ç¤ºï¼Œä¾‹å¦‚<code>Americaï¼NewYork</code>ï¼Œè™½ç„¶çº½çº¦ä¹Ÿåœ¨è¥¿äº”åŒºï¼Œä½†æ˜¯ï¼Œå› ä¸ºå¤ä»¤æ—¶çš„å­˜åœ¨ï¼Œåœ¨ä¸åŒçš„æ—¥æœŸï¼Œ<code>GMT</code>æ—¶é—´å’Œçº½çº¦æ—¶é—´å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼š</li>
</ul>
<table>
<thead>
<tr class="header">
<th>æ—¶åŒº</th>
<th>2019-11-20</th>
<th>2019-6-20</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>GMT-05:00</td>
<td>19:00</td>
<td>19:00</td>
</tr>
<tr class="even">
<td>UTC-05:00</td>
<td>19:00</td>
<td>19:00</td>
</tr>
<tr class="odd">
<td>America/New_York</td>
<td>19:00</td>
<td>20:00</td>
</tr>
</tbody>
</table>
<p>â€‹
å®è¡Œå¤ä»¤æ—¶çš„ä¸åŒåœ°åŒºï¼Œè¿›å…¥å’Œé€€å‡ºå¤ä»¤æ—¶çš„æ—¶é—´å¾ˆå¯èƒ½æ˜¯ä¸åŒçš„ã€‚åŒä¸€ä¸ªåœ°åŒºï¼Œæ ¹æ®å†å²ä¸Šæ˜¯å¦å®è¡Œè¿‡å¤ä»¤æ—¶ï¼Œæ ‡å‡†æ—¶é—´åœ¨ä¸åŒå¹´ä»½æ¢ç®—æˆå½“åœ°æ—¶é—´ä¹Ÿæ˜¯ä¸åŒçš„ã€‚å› æ­¤ï¼Œè®¡ç®—å¤ä»¤æ—¶ï¼Œæ²¡æœ‰ç»Ÿä¸€çš„å…¬å¼ï¼Œå¿…é¡»æŒ‰ç…§ä¸€ç»„ç»™å®šçš„è§„åˆ™æ¥ç®—ï¼Œå¹¶ä¸”ï¼Œè¯¥è§„åˆ™è¦å®šæœŸæ›´æ–°ã€‚</p>
<h4 id="æœ¬åœ°åŒ–">4ã€æœ¬åœ°åŒ–</h4>
<p>â€‹
åœ¨è®¡ç®—æœºä¸­ï¼Œé€šå¸¸ä½¿ç”¨<code>Locale</code>è¡¨ç¤ºä¸€ä¸ªå›½å®¶æˆ–åœ°åŒºçš„æ—¥æœŸã€æ—¶é—´ã€æ•°å­—ã€è´§å¸ç­‰æ ¼å¼ã€‚<code>Locale</code>ç”±<code>è¯­è¨€_å›½å®¶</code>çš„å­—æ¯ç¼©å†™æ„æˆï¼Œä¾‹å¦‚ï¼Œ<code>zh_CN</code>è¡¨ç¤ºä¸­æ–‡+ä¸­å›½ï¼Œ<code>en_US</code>è¡¨ç¤ºè‹±æ–‡+ç¾å›½ã€‚è¯­è¨€ä½¿ç”¨å°å†™ï¼Œå›½å®¶ä½¿ç”¨å¤§å†™ã€‚</p>
<p>å¯¹äºæ—¥æœŸæ¥è¯´ï¼Œä¸åŒçš„Localeï¼Œä¾‹å¦‚ï¼Œä¸­å›½å’Œç¾å›½çš„è¡¨ç¤ºæ–¹å¼å¦‚ä¸‹ï¼š</p>
<ul>
<li>zh_CNï¼š2016-11-30</li>
<li>en_USï¼š11/30/2016</li>
</ul>
<p>â€‹
è®¡ç®—æœºç”¨<code>Locale</code>åœ¨æ—¥æœŸã€æ—¶é—´ã€è´§å¸å’Œå­—ç¬¦ä¸²ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚ä¸€ä¸ªç”µå•†ç½‘ç«™ä¼šæ ¹æ®ç”¨æˆ·æ‰€åœ¨çš„<code>Locale</code>å¯¹ç”¨æˆ·æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>ä¸­å›½ç”¨æˆ·</th>
<th>ç¾å›½ç”¨æˆ·</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>è´­ä¹°ä»·æ ¼</td>
<td>12000.00</td>
<td>12,000.00</td>
</tr>
<tr class="even">
<td>è´­ä¹°æ—¥æœŸ</td>
<td>2016-11-30</td>
<td>11/30/2016</td>
</tr>
</tbody>
</table>
<h3 id="äºŒdateå’Œcalendar">äºŒã€Dateå’ŒCalendar</h3>
<p>â€‹
è¿™ä¸ªâ€œåŒä¸€ä¸ªæ—¶åˆ»â€åœ¨è®¡ç®—æœºä¸­å­˜å‚¨çš„æœ¬è´¨ä¸Šåªæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œæˆ‘ä»¬ç§°å®ƒä¸º<code>Epoch Time</code></p>
<p>â€‹
<code>Epoch Time</code>æ˜¯è®¡ç®—ä»1970å¹´1æœˆ1æ—¥é›¶ç‚¹ï¼ˆæ ¼æ—å¨æ²»æ—¶åŒºï¼GMT+00:00ï¼‰åˆ°ç°åœ¨æ‰€ç»å†çš„ç§’æ•°ï¼Œä¾‹å¦‚ï¼š</p>
<p>â€‹
<code>1574208900</code>è¡¨ç¤ºä»ä»1970å¹´1æœˆ1æ—¥é›¶ç‚¹GMTæ—¶åŒºåˆ°è¯¥æ—¶åˆ»ä¸€å…±ç»å†äº†1574208900ç§’ï¼Œæ¢ç®—æˆä¼¦æ•¦ã€åŒ—äº¬å’Œçº½çº¦æ—¶é—´åˆ†åˆ«æ˜¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1574208900 = åŒ—äº¬æ—¶é—´2019-11-20 8:15:00</span><br><span class="line">           = ä¼¦æ•¦æ—¶é—´2019-11-20 0:15:00</span><br><span class="line">           = çº½çº¦æ—¶é—´2019-11-19 19:15:00</span><br></pre></td></tr></table></figure>
<p><code>Epoch Time</code>åˆç§°ä¸ºæ—¶é—´æˆ³ï¼Œåœ¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œä¼šæœ‰å‡ ç§å­˜å‚¨æ–¹å¼ï¼š</p>
<ul>
<li>ä»¥ç§’ä¸ºå•ä½çš„æ•´æ•°ï¼š1574208900ï¼Œç¼ºç‚¹æ˜¯ç²¾åº¦åªèƒ½åˆ°ç§’ï¼›</li>
<li>ä»¥æ¯«ç§’ä¸ºå•ä½çš„æ•´æ•°ï¼š1574208900123ï¼Œæœ€å3ä½è¡¨ç¤ºæ¯«ç§’æ•°ï¼›</li>
<li>ä»¥ç§’ä¸ºå•ä½çš„æµ®ç‚¹æ•°ï¼š1574208900.123ï¼Œå°æ•°ç‚¹åé¢è¡¨ç¤ºé›¶ç‚¹å‡ ç§’ã€‚</li>
</ul>
<p><strong>åœ¨Javaç¨‹åºä¸­ï¼Œæ—¶é—´æˆ³é€šå¸¸æ˜¯ç”¨<code>long</code>è¡¨ç¤ºçš„æ¯«ç§’æ•°ï¼Œå³ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">long t = 1574208900123L;</span><br></pre></td></tr></table></figure>
<p><strong>è½¬æ¢æˆåŒ—äº¬æ—¶é—´å°±æ˜¯<code>2019-11-20T8:15:00.123</code>ã€‚è¦è·å–å½“å‰æ—¶é—´æˆ³ï¼Œå¯ä»¥ä½¿ç”¨<code>System.currentTimeMillis()</code>ï¼Œè¿™æ˜¯Javaç¨‹åºè·å–æ—¶é—´æˆ³æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚</strong></p>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaå…¥é—¨ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>__call__æ–¹æ³•</title>
    <url>/2022/03/12/6c6b30d1f672/</url>
    <content><![CDATA[<p>â€‹
Pythonçš„ä¸€ä¸ªç‰¹æ®Šçš„å®ä¾‹æ–¹æ³•<code>__call__</code>ï¼ŒåŠŸèƒ½ç±»ä¼¼äºåœ¨ç±»ä¸­é‡è½½()è¿ç®—ç¬¦ï¼Œä½¿å¾—ç±»å®ä¾‹å¯¹è±¡å¯ä»¥åƒè°ƒç”¨æ™®é€šå‡½æ•°é‚£æ ·è¿›è¡Œä½¿ç”¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CLanguage</span>:</span><br><span class="line">    <span class="comment"># å®šä¹‰__call__æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self,name,add</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è°ƒç”¨__call__()æ–¹æ³•&quot;</span>,name,add)</span><br><span class="line">clangs = CLanguage()</span><br><span class="line">clangs(<span class="string">&quot;C test&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡åœ¨ CLanguage ç±»ä¸­å®ç°<code>__call__</code>æ–¹æ³•ï¼Œä½¿å¾— clangs
å®ä¾‹å¯¹è±¡å˜ä¸ºäº†å¯è°ƒç”¨å¯¹è±¡ã€‚</p>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>PythonåŸºç¡€æ‰©å……ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonå¯¼å…¥è‡ªå®šä¹‰æ¨¡å—ï¼ˆåŒç›®å½•ã€å­ç›®å½•ã€è·¨ç›®å½•ï¼‰</title>
    <url>/2022/01/18/a7c2f4fb23de/</url>
    <content><![CDATA[<h3 id="åŸºæœ¬æ ¼å¼">1ã€åŸºæœ¬æ ¼å¼ï¼š</h3>
<p>â€‹ <strong>from æ–‡ä»¶å import ç±»å</strong></p>
<h3 id="åˆ†æƒ…å½¢è®¨è®ºå¼•å…¥æ–¹å¼">2ã€åˆ†æƒ…å½¢è®¨è®ºå¼•å…¥æ–¹å¼ï¼š</h3>
<p>â€‹ å‡è®¾ç°æœ‰å¦‚ä¸‹ç›®å½•ç»“æ„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">â”œâ”€â”€ model0.py</span><br><span class="line">â”œâ”€â”€ main.py</span><br><span class="line">â”œâ”€â”€ model1/</span><br><span class="line">â”‚   â””â”€â”€ model1_main.py</span><br><span class="line">â””â”€â”€ model2/</span><br><span class="line">    â””â”€â”€ model2_main.py</span><br></pre></td></tr></table></figure>
<h4 id="åŒçº§ç›®å½•å¼•å…¥">1ï¼‰åŒçº§ç›®å½•å¼•å…¥</h4>
<p><strong>main.py</strong> ä¸­éœ€è¦å¯¼å…¥ <strong>model0.py</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> model0</span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line"><span class="keyword">from</span> model0 <span class="keyword">import</span> *</span><br></pre></td></tr></table></figure>
<p>ä¸¤è€…éƒ½æ˜¯å¯ä»¥çš„ï¼ŒåŒçº§ç›®å½•ä¸‹å¼•å…¥ååˆ†ç®€ä¾¿ï¼Œç›´æ¥importå³å¯</p>
<h4 id="å­ç›®å½•å¼•å…¥">2ï¼‰å­ç›®å½•å¼•å…¥</h4>
<p><strong>main.py</strong> ä¸­éœ€è¦å¯¼å…¥
<strong>model1_main.py</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æˆ‘ä»¬é¦–å…ˆéœ€è¦åœ¨model1/ä¸‹å»ºç«‹__init__.pyç©ºæ–‡ä»¶ï¼Œè®©ç¼–è¯‘å™¨è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæ¨¡å—ã€‚</span><br></pre></td></tr></table></figure>
<p>å»ºç«‹åï¼Œ<strong>ç›®å½•ç»“æ„åº”å½“å¦‚ä¸‹æ‰€ç¤ºï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">â”œâ”€â”€ model0.py</span><br><span class="line">â”œâ”€â”€ main.py</span><br><span class="line">â”œâ”€â”€ model1/</span><br><span class="line">â”‚   â””â”€â”€ model1_main.py</span><br><span class="line">â”‚   â””â”€â”€ __init__.py</span><br><span class="line">â””â”€â”€ model2/</span><br><span class="line">    â””â”€â”€ model2_main.py</span><br></pre></td></tr></table></figure>
<p>ç„¶åè¿›è¡Œå¼•å…¥ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> model1.model1_main</span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line"><span class="keyword">from</span> model1.model1_main <span class="keyword">import</span> *</span><br></pre></td></tr></table></figure>
<h4 id="è·¨ç›®å½•å¼•å…¥">3ï¼‰è·¨ç›®å½•å¼•å…¥</h4>
<p><strong>model1_main.py</strong>å¯¼å…¥<strong>model2/model2_main.py</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åŒç†æˆ‘ä»¬é¦–å…ˆéœ€è¦åœ¨model2/ä¸‹å»ºç«‹__init__.pyç©ºæ–‡ä»¶ï¼Œè®©ç¼–è¯‘å™¨è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæ¨¡å—ã€‚</span><br></pre></td></tr></table></figure>
<p>å»ºç«‹åï¼Œ<strong>ç›®å½•ç»“æ„åº”å½“å¦‚ä¸‹æ‰€ç¤ºï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">â”œâ”€â”€ model0.py</span><br><span class="line">â”œâ”€â”€ main.py</span><br><span class="line">â”œâ”€â”€ model1/</span><br><span class="line">â”‚   â””â”€â”€ model1_main.py</span><br><span class="line">â”‚   â””â”€â”€ __init__.py</span><br><span class="line">â””â”€â”€ model2/</span><br><span class="line">â”‚   â””â”€â”€ model2_main.py</span><br><span class="line">â”‚   â””â”€â”€ __init__.py</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨model1_mainæ–‡ä»¶ä¸­è¿›è¡Œå¼•å…¥</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path.append(<span class="string">&quot;..&quot;</span>)</span><br><span class="line"><span class="keyword">import</span> model2.model2_main</span><br></pre></td></tr></table></figure>
<h4 id="æ›´ä¸ºä¸€èˆ¬çš„ä»‹ç»">4ï¼‰æ›´ä¸ºä¸€èˆ¬çš„ä»‹ç»ï¼š</h4>
<p>sysæ¨¡å—æ˜¯pythonå†…ç½®çš„ï¼Œæˆ‘ä»¬å¯¼å…¥è·¨è‡ªå®šä¹‰æ¨¡å—çš„æ­¥éª¤ä¸€èˆ¬å¦‚ä¸‹ï¼š</p>
<p>â€‹ é¦–å…ˆè¦ç¡®ä¿è¢«å¯¼å…¥çš„æ¨¡å—æ–‡ä»¶å¤¹å†…æœ‰
__init__.pyæ–‡ä»¶ï¼Œç¡®ä¿å…¶è¢«è¯†åˆ«ä¸ºä¸€ä¸ªæ¨¡å—ï¼Œç„¶åå†æ‰§è¡Œä¸‹é¢æ­¥éª¤ï¼š</p>
<ol type="1">
<li><strong>å…ˆå¯¼å…¥sysæ¨¡å—</strong></li>
<li>ç„¶åé€šè¿‡<code>sys.path.append(path)</code>
å‡½æ•°æ¥å¯¼å…¥è‡ªå®šä¹‰æ¨¡å—æ‰€åœ¨çš„ç›®å½•</li>
<li><strong>å¯¼å…¥è‡ªå®šä¹‰æ¨¡å—</strong>ã€‚</li>
</ol>
<p>â€‹
åªä¸è¿‡åœ¨åŒçº§ç›®å½•ä»¥åŠå­ç›®å½•ä¸‹è¿›è¡Œå¼•å…¥ï¼Œä¸éœ€è¦è¿™ä¹ˆå¤æ‚ï¼Œå¯ä»¥æœ‰æ›´ç®€å•çš„æ–¹æ³•ï¼Œè€Œåœ¨è·¨ç›®å½•å¼•å…¥æ—¶ï¼Œå°±éœ€è¦é‡‡ç”¨è¿™ç§æ–¹æ¡ˆã€‚</p>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>PythonåŸºç¡€æ‰©å……ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>Module Import</tag>
      </tags>
  </entry>
  <entry>
    <title>Torch/Numpyçš„å¹¿æ’­æœºåˆ¶ä»‹ç»</title>
    <url>/2022/01/18/52f2902757db/</url>
    <content><![CDATA[<p>Numpyä»¥åŠTensorçš„å¹¿æ’­æœºåˆ¶ä»‹ç»ï¼ˆä»¥Torchä¸ºä¾‹ï¼Œä¸¤è€…ä¸€è‡´ï¼‰</p>
<h3 id="å¹¿æ’­æœºåˆ¶åœ¨ä½•å¤„ä¼šå‡ºç°">1ã€å¹¿æ’­æœºåˆ¶åœ¨ä½•å¤„ä¼šå‡ºç°ï¼Ÿ</h3>
<p>â€‹ å¹¿æ’­é’ˆå¯¹çš„è¿ç®—æ˜¯element wiseç±»å‹çš„è¿ç®—ï¼Œå³å…ƒç´ å¯¹å…ƒç´ ç±»å‹çš„è¿ç®—</p>
<p>â€‹ <strong>Element-wiseçš„è®¡ç®—ç¬¦å·åŒ…æ‹¬å¦‚ä¸‹ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç®—æ•°è¿ç®—ï¼š+, -, *, /, //, %, divmod(), ** or pow(), &lt;&lt;, &gt;&gt;, &amp;, ^, |</span><br><span class="line"></span><br><span class="line">æ¯”è¾ƒè¿ç®—ï¼š==, &lt;, &gt;, &lt;=, &gt;=, !=</span><br></pre></td></tr></table></figure>
<h3 id="å¹¿æ’­æœºåˆ¶çš„è§„åˆ™ä¸å‡ºç°çš„åŸå› ">2ã€å¹¿æ’­æœºåˆ¶çš„è§„åˆ™ä¸å‡ºç°çš„åŸå› </h3>
<p>â€‹ æ­£å¸¸æ¥è¯´ï¼Œä¸¤ä¸ªåšElement
wiseç±»å‹è¿ç®—çš„å˜é‡ï¼Œå…¶ç›¸åº”ç»´åº¦çš„é•¿åº¦è¦ç›¸ç­‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼šè¿™ç§å½¢å¼åšElement-Wiseçš„è¿ç®—æ˜¯éå¸¸ç®€å•ä¸”æ˜“ç†è§£çš„ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = torch.rand(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">b = torch.rand(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">c = a * b</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">a:tensor([[0.9912, 0.3736],</span></span><br><span class="line"><span class="string">        [0.0708, 0.6939]])</span></span><br><span class="line"><span class="string">b:tensor([[0.5788, 0.6296],</span></span><br><span class="line"><span class="string">        [0.9746, 0.8540]])</span></span><br><span class="line"><span class="string">c:tensor([[0.5737, 0.2352],</span></span><br><span class="line"><span class="string">        [0.0690, 0.5925]])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>â€‹
é‚£ä¹ˆå½“ä¸¤ä¸ªTensorçš„å¯¹åº”ç»´åº¦ä¸å¯¹é½çš„æ—¶å€™ï¼Œ<strong>ä¸ºäº†é¿å…ç”¨æˆ·ä½¿ç”¨ä»£ç forå¾ªç¯æ¥æ“ä½œå¡«è¡¥æ•°ç»„ï¼Œå¯¼è‡´ä¸€äº›ä½æ•ˆç‡çš„è¡Œä¸ºå‡ºç°</strong>ï¼Œæ‰€ä»¥å…¶æä¾›äº†ä¸€ç§å¹¿æ’­æœºåˆ¶ï¼Œå…¶å®è´¨å°±æ˜¯ä¸€ç§å¤„ç†è§„åˆ™ï¼Œåœ¨ä¸å¯¹é½çš„ç»´åº¦ä¸Šï¼Œé•¿åº¦è¾ƒçŸ­çš„è‡ªåŠ¨åšå€¼å¤åˆ¶æ¥æ‰©å……é•¿åº¦ï¼Œä»è€Œä½¿å¾—ä¸¤ä¸ªTensoråœ¨è¯¥ç»´åº¦ä¸Šä¸€è‡´ã€‚</p>
<h3 id="å¹¿æ’­æœºåˆ¶èµ·æ•ˆçš„æƒ…å†µ">3ã€å¹¿æ’­æœºåˆ¶èµ·æ•ˆçš„æƒ…å†µ</h3>
<p>â€‹
ä½†æ˜¯ï¼Œå®é™…ä¸Šï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ä¸åŒç»´åº¦çš„Tensorç›¸ä¹˜æ—¶ï¼Œéƒ½ä¼šè§¦å‘å¹¿æ’­æœºåˆ¶ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = torch.rand(<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">b = torch.rand(<span class="number">3</span>,<span class="number">1</span>)</span><br><span class="line">c = a * b</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">	RuntimeError: The size of tensor a (2) must match the size of tensor b (3) at non-singleton dimension 0</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<p>â€‹ é‚£ä¹ˆï¼Œå¹¿æ’­æœºåˆ¶åœ¨ä½•æ—¶æ‰ä¼šèµ·æ•ˆå‘¢ï¼Ÿå…¶åªå¯¹å¦‚ä¸‹æƒ…å†µèµ·ä½œç”¨ï¼š</p>
<p>â€‹
<strong>ä¸¤ä¸ªTensorï¼Œå®ƒä»¬å¦‚æœåœ¨æŸä¸€ä¸ªç»´åº¦ä¸Šé•¿åº¦ä¸åŒçš„è¯ï¼Œå¿…å®šæœ‰ä¸€ä¸ªTensoråœ¨è¿™ä¸ªç»´åº¦ä¸Šçš„é•¿åº¦ä¸º1ï¼Œå¹¿æ’­æœºåˆ¶æ‰ä¼šèµ·æ•ˆã€‚å³
1 vs M çš„æƒ…å†µ</strong></p>
<p>â€‹
<strong>å…·ä½“è®¡ç®—è§„åˆ™ï¼š</strong>é•¿åº¦ä¸º1çš„Tensoråœ¨ç»´åº¦ä¸Šä¼šå¤åˆ¶è¯¥å…ƒç´ å¹¶æ‰©å……è‡³é•¿åº¦ä¸ºMï¼Œå½“è¿™ä¸ªç»´åº¦å®Œæˆå¯¹é½ï¼Œæ¥ç€é‡å¤æ£€æŸ¥ä¸Šä¸€å±‚ç»´åº¦ï¼Œå¦‚æ­¤åå¤ï¼Œç›´è‡³æ‰€æœ‰ç»´åº¦éƒ½æ£€æŸ¥å®Œã€‚</p>
<p>â€‹ <strong>ç¤ºä¾‹</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">a = torch.rand(<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>)</span><br><span class="line">b = torch.rand(<span class="number">3</span>,<span class="number">5</span>,<span class="number">1</span>)</span><br><span class="line">c = a * b</span><br><span class="line"><span class="built_in">print</span>(c.shape)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">	torch.Size([3, 5, 3])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<p>â€‹ <strong>ç¤ºæ„å›¾</strong>ï¼š</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/20200308204131296.png"
alt="20200308204131296" />
<figcaption aria-hidden="true">20200308204131296</figcaption>
</figure>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>PythonåŸºç¡€æ‰©å……ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
        <tag>Auto BroadCasting</tag>
      </tags>
  </entry>
  <entry>
    <title>BFSç³»åˆ—â€”â€”å•è¯æ¼”å˜(å›°éš¾)</title>
    <url>/2022/02/24/64f7eff00abc/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-108.-å•è¯æ¼”å˜"><a
href="https://leetcode-cn.com/problems/om3reC/">å‰‘æŒ‡ Offer II 108.
å•è¯æ¼”å˜</a></h4>
<p>åœ¨å­—å…¸ï¼ˆå•è¯åˆ—è¡¨ï¼‰ wordList ä¸­ï¼Œä»å•è¯ beginWord å’Œ endWord çš„
è½¬æ¢åºåˆ— æ˜¯ä¸€ä¸ªæŒ‰ä¸‹è¿°è§„æ ¼å½¢æˆçš„åºåˆ—ï¼š</p>
<pre><code>åºåˆ—ä¸­ç¬¬ä¸€ä¸ªå•è¯æ˜¯ beginWord ã€‚
åºåˆ—ä¸­æœ€åä¸€ä¸ªå•è¯æ˜¯ endWord ã€‚
æ¯æ¬¡è½¬æ¢åªèƒ½æ”¹å˜ä¸€ä¸ªå­—æ¯ã€‚
è½¬æ¢è¿‡ç¨‹ä¸­çš„ä¸­é—´å•è¯å¿…é¡»æ˜¯å­—å…¸ wordList ä¸­çš„å•è¯ã€‚</code></pre>
<p>â€‹ ç»™å®šä¸¤ä¸ªé•¿åº¦ç›¸åŒä½†å†…å®¹ä¸åŒçš„å•è¯ beginWord å’Œ endWord å’Œä¸€ä¸ªå­—å…¸
wordList ï¼Œæ‰¾åˆ°ä» beginWord åˆ° endWord çš„ æœ€çŸ­è½¬æ¢åºåˆ— ä¸­çš„ å•è¯æ•°ç›®
ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„è½¬æ¢åºåˆ—ï¼Œè¿”å› 0ã€‚</p>
<p>ç¤ºä¾‹ 1ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šbeginWord = &quot;hit&quot;, endWord = &quot;cog&quot;, wordList = [&quot;hot&quot;,&quot;dot&quot;,&quot;dog&quot;,&quot;lot&quot;,&quot;log&quot;,&quot;cog&quot;]</span><br><span class="line">è¾“å‡ºï¼š5</span><br><span class="line">è§£é‡Šï¼šä¸€ä¸ªæœ€çŸ­è½¬æ¢åºåˆ—æ˜¯ &quot;hit&quot; -&gt; &quot;hot&quot; -&gt; &quot;dot&quot; -&gt; &quot;dog&quot; -&gt; &quot;cog&quot;, è¿”å›å®ƒçš„é•¿åº¦ 5ã€‚</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ 2ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šbeginWord = &quot;hit&quot;, endWord = &quot;cog&quot;, wordList = [&quot;hot&quot;,&quot;dot&quot;,&quot;dog&quot;,&quot;lot&quot;,&quot;log&quot;]</span><br><span class="line">è¾“å‡ºï¼š0</span><br><span class="line">è§£é‡Šï¼šendWord &quot;cog&quot; ä¸åœ¨å­—å…¸ä¸­ï¼Œæ‰€ä»¥æ— æ³•è¿›è¡Œè½¬æ¢ã€‚</span><br></pre></td></tr></table></figure>
<p>æç¤ºï¼š</p>
<pre><code>1 &lt;= beginWord.length &lt;= 10
endWord.length == beginWord.length
1 &lt;= wordList.length &lt;= 5000
wordList[i].length == beginWord.length
beginWordã€endWord å’Œ wordList[i] ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
beginWord != endWord
wordList ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸² äº’ä¸ç›¸åŒ</code></pre>
<p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰ é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/om3reC
è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<h5 id="è§£é¢˜æ€è·¯"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>â€‹
é¢˜ç›®æœ¬èº«è¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ï¼Œæœ€å¼€å§‹çš„æ€è·¯ä¹Ÿæ¯”è¾ƒå¥½æƒ³ï¼Œå°±æ˜¯å°†ä¸€ä¸ªä¸ªå•è¯èµ‹äºˆIDï¼ˆä½¿ç”¨Hashè¡¨ï¼‰ï¼Œç„¶åæ ¹æ®é‚»å±…å…³ç³»å»ºå›¾ï¼Œåœ¨çŸ¥é“èµ·ç‚¹ä¸ç»ˆç‚¹çš„æƒ…å†µä¸‹è¿›è¡ŒBFSå³å¯ã€‚å€¼å¾—æ³¨æ„çš„ç‚¹æ˜¯ï¼šè¯¥é¢˜ç›®ä½œä¸ºä¸€é“å›°éš¾çš„é¢˜ç›®ï¼Œæ—¶é—´é™åˆ¶å¡çš„è¿˜æ˜¯æ¯”è¾ƒç´§çš„ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸Šè¿°è¿‡ç¨‹ä¸­å¯èƒ½è€—è´¹æ—¶é—´æ¯”è¾ƒé•¿çš„æ­¥éª¤ï¼š</p>
<ul>
<li>1ã€åœ¨å»ºç«‹å›¾çš„æ—¶å€™ï¼Œè¦åˆ¤æ–­å•è¯ä¸å•è¯ä¹‹é—´æ˜¯ä¸æ˜¯é‚»å±…ï¼Œå°±éœ€è¦æ¯”è¾ƒæ¯ä¸ªå•è¯å’Œæ¯ä¸ªå•è¯æ˜¯å¦åªç›¸å·®ä¸€ä¸ªå­—æ¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n^2
* C) , nä¸ºå•è¯æ•°é‡ï¼ŒCä¸ºå•è¯é•¿åº¦ã€‚</li>
<li>2ã€åœ¨BFSæœç´¢çš„æ—¶å€™ï¼Œç”±äºwordListé•¿åº¦ä¸Šé™ä¸º5000ï¼Œæ•´ä½“æ¥è¯´è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ä¸€ä¸ªå›¾ï¼Œéœ€è¦è€—è´¹ä¸€å®šçš„æ—¶é—´ã€‚</li>
</ul>
<p>â€‹
é’ˆå¯¹ä¸Šè¿°ä¸¤ä¸ªç‚¹ï¼Œéƒ½æœ‰å¯¹åº”å¾—ä¼˜åŒ–ç®—æ³•ï¼Œæ¯”è¾ƒç»å…¸çš„å°±æ˜¯ç”¨äºæ›¿ä»£å•å‘BFSçš„<strong>åŒå‘BFS</strong>ï¼Œå¯ä»¥å¤§å¤§ç¼©çŸ­BFSçš„æœå¯»æ—¶é—´ã€‚<strong>æˆ‘æœ€å¼€å§‹å°±æ˜¯åšäº†åŒå‘BFSçš„ä¼˜åŒ–ï¼Œä½†æ˜¯è¿˜æ˜¯è¶…æ—¶äº†ã€‚è¶…æ—¶ä»£ç å¦‚ä¸‹ï¼š</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    unordered_map&lt;string,<span class="type">int</span>&gt; str2int;</span><br><span class="line">    unordered_map&lt;<span class="type">int</span>,string&gt; int2str;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">transform</span><span class="params">(string str)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(str2int.<span class="built_in">find</span>(str) == str2int.<span class="built_in">end</span>())&#123;</span><br><span class="line">            str2int[str] = str2int.<span class="built_in">size</span>();</span><br><span class="line">            int2str[str2int.<span class="built_in">size</span>()<span class="number">-1</span>] = str;</span><br><span class="line">            <span class="keyword">return</span> str2int.<span class="built_in">size</span>()<span class="number">-1</span>;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">return</span> str2int[str];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isNeighbor</span><span class="params">(<span class="type">int</span> idx1,<span class="type">int</span> idx2)</span></span>&#123;</span><br><span class="line">        string str1 = int2str[idx1];</span><br><span class="line">        string str2 = int2str[idx2];</span><br><span class="line">        <span class="keyword">if</span>(str1.<span class="built_in">length</span>() != str2.<span class="built_in">length</span>()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;str1.<span class="built_in">length</span>();i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(str1[i] != str2[i]) count++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(count != <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">ladderLength</span><span class="params">(string beginWord, string endWord, vector&lt;string&gt;&amp; wordList)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> begin = <span class="built_in">transform</span>(beginWord);</span><br><span class="line">        <span class="type">int</span> end = <span class="built_in">transform</span>(endWord);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;wordList.<span class="built_in">size</span>();i++) <span class="built_in">transform</span>(wordList[i]);</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">graph</span>(str2int.<span class="built_in">size</span>());</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">isNeighbor</span>(begin,end))&#123;</span><br><span class="line">            graph[begin].<span class="built_in">push_back</span>(end);</span><br><span class="line">            graph[end].<span class="built_in">push_back</span>(begin);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ„å»ºå›¾</span></span><br><span class="line">        <span class="type">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;wordList.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="comment">//å¯¹äºæ¯ä¸ªwordå‡åˆ¤æ–­å…¶å’Œbegin æˆ–æ˜¯ endæ˜¯ä¸æ˜¯é‚»å±…ï¼Œä»¥åŠåˆ¤æ–­å…¶å’Œå‰é¢çš„wordListä¸­çš„wordæ˜¯ä¸æ˜¯é‚»å±…</span></span><br><span class="line">            <span class="type">int</span> wordIdx = <span class="built_in">transform</span>(wordList[i]);</span><br><span class="line">            <span class="keyword">if</span>(wordIdx == end) flag = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span>(wordIdx == begin || wordIdx == end) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">isNeighbor</span>(begin,wordIdx))&#123;</span><br><span class="line">                graph[begin].<span class="built_in">push_back</span>(wordIdx);</span><br><span class="line">                graph[wordIdx].<span class="built_in">push_back</span>(begin);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">isNeighbor</span>(end,wordIdx))&#123;</span><br><span class="line">                graph[end].<span class="built_in">push_back</span>(wordIdx);</span><br><span class="line">                graph[wordIdx].<span class="built_in">push_back</span>(end);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;i;j++)&#123;</span><br><span class="line">                <span class="type">int</span> wordIdx2 = <span class="built_in">transform</span>(wordList[j]);</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">isNeighbor</span>(wordIdx2,wordIdx))&#123;</span><br><span class="line">                    graph[wordIdx2].<span class="built_in">push_back</span>(wordIdx);</span><br><span class="line">                    graph[wordIdx].<span class="built_in">push_back</span>(wordIdx2);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!flag) <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">//å¦‚æœç»ˆç‚¹ä¸åœ¨åˆ—è¡¨ä¸­ï¼Œåˆ™ç›´æ¥è¿”å›0</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¾“å‡ºå›¾ä»£ç ï¼Œè¯æ˜å›¾æ„å»ºæ­£ç¡®</span></span><br><span class="line">        <span class="comment">// for(int i=0;i&lt;graph.size();i++)&#123;</span></span><br><span class="line">        <span class="comment">//     cout &lt;&lt; i &lt;&lt; &quot; :&quot;;</span></span><br><span class="line">        <span class="comment">//     for(int j=0;j&lt;graph[i].size();j++)&#123;</span></span><br><span class="line">        <span class="comment">//         cout &lt;&lt; graph[i][j] &lt;&lt; &quot; &quot;;</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">//     cout &lt;&lt; endl;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åŒå‘BFS</span></span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">vis</span><span class="params">(str2int.size())</span></span>;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">res</span><span class="params">(str2int.size())</span></span>;</span><br><span class="line">        queue&lt;<span class="type">int</span>&gt; q1; <span class="comment">//æ­£å‘é˜Ÿåˆ—</span></span><br><span class="line">        queue&lt;<span class="type">int</span>&gt; q2; <span class="comment">//é€†å‘é˜Ÿåˆ—</span></span><br><span class="line">        q1.<span class="built_in">push</span>(begin);</span><br><span class="line">        q2.<span class="built_in">push</span>(end);</span><br><span class="line">        res[begin] = <span class="number">0</span>;</span><br><span class="line">        res[end] = <span class="number">0</span>;</span><br><span class="line">        vis[begin] = <span class="number">1</span>;</span><br><span class="line">        vis[end] = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span>(!q1.<span class="built_in">empty</span>() &amp;&amp; !q2.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            <span class="type">int</span> idx;</span><br><span class="line">            <span class="type">bool</span> flag;</span><br><span class="line">            <span class="keyword">if</span>(q1.<span class="built_in">size</span>() &lt; q2.<span class="built_in">size</span>())&#123;  <span class="comment">// æ­£å‘BFS</span></span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">                idx = q1.<span class="built_in">front</span>();</span><br><span class="line">                q1.<span class="built_in">pop</span>();</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                flag = <span class="literal">false</span>;</span><br><span class="line">                idx = q2.<span class="built_in">front</span>();</span><br><span class="line">                q2.<span class="built_in">pop</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;graph[idx].<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">                <span class="comment">//å…¥é˜Ÿ</span></span><br><span class="line">                <span class="keyword">if</span>(vis[graph[idx][i]] == <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="comment">//æ²¡è®¿é—®è¿‡</span></span><br><span class="line">                    <span class="keyword">if</span>(flag) q1.<span class="built_in">push</span>(graph[idx][i]);</span><br><span class="line">                    <span class="keyword">else</span> q2.<span class="built_in">push</span>(graph[idx][i]);</span><br><span class="line">                    res[graph[idx][i]] = res[idx] + <span class="number">1</span>;</span><br><span class="line">                    vis[graph[idx][i]] = vis[idx];</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(vis[graph[idx][i]]  + vis[idx] == <span class="number">3</span>)&#123;</span><br><span class="line">                        <span class="comment">//å¦‚æœcurrç‚¹å’Œé¢†å±…ç‚¹çš„vstç›¸åŠ =3ï¼Œæ„å‘³ç€ä¸¤è€…ä¸€ä¸ªæ˜¯æ­£å‘æœç´¢åºåˆ—ï¼Œä¸€ä¸ªæ˜¯é€†å‘æœç´¢åºåˆ—ï¼Œç›¸é‡äº†ï¼Œæ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬å¯ä»¥è¿”å›ç»“æœï¼Œä¸ç”¨ç»§ç»­ä¸‹å»äº†</span></span><br><span class="line">                        <span class="keyword">return</span> res[idx] + res[graph[idx][i]] + <span class="number">1</span> + <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">               </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>â€‹
é’ˆå¯¹äºå¦å¤–ä¸€ä¸ªå¯ä¼˜åŒ–çš„ç‚¹ï¼Œå…¶å®å…ˆå‰åšå®¢ä¸­ä¹Ÿè®°å½•è¿‡ï¼Œé’ˆå¯¹äºè¿™ç§ä»…å·®ä¸€ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²ç›¸ä¼¼çš„æƒ…å†µï¼Œæˆ‘ä»¬å«åšâ€œå­—ç¬¦ä¸²çš„å¹¿ä¹‰é‚»å±…â€ï¼Œåœ¨è¯¥æ–‡ç« ä¸­æåŠè¿‡ï¼š<a
href="https://blog.fantast.top/2022/02/08/4ccc50ba5a4e">å¥‡å¦™åº”ç”¨â€”å­—ç¬¦ä¸²çš„å¹¿ä¹‰é‚»å±…</a></p>
<p>â€‹
åœ¨å»ºå›¾é˜¶æ®µï¼Œä¾æ®æœ´ç´ çš„æ€è·¯ï¼Œå°±æ˜¯åƒä¸Šé¢çš„ä»£ç ä¸€æ ·æšä¸¾æ¯ä¸€å¯¹å•è¯çš„ç»„åˆï¼Œåˆ¤æ–­å®ƒä»¬æ˜¯å¦æ°å¥½ç›¸å·®ä¸€ä¸ªå­—ç¬¦ï¼Œä»¥åˆ¤æ–­è¿™ä¸¤ä¸ªå•è¯å¯¹åº”çš„èŠ‚ç‚¹æ˜¯å¦èƒ½å¤Ÿç›¸è¿ã€‚ä½†æ˜¯è¿™æ ·æ•ˆç‡å¤ªä½ï¼Œæˆ‘ä»¬å¯ä»¥<strong>ä¼˜åŒ–å»ºå›¾</strong>ã€‚</p>
<p>â€‹ <strong>å…·ä½“åœ°ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹ã€‚å¯¹äºå•è¯
hitï¼Œæˆ‘ä»¬åˆ›å»ºä¸‰ä¸ªè™šæ‹ŸèŠ‚ç‚¹<code>*itã€h*tã€hi*</code>ï¼Œå¹¶è®© hit
å‘è¿™ä¸‰ä¸ªè™šæ‹ŸèŠ‚ç‚¹åˆ†åˆ«è¿ä¸€æ¡è¾¹å³å¯ã€‚å¦‚æœä¸€ä¸ªå•è¯èƒ½å¤Ÿè½¬åŒ–ä¸º
hitï¼Œé‚£ä¹ˆè¯¥å•è¯å¿…ç„¶ä¼šè¿æ¥åˆ°è¿™ä¸‰ä¸ªè™šæ‹ŸèŠ‚ç‚¹ä¹‹ä¸€ã€‚å¯¹äºæ¯ä¸€ä¸ªå•è¯ï¼Œæˆ‘ä»¬æšä¸¾å®ƒè¿æ¥åˆ°çš„è™šæ‹ŸèŠ‚ç‚¹ï¼ŒæŠŠè¯¥å•è¯å¯¹åº”çš„
id ä¸è¿™äº›è™šæ‹ŸèŠ‚ç‚¹å¯¹åº”çš„ id ç›¸è¿å³å¯ã€‚</strong></p>
<h5 id="è§£é¢˜ä»£ç "><strong>è§£é¢˜ä»£ç </strong>ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    unordered_map&lt;string,<span class="type">int</span>&gt; str2int;</span><br><span class="line">    unordered_map&lt;<span class="type">int</span>,string&gt; int2str;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">transform</span><span class="params">(string str)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(str2int.<span class="built_in">find</span>(str) == str2int.<span class="built_in">end</span>())&#123;</span><br><span class="line">            str2int[str] = str2int.<span class="built_in">size</span>();</span><br><span class="line">            int2str[str2int.<span class="built_in">size</span>()<span class="number">-1</span>] = str;</span><br><span class="line">            <span class="keyword">return</span> str2int.<span class="built_in">size</span>()<span class="number">-1</span>;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">return</span> str2int[str];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">constructNode</span><span class="params">(<span class="type">int</span> wordIdx, vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; &amp;graph)</span></span>&#123;</span><br><span class="line">        <span class="comment">//æ„å»ºå­—ç¬¦ä¸²wordçš„å¹¿ä¹‰é‚»å±…ï¼ˆè™šæ‹ŸèŠ‚ç‚¹ï¼‰ï¼Œè®©å…¶å’Œè‡ªå·±çš„çœŸå®èŠ‚ç‚¹ç›¸è¿</span></span><br><span class="line">        <span class="comment">//ä¾‹å¦‚ word = dog ï¼Œé‚£ä¹ˆæ„å»ºå¹¿ä¹‰é‚»å±…èŠ‚ç‚¹ *og,d*g,do*,è®©è¿™ä¸‰ä¸ªèŠ‚ç‚¹å’Œ dogèŠ‚ç‚¹ç›¸è¿</span></span><br><span class="line">        string word = int2str[wordIdx];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;word.<span class="built_in">length</span>();j++)&#123;</span><br><span class="line">            <span class="comment">//å°†æ¯ä¸€ä½å˜æˆ*ï¼Œå½¢æˆè™šæ‹ŸèŠ‚ç‚¹,å’Œå½“å‰èŠ‚ç‚¹è¿æ¥</span></span><br><span class="line">            string tmp = word;</span><br><span class="line">            tmp[j] = <span class="string">&#x27;*&#x27;</span>;</span><br><span class="line">            <span class="type">int</span> tmpIdx = <span class="built_in">transform</span>(tmp);</span><br><span class="line">            graph[tmpIdx].<span class="built_in">push_back</span>(wordIdx);</span><br><span class="line">            graph[wordIdx].<span class="built_in">push_back</span>(tmpIdx);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">ladderLength</span><span class="params">(string beginWord, string endWord, vector&lt;string&gt;&amp; wordList)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å…ˆå°†æ‰€æœ‰çš„åŸå§‹å­—ç¬¦ä¸²åŠ å…¥Hashè¡¨ä¸­</span></span><br><span class="line">        <span class="type">int</span> begin = <span class="built_in">transform</span>(beginWord);</span><br><span class="line">        <span class="type">int</span> end = <span class="built_in">transform</span>(endWord);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;wordList.<span class="built_in">size</span>();i++) <span class="built_in">transform</span>(wordList[i]);</span><br><span class="line">        <span class="comment">// æŒ‰ç…§æœ€åæƒ…å†µåˆ†é…ç©ºé—´</span></span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">graph</span>(str2int.<span class="built_in">size</span>() * (wordList[<span class="number">0</span>].<span class="built_in">length</span>() + <span class="number">1</span>));   </span><br><span class="line">        <span class="comment">// æ„å»ºå›¾ï¼Œå¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ„å»ºå…¶çš„å¹¿ä¹‰é‚»å±…ä»¥åŠè‡ªå·±çš„èŠ‚ç‚¹è¿æ¥å…³ç³»</span></span><br><span class="line">        <span class="type">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">constructNode</span>(begin,graph);</span><br><span class="line">        <span class="built_in">constructNode</span>(end,graph);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;wordList.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="type">int</span> wordIdx = <span class="built_in">transform</span>(wordList[i]); </span><br><span class="line">            <span class="keyword">if</span>(wordIdx == end) flag = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span>(wordIdx == begin || wordIdx == end) <span class="keyword">continue</span>;  <span class="comment">//å¦‚æœæ˜¯beginWordæˆ–endWordå°±ä¸éœ€è¦å¤„ç†äº†ï¼Œå·²ç»å¤„ç†è¿‡</span></span><br><span class="line">            <span class="built_in">constructNode</span>(wordIdx,graph);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!flag) <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">//å¦‚æœç»ˆç‚¹ä¸åœ¨åˆ—è¡¨ä¸­ï¼Œåˆ™ç›´æ¥è¿”å›0</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¾“å‡ºå›¾ä»£ç ï¼Œè¯æ˜å›¾æ„å»ºæ­£ç¡®</span></span><br><span class="line">        <span class="comment">// for(int i=0;i&lt;str2int.size();i++)&#123;</span></span><br><span class="line">        <span class="comment">//     cout &lt;&lt; i &lt;&lt; &quot;-&quot; &lt;&lt; int2str[i] &lt;&lt; &quot; :&quot;;</span></span><br><span class="line">        <span class="comment">//     for(int j=0;j&lt;graph[i].size();j++)&#123;</span></span><br><span class="line">        <span class="comment">//         cout &lt;&lt; graph[i][j] &lt;&lt; &quot; &quot;;</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">//     cout &lt;&lt; endl;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åŒå‘BFS</span></span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">vis</span><span class="params">(str2int.size())</span></span>;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">res</span><span class="params">(str2int.size())</span></span>;</span><br><span class="line">        queue&lt;<span class="type">int</span>&gt; q1; <span class="comment">//æ­£å‘é˜Ÿåˆ—</span></span><br><span class="line">        queue&lt;<span class="type">int</span>&gt; q2; <span class="comment">//é€†å‘é˜Ÿåˆ—</span></span><br><span class="line">        q1.<span class="built_in">push</span>(begin);</span><br><span class="line">        q2.<span class="built_in">push</span>(end);</span><br><span class="line">        res[begin] = <span class="number">0</span>;</span><br><span class="line">        res[end] = <span class="number">0</span>;</span><br><span class="line">        vis[begin] = <span class="number">1</span>;</span><br><span class="line">        vis[end] = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span>(!q1.<span class="built_in">empty</span>() &amp;&amp; !q2.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            <span class="type">int</span> idx;</span><br><span class="line">            <span class="type">bool</span> flag;</span><br><span class="line">            <span class="keyword">if</span>(q1.<span class="built_in">size</span>() &lt; q2.<span class="built_in">size</span>())&#123;  <span class="comment">// æ­£å‘BFS</span></span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">                idx = q1.<span class="built_in">front</span>();</span><br><span class="line">                q1.<span class="built_in">pop</span>();</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                flag = <span class="literal">false</span>;</span><br><span class="line">                idx = q2.<span class="built_in">front</span>();</span><br><span class="line">                q2.<span class="built_in">pop</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;graph[idx].<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">                <span class="comment">//å…¥é˜Ÿ</span></span><br><span class="line">                <span class="keyword">if</span>(vis[graph[idx][i]] == <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="comment">//æ²¡è®¿é—®è¿‡</span></span><br><span class="line">                    <span class="keyword">if</span>(flag) q1.<span class="built_in">push</span>(graph[idx][i]);</span><br><span class="line">                    <span class="keyword">else</span> q2.<span class="built_in">push</span>(graph[idx][i]);</span><br><span class="line">                    res[graph[idx][i]] = res[idx] + <span class="number">1</span>;</span><br><span class="line">                    vis[graph[idx][i]] = vis[idx];</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(vis[graph[idx][i]]  + vis[idx] == <span class="number">3</span>)&#123;</span><br><span class="line">                        <span class="comment">//å¦‚æœcurrç‚¹å’Œé¢†å±…ç‚¹çš„vstç›¸åŠ =3ï¼Œæ„å‘³ç€ä¸¤è€…ä¸€ä¸ªæ˜¯æ­£å‘æœç´¢åºåˆ—ï¼Œä¸€ä¸ªæ˜¯é€†å‘æœç´¢åºåˆ—ï¼Œç›¸é‡äº†ï¼Œæ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬å¯ä»¥è¿”å›ç»“æœï¼Œä¸ç”¨ç»§ç»­ä¸‹å»äº†</span></span><br><span class="line">                        <span class="built_in">return</span> (res[idx] + res[graph[idx][i]] + <span class="number">1</span>) / <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">               </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>DFSä¸BFSç³»åˆ—</category>
        <category>å­—ç¬¦ä¸²ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>BFS</tag>
      </tags>
  </entry>
  <entry>
    <title>DFSç³»åˆ—â€”â€”DFSå¤šç§å½¢å¼å˜ä½“æ•´ç†</title>
    <url>/2022/02/26/3e00524469fb/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-080.-å«æœ‰-k-ä¸ªå…ƒç´ çš„ç»„åˆ"><a
href="https://leetcode-cn.com/problems/uUsW3B/">å‰‘æŒ‡ Offer II 080. å«æœ‰
k ä¸ªå…ƒç´ çš„ç»„åˆ</a></h4>
<p>â€‹ ç»™å®šä¸¤ä¸ªæ•´æ•° <code>n</code> å’Œ <code>k</code>ï¼Œè¿”å›
<code>1 ... n</code> ä¸­æ‰€æœ‰å¯èƒ½çš„ <code>k</code> ä¸ªæ•°çš„ç»„åˆã€‚</p>
<p>ç¤ºä¾‹ 1:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: n = 4, k = 2</span><br><span class="line">è¾“å‡º:</span><br><span class="line">[</span><br><span class="line">  [2,4],</span><br><span class="line">  [3,4],</span><br><span class="line">  [2,3],</span><br><span class="line">  [1,2],</span><br><span class="line">  [1,3],</span><br><span class="line">  [1,4],</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯ï¼š</h5>
<p>â€‹ è¯¥é¢˜æ˜¯æœ€ç»å…¸çš„æ— é™åˆ¶çš„DFSï¼Œæ³¨æ„å‰ªææ¥é™ä½æ•´ä½“çš„æ—¶é—´å¤æ‚åº¦ã€‚</p>
<h5 id="è§£é¢˜ä»£ç ">è§£é¢˜ä»£ç ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; res;</span><br><span class="line">    <span class="type">int</span> k;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">combine</span>(<span class="type">int</span> n, <span class="type">int</span> k) &#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; tmp;</span><br><span class="line">        <span class="keyword">this</span>-&gt;k = k;</span><br><span class="line">        <span class="keyword">this</span>-&gt;n = n;</span><br><span class="line">        <span class="built_in">permute</span>(tmp,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">permute</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;tmp,<span class="type">int</span> curr,<span class="type">int</span> count)</span></span>&#123;</span><br><span class="line">        <span class="comment">//currä»£è¡¨å½“å‰ è½®åˆ°çš„æ•°å­—</span></span><br><span class="line">        <span class="comment">//countä»£è¡¨å½“å‰å·²ç» æ”¾å…¥é›†åˆä¸­çš„æ•°å­—ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">if</span>(count &gt; k) <span class="keyword">return</span>; <span class="comment">//å‰ªæ</span></span><br><span class="line">        <span class="keyword">if</span>(curr == n+<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(count == k)&#123;</span><br><span class="line">                <span class="comment">//è¿™è½®å®Œç»“äº†ï¼Œå°†tmpæ·»åŠ è¿›å…¥currä¸­</span></span><br><span class="line">                res.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//éå†ä¸¤ç§æƒ…å†µ ï¼š è¦ä¸è¦è¿™ä¸ªæ•°å­—</span></span><br><span class="line">        <span class="comment">//Case1: è¦è¿™ä¸ªæ•°å­—</span></span><br><span class="line">        tmp.<span class="built_in">push_back</span>(curr);</span><br><span class="line">        <span class="built_in">permute</span>(tmp,curr+<span class="number">1</span>,count+<span class="number">1</span>);</span><br><span class="line">        tmp.<span class="built_in">pop_back</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Case2: ä¸è¦è¿™ä¸ªæ•°å­—</span></span><br><span class="line">        <span class="built_in">permute</span>(tmp,curr+<span class="number">1</span>,count);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="å‰‘æŒ‡-offer-ii-081.-å…è®¸é‡å¤é€‰æ‹©å…ƒç´ çš„ç»„åˆ"><a
href="https://leetcode-cn.com/problems/Ygoe9J/">å‰‘æŒ‡ Offer II 081.
å…è®¸é‡å¤é€‰æ‹©å…ƒç´ çš„ç»„åˆ</a></h4>
<p>â€‹ ç»™å®šä¸€ä¸ªæ— é‡å¤å…ƒç´ çš„æ­£æ•´æ•°æ•°ç»„ candidates å’Œä¸€ä¸ªæ­£æ•´æ•° target ï¼Œæ‰¾å‡º
candidates ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸ºç›®æ ‡æ•° target çš„å”¯ä¸€ç»„åˆã€‚</p>
<p>â€‹ candidates
ä¸­çš„æ•°å­—å¯ä»¥æ— é™åˆ¶é‡å¤è¢«é€‰å–ã€‚å¦‚æœè‡³å°‘ä¸€ä¸ªæ‰€é€‰æ•°å­—æ•°é‡ä¸åŒï¼Œåˆ™ä¸¤ç§ç»„åˆæ˜¯ä¸åŒçš„ã€‚</p>
<p>â€‹ å¯¹äºç»™å®šçš„è¾“å…¥ï¼Œä¿è¯å’Œä¸º target çš„å”¯ä¸€ç»„åˆæ•°å°‘äº 150 ä¸ªã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: candidates = [2,3,6,7], target = 7</span><br><span class="line">è¾“å‡º: [[7],[2,2,3]]</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯-1">è§£é¢˜æ€è·¯ï¼š</h5>
<p>â€‹
ç›¸æ¯”äºä¸Šä¸€é¢˜è€Œè¨€ï¼Œè¯¥é¢˜å…è®¸é‡å¤é€‰æ‹©å…ƒç´ ï¼Œå¤§è‡´æ¡†æ¶ç±»ä¼¼ï¼Œä½†æ˜¯åœ¨DFSçš„è¿‡ç¨‹ä¸­ï¼Œåˆ†æ”¯çš„é€‰é¡¹éœ€è¦æ”¹å˜ï¼ŒåŒæ ·ä¹Ÿæ˜¯é€‰æ‹©å½“å‰å…ƒç´ å’Œä¸é€‰æ‹©å½“å‰å…ƒç´ ä¸¤æ¡åˆ†æ”¯ï¼Œä¹‹å‰æ— è®ºé€‰ä¸é€‰å½“å‰å…ƒç´ ï¼Œä¸‹ä¸€è½®é€’å½’çš„æ—¶å€™éƒ½ä¼šå»åˆ¤æ–­ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œè€Œåœ¨æœ¬é¢˜ä¸­ï¼Œå¦‚æœé€‰æ‹©å½“å‰å…ƒç´ ï¼Œé‚£ä¹ˆä¸‹ä¸€è½®é€’å½’è¿˜åº”è¯¥æ˜¯æœ¬å…ƒç´ ã€‚</p>
<h5 id="è§£é¢˜ä»£ç -1">è§£é¢˜ä»£ç ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; res;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">combinationSum</span>(vector&lt;<span class="type">int</span>&gt;&amp; candidates, <span class="type">int</span> target) &#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; tmp;</span><br><span class="line">        <span class="built_in">permute</span>(candidates,target,tmp,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">permute</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; candidates,<span class="type">int</span> target,vector&lt;<span class="type">int</span>&gt; &amp;tmp,<span class="type">int</span> sum,<span class="type">int</span> curr)</span></span>&#123;</span><br><span class="line">        <span class="comment">//å½“å‰vectorï¼Œå½“å‰sum</span></span><br><span class="line">        <span class="keyword">if</span>(curr &gt;= candidates.<span class="built_in">size</span>()) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span>(sum == target)&#123;</span><br><span class="line">            res.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//Case1: ä¸é€‰æ‹©å½“å‰å…ƒç´ ï¼š</span></span><br><span class="line">        <span class="built_in">permute</span>(candidates,target,tmp,sum,curr+<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Case2: é€‰æ‹©å½“å‰å…ƒç´ ï¼š</span></span><br><span class="line">        <span class="keyword">if</span>(sum + candidates[curr] &gt; target) <span class="keyword">return</span>;</span><br><span class="line">        tmp.<span class="built_in">push_back</span>(candidates[curr]);</span><br><span class="line">        <span class="built_in">permute</span>(candidates,target,tmp,sum + candidates[curr],curr);</span><br><span class="line">        tmp.<span class="built_in">pop_back</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="å‰‘æŒ‡-offer-ii-082.-å«æœ‰é‡å¤å…ƒç´ é›†åˆçš„ç»„åˆ"><a
href="https://leetcode-cn.com/problems/4sjJUc/">å‰‘æŒ‡ Offer II 082.
å«æœ‰é‡å¤å…ƒç´ é›†åˆçš„ç»„åˆ</a></h4>
<p>â€‹ ç»™å®šä¸€ä¸ªå¯èƒ½æœ‰é‡å¤æ•°å­—çš„æ•´æ•°æ•°ç»„ candidates å’Œä¸€ä¸ªç›®æ ‡æ•° target
ï¼Œæ‰¾å‡º candidates ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸º target çš„ç»„åˆã€‚</p>
<p>â€‹ candidates
ä¸­çš„æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œè§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚</p>
<p>ç¤ºä¾‹ 1:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: candidates = [10,1,2,7,6,1,5], target = 8,</span><br><span class="line">è¾“å‡º:</span><br><span class="line">[</span><br><span class="line">    [1,1,6],</span><br><span class="line">    [1,2,5],</span><br><span class="line">    [1,7],</span><br><span class="line">    [2,6]</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯-2">è§£é¢˜æ€è·¯ï¼š</h5>
<p>â€‹
æœ¬é¢˜è·Ÿä¸Šé¢˜ä¸ä¸€æ ·çš„ç‚¹åœ¨äºï¼šæœ¬é¢˜æ¯ä¸ªå…ƒç´ éƒ½åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œä½†æ˜¯å¯é€‰çš„å…ƒç´ æ•°ç»„ä¸­ä¼šå‡ºç°é‡å¤çš„å…ƒç´ ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€å¦‚æœæŒ‰ç…§æ­£å¸¸çš„DFSä¸‹æ¥ï¼Œæ˜¯ä¼šå‡ºç°é‡å¤çš„ç»„åˆçš„ã€‚æ­¤å¤„ï¼Œæˆ‘ä»¬æŒ‰ç…§å¦‚ä¸‹æ€æƒ³æ¥å¤„ç†ï¼š</p>
<p>â€‹ æˆ‘ä»¬å…ˆå°†å®ƒæä¾›çš„æ•´æ•°æ•°ç»„è¿›è¡Œæ’åºï¼Œä½¿å…¶æˆä¸ºæœ‰åºçš„æ•°ç»„ã€‚</p>
<p>â€‹ æ¯ä¸€è½®DFSçš„æ—¶å€™ï¼Œè®°å½•ä¸Šä¸€è½®æœ‰æ²¡æœ‰é€‰æ‹©å…ƒç´ </p>
<ul>
<li><p>å¦‚æœä¸Šä¸€è½®æ²¡æœ‰é€‰æ‹©å…ƒç´ ï¼Œå¹¶ä¸”å½“å‰å…ƒç´ å’Œä¸Šä¸€è½®å…ƒç´ ä¸€æ ·ï¼šé‚£ä¹ˆè¯¥è½®ä¹Ÿåªèƒ½é€‰æ‹©
â€œä¸é€‰æ‹©å½“å‰å…ƒç´ â€ï¼ŒåŸå› æ˜¯å¦‚æœä¸¤è½®å…ƒç´ ä¸€è‡´ï¼Œ"ä¸Šä¸€è½®æ²¡é€‰è¿™ä¸€è½®é€‰äº†"ï¼Œé‚£ä¹ˆåŠ¿å¿…ä¼šå’Œ
"ä¸Šä¸€è½®é€‰äº†ï¼Œè¿™ä¸€è½®ä¸é€‰"ï¼Œè¿™ç§æƒ…å†µäº§ç”Ÿé‡å¤ã€‚</p></li>
<li><p>å¦‚æœä¸Šä¸€è½®é€‰æ‹©äº†å…ƒç´ ï¼Œé‚£ä¹ˆè¯¥è½®å°±å¯ä»¥æ­£å¸¸æ“ä½œï¼šå¯ä»¥é€‰æ‹©å½“å‰å…ƒç´ ï¼Œä¹Ÿå¯ä»¥ä¸é€‰æ‹©å½“å‰å…ƒç´ ã€‚</p></li>
</ul>
<h5 id="è§£é¢˜ä»£ç -2">è§£é¢˜ä»£ç ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; res;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">combinationSum2</span>(vector&lt;<span class="type">int</span>&gt;&amp; candidates, <span class="type">int</span> target) &#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; tmp;</span><br><span class="line">        <span class="built_in">sort</span>(candidates.<span class="built_in">begin</span>(),candidates.<span class="built_in">end</span>());</span><br><span class="line">        <span class="built_in">permute</span>(candidates,target,tmp,<span class="number">0</span>,<span class="number">0</span>,<span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">permute</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; candidates,<span class="type">int</span> target,vector&lt;<span class="type">int</span>&gt; &amp;tmp,<span class="type">int</span> sum,<span class="type">int</span> curr,<span class="type">bool</span> choose)</span></span>&#123;</span><br><span class="line">        <span class="comment">//å½“å‰vectorï¼Œå½“å‰sum</span></span><br><span class="line">        <span class="keyword">if</span>(sum == target)&#123;</span><br><span class="line">            res.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(curr &gt;= candidates.<span class="built_in">size</span>()) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span>(curr &gt;= <span class="number">1</span> &amp;&amp; candidates[curr] == candidates[curr<span class="number">-1</span>] &amp;&amp; !choose)&#123;</span><br><span class="line">            <span class="comment">//Case1: ä¸é€‰æ‹©å½“å‰å…ƒç´ ï¼š</span></span><br><span class="line">            <span class="built_in">permute</span>(candidates,target,tmp,sum,curr+<span class="number">1</span>,<span class="literal">false</span>);  </span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//Case1: ä¸é€‰æ‹©å½“å‰å…ƒç´ ï¼š</span></span><br><span class="line">            <span class="built_in">permute</span>(candidates,target,tmp,sum,curr+<span class="number">1</span>,<span class="literal">false</span>);  </span><br><span class="line"></span><br><span class="line">            <span class="comment">// Case2: é€‰æ‹©å½“å‰å…ƒç´ ï¼š</span></span><br><span class="line">            <span class="keyword">if</span>(sum + candidates[curr] &gt; target) <span class="keyword">return</span>;</span><br><span class="line">            tmp.<span class="built_in">push_back</span>(candidates[curr]);</span><br><span class="line">            <span class="built_in">permute</span>(candidates,target,tmp,sum + candidates[curr],curr+<span class="number">1</span>,<span class="literal">true</span>);</span><br><span class="line">            tmp.<span class="built_in">pop_back</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="å‰‘æŒ‡-offer-ii-083.-æ²¡æœ‰é‡å¤å…ƒç´ é›†åˆçš„å…¨æ’åˆ—"><a
href="https://leetcode-cn.com/problems/VvJkup/">å‰‘æŒ‡ Offer II 083.
æ²¡æœ‰é‡å¤å…ƒç´ é›†åˆçš„å…¨æ’åˆ—</a></h4>
<p>ç»™å®šä¸€ä¸ªä¸å«é‡å¤æ•°å­—çš„æ•´æ•°æ•°ç»„ nums ï¼Œè¿”å›å…¶ æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ— ã€‚å¯ä»¥
æŒ‰ä»»æ„é¡ºåº è¿”å›ç­”æ¡ˆã€‚</p>
<p>ç¤ºä¾‹ 1ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [1,2,3]</span><br><span class="line">è¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]</span><br></pre></td></tr></table></figure>
<p>æç¤ºï¼š</p>
<pre><code>1 &lt;= nums.length &lt;= 6
-10 &lt;= nums[i] &lt;= 10
nums ä¸­çš„æ‰€æœ‰æ•´æ•° äº’ä¸ç›¸åŒ</code></pre>
<h5 id="è§£é¢˜æ€è·¯-3">è§£é¢˜æ€è·¯ï¼š</h5>
<p>â€‹
æœ¬é¢˜è·Ÿç›´æ¥æ±‚1-nè¿™nä¸ªæ•°çš„å…¨æ’åˆ—æ˜¯ä¸€æ ·çš„æ€æƒ³ï¼ŒåŸºæœ¬å°±æ˜¯æ¯ä¸€è½®ç¡®å®šç¬¬currä¸ªæ•°æ˜¯ä»€ä¹ˆï¼Œå¦‚æœ<code>curr==nums.size()</code>å°±è¾“å‡ºè¯¥ç§å¯èƒ½ã€‚å¹¶ä¸”æˆ‘ä»¬éœ€è¦ä¸€ä¸ª<code>hasInclude[]</code>æ•°ç»„è®°å½•ï¼ŒæŸä¸ªæ•°æœ‰æ²¡æœ‰è¢«è®¿é—®è¿‡ã€‚</p>
<h5 id="è§£é¢˜ä»£ç -3">è§£é¢˜ä»£ç ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">permute</span>(vector&lt;<span class="type">int</span>&gt;&amp; nums) &#123;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; res;</span><br><span class="line">        vector&lt;<span class="type">bool</span>&gt; hasInclude;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            hasInclude.<span class="built_in">push_back</span>(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; tmp;</span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">0</span>,tmp,nums,hasInclude,res);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> curr,vector&lt;<span class="type">int</span>&gt;&amp; tmp,vector&lt;<span class="type">int</span>&gt;&amp; nums,vector&lt;<span class="type">bool</span>&gt; &amp;hasInclude,vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; &amp;res)</span></span>&#123;</span><br><span class="line">        <span class="comment">//ç¡®å®šç¬¬currä¸ªæ•°æ˜¯ä»€ä¹ˆ</span></span><br><span class="line">        <span class="keyword">if</span>(curr == nums.<span class="built_in">size</span>())&#123;</span><br><span class="line">            <span class="comment">//ä»£è¡¨åˆ°åº•äº†</span></span><br><span class="line">            res.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!hasInclude[i])&#123;</span><br><span class="line">                hasInclude[i] = <span class="literal">true</span>;</span><br><span class="line">                tmp.<span class="built_in">push_back</span>(nums[i]);</span><br><span class="line">                <span class="built_in">dfs</span>(curr+<span class="number">1</span>,tmp,nums,hasInclude,res);</span><br><span class="line">                tmp.<span class="built_in">pop_back</span>();</span><br><span class="line">                hasInclude[i] = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="å‰‘æŒ‡-offer-ii-084.-å«æœ‰é‡å¤å…ƒç´ é›†åˆçš„å…¨æ’åˆ—"><a
href="https://leetcode-cn.com/problems/7p8L0Z/">å‰‘æŒ‡ Offer II 084.
å«æœ‰é‡å¤å…ƒç´ é›†åˆçš„å…¨æ’åˆ—</a></h4>
<p>ç»™å®šä¸€ä¸ªå¯åŒ…å«é‡å¤æ•°å­—çš„æ•´æ•°é›†åˆ nums ï¼ŒæŒ‰ä»»æ„é¡ºåº
è¿”å›å®ƒæ‰€æœ‰ä¸é‡å¤çš„å…¨æ’åˆ—ã€‚</p>
<p>ç¤ºä¾‹ 1ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [1,1,2]</span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line">[[1,1,2],</span><br><span class="line"> [1,2,1],</span><br><span class="line"> [2,1,1]]</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯-4">è§£é¢˜æ€è·¯ï¼š</h5>
<p>â€‹
084è¿™é¢˜ç›¸å¯¹äº083è€Œè¨€ï¼Œå°±åƒæ˜¯082ç›¸å¯¹äº081è€Œè¨€ï¼Œå¤šäº†ä¸€ä¸ªé‡å¤å…ƒç´ ã€‚æˆ‘ä»¬å°±éœ€è¦æ’é™¤é‡å¤çš„ä¿¡æ¯ã€‚ä¸€ç§æœ´ç´ çš„æƒ³æ³•æ˜¯ï¼Œç”¨hashè¡¨è®°å½•æ¯ä¸€ä¸ªå…¨æ’åˆ—çš„æƒ…å†µï¼Œç„¶åæ¯äº§ç”Ÿä¸€ä¸ªå…¨æ’åˆ—å°±å»Hashè¡¨é‡Œæ‰¾æœ‰æ²¡æœ‰ä¸€æ ·çš„ï¼Œè¿™æ˜¯ä¸€ç§æ–¹æ³•ï¼Œä½†æ—¶é—´å¤æ‚åº¦è‚¯å®šè¾ƒé«˜ã€‚</p>
<p>â€‹
æ¯”è¾ƒä¼˜åŒ–çš„æ–¹æ³•æ€æƒ³å…¶å®å’Œ082ç›¸ä¼¼ï¼Œä¹Ÿæ˜¯éœ€è¦å…ˆå¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œå¾—åˆ°æœ‰åºçš„nums.</p>
<p>â€‹
æˆ‘ä»¬åœ¨DFSçš„æ—¶å€™ï¼Œå¦‚æœå½“å‰å…ƒç´ å’Œå‰é¢å…ƒç´ ä¸€æ ·ï¼Œå¹¶ä¸”å‰é¢çš„å…ƒç´ è¿˜æ²¡æœ‰è¢«é€‰æ‹©ï¼Œé‚£ä¹ˆè¯¥å…ƒç´ ä¹Ÿä¸åœ¨æœ¬è½®è¢«é€‰æ‹©ã€‚åŸå› ä¹Ÿå’Œ082ä¸€è‡´ï¼Œå¦‚æœå‰é¢çš„å…ƒç´ æ²¡è¢«é€‰ï¼Œè€Œå½“å‰å…ƒç´ è¢«é€‰äº†ï¼ŒåŠ¿å¿…ä¼šå’Œæ­£å¸¸æµç¨‹ä¸­ï¼Œ"å‰é¢å…ƒç´ é€‰äº†ï¼Œå½“å‰å…ƒç´ æœªé€‰"çš„æ’åˆ—é€ æˆé‡å¤ã€‚æ‰€ä»¥åªæœ‰å½“å‰é¢çš„å…ƒç´ å·²ç»è¢«ä½¿ç”¨äº†ï¼Œç¡®å®šå¥½ä½ç½®äº†ï¼Œåé¢çš„ç›¸åŒçš„å…ƒç´ æ‰æœ‰æœºä¼šè¢«ä½¿ç”¨ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">permuteUnique</span>(vector&lt;<span class="type">int</span>&gt;&amp; nums) &#123;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; res;</span><br><span class="line">        vector&lt;<span class="type">bool</span>&gt; hasInclude;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            hasInclude.<span class="built_in">push_back</span>(<span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; tmp;</span><br><span class="line">        <span class="built_in">sort</span>(nums.<span class="built_in">begin</span>(),nums.<span class="built_in">end</span>());</span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">0</span>,tmp,nums,hasInclude,res);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> curr,vector&lt;<span class="type">int</span>&gt;&amp; tmp,vector&lt;<span class="type">int</span>&gt;&amp; nums,vector&lt;<span class="type">bool</span>&gt; &amp;hasInclude,vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; &amp;res)</span></span>&#123;</span><br><span class="line">        <span class="comment">//ç¡®å®šç¬¬currä¸ªæ•°æ˜¯ä»€ä¹ˆ</span></span><br><span class="line">        <span class="keyword">if</span>(curr == nums.<span class="built_in">size</span>())&#123;</span><br><span class="line">            <span class="comment">//ä»£è¡¨åˆ°åº•äº†</span></span><br><span class="line">            res.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i &gt;= <span class="number">1</span> &amp;&amp; nums[i] == nums[i<span class="number">-1</span>] &amp;&amp; !hasInclude[i<span class="number">-1</span>])&#123;</span><br><span class="line">                <span class="comment">//å‰é¢å…ƒç´ å’Œå½“å‰ä¸€æ ·ï¼Œå¹¶ä¸”å‰é¢çš„å…ƒç´ è¿˜æ²¡ç”¨æ‰ï¼Œç›´æ¥ä¸é€‰è·³è¿‡</span></span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(!hasInclude[i])&#123;</span><br><span class="line">                hasInclude[i] = <span class="literal">true</span>;</span><br><span class="line">                tmp.<span class="built_in">push_back</span>(nums[i]);</span><br><span class="line">                <span class="built_in">dfs</span>(curr+<span class="number">1</span>,tmp,nums,hasInclude,res);</span><br><span class="line">                tmp.<span class="built_in">pop_back</span>();</span><br><span class="line">                hasInclude[i] = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="å‰‘æŒ‡-offer-ii-085.-ç”ŸæˆåŒ¹é…çš„æ‹¬å·"><a
href="https://leetcode-cn.com/problems/IDBivT/">å‰‘æŒ‡ Offer II 085.
ç”ŸæˆåŒ¹é…çš„æ‹¬å·</a></h4>
<p>æ­£æ•´æ•° <code>n</code>
ä»£è¡¨ç”Ÿæˆæ‹¬å·çš„å¯¹æ•°ï¼Œè¯·è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹¶ä¸”
<strong>æœ‰æ•ˆçš„</strong> æ‹¬å·ç»„åˆã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šn = 3</span><br><span class="line">è¾“å‡ºï¼š[&quot;((()))&quot;,&quot;(()())&quot;,&quot;(())()&quot;,&quot;()(())&quot;,&quot;()()()&quot;]</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯-5">è§£é¢˜æ€è·¯ï¼š</h5>
<p>â€‹
è¿™æ˜¯ä¸€é“æ¯”è¾ƒæœ‰è¶£çš„DFSçš„é¢˜ç›®ï¼ŒDFSåˆ†æ”¯çš„æ¡ä»¶æ¯”è¾ƒéš¾æƒ³ï¼Œæ•´ä½“ä»£ç è¾ƒä¸ºç®€å•ã€‚</p>
<p>â€‹
è¦æƒ³æ¸…æ¥šï¼Œä¸ºä»€ä¹ˆæ­¤å¤„æˆ‘ä»…ç”¨ä¸¤ä¸ªCaseå°±å¯ä»¥å®ŒæˆDFSåˆ†æ”¯çš„éå†ï¼Œåœ¨æœ€ç»ˆè¾“å‡ºçš„æ—¶å€™åˆåšäº†å“ªäº›æ“ä½œã€‚</p>
<h5 id="è§£é¢˜ä»£ç -4">è§£é¢˜ä»£ç ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;string&gt; <span class="title">generateParenthesis</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        vector&lt;string&gt; res;</span><br><span class="line">        string tmp;</span><br><span class="line">        <span class="built_in">dfs</span>(<span class="number">0</span>,<span class="number">0</span>,n,tmp,res);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> left_curr,<span class="type">int</span> right_curr,<span class="type">int</span> n,string tmp,vector&lt;string&gt; &amp;res)</span></span>&#123;</span><br><span class="line">        <span class="comment">//left_currå½“å‰åŠ åˆ°ç¬¬å‡ ä¸ªï¼ˆäº†ï¼Œright_curr ä»£è¡¨å·²ç»åŠ äº†å‡ ä¸ª ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span>(left_curr == n)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=right_curr;i&lt;n;i++)&#123;</span><br><span class="line">                tmp += <span class="string">&quot;)&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            res.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//Case1: ä»…åŠ å·¦æ‹¬å·</span></span><br><span class="line">        <span class="keyword">if</span>(left_curr &lt; n) <span class="built_in">dfs</span>(left_curr+<span class="number">1</span>,right_curr,n,tmp+<span class="string">&quot;(&quot;</span>,res);</span><br><span class="line">        <span class="comment">//Case2: åŠ ä¸€å¯¹å³æ‹¬å·</span></span><br><span class="line">        <span class="keyword">if</span>(right_curr &lt; left_curr &amp;&amp; right_curr &lt; n) <span class="built_in">dfs</span>(left_curr,right_curr+<span class="number">1</span>,n,tmp+<span class="string">&quot;)&quot;</span>,res);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>DFSä¸BFSç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>DFS</tag>
      </tags>
  </entry>
  <entry>
    <title>DFSç³»åˆ—â€”â€”æœ€é•¿é€’å¢è·¯å¾„</title>
    <url>/2022/02/22/cd538be761a4/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-112.-æœ€é•¿é€’å¢è·¯å¾„"><a
href="https://leetcode-cn.com/problems/fpTFWP/">å‰‘æŒ‡ Offer II 112.
æœ€é•¿é€’å¢è·¯å¾„</a></h4>
<p>â€‹ ç»™å®šä¸€ä¸ª m x n æ•´æ•°çŸ©é˜µ matrix ï¼Œæ‰¾å‡ºå…¶ä¸­ æœ€é•¿é€’å¢è·¯å¾„ çš„é•¿åº¦ã€‚</p>
<p>â€‹ å¯¹äºæ¯ä¸ªå•å…ƒæ ¼ï¼Œä½ å¯ä»¥å¾€ä¸Šï¼Œä¸‹ï¼Œå·¦ï¼Œå³å››ä¸ªæ–¹å‘ç§»åŠ¨ã€‚ ä¸èƒ½ åœ¨ å¯¹è§’çº¿
æ–¹å‘ä¸Šç§»åŠ¨æˆ–ç§»åŠ¨åˆ° è¾¹ç•Œå¤–ï¼ˆå³ä¸å…è®¸ç¯ç»•ï¼‰ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šmatrix = [[9,9,4],[6,6,8],[2,1,1]]</span><br><span class="line">è¾“å‡ºï¼š4 </span><br><span class="line">è§£é‡Šï¼šæœ€é•¿é€’å¢è·¯å¾„ä¸º [1, 2, 6, 9]ã€‚</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/grid1.jpg" /></p>
<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šmatrix = [[3,4,5],[3,2,6],[2,2,1]]</span><br><span class="line">è¾“å‡ºï¼š4 </span><br><span class="line">è§£é‡Šï¼šæœ€é•¿é€’å¢è·¯å¾„æ˜¯ [3, 4, 5, 6]ã€‚æ³¨æ„ä¸å…è®¸åœ¨å¯¹è§’çº¿æ–¹å‘ä¸Šç§»åŠ¨ã€‚</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/tmp-grid.jpg" /></p>
<p>å‚è€ƒï¼šhttps://leetcode-cn.com/problems/fpTFWP/solution/zui-chang-di-zeng-lu-jing-by-leetcode-so-1chr/</p>
<h5
id="è§£é¢˜æ€è·¯1dfsè¿›é˜¶è®°å¿†åŒ–æ·±åº¦ä¼˜å…ˆæœç´¢">è§£é¢˜æ€è·¯1ï¼šDFSè¿›é˜¶â€”è®°å¿†åŒ–æ·±åº¦ä¼˜å…ˆæœç´¢ï¼š</h5>
<p>â€‹
æ‹¿åˆ°é¢˜ç›®ä»¥åï¼Œå°†å…¶çœ‹ä½œä¸€ä¸ªå›¾ï¼Œç„¶åä»ä¸€ä¸ªå•å…ƒæ ¼å¼€å§‹è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œå³å¯æ‰¾åˆ°ä»è¯¥å•å…ƒæ ¼å¼€å§‹çš„æœ€é•¿é€’å¢è·¯å¾„ã€‚å¯¹æ¯ä¸ªå•å…ƒæ ¼åˆ†åˆ«è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢ä¹‹åï¼Œå³å¯å¾—åˆ°çŸ©é˜µä¸­çš„æœ€é•¿é€’å¢è·¯å¾„çš„é•¿åº¦ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸æœ´ç´ ä¸”å¥½ç”¨çš„åŠæ³•ï¼Œä½†æ˜¯ä»”ç»†æƒ³ä¸€ä¸‹ä»¥åï¼Œæ—¶é—´å¤æ‚åº¦è‚¯å®šæ˜¯æŒ‡æ•°çº§çš„ï¼Œä¼šè¶…å‡ºæ—¶é—´é™åˆ¶ï¼Œæ‰€ä»¥éœ€è¦ä¼˜åŒ–ã€‚</p>
<p>â€‹
å¸¸è§çš„ä¼˜åŒ–æ–¹å¼ï¼Œå°±æ˜¯<strong>è®°å¿†åŒ–æ·±åº¦ä¼˜å…ˆæœç´¢</strong>ï¼Œæ€è·¯å¦‚ä¸‹ï¼š</p>
<p>â€‹
<strong>æœ´ç´ æ·±åº¦ä¼˜å…ˆæœç´¢çš„æ—¶é—´å¤æ‚åº¦è¿‡é«˜çš„åŸå› æ˜¯è¿›è¡Œäº†å¤§é‡çš„é‡å¤è®¡ç®—ï¼ŒåŒä¸€ä¸ªå•å…ƒæ ¼ä¼šè¢«è®¿é—®å¤šæ¬¡ï¼Œæ¯æ¬¡è®¿é—®éƒ½è¦é‡æ–°è®¡ç®—ã€‚ç”±äºåŒä¸€ä¸ªå•å…ƒæ ¼å¯¹åº”çš„æœ€é•¿é€’å¢è·¯å¾„çš„é•¿åº¦æ˜¯å›ºå®šä¸å˜çš„ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨è®°å¿†åŒ–çš„æ–¹æ³•è¿›è¡Œä¼˜åŒ–</strong>ã€‚ç”¨çŸ©é˜µ
<code>res</code>ä½œä¸ºç¼“å­˜çŸ©é˜µï¼Œå·²ç»è®¡ç®—è¿‡çš„å•å…ƒæ ¼çš„ç»“æœå­˜å‚¨åˆ°ç¼“å­˜çŸ©é˜µä¸­ã€‚</p>
<p>â€‹ ä½¿ç”¨è®°å¿†åŒ–æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œå½“è®¿é—®åˆ°ä¸€ä¸ªå•å…ƒæ ¼<code>(i,j)</code>æ—¶ï¼Œå¦‚æœ
<code>res[i][j] != 0</code>ï¼Œè¯´æ˜è¯¥å•å…ƒæ ¼çš„ç»“æœå·²ç»è®¡ç®—è¿‡ï¼Œåˆ™ç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–ç»“æœï¼Œå¦‚æœ
<code>res[i][j] == 0</code>ï¼Œè¯´æ˜è¯¥å•å…ƒæ ¼çš„ç»“æœå°šæœªè¢«è®¡ç®—è¿‡ï¼Œåˆ™è¿›è¡Œæœç´¢ï¼Œå¹¶å°†è®¡ç®—å¾—åˆ°çš„ç»“æœå­˜å…¥ç¼“å­˜ä¸­ã€‚</p>
<p>â€‹
éå†å®ŒçŸ©é˜µä¸­çš„æ‰€æœ‰å•å…ƒæ ¼ä¹‹åï¼Œå³å¯å¾—åˆ°çŸ©é˜µä¸­çš„æœ€é•¿é€’å¢è·¯å¾„çš„é•¿åº¦ã€‚</p>
<h5 id="è§£é¢˜ä»£ç 1">è§£é¢˜ä»£ç 1ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; dirs = &#123;&#123;<span class="number">-1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">-1</span>&#125;,&#123;<span class="number">0</span>,<span class="number">1</span>&#125;&#125;; <span class="comment">//å››ä¸ªé‚»å±…åæ ‡</span></span><br><span class="line">    <span class="type">int</span> m;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestIncreasingPath</span><span class="params">(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; matrix)</span> </span>&#123;</span><br><span class="line">        m = matrix.<span class="built_in">size</span>();</span><br><span class="line">        n = matrix[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">res</span>(m,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n));</span><br><span class="line">        <span class="type">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; m;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>;j &lt; n;j++)&#123;</span><br><span class="line">                <span class="type">int</span> dis = <span class="built_in">dfs</span>(i,j,matrix,res);</span><br><span class="line">                <span class="keyword">if</span>(dis &gt; max) max = dis;</span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;    </span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> row,<span class="type">int</span> column,vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; matrix,vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; res)</span></span>&#123;</span><br><span class="line">        <span class="type">int</span> m = matrix.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> n = matrix[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        <span class="comment">//å¦‚æœå·²ç»è®¡ç®—è¿‡è¯¥ç‚¹çš„å€¼ï¼Œæˆ‘ä»¬ç›´æ¥è¿”å›(ç›¸æ¯”äºä¼ ç»Ÿçš„DFSï¼Œå…¶å®å°±å¤šäº†è¿™ä¸€æ­¥)</span></span><br><span class="line">        <span class="keyword">if</span> (res[row][column] != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> res[row][column];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦‚æœè¯¥ç‚¹çš„å€¼æ²¡æœ‰è®¡ç®—è¿‡ï¼Œå…ˆå°†è¯¥ç‚¹çš„å€¼ +1ï¼Œä»£è¡¨è·¯å¾„é•¿åº¦ä¸º1.</span></span><br><span class="line">        ++res[row][column];</span><br><span class="line">        <span class="comment">//éå†4ä¸ªå‘¨å›´çš„é‚»å±…ï¼Œè¿›è¡Œé€’å½’ï¼Œæ·±åº¦ä¼˜å…ˆéå†</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i) &#123;</span><br><span class="line">            <span class="type">int</span> new_row = row + dirs[i][<span class="number">0</span>];</span><br><span class="line">            <span class="type">int</span> new_column = column + dirs[i][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (new_row &gt;= <span class="number">0</span> &amp;&amp; new_row &lt; m &amp;&amp; </span><br><span class="line">                new_column &gt;= <span class="number">0</span> &amp;&amp; new_column &lt; n &amp;&amp; </span><br><span class="line">                matrix[new_row][new_column] &gt; matrix[row][column]        <span class="comment">//å¦‚æœå‘¨å›´æ¯”è¯¥ç‚¹å¤§ï¼Œåˆ™è¿›è¡Œæ·±åº¦éå†</span></span><br><span class="line">            )&#123;</span><br><span class="line">                <span class="comment">//æœ€ç»ˆçš„ç»“æœ ä¸ºå½“å‰çš„æœ€é•¿é€’å¢è·¯å¾„ å’Œ å‘¨å›´é‚»å±…çš„æœ€é•¿è·¯å¾„ + 1ï¼Œä¸¤è€…ä¸­å¤§çš„é‚£ä¸ªå€¼</span></span><br><span class="line">                res[row][column] = <span class="built_in">max</span>(res[row][column], <span class="built_in">dfs</span>(new_row, new_column,matrix, res) + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res[row][column];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯2åŠ¨æ€è§„åˆ’æ‹“æ‰‘æ’åº">è§£é¢˜æ€è·¯2ï¼šåŠ¨æ€è§„åˆ’ï¼ˆæ‹“æ‰‘æ’åºï¼‰</h5>
<p>â€‹
ä¸€å¼€å§‹ï¼Œæˆ‘çœ‹åˆ°æ­¤é¢˜ï¼Œæ²¡æœ‰æƒ³åˆ°å»ä¼˜åŒ–DFSï¼Œè€Œæ˜¯ç›´æ¥è½¬åˆ°äº†åŠ¨æ€è§„åˆ’çš„æ€è·¯ä¸Šï¼Œåˆšå¼€å§‹è§‰å¾—è¿™é¢˜å¦‚æœä½¿ç”¨åŠ¨æ€è§„åˆ’éå¸¸æ–¹ä¾¿ï¼Œæ¯ä¸ªèŠ‚ç‚¹å®ƒçš„æœ€é•¿é€’å¢è·¯å¾„ï¼Œæ— éå°±æ˜¯å‘¨å›´çš„é‚»å±…ä¸­ï¼Œé€‰ä¸€ä¸ªæœ€é•¿é€’å¢è·¯å¾„æœ€å¤§ï¼Œå¹¶ä¸”æ¯”è‡ªå·±å€¼å¤§çš„èŠ‚ç‚¹
+
1ï¼Œå°±å¯ä»¥äº†ï¼Œå³<code>res[i][j]=max&#123;res[x][y]&#125;+1 (å…¶ä¸­(x,y)ä¸(i,j)åœ¨çŸ©é˜µä¸­ç›¸é‚»ä¸”matrix[x][y] &gt; matrix[i][j])</code>ã€‚</p>
<p>â€‹
äº‹å®ç¡®å®æ˜¯è¿™æ ·ï¼Œä½†æ˜¯æ²¡æƒ³åˆ°æ­¤é¢˜å¦‚æœä½¿ç”¨åŠ¨æ€è§„åˆ’ï¼Œå…³é”®é—®é¢˜å¹¶ä¸æ˜¯çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œè€Œæ˜¯åˆå§‹åŒ–æ¡ä»¶å’Œå¦‚ä½•å»è¿›è¡ŒçŠ¶æ€è½¬ç§».æŒ‰ç…§é€šå¸¸çš„æ€è·¯,æˆ‘æƒ³åˆ°äº†ä»å·¦ä¸Šè§’å‘å³ä¸‹è§’éå†,æ­¤æ—¶ä»…è€ƒè™‘å·¦è¾¹å’Œä¸Šé¢çš„ç‚¹,ç„¶åä»å³ä¸‹è§’è‡³å·¦ä¸Šè§’éå†,æ­¤æ—¶ä»…è€ƒè™‘å³è¾¹å’Œä¸‹é¢çš„ç‚¹,è¿™æ ·å­ç”±äºç¼“å­˜çš„å…³ç³»ç›¸å½“äºä¹Ÿè€ƒè™‘äº†å‘¨å›´çš„å››ä¸ªé‚»å±…,ç±»ä¼¼äº<a
href="https://blog.fantast.top/2022/02/21/80b7b127a404/">å›¾ç³»åˆ—â€”â€”çŸ©é˜µä¸­çš„è·ç¦»</a>è¿™é“é¢˜ç›®çš„åŠ¨æ€è§„åˆ’æ–¹æ³•,ä»£ç å¦‚ä¸‹:</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestIncreasingPath</span><span class="params">(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; matrix)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> m = matrix.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> n = matrix[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">res</span>(m,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n));</span><br><span class="line">        <span class="comment">//ä»å·¦ä¸Šè§’å‘å³ä¸‹è§’éå†</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++)&#123;</span><br><span class="line">                <span class="type">int</span> ele = matrix[i][j];</span><br><span class="line">                <span class="comment">//æ£€æŸ¥é‚»å±…çš„å€¼ï¼Œå¦‚æœå·¦è¾¹å’Œä¸Šé¢çš„å€¼ç¬¦åˆé€’å¢æ•ˆæœï¼Œåˆ™å åŠ </span></span><br><span class="line">                <span class="keyword">if</span>(i!=<span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="comment">//æ£€æŸ¥ä¸Šæ–¹</span></span><br><span class="line">                    <span class="type">int</span> ele_up = matrix[i<span class="number">-1</span>][j];</span><br><span class="line">                    <span class="keyword">if</span>(ele_up &gt; ele) res[i][j] = <span class="built_in">max</span>(res[i][j] , res[i<span class="number">-1</span>][j] + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(j!=<span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="comment">//æ£€æŸ¥å·¦æ–¹</span></span><br><span class="line">                    <span class="type">int</span> ele_left = matrix[i][j<span class="number">-1</span>];</span><br><span class="line">                    <span class="keyword">if</span>(ele_left &gt; ele) res[i][j] =  <span class="built_in">max</span>(res[i][j] ,res[i][j<span class="number">-1</span>] + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=m<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=n<span class="number">-1</span>;j&gt;=e;j--)&#123;</span><br><span class="line">                <span class="type">int</span> ele = matrix[i][j];</span><br><span class="line">                <span class="comment">//æ£€æŸ¥é‚»å±…çš„å€¼ï¼Œå¦‚æœå·¦è¾¹å’Œä¸Šé¢çš„å€¼ç¬¦åˆé€’å¢æ•ˆæœï¼Œåˆ™å åŠ </span></span><br><span class="line">                <span class="keyword">if</span>(i!=m<span class="number">-1</span>)&#123;</span><br><span class="line">                    <span class="comment">//æ£€æŸ¥ä¸‹æ–¹</span></span><br><span class="line">                    <span class="type">int</span> ele_down = matrix[i+<span class="number">1</span>][j];</span><br><span class="line">                    <span class="keyword">if</span>(ele_down &gt; ele) res[i][j] =  <span class="built_in">max</span>(res[i][j] ,res[i+<span class="number">1</span>][j] + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(j!=n<span class="number">-1</span>)&#123;</span><br><span class="line">                    <span class="comment">//æ£€æŸ¥å³æ–¹</span></span><br><span class="line">                    <span class="type">int</span> ele_right = matrix[i][j+<span class="number">1</span>];</span><br><span class="line">                    <span class="keyword">if</span>(ele_right &gt; ele ) res[i][j] =  <span class="built_in">max</span>(res[i][j] ,res[i][j+<span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="type">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(res[i][j] &gt; max) max = res[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>â€‹
<strong>ä½†è¿™ä¸ªé¢˜ç›®è¿™æ ·å­åšæ˜¯ä¼šå‡ºé—®é¢˜çš„,å…·ä½“å‡ºé—®é¢˜çš„åŸå› æˆ‘ä¹Ÿææ¸…æ¥šäº†,å¤§è‡´æ˜¯å› ä¸ºæŸä¸ªå…ƒç´ æ›´æ–°å,ä¼šå¯¼è‡´å…ˆå‰å·²ç»é€šè¿‡è¯¥å…ƒç´ æ›´æ–°çš„å…ƒç´ å˜å¾—æ— æ•ˆ,ä½†æ˜¯æ€è€ƒäº†å¾ˆä¹…,è‡³ä»Šè¿˜æ˜¯æ²¡æœ‰å®Œå…¨æƒ³é€š,ä¸ºä»€ä¹ˆ<çŸ©é˜µä¸­çš„è·ç¦»>è¿™é“é¢˜ç›®å¯ä»¥ç”¨è¿™ç§æ–¹å¼é€’å½’,è€Œè¯¥é¢˜ç›®æ— æ³•ç”¨è¿™ç§å½¢å¼é€’å½’</strong></p>
<p>â€‹
<strong>æˆ‘ä»¬å…ˆçœ‹æ­£ç¡®æ–¹æ³•:è¿™é¢˜çš„å…³é”®åœ¨äºå¦‚ä½•å®šä¹‰åˆå§‹åŒ–çŠ¶æ€å’Œè®¡ç®—æµç¨‹:</strong></p>
<p>â€‹
åŠ¨æ€è§„åˆ’é™¤äº†çŠ¶æ€å®šä¹‰å’ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œè¿˜éœ€è¦è€ƒè™‘è¾¹ç•Œæƒ…å†µã€‚è¿™é‡Œçš„è¾¹ç•Œæƒ…å†µæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>â€‹
å¦‚æœä¸€ä¸ªå•å…ƒæ ¼çš„å€¼æ¯”å®ƒçš„æ‰€æœ‰ç›¸é‚»å•å…ƒæ ¼çš„å€¼éƒ½è¦å¤§ï¼Œé‚£ä¹ˆè¿™ä¸ªå•å…ƒæ ¼å¯¹åº”çš„æœ€é•¿é€’å¢è·¯å¾„æ˜¯
1ï¼Œè¿™å°±æ˜¯è¾¹ç•Œæ¡ä»¶ã€‚è¿™ä¸ªè¾¹ç•Œæ¡ä»¶å¹¶ä¸ç›´è§‚ï¼Œè€Œæ˜¯<strong>éœ€è¦æ ¹æ®çŸ©é˜µä¸­çš„æ¯ä¸ªå•å…ƒæ ¼çš„å€¼æ‰¾åˆ°ä½œä¸ºè¾¹ç•Œæ¡ä»¶çš„å•å…ƒæ ¼</strong>ã€‚</p>
<p>â€‹
ä»ç„¶ä½¿ç”¨æ–¹æ³•ä¸€çš„æ€æƒ³ï¼Œå°†çŸ©é˜µçœ‹æˆä¸€ä¸ªæœ‰å‘å›¾ï¼Œè®¡ç®—æ¯ä¸ªå•å…ƒæ ¼å¯¹åº”çš„å‡ºåº¦ï¼Œå³æœ‰å¤šå°‘æ¡è¾¹ä»è¯¥å•å…ƒæ ¼å‡ºå‘ã€‚å¯¹äºä½œä¸ºè¾¹ç•Œæ¡ä»¶çš„å•å…ƒæ ¼ï¼Œè¯¥å•å…ƒæ ¼çš„å€¼æ¯”æ‰€æœ‰çš„ç›¸é‚»å•å…ƒæ ¼çš„å€¼éƒ½è¦å¤§ï¼Œå› æ­¤ä½œä¸ºè¾¹ç•Œæ¡ä»¶çš„å•å…ƒæ ¼çš„å‡ºåº¦éƒ½æ˜¯
0ã€‚</p>
<p>â€‹ <strong>åŸºäºå‡ºåº¦çš„æ¦‚å¿µï¼Œå¯ä»¥ä½¿ç”¨æ‹“æ‰‘æ’åºæ±‚è§£ã€‚ä»æ‰€æœ‰å‡ºåº¦ä¸º 0
çš„å•å…ƒæ ¼å¼€å§‹å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼Œæ¯ä¸€è½®æœç´¢éƒ½ä¼šéå†å½“å‰å±‚çš„æ‰€æœ‰å•å…ƒæ ¼ï¼Œæ›´æ–°å…¶ä½™å•å…ƒæ ¼çš„å‡ºåº¦ï¼Œå¹¶å°†å‡ºåº¦å˜ä¸º
0
çš„å•å…ƒæ ¼åŠ å…¥ä¸‹ä¸€å±‚æœç´¢ã€‚å½“æœç´¢ç»“æŸæ—¶ï¼Œæœç´¢çš„æ€»å±‚æ•°å³ä¸ºçŸ©é˜µä¸­çš„æœ€é•¿é€’å¢è·¯å¾„çš„é•¿åº¦ã€‚</strong></p>
<h5 id="è§£é¢˜ä»£ç 2å®˜æ–¹ä»£ç ">è§£é¢˜ä»£ç 2(å®˜æ–¹ä»£ç ):</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">static</span> <span class="keyword">constexpr</span> <span class="type">int</span> dirs[<span class="number">4</span>][<span class="number">2</span>] = &#123;&#123;<span class="number">-1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">-1</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>&#125;&#125;;</span><br><span class="line">    <span class="type">int</span> rows, columns;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestIncreasingPath</span><span class="params">(vector&lt; vector&lt;<span class="type">int</span>&gt; &gt; &amp;matrix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (matrix.<span class="built_in">size</span>() == <span class="number">0</span> || matrix[<span class="number">0</span>].<span class="built_in">size</span>() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        rows = matrix.<span class="built_in">size</span>();</span><br><span class="line">        columns = matrix[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">auto</span> outdegrees = vector&lt; vector&lt;<span class="type">int</span>&gt; &gt; (rows, vector &lt;<span class="type">int</span>&gt; (columns));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; rows; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; columns; ++j) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; ++k) &#123;</span><br><span class="line">                    <span class="type">int</span> newRow = i + dirs[k][<span class="number">0</span>], newColumn = j + dirs[k][<span class="number">1</span>];</span><br><span class="line">                    <span class="keyword">if</span> (newRow &gt;= <span class="number">0</span> &amp;&amp; newRow &lt; rows &amp;&amp; newColumn &gt;= <span class="number">0</span> &amp;&amp; newColumn &lt; columns &amp;&amp; matrix[newRow][newColumn] &gt; matrix[i][j]) &#123;</span><br><span class="line">                        ++outdegrees[i][j];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        queue &lt; pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; &gt; q;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; rows; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; columns; ++j) &#123;</span><br><span class="line">                <span class="keyword">if</span> (outdegrees[i][j] == <span class="number">0</span>) &#123;</span><br><span class="line">                    q.<span class="built_in">push</span>(&#123;i, j&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            ++ans;</span><br><span class="line">            <span class="type">int</span> size = q.<span class="built_in">size</span>();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; ++i) &#123;</span><br><span class="line">                <span class="keyword">auto</span> cell = q.<span class="built_in">front</span>(); q.<span class="built_in">pop</span>();</span><br><span class="line">                <span class="type">int</span> row = cell.first, column = cell.second;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; <span class="number">4</span>; ++k) &#123;</span><br><span class="line">                    <span class="type">int</span> newRow = row + dirs[k][<span class="number">0</span>], newColumn = column + dirs[k][<span class="number">1</span>];</span><br><span class="line">                    <span class="keyword">if</span> (newRow &gt;= <span class="number">0</span> &amp;&amp; newRow &lt; rows &amp;&amp; newColumn &gt;= <span class="number">0</span> &amp;&amp; newColumn &lt; columns &amp;&amp; matrix[newRow][newColumn] &lt; matrix[row][column]) &#123;</span><br><span class="line">                        --outdegrees[newRow][newColumn];</span><br><span class="line">                        <span class="keyword">if</span> (outdegrees[newRow][newColumn] == <span class="number">0</span>) &#123;</span><br><span class="line">                            q.<span class="built_in">push</span>(&#123;newRow, newColumn&#125;);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ä½œè€…ï¼šLeetCode-Solution</span><br><span class="line">é“¾æ¥ï¼šhttps:<span class="comment">//leetcode-cn.com/problems/fpTFWP/solution/zui-chang-di-zeng-lu-jing-by-leetcode-so-1chr/</span></span><br><span class="line">æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</span><br><span class="line">è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>DFSä¸BFSç³»åˆ—</category>
        <category>åŠ¨æ€è§„åˆ’ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>DFS</tag>
        <tag>dynamic programming</tag>
      </tags>
  </entry>
  <entry>
    <title>BFSç³»åˆ—â€”â€”å¼€å¯†ç é”</title>
    <url>/2022/02/22/2c663a313e31/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-109.-å¼€å¯†ç é”"><a
href="https://leetcode-cn.com/problems/zlDJc7/">å‰‘æŒ‡ Offer II 109.
å¼€å¯†ç é”</a></h4>
<p>â€‹ ä¸€ä¸ªå¯†ç é”ç”± 4 ä¸ªç¯å½¢æ‹¨è½®ç»„æˆï¼Œæ¯ä¸ªæ‹¨è½®éƒ½æœ‰ 10 ä¸ªæ•°å­—ï¼š '0', '1',
'2', '3', '4', '5', '6', '7', '8', '9' ã€‚æ¯ä¸ªæ‹¨è½®å¯ä»¥è‡ªç”±æ—‹è½¬ï¼šä¾‹å¦‚æŠŠ
'9' å˜ä¸º '0'ï¼Œ'0' å˜ä¸º '9' ã€‚æ¯æ¬¡æ—‹è½¬éƒ½åªèƒ½æ—‹è½¬ä¸€ä¸ªæ‹¨è½®çš„ä¸€ä½æ•°å­—ã€‚</p>
<p>â€‹ é”çš„åˆå§‹æ•°å­—ä¸º '0000' ï¼Œä¸€ä¸ªä»£è¡¨å››ä¸ªæ‹¨è½®çš„æ•°å­—çš„å­—ç¬¦ä¸²ã€‚</p>
<p>â€‹ åˆ—è¡¨ deadends
åŒ…å«äº†ä¸€ç»„æ­»äº¡æ•°å­—ï¼Œä¸€æ—¦æ‹¨è½®çš„æ•°å­—å’Œåˆ—è¡¨é‡Œçš„ä»»ä½•ä¸€ä¸ªå…ƒç´ ç›¸åŒï¼Œè¿™ä¸ªé”å°†ä¼šè¢«æ°¸ä¹…é”å®šï¼Œæ— æ³•å†è¢«æ—‹è½¬ã€‚</p>
<p>â€‹ å­—ç¬¦ä¸² target
ä»£è¡¨å¯ä»¥è§£é”çš„æ•°å­—ï¼Œè¯·ç»™å‡ºè§£é”éœ€è¦çš„æœ€å°æ—‹è½¬æ¬¡æ•°ï¼Œå¦‚æœæ— è®ºå¦‚ä½•ä¸èƒ½è§£é”ï¼Œè¿”å›
-1 ã€‚</p>
<ul>
<li>ç¤ºä¾‹ 1:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šdeadends = [&quot;0201&quot;,&quot;0101&quot;,&quot;0102&quot;,&quot;1212&quot;,&quot;2002&quot;], target = &quot;0202&quot;</span><br><span class="line">è¾“å‡ºï¼š6</span><br><span class="line">è§£é‡Šï¼š å¯èƒ½çš„ç§»åŠ¨åºåˆ—ä¸º &quot;0000&quot; -&gt; &quot;1000&quot; -&gt; &quot;1100&quot; -&gt; &quot;1200&quot; -&gt; &quot;1201&quot; -&gt; &quot;1202&quot; -&gt; &quot;0202&quot;ã€‚</span><br><span class="line">æ³¨æ„ &quot;0000&quot; -&gt; &quot;0001&quot; -&gt; &quot;0002&quot; -&gt; &quot;0102&quot; -&gt; &quot;0202&quot; è¿™æ ·çš„åºåˆ—æ˜¯ä¸èƒ½è§£é”çš„ï¼Œå› ä¸ºå½“æ‹¨åŠ¨åˆ° &quot;0102&quot; æ—¶è¿™ä¸ªé”å°±ä¼šè¢«é”å®šã€‚</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯1å•å‘bfs"><strong>è§£é¢˜æ€è·¯1ï¼šå•å‘BFS</strong>ï¼š</h5>
<p>â€‹
æœ¬é¢˜å¯ä»¥é‡‡ç”¨BFSæœç´¢è¿›è¡Œæ±‚è§£ï¼Œä½†æ˜¯ç”±äºæ¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å¯¹åº”çš„é¢†å±…æœ‰é«˜è¾¾8ä¸ªï¼Œå†ä¸æ–­çš„æ‰©å±•çš„è¿‡ç¨‹ä¸­ï¼Œæœç´¢çš„ç©ºé—´ä¼šéå¸¸å¤§ï¼Œå°±ä¼šå¯¼è‡´æ¯”è¾ƒå¤§çš„å¤æ‚åº¦ã€‚åœ¨æœ¬é¢˜çš„BFSè¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿˜æœ‰æ­»äº¡æ•°å­—åˆ—è¡¨ï¼Œä¸€ç§æ–¹æ¡ˆæ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å“ˆå¸Œè¡¨å­˜å‚¨æ­»äº¡æ•°å­—ï¼Œåœ¨æ¯æ¬¡éå†è·å–é‚»å±…çš„æ—¶å€™ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºæ­»äº¡æ•°å­—ï¼Œå¦‚æœä¸ºæ­»äº¡æ•°å­—ï¼Œé‚£ä¹ˆå°±ä¸å°†å…¶è€ƒè™‘åœ¨å†…ã€‚è¿™æ ·å­éœ€è¦å¤šå‡ºä¸€å®šçš„ç©ºé—´å’Œæ—¶é—´æ¥è¿›è¡Œå¤„ç†ã€‚</p>
<p>â€‹
å…¶å®ï¼Œæˆ‘ä»¬å¯ä»¥ä¸éœ€è¦é¢å¤–çš„ç©ºé—´æ¥è¿›è¡Œå¤„ç†ã€‚å› ä¸ºåœ¨BFSçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šè®°å½•å“ªäº›èŠ‚ç‚¹è¢«è®¿é—®è¿‡ï¼Œå°±ä¸è¦é‡å¤å…¥é˜Ÿï¼Œæ•…è€Œï¼Œåªéœ€è¦æå‰å°†æ‰€æœ‰çš„æ­»äº¡æ•°å­—ï¼Œéƒ½è®¾å®šä¸ºå·²ç»è¢«è®¿é—®è¿‡ï¼Œé‚£ä¹ˆå°±ä¸ä¼šè¢«è€ƒè™‘åœ¨å†…ã€‚</p>
<h5 id="è§£é¢˜ä»£ç 1"><strong>è§£é¢˜ä»£ç 1</strong>ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">openLock</span><span class="params">(vector&lt;string&gt;&amp; deadends, string target)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ„å»ºhashè¡¨ï¼Œæ–¹ä¾¿è¿›è¡ŒæŸ¥è¯¢</span></span><br><span class="line">        unordered_map&lt;string,<span class="type">int</span>&gt; dead;</span><br><span class="line">        unordered_map&lt;string,<span class="type">int</span>&gt; res;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;deadends.<span class="built_in">size</span>();i++) dead[deadends[i]] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(dead.<span class="built_in">find</span>(<span class="string">&quot;0000&quot;</span>) != dead.<span class="built_in">end</span>()) <span class="keyword">return</span> <span class="number">-1</span>; </span><br><span class="line">        <span class="comment">//å¼€å¯å¹¿åº¦ä¼˜å…ˆæœç´¢</span></span><br><span class="line">        queue&lt;string&gt; q;</span><br><span class="line">        q.<span class="built_in">push</span>(<span class="string">&quot;0000&quot;</span>);</span><br><span class="line">        res[<span class="string">&quot;0000&quot;</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            string curr = q.<span class="built_in">front</span>();</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="comment">//å°†currçš„16ä¸ªé¢†å±…å…¨éƒ¨è¿›å…¥é˜Ÿåˆ—ï¼Œå¹¶æ›´æ–°ç»“æœè¡¨ï¼Œ(å¦‚æœå­˜åœ¨deadç‚¹ï¼Œåˆ™ä¸è¿›å…¥é˜Ÿåˆ—)</span></span><br><span class="line">            vector&lt;string&gt; neighbor = <span class="built_in">getNeighbor</span>(curr);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;neighbor.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(dead.<span class="built_in">find</span>(neighbor[i]) != dead.<span class="built_in">end</span>()) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span>(res.<span class="built_in">find</span>(neighbor[i]) == res.<span class="built_in">end</span>())&#123;</span><br><span class="line">                    q.<span class="built_in">push</span>(neighbor[i]);</span><br><span class="line">                    res[neighbor[i]] = res[curr] + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(res.<span class="built_in">find</span>(target) == res.<span class="built_in">end</span>()) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">return</span> res[target];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;string&gt; <span class="title">getNeighbor</span><span class="params">(string str)</span></span>&#123;</span><br><span class="line">        vector&lt;string&gt; res;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">            string tmp = str;</span><br><span class="line">            <span class="keyword">if</span>(tmp[i] == <span class="string">&#x27;0&#x27;</span>)&#123;</span><br><span class="line">                tmp[i] = <span class="string">&#x27;9&#x27;</span>;</span><br><span class="line">                res.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">                tmp[i] = <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">                res.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(tmp[i] == <span class="string">&#x27;9&#x27;</span>)&#123;</span><br><span class="line">                tmp[i] = <span class="string">&#x27;8&#x27;</span>;</span><br><span class="line">                res.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">                tmp[i] = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                res.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                tmp[i] = tmp[i] + <span class="number">1</span>;</span><br><span class="line">                res.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">                tmp[i] = tmp[i] - <span class="number">2</span>;</span><br><span class="line">                res.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-02-22%20ä¸‹åˆ2.31.38.png" /></p>
<p>â€‹ æ­¤æ–¹æ³•èŠ±è´¹çš„æ‰§è¡Œç”¨æ—¶å’Œå†…å­˜æ¶ˆè€—éƒ½æ˜¯ä¸‹ä¸‹é€‰ã€‚</p>
<h5 id="è§£é¢˜æ€è·¯2åŒå‘bfs"><strong>è§£é¢˜æ€è·¯2ï¼šåŒå‘BFS</strong>ï¼š</h5>
<p>â€‹
åŒå‘bfsé€‚ç”¨äºçŸ¥é“èµ·ç‚¹å’Œç»ˆç‚¹çš„çŠ¶æ€ä¸‹ä½¿ç”¨ï¼Œä»èµ·ç‚¹å’Œç»ˆç‚¹ä¸¤ä¸ªæ–¹å‘å¼€å§‹è¿›è¡Œæœç´¢ï¼Œå¯ä»¥éå¸¸å¤§çš„æé«˜å•ä¸ªbfsçš„æœç´¢æ•ˆç‡</p>
<p>â€‹
åŒæ ·ï¼Œå®ç°ä¹Ÿæ˜¯é€šè¿‡é˜Ÿåˆ—çš„æ–¹å¼ï¼Œå¯ä»¥è®¾ç½®ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªé˜Ÿåˆ—ä¿å­˜ä»èµ·ç‚¹å¼€å§‹æœç´¢çš„çŠ¶æ€ï¼Œå¦ä¸€ä¸ªé˜Ÿåˆ—ç”¨æ¥ä¿å­˜ä»ç»ˆç‚¹å¼€å§‹æœç´¢çš„çŠ¶æ€ï¼Œå¦‚æœæŸä¸€ä¸ªçŠ¶æ€ä¸‹å‡ºç°ç›¸äº¤çš„æƒ…å†µï¼Œé‚£ä¹ˆå°±å‡ºç°äº†ç­”æ¡ˆï¼Œç”¨ä¸€å¼ å›¾æ¥è¿›è¡Œè¯´æ˜å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/jevyd2TPC7FX6GA.png" alt="jevyd2TPC7FX6GA" style="zoom: 33%;" /></p>
<p>â€‹
å…·ä½“å¦‚ä½•å®ç°åˆ¤æ–­ç›¸é‡ï¼Œè§å¦‚ä¸‹çš„ä»£ç ï¼šæˆ‘ä»¬æ„å»ºvisï¼Œä»£è¡¨æŸä¸ªå­—ç¬¦ä¸²çš„ä½ç½®æ˜¯å¦è¢«è®¿é—®è¿‡ã€‚è¿™ä¸ªåœ¨å•å‘çš„BFSä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦è®¾ç½®ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥é€šè¿‡resè¿™ä¸ªHashè¡¨æœ‰æ²¡æœ‰æŸä¸ªå…ƒç´ æ¥è¿›è¡Œåˆ¤æ–­ï¼Œå®é™…ä¸Šæ­¤å¤„çš„visèµ·åˆ°çš„ä¹Ÿå¹¶ä¸æ˜¯åˆ¤æ–­æœ‰æ²¡æœ‰è¢«è®¿é—®è¿‡çš„ä½œç”¨ï¼ˆåé¢ä»£ç è¿˜æ˜¯é€šè¿‡resä¸­æœ‰æ²¡æœ‰æŸä¸ªå…ƒç´ æ¥åˆ¤æ–­çš„ï¼‰ï¼Œæ­¤å¤„çš„visæœ€å¤§çš„ä½œç”¨æ˜¯è®°å½•æŸä¸ªèŠ‚ç‚¹æ˜¯è¢«æ­£å‘æœç´¢è®¿é—®è¿‡ï¼Œè¿˜æ˜¯è¢«åå‘æœç´¢è®¿é—®è¿‡ï¼Œå¦‚æœè¢«æ­£å‘è®¿é—®è¿‡è®¾ç½®ä¸º1ï¼Œè¢«åå‘æœç´¢è®¿é—®è¿‡è®¾ç½®ä¸º2ã€‚</p>
<p>â€‹
åŒæ—¶ï¼Œåœ¨æ¯ä¸€éwhileä¸­ï¼Œæˆ‘ä»¬æ‰©å±•<strong>è¾ƒå°çš„æœç´¢é˜Ÿåˆ—</strong>ï¼Œå¹¶åˆ©ç”¨flagè®°å½•æ‰©å±•çš„æ˜¯å‰å‘è¿˜æ˜¯åå‘ã€‚å¦‚æœåœ¨éå†æŸä¸€è½®çš„é¢†å±…çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°ï¼šcurrç‚¹å’Œé¢†å±…ç‚¹çš„vstç›¸åŠ =3ï¼Œæ„å‘³ç€ä¸¤è€…ä¸€ä¸ªæ˜¯æ­£å‘æœç´¢åºåˆ—ï¼Œä¸€ä¸ªæ˜¯é€†å‘æœç´¢åºåˆ—ï¼Œç›¸é‡äº†ï¼Œæ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬å¯ä»¥è¿”å›ç»“æœï¼Œä¸ç”¨ç»§ç»­ä¸‹å»äº†ã€‚</p>
<h5 id="è§£é¢˜ä»£ç 2">è§£é¢˜ä»£ç 2ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">openLock</span><span class="params">(vector&lt;string&gt;&amp; deadends, string target)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ„å»ºhashè¡¨ï¼Œæ–¹ä¾¿è¿›è¡ŒæŸ¥è¯¢ç»“æœ</span></span><br><span class="line">        unordered_map&lt;string,<span class="type">int</span>&gt; res;</span><br><span class="line">        <span class="comment">//æ„å»ºvisï¼Œä»£è¡¨æŸä¸ªå­—ç¬¦ä¸²çš„ä½ç½®æ˜¯å¦è¢«è®¿é—®è¿‡ è¢«æ­£å‘è®¿é—®è¿‡ä¸º1ï¼Œè¢«åå‘æœç´¢è®¿é—®è¿‡ä¸º2</span></span><br><span class="line">        unordered_map&lt;string,<span class="type">int</span>&gt; vis;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;deadends.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            res[deadends[i]] = <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(res.<span class="built_in">find</span>(<span class="string">&quot;0000&quot;</span>) != res.<span class="built_in">end</span>()) <span class="keyword">return</span> <span class="number">-1</span>; </span><br><span class="line">        <span class="keyword">if</span>(target == <span class="string">&quot;0000&quot;</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//å¼€å¯å¹¿åº¦ä¼˜å…ˆæœç´¢</span></span><br><span class="line">        queue&lt;string&gt; q1;  <span class="comment">//å‰å‘æœç´¢åºåˆ—</span></span><br><span class="line">        queue&lt;string&gt; q2;  <span class="comment">//åå‘æœç´¢åºåˆ—</span></span><br><span class="line">        q1.<span class="built_in">push</span>(<span class="string">&quot;0000&quot;</span>);   <span class="comment">//å‰å‘æœç´¢åˆå§‹åŒ–</span></span><br><span class="line">        q2.<span class="built_in">push</span>(target);   <span class="comment">//åå‘æœç´¢åˆå§‹åŒ–</span></span><br><span class="line">        res[<span class="string">&quot;0000&quot;</span>] = <span class="number">0</span>;   <span class="comment">//å‰å‘æœç´¢åˆå§‹åŒ–</span></span><br><span class="line">        res[target] = <span class="number">0</span>;   <span class="comment">//åå‘æœç´¢åˆå§‹åŒ–</span></span><br><span class="line">        vis[<span class="string">&quot;0000&quot;</span>] = <span class="number">1</span>;	 <span class="comment">//å‰å‘æœç´¢åˆå§‹åŒ–</span></span><br><span class="line">        vis[target] = <span class="number">2</span>;	 <span class="comment">//åå‘æœç´¢åˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">while</span>(!q1.<span class="built_in">empty</span>() &amp;&amp; !q2.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            <span class="comment">//åœ¨æ¯ä¸€éwhileä¸­ï¼Œæˆ‘ä»¬æ‰©å±• è¾ƒå°çš„æœç´¢é˜Ÿåˆ—,åˆ©ç”¨flagè®°å½•æ‰©å±•çš„æ˜¯å‰å‘è¿˜æ˜¯åå‘</span></span><br><span class="line">            string curr;</span><br><span class="line">            <span class="type">bool</span> flag;</span><br><span class="line">            <span class="keyword">if</span>(q1.<span class="built_in">size</span>() &lt; q2.<span class="built_in">size</span>())&#123;</span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">                curr = q1.<span class="built_in">front</span>();</span><br><span class="line">                q1.<span class="built_in">pop</span>();</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                flag = <span class="literal">false</span>;</span><br><span class="line">                curr = q2.<span class="built_in">front</span>();</span><br><span class="line">                q2.<span class="built_in">pop</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å°†currçš„16ä¸ªé¢†å±…å…¨éƒ¨è¿›å…¥é˜Ÿåˆ—ï¼Œå¹¶æ›´æ–°ç»“æœè¡¨ï¼Œ(å¦‚æœå­˜åœ¨deadç‚¹ï¼Œåˆ™ä¸è¿›å…¥é˜Ÿåˆ—)</span></span><br><span class="line">            vector&lt;string&gt; neighbor = <span class="built_in">getNeighbor</span>(curr);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;neighbor.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(res.<span class="built_in">find</span>(neighbor[i]) == res.<span class="built_in">end</span>())&#123; <span class="comment">//å¦‚æœè¿™ä¸ªé¢†å±…ç‚¹ä»æ¥æ²¡è¢«è®¿é—®è¿‡ </span></span><br><span class="line">                    <span class="keyword">if</span>(flag) q1.<span class="built_in">push</span>(neighbor[i]);</span><br><span class="line">                    <span class="keyword">else</span> q2.<span class="built_in">push</span>(neighbor[i]);</span><br><span class="line">                    res[neighbor[i]] = res[curr] + <span class="number">1</span>;</span><br><span class="line">                    vis[neighbor[i]] = vis[curr];  <span class="comment">//ç»§æ‰¿å½“å‰è®¿é—®çš„é˜Ÿåˆ—ç¼–å·ï¼Œ1ä¸ºæ­£å‘ï¼Œ2ä¸ºåå‘</span></span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;  <span class="comment">//å¦‚æœè¿™ä¸ªé¢†å±…ç‚¹è¢«è®¿é—®è¿‡ï¼š</span></span><br><span class="line">                    <span class="keyword">if</span>(vis[neighbor[i]] + vis[curr] == <span class="number">3</span>)&#123;</span><br><span class="line">                        <span class="comment">//å¦‚æœcurrç‚¹å’Œé¢†å±…ç‚¹çš„vstç›¸åŠ =3ï¼Œæ„å‘³ç€ä¸¤è€…ä¸€ä¸ªæ˜¯æ­£å‘æœç´¢åºåˆ—ï¼Œä¸€ä¸ªæ˜¯é€†å‘æœç´¢åºåˆ—ï¼Œç›¸é‡äº†ï¼Œæ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬å¯ä»¥è¿”å›ç»“æœï¼Œä¸ç”¨ç»§ç»­ä¸‹å»äº†</span></span><br><span class="line">                        <span class="keyword">return</span> res[curr] + res[neighbor[i]] + <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;string&gt; <span class="title">getNeighbor</span><span class="params">(string str)</span></span>&#123;</span><br><span class="line">        vector&lt;string&gt; res;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">            string tmp = str;</span><br><span class="line">            <span class="keyword">if</span>(tmp[i] == <span class="string">&#x27;0&#x27;</span>)&#123;</span><br><span class="line">                tmp[i] = <span class="string">&#x27;9&#x27;</span>;</span><br><span class="line">                res.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">                tmp[i] = <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">                res.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(tmp[i] == <span class="string">&#x27;9&#x27;</span>)&#123;</span><br><span class="line">                tmp[i] = <span class="string">&#x27;8&#x27;</span>;</span><br><span class="line">                res.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">                tmp[i] = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                res.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                tmp[i] = tmp[i] + <span class="number">1</span>;</span><br><span class="line">                res.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">                tmp[i] = tmp[i] - <span class="number">2</span>;</span><br><span class="line">                res.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-02-22%20ä¸‹åˆ2.30.39.png" /></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨åŒå‘BFSæ¯”å…ˆå‰çš„å•å‘BFSèŠ‚çœäº†éå¸¸å¤šçš„æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦ã€‚</p>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>DFSä¸BFSç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>BFS</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¾ç³»åˆ—â€”â€”å¤–æ˜Ÿæ–‡å­—å…¸</title>
    <url>/2022/02/25/4e6244e39183/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-114.-å¤–æ˜Ÿæ–‡å­—å…¸"><a
href="https://leetcode-cn.com/problems/Jf1JuT/">å‰‘æŒ‡ Offer II 114.
å¤–æ˜Ÿæ–‡å­—å…¸</a></h4>
<p>ç°æœ‰ä¸€ç§ä½¿ç”¨è‹±è¯­å­—æ¯çš„å¤–æ˜Ÿæ–‡è¯­è¨€ï¼Œè¿™é—¨è¯­è¨€çš„å­—æ¯é¡ºåºä¸è‹±è¯­é¡ºåºä¸åŒã€‚</p>
<p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ words ï¼Œä½œä¸ºè¿™é—¨è¯­è¨€çš„è¯å…¸ï¼Œwords ä¸­çš„å­—ç¬¦ä¸²å·²ç»
æŒ‰è¿™é—¨æ–°è¯­è¨€çš„å­—æ¯é¡ºåºè¿›è¡Œäº†æ’åº</p>
<p>è¯·ä½ æ ¹æ®è¯¥è¯å…¸è¿˜åŸå‡ºæ­¤è¯­è¨€ä¸­å·²çŸ¥çš„å­—æ¯é¡ºåºï¼Œå¹¶ æŒ‰å­—æ¯é€’å¢é¡ºåº
æ’åˆ—ã€‚è‹¥ä¸å­˜åœ¨åˆæ³•å­—æ¯é¡ºåºï¼Œè¿”å› ""
ã€‚è‹¥å­˜åœ¨å¤šç§å¯èƒ½çš„åˆæ³•å­—æ¯é¡ºåºï¼Œè¿”å›å…¶ä¸­ ä»»æ„ä¸€ç§ é¡ºåºå³å¯ã€‚</p>
<p>å­—ç¬¦ä¸² s å­—å…¸é¡ºåºå°äº å­—ç¬¦ä¸² t æœ‰ä¸¤ç§æƒ…å†µï¼š</p>
<ul>
<li>åœ¨ç¬¬ä¸€ä¸ªä¸åŒå­—æ¯å¤„ï¼Œå¦‚æœ s ä¸­çš„å­—æ¯åœ¨è¿™é—¨å¤–æ˜Ÿè¯­è¨€çš„å­—æ¯é¡ºåºä¸­ä½äº t
ä¸­å­—æ¯ä¹‹å‰ï¼Œé‚£ä¹ˆ s çš„å­—å…¸é¡ºåºå°äº t ã€‚</li>
<li>å¦‚æœå‰é¢ min(s.length, t.length) å­—æ¯éƒ½ç›¸åŒï¼Œé‚£ä¹ˆ s.length &lt;
t.length æ—¶ï¼Œs çš„å­—å…¸é¡ºåºä¹Ÿå°äº t ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šwords = [&quot;wrt&quot;,&quot;wrf&quot;,&quot;er&quot;,&quot;ett&quot;,&quot;rftt&quot;]</span><br><span class="line">è¾“å‡ºï¼š&quot;wertf&quot;</span><br></pre></td></tr></table></figure>
<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šwords = [&quot;z&quot;,&quot;x&quot;]</span><br><span class="line">è¾“å‡ºï¼š&quot;zx&quot;</span><br></pre></td></tr></table></figure>
<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šwords = [&quot;z&quot;,&quot;x&quot;,&quot;z&quot;]</span><br><span class="line">è¾“å‡ºï¼š&quot;&quot;</span><br><span class="line">è§£é‡Šï¼šä¸å­˜åœ¨åˆæ³•å­—æ¯é¡ºåºï¼Œå› æ­¤è¿”å› &quot;&quot; ã€‚</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>â€‹ è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“æƒ³åˆ° å»ºå›¾ +
æ‹“æ‰‘æ’åºçš„ã€‚æ•´ä½“è€Œè¨€å¤æ‚åº¦è¾ƒé«˜ï¼Œä½†æ˜¯æ€è·¯åº”è¯¥æ¯”è¾ƒæ¸…æ™°ï¼Œä¸»è¦è¿‡ç¨‹å°±æ˜¯åˆ†ä¸ºä¸¤æ­¥ï¼š1ã€å»ºå›¾ï¼Œä»ç›¸é‚»çš„å•è¯ä¹‹é—´è·å–ä¿¡æ¯
2ã€æ‹“æ‰‘æ’åºï¼Œå¾—åˆ°ç»“æœã€‚</p>
<p>â€‹
å…¶ä¸­ä¸¤ä¸ªå·¥å…·å‡½æ•°æ¯”è¾ƒé‡è¦ï¼š<strong>ä¸€ä¸ªæ˜¯å¸¸è§çš„transformå‡½æ•°</strong>ï¼Œèƒ½å¤Ÿä»¥O(1)çš„æ—¶é—´å¤æ‚åº¦ï¼Œç”¨å“ˆå¸Œè¡¨ç»™æ¯ä¸ªå­—ç¬¦èµ‹äºˆä¸€ä¸ªIDï¼Œæ–¹ä¾¿åç»­è¿›è¡Œæ‹“æ‰‘æ’åºã€‚<strong>å¦ä¸€ä¸ªå°±æ˜¯getInfoå‡½æ•°</strong>ï¼Œå…¶æ¥å—ä¸¤ä¸ªå­—ç¬¦ä¸²s1å’Œs2ï¼Œå·²çŸ¥s1&lt;s2çš„æƒ…å†µä¸‹ï¼Œè¿”å›ä¸€ä¸ª<code>vector&lt;char&gt;</code>ï¼Œç¬¬ä¸€ä½ä»£è¡¨çŠ¶æ€ï¼Œç¬¬äºŒä¸‰ä½ä»£è¡¨å…¶èƒ½å¤Ÿä»ä¸­å¾—åˆ°çš„å­—ç¬¦å­—å…¸åºä¿¡æ¯ã€‚å…·ä½“è§ä»£ç æ³¨é‡Šï¼š</p>
<h5 id="è§£é¢˜ä»£ç "><strong>è§£é¢˜ä»£ç </strong>ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    unordered_map&lt;<span class="type">char</span>,<span class="type">int</span>&gt; char2int;</span><br><span class="line">    unordered_map&lt;<span class="type">int</span>,<span class="type">char</span>&gt; int2char;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">transform</span><span class="params">(<span class="type">char</span> c)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(char2int.<span class="built_in">find</span>(c) == char2int.<span class="built_in">end</span>())&#123;</span><br><span class="line">            char2int[c] = char2int.<span class="built_in">size</span>();</span><br><span class="line">            int2char[char2int.<span class="built_in">size</span>() - <span class="number">1</span>] = c;</span><br><span class="line">            <span class="keyword">return</span> char2int.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> char2int[c];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">string <span class="title">alienOrder</span><span class="params">(vector&lt;string&gt;&amp; words)</span> </span>&#123;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">graph</span>(<span class="number">26</span>);</span><br><span class="line">        <span class="function">vector&lt;<span class="type">bool</span>&gt; <span class="title">isVisited</span><span class="params">(<span class="number">26</span>*<span class="number">26</span>,<span class="literal">false</span>)</span></span>;</span><br><span class="line">        <span class="comment">//å…ˆæŠŠæ‰€æœ‰å­—ç¬¦æ·»åŠ è¿›å»</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;words.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;words[i].<span class="built_in">length</span>();j++)&#123;</span><br><span class="line">                <span class="built_in">transform</span>(words[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ„å»ºå›¾</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;words.<span class="built_in">size</span>()<span class="number">-1</span>;i++)&#123;</span><br><span class="line">            vector&lt;<span class="type">char</span>&gt; t = <span class="built_in">getInfo</span>(words[i],words[i+<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">if</span>(t[<span class="number">0</span>] == <span class="string">&#x27;2&#x27;</span>) <span class="keyword">continue</span>;  <span class="comment">// ä»…é•¿åº¦ä¸ä¸€æ ·ï¼Œæ— ä¿¡æ¯</span></span><br><span class="line">            <span class="keyword">if</span>(t[<span class="number">0</span>] == <span class="string">&#x27;0&#x27;</span>) <span class="keyword">return</span> <span class="string">&quot;&quot;</span>; <span class="comment">//ç›´æ¥ä¸éœ€è¦åç»­çš„æ“ä½œäº†ï¼Œå› ä¸ºå·²ç»è¿åè§„åˆ™äº†</span></span><br><span class="line">            <span class="comment">// t[1] &lt; t[2] , æ„å»ºå›¾ , t[1] -&gt; t[2]</span></span><br><span class="line">            <span class="type">int</span> idx1 = <span class="built_in">transform</span>(t[<span class="number">1</span>]);</span><br><span class="line">            <span class="type">int</span> idx2 = <span class="built_in">transform</span>(t[<span class="number">2</span>]);</span><br><span class="line">            <span class="keyword">if</span>(!isVisited[idx1 * <span class="number">26</span> + idx2])&#123;  <span class="comment">//ç”¨äºè®°å½• idx1-&gt;idx2è¿™ä¸ªå…³ç³»æœ‰æ²¡æœ‰æ·»åŠ è¿‡</span></span><br><span class="line">                isVisited[idx1 * <span class="number">26</span> + idx2] = <span class="literal">true</span>;</span><br><span class="line">                graph[idx1].<span class="built_in">push_back</span>(idx2);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ‹“æ‰‘æ’åºï¼š</span></span><br><span class="line">        <span class="type">int</span> n = char2int.<span class="built_in">size</span>(); <span class="comment">// èŠ‚ç‚¹ä¸ªæ•°</span></span><br><span class="line">        <span class="comment">// å¦‚æœå›¾ä¸­æœ‰ç¯ï¼Œåˆ™ä¸å­˜åœ¨åˆç†çš„æƒ…å†µ æ‹“æ‰‘æ’åºä¼šå¤±è´¥ã€‚èŠ‚ç‚¹æ•°ä¸=n</span></span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">inDegree</span><span class="params">(n)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="comment">//éå†æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè®¡ç®—å…¥åº¦</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;graph[i].<span class="built_in">size</span>();j++)&#123;</span><br><span class="line">                inDegree[graph[i][j]]++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¯¹äºæ‰€æœ‰å…¥åº¦ä¸º0çš„èŠ‚ç‚¹å…¥é˜Ÿåˆ—</span></span><br><span class="line">        queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(inDegree[i] == <span class="number">0</span>) q.<span class="built_in">push</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">        string res = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            <span class="type">int</span> curr = q.<span class="built_in">front</span>();</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">            res += int2char[curr];</span><br><span class="line">            count++;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;graph[curr].<span class="built_in">size</span>();j++)&#123;</span><br><span class="line">                inDegree[graph[curr][j]]--;</span><br><span class="line">                <span class="keyword">if</span>(inDegree[graph[curr][j]] == <span class="number">0</span>) q.<span class="built_in">push</span>(graph[curr][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(count == n) <span class="keyword">return</span> res;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">vector&lt;<span class="type">char</span>&gt; <span class="title">getInfo</span><span class="params">(string &amp;s1,string &amp;s2)</span></span>&#123;</span><br><span class="line">        <span class="comment">// è¯¥å‡½æ•°ç”¨äºè¿”å›ä»å­—ç¬¦ä¸²s1&lt;s2è¿™ä¸ªä¿¡æ¯ä¸­è·å¾—çš„æœ‰ç”¨ä¿¡æ¯ï¼Œç¬¬ä¸€ä½ä¸ºçŠ¶æ€åˆ¤æ–­ä½ï¼Œä¾›å‡½æ•°è°ƒç”¨è€…åˆ¤æ–­çŠ¶æ€</span></span><br><span class="line">        <span class="comment">// 0 - ä»£è¡¨æ’åºæœ‰è¯¯ï¼šè¯¥çŠ¶æ€ä»£è¡¨ s1æ¯”s2é•¿ï¼Œä¸”å…¬å…±éƒ¨åˆ†å†…å®¹ç›¸åŒï¼Œä½†æ˜¯å´åˆ¤æ–­s1&lt;s2ï¼Œè°ƒç”¨è€…é‡åˆ°æ­¤çŠ¶æ€ä¸Šå±‚å¯ç›´æ¥è¿”å›ä¸åˆç†å³å¯ã€‚</span></span><br><span class="line">        <span class="comment">// 1 - ä»£è¡¨æœ‰å¯ç”¨ä¿¡æ¯: t[1] åœ¨ t[2] å‰é¢</span></span><br><span class="line">        <span class="comment">// 2 - ä»£è¡¨æ— å¯ç”¨ä¿¡æ¯ï¼Œä»£è¡¨ s1&lt;s2 ä»…å› ä¸ºé•¿åº¦ä¸åŒå¯¼è‡´ï¼Œæ— æ³•è·å–å­—ç¬¦çš„å‰åé¡ºåº</span></span><br><span class="line">        vector&lt;<span class="type">char</span>&gt; res;</span><br><span class="line">        <span class="type">int</span> len1 = s1.<span class="built_in">length</span>();</span><br><span class="line">        <span class="type">int</span> len2 = s2.<span class="built_in">length</span>();</span><br><span class="line">        <span class="type">int</span> min_len = <span class="built_in">min</span>(len1,len2);</span><br><span class="line">        <span class="type">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;min_len;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s1[i] != s2[i])&#123;</span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">                res.<span class="built_in">push_back</span>(<span class="string">&#x27;1&#x27;</span>);   <span class="comment">//ç¬¬ä¸€ä½ä¸ºçŠ¶æ€åˆ¤æ–­ä½ 1-ä»£è¡¨æœ‰å¯ç”¨ä¿¡æ¯</span></span><br><span class="line">                res.<span class="built_in">push_back</span>(s1[i]);</span><br><span class="line">                res.<span class="built_in">push_back</span>(s2[i]);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(len1 &gt; len2 &amp;&amp; !flag)&#123;</span><br><span class="line">            <span class="comment">//å¦‚æœs1æ¯”s2é•¿ï¼Œä¸”åœ¨å…¬å…±éƒ¨åˆ†æ²¡æ‰¾åˆ°å†…å®¹çš„è¯ï¼Œå·²ç»å°±ä¸å¯èƒ½äº†</span></span><br><span class="line">            res.<span class="built_in">push_back</span>(<span class="string">&#x27;0&#x27;</span>); <span class="comment">//ç¬¬ä¸€ä½ä¸ºçŠ¶æ€åˆ¤æ–­ä½ 0-ä»£è¡¨æœ‰ä¿¡æ¯ï¼šè¿™ä¸ªä¿¡æ¯å‘Šè¯‰æˆ‘ä»¬æ’åºå·²ç»ä¸å¯èƒ½äº†</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(len1 &lt;= len2 &amp;&amp; !flag)&#123;</span><br><span class="line">            res.<span class="built_in">push_back</span>(<span class="string">&#x27;2&#x27;</span>); <span class="comment">//ç¬¬ä¸€ä½ä¸ºçŠ¶æ€åˆ¤æ–­ä½ 2-ä»£è¡¨æ— æœ‰ç”¨ä¿¡æ¯</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;  </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>å›¾ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>graph</tag>
        <tag>topological sort</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¾ç³»åˆ—â€”â€”å¤šä½™çš„è¾¹ï¼ˆDSUåº”ç”¨ï¼‰</title>
    <url>/2022/02/21/0f9e9b187c29/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-118.-å¤šä½™çš„è¾¹"><a
href="https://leetcode-cn.com/problems/7LpjUW/">å‰‘æŒ‡ Offer II 118.
å¤šä½™çš„è¾¹</a></h4>
<p>â€‹ æ ‘å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªè¿é€šä¸” æ— ç¯ çš„ æ— å‘ å›¾ã€‚</p>
<p>â€‹ ç»™å®šå¾€ä¸€æ£µ n ä¸ªèŠ‚ç‚¹ (èŠ‚ç‚¹å€¼ 1ï½n)
çš„æ ‘ä¸­æ·»åŠ ä¸€æ¡è¾¹åçš„å›¾ã€‚æ·»åŠ çš„è¾¹çš„ä¸¤ä¸ªé¡¶ç‚¹åŒ…å«åœ¨ 1 åˆ° n
ä¸­é—´ï¼Œä¸”è¿™æ¡é™„åŠ çš„è¾¹ä¸å±äºæ ‘ä¸­å·²å­˜åœ¨çš„è¾¹ã€‚å›¾çš„ä¿¡æ¯è®°å½•äºé•¿åº¦ä¸º n
çš„äºŒç»´æ•°ç»„ edges ï¼Œedges[i] = [ai, bi] è¡¨ç¤ºå›¾ä¸­åœ¨ ai å’Œ bi
ä¹‹é—´å­˜åœ¨ä¸€æ¡è¾¹ã€‚</p>
<p>â€‹ è¯·æ‰¾å‡ºä¸€æ¡å¯ä»¥åˆ å»çš„è¾¹ï¼Œåˆ é™¤åå¯ä½¿å¾—å‰©ä½™éƒ¨åˆ†æ˜¯ä¸€ä¸ªæœ‰ç€ n
ä¸ªèŠ‚ç‚¹çš„æ ‘ã€‚å¦‚æœæœ‰å¤šä¸ªç­”æ¡ˆï¼Œåˆ™è¿”å›æ•°ç»„ edges ä¸­æœ€åå‡ºç°çš„è¾¹ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/1626676174-hOEVUL-image.png" style="zoom: 50%;" /></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: edges = [[1,2],[1,3],[2,3]]</span><br><span class="line">è¾“å‡º: [2,3]</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>â€‹
ä¸€å¼€å§‹ï¼Œæˆ‘çš„æ€è·¯æ˜¯æ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œèƒ½å¤Ÿåˆ¤æ–­ä¸€ä¸ªå›¾æœ‰æ— ç¯ã€‚æ¯«æ— ç–‘é—®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ‹“æ‰‘æ’åºå»è¿›è¡Œè¿™ä¸ªæ€è·¯ï¼Œä½†æ˜¯è¿™æ ·å­çš„è¯ï¼Œå¯¹äºæ¯åˆ æ‰ä¸€æ¡è¾¹å°±è¦è¿›è¡Œä¸€æ¬¡æ‹“æ‰‘æ’åºæ¥åˆ¤æ–­ï¼Œæ—¶é—´å¤æ‚åº¦æ— ç–‘æ˜¯æ¯”è¾ƒé«˜çš„ã€‚</p>
<p>â€‹
è¿™ä¸ªæ—¶å€™ï¼ŒæŸ¥çœ‹å®˜æ–¹è§£ç­”ï¼ŒåŸæ¥è¿™ç±»é¢˜ç›®è¿˜å¯ä»¥ä½¿ç”¨<strong>å¹¶æŸ¥é›†</strong>æ¥åšï¼š</p>
<p>â€‹
åˆå§‹æ—¶ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å±äºä¸åŒçš„è¿é€šåˆ†é‡ã€‚éå†æ¯ä¸€æ¡è¾¹ï¼Œåˆ¤æ–­è¿™æ¡è¾¹è¿æ¥çš„ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦å±äºç›¸åŒçš„è¿é€šåˆ†é‡ã€‚</p>
<ul>
<li>å¦‚æœä¸¤ä¸ªé¡¶ç‚¹å±äºä¸åŒçš„è¿é€šåˆ†é‡ï¼Œåˆ™è¯´æ˜åœ¨éå†åˆ°å½“å‰çš„è¾¹ä¹‹å‰ï¼Œè¿™ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´ä¸è¿é€šï¼Œå› æ­¤å½“å‰çš„è¾¹ä¸ä¼šå¯¼è‡´ç¯å‡ºç°ï¼Œåˆå¹¶è¿™ä¸¤ä¸ªé¡¶ç‚¹çš„è¿é€šåˆ†é‡ã€‚</li>
<li>å¦‚æœä¸¤ä¸ªé¡¶ç‚¹å±äºç›¸åŒçš„è¿é€šåˆ†é‡ï¼Œåˆ™è¯´æ˜åœ¨éå†åˆ°å½“å‰çš„è¾¹ä¹‹å‰ï¼Œè¿™ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´å·²ç»è¿é€šï¼Œå› æ­¤å½“å‰çš„è¾¹å¯¼è‡´ç¯å‡ºç°ï¼Œä¸ºå¤šä½™çš„è¾¹ï¼Œå°†å½“å‰çš„è¾¹ä½œä¸ºç­”æ¡ˆè¿”å›ã€‚</li>
</ul>
<h5 id="è§£é¢˜ä»£ç "><strong>è§£é¢˜ä»£ç </strong>ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">findRedundantConnection</span><span class="params">(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; edges)</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">root</span><span class="params">(<span class="number">1001</span>,<span class="number">-1</span>)</span></span>;</span><br><span class="line">        <span class="type">int</span> i;</span><br><span class="line">        <span class="keyword">for</span>(i =<span class="number">0</span>;i&lt;edges.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="type">bool</span> res = <span class="built_in">unionTwo</span>(edges[i][<span class="number">0</span>],edges[i][<span class="number">1</span>],root);</span><br><span class="line">            <span class="keyword">if</span>(!res) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> edges[i]; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getRoot</span><span class="params">(<span class="type">int</span> index,vector&lt;<span class="type">int</span>&gt; &amp;root)</span></span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(root[index] != <span class="number">-1</span>)&#123;</span><br><span class="line">            index = root[index];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> index;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">unionTwo</span><span class="params">(<span class="type">int</span> index1,<span class="type">int</span> index2,vector&lt;<span class="type">int</span>&gt; &amp;root)</span></span>&#123;</span><br><span class="line">        <span class="type">int</span> root1 = <span class="built_in">getRoot</span>(index1,root);</span><br><span class="line">        <span class="type">int</span> root2 = <span class="built_in">getRoot</span>(index2,root);</span><br><span class="line">        <span class="keyword">if</span>(root1 != root2)&#123;</span><br><span class="line">            root[root1] = root2;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>å›¾ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>graph</tag>
        <tag>DSU</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¾ç³»åˆ—â€”â€”é‡å»ºåºåˆ—</title>
    <url>/2022/02/26/16bfad4011e0/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-115.-é‡å»ºåºåˆ—"><a
href="https://leetcode-cn.com/problems/ur2n8P/">å‰‘æŒ‡ Offer II 115.
é‡å»ºåºåˆ—</a></h4>
<p>è¯·åˆ¤æ–­åŸå§‹çš„åºåˆ— org æ˜¯å¦å¯ä»¥ä»åºåˆ—é›† seqs ä¸­å”¯ä¸€åœ° é‡å»º ã€‚</p>
<p>åºåˆ— org æ˜¯ 1 åˆ° n æ•´æ•°çš„æ’åˆ—ï¼Œå…¶ä¸­ 1 â‰¤ n â‰¤ 10^4ã€‚é‡å»º æ˜¯æŒ‡åœ¨åºåˆ—é›†
seqs ä¸­æ„å»ºæœ€çŸ­çš„å…¬å…±è¶…åºåˆ—ï¼Œå³ seqs
ä¸­çš„ä»»æ„åºåˆ—éƒ½æ˜¯è¯¥æœ€çŸ­åºåˆ—çš„å­åºåˆ—ã€‚</p>
<p>ç¤ºä¾‹ 1ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: org = [1,2,3], seqs = [[1,2],[1,3]]</span><br><span class="line">è¾“å‡º: false</span><br><span class="line">è§£é‡Šï¼š[1,2,3] ä¸æ˜¯å¯ä»¥è¢«é‡å»ºçš„å”¯ä¸€çš„åºåˆ—ï¼Œå› ä¸º [1,3,2] ä¹Ÿæ˜¯ä¸€ä¸ªåˆæ³•çš„åºåˆ—ã€‚</span><br></pre></td></tr></table></figure>
<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: org = [1,2,3], seqs = [[1,2]]</span><br><span class="line">è¾“å‡º: false</span><br><span class="line">è§£é‡Šï¼šå¯ä»¥é‡å»ºçš„åºåˆ—åªæœ‰ [1,2]ã€‚</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ 3ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: org = [1,2,3], seqs = [[1,2],[1,3],[2,3]]</span><br><span class="line">è¾“å‡º: true</span><br><span class="line">è§£é‡Šï¼šåºåˆ— [1,2], [1,3] å’Œ [2,3] å¯ä»¥è¢«å”¯ä¸€åœ°é‡å»ºä¸ºåŸå§‹çš„åºåˆ— [1,2,3]ã€‚</span><br></pre></td></tr></table></figure>
<p>æç¤ºï¼š</p>
<pre><code>1 &lt;= n &lt;= 10^4
org æ˜¯æ•°å­— 1 åˆ° n çš„ä¸€ä¸ªæ’åˆ—
1 &lt;= segs[i].length &lt;= 10^5
seqs[i][j] æ˜¯ 32 ä½æœ‰ç¬¦å·æ•´æ•°</code></pre>
<h5 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯ï¼š</h5>
<p>â€‹ æœ¬é¢˜ä¸<a
href="https://blog.fantast.top/2022/02/25/4e6244e39183/">[å¤–æ˜Ÿæ–‡å­—å…¸](https://blog.fantast.top/2022/02/25/4e6244e39183/)</a>
ç›¸ä¼¼ï¼Œéƒ½æ˜¯é€šè¿‡åºåˆ—seqsè·å–æ‹“æ‰‘æ’åºä¿¡æ¯ï¼Œç„¶åä¾æ®æ‹“æ‰‘æ’åºï¼Œè§‚å¯Ÿæ˜¯å¦ä¸orgä¸€è‡´ï¼Œä»è€Œè¾¾åˆ°é¢˜ç›®è¦æ±‚ç›®çš„ã€‚å…·ä½“å¯ä»¥å‚ç…§å®˜æ–¹æ€è·¯ï¼Œæœ¬é¢˜å› ä¸ºå·²ç»è¿‡äº†ä¸€åˆ·æµ‹è¯•ç‚¹ï¼Œä»…åœ¨æ­¤è®°å½•</p>
<h5 id="è§£é¢˜ä»£ç ">è§£é¢˜ä»£ç ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">sequenceReconstruction</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; org, vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; seqs)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = org.<span class="built_in">size</span>();</span><br><span class="line">        <span class="comment">// è¾¹é›†</span></span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">edges</span>(n + <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// å…¥åº¦</span></span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">inDegree</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">        <span class="comment">// è®°å½•seqsä¸­çš„ç»“ç‚¹ï¼Œå¯èƒ½æœ‰ä¸åœ¨orgé‡Œçš„è¿™æ—¶å€™å°±è¦åœäº†è¿”å›false</span></span><br><span class="line">        <span class="comment">// org æ˜¯ä¸€å®šæ˜¯æ•°å­— 1 åˆ° n çš„ä¸€ä¸ªæ’åˆ—ï¼Œ ä½†seqså¾ˆè‡ªç”±</span></span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">nodes</span><span class="params">(n + <span class="number">1</span>)</span></span>; </span><br><span class="line">        <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">const</span> vector&lt;<span class="type">int</span>&gt;&amp; seq : seqs) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; seq.<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">                <span class="comment">// ä¸å†orgèŒƒå›´äº†</span></span><br><span class="line">                <span class="keyword">if</span> (seq[i] &lt; <span class="number">0</span> || seq[i] &gt; n) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                <span class="comment">// è®°å½•å‡ºç°ç»“ç‚¹æ•°</span></span><br><span class="line">                <span class="keyword">if</span> (++nodes[seq[i]] == <span class="number">1</span>) cnt++;</span><br><span class="line">                <span class="keyword">if</span> (i == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                edges[seq[i - <span class="number">1</span>]].<span class="built_in">push_back</span>(seq[i]);</span><br><span class="line">                inDegree[seq[i]]++;</span><br><span class="line">            &#125;            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç»“ç‚¹æ•°ä¸åŒ</span></span><br><span class="line">        <span class="keyword">if</span> (cnt != n) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">// ç”¨é˜Ÿåˆ—å’Œæ ˆéƒ½å¯</span></span><br><span class="line">        queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">            <span class="keyword">if</span> (inDegree[i] == <span class="number">0</span>) q.<span class="built_in">push</span>(i);</span><br><span class="line">        <span class="type">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="comment">// é˜Ÿåˆ—ä¸­æœ‰2ä¸ªä»¥ä¸Šç»“ç‚¹ï¼Œå°±æœ‰2ç§ä»¥ä¸Šå¯èƒ½ä¸å”¯ä¸€äº†</span></span><br><span class="line">            <span class="keyword">if</span> (q.<span class="built_in">size</span>() &gt; <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            <span class="type">int</span> node = q.<span class="built_in">front</span>();</span><br><span class="line">            <span class="keyword">if</span> (org[index] != node) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            index++;   </span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= edges[node].<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">                <span class="keyword">if</span> (--inDegree[edges[node][i - <span class="number">1</span>]] == <span class="number">0</span>)</span><br><span class="line">                    q.<span class="built_in">push</span>(edges[node][i - <span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> index == n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>å›¾ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>graph</tag>
        <tag>topological sort</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¾ç³»åˆ—â€”â€”çŸ©é˜µä¸­çš„è·ç¦»</title>
    <url>/2022/02/21/80b7b127a404/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-107.-çŸ©é˜µä¸­çš„è·ç¦»"><a
href="https://leetcode-cn.com/problems/2bCMpM/">å‰‘æŒ‡ Offer II 107.
çŸ©é˜µä¸­çš„è·ç¦»</a></h4>
<p>â€‹ ç»™å®šä¸€ä¸ªç”± 0 å’Œ 1 ç»„æˆçš„çŸ©é˜µ mat
ï¼Œè¯·è¾“å‡ºä¸€ä¸ªå¤§å°ç›¸åŒçš„çŸ©é˜µï¼Œå…¶ä¸­æ¯ä¸€ä¸ªæ ¼å­æ˜¯ mat ä¸­å¯¹åº”ä½ç½®å…ƒç´ åˆ°æœ€è¿‘çš„
0 çš„è·ç¦»ã€‚</p>
<p>â€‹ ä¸¤ä¸ªç›¸é‚»å…ƒç´ é—´çš„è·ç¦»ä¸º 1 ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/1626667201-NCWmuP-image.png" alt="img" style="zoom: 50%;" /></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šmat = [[0,0,0],[0,1,0],[0,0,0]]</span><br><span class="line">è¾“å‡ºï¼š[[0,0,0],[0,1,0],[0,0,0]]</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯1å¤šæºbfs"><strong>è§£é¢˜æ€è·¯1:å¤šæºBFS</strong></h5>
<p>â€‹
ä¸€å¼€å§‹çœ‹è¿™é¢˜ï¼Œåº”å½“èƒ½å¤Ÿè¾ƒå¿«çš„ååº”ä½¿ç”¨BFSè¿›è¡Œè§£ç­”ï¼Œä½†æ ¸å¿ƒçš„é—®é¢˜åœ¨äºï¼Œå¦‚æœä½¿ç”¨ä¼ ç»Ÿ
çš„BFSè¿›è¡Œè§£ç­”ï¼Œèµ·ç‚¹æ˜¯ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç»ˆç‚¹ä¸ºä»»æ„ä¸€ä¸ªå€¼ä¸º0çš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦åšå¾ˆå¤šéBFSæ‰èƒ½å¤Ÿè§£å†³é—®é¢˜ã€‚</p>
<p>â€‹
æ•…è€Œï¼Œæœ¬é¢˜ä¸­æ‰€æ¶‰åŠåˆ°çš„æ˜¯ä¸€ä¸ªå«åš<strong>å¤šæºBFS</strong>çš„æ–¹æ³•ï¼Œå…¶å®å¤šæºçš„BFSå’Œå•æºBFSéå¸¸ç›¸ä¼¼ï¼Œåœ¨ä¸Šè¿°é—®é¢˜ä¸­ï¼Œæ•´ä½“æ€è·¯å¦‚ä¸‹ï¼šé¦–å…ˆæˆ‘ä»¬éå†æ•´ä¸ªçŸ©é˜µï¼Œå°†æ‰€æœ‰çš„å€¼ä¸º0çš„èŠ‚ç‚¹å¾—å‡ºç»“æœï¼Œå¹¶åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­å»ã€‚æˆ‘ä»¬é‡‡ç”¨é€†å‘æ€ç»´çš„æ–¹æ³•ï¼Œå°†è¿™äº›å€¼ä¸º0çš„èŠ‚ç‚¹å…¨éƒ¨æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œä¸”è¿™äº›å€¼ä¸º0çš„èŠ‚ç‚¹å¯¹åº”çš„ç»“æœè·ç¦»ä¹Ÿä¸º0ï¼Œåç»­ç»ç”±å®ƒä»¬æ‰©æ•£å¾—åˆ°çš„åˆ«çš„ç‚¹çš„è·ç¦»ï¼Œæ˜¯åœ¨å®ƒä»¬çš„è·ç¦»0çš„åŸºç¡€ä¸Šé€æ¸è¿›è¡Œå åŠ çš„ï¼Œç›´åˆ°æ‰©æ•£è‡³å…¨å›¾èŒƒå›´ï¼Œæˆ‘ä»¬çš„å¤šæºBFSä¹Ÿå°±å®Œæˆäº†ã€‚</p>
<p>â€‹
æœ‰ä¸€ä¸ªå¯èƒ½ä¼šä»¤äººæ‹…å¿§çš„é—®é¢˜ï¼šé‚£å°±æ˜¯å¦‚æœæŸä¸€ä¸ªç‚¹ä¸€å¼€å§‹è¢«éå†åˆ°ï¼Œè®¾å®šå¥½å€¼ä»¥åï¼Œåé¢å†ä½œä¸ºåˆ«äººçš„é¢†å±…åŒ—éå†åˆ°çš„æ—¶å€™ï¼Œä¼šä¸ä¼šè¦è®¾å®šçš„å€¼æ¯”ä¹‹å‰è®¾å®šçš„å€¼å°å‘¢ï¼Ÿè¿™æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯BFSï¼Œä¸€å±‚å±‚åƒæ³¢çº¹ä¸€æ ·å‘å¤–æ‰©æ•£ï¼Œåéå†åˆ°çš„è®¾å®šçš„å€¼ï¼Œå¿…å®šå¤§äºæˆ–ç­‰äºå…ˆå‰è®¾å®šçš„å€¼ã€‚æ‰€ä»¥ä¸éœ€è¦æ‹…å¿ƒã€‚</p>
<h5 id="è§£é¢˜ä»£ç "><strong>è§£é¢˜ä»£ç ï¼š</strong></h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; neighbor = &#123; &#123;<span class="number">-1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">-1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">1</span>&#125; &#125;;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">updateMatrix</span>(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; mat) &#123;</span><br><span class="line">        <span class="type">int</span> m = mat.<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> n = mat[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">res</span>(m,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n,<span class="number">-1</span>)); <span class="comment">//åˆå§‹åŒ–ä¸º-1ï¼Œä»£è¡¨æœªè®¿é—®è¿‡çš„ç‚¹</span></span><br><span class="line">        queue&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&gt; q;</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–é‚£äº›0çš„ç‚¹ï¼Œresä¹Ÿåº”å½“ä¸º0ï¼Œå°†ä»–ä»¬å…¥é˜Ÿ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(mat[i][j] == <span class="number">0</span>)&#123;</span><br><span class="line">                    q.<span class="built_in">push</span>(&#123;i,j&#125;);</span><br><span class="line">                    res[i][j] = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            <span class="type">int</span> x = q.<span class="built_in">front</span>().first;</span><br><span class="line">            <span class="type">int</span> y = q.<span class="built_in">front</span>().second;</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">                <span class="type">int</span> new_x = x + neighbor[i][<span class="number">0</span>];</span><br><span class="line">                <span class="type">int</span> new_y = y + neighbor[i][<span class="number">1</span>];</span><br><span class="line">              	<span class="comment">//å¦‚æœèŠ‚ç‚¹ä¸åˆæ³•ï¼Œæˆ–è€…èŠ‚ç‚¹å·²ç»è®¿é—®è¿‡äº†ï¼Œç›´æ¥è·³è¿‡</span></span><br><span class="line">                <span class="keyword">if</span>(new_x &lt; <span class="number">0</span> || new_x &gt;= m || new_y &lt; <span class="number">0</span> || new_y &gt;= n || res[new_x][new_y] != <span class="number">-1</span>) <span class="keyword">continue</span>;</span><br><span class="line">              	<span class="comment">//è®¡ç®—resï¼Œpushè¿›å…¥</span></span><br><span class="line">                res[new_x][new_y] = res[x][y] + <span class="number">1</span>;</span><br><span class="line">                q.<span class="built_in">push</span>(&#123;new_x,new_y&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯2åŠ¨æ€è§„åˆ’"><strong>è§£é¢˜æ€è·¯2:åŠ¨æ€è§„åˆ’</strong></h5>
<p>â€‹ <strong>é‡‡ç”¨DPï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š</strong> <span
class="math display">\[
f(i,j) =  1 + min(\ f(i âˆ’ 1, j),\  f(i, j âˆ’ 1),\ f(i + 1, j), \ f(i, j +
1) \ \ )\ \ \ \ \  if (matrix[i][j] == 1)
\]</span></p>
<p><span class="math display">\[
f(i,j)=  0 \ \ \ \ \ \   if (matrix[i][j] == 0)
\]</span></p>
<p>â€‹
æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ï¼ŒæŒ‰ç…§ä¸Šè¿°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œæˆ‘ä»¬å¥½åƒæ²¡æœ‰ä¸€ä¸ªåŠæ³•éå†<code>iï¼Œj</code>ï¼Œèƒ½å¤Ÿä¿è¯æ»¡è¶³ï¼Œåœ¨è®¡ç®—<span
class="math inline">\(f(i,j)\)</span>å‰ï¼Œæˆ‘ä»¬ä¸€å®šå·²ç»è·çŸ¥äº†<span
class="math inline">\(f(i-1,j)\)</span> å’Œ<span
class="math inline">\(f(i+1,j)\)</span> å’Œ<span
class="math inline">\(f(i,j-1)\)</span> å’Œ<span
class="math inline">\(f(i,j+1)\)</span>è¿™å››ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦åˆ†ä¸¤æ­¥æ¥è¿›è¡Œè®¡ç®—éå†ï¼Œå…ˆä»å·¦ä¸Šè§’å¾€å³ä¸‹è§’è®¡ç®—ä¸€éï¼Œè®¡ç®—çš„æ—¶å€™ä»…è€ƒè™‘
<span class="math inline">\(f(i-1,j)\)</span> å’Œ<span
class="math inline">\(f(i,j-1)\)</span>
è¿™ä¸¤ä¸ªèŠ‚ç‚¹ã€‚å†ä»å³ä¸‹è§’å¾€å·¦ä¸Šè§’è®¡ç®—ä¸€éï¼Œè®¡ç®—çš„æ—¶å€™ä»…è€ƒè™‘ <span
class="math inline">\(f(i+1,j)\)</span> å’Œ<span
class="math inline">\(f(i,j+1)\)</span>
è¿™ä¸¤ä¸ªèŠ‚ç‚¹ã€‚ç”±äºåœ¨å‰é¢ä¸€ééå†ä¸­ï¼Œä¼šå°†ç»“æœå­˜åœ¨<span
class="math inline">\(f(i,j)\)</span>ä¸­ï¼Œå†ç¬¬äºŒè½®éå†çš„æ—¶å€™ï¼Œåªè¦å°†é‚£ä¸¤ä¸ªèŠ‚ç‚¹å’Œå½“å‰èŠ‚ç‚¹æ¯”è¾ƒï¼Œå°±ç›¸å½“äºå®Œæˆäº†å’Œä¸Šä¸€è½®éå†ä¸­çš„ä¸¤ä¸ªèŠ‚ç‚¹æ¯”è¾ƒã€‚æ•…è€Œèƒ½å¤Ÿè¾¾åˆ°å’Œä¸Šè¿°çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸€è‡´çš„æ•ˆæœï¼Œå…·ä½“è¯·çœ‹ä»£ç ï¼š</p>
<h5 id="è§£é¢˜ä»£ç -1"><strong>è§£é¢˜ä»£ç ï¼š</strong></h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">updateMatrix</span>(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; mat) &#123;</span><br><span class="line">        <span class="type">int</span> m = mat.<span class="built_in">size</span>(), n = mat[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(m, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) </span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++) </span><br><span class="line">                dp[i][j] = mat[i][j] == <span class="number">0</span> ? <span class="number">0</span> : <span class="number">1e7</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä»å·¦ä¸Šè§’å¼€å§‹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i - <span class="number">1</span> &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    dp[i][j] = <span class="built_in">min</span>(dp[i][j], dp[i - <span class="number">1</span>][j] + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (j - <span class="number">1</span> &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    dp[i][j] = <span class="built_in">mibn</span>(dp[i][j], dp[i][j - <span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä»å³ä¸‹è§’å¼€å§‹</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = m - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = n - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i + <span class="number">1</span> &lt; m) &#123;</span><br><span class="line">                    dp[i][j] = <span class="built_in">min</span>(dp[i][j], dp[i + <span class="number">1</span>][j] + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (j + <span class="number">1</span> &lt; n) &#123;</span><br><span class="line">                    dp[i][j] = <span class="built_in">min</span>(dp[i][j], dp[i][j + <span class="number">1</span>] + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>DFSä¸BFSç³»åˆ—</category>
        <category>å›¾ç³»åˆ—</category>
        <category>åŠ¨æ€è§„åˆ’ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>BFS</tag>
        <tag>dynamic programming</tag>
        <tag>graph</tag>
      </tags>
  </entry>
  <entry>
    <title>C++ ä¼˜å…ˆé˜Ÿåˆ— PriorityQueue å®¹å™¨ä½¿ç”¨</title>
    <url>/2022/02/08/945d3241b7fc/</url>
    <content><![CDATA[<p><strong>å®šä¹‰</strong>ï¼š<code>priority_queue&lt;Type, Container, Functional&gt;</code></p>
<p>â€‹ Type å°±æ˜¯æ•°æ®ç±»å‹ï¼ŒContainer
å°±æ˜¯å®¹å™¨ç±»å‹ï¼ˆContainerå¿…é¡»æ˜¯ç”¨æ•°ç»„å®ç°çš„å®¹å™¨ï¼Œæ¯”å¦‚vector,dequeç­‰ç­‰ï¼Œä½†ä¸èƒ½ç”¨
listã€‚STLé‡Œé¢é»˜è®¤ç”¨çš„æ˜¯vectorï¼‰ï¼ŒFunctional
å°±æ˜¯æ¯”è¾ƒçš„æ–¹å¼ï¼Œå½“éœ€è¦ç”¨è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹æ—¶æ‰éœ€è¦ä¼ å…¥è¿™ä¸‰ä¸ªå‚æ•°ï¼Œä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œåªéœ€è¦ä¼ å…¥æ•°æ®ç±»å‹ï¼Œ<strong>é»˜è®¤æ˜¯å¤§é¡¶å †</strong></p>
<ul>
<li>1ã€ä¸€èˆ¬æƒ…å†µï¼š</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å‡åºé˜Ÿåˆ—</span></span><br><span class="line">priority_queue &lt;<span class="type">int</span>,vector&lt;<span class="type">int</span>&gt;,greater&lt;<span class="type">int</span>&gt; &gt; q;</span><br><span class="line"><span class="comment">//é™åºé˜Ÿåˆ—</span></span><br><span class="line">priority_queue &lt;<span class="type">int</span>,vector&lt;<span class="type">int</span>&gt;,less&lt;<span class="type">int</span>&gt; &gt;q;</span><br></pre></td></tr></table></figure>
<ul>
<li>2ã€å¦‚æœå†…éƒ¨çš„å…ƒç´ æ˜¯Pairçš„è¯ï¼Œå…¶ä¹Ÿè‡ªå¸¦äº†æ¯”è¾ƒå‡½æ•°,æ¯”è¾ƒè§„åˆ™æ˜¯å…ˆæ¯”è¾ƒç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç¬¬ä¸€ä¸ªç›¸ç­‰æ¯”è¾ƒç¬¬äºŒä¸ªã€‚</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">priority_queue&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; &gt; a;</span><br><span class="line"><span class="function">pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; <span class="title">b</span><span class="params">(<span class="number">1</span>, <span class="number">2</span>)</span></span>;</span><br><span class="line"><span class="function">pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; <span class="title">c</span><span class="params">(<span class="number">1</span>, <span class="number">3</span>)</span></span>;</span><br><span class="line"><span class="function">pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; <span class="title">d</span><span class="params">(<span class="number">2</span>, <span class="number">5</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>3ã€å†…éƒ¨ä¸ºè‡ªå®šä¹‰å…ƒç´ ï¼šä¸€ä¸ªæ˜¯é€šè¿‡é‡è½½è‡ªå®šä¹‰structçš„ &lt; è§„åˆ™</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">tmp1</span> <span class="comment">//è¿ç®—ç¬¦é‡è½½&lt;</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="built_in">tmp1</span>(<span class="type">int</span> a) &#123;x = a;&#125;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> tmp1&amp; a) <span class="type">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> x &lt; a.x; <span class="comment">//å¤§é¡¶å †</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">tmp1 <span class="title">a</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="function">tmp1 <span class="title">b</span><span class="params">(<span class="number">2</span>)</span></span>;</span><br><span class="line"><span class="function">tmp1 <span class="title">c</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">priority_queue&lt;tmp1&gt; d;</span><br></pre></td></tr></table></figure>
<ul>
<li>å¦ä¸€ä¸ªæ–¹æ³•æ˜¯é€šè¿‡å®šä¹‰ä¸€ä¸ªæ¯”è¾ƒç±»ï¼š</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> value;</span><br><span class="line">    <span class="type">int</span> priority;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä¼˜å…ˆé˜Ÿåˆ—å­˜æ”¾ Node* æ—¶ä¼˜å…ˆçº§çš„æ¯”è¾ƒæ–¹æ³• */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Compare_Node_Pointer</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/* Node::priority å¤§çš„ä¼˜å…ˆ */</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">operator</span> <span class="params">()</span> <span class="params">(Node* &amp;a, Node* &amp;b)</span> <span class="type">const</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a-&gt;priority &lt; b-&gt;priority;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç”¨æ³• */</span></span><br><span class="line">std::priority_queue&lt;Node*, std::vector&lt;Node*&gt;, Compare_Node_Pointer&gt; my_queue;</span><br></pre></td></tr></table></figure>
<h4 id="å‰‘æŒ‡-offer-ii-061.-å’Œæœ€å°çš„-k-ä¸ªæ•°å¯¹"><a
href="https://leetcode-cn.com/problems/qn8gGX/">å‰‘æŒ‡ Offer II 061.
å’Œæœ€å°çš„ k ä¸ªæ•°å¯¹</a></h4>
<p><strong>é¢˜ç›®æè¿°</strong>ï¼š</p>
<p>â€‹ ç»™å®šä¸¤ä¸ªä»¥å‡åºæ’åˆ—çš„æ•´æ•°æ•°ç»„ nums1 å’Œ nums2 , ä»¥åŠä¸€ä¸ªæ•´æ•° k
ã€‚å®šä¹‰ä¸€å¯¹å€¼ (u,v)ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ æ¥è‡ª nums1ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ¥è‡ª nums2
ã€‚è¯·æ‰¾åˆ°å’Œæœ€å°çš„ k ä¸ªæ•°å¯¹ (u1,v1), (u2,v2) ... (uk,vk) ã€‚</p>
<p><strong>è§£é¢˜æ€è·¯</strong>ï¼š</p>
<p>â€‹ éå†nums1 å’Œ nums2
ï¼Œç„¶åå°†æ‰€æœ‰çš„ç»„åˆpushè¿›å…¥è‡ªå®šä¹‰çš„ä¼˜å…ˆé˜Ÿåˆ—ä¸­ï¼Œç„¶åæŒ‰ç…§é¡ºåºï¼Œå‡ºé˜Ÿå‰kä¸ªå…ƒç´ æˆ–å°†é˜Ÿåˆ—å‡ºç©ºå³å¯ã€‚ä½†æ˜¯è¿™æ ·å­çš„è¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¼šè¾¾åˆ°O(mn)ï¼Œä¹Ÿå°±æ˜¯nums1å’Œnums2çš„é•¿åº¦çš„ä¹˜ç§¯ã€‚å…¶å®ï¼Œå› ä¸ºæä¾›çš„æ•°ç»„æ˜¯æœ‰åºåºåˆ—ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è¿›é˜Ÿåˆ—
nums1çš„å‰kä¸ªå’Œnums2çš„å‰kä¸ªçš„ç»„åˆï¼Œä¹Ÿå°±æ˜¯O(K^2)å³å¯ã€‚</p>
<p><strong>è§£é¢˜ä»£ç </strong>ï¼šï¼ˆç†Ÿæ‚‰priority queueçš„æ“ä½œï¼‰</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> v1;</span><br><span class="line">    <span class="type">int</span> v2;</span><br><span class="line">    <span class="built_in">Node</span>(<span class="type">int</span> v1,<span class="type">int</span> v2)&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;v1 = v1;</span><br><span class="line">        <span class="keyword">this</span>-&gt;v2 = v2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NodeCompare</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span> <span class="params">(Node* &amp;a,Node* &amp;b)</span> <span class="type">const</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a-&gt;v1 + a-&gt;v2 &gt; b-&gt;v1 + b-&gt;v2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">kSmallestPairs</span>(vector&lt;<span class="type">int</span>&gt;&amp; nums1, vector&lt;<span class="type">int</span>&gt;&amp; nums2, <span class="type">int</span> k) &#123;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; res;</span><br><span class="line">        priority_queue&lt;Node*,vector&lt;Node*&gt;,NodeCompare&gt; q;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;k &amp;&amp; i&lt;nums1.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;k &amp;&amp; j&lt;nums2.<span class="built_in">size</span>();j++)&#123;</span><br><span class="line">                Node* tmp = <span class="keyword">new</span> <span class="built_in">Node</span>(nums1[i],nums2[j]);</span><br><span class="line">                q.<span class="built_in">push</span>(tmp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(k-- &amp;&amp; q.<span class="built_in">size</span>()!=<span class="number">0</span>)&#123;</span><br><span class="line">            Node* tmp = q.<span class="built_in">top</span>();</span><br><span class="line">            res.<span class="built_in">push_back</span>(&#123;tmp-&gt;v1,tmp-&gt;v2&#125;);</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>å †æ ˆç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>priority queue</tag>
      </tags>
  </entry>
  <entry>
    <title>å¥‡å¦™åº”ç”¨â€”â€”&quot;åŠ¨æ€æ•°æ®æµ+ç¬¬kå¤§çš„æ•°å€¼&quot;ç›¸å…³é—®é¢˜ä¼˜åŒ–</title>
    <url>/2022/02/08/42903a1f937a/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-059.-æ•°æ®æµçš„ç¬¬-k-å¤§æ•°å€¼"><a
href="https://leetcode-cn.com/problems/jBjn9C/">å‰‘æŒ‡ Offer II 059.
æ•°æ®æµçš„ç¬¬ K å¤§æ•°å€¼</a></h4>
<h5 id="é¢˜ç›®æè¿°"><strong>é¢˜ç›®æè¿°</strong>ï¼š</h5>
<p>â€‹ è®¾è®¡ä¸€ä¸ªæ‰¾åˆ°æ•°æ®æµä¸­ç¬¬ k å¤§å…ƒç´ çš„ç±»ï¼ˆclassï¼‰ã€‚æ³¨æ„æ˜¯æ’åºåçš„ç¬¬ k
å¤§å…ƒç´ ï¼Œä¸æ˜¯ç¬¬ k ä¸ªä¸åŒçš„å…ƒç´ ã€‚</p>
<p>â€‹ è¯·å®ç° KthLargest ç±»ï¼š</p>
<pre><code>KthLargest(int k, int[] nums) ä½¿ç”¨æ•´æ•° k å’Œæ•´æ•°æµ nums åˆå§‹åŒ–å¯¹è±¡ã€‚
int add(int val) å°† val æ’å…¥æ•°æ®æµ nums åï¼Œè¿”å›å½“å‰æ•°æ®æµä¸­ç¬¬ k å¤§çš„å…ƒç´ ã€‚</code></pre>
<h5 id="è§£é¢˜æ€è·¯"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>â€‹
æˆ‘å¯¹äºè¿™ç±»æ²¡æœ‰è®¾è®¡ç±»å®ç°çš„é¢˜ç›®ï¼Œæ•°æ®ç»“æ„çš„æ•æ„Ÿåº¦ä¸å¤Ÿé«˜ï¼ŒåŸºæœ¬ä¸Šæƒ³èµ·æ¥éƒ½åªèƒ½ç”¨æœ€æš´åŠ›çš„æ–¹æ³•å»è§£å†³ã€‚æ­¤é¢˜ç›®ï¼Œæˆ‘ä¸€å¼€å§‹æ˜¯æƒ³è¦åœ¨å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªVectorï¼Œä½†æ˜¯æˆ‘å‘ç°ï¼Œç»´æŠ¤æœ‰åºå‘é‡çš„æˆæœ¬å¤ªé«˜äº†ï¼Œè™½ç„¶é€šè¿‡äº†æµ‹è¯•ç‚¹ï¼Œä½†æ˜¯æ—¶é—´å¤æ‚åº¦ç­‰æ–¹é¢å¯ä»¥ä¼˜åŒ–çš„å†…å®¹å®åœ¨å¤ªå¤šäº†ã€‚</p>
<h5 id="ä¼˜åŒ–æ€è·¯"><strong>ä¼˜åŒ–æ€è·¯</strong>ï¼š</h5>
<p>â€‹ æ¯”è¾ƒé‡è¦é‡è¦çš„ä¿¡æ¯ç‚¹æ˜¯
<strong>åŠ¨æ€æ’å…¥</strong>ã€<strong>ç¬¬Kå¤§</strong>ï¼Œè¿™ä¸¤ä¸ªå…³é”®ä¿¡æ¯ï¼Œåº”å½“èƒ½å¤Ÿå¯¼å‘ä¸€ä¸ªåŠ¨æ€çš„æ•°æ®ç»“æ„ï¼Œä¹Ÿå°±æ˜¯ä¼˜å…ˆé˜Ÿåˆ—â€”â€”å †ã€‚å¯ä»¥ç»´æŠ¤ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæœ€å°å †ï¼‰ï¼Œç„¶ååœ¨å…¶å†…ç»´æŠ¤æœ€å¤§çš„Kä¸ªå…ƒç´ ã€‚è¿™æ ·çš„è¯ï¼Œæ¯æ¬¡æ’å…¥å®Œéœ€è¦è¿”å›ç¬¬Kå¤§çš„å…ƒç´ çš„æ—¶å€™ï¼Œç›´æ¥è¿”å›å †é¡¶çš„å…ƒç´ ï¼ˆå †é¡¶çš„å…ƒç´ æ˜¯å †ä¸­æœ€å°çš„é‚£ä¸ªå…ƒç´ ï¼Œä½†æ˜¯æ˜¯æ‰€æœ‰æ•°ç»„ä¸­ç¬¬Kå¤§çš„é‚£ä¸ªå…ƒç´ ï¼‰å³å¯ã€‚</p>
<p>â€‹ æ•…è€Œï¼Œåœ¨å•æ¬¡æ’å…¥çš„æ“ä½œä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå°†å…ƒç´  val
åŠ å…¥åˆ°ä¼˜å…ˆé˜Ÿåˆ—ä¸­ã€‚å¦‚æœæ­¤æ—¶ä¼˜å…ˆé˜Ÿåˆ—çš„å¤§å°å¤§äº
kï¼Œæˆ‘ä»¬éœ€è¦å°†ä¼˜å…ˆé˜Ÿåˆ—çš„é˜Ÿå¤´å…ƒç´ å¼¹å‡ºï¼Œä»¥ä¿è¯ä¼˜å…ˆé˜Ÿåˆ—çš„å¤§å°ä¸º kã€‚</p>
<h5 id="è§£é¢˜ä»£ç ">è§£é¢˜ä»£ç ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">KthLargest</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    priority_queue&lt;<span class="type">int</span>, vector&lt;<span class="type">int</span>&gt;, greater&lt;<span class="type">int</span>&gt;&gt; q;</span><br><span class="line">    <span class="type">int</span> k;</span><br><span class="line">    <span class="built_in">KthLargest</span>(<span class="type">int</span> k, vector&lt;<span class="type">int</span>&gt;&amp; nums) &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;k = k;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;nums.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">             <span class="built_in">add</span>(nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">        q.<span class="built_in">push</span>(val);</span><br><span class="line">        <span class="keyword">if</span> (q.<span class="built_in">size</span>() &gt; k) &#123;</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> q.<span class="built_in">top</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>â€‹</p>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>å †æ ˆç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>priority queue</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°ç»„ç³»åˆ—â€”â€”å›æ–‡å­—ç¬¦ä¸²ç›¸å…³å¤„ç†æŠ€å·§</title>
    <url>/2022/02/04/5959f8901103/</url>
    <content><![CDATA[<h4 id="ä¸€å‰‘æŒ‡-offer-ii-020.-å›æ–‡å­å­—ç¬¦ä¸²çš„ä¸ªæ•°">ä¸€ã€<a
href="https://leetcode-cn.com/problems/a7VOhD/">å‰‘æŒ‡ Offer II 020.
å›æ–‡å­å­—ç¬¦ä¸²çš„ä¸ªæ•°</a></h4>
<h5 id="é¢˜ç›®æè¿°"><strong>é¢˜ç›®æè¿°ï¼š</strong></h5>
<p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¯·è®¡ç®—è¿™ä¸ªå­—ç¬¦ä¸²ä¸­æœ‰å¤šå°‘ä¸ªå›æ–‡å­å­—ç¬¦ä¸²ã€‚</p>
<p>å…·æœ‰ä¸åŒå¼€å§‹ä½ç½®æˆ–ç»“æŸä½ç½®çš„å­ä¸²ï¼Œå³ä½¿æ˜¯ç”±ç›¸åŒçš„å­—ç¬¦ç»„æˆï¼Œä¹Ÿä¼šè¢«è§†ä½œä¸åŒçš„å­ä¸²ã€‚</p>
<p>ç¤ºä¾‹ 1ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = &quot;abc&quot;</span><br><span class="line">è¾“å‡ºï¼š3</span><br><span class="line">è§£é‡Šï¼šä¸‰ä¸ªå›æ–‡å­ä¸²: &quot;a&quot;, &quot;b&quot;, &quot;c&quot;</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ 2ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = &quot;aaa&quot;</span><br><span class="line">è¾“å‡ºï¼š6</span><br><span class="line">è§£é‡Šï¼š6ä¸ªå›æ–‡å­ä¸²: &quot;a&quot;, &quot;a&quot;, &quot;a&quot;, &quot;aa&quot;, &quot;aa&quot;, &quot;aaa&quot;</span><br></pre></td></tr></table></figure>
<p>æç¤ºï¼š</p>
<pre><code>1 &lt;= s.length &lt;= 1000
s ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ</code></pre>
<h5 id="è§£é¢˜æ€è·¯"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>â€‹
å¼•ç”¨ï¼šhttps://leetcode-cn.com/problems/a7VOhD/solution/jssan-jie-bao-li-shuang-zhi-zhen-zhong-x-qqq0/</p>
<ul>
<li><p>æ€è·¯1: æš´åŠ›æœç´¢</p>
<ul>
<li>æœç´¢æ‰€æœ‰çš„å­ä¸²ï¼Œå¹¶åˆ†åˆ«åˆ¤æ–­æ˜¯å¦ä¸ºå›æ–‡ä¸²</li>
<li>æ—¶é—´å¤æ‚åº¦ï¼šO(n^3)</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</li>
</ul></li>
<li><p>æ€è·¯2: åŒæŒ‡é’ˆï¼Œæ€è·¯1çš„ä¼˜åŒ–ç‰ˆæœ¬ï¼š</p>
<ul>
<li>å…ˆä½¿ç”¨åŒæŒ‡é’ˆ i å’Œ j
æšä¸¾æ‰€æœ‰å­ä¸²çš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼ŒåŒæ—¶åˆ†åˆ«æŒ‰é¡ºåºå’Œé€†åºç´¯åŠ æ‰€æœ‰éå†è¿‡çš„å­—ç¬¦å¾—åˆ°å­—ç¬¦ä¸²
s1 å’Œ s2ï¼Œåˆ¤æ–­æ˜¯å¦å›æ–‡åªéœ€å¯¹ s1 å’Œ s2
åˆ¤ç­‰å³å¯ã€‚è¿™é‡Œå°†å›æ–‡åˆ¤æ–­çš„æ—¶é—´å¤æ‚åº¦ä» O(n)ä¼˜åŒ–åˆ°
O(1)ï¼Œä½†æ•´ä½“ç©ºé—´å¤æ‚åº¦ä» O(1)å‡åˆ° O(n)ï¼Œç®—æ˜¯ç©ºé—´æ¢æ—¶é—´ã€‚</li>
<li>ä½†æ­¤æ€è·¯çš„æ—¶é—´è€—è´¹ä»ç„¶ä¼šè¾ƒé«˜ï¼Œå› ä¸ºå­—ç¬¦ä¸²çš„æ‹¼æ¥æ“ä½œéƒ½è¾ƒä¸ºè´¹æ—¶</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">countSubstrings</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;s.<span class="built_in">length</span>();i++)&#123;</span><br><span class="line">            string s1,s2;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=i;j&lt;s.<span class="built_in">length</span>();j++)&#123;</span><br><span class="line">                s1 += s[j];</span><br><span class="line">                s2 = s[j] + s2;</span><br><span class="line">                <span class="keyword">if</span>(s1==s2) count++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>æ€è·¯3: ä¸­å¿ƒæ‰©å±•ï¼š</strong></p>
<ul>
<li><p>æšä¸¾æ‰€æœ‰å¯èƒ½çš„å›æ–‡ä¸­å¿ƒ s[i] æˆ– s[i]ã€s[i +
1]ï¼Œè‹¥å›æ–‡å­ä¸²é•¿åº¦ä¸ºå¥‡æ•°åˆ™å…¶ä¸­å¿ƒä¸º s[i]ï¼Œå›æ–‡å­ä¸²é•¿åº¦ä¸ºå¶æ•°åˆ™å…¶ä¸­å¿ƒä¸º
s[i]ã€s[i + 1]ï¼›</p></li>
<li><p>ä»¥ä¸­å¿ƒå‘å·¦å³ä¸¤è¾¹æ‰©å±•ï¼Œå³</p>
<ul>
<li>å·¦è¾¹ç•Œ l å‡ 1</li>
<li>å³è¾¹ç•Œ r åŠ 1</li>
<li>å¦‚æœ s[l] ä¸ s[r] ç›¸ç­‰åˆ™å›æ–‡æ•°åŠ 1ã€‚</li>
</ul></li>
<li><div class="sourceCode" id="cb2"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">class</span> Solution <span class="op">&#123;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">public</span><span class="op">:</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>      <span class="dt">int</span> <span class="fu">countSubstrings</span><span class="op">(</span>string s<span class="op">)</span> <span class="op">&#123;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>          <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>          <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> i <span class="op">=</span><span class="dv">0</span><span class="op">;</span>i<span class="op">&lt;</span>s<span class="op">.</span><span class="fu">length</span><span class="op">();</span>i<span class="op">++)&#123;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>              <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> l <span class="op">=</span> i<span class="op">,</span> r <span class="op">=</span> i<span class="op">;</span> l <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> s<span class="op">[</span>l<span class="op">]</span> <span class="op">==</span> s<span class="op">[</span>r<span class="op">];</span> l<span class="op">--,</span> r<span class="op">++)</span> count<span class="op">++;</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>              <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> l <span class="op">=</span> i<span class="op">,</span> r <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> l <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> s<span class="op">[</span>l<span class="op">]</span> <span class="op">==</span> s<span class="op">[</span>r<span class="op">];</span> l<span class="op">--,</span> r<span class="op">++)</span> count<span class="op">++;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>          <span class="op">&#125;</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>      <span class="op">&#125;</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="op">&#125;;</span></span></code></pre></div></li>
</ul></li>
</ul>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>å­—ç¬¦ä¸²ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>array</tag>
      </tags>
  </entry>
  <entry>
    <title>å¥‡å¦™åº”ç”¨â€”â€”æ±‚è§£ç›´æ–¹å›¾æœ€å¤§çŸ©å½¢é¢ç§¯ &amp;&amp; çŸ©é˜µä¸­æœ€å¤§çš„çŸ©å½¢æ±‚è§£</title>
    <url>/2022/02/08/faff2c35214a/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-039.-ç›´æ–¹å›¾æœ€å¤§çŸ©å½¢é¢ç§¯"><a
href="https://leetcode-cn.com/problems/0ynMMM/">å‰‘æŒ‡ Offer II 039.
ç›´æ–¹å›¾æœ€å¤§çŸ©å½¢é¢ç§¯</a></h4>
<h5 id="é¢˜ç›®æè¿°"><strong>é¢˜ç›®æè¿°</strong>ï¼š</h5>
<pre><code>ç»™å®šéè´Ÿæ•´æ•°æ•°ç»„ `heights` ï¼Œæ•°ç»„ä¸­çš„æ•°å­—ç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º `1` ã€‚æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚</code></pre>
<p><strong>ç¤ºä¾‹1</strong>ï¼š<img
src="https://assets.leetcode.com/uploads/2021/01/04/histogram.jpg"
alt="img" /></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šheights = [<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">10</span></span><br><span class="line">è§£é‡Šï¼šæœ€å¤§çš„çŸ©å½¢ä¸ºå›¾ä¸­çº¢è‰²åŒºåŸŸï¼Œé¢ç§¯ä¸º <span class="number">10</span></span><br></pre></td></tr></table></figure>
<p>é¢˜è§£å‚è€ƒï¼šhttps://leetcode-cn.com/problems/0ynMMM/solution/jian-zhi-offer-2-mian-shi-ti-39-shu-zhon-qzaw/</p>
<h5 id="è§£é¢˜æ€è·¯"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<pre><code>æœ¬é¢˜å¦‚æœé‡‡ç”¨æš´æœçš„æ–¹æ³•ï¼ŒO(n^2)å¤æ‚åº¦ï¼Œæ˜¯æ¯”è¾ƒç®€å•æ˜“æ‡‚çš„ï¼Œä½†æ˜¯æ—¶é—´è€—è´¹å¤ªé•¿ï¼Œä¼šè¶…æ—¶ã€‚æ‰€ä»¥æ­¤ç¯‡åšå®¢è¦è®°å½•çš„æ˜¯ä¸€ä¸ªå«åš **â€œå•è°ƒæ ˆâ€**çš„è§£å†³æ–¹æ¡ˆï¼š</code></pre>
<ul>
<li><p><strong>åŸºæœ¬æ€æƒ³</strong>ï¼š<strong>ä¿è¯å­˜åœ¨æ ˆä¸­çš„æŸ±å­çš„é«˜åº¦æ˜¯é€’å¢çš„ã€‚</strong>åŸºç¡€æ“ä½œä¸ºï¼Œä»å·¦å¾€å³æ‰«ææ•°ç»„å†…çš„æŸ±å­é«˜åº¦ï¼Œè‹¥å½“å‰æŸ±é«˜å¤§äºæ ˆé¡¶æŸ±é«˜ï¼Œé‚£ä¹ˆè¯¥æŸ±å­ä¸‹æ ‡å…¥æ ˆï¼›åä¹‹ï¼Œå°†æ ˆé¡¶æŸ±å­å‡ºæ ˆï¼Œå¹¶è®¡ç®—æ ˆé¡¶çš„æŸ±å­é«˜åº¦ä¸ºé¡¶é«˜çš„æœ€é«˜çŸ©é˜µé¢ç§¯ï¼Œç›´è‡³å¯å…¥æ ˆã€‚</p></li>
<li><p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼šå¦‚ä½•ç¡®å®šä»¥æ ˆé¡¶æŸ±å­é«˜ä¸ºé¡¶çš„æœ€å¤§çŸ©é˜µé¢ç§¯å‘¢ï¼Ÿ</p>
<ul>
<li>è¯¥çŸ©é˜µçš„å®½åº¦ä¸€å®šæ˜¯ï¼Œ<strong>ä»æ ˆé¡¶æŸ±å­çš„ä¸¤è¾¹å‡ºå‘ç›´åˆ°é‡åˆ°æ¯”è¯¥æŸ±é«˜çŸ®çš„æŸ±å­æ‰€å¤¹æˆçš„å®½åº¦</strong>ã€‚å› ä¸ºå•è°ƒæ ˆä¸­ä¿å­˜çš„æŸ±é«˜æ˜¯é€’å¢çš„ï¼Œæ‰€ä»¥<strong>æ ˆä¸­ä½äºæ ˆé¡¶æŸ±å­å‰é¢çš„æŸ±å­ä¸€å®šæ¯”æ ˆé¡¶æŸ±å­çŸ®ï¼ŒåŒæ ·å½“å‰æ‰«æåˆ°çš„æŸ±å­ä¹ŸçŸ®äºä½äºæ ˆé¡¶çš„æŸ±å­</strong>ï¼Œæ‰€ä»¥é¡¶æŸ±å­ä¸ºé¡¶çš„æœ€é«˜çŸ©é˜µçš„å®½åº¦å°±ç¡®å®šäº†ï¼Œé‚£ä¹ˆé¢ç§¯ä¹Ÿå°±ç¡®å®šäº†ã€‚</li>
</ul></li>
<li><p><strong>æ“ä½œç¤ºä¾‹</strong>ï¼šä¸‹é¢ä»¥ [2, 1, 5, 6, 2, 3]
ä¸ºä¾‹è¯´æ˜ï¼Œè¿‡ç¨‹å¦‚å›¾æ‰€ç¤º</p>
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/1629450891-DTWpaG-image.png" /></li>
<li>å¯ä»¥å‘ç°ï¼Œæœ€åæ ˆä¸­é™¤äº†ä¸ºäº†å¤„ç†æ–¹ä¾¿è€ŒåŠ å…¥çš„åˆå§‹åŒ–çš„ -1 ä»¥å¤–ï¼Œè¿˜æœ‰ 1,
4, 5 ä¸‰ä¸ªå…ƒç´ ï¼Œè¯´æ˜ä»¥ 1, 2, 3
æŸ±é«˜ä¸ºé¡¶çš„æœ€å¤§çŸ©é˜µè¿˜æœªè®¡ç®—ã€‚è¿™æ—¶å€™åªè¦å¤šæƒ³ä¸€æ­¥ï¼Œå®ƒä»¬æœªè¢«è®¡ç®—æ˜¯å› ä¸ºè¿˜æœªå‡ºç°æ¯”å®ƒä»¬çŸ®çš„æŸ±å­ã€‚è‹¥å‡è®¾æœ€åå†åŠ å…¥ä¸€ä¸ªé«˜åº¦ä¸º
0 çš„æŸ±é«˜ï¼Œé‚£ä¹ˆæ ˆä¸­é™¤äº† -1
ä»¥å¤–ï¼Œæ‰€æœ‰çš„å…ƒç´ éƒ½ä¼šå‡ºæ ˆï¼Œé‚£ä¹ˆæ‰€æœ‰çš„æŸ±å­å‡è¢«è®¡ç®—ï¼Œè®¡ç®—å®Œæ¯•ï¼Œç»§ç»­çš„è¿‡ç¨‹å¦‚ä¸‹</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/1629451413-pOKglw-image.png" /></li>
</ul></li>
<li><p><strong>è§£é¢˜ä»£ç </strong>ï¼š</p>
<ul>
<li>ä»¥ä¸‹ä»£ç æ˜¯ç†è§£äº†ä¸Šè¿°æ‰€è¯´ä»¥åä¹¦å†™çš„ï¼Œå’Œä¸Šè¿°æ‰€è¯´çš„ç»†èŠ‚éƒ¨åˆ†æœ‰æ‰€ä¸åŒï¼Œå®ƒæ˜¯å…ˆå¾€æ ˆé‡Œé¢pushäº†ä¸€ä¸ª-1ï¼Œä¿è¯æ ˆä¸ä¼šç©ºã€‚è€Œæˆ‘æ²¡æœ‰è¿™ä¹ˆå¹²ï¼Œæˆ‘æ˜¯åœ¨popå®Œäº†ä»¥åï¼Œåœ¨è®¡ç®—å®½åº¦çš„æ—¶å€™ï¼Œä¼šåˆ¤æ–­æ ˆç©ºäº†æ²¡æœ‰ï¼Œå¦‚æœç©ºäº†åˆ™
new_top_idx = -1 ï¼Œå¦‚æœæ²¡ç©ºå°±æ˜¯ s.top();</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">largestRectangleArea</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; heights)</span> </span>&#123;</span><br><span class="line">        stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">        heights.<span class="built_in">push_back</span>(<span class="number">0</span>);  <span class="comment">//å…ˆåœ¨æœ€ååŠ ä¸€ä¸ªé«˜åº¦ä¸º0çš„æŸ±å­ï¼Œæ–¹ä¾¿åç»­æ“ä½œ</span></span><br><span class="line">        s.<span class="built_in">push</span>(<span class="number">0</span>); <span class="comment">//å…ˆæŠŠç¬¬ä¸€ä¸ªå…ƒç´ pushè¿›å»</span></span><br><span class="line">        <span class="type">int</span> maxValue = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;heights.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="type">int</span> top_idx = s.<span class="built_in">top</span>();</span><br><span class="line">            <span class="keyword">while</span>(heights[i] &lt; heights[top_idx])&#123;</span><br><span class="line">                s.<span class="built_in">pop</span>();</span><br><span class="line">                <span class="type">int</span> new_top_idx = s.<span class="built_in">empty</span>() ? <span class="number">-1</span> : s.<span class="built_in">top</span>();</span><br><span class="line">                <span class="comment">//è®¡ç®—popå‡ºå»çš„è¿™ä¸ªå…ƒç´ ï¼ŒmaxValue</span></span><br><span class="line">                maxValue = <span class="built_in">max</span>(maxValue,heights[top_idx] * (i - new_top_idx - <span class="number">1</span>));</span><br><span class="line">                <span class="keyword">if</span>(s.<span class="built_in">empty</span>()) <span class="keyword">break</span>;</span><br><span class="line">                top_idx = s.<span class="built_in">top</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            s.<span class="built_in">push</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxValue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="å‰‘æŒ‡-offer-ii-040.-çŸ©é˜µä¸­æœ€å¤§çš„çŸ©å½¢"><a
href="https://leetcode-cn.com/problems/PLYXKQ/">å‰‘æŒ‡ Offer II 040.
çŸ©é˜µä¸­æœ€å¤§çš„çŸ©å½¢</a></h4>
<h5 id="é¢˜ç›®æè¿°-1"><strong>é¢˜ç›®æè¿°</strong>ï¼š</h5>
<p>ç»™å®šä¸€ä¸ªç”± 0 å’Œ 1 ç»„æˆçš„çŸ©é˜µ matrix ï¼Œæ‰¾å‡ºåªåŒ…å« 1
çš„æœ€å¤§çŸ©å½¢ï¼Œå¹¶è¿”å›å…¶é¢ç§¯ã€‚</p>
<p>æ³¨æ„ï¼šæ­¤é¢˜ matrix è¾“å…¥æ ¼å¼ä¸ºä¸€ç»´ 01 å­—ç¬¦ä¸²æ•°ç»„ã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼š<img
src="https://assets.leetcode.com/uploads/2020/09/14/maximal.jpg"
alt="img" /></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šmatrix = [<span class="string">&quot;10100&quot;</span>,<span class="string">&quot;10111&quot;</span>,<span class="string">&quot;11111&quot;</span>,<span class="string">&quot;10010&quot;</span>]</span><br><span class="line">è¾“å‡ºï¼š<span class="number">6</span></span><br><span class="line">è§£é‡Šï¼šæœ€å¤§çŸ©å½¢å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯-1"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>â€‹ æœ¬é¢˜å¯ä»¥ç”¨ç»“åˆä¸Šä¸€é¢˜çš„æ€è·¯è¿›è¡Œæ±‚è§£ï¼š</p>
<p>â€‹
<strong>æˆ‘ä»¬å¾ªç¯æ¯ä¸€è¡Œï¼Œå°†æ¯ä¸€è¡Œéƒ½çœ‹ä½œæ˜¯ä¸Šä¸€é¢˜ä¸­çš„ä¸€ç³»åˆ—ç›´æ–¹å›¾ã€‚ç„¶åï¼ŒæŸè¡ŒæŸä½ç½®çš„é«˜åº¦ï¼Œå¦‚æœè¯¥ä½ç½®æ˜¯1ï¼Œé‚£ä¹ˆå®ƒçš„é«˜åº¦æ˜¯ä¸Šä¸€è¡Œçš„è¯¥å¯¹åº”ä½ç½®çš„ç›´æ–¹å›¾çš„é«˜åº¦+1.å¦‚æœè¯¥ä½ç½®æ˜¯0ï¼Œåˆ™è¯¥ä½ç½®çš„ç›´æ–¹å›¾é«˜åº¦å°±ç›´æ¥æ¸…0.</strong></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å³åˆ©ç”¨ä¸€ä¸ªæ•°ç»„rectangularæ¥è®°å½•ç›´æ–¹å›¾é«˜åº¦</span></span><br><span class="line"><span class="comment">//éå†æ¯ä¸€è¡Œæ¯ä¸€ä¸ªä½ç½®ï¼Œæ›´æ–°rectangularä¸­çš„æ•°å€¼</span></span><br><span class="line"><span class="comment">//ç„¶åè°ƒç”¨ä¸Šä¸€é¢˜ä¸­çš„æ–¹æ³•ï¼Œè¿›è¡Œæ±‚è§£</span></span><br><span class="line"><span class="keyword">if</span>(nums[j] == <span class="string">&#x27;1&#x27;</span>)&#123;</span><br><span class="line"> 	rectangular[j]++;</span><br><span class="line"> &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"> 	rectangular[j]=<span class="number">0</span>;<span class="comment">//è¿™ä¸€è¡Œçš„æŸä¸ªå­—ç¬¦ä¸ºâ€œ0â€ï¼Œé‚£å°±çŸ©å½¢é«˜åº¦æ¸…0</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p><strong>è§£é¢˜ä»£ç </strong>ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">largestRectangleArea</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; heights)</span> </span>&#123;</span><br><span class="line">        stack&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">        heights.<span class="built_in">push_back</span>(<span class="number">0</span>);  <span class="comment">//å…ˆåœ¨æœ€ååŠ ä¸€ä¸ªé«˜åº¦ä¸º0çš„æŸ±å­ï¼Œæ–¹ä¾¿åç»­æ“ä½œ</span></span><br><span class="line">        s.<span class="built_in">push</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="type">int</span> maxValue = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;heights.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="type">int</span> top_idx = s.<span class="built_in">top</span>();</span><br><span class="line">            <span class="keyword">while</span>(heights[i] &lt; heights[top_idx])&#123;</span><br><span class="line">                s.<span class="built_in">pop</span>();</span><br><span class="line">                <span class="type">int</span> new_top_idx = s.<span class="built_in">empty</span>() ? <span class="number">-1</span> : s.<span class="built_in">top</span>();</span><br><span class="line">                <span class="comment">//è®¡ç®—popå‡ºå»çš„è¿™ä¸ªå…ƒç´ ï¼ŒmaxValue</span></span><br><span class="line">                maxValue = <span class="built_in">max</span>(maxValue,heights[top_idx] * (i - new_top_idx - <span class="number">1</span>));</span><br><span class="line">                <span class="keyword">if</span>(s.<span class="built_in">empty</span>()) <span class="keyword">break</span>;</span><br><span class="line">                top_idx = s.<span class="built_in">top</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            s.<span class="built_in">push</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maximalRectangle</span><span class="params">(vector&lt;string&gt;&amp; matrix)</span> </span>&#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; rectangular;</span><br><span class="line">        <span class="type">int</span> maxValue = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;matrix.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            string row = matrix[i];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;row.<span class="built_in">length</span>();j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i==<span class="number">0</span>) rectangular.<span class="built_in">push_back</span>(row[j] - <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(row[j] == <span class="string">&#x27;1&#x27;</span>)&#123;</span><br><span class="line">                        rectangular[j]++;</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        rectangular[j]=<span class="number">0</span>;<span class="comment">//è¿™ä¸€è¡Œçš„æŸä¸ªå­—ç¬¦ä¸ºâ€œ0â€ï¼Œé‚£å°±çŸ©å½¢é«˜åº¦æ¸…0</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//æ›´æ–°å¥½äº†ä»¥åï¼Œè®¡ç®—æ”¹è¡Œçš„maxValue</span></span><br><span class="line">            maxValue = <span class="built_in">max</span>(maxValue,<span class="built_in">largestRectangleArea</span>(rectangular));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxValue;</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>å †æ ˆç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>stack</tag>
      </tags>
  </entry>
  <entry>
    <title>å®¹å™¨è®¾è®¡â€”â€”å‰ç¼€æ ‘å®¹å™¨è®¾è®¡</title>
    <url>/2022/02/05/06a3e97dc7c2/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-062.-å®ç°å‰ç¼€æ ‘"><a
href="https://leetcode-cn.com/problems/QC3q1f/">å‰‘æŒ‡ Offer II 062.
å®ç°å‰ç¼€æ ‘</a></h4>
<h5 id="é¢˜ç›®æè¿°"><strong>é¢˜ç›®æè¿°</strong>ï¼š</h5>
<p>â€‹ Trieï¼ˆå‘éŸ³ç±»ä¼¼ "try"ï¼‰æˆ–è€…è¯´ å‰ç¼€æ ‘
æ˜¯ä¸€ç§æ ‘å½¢æ•°æ®ç»“æ„ï¼Œç”¨äºé«˜æ•ˆåœ°å­˜å‚¨å’Œæ£€ç´¢å­—ç¬¦ä¸²æ•°æ®é›†ä¸­çš„é”®ã€‚è¿™ä¸€æ•°æ®ç»“æ„æœ‰ç›¸å½“å¤šçš„åº”ç”¨æƒ…æ™¯ï¼Œä¾‹å¦‚<strong>è‡ªåŠ¨è¡¥å®Œå’Œæ‹¼å†™æ£€æŸ¥</strong>ã€‚****</p>
<p>è¯·ä½ å®ç° Trie ç±»ï¼š</p>
<pre><code>Trie() åˆå§‹åŒ–å‰ç¼€æ ‘å¯¹è±¡ã€‚
void insert(String word) å‘å‰ç¼€æ ‘ä¸­æ’å…¥å­—ç¬¦ä¸² word ã€‚
boolean search(String word) å¦‚æœå­—ç¬¦ä¸² word åœ¨å‰ç¼€æ ‘ä¸­ï¼Œè¿”å› trueï¼ˆå³ï¼Œåœ¨æ£€ç´¢ä¹‹å‰å·²ç»æ’å…¥ï¼‰ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚
boolean startsWith(String prefix) å¦‚æœä¹‹å‰å·²ç»æ’å…¥çš„å­—ç¬¦ä¸² word çš„å‰ç¼€ä¹‹ä¸€ä¸º prefix ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚</code></pre>
<h5 id="è§£é¢˜æ€è·¯"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>â€‹ Trieï¼Œåˆç§°å‰ç¼€æ ‘æˆ–å­—å…¸æ ‘ï¼Œæ˜¯ä¸€æ£µæœ‰æ ¹æ ‘ï¼Œå…¶æ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä»¥ä¸‹å­—æ®µï¼š</p>
<ul>
<li>æŒ‡å‘å­èŠ‚ç‚¹çš„æŒ‡é’ˆæ•°ç»„
childrensã€‚åœ¨æœ¬é¢˜ä¸­ï¼Œè¿™å¯ä»¥æ˜¯ä¸€ä¸ªåŠ¨æ€çš„vectorï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¤§å°å®šä¸º26çš„vectorï¼Œå› ä¸ºæœ¬æ–‡ä¸­çš„å­—ç¬¦é™å®šä¸ºå°å†™å­—æ¯ã€‚ä¸¤è€…å„æœ‰å¥½å¤„ï¼ŒåŠ¨æ€çš„vectorèŠ‚çœä¸€äº›ç©ºé—´ï¼Œé™æ€çš„vectoråœ¨æŸ¥æ‰¾å’Œæ’å…¥æ—¶èŠ‚çœä¸€äº›æ—¶é—´ï¼Œå®ç°èµ·æ¥ä¹Ÿè¾ƒä¸ºæ–¹ä¾¿ä¸€äº›ã€‚</li>
<li>å¸ƒå°”å­—æ®µ isEndï¼Œè¡¨ç¤ºè¯¥èŠ‚ç‚¹æ˜¯å¦ä¸ºå­—ç¬¦ä¸²çš„ç»“å°¾ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€å¼ æ¯”è¾ƒæ¸…æ™°çš„å›¾ï¼šéå¸¸æ˜äº†</p>
<figure>
<img src="https://pic.leetcode-cn.com/1632672370-gVXuKM-image.png"
alt="image.png" />
<figcaption aria-hidden="true">image.png</figcaption>
</figure>
<h5
id="ä»£ç å®ç°åŠ¨æ€vectorç‰ˆæœ¬æˆ‘å†™çš„"><strong>ä»£ç å®ç°ï¼ˆåŠ¨æ€vectorç‰ˆæœ¬ï¼Œæˆ‘å†™çš„ï¼‰</strong>ï¼š</h5>
<p>â€‹
Searchæ“ä½œå’ŒstartsWithå…¶å®å°±æ˜¯å·®ä¸€ä¸ªåˆ¤å®šå­—ç¬¦ä¸²ç»“å°¾çš„æ“ä½œï¼Œæ‰€ä»¥æˆ‘å°†ä¸¤ä¸ªå‡½æ•°åˆå¹¶æˆäº†ä¸€ä¸ªï¼Œç”¨ä¸€ä¸ªå½¢å‚æ¥æ§åˆ¶ï¼Œä½¿å¾—ä»£ç å°½é‡ç®€ä»‹ã€‚Insertæ“ä½œå…¶å®å’ŒSearchæ“ä½œä¹Ÿæœ‰å¤§é‡çš„é‡å¤ä»£ç ï¼Œå¾ªç¯åˆ¤å®šéƒ½æ˜¯ä¸€è‡´çš„ï¼Œå°±æ˜¯åˆ¤å®šåæ“ä½œé€»è¾‘ä¸å¤ªä¸€æ ·ï¼Œä½†ä¸ºäº†ä¸æ··åœ¨ä¸€èµ·ï¼Œæˆ‘è¿˜æ˜¯å°†å…¶åˆ†å¼€å†™äº†ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_02_08_15_17_08_168.png" /></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyTreeNode</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">bool</span> isEnd;</span><br><span class="line">    <span class="type">char</span> character;</span><br><span class="line">    vector&lt;MyTreeNode*&gt; childrens;</span><br><span class="line">    <span class="built_in">MyTreeNode</span>()&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;isEnd = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">MyTreeNode</span>(<span class="type">char</span> character,<span class="type">bool</span> isEnd)&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;isEnd = isEnd;</span><br><span class="line">        <span class="keyword">this</span>-&gt;character = character;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Trie</span> &#123;</span><br><span class="line">    MyTreeNode* root;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line">    <span class="built_in">Trie</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;root = <span class="keyword">new</span> <span class="built_in">MyTreeNode</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Inserts a word into the trie. */</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(string word)</span> </span>&#123;</span><br><span class="line">        MyTreeNode* r = <span class="keyword">this</span>-&gt;root;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;word.<span class="built_in">length</span>();i++)&#123;</span><br><span class="line">            <span class="type">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">            <span class="type">int</span> j;</span><br><span class="line">            <span class="keyword">for</span>(j = <span class="number">0</span>;j&lt; r-&gt;childrens.<span class="built_in">size</span>();j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(r-&gt;childrens[j]-&gt;character == word[i])&#123;</span><br><span class="line">                    flag = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å¦‚æœæ²¡æ‰¾åˆ°ï¼Œæ’å…¥ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span>(!flag)&#123;</span><br><span class="line">                MyTreeNode* c = <span class="keyword">new</span> <span class="built_in">MyTreeNode</span>(word[i],i == word.<span class="built_in">length</span>()<span class="number">-1</span>);</span><br><span class="line">                r-&gt;childrens.<span class="built_in">push_back</span>(c);</span><br><span class="line">                r = c;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//å¦‚æœæ‰¾åˆ°äº†ï¼Œé‚£ä¹ˆç»§ç»­ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œ</span></span><br><span class="line">                r = r-&gt;childrens[j];</span><br><span class="line">                <span class="keyword">if</span>(i == word.<span class="built_in">length</span>()<span class="number">-1</span>)&#123;  <span class="comment">//å¦‚æœæ˜¯æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆ</span></span><br><span class="line">                    r-&gt;isEnd = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Returns if the word is in the trie. */</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">search</span><span class="params">(string word)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">mySearch</span>(word,<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Returns if there is any word in the trie that starts with the given prefix. */</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">startsWith</span><span class="params">(string prefix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">mySearch</span>(prefix,<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">mySearch</span><span class="params">(string word,<span class="type">bool</span> includePrefix)</span></span>&#123;</span><br><span class="line">        <span class="type">bool</span> res = <span class="literal">true</span>;</span><br><span class="line">        MyTreeNode* r = <span class="keyword">this</span>-&gt;root;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;word.<span class="built_in">length</span>();i++)&#123;</span><br><span class="line">            <span class="type">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">            <span class="type">int</span> j;</span><br><span class="line">            <span class="keyword">for</span>(j = <span class="number">0</span>;j&lt; r-&gt;childrens.<span class="built_in">size</span>();j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(r-&gt;childrens[j]-&gt;character == word[i])&#123;</span><br><span class="line">                    flag = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å¦‚æœæ²¡æ‰¾åˆ°ï¼Œè¿”å›false</span></span><br><span class="line">            <span class="keyword">if</span>(!flag)&#123;</span><br><span class="line">                res = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//å¦‚æœæ‰¾åˆ°äº†ï¼Œé‚£ä¹ˆç»§ç»­æ‰¾ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œ</span></span><br><span class="line">                r = r-&gt;childrens[j];</span><br><span class="line">                <span class="keyword">if</span>(i == word.<span class="built_in">length</span>()<span class="number">-1</span> &amp;&amp; !includePrefix)&#123; <span class="comment">//å¦‚æœæ˜¯æœ€åä¸€ä¸ªè‡ªç¬¦ï¼Œè¿˜éœ€è¦åˆ¤å®šä¸‹ä¸€ä¸ªr-&gt;isEnd</span></span><br><span class="line">                    <span class="keyword">if</span>(!r-&gt;isEnd) res = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5
id="ä»£ç å®ç°é™æ€vectorç‰ˆæœ¬å¼•è‡ªleetcodeé¢˜è§£"><strong>ä»£ç å®ç°ï¼ˆé™æ€vectorç‰ˆæœ¬ï¼Œå¼•è‡ªLeetCodeé¢˜è§£ï¼‰</strong>ï¼š</h5>
<p>â€‹
å¯ä»¥çœ‹åˆ°ï¼Œå…¶æœ¬èº«ä»£ç ç®€æ´ç¨‹åº¦è¾ƒé«˜ï¼Œå¹¶ä¸”å®ƒå°†Trieç›´æ¥è§†ä¸ºä¸€ä¸ªèŠ‚ç‚¹äº†ï¼Œæ²¡æœ‰å»ºç«‹é¢å¤–çš„TreeNodeç±»ã€‚è¿è¡Œæ—¶é—´ä¸Šå’Œæˆ‘çš„ç®—æ³•ç±»ä¼¼ï¼Œå·®åˆ«ä¸æ˜¯å¾ˆå¤§ã€‚ä½†æ˜¯å…¶å†…å­˜æ¶ˆè€—æ˜¯è¿œå¤§äºæˆ‘çš„ç®—æ³•çš„ï¼Œ</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_02_08_15_17_59_414.png" /></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Trie</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    vector&lt;Trie*&gt; children;</span><br><span class="line">    <span class="type">bool</span> isEnd;</span><br><span class="line"></span><br><span class="line">    <span class="function">Trie* <span class="title">searchPrefix</span><span class="params">(string prefix)</span> </span>&#123;</span><br><span class="line">        Trie* node = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> ch : prefix) &#123;</span><br><span class="line">            ch -= <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span> (node-&gt;children[ch] == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            node = node-&gt;children[ch];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Trie</span>() : <span class="built_in">children</span>(<span class="number">26</span>), <span class="built_in">isEnd</span>(<span class="literal">false</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(string word)</span> </span>&#123;</span><br><span class="line">        Trie* node = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> ch : word) &#123;</span><br><span class="line">            ch -= <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span> (node-&gt;children[ch] == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">                node-&gt;children[ch] = <span class="keyword">new</span> <span class="built_in">Trie</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            node = node-&gt;children[ch];</span><br><span class="line">        &#125;</span><br><span class="line">        node-&gt;isEnd = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">search</span><span class="params">(string word)</span> </span>&#123;</span><br><span class="line">        Trie* node = <span class="keyword">this</span>-&gt;<span class="built_in">searchPrefix</span>(word);</span><br><span class="line">        <span class="keyword">return</span> node != <span class="literal">nullptr</span> &amp;&amp; node-&gt;isEnd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">startsWith</span><span class="params">(string prefix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;<span class="built_in">searchPrefix</span>(prefix) != <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ä½œè€…ï¼šLeetCode-Solution</span><br><span class="line">é“¾æ¥ï¼šhttps:<span class="comment">//leetcode-cn.com/problems/QC3q1f/solution/shi-xian-qian-zhui-shu-by-leetcode-solut-un50/</span></span><br><span class="line">æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</span><br><span class="line">è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></table></figure>
<p>å†è®°å½•ä¸€é“ä¸Šè¿°æ•°æ®ç»“æ„çš„åº”ç”¨é¢˜ï¼š</p>
<h4 id="å‰‘æŒ‡-offer-ii-063.-æ›¿æ¢å•è¯"><a
href="https://leetcode-cn.com/problems/UhWRSj/">å‰‘æŒ‡ Offer II 063.
æ›¿æ¢å•è¯</a></h4>
<p>â€‹ åœ¨è‹±è¯­ä¸­ï¼Œæœ‰ä¸€ä¸ªå«åš è¯æ ¹(root)
çš„æ¦‚å¿µï¼Œå®ƒå¯ä»¥è·Ÿç€å…¶ä»–ä¸€äº›è¯ç»„æˆå¦ä¸€ä¸ªè¾ƒé•¿çš„å•è¯â€”â€”æˆ‘ä»¬ç§°è¿™ä¸ªè¯ä¸º
ç»§æ‰¿è¯(successor)ã€‚ä¾‹å¦‚ï¼Œè¯æ ¹anï¼Œè·Ÿéšç€å•è¯
other(å…¶ä»–)ï¼Œå¯ä»¥å½¢æˆæ–°çš„å•è¯ another(å¦ä¸€ä¸ª)ã€‚</p>
<p>â€‹
ç°åœ¨ï¼Œç»™å®šä¸€ä¸ªç”±è®¸å¤šè¯æ ¹ç»„æˆçš„è¯å…¸å’Œä¸€ä¸ªå¥å­ï¼Œéœ€è¦å°†å¥å­ä¸­çš„æ‰€æœ‰ç»§æ‰¿è¯ç”¨è¯æ ¹æ›¿æ¢æ‰ã€‚å¦‚æœç»§æ‰¿è¯æœ‰è®¸å¤šå¯ä»¥å½¢æˆå®ƒçš„è¯æ ¹ï¼Œåˆ™ç”¨æœ€çŸ­çš„è¯æ ¹æ›¿æ¢å®ƒã€‚éœ€è¦è¾“å‡ºæ›¿æ¢ä¹‹åçš„å¥å­ã€‚</p>
<p>â€‹ ç¤ºä¾‹ 1ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šdictionary = [&quot;cat&quot;,&quot;bat&quot;,&quot;rat&quot;], sentence = &quot;the cattle was rattled by the battery&quot;</span><br><span class="line">è¾“å‡ºï¼š&quot;the cat was rat by the bat&quot;</span><br></pre></td></tr></table></figure>
<p><strong>ä»£ç ï¼ˆAuthor: Fantastï¼‰</strong>ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_02_08_18_14_35_668.png" /></p>
<p>â€‹
ä¸»è¦æ€è·¯å°±æ˜¯å®ç°ä¸€ä¸ªå‰ç¼€æ ‘ï¼Œå…¶ä¸­å’Œä¸Šé¢˜ä¸ä¸€æ ·çš„æ˜¯ï¼Œä¸Šé¢˜æ˜¯å‰ç¼€æ‰¾å•è¯ï¼Œè¿™é¢˜æ˜¯å•è¯æ‰¾å‰ç¼€ï¼Œåäº†åï¼Œæ‰€ä»¥æˆ‘å°†startsWithæ”¹æˆäº†searchRootå‡½æ•°ï¼Œå¤§ä½“æœå¯»é€»è¾‘ä¸€è‡´ã€‚ç„¶åå†åº”ç”¨è¯¥æ•°æ®ç»“æ„è§£é¢˜å³å¯ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyTreeNode</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">bool</span> isEnd;</span><br><span class="line">    <span class="type">char</span> character;</span><br><span class="line">    vector&lt;MyTreeNode*&gt; childrens;</span><br><span class="line">    <span class="built_in">MyTreeNode</span>()&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;isEnd = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">MyTreeNode</span>(<span class="type">char</span> character,<span class="type">bool</span> isEnd)&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;isEnd = isEnd;</span><br><span class="line">        <span class="keyword">this</span>-&gt;character = character;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Trie</span> &#123;</span><br><span class="line">    MyTreeNode* root;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line">    <span class="built_in">Trie</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;root = <span class="keyword">new</span> <span class="built_in">MyTreeNode</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Inserts a word into the trie. */</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(string word)</span> </span>&#123;</span><br><span class="line">        MyTreeNode* r = <span class="keyword">this</span>-&gt;root;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;word.<span class="built_in">length</span>();i++)&#123;</span><br><span class="line">            <span class="type">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">            <span class="type">int</span> j;</span><br><span class="line">            <span class="keyword">for</span>(j = <span class="number">0</span>;j&lt; r-&gt;childrens.<span class="built_in">size</span>();j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(r-&gt;childrens[j]-&gt;character == word[i])&#123;</span><br><span class="line">                    flag = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å¦‚æœæ²¡æ‰¾åˆ°ï¼Œæ’å…¥ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span>(!flag)&#123;</span><br><span class="line">                MyTreeNode* c = <span class="keyword">new</span> <span class="built_in">MyTreeNode</span>(word[i],i == word.<span class="built_in">length</span>()<span class="number">-1</span>);</span><br><span class="line">                r-&gt;childrens.<span class="built_in">push_back</span>(c);</span><br><span class="line">                r = c;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//å¦‚æœæ‰¾åˆ°äº†ï¼Œé‚£ä¹ˆç»§ç»­ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œ</span></span><br><span class="line">                r = r-&gt;childrens[j];</span><br><span class="line">                <span class="keyword">if</span>(i == word.<span class="built_in">length</span>()<span class="number">-1</span>)&#123;  <span class="comment">//å¦‚æœæ˜¯æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆ</span></span><br><span class="line">                    r-&gt;isEnd = <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** æŸ¥è¯¢å­—å…¸ä¸­æ˜¯å¦æœ‰è¯¥å•è¯çš„è¯æ ¹ï¼Œå¦‚æœæœ‰è¿”å›è¯æ ¹ï¼Œå¦‚æœæ²¡æœ‰ï¼Œè¿”å›åŸå•è¯*/</span></span><br><span class="line">    <span class="function">string <span class="title">searchRoot</span><span class="params">(string word)</span> </span>&#123;</span><br><span class="line">        string res;</span><br><span class="line">        MyTreeNode* r = <span class="keyword">this</span>-&gt;root;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;word.<span class="built_in">length</span>();i++)&#123;</span><br><span class="line">            <span class="type">int</span> j;</span><br><span class="line">            <span class="type">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">for</span>(j = <span class="number">0</span>;j&lt; r-&gt;childrens.<span class="built_in">size</span>();j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(r-&gt;childrens[j]-&gt;character == word[i])&#123;</span><br><span class="line">                    flag = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å¦‚æœæ²¡æ‰¾åˆ°ï¼Œè¿”å›false</span></span><br><span class="line">            <span class="keyword">if</span>(!flag)&#123;</span><br><span class="line">                res = word;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//å¦‚æœæ‰¾åˆ°äº†ï¼Œè§‚å¯Ÿå…¶æ˜¯å¦æ˜¯ä¸€ä¸ªè¯æ ¹</span></span><br><span class="line">                r = r-&gt;childrens[j];</span><br><span class="line">                res += r-&gt;character;</span><br><span class="line">                <span class="keyword">if</span>(r-&gt;isEnd)&#123; <span class="comment">//å¦‚æœæ˜¯ä¸€æ•´ä¸ªè¯æ ¹ï¼Œç›´æ¥è¿”å›</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">replaceWords</span><span class="params">(vector&lt;string&gt;&amp; dictionary, string sentence)</span> </span>&#123;</span><br><span class="line">        Trie* t = <span class="keyword">new</span> <span class="built_in">Trie</span>();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;dictionary.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            t-&gt;<span class="built_in">insert</span>(dictionary[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        string res;</span><br><span class="line">        string word;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;sentence.<span class="built_in">length</span>();i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(sentence[i] == <span class="string">&#x27; &#x27;</span>)&#123;</span><br><span class="line">                res += t-&gt;<span class="built_in">searchRoot</span>(word) + <span class="string">&quot; &quot;</span>;</span><br><span class="line">                word = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                word += sentence[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        res += t-&gt;<span class="built_in">searchRoot</span>(word);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å†è®°å½•ä¸€é“ä¸Šè¿°æ•°æ®ç»“æ„çš„æ‹“å±•åº”ç”¨é¢˜ï¼š</p>
<h4 id="å‰‘æŒ‡-offer-ii-067.-æœ€å¤§çš„å¼‚æˆ–"><a
href="https://leetcode-cn.com/problems/ms70jA/">å‰‘æŒ‡ Offer II 067.
æœ€å¤§çš„å¼‚æˆ–</a></h4>
<p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œè¿”å›
<code>nums[i] XOR nums[j]</code> çš„æœ€å¤§è¿ç®—ç»“æœï¼Œå…¶ä¸­
<code>0 â‰¤ i â‰¤ j &lt; n</code> ã€‚</p>
<p><strong>æç¤ºï¼š</strong></p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 2 * 10^4</code></li>
<li><code>0 &lt;= nums[i] &lt;= 2^31 - 1</code></li>
</ul>
<p><strong>è§£é¢˜æ€è·¯</strong>ï¼š</p>
<p>â€‹ å°†æ•´æ•°è§†ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸² 0 /
1ï¼Œæ­¤é¢˜ç›®çš„å­—å…¸æ ‘å­©å­ä»…æœ‰0å’Œ1ï¼Œç„¶åéå†æ‰€æœ‰æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªå…ƒç´ aiæ¥è¯´ï¼Œé€šè¿‡å­—å…¸æ ‘æ‰¾åˆ°å’Œå®ƒå¼‚æˆ–æœ€å¤§çš„é‚£ä¸ªå€¼ã€‚éå†å…ƒç´ O(n)å¤æ‚åº¦ï¼Œé€šè¿‡å­—å…¸æ ‘æ‰¾åˆ°æ¯ä¸ªå…ƒç´ çš„å¼‚æˆ–æœ€å¤§çš„å€¼ä¸ºlog(C)ï¼Œæ•…è€Œæ€»çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(nlog(C))</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyTreeNode</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    MyTreeNode* left;  <span class="comment">// 0 </span></span><br><span class="line">    MyTreeNode* right; <span class="comment">// 1</span></span><br><span class="line">    <span class="built_in">MyTreeNode</span>()&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;left = <span class="keyword">this</span>-&gt;right = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Trie</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    MyTreeNode* root;</span><br><span class="line">    <span class="built_in">Trie</span>()&#123;</span><br><span class="line">        root = <span class="keyword">new</span> <span class="built_in">MyTreeNode</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> val)</span></span>&#123;</span><br><span class="line">        MyTreeNode* r = <span class="keyword">this</span>-&gt;root;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">32</span>;i++)&#123;</span><br><span class="line">            <span class="type">int</span> bit = (val &gt;&gt; (<span class="number">31</span>-i)) &amp; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(bit == <span class="number">0</span> &amp;&amp; r-&gt;left)&#123; <span class="comment">//æ‰¾åˆ°è¿™ä¸ªèŠ‚ç‚¹äº†</span></span><br><span class="line">                r = r-&gt;left;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(bit == <span class="number">1</span> &amp;&amp; r-&gt;right)&#123; <span class="comment">//æ‰¾åˆ°è¿™ä¸ªèŠ‚ç‚¹äº†</span></span><br><span class="line">                r = r-&gt;right;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//æ²¡æ‰¾åˆ°è¿™ä¸ªèŠ‚ç‚¹ï¼Œè¿›è¡Œæ’å…¥</span></span><br><span class="line">                MyTreeNode* c = <span class="keyword">new</span> <span class="built_in">MyTreeNode</span>();</span><br><span class="line">                <span class="keyword">if</span>(bit == <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="comment">//æ’å…¥å·¦ä¾§</span></span><br><span class="line">                    r-&gt;left = c;</span><br><span class="line">                    r = r-&gt;left;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="comment">//æ’å…¥å³ä¾§</span></span><br><span class="line">                    r-&gt;right = c;</span><br><span class="line">                    r = r-&gt;right;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">calculateMax</span><span class="params">(<span class="type">int</span> val)</span></span>&#123;</span><br><span class="line">        MyTreeNode* r = <span class="keyword">this</span>-&gt;root;</span><br><span class="line">        <span class="type">int</span> multi_val = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">32</span>;i++)&#123;</span><br><span class="line">            <span class="type">int</span> bit = (val &gt;&gt; (<span class="number">31</span>-i)) &amp; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(bit == <span class="number">0</span> &amp;&amp; r-&gt;right)&#123;</span><br><span class="line">                <span class="comment">//å½“å‰ä½ä¸º0ï¼Œä¸”æœ‰1ï¼Œé‚£ä¹ˆç›´æ¥å¾€1é‚£è¾¹èµ°</span></span><br><span class="line">                r = r-&gt;right;</span><br><span class="line">                multi_val = (multi_val &lt;&lt; <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(bit == <span class="number">1</span> &amp;&amp; r-&gt;left)&#123;</span><br><span class="line">                <span class="comment">//å½“å‰ä½ä¸º1ï¼Œä¸”æœ‰0ï¼Œé‚£ä¹ˆç›´æ¥å¾€0é‚£è¾¹èµ°</span></span><br><span class="line">                r = r-&gt;left;</span><br><span class="line">                multi_val = multi_val &lt;&lt; <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(bit == <span class="number">0</span> &amp;&amp; !r-&gt;right &amp;&amp; r-&gt;left)&#123;</span><br><span class="line">                <span class="comment">//å½“å‰ä½ä¸º0ï¼Œä¸”æ— 1ï¼Œåˆ™å¾€0é‚£è¾¹èµ°</span></span><br><span class="line">                r = r-&gt;left;</span><br><span class="line">                multi_val = multi_val &lt;&lt; <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(bit == <span class="number">1</span> &amp;&amp; !r-&gt;left &amp;&amp; r-&gt;right)&#123;</span><br><span class="line">                <span class="comment">//å½“å‰ä½ä¸º1ï¼Œä¸”æ— 0ï¼Œé‚£ä¹ˆç›´æ¥å¾€1é‚£è¾¹èµ°</span></span><br><span class="line">                r = r-&gt;right;</span><br><span class="line">                multi_val = (multi_val &lt;&lt; <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> multi_val ^ val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findMaximumXOR</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        Trie* t = <span class="keyword">new</span> <span class="built_in">Trie</span>();</span><br><span class="line">        <span class="type">int</span> maxVal = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            t-&gt;<span class="built_in">insert</span>(nums[i]);</span><br><span class="line">            maxVal = <span class="built_in">max</span>(maxVal,t-&gt;<span class="built_in">calculateMax</span>(nums[i]));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxVal;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>å­—ç¬¦ä¸²ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>container</tag>
      </tags>
  </entry>
  <entry>
    <title>å­—ç¬¦ä¸²äº¤ç»‡é—®é¢˜</title>
    <url>/2022/02/21/f178664086c4/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-096.-å­—ç¬¦ä¸²äº¤ç»‡"><a
href="https://leetcode-cn.com/problems/IY6buf/">å‰‘æŒ‡ Offer II 096.
å­—ç¬¦ä¸²äº¤ç»‡</a></h4>
<p>ç»™å®šä¸‰ä¸ªå­—ç¬¦ä¸² s1ã€s2ã€s3ï¼Œè¯·åˆ¤æ–­ s3 èƒ½ä¸èƒ½ç”± s1 å’Œ s2 äº¤ç»‡ï¼ˆäº¤é”™ï¼‰
ç»„æˆã€‚</p>
<p>ä¸¤ä¸ªå­—ç¬¦ä¸² s å’Œ t äº¤ç»‡
çš„å®šä¹‰ä¸è¿‡ç¨‹å¦‚ä¸‹ï¼Œå…¶ä¸­æ¯ä¸ªå­—ç¬¦ä¸²éƒ½ä¼šè¢«åˆ†å‰²æˆè‹¥å¹² éç©º å­å­—ç¬¦ä¸²ï¼š</p>
<pre><code>s = s1 + s2 + ... + sn
t = t1 + t2 + ... + tm
|n - m| &lt;= 1
äº¤ç»‡ æ˜¯ s1 + t1 + s2 + t2 + s3 + t3 + ... æˆ–è€… t1 + s1 + t2 + s2 + t3 + s3 + ...</code></pre>
<p>æç¤ºï¼ša + b æ„å‘³ç€å­—ç¬¦ä¸² a å’Œ b è¿æ¥ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs1 = &quot;aabcc&quot;, s2 = &quot;dbbca&quot;, s3 = &quot;aadbbcbcac&quot;</span><br><span class="line">è¾“å‡ºï¼štrue</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯1"><strong>è§£é¢˜æ€è·¯1</strong>ï¼š</h5>
<p>â€‹
è¯¥é¢˜å…¶å®å¯ä»¥ä½¿ç”¨éå¸¸æ–¹ä¾¿çš„å›æº¯æ³•æ€æƒ³è¿›è¡Œè§£é¢˜ï¼Œåˆ©ç”¨é€’å½’çš„å½¢å¼ï¼šæˆ‘ä»¬å®šä¹‰ä¸‰ä¸ªæŒ‡é’ˆiï¼Œjï¼Œkï¼Œåˆ†åˆ«æŒ‡å‘ä¸‰ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœs1[i]
== s3[k]ï¼Œé‚£ä¹ˆé€’å½’å¤„ç†(i+1,j,k+1)ã€‚åŒç†ï¼Œå¦‚æœs2[j] ==
s3[k]ï¼Œé‚£ä¹ˆé€’å½’å¤„ç†(i,j+1,k+1)ã€‚é€’å½’è¾¹ç•Œæ˜¯ï¼šå¦‚æœiï¼Œjï¼Œkéƒ½åˆ°è¾¾äº†å­—ç¬¦ä¸²çš„æœ€åï¼Œå°±ä»£è¡¨èƒ½å¤Ÿå®Œæˆå­—ç¬¦ä¸²äº¤ç»‡ã€‚</p>
<h5 id="ä»£ç å¦‚ä¸‹"><strong>ä»£ç å¦‚ä¸‹ï¼š</strong></h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isInterleave</span><span class="params">(string s1, string s2, string s3)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">backtrace</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,s1,s2,s3);</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">backtrace</span><span class="params">(<span class="type">int</span> i,<span class="type">int</span> j,<span class="type">int</span> k,string &amp;s1, string &amp;s2, string &amp;s3)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i == s1.<span class="built_in">length</span>() &amp;&amp; j == s2.<span class="built_in">length</span>() &amp;&amp; k == s3.<span class="built_in">length</span>())&#123;</span><br><span class="line">            <span class="keyword">this</span>-&gt;flag = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(i&lt;s1.<span class="built_in">length</span>() &amp;&amp; s1[i] == s3[k]) <span class="built_in">backtrace</span>(i+<span class="number">1</span>,j,k+<span class="number">1</span>,s1,s2,s3);</span><br><span class="line">        <span class="keyword">if</span>(j&lt;s2.<span class="built_in">length</span>() &amp;&amp; s2[j] == s3[k]) <span class="built_in">backtrace</span>(i,j+<span class="number">1</span>,k+<span class="number">1</span>,s1,s2,s3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ï¼Œä¼šå‡ºç°ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼Œå¯¹äºä¸€äº›è¾ƒé•¿çš„åºåˆ—æ¥è¯´ï¼Œä¼šé€šä¸è¿‡ï¼Œè¿è¡Œè¶…æ—¶ã€‚è¿™æ˜¯å› ä¸ºï¼Œè¿™ä¸ªå›æº¯æ³•ï¼Œåœ¨åˆ†æ”¯è¿›è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯å¾ˆå®¹æ˜“å‡ºç°éå¸¸å¤šçš„åˆ†æ”¯ï¼Œå¹¶ä¸”ä¼šå®¹æ˜“é€’å½’å¾ˆå¤šæ¬¡çš„ã€‚æ‰€ä»¥ï¼Œå¯¹äºä¸€äº›å·²ç»é€’å½’è¿‡çš„iï¼Œjï¼Œkç»“æœï¼Œæˆ‘ä»¬éœ€è¦ç›´æ¥è®©å®ƒè¿”å›ï¼Œä¸è¦ç»§ç»­é€’å½’è®¡ç®—ï¼Œä¹Ÿå°±æ˜¯å¯¹å›æº¯æ³•è¿›è¡Œå‰ªæçš„æ“ä½œã€‚</p>
<h5 id="ä¼˜åŒ–ä»£ç å¦‚ä¸‹"><strong>ä¼˜åŒ–ä»£ç å¦‚ä¸‹ï¼š</strong></h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isInterleave</span><span class="params">(string s1, string s2, string s3)</span> </span>&#123;</span><br><span class="line">        unordered_map&lt;<span class="type">int</span>,<span class="type">int</span>&gt; m; </span><br><span class="line">        <span class="built_in">backtrace</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,s1,s2,s3,m);</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">backtrace</span><span class="params">(<span class="type">int</span> i,<span class="type">int</span> j,<span class="type">int</span> k,string &amp;s1, string &amp;s2, string &amp;s3,unordered_map&lt;<span class="type">int</span>,<span class="type">int</span>&gt; &amp;m)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i == s1.<span class="built_in">length</span>() &amp;&amp; j == s2.<span class="built_in">length</span>() &amp;&amp; k == s3.<span class="built_in">length</span>())&#123;</span><br><span class="line">            <span class="keyword">this</span>-&gt;flag = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> checkpoint = i * <span class="number">100</span> + j * <span class="number">10</span> + k;</span><br><span class="line">        <span class="keyword">if</span>(m.<span class="built_in">find</span>(checkpoint) != m.<span class="built_in">end</span>()) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">else</span> m[checkpoint] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(i&lt;s1.<span class="built_in">length</span>() &amp;&amp; s1[i] == s3[k]) <span class="built_in">backtrace</span>(i+<span class="number">1</span>,j,k+<span class="number">1</span>,s1,s2,s3,m);</span><br><span class="line">        <span class="keyword">if</span>(j&lt;s2.<span class="built_in">length</span>() &amp;&amp; s2[j] == s3[k]) <span class="built_in">backtrace</span>(i,j+<span class="number">1</span>,k+<span class="number">1</span>,s1,s2,s3,m);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-02-21%20ä¸‹åˆ2.48.28.png" /></p>
<h5
id="è§£é¢˜æ€è·¯2dynamic-programming-åŠ¨æ€è§„åˆ’"><strong>è§£é¢˜æ€è·¯2ï¼šDynamic
Programming åŠ¨æ€è§„åˆ’</strong></h5>
<p><strong>å‚è€ƒé¢˜è§£ï¼š</strong>https://leetcode-cn.com/problems/IY6buf/solution/jian-zhi-offerguan-jie-de-ge-ren-li-jie-gpspb/</p>
<p>https://leetcode-cn.com/problems/IY6buf/solution/jian-zhi-offer-2-mian-shi-ti-96-shu-zhon-5kc7/</p>
<p>â€‹
å¯ä»¥æŠŠé¢˜ç›®è¿›è¡Œä¸€å®šçš„ç­‰æ•ˆè½¬æ¢ã€‚çº¦å®šä»s1å’Œs2ä¸­æŒ‰ä»å¤´åˆ°å°¾çš„é¡ºåºï¼Œä¾æ¬¡å–å‡ºä¸€ä¸ªå­—ç¬¦ï¼ˆæ¯æ¬¡å¯ä»¥ä»s1ä¸­å–ï¼Œä¹Ÿå¯ä»¥ä»s2ä¸­å–ï¼‰ï¼ŒåŠ å…¥å­—ç¬¦ä¸²s3ä¸­ï¼Œè¿™æ ·s3ä¸€å®šæ˜¯s1å’Œs2äº¤é”™ç»„æˆçš„ç»“æœã€‚</p>
<p>â€‹
é‚£ä¹ˆé—®é¢˜å°±è½¬æ¢ä¸ºåœ¨æŒ‰é¡ºåºå–çš„æƒ…å†µä¸‹ï¼Œs1çš„å‰iä¸ªå­—ç¬¦å’Œs2çš„å‰jjjä¸ªå­—ç¬¦æ˜¯å¦èƒ½æ„æˆs3çš„å‰i+jä¸ªå­—ç¬¦ï¼Ÿ</p>
<h6
id="çŠ¶æ€è½¬ç§»æ–¹ç¨‹ç”¨fijè¡¨ç¤ºs10iå’Œs20jèƒ½å¦ç»„æˆs30ij1"><strong>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</strong>ï¼šç”¨f(i,j)è¡¨ç¤ºs1[0:i]å’Œs2[0:j]èƒ½å¦ç»„æˆs3[0:i+j+1]</h6>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if s3[i+j+1] == s1[i]</span><br><span class="line">    f(i,j) = f(i-1,j)</span><br><span class="line">if s3[i+j+1] == s2[j]</span><br><span class="line">    f(i,j) = f(i,j-1)</span><br><span class="line">if s3[i+j+1] == s1[i] == s2[j]</span><br><span class="line">    f(i,j) = f(i-1,j) || f(i,j-1)</span><br></pre></td></tr></table></figure>
<h6
id="çŠ¶æ€è½¬ç§»æ–¹ç¨‹çš„åŸç†-å¯¹äºå­—ç¬¦ä¸²s30ij1çš„æœ€åä¸€ä¸ªå­—ç¬¦"><strong>çŠ¶æ€è½¬ç§»æ–¹ç¨‹çš„åŸç†:</strong>
å¯¹äºå­—ç¬¦ä¸²s3[0:i+j+1]çš„æœ€åä¸€ä¸ªå­—ç¬¦ï¼š</h6>
<ul>
<li>å¦‚æœè¯¥å­—ç¬¦ç­‰äºs1æœ€åä¸€ä¸ªå­—ç¬¦ï¼ŒåŸé—®é¢˜å˜ä¸ºå­é—®é¢˜1ï¼š
s3[0:i+j]æ˜¯å¦å¯ä»¥ç”±s1[0:i-1]ä¸s2[0:j]æ„æˆï¼›</li>
<li>å¦‚æœè¯¥å­—ç¬¦ç­‰äºs2æœ€åä¸€ä¸ªå­—ç¬¦ï¼ŒåŸé—®é¢˜å˜ä¸ºå­é—®é¢˜2ï¼š
s3[0:i+j]å¯ä»¥ç”±s1[0:i]ä¸s2[0:j-1]æ„æˆã€‚</li>
<li>å¦‚æœè¯¥å­—ç¬¦ç­‰äºs2æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œä¹Ÿç­‰äºs1æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆå­é—®é¢˜1å’Œå­é—®é¢˜2ä¸­ä»»ä½•ä¸€ä¸ªæˆç«‹ï¼Œéƒ½å¯ä»¥æ¨å‡ºåŸé—®é¢˜æˆç«‹</li>
</ul>
<p><strong>å…¶ä½™æ³¨æ„åˆå§‹çŠ¶æ€å³å¯</strong>ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isInterleave</span><span class="params">(string s1, string s2, string s3)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(s1.<span class="built_in">size</span>() + s2.<span class="built_in">size</span>() != s3.<span class="built_in">size</span>()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        vector&lt;vector&lt;<span class="type">bool</span>&gt;&gt; <span class="built_in">dp</span>(s1.<span class="built_in">size</span>() + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">bool</span>&gt;(s2.<span class="built_in">size</span>() + <span class="number">1</span>, <span class="literal">false</span>));</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; s2.<span class="built_in">size</span>() &amp;&amp; s2[j] == s3[j]; ++j) &#123;</span><br><span class="line">            dp[<span class="number">0</span>][j + <span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; s1.<span class="built_in">size</span>() &amp;&amp; s1[i] == s3[i]; ++i) &#123;</span><br><span class="line">            dp[i + <span class="number">1</span>][<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; s1.<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; s2.<span class="built_in">size</span>(); ++j) &#123; </span><br><span class="line">                <span class="type">char</span> ch1 = s1[i];</span><br><span class="line">                <span class="type">char</span> ch2 = s2[j];</span><br><span class="line">                <span class="type">char</span> ch3 = s3[i + j + <span class="number">1</span>];</span><br><span class="line">                dp[i + <span class="number">1</span>][j + <span class="number">1</span>] = ((ch1 == ch3) &amp;&amp; dp[i][j + <span class="number">1</span>]) || ((ch2 == ch3) &amp;&amp; dp[i + <span class="number">1</span>][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[s1.<span class="built_in">size</span>()][s2.<span class="built_in">size</span>()];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>å­—ç¬¦ä¸²ç³»åˆ—</category>
        <category>åŠ¨æ€è§„åˆ’ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>dynamic programming</tag>
        <tag>string</tag>
      </tags>
  </entry>
  <entry>
    <title>å®¹å™¨è®¾è®¡â€”â€”LRUæœ€è¿‘æœ€å°‘ä½¿ç”¨ç¼“å­˜çš„å®¹å™¨è®¾è®¡</title>
    <url>/2022/02/05/4cd58a8a96c9/</url>
    <content><![CDATA[<h3 id="å‰‘æŒ‡-offer-ii-031.-æœ€è¿‘æœ€å°‘ä½¿ç”¨ç¼“å­˜"><a
href="https://leetcode-cn.com/problems/OrIXps/">å‰‘æŒ‡ Offer II 031.
æœ€è¿‘æœ€å°‘ä½¿ç”¨ç¼“å­˜</a></h3>
<h5 id="é¢˜ç›®ç®€è¦æè¿°"><strong>é¢˜ç›®ç®€è¦æè¿°</strong>ï¼š</h5>
<p>â€‹ è¿ç”¨æ‰€æŒæ¡çš„æ•°æ®ç»“æ„ï¼Œè®¾è®¡å’Œå®ç°ä¸€ä¸ª LRU (Least Recently
Usedï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨) ç¼“å­˜æœºåˆ¶ ã€‚</p>
<p><strong>å®ç° LRUCache ç±»ï¼š</strong></p>
<ul>
<li><p>LRUCache(int capacity) ä»¥æ­£æ•´æ•°ä½œä¸ºå®¹é‡ capacity åˆå§‹åŒ– LRU
ç¼“å­˜</p></li>
<li><p>int get(int key) å¦‚æœå…³é”®å­— key
å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™è¿”å›å…³é”®å­—çš„å€¼ï¼Œå¦åˆ™è¿”å› -1 ã€‚</p></li>
<li><p>void put(int key, int value)
å¦‚æœå…³é”®å­—å·²ç»å­˜åœ¨ï¼Œåˆ™å˜æ›´å…¶æ•°æ®å€¼ï¼›å¦‚æœå…³é”®å­—ä¸å­˜åœ¨ï¼Œåˆ™æ’å…¥è¯¥ç»„ã€Œå…³é”®å­—-å€¼ã€ã€‚å½“ç¼“å­˜å®¹é‡è¾¾åˆ°ä¸Šé™æ—¶ï¼Œå®ƒåº”è¯¥åœ¨å†™å…¥æ–°æ•°æ®ä¹‹å‰åˆ é™¤æœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®å€¼ï¼Œä»è€Œä¸ºæ–°çš„æ•°æ®å€¼ç•™å‡ºç©ºé—´ã€‚</p></li>
</ul>
<p><strong>ç±»æ¨¡ç‰ˆ</strong>ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LRUCache</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">LRUCache</span>(<span class="type">int</span> capacity) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">int</span> key)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">put</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span> value)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>â€‹ <strong>ä½¿ç”¨ åŒå‘é“¾è¡¨ ä¸ Hash è¡¨</strong>ï¼Œå®ç°
LRUï¼šå°†æ–°æ’å…¥çš„å…ƒç´ æ”¾åœ¨é“¾è¡¨å¤´éƒ¨ï¼Œæˆ–å°†æœ€æ–°è®¿é—®çš„èŠ‚ç‚¹æ”¾åœ¨é“¾è¡¨çš„å¤´éƒ¨ã€‚å¦‚æœå®¹é‡åˆ°è¾¾ä¸Šé™ï¼Œå»é™¤é“¾è¡¨æœ€åçš„å…ƒç´ ã€‚åœ¨æ­¤æœŸé—´ï¼Œ<strong>ä¸ºäº†ä¿è¯è®¿é—®é“¾è¡¨çš„å¤´éƒ¨å’Œå°¾éƒ¨éƒ½æ˜¯O(1)æ—¶é—´ï¼Œæˆ‘ä»¬éœ€è¦ç»´æŠ¤ä¸€ä¸ªHeadå’Œä¸€ä¸ªTailèŠ‚ç‚¹ï¼Œåˆ†åˆ«æŒ‡å‘åŒå‘é“¾è¡¨çš„å¤´éƒ¨å’Œå°¾éƒ¨ï¼Œè¿™ä¸¤ä¸ªå¤´éƒ¨å’Œå°¾éƒ¨çš„èŠ‚ç‚¹ä¸­æ˜¯ä¸å­˜æ”¾æ•°æ®ï¼Œç•™ç©ºçš„ï¼Œä»…ä¸ºäº†è¿›è¡ŒæŒ‡ç¤ºã€‚</strong>å¹¶ä¸”ä¸ºäº†ä¿è¯<strong>åœ¨O(1)æ—¶é—´å†…èƒ½å¤Ÿè·å–ä»»æ„ä¸€ä¸ªå…ƒç´ </strong>ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å»ºç«‹ä¸€ä¸ªHashMapï¼Œå°†keyå€¼ä¸å¯¹åº”çš„é“¾è¡¨èŠ‚ç‚¹å…³è”ï¼Œä»¥æ–¹ä¾¿ä»¥O(1)æ—¶é—´è¿›è¡Œè®¿é—®ã€‚</p>
<p><strong>ä»£ç </strong>ï¼šä»¥ä¸‹ä»£ç æˆ‘å¹¶æ²¡æœ‰åšä»»ä½•çš„ä¼˜åŒ–ï¼Œæ¯”å¦‚è¯´åˆå¹¶ä¸€äº›å¯å¤ç”¨çš„å‡½æ•°ï¼Œå› ä¸ºè¿™æ ·çœ‹ä¸Šå»æ›´ç®€å•æ˜äº†ä¸€äº›ï¼Œå…¶å®æ¯”å¦‚è¯´åƒä¸€äº›å°†Nodeæ’å…¥åˆ°é“¾è¡¨å‰æ–¹çš„æ“ä½œï¼Œä»¥åŠåˆ é™¤é“¾è¡¨æœ€åä¸€ä¸ªå…ƒç´ çš„æ“ä½œï¼Œéƒ½æ˜¯å¯ä»¥å†™æˆå‡½æ•°å°è£…èµ·æ¥çš„ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Node* prev;</span><br><span class="line">	Node* next;</span><br><span class="line">	<span class="type">int</span> key;</span><br><span class="line">	<span class="type">int</span> value;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">Node</span>() &#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;prev = <span class="literal">NULL</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">Node</span>(<span class="type">int</span> key, <span class="type">int</span> value) &#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;prev = <span class="literal">NULL</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;key = key;</span><br><span class="line">		<span class="keyword">this</span>-&gt;value = value;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LRUCache</span> &#123;</span><br><span class="line">	<span class="type">int</span> capacity;</span><br><span class="line">	<span class="type">int</span> curr_size;</span><br><span class="line">	Node* head; <span class="comment">//é“¾è¡¨å¤´èŠ‚ç‚¹</span></span><br><span class="line">	Node* tail; <span class="comment">//é“¾è¡¨å°¾å·´èŠ‚ç‚¹</span></span><br><span class="line">	unordered_map&lt;<span class="type">int</span>, Node*&gt; key2Node; <span class="comment">//key - Node çš„è½¬æ¢</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="built_in">LRUCache</span>(<span class="type">int</span> capacity) &#123;</span><br><span class="line">		<span class="keyword">this</span>-&gt;curr_size = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">this</span>-&gt;capacity = capacity;</span><br><span class="line">		<span class="keyword">this</span>-&gt;head = <span class="keyword">new</span> <span class="built_in">Node</span>();</span><br><span class="line">		<span class="keyword">this</span>-&gt;tail = <span class="keyword">new</span> <span class="built_in">Node</span>();</span><br><span class="line">		head-&gt;next = tail;</span><br><span class="line">		tail-&gt;prev = head;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">int</span> key)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (key2Node.<span class="built_in">find</span>(key) == key2Node.<span class="built_in">end</span>()) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">		Node* curr = key2Node[key];</span><br><span class="line">		<span class="comment">//å°†currå…ˆä»é“¾è¡¨ä¸­åˆ æ‰</span></span><br><span class="line">		Node* prev = curr-&gt;prev;</span><br><span class="line">		<span class="keyword">if</span> (prev) prev-&gt;next = curr-&gt;next;</span><br><span class="line">		<span class="keyword">if</span> (curr-&gt;next) curr-&gt;next-&gt;prev = prev;</span><br><span class="line">		<span class="comment">//ç„¶åæ·»åŠ åˆ°é“¾è¡¨çš„æœ€å‰é¢</span></span><br><span class="line">		Node* next = <span class="keyword">this</span>-&gt;head-&gt;next;</span><br><span class="line">		curr-&gt;prev = head;</span><br><span class="line">		head-&gt;next = curr;</span><br><span class="line">		curr-&gt;next = next;</span><br><span class="line">		next-&gt;prev = curr;</span><br><span class="line">		<span class="keyword">return</span> curr-&gt;value;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">put</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span> value)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (key2Node.<span class="built_in">find</span>(key) != key2Node.<span class="built_in">end</span>()) &#123;</span><br><span class="line">			<span class="comment">//ä¿®æ”¹å€¼å¹¶å°†è¯¥å…ƒç´ æ’åˆ°æœ€å‰é¢</span></span><br><span class="line">			Node* curr = key2Node[key];</span><br><span class="line">			curr-&gt;value = value;</span><br><span class="line">			<span class="comment">//å°†currå…ˆä»é“¾è¡¨ä¸­åˆ æ‰</span></span><br><span class="line">			Node* prev = curr-&gt;prev;</span><br><span class="line">			<span class="keyword">if</span> (prev) prev-&gt;next = curr-&gt;next;</span><br><span class="line">			<span class="keyword">if</span> (curr-&gt;next) curr-&gt;next-&gt;prev = prev;</span><br><span class="line">			<span class="comment">//ç„¶åæ·»åŠ åˆ°é“¾è¡¨çš„æœ€å‰é¢</span></span><br><span class="line">			Node* next = <span class="keyword">this</span>-&gt;head-&gt;next;</span><br><span class="line">			curr-&gt;prev = head;</span><br><span class="line">			head-&gt;next = curr;</span><br><span class="line">			curr-&gt;next = next;</span><br><span class="line">			next-&gt;prev = curr;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>-&gt;curr_size == <span class="keyword">this</span>-&gt;capacity) &#123;</span><br><span class="line">			<span class="comment">//å¦‚æœå®¹é‡æ»¡äº†,ä¸¢æ‰æœ€å°¾å·´çš„é‚£ä¸ªï¼Œç„¶åæ’å…¥åˆ°æœ€å‰é¢</span></span><br><span class="line">			<span class="comment">//ä¸¢æ‰æœ€å°¾å·´é‚£ä¸ª</span></span><br><span class="line">			Node* prev = <span class="keyword">this</span>-&gt;tail-&gt;prev;</span><br><span class="line">			key2Node.<span class="built_in">erase</span>(prev-&gt;key); <span class="comment">//æŠ¹é™¤key2Nodeé‡Œ</span></span><br><span class="line">			<span class="keyword">if</span> (prev-&gt;prev) prev-&gt;prev-&gt;next = tail;</span><br><span class="line">			tail-&gt;prev = prev-&gt;prev;</span><br><span class="line">			prev-&gt;prev = prev-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">			<span class="comment">//æ’å…¥è¯¥å…ƒç´ åˆ°æœ€å‰é¢</span></span><br><span class="line">			Node* temp = <span class="keyword">new</span> <span class="built_in">Node</span>(key, value);</span><br><span class="line">			Node* next = <span class="keyword">this</span>-&gt;head-&gt;next;</span><br><span class="line">			temp-&gt;prev = head;</span><br><span class="line">			head-&gt;next = temp;</span><br><span class="line">			temp-&gt;next = next;</span><br><span class="line">			next-&gt;prev = temp;</span><br><span class="line">			key2Node[key] = temp;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="comment">//å¦‚æœå®¹é‡æ²¡æ»¡ï¼Œå…ƒç´ æ’å…¥åˆ°æœ€å‰é¢ï¼Œå¹¶åŠ è½½å…¥mapä¸­</span></span><br><span class="line">			Node* temp = <span class="keyword">new</span> <span class="built_in">Node</span>(key, value);</span><br><span class="line">			Node* next = <span class="keyword">this</span>-&gt;head-&gt;next;</span><br><span class="line">			temp-&gt;prev = head;</span><br><span class="line">			head-&gt;next = temp;</span><br><span class="line">			temp-&gt;next = next;</span><br><span class="line">			next-&gt;prev = temp;</span><br><span class="line">			key2Node[key] = temp;</span><br><span class="line">			<span class="keyword">this</span>-&gt;curr_size++;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>è¿è¡Œç»“æœ</strong>:</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_02_06_11_41_37_32.png" /></p>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>å®¹å™¨è®¾è®¡ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>container</tag>
      </tags>
  </entry>
  <entry>
    <title>å¥‡å¦™åº”ç”¨â€”â€”å­—ç¬¦ä¸²æ¯”è¾ƒä¸­å¹¿ä¹‰é‚»å±…çš„åº”ç”¨</title>
    <url>/2022/02/08/4ccc50ba5a4e/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-064.-ç¥å¥‡çš„å­—å…¸"><a
href="https://leetcode-cn.com/problems/US1pGT/">å‰‘æŒ‡ Offer II 064.
ç¥å¥‡çš„å­—å…¸</a></h4>
<p>â€‹ è®¾è®¡ä¸€ä¸ªä½¿ç”¨å•è¯åˆ—è¡¨è¿›è¡Œåˆå§‹åŒ–çš„æ•°æ®ç»“æ„ï¼Œå•è¯åˆ—è¡¨ä¸­çš„å•è¯ äº’ä¸ç›¸åŒ
ã€‚
å¦‚æœç»™å‡ºä¸€ä¸ªå•è¯ï¼Œè¯·åˆ¤å®šèƒ½å¦åªå°†è¿™ä¸ªå•è¯ä¸­ä¸€ä¸ªå­—æ¯æ¢æˆå¦ä¸€ä¸ªå­—æ¯ï¼Œä½¿å¾—æ‰€å½¢æˆçš„æ–°å•è¯å­˜åœ¨äºå·²æ„å»ºçš„ç¥å¥‡å­—å…¸ä¸­ã€‚</p>
<p>å®ç° MagicDictionary ç±»ï¼š</p>
<ul>
<li>MagicDictionary() åˆå§‹åŒ–å¯¹è±¡</li>
<li>void buildDict(String[] dictionary) ä½¿ç”¨å­—ç¬¦ä¸²æ•°ç»„ dictionary
è®¾å®šè¯¥æ•°æ®ç»“æ„ï¼Œdictionary ä¸­çš„å­—ç¬¦ä¸²äº’ä¸ç›¸åŒ</li>
<li>bool search(String searchWord) ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² searchWord
ï¼Œåˆ¤å®šèƒ½å¦åªå°†å­—ç¬¦ä¸²ä¸­ ä¸€ä¸ª
å­—æ¯æ¢æˆå¦ä¸€ä¸ªå­—æ¯ï¼Œä½¿å¾—æ‰€å½¢æˆçš„æ–°å­—ç¬¦ä¸²èƒ½å¤Ÿä¸å­—å…¸ä¸­çš„ä»»ä¸€å­—ç¬¦ä¸²åŒ¹é…ã€‚å¦‚æœå¯ä»¥ï¼Œè¿”å›
true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥</span><br><span class="line">inputs = [&quot;MagicDictionary&quot;, &quot;buildDict&quot;, &quot;search&quot;, &quot;search&quot;, &quot;search&quot;, &quot;search&quot;]</span><br><span class="line">inputs = [[], [[&quot;hello&quot;, &quot;leetcode&quot;]], [&quot;hello&quot;], [&quot;hhllo&quot;], [&quot;hell&quot;], [&quot;leetcoded&quot;]]</span><br><span class="line">è¾“å‡º</span><br><span class="line">[null, null, false, true, false, false]</span><br><span class="line"></span><br><span class="line">è§£é‡Š</span><br><span class="line">MagicDictionary magicDictionary = new MagicDictionary();</span><br><span class="line">magicDictionary.buildDict([&quot;hello&quot;, &quot;leetcode&quot;]);</span><br><span class="line">magicDictionary.search(&quot;hello&quot;); // è¿”å› False</span><br><span class="line">magicDictionary.search(&quot;hhllo&quot;); // å°†ç¬¬äºŒä¸ª &#x27;h&#x27; æ›¿æ¢ä¸º &#x27;e&#x27; å¯ä»¥åŒ¹é… &quot;hello&quot; ï¼Œæ‰€ä»¥è¿”å› True</span><br><span class="line">magicDictionary.search(&quot;hell&quot;); // è¿”å› False</span><br><span class="line">magicDictionary.search(&quot;leetcoded&quot;); // è¿”å› False</span><br></pre></td></tr></table></figure>
<p>æç¤ºï¼š</p>
<pre><code>1 &lt;= dictionary.length &lt;= 100
1 &lt;= dictionary[i].length &lt;= 100
dictionary[i] ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
dictionary ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸² äº’ä¸ç›¸åŒ
1 &lt;= searchWord.length &lt;= 100
searchWord ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
buildDict ä»…åœ¨ search ä¹‹å‰è°ƒç”¨ä¸€æ¬¡
æœ€å¤šè°ƒç”¨ 100 æ¬¡ search</code></pre>
<h5 id="è§£é¢˜æ€è·¯"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>â€‹
ä¸€å¼€å§‹çœ‹åˆ°è¿™é“é¢˜ï¼Œæƒ³åˆ°å‰ç¼€æ ‘ï¼Œä½†æ˜¯ç»è¿‡å°è¯•ï¼Œå‘ç°å‰ç¼€æ ‘æ²¡æ³•ä½¿ç”¨ï¼Œåˆ¤å®šä¸¤ä¸ªå­—ç¬¦ä¸²åªå·®1ä¸ªå­—ç¬¦ï¼Œéå¸¸éå¸¸ç»•ï¼Œå¹¶ä¸”å½“å¦‚ä¸‹æƒ…å†µå‡ºç°æ—¶ï¼Œä¼šå‘ç”Ÿé”™è¯¯ï¼š</p>
<p>â€‹
<strong>ä¾‹å¦‚ï¼šå­—å…¸ä¸­å­˜åœ¨hello,halloã€‚æˆ‘ä»¬æŸ¥æ‰¾helloï¼Œæˆ‘çš„å‰ç¼€æ ‘ç®—æ³•å› ä¸ºæ‰¾åˆ°äº†å®Œå…¨åŒ¹é…çš„helloï¼Œå°±ä¼šè¿”å›falseï¼Œè€Œå¿½ç•¥äº†å­—å…¸ä¸­å­˜åœ¨çš„halloã€‚</strong></p>
<p>â€‹
ç„¶åï¼Œæˆ‘ä»¬å‘ç°ï¼Œå¦‚æœæƒ³è¦é‡‡ç”¨å…ˆå‰çš„æ–¹æ³•ï¼Œç”¨ä¸€ä¸ªvector(26)æ¥ç»Ÿè®¡å­—ç¬¦ä¸²å­—ç¬¦å‡ºç°çš„ä¸ªæ•°ï¼Œç„¶ååˆ©ç”¨ç›¸å·®1ä¸ªå­—ç¬¦æ¥è¿›è¡Œåˆ¤å®šä¹Ÿä¸å¯è¡Œï¼Œå½“å¦‚ä¸‹æƒ…å†µå‡ºç°æ—¶ï¼Œä¼šå‘ç”Ÿé”™è¯¯ï¼š</p>
<p>â€‹
<strong>ä¾‹å¦‚ï¼šå­—å…¸ä¸­å­˜åœ¨hello,æˆ‘ä»¬æŸ¥æ‰¾llohhï¼Œåœ¨vectorç»Ÿè®¡ä¸­ï¼Œä¸¤è€…ç¡®å®åªåœ¨hçš„ä¸ªæ•°ä¸Šæœ‰ä¸åŒï¼Œä½†æ˜¯é—®é¢˜æ˜¯ä¸¤ä¸ªå•è¯é¡ºåºå®Œå…¨ä¸ä¸€æ ·ï¼Œvectorç»Ÿè®¡ä¼šå°†å•è¯çš„é¡ºåºä¿¡æ¯ä¸¢å¤±ã€‚</strong></p>
<p><strong>æ•…è€Œï¼šè¿™é¢˜éœ€è¦ä¸€ä¸ªå…¨æ–°çš„æ¦‚å¿µå«åš å¹¿ä¹‰é‚»å±…ï¼š</strong></p>
<p><strong>æ€è·¯å¼•ç”¨</strong>ï¼šhttps://leetcode-cn.com/problems/US1pGT/solution/offerii064shen-qi-de-zi-dian-by-logilong-4hmn/</p>
<p><strong>å¹¿ä¹‰é‚»å±…ï¼š</strong>ä¹Ÿå°±æ˜¯ä¸€å­—åªå·®çš„å•è¯ï¼Œæ¯”å¦‚è¯´ã€*pple,
a*ple, ap*le, app*e, appl*ã€‘ï¼Œè¿™å‡ ä¸ªå•è¯äº’ä¸ºå¹¿ä¹‰é‚»å±…ã€‚</p>
<p>ç„¶åï¼Œæˆ‘ä»¬è¿™é“é¢˜å°±å¯ä»¥æŒ‰ç…§å¦‚ä¸‹çš„æ­¥éª¤è¿›è¡Œæ±‚è§£ï¼š</p>
<ul>
<li><p>åˆå§‹åŒ–å­—å…¸ï¼š ç”Ÿæˆå­—å…¸ä¸­æ‰€æœ‰å•è¯çš„å¹¿ä¹‰é‚»å±…ï¼Œä¾‹å¦‚ apple
å°±ç”Ÿæˆä¸Šè¿°äº”ä¸ªå¹¿ä¹‰é‚»å±…ã€‚å°†æ‰€æœ‰å­—å…¸è¯çš„å¹¿ä¹‰é‚»å±…éƒ½ä»¥
<code>&lt;å¹¿ä¹‰é‚»å±…ï¼Œä¸ªæ•°&gt;</code> ä¿å­˜åˆ°
<code>HashMap</code>ã€‚</p></li>
<li><p>æŸ¥æ‰¾ï¼šå½“æˆ‘ä»¬éœ€è¦åœ¨å­—å…¸ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰ä¸€ä¸ªå•è¯å’Œ word
åªæœ‰ä¸€å­—åªå·®ï¼Œé‚£ä¸å°±æ˜¯æŸ¥æ‰¾ç¬¬äºŒæ­¥ä¸­ HashMap ä¸­æ˜¯å¦å­˜åœ¨ word
çš„å¹¿ä¹‰é‚»å±…å—ï¼Ÿè¿™æ—¶å€™æˆ‘ä»¬å°±åªè¦ç”Ÿæˆ word æ‰€æœ‰çš„å¹¿ä¹‰é‚»å±…ï¼Œç„¶ååœ¨ HashMap
ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨å…¶ä¸­çš„ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚</p></li>
</ul>
<p><strong>å…³é”®ç–‘é—®</strong>ï¼šä¸ºä»€ä¹ˆéœ€è¦è®°å½•æ‰€æœ‰å­—å…¸è¯çš„å¹¿ä¹‰é‚»å±…æ•°é‡ï¼Ÿ</p>
<p>â€‹
<strong>è¿™æ˜¯ä¸ºäº†é˜²æ­¢å­—å…¸ä¸­å‡ºç°å’ŒæŸ¥æ‰¾è¯ä¸€æ‘¸ä¸€æ ·çš„è¯ï¼Œå¦‚æœå‡ºç°ä¸Šè¿°æƒ…å†µï¼Œåˆ™ä¼šæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å¹¿ä¹‰é‚»å±…ï¼Œä½†æ˜¯å…¶å®å¹¶ä¸æ˜¯é‚»å±…ï¼Œè€Œæ˜¯å®ƒè‡ªå·±ï¼</strong></p>
<p>æ‰€ä»¥ï¼Œåˆšæ‰çš„æŸ¥æ‰¾ä¸æ˜¯å¾ˆå®Œæ•´ï¼Œ<strong>å®Œæ•´æ­£ç¡®çš„æŸ¥æ‰¾åº”å½“å¦‚ä¸‹</strong>ï¼š</p>
<p>â€‹ ç”Ÿæˆå¾…æŸ¥æ‰¾è¯ word çš„æ‰€æœ‰å¹¿ä¹‰é‚»å±…ã€‚æ¯ä¸ªå¹¿ä¹‰é‚»å±…éƒ½åˆ° HashMap
ä¸­æŸ¥æ‰¾å‡ºç°çš„æ¬¡æ•°ï¼Œæ ¹æ®å‡ºç°æ¬¡æ•°åˆ†ä¸º3ç§æƒ…å†µã€‚</p>
<ul>
<li>å¹¿ä¹‰é‚»å±…æ•° &gt; 1
ï¼Œåˆ™è¯´æ˜å­—å…¸ä¸­è‚¯å®šå­˜åœ¨ä¸¤ä¸ªä¸åŒçš„å­—ç¬¦ï¼Œè¿™ä¸¤ä¸ªå­—ç¬¦äº’ä¸ºå¹¿ä¹‰é‚»å±…ï¼Œä¸”å’ŒæŸ¥æ‰¾å­—ç¬¦ä¹Ÿæ˜¯å¹¿ä¹‰é‚»å±…ï¼Œç”±äºå­—å…¸ä¸­çš„å•è¯æ˜¯ä¸é‡å¤çš„ï¼Œæ‰€ä»¥æ­¤æ—¶æ»¡è¶³æ¡ä»¶ã€‚</li>
<li>å¹¿ä¹‰é‚»å±…æ•° == 1 ,
è¯´æ˜å­—å…¸ä¸­å¯èƒ½å­˜åœ¨ä¸€ä¸ªå¹¿ä¹‰é‚»å±…ï¼Œä¹Ÿå¯èƒ½å­˜åœ¨æŸ¥æ‰¾å­—ç¬¦ä¸²æœ¬èº«ï¼Œå¦‚æœæ˜¯å¹¿ä¹‰é‚»å±…å°±æ»¡è¶³æ¡ä»¶ï¼Œå¦‚æœæ˜¯æŸ¥æ‰¾å­—ç¬¦ä¸²æœ¬èº«çš„è¯å°±ä¸ç¬¦åˆæ¡ä»¶ã€‚</li>
<li>å¹¿ä¹‰é‚»å±…æ•° == 0 ,
è¯´æ˜ä¸å­˜åœ¨å¹¿ä¹‰é‚»å±…ï¼Œåˆ™ç»§ç»­éå†ä¸‹ä¸€ä¸ªå¹¿ä¹‰é‚»å±…ã€‚</li>
</ul>
<h5 id="ä»£ç å¦‚ä¸‹"><strong>ä»£ç å¦‚ä¸‹</strong>ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MagicDictionary</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    unordered_map&lt;string,<span class="type">int</span>&gt; neighbors;</span><br><span class="line">    unordered_map&lt;string,<span class="type">int</span>&gt; dictionary;</span><br><span class="line">    <span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line">    <span class="built_in">MagicDictionary</span>() &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">generateNeighbors</span><span class="params">(string word)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;word.<span class="built_in">length</span>();i++)&#123;</span><br><span class="line">            string new_word = word;</span><br><span class="line">            new_word[i] = <span class="string">&#x27;*&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span>(neighbors.<span class="built_in">find</span>(new_word) == neighbors.<span class="built_in">end</span>()) neighbors[new_word] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> neighbors[new_word]++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">buildDict</span><span class="params">(vector&lt;string&gt; dictionary)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;dictionary.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="built_in">generateNeighbors</span>(dictionary[i]);</span><br><span class="line">            <span class="keyword">this</span>-&gt;dictionary[dictionary[i]] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">search</span><span class="params">(string searchWord)</span> </span>&#123;</span><br><span class="line">        <span class="type">bool</span> res = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;searchWord.<span class="built_in">length</span>();i++)&#123;</span><br><span class="line">            string new_word = searchWord;</span><br><span class="line">            new_word[i] = <span class="string">&#x27;*&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span>(neighbors.<span class="built_in">find</span>(new_word) == neighbors.<span class="built_in">end</span>())&#123;&#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(neighbors[new_word] == <span class="number">1</span>)&#123;</span><br><span class="line">                <span class="comment">//å¯èƒ½å­˜åœ¨å¹¿ä¹‰é‚»å±…ï¼Œéœ€è¦çœ‹searchWordåœ¨ä¸åœ¨dictionaryç§</span></span><br><span class="line">                <span class="keyword">if</span>(dictionary.<span class="built_in">find</span>(searchWord) == dictionary.<span class="built_in">end</span>())&#123;</span><br><span class="line">                    res = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(neighbors[new_word] &gt; <span class="number">1</span>)&#123;</span><br><span class="line">                res = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your MagicDictionary object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * MagicDictionary* obj = new MagicDictionary();</span></span><br><span class="line"><span class="comment"> * obj-&gt;buildDict(dictionary);</span></span><br><span class="line"><span class="comment"> * bool param_2 = obj-&gt;search(searchWord);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>å­—ç¬¦ä¸²ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>string</tag>
      </tags>
  </entry>
  <entry>
    <title>å­—ç¬¦ä¸²ç³»åˆ—â€”â€”å­—ç¬¦ä¸²å‹ç¼©é—®é¢˜</title>
    <url>/2022/02/04/91f6bb166e62/</url>
    <content><![CDATA[<h4 id="å­—ç¬¦ä¸²å‹ç¼©é—®é¢˜">å­—ç¬¦ä¸²å‹ç¼©é—®é¢˜ï¼š</h4>
<p>â€‹
å¦‚æœåœ¨å­—ç¬¦ä¸²ä¸­å‡ºç°äº†è¿ç»­é‡å¤å­ä¸²ï¼ˆé‡å¤æ¬¡æ•°&gt;=2ï¼‰ï¼Œç”¨â€œæ•°å­—+å·¦æ‹¬å·+å­ä¸²+å³æ‹¬å·â€æ–¹å¼è¿›è¡Œå‹ç¼©ï¼Œè¦æ±‚æ¯ä¸€æ¬¡å‹ç¼©éƒ½ä¼˜å…ˆå‹ç¼©å½“å‰ï¼ˆ
å­ä¸²é•¿åº¦ * é‡å¤æ¬¡æ•°
ï¼‰æœ€é•¿çš„å­ä¸²ï¼Œä¸”ä¼˜å…ˆ<strong>æŒ‰é‡å¤æ¬¡æ•°æœ€å¤§</strong>å‹ç¼©ï¼Œå¦‚æœ<strong>æœ€é•¿å­ä¸²é•¿åº¦ä¸€æ ·ï¼Œä¼˜å…ˆå‹ç¼©ä½ç½®åœ¨å‰çš„å­ä¸²</strong>ï¼Œå¦‚æœå‹ç¼©åçš„å­—ç¬¦ä¸²å¦‚æœè¿˜èƒ½å‹ç¼©ï¼Œåˆ™ç»§ç»­å‹ç¼©ï¼›</p>
<ul>
<li><p>è¾“å…¥è¦æ±‚ï¼šç¬¬ä¸€è¡Œä¸ºå­—ç¬¦ä¸²sï¼ŒåªåŒ…å«å¤§å°å†™å­—ç¬¦ï¼Œ1&lt;s.length&lt;3000</p></li>
<li><p>è¾“å‡ºè¦æ±‚ï¼šè¾“å‡ºå‹ç¼©åçš„å­—ç¬¦ä¸²</p></li>
<li><p>æ—¶é—´é™åˆ¶ï¼šC/C++
1000msï¼Œç»“åˆè¾“å…¥é•¿åº¦ï¼Œå³è¦æ±‚ç®—æ³•å¤æ‚åº¦åœ¨O(n^2)</p></li>
<li><p>æ ·ä¾‹1</p>
<ul>
<li>``` input: aaBcaBcaBcc output: a3(aBc)c <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- æ ·ä¾‹2ï¼š</span><br><span class="line"></span><br><span class="line">  - ```</span><br><span class="line">    input:  aaaaaa</span><br><span class="line">    output: 6(a)</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li><p>æ ·ä¾‹3ï¼š</p>
<ul>
<li><pre><code>  input:  aAABBccAABBcc
  output: a2(2(A)2(B)2(c))</code></pre></li>
</ul></li>
</ul>
<h5 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯ï¼š</h5>
<p>â€‹</p>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>å­—ç¬¦ä¸²ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>string</tag>
      </tags>
  </entry>
  <entry>
    <title>å®¹å™¨è®¾è®¡â€”â€”æ’å…¥ã€åˆ é™¤å’Œéšæœºè®¿é—®éƒ½æ˜¯ O(1) çš„å®¹å™¨è®¾è®¡</title>
    <url>/2022/02/05/233281550871/</url>
    <content><![CDATA[<h3 id="å‰‘æŒ‡-offer-ii-030.-æ’å…¥åˆ é™¤å’Œéšæœºè®¿é—®éƒ½æ˜¯-o1-çš„å®¹å™¨"><a
href="https://leetcode-cn.com/problems/FortPu/">å‰‘æŒ‡ Offer II 030.
æ’å…¥ã€åˆ é™¤å’Œéšæœºè®¿é—®éƒ½æ˜¯ O(1) çš„å®¹å™¨</a></h3>
<h5 id="é¢˜ç›®ç®€è¦æè¿°"><strong>é¢˜ç›®ç®€è¦æè¿°</strong>ï¼š</h5>
<p>è®¾è®¡ä¸€ä¸ªæ”¯æŒåœ¨å¹³å‡ æ—¶é—´å¤æ‚åº¦ O(1) ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œçš„æ•°æ®ç»“æ„ï¼š</p>
<pre><code>insert(val)ï¼šå½“å…ƒç´  val ä¸å­˜åœ¨æ—¶è¿”å› true ï¼Œå¹¶å‘é›†åˆä¸­æ’å…¥è¯¥é¡¹ï¼Œå¦åˆ™è¿”å› false ã€‚
remove(val)ï¼šå½“å…ƒç´  val å­˜åœ¨æ—¶è¿”å› true ï¼Œå¹¶ä»é›†åˆä¸­ç§»é™¤è¯¥é¡¹ï¼Œå¦åˆ™è¿”å› false ã€‚
getRandomï¼šéšæœºè¿”å›ç°æœ‰é›†åˆä¸­çš„ä¸€é¡¹ã€‚æ¯ä¸ªå…ƒç´ åº”è¯¥æœ‰ ç›¸åŒçš„æ¦‚ç‡ è¢«è¿”å›ã€‚</code></pre>
<p><strong>ç±»æ¨¡ç‰ˆ</strong>ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RandomizedSet</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line">    <span class="built_in">RandomizedSet</span>() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/** Inserts a value to the set. Returns true if the set did not already contain the specified element. */</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/** Removes a value from the set. Returns true if the set contained the specified element. */</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">remove</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/** Get a random element from the set. */</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getRandom</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>â€‹
é¦–å…ˆï¼Œé¢˜ç›®è¦æ±‚æ’å…¥å’Œåˆ é™¤éƒ½éœ€è¦æ˜¯O(1)çš„æ—¶é—´å¤æ‚åº¦ï¼Œåœ¨æˆ‘ä»¬ç†ŸçŸ¥çš„æ•°æ®ç»“æ„ä¸­ï¼Œ<strong>åªæœ‰Hashè¡¨èƒ½è¾¾åˆ°è¿™ä¸ªæ•ˆæœ</strong>ã€‚ä½†æ˜¯ï¼ŒHashè¡¨æ˜¾ç„¶ä¸èƒ½æ»¡è¶³éšæœºå–getRandomè¿™ä¸€æ“ä½œï¼Œéšæœºå–çš„æ“ä½œï¼Œ<strong>åº•å±‚åº”å½“æ˜¯æ•°ç»„ï¼Œè€Œä¸”æœ€å¥½æ˜¯ç´§å‡‘çš„è¿ç»­å­˜æ”¾å†…å®¹çš„æ•°ç»„</strong>ï¼Œè¿™æ ·æ‰æ–¹ä¾¿è¿›è¡Œéšæœºå–çš„è¡Œä¸ºï¼Œå¹¶ä¸”æ¦‚ç‡ä¸€è‡´ã€‚</p>
<p>â€‹
ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬åº”å½“è®¾è®¡è¿™æ ·ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œåˆ©ç”¨æ•°ç»„ä¿å­˜å…ƒç´ ï¼Œç„¶ååˆ©ç”¨å“ˆå¸Œè¡¨ä¿å­˜å…ƒç´ å€¼ï¼ˆkeyï¼‰å’Œ
è¯¥å€¼åœ¨æ•°ç»„ä¸­å­˜æ”¾çš„indexï¼ˆvalueï¼‰ï¼Œè¿™æ ·å­å°±èƒ½å®ç°ä¸Šè¿°çš„è¦æ±‚äº†ã€‚</p>
<p>â€‹
åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„çš„ä¸€ä¸ªç»†èŠ‚å°±æ˜¯ï¼Œ<strong>å½“æˆ‘ä»¬åˆ é™¤å…ƒç´ æ—¶ï¼Œä¸èƒ½ç›´æ¥å°†è¯¥å…ƒç´ åœ¨å®ƒçš„ä½ç½®ä¸Šåˆ é™¤</strong>ï¼Œå¦‚æœè¿™æ ·çš„è¯ï¼Œå°±ä¼šå¯¼è‡´æ•°ç»„å­˜å‚¨å…ƒç´ çš„idxä¸è¿ç»­ï¼Œä»è€Œåç»­éšæœºå–å…ƒç´ çš„æ—¶å€™ï¼Œå„ä¸ªå…ƒç´ çš„æ¦‚ç‡ä¸å†ç›¸ç­‰ã€‚æˆ‘ä»¬åº”è¯¥ç”¨æ•°ç»„æœ€åçš„é‚£ä¸ªå…ƒç´ å°†æˆ‘ä»¬è¦åˆ çš„å…ƒç´ è¿›è¡Œæ›¿æ¢ï¼Œç„¶åæŠŠæ•°ç»„æœ€åçš„é‚£ä¸ªå…ƒç´ åˆ é™¤ï¼Œæœ€åæ›´æ–°å“ˆå¸Œè¡¨ä¸­çš„idxå³å¯ã€‚</p>
<h5 id="ä»£ç å¦‚ä¸‹">ä»£ç å¦‚ä¸‹ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RandomizedSet</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    unordered_map&lt;<span class="type">int</span>,<span class="type">int</span>&gt; m;</span><br><span class="line">  	vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line">    <span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line">    <span class="built_in">RandomizedSet</span>() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Inserts a value to the set. Returns true if the set did not already contain the specified element. */</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">insert</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(m.<span class="built_in">find</span>(val) != m.<span class="built_in">end</span>()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        m[val] = v.<span class="built_in">size</span>();</span><br><span class="line">        v.<span class="built_in">push_back</span>(val);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Removes a value from the set. Returns true if the set contained the specified element. */</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">remove</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(m.<span class="built_in">find</span>(val) == m.<span class="built_in">end</span>()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">int</span> idx = m[val];</span><br><span class="line">        <span class="type">int</span> max_idx = m.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">        m[v[max_idx]] = idx;</span><br><span class="line">        m.<span class="built_in">erase</span>(val);</span><br><span class="line">        v[idx] = v[max_idx];</span><br><span class="line">        v.<span class="built_in">pop_back</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Get a random element from the set. */</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getRandom</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> idx = <span class="built_in">rand</span>() % m.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">return</span> v[idx];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>â€‹</p>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>å®¹å™¨è®¾è®¡ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>container</tag>
      </tags>
  </entry>
  <entry>
    <title>å¥‡å¦™åº”ç”¨â€”â€”æ—¥ç¨‹è¡¨ç±»çš„è®¾è®¡ä¼˜åŒ–æ€æƒ³</title>
    <url>/2022/02/08/e026aa44c5a7/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-058.-æ—¥ç¨‹è¡¨"><a
href="https://leetcode-cn.com/problems/fi9suh/">å‰‘æŒ‡ Offer II 058.
æ—¥ç¨‹è¡¨</a></h4>
<h5 id="é¢˜ç›®æè¿°"><strong>é¢˜ç›®æè¿°</strong>ï¼š</h5>
<p>â€‹ è¯·å®ç°ä¸€ä¸ª MyCalendar
ç±»æ¥å­˜æ”¾ä½ çš„æ—¥ç¨‹å®‰æ’ã€‚å¦‚æœè¦æ·»åŠ çš„æ—¶é—´å†…æ²¡æœ‰å…¶ä»–å®‰æ’ï¼Œåˆ™å¯ä»¥å­˜å‚¨è¿™ä¸ªæ–°çš„æ—¥ç¨‹å®‰æ’ã€‚</p>
<p>â€‹ MyCalendar æœ‰ä¸€ä¸ª book(int start, int end)æ–¹æ³•ã€‚å®ƒæ„å‘³ç€åœ¨ start åˆ°
end æ—¶é—´å†…å¢åŠ ä¸€ä¸ªæ—¥ç¨‹å®‰æ’ï¼Œæ³¨æ„ï¼Œè¿™é‡Œçš„æ—¶é—´æ˜¯åŠå¼€åŒºé—´ï¼Œå³ [start, end),
å®æ•° x çš„èŒƒå›´ä¸ºï¼Œ start &lt;= x &lt; endã€‚</p>
<p>â€‹
å½“ä¸¤ä¸ªæ—¥ç¨‹å®‰æ’æœ‰ä¸€äº›æ—¶é—´ä¸Šçš„äº¤å‰æ—¶ï¼ˆä¾‹å¦‚ä¸¤ä¸ªæ—¥ç¨‹å®‰æ’éƒ½åœ¨åŒä¸€æ—¶é—´å†…ï¼‰ï¼Œå°±ä¼šäº§ç”Ÿé‡å¤é¢„è®¢ã€‚</p>
<p>â€‹ æ¯æ¬¡è°ƒç”¨
MyCalendar.bookæ–¹æ³•æ—¶ï¼Œå¦‚æœå¯ä»¥å°†æ—¥ç¨‹å®‰æ’æˆåŠŸæ·»åŠ åˆ°æ—¥å†ä¸­è€Œä¸ä¼šå¯¼è‡´é‡å¤é¢„è®¢ï¼Œè¿”å›
trueã€‚å¦åˆ™ï¼Œè¿”å› false å¹¶ä¸”ä¸è¦å°†è¯¥æ—¥ç¨‹å®‰æ’æ·»åŠ åˆ°æ—¥å†ä¸­ã€‚</p>
<p>â€‹ è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è°ƒç”¨ MyCalendar ç±»: MyCalendar cal = new MyCalendar();
MyCalendar.book(start, end)</p>
<p>æç¤ºï¼š</p>
<pre><code>æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè°ƒç”¨ MyCalendar.book å‡½æ•°æœ€å¤šä¸è¶…è¿‡ 1000æ¬¡ã€‚
0 &lt;= start &lt; end &lt;= 109</code></pre>
<h5 id="æˆ‘çš„è§£é¢˜æ€è·¯"><strong>æˆ‘çš„è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<pre><code>ä¸€å¼€å§‹çœ‹åˆ°æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè°ƒç”¨.bookå‡½æ•°ä¸è¶…è¿‡1000æ¬¡ï¼Œæˆ‘å°±ä½¿ç”¨äº†è¾ƒä¸ºæš´åŠ›çš„ç®—æ³•ï¼Œä½¿ç”¨æˆå‘˜å˜é‡è®°å½•å…ˆå‰æ‰€æœ‰çš„æ—¥ç¨‹ï¼Œç„¶åæ–°æ¥ä¸€ä¸ªæ—¥ç¨‹ä»¥åï¼Œå»åˆ¤æ–­å’Œå…ˆå‰çš„æœ‰æ²¡æœ‰åŒºé—´é‡å¤ï¼Œä»£ç å¦‚ä¸‹ï¼š</code></pre>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyCalendar</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; calendar;</span><br><span class="line">    <span class="built_in">MyCalendar</span>() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">checkIsCollision</span><span class="params">(<span class="type">int</span> start,<span class="type">int</span> end)</span></span>&#123;</span><br><span class="line">        <span class="type">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i =<span class="number">0</span>;i&lt;calendar.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="type">int</span> tmp_start = calendar[i][<span class="number">0</span>];</span><br><span class="line">            <span class="type">int</span> tmp_end = calendar[i][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(!(start &gt;= tmp_end || end &lt;= tmp_start))&#123;</span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">book</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> end)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!<span class="built_in">checkIsCollision</span>(start,end))&#123;</span><br><span class="line">            calendar.<span class="built_in">push_back</span>(&#123;start,end&#125;);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your MyCalendar object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * MyCalendar* obj = new MyCalendar();</span></span><br><span class="line"><span class="comment"> * bool param_1 = obj-&gt;book(start,end);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<h5 id="ä¼˜åŒ–æ€è·¯"><strong>ä¼˜åŒ–æ€è·¯</strong>ï¼š</h5>
<pre><code>æŒ‰ç…§ä¸Šè¿°æ–¹æ³•åšçš„è¯ï¼Œå…¶å®æ˜¯æ¯”è¾ƒæµªè´¹æ—¶é—´çš„ï¼Œå› ä¸ºæ¯æ–°æ¥ä¸€ä¸ªæ—¥ç¨‹ï¼Œæˆ‘ä»¬å°±éœ€è¦å»å’Œå…ˆå‰æ‰€æœ‰çš„æ—¥ç¨‹æ¯”è¾ƒï¼Œä»ç†è®ºä¸Šæ¥è¯´ï¼Œå¤§éƒ¨åˆ†çš„æ¯”è¾ƒéƒ½æ˜¯æ— æ•ˆæ¯”è¾ƒï¼Œæˆ‘ä»¬å…¶å®åªéœ€è¦å’Œæœ€è¿‘çš„ä¸¤ä¸ªåŒºé—´è¿›è¡Œæ¯”è¾ƒå°±å¯ä»¥äº†ï¼Œå› ä¸ºå·²çŸ¥å…ˆå‰çš„æ—¥ç¨‹éƒ½æ˜¯ä¸é‡å çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¯æ¬¡åªéœ€è¦æŸ¥è¯¢æœ€è¿‘çš„æ—¶é—´æ®µçš„å‰åï¼Œçœ‹çœ‹èµ·æ­¢æ—¶é—´æœ‰æ— å†²çªå³å¯ã€‚</code></pre>
<p>â€‹
æ­¤æ—¶ï¼Œæˆ‘ä»¬ä¼šæƒ³ï¼Œé‚£æˆ‘ä»¬ä¸æ˜¯éœ€è¦ç»´æŠ¤æ—¥ç¨‹vectorï¼Œè®©å®ƒå˜å¾—æœ‰åºå°±å¯ä»¥äº†ã€‚æ€è·¯æ²¡é”™ï¼ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä¸ç”¨vectoräº†ï¼Œç›´æ¥ä½¿ç”¨mapã€‚mapæ˜¯æœ‰åºçš„key-valueé”®å€¼å¯¹ï¼Œåº•å±‚ä½¿ç”¨çº¢é»‘æ ‘å»ºç«‹ï¼Œæ›´åŠ æ–¹ä¾¿è€Œä¸”é«˜æ•ˆã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyCalendar</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    map&lt;<span class="type">int</span>,<span class="type">int</span>&gt; calendar;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MyCalendar</span>() &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">book</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> end)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> iter = calendar.<span class="built_in">lower_bound</span>(start);</span><br><span class="line">        <span class="comment">//ç¬¬ä¸€ä¸ªå¤§äºç­‰äºæ’å…¥å…ƒç´ çš„æ—¶é—´æ®µã€‚è¿™ä¸ªæ—¶é—´æ®µçš„èµ·å§‹æ—¶é—´ä¸èƒ½å°äºæ’å…¥æ—¶é—´çš„ç»ˆæ­¢æ—¶é—´</span></span><br><span class="line">        <span class="keyword">if</span>(iter != calendar.<span class="built_in">end</span>() &amp;&amp; iter-&gt;first &lt; end)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">//è¿­ä»£å™¨å¾€å‰èµ°ä¸€æ­¥å°±æ˜¯å°äºç­‰äºå½“å‰æ—¶é—´æ®µçš„æœ€å¤§æ—¶é—´æ®µã€‚è¿™ä¸ªæ—¶é—´æ®µçš„ç»ˆæ­¢æ—¶é—´ä¸èƒ½å¤§äºæ’å…¥çš„èµ·å§‹æ—¶é—´</span></span><br><span class="line">        <span class="keyword">if</span>(iter != calendar.<span class="built_in">begin</span>() &amp;&amp; (--iter)-&gt;second &gt; start)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        calendar[start] = end;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å‚è€ƒï¼šhttps://leetcode-cn.com/problems/fi9suh/solution/c-hong-hei-shu-map058-ri-cheng-biao-by-d-f7q9/</p>
<p>é™„å½•ï¼š</p>
<ul>
<li>mapä¸­çš„lower_boundå’Œupper_boundå‡½æ•°ï¼š
<ul>
<li>map::lower_bound(key): è¿”å›mapä¸­ç¬¬ä¸€ä¸ªå¤§äºæˆ–ç­‰äºkeyçš„è¿­ä»£å™¨æŒ‡é’ˆ</li>
<li>map::upper_bound(key): è¿”å›mapä¸­ç¬¬ä¸€ä¸ªå¤§äºkeyçš„è¿­ä»£å™¨æŒ‡é’ˆ</li>
</ul></li>
</ul>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>å®¹å™¨è®¾è®¡ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>red black tree</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ¨æ€è§„åˆ’â€”â€”æ’åˆ—çš„æ•°ç›®</title>
    <url>/2022/02/21/9ee9d017b9d4/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-104.-æ’åˆ—çš„æ•°ç›®"><a
href="https://leetcode-cn.com/problems/D0F0SV/">å‰‘æŒ‡ Offer II 104.
æ’åˆ—çš„æ•°ç›®</a></h4>
<p>â€‹ ç»™å®šä¸€ä¸ªç”± ä¸åŒ æ­£æ•´æ•°ç»„æˆçš„æ•°ç»„ nums ï¼Œå’Œä¸€ä¸ªç›®æ ‡æ•´æ•° target ã€‚è¯·ä»
nums ä¸­æ‰¾å‡ºå¹¶è¿”å›æ€»å’Œä¸º target
çš„å…ƒç´ ç»„åˆçš„ä¸ªæ•°ã€‚æ•°ç»„ä¸­çš„æ•°å­—å¯ä»¥åœ¨ä¸€æ¬¡æ’åˆ—ä¸­å‡ºç°ä»»æ„æ¬¡ï¼Œä½†æ˜¯é¡ºåºä¸åŒçš„åºåˆ—è¢«è§†ä½œä¸åŒçš„ç»„åˆã€‚</p>
<p>â€‹ é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆç¬¦åˆ 32 ä½æ•´æ•°èŒƒå›´ã€‚</p>
<ul>
<li>ç¤ºä¾‹ 1ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [1,2,3], target = 4</span><br><span class="line">è¾“å‡ºï¼š7</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">æ‰€æœ‰å¯èƒ½çš„ç»„åˆä¸ºï¼š</span><br><span class="line">(1, 1, 1, 1)</span><br><span class="line">(1, 1, 2)</span><br><span class="line">(1, 2, 1)</span><br><span class="line">(1, 3)</span><br><span class="line">(2, 1, 1)</span><br><span class="line">(2, 2)</span><br><span class="line">(3, 1)</span><br><span class="line">è¯·æ³¨æ„ï¼Œé¡ºåºä¸åŒçš„åºåˆ—è¢«è§†ä½œä¸åŒçš„ç»„åˆã€‚</span><br></pre></td></tr></table></figure>
<p>æç¤ºï¼š</p>
<pre><code>1 &lt;= nums.length &lt;= 200
1 &lt;= nums[i] &lt;= 1000
nums ä¸­çš„æ‰€æœ‰å…ƒç´  äº’ä¸ç›¸åŒ
1 &lt;= target &lt;= 1000</code></pre>
<h5 id="è§£é¢˜æ€è·¯"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>å‚è€ƒå®˜æ–¹è§£ç­”ï¼š
https://leetcode-cn.com/problems/D0F0SV/solution/pai-lie-de-shu-mu-by-leetcode-solution-og7w/</p>
<p>â€‹
è¯¥é¢˜ç›®ä¸­ï¼Œæ¯”è¾ƒæ£˜æ‰‹çš„é—®é¢˜ï¼Œæ˜¯æˆ‘ä»¬éœ€è¦è®¡ç®—æ’åˆ—æ•°ç›®ï¼Œä¸€å¼€å§‹çœ‹åˆ°é¢˜ç›®ï¼Œè¿˜æ˜¯æƒ³ç€èƒŒåŒ…é—®é¢˜çš„è§£æ³•ï¼Œè¢«èƒŒåŒ…é—®é¢˜å±€é™æ­»äº†æ€è·¯ï¼Œæ€»æƒ³ç€å…ˆè®¡ç®—ç»„åˆæ•°ç›®ï¼Œå†è®¡ç®—æ’åˆ—æ•°ç›®ï¼Œä½†åæ¥å‘ç°å¹¶ä¸æ˜¯å¾ˆåˆç†ï¼Œå¦‚æœéœ€è¦è¿™æ ·å­çš„è¯ï¼Œæˆ‘ä¸ä»…éœ€è¦è®°å½•ç»„åˆçš„æ•°ç›®ï¼Œæˆ‘è¿˜è¦è®¡ç®—æ¯ä¸€ç»„ç»„åˆæ˜¯ä»€ä¹ˆï¼Œä»¥ä¾¿åç»­æ ¹æ®å…¶å†…å®¹è®¡ç®—æ’åˆ—æ•°ç›®ã€‚</p>
<p>â€‹
å…¶å®ï¼Œè·³å‡ºæ•´ä¸€ä¸ªèƒŒåŒ…é—®é¢˜çš„æ€è·¯ï¼Œæˆ‘ä»¬é‡‡ç”¨åŠ¨æ€è§„åˆ’çš„æ€æƒ³å»æ€è€ƒï¼šå‡è®¾æˆ‘ä»¬å®šä¹‰<code>res[i][j]</code>ä¸ºå‰<code>i</code>ä¸ªå…ƒç´ ï¼Œè¾¾åˆ°<code>target=j</code>æ‰€æœ‰çš„æ’åˆ—æ•°ç›®ï¼Œç„¶åå»æ€è€ƒè½¬ç§»æ–¹ç¨‹ï¼Œå¥½åƒæ²¡æ³•åšï¼Œå› ä¸ºå…¶å¹¶ä¸èƒ½è€ƒè™‘æ’åˆ—ï¼Œè€Œæ˜¯è€ƒè™‘çš„ç»„åˆæ•°ç›®ã€‚æ•…è€Œæ­£ç¡®çš„æ€è·¯åº”å½“å¦‚ä¸‹ï¼š</p>
<h5 id="å®šä¹‰"><strong>å®šä¹‰</strong>ï¼š</h5>
<pre><code>`res[target]`ä¸ºè¾¾åˆ°ç›®æ ‡æ•´æ•°targetï¼Œå¯ä»¥å‡ºç°çš„æ’åˆ—ä¸ªæ•°</code></pre>
<h5 id="åˆå§‹åŒ–"><strong>åˆå§‹åŒ–</strong>ï¼š</h5>
<pre><code>`res[0] = 1`ï¼Œå› ä¸ºï¼Œè¦æƒ³è¾¾åˆ°ç›®æ ‡æ•´æ•°0ï¼Œåªæœ‰ä¸€ç§æ’åˆ—æ–¹å¼ï¼Œå°±æ˜¯ä»€ä¹ˆéƒ½ä¸é€‰ã€‚æ¯•ç«Ÿæ¯ä¸€ä¸ªå…ƒç´ éƒ½å¤§äº0.</code></pre>
<h5 id="çŠ¶æ€è½¬ç§»åˆ†æ"><strong>çŠ¶æ€è½¬ç§»åˆ†æ</strong>ï¼š</h5>
<pre><code>çŠ¶æ€è½¬ç§»è¾ƒä¸ºéº»çƒ¦ï¼Œå¯¹äº`res[i]`è€Œè¨€ï¼Œå¦‚ä½•é€šè¿‡å­é—®é¢˜çš„è§£æ¥è¿›è¡Œè®¡ç®—ç›®æ ‡ä¸º`i`æ—¶å€™çš„æ’åˆ—æ•°å‘¢ï¼Ÿ</code></pre>
<p>â€‹
å¯¹äºä¸€ä¸ªæ’åˆ—è€Œè¨€ï¼Œè‚¯å®šå­˜åœ¨æœ€åä¸€ä¸ªæ•°ï¼Œæˆ‘ä»¬å‡å®šæœ€åè¿™ä¸ªæ•°ä¸º<code>num</code>,è¿™ä¸ªæ•°è‚¯å®šæ˜¯<code>nums</code>ä¸­çš„ä¸€ä¸ªã€‚é‚£ä¹ˆè¿™ä¸ªæ’åˆ—å‰é¢çš„è¿™äº›æ•°ï¼Œå®ƒä»¬çš„å’Œå°±æ˜¯<code>i - num</code>ï¼Œä¹Ÿå°±æ˜¯è¯´<code>res[i-num]</code>æ‰€è®°å½•çš„æ’åˆ—æ•°é‡ï¼Œå…¶ä¸­çš„æ¯ä¸ªæ’åˆ—ï¼ŒåŠ ä¸Šæœ€åé‚£ä¸ªæ•°numï¼Œä¼šå½¢æˆä¸€ä¸ªæ–°çš„æ’åˆ—ï¼Œè¿™ä¸ªæ’åˆ—å°±æ˜¯æ»¡è¶³<code>target = i</code>ä¸­çš„ä¸€ä¸ªæ’åˆ—ï¼Œæ‰€ä»¥<code>res[i] = res[i-num]</code>ï¼Œè¿™å¯¹å—ï¼Ÿè¿™ä¸å®Œå…¨å¯¹ï¼æˆ‘ä»¬çš„<code>res[i]</code>çš„æ¥æºå¯ä¸ä»…ä»…ä¸€ä¸ªnumï¼Œä¹‹å‰è¯´äº†æˆ‘ä»¬å‡å®šæœ€åè¿™ä¸ªæ•°ä¸º<code>num</code>ï¼Œå…¶å®æœ€åè¿™ä¸ªæ•°å¯ä»¥æ˜¯<code>nums</code>ä¸­çš„ä»»æ„ä¸€ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¦éå†<code>nums</code>ä¸­çš„æ‰€æœ‰æ•°ï¼Œçœ‹æŸä¸€ä¸ªæ•°èƒ½ä¸èƒ½ä½œä¸ºæœ€åä¸€ä¸ªæ•°ï¼ˆåªè¦num
&lt;=
iå³å¯ï¼‰ï¼Œå¦‚æœèƒ½ï¼Œé‚£ä¹ˆ<code>res[i] += res[i-num]</code>ã€‚æœ€ç»ˆï¼Œ<code>res[i]</code>åº”è¯¥æ˜¯ä¸€ç³»åˆ—çš„æ•°å€¼åŠ å’Œå¾—åˆ°çš„ç»“æœã€‚</p>
<h5 id="çŠ¶æ€è½¬ç§»æ–¹ç¨‹"><strong>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</strong>ï¼š</h5>
<p>â€‹
<code>res[i] = sum&#123; res[i-num] for each num in nums &#125; ( num &lt;= i)</code></p>
<h5 id="è§£é¢˜ä»£ç "><strong>è§£é¢˜ä»£ç </strong>ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">combinationSum4</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">res</span><span class="params">(target+<span class="number">1</span>)</span></span>;</span><br><span class="line">        res[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=target;i++)&#123;</span><br><span class="line">            <span class="type">unsigned</span> <span class="type">int</span> tmp = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;nums.<span class="built_in">size</span>();j++)&#123;</span><br><span class="line">                <span class="type">int</span> num = nums[j];</span><br><span class="line">                <span class="keyword">if</span>(num &lt;= i)&#123;</span><br><span class="line">                    tmp += res[i-num];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            res[i] = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res[target];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="è¿›é˜¶é—®é¢˜"><strong>è¿›é˜¶é—®é¢˜ï¼š</strong></h5>
<pre><code>å¦‚æœç»™å®šçš„æ•°ç»„ä¸­å«æœ‰è´Ÿæ•°ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿé—®é¢˜ä¼šäº§ç”Ÿä½•ç§å˜åŒ–ï¼Ÿå¦‚æœå…è®¸è´Ÿæ•°å‡ºç°ï¼Œéœ€è¦å‘é¢˜ç›®ä¸­æ·»åŠ å“ªäº›é™åˆ¶æ¡ä»¶ï¼Ÿ</code></pre>
<h5 id="è§£ç­”"><strong>è§£ç­”</strong>ï¼š</h5>
<pre><code>å¦‚æœç»™å®šçš„æ•°ç»„ä¸­å«æœ‰è´Ÿæ•°ï¼Œåˆ™ä¼šå¯¼è‡´å‡ºç°æ— é™é•¿åº¦çš„æ’åˆ—ã€‚</code></pre>
<p>â€‹ ä¾‹å¦‚ï¼Œå‡è®¾æ•°ç»„ nums ä¸­å«æœ‰æ­£æ•´æ•° a å’Œè´Ÿæ•´æ•° âˆ’bï¼ˆå…¶ä¸­
a&gt;0,b&gt;0,âˆ’b&lt;0ï¼‰ï¼Œåˆ™æœ‰ aÃ—b+(âˆ’b)Ã—a=0ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªå…ƒç´ ä¹‹å’Œç­‰äº
target çš„æ’åˆ—ï¼Œåœ¨è¯¥æ’åˆ—çš„åé¢æ·»åŠ  b ä¸ª a å’Œ a ä¸ª âˆ’b
ä¹‹åï¼Œå¾—åˆ°çš„æ–°æ’åˆ—çš„å…ƒç´ ä¹‹å’Œä»ç„¶ç­‰äº
targetï¼Œè€Œä¸”è¿˜å¯ä»¥åœ¨æ–°æ’åˆ—çš„åé¢ç»§ç»­ b ä¸ª a å’Œ a ä¸ª
âˆ’bã€‚å› æ­¤åªè¦å­˜åœ¨å…ƒç´ ä¹‹å’Œç­‰äº target
çš„æ’åˆ—ï¼Œå°±èƒ½æ„é€ å‡ºæ— é™é•¿åº¦çš„æ’åˆ—ã€‚</p>
<p>â€‹
å¦‚æœå…è®¸è´Ÿæ•°å‡ºç°ï¼Œåˆ™å¿…é¡»é™åˆ¶æ’åˆ—çš„æœ€å¤§é•¿åº¦ï¼Œé¿å…å‡ºç°æ— é™é•¿åº¦çš„æ’åˆ—ï¼Œæ‰èƒ½è®¡ç®—æ’åˆ—æ•°</p>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>åŠ¨æ€è§„åˆ’ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>dynamic programming</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ¨æ€è§„åˆ’â€”â€”æˆ¿å±‹å·ç›—é—®é¢˜</title>
    <url>/2022/02/17/d13b71a5983a/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-089.-æˆ¿å±‹å·ç›—"><a
href="https://leetcode-cn.com/problems/Gu0c2T/">å‰‘æŒ‡ Offer II 089.
æˆ¿å±‹å·ç›—</a></h4>
<p>â€‹
ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ã€‚æ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ï¼Œå½±å“å°å·å·çªƒçš„å”¯ä¸€åˆ¶çº¦å› ç´ å°±æ˜¯ç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œå¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦ã€‚</p>
<p>â€‹ ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ nums ï¼Œè¯·è®¡ç®—
ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ ï¼Œä¸€å¤œä¹‹å†…èƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚</p>
<p>ç¤ºä¾‹ 1ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [1,2,3,1]</span><br><span class="line">è¾“å‡ºï¼š4</span><br><span class="line">è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 1) ï¼Œç„¶åå·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 3)ã€‚</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>â€‹
ä»çº¯è§£é¢˜çš„è§’åº¦è€Œè¨€ï¼Œæœ¬é¢˜æ˜¯å¯ä»¥é‡‡ç”¨DFSè¿›è¡Œçš„ï¼Œä½†æ˜¯ä½¿ç”¨DFSä¼šè¶…æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ—¶é—´å¤æ‚åº¦æ›´ä¸ºç®€å•çš„ç®—æ³•ã€‚åŠ¨æ€è§„åˆ’å°±èµ·åˆ°äº†æ¯”è¾ƒå¤§çš„ä½œç”¨ï¼š</p>
<h5 id="å®šä¹‰">å®šä¹‰ï¼š</h5>
<p>â€‹ è®¾åŠ¨æ€è§„åˆ’åˆ—è¡¨ dp ï¼Œdp[i] ä»£è¡¨å‰ i
ä¸ªæˆ¿å­åœ¨æ»¡è¶³æ¡ä»¶ä¸‹çš„èƒ½å·ç›—åˆ°çš„æœ€é«˜é‡‘é¢ã€‚</p>
<h5 id="çŠ¶æ€è½¬ç§»æ–¹ç¨‹">çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</h5>
<p><span class="math display">\[
dp[n+1]=max(dp[n],dp[nâˆ’1]+num)
\]</span> â€‹ å…¶ä¸­ï¼Œ<span class="math inline">\(dp[n]\)</span>
æ¥æºäºï¼šæˆ‘ä»¬ä¸æŠ¢ç¬¬n+1ä¸ªæˆ¿å­ã€‚</p>
<p>â€‹ å…¶ä¸­ï¼Œ<span class="math inline">\(dp[nâˆ’1]+num[n+1]\)</span>
æ¥æºäºï¼šæˆ‘ä»¬æŠ¢å½“å‰çš„æˆ¿å­ï¼Œè¿™æ ·çš„è¯ç¬¬nä¸ªæˆ¿å­å°±ä¸èƒ½å†æŠ¢äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦åŠ ä¸Šå‰n-1ä¸ªæˆ¿å­èƒ½æŠ¢åˆ°çš„æœ€å¤§é‡‘é¢å³å¯ã€‚</p>
<h5 id="è§£é¢˜ä»£ç "><strong>è§£é¢˜ä»£ç </strong>ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">rob</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">maxNum</span><span class="params">(nums.size()+<span class="number">1</span>)</span></span>;</span><br><span class="line">        maxNum[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        maxNum[<span class="number">1</span>] = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=nums.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            maxNum[i] = <span class="built_in">max</span>(maxNum[i<span class="number">-1</span>],maxNum[i<span class="number">-2</span>] + nums[i<span class="number">-1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxNum[nums.<span class="built_in">size</span>()];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="å‰‘æŒ‡-offer-ii-090.-ç¯å½¢æˆ¿å±‹å·ç›—"><a
href="https://leetcode-cn.com/problems/PzWKhm/">å‰‘æŒ‡ Offer II 090.
ç¯å½¢æˆ¿å±‹å·ç›—</a></h4>
<p>ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒä¸€ä¸ªç¯å½¢è¡—é“ä¸Šæ²¿è¡—çš„æˆ¿å±‹ï¼Œæ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ã€‚è¿™ä¸ªåœ°æ–¹æ‰€æœ‰çš„æˆ¿å±‹éƒ½
å›´æˆä¸€åœˆ
ï¼Œè¿™æ„å‘³ç€ç¬¬ä¸€ä¸ªæˆ¿å±‹å’Œæœ€åä¸€ä¸ªæˆ¿å±‹æ˜¯ç´§æŒ¨ç€çš„ã€‚åŒæ—¶ï¼Œç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œå¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦
ã€‚</p>
<p>ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ nums ï¼Œè¯·è®¡ç®—
åœ¨ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ ï¼Œä»Šæ™šèƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚</p>
<p>ç¤ºä¾‹ 1ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [2,3,2]</span><br><span class="line">è¾“å‡ºï¼š3</span><br><span class="line">è§£é‡Šï¼šä½ ä¸èƒ½å…ˆå·çªƒ 1 å·æˆ¿å±‹ï¼ˆé‡‘é¢ = 2ï¼‰ï¼Œç„¶åå·çªƒ 3 å·æˆ¿å±‹ï¼ˆé‡‘é¢ = 2ï¼‰, å› ä¸ºä»–ä»¬æ˜¯ç›¸é‚»çš„ã€‚</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯-1"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>â€‹ ä¸ä¸Šé¢˜å…¶å®å¤§ä½“ä¸€è‡´ï¼Œåªä¸è¿‡éœ€è¦è½¬ä¸€ä¸ªè„‘ç­‹æ€¥è½¬å¼¯ï¼š</p>
<p>â€‹
ç¯çŠ¶æ’åˆ—æ„å‘³ç€ç¬¬ä¸€ä¸ªæˆ¿å­å’Œæœ€åä¸€ä¸ªæˆ¿å­ä¸­åªèƒ½é€‰æ‹©ä¸€ä¸ªå·ç›—ï¼Œå› æ­¤å¯ä»¥æŠŠæ­¤ç¯çŠ¶æ’åˆ—æˆ¿é—´é—®é¢˜çº¦åŒ–ä¸ºä¸¤ä¸ªå•æ’æ’åˆ—æˆ¿é—´å­é—®é¢˜ï¼š</p>
<ul>
<li><p>åœ¨ä¸å·ç›—ç¬¬ä¸€ä¸ªæˆ¿å­çš„æƒ…å†µä¸‹ï¼ˆå³ nums[1:]ï¼‰ï¼Œæœ€å¤§é‡‘é¢æ˜¯ p1
ï¼›</p></li>
<li><p>åœ¨ä¸å·ç›—æœ€åä¸€ä¸ªæˆ¿å­çš„æƒ…å†µä¸‹ï¼ˆå³ nums[:nâˆ’1]ï¼‰ï¼Œæœ€å¤§é‡‘é¢æ˜¯ p2
ã€‚</p></li>
<li><p>ç»¼åˆå·ç›—æœ€å¤§é‡‘é¢ï¼š ä¸ºä»¥ä¸Šä¸¤ç§æƒ…å†µçš„è¾ƒå¤§å€¼ï¼Œå³
max(p1,p2)ã€‚</p></li>
</ul>
<h5 id="è§£é¢˜ä»£ç -1">è§£é¢˜ä»£ç ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">rob</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.<span class="built_in">size</span>() == <span class="number">1</span>) <span class="keyword">return</span> nums[<span class="number">0</span>];</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dp1</span><span class="params">(nums.size())</span></span>;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dp2</span><span class="params">(nums.size())</span></span>;</span><br><span class="line">        <span class="comment">//dp1 ä¸æŠŠnums[0]è®¡ç®—å…¥</span></span><br><span class="line">        dp1[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        dp1[<span class="number">1</span>] = nums[<span class="number">1</span>];</span><br><span class="line">        <span class="comment">//dp2 ä¸æŠŠnums[nums.size()-1]è®¡ç®—å…¥</span></span><br><span class="line">        dp2[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        dp2[<span class="number">1</span>] = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;nums.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            dp1[i] = <span class="built_in">max</span>(dp1[i<span class="number">-1</span>],dp1[i<span class="number">-2</span>] + nums[i]);</span><br><span class="line">            dp2[i] = <span class="built_in">max</span>(dp2[i<span class="number">-1</span>],dp2[i<span class="number">-2</span>] + nums[i<span class="number">-1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(dp1[nums.<span class="built_in">size</span>()<span class="number">-1</span>],dp2[nums.<span class="built_in">size</span>()<span class="number">-1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>åŠ¨æ€è§„åˆ’ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>dynamic programming</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ¨æ€è§„åˆ’â€”â€”ç»å…¸æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜</title>
    <url>/2022/02/16/513d3a9242d5/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-095.-æœ€é•¿å…¬å…±å­åºåˆ—"><a
href="https://leetcode-cn.com/problems/qJnOS7/">å‰‘æŒ‡ Offer II 095.
æœ€é•¿å…¬å…±å­åºåˆ—</a></h4>
<p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² text1 å’Œ text2ï¼Œè¿”å›è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿ å…¬å…±å­åºåˆ—
çš„é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ å…¬å…±å­åºåˆ— ï¼Œè¿”å› 0 ã€‚ä¸€ä¸ªå­—ç¬¦ä¸²çš„ å­åºåˆ—
æ˜¯æŒ‡è¿™æ ·ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼šå®ƒæ˜¯ç”±åŸå­—ç¬¦ä¸²åœ¨ä¸æ”¹å˜å­—ç¬¦çš„ç›¸å¯¹é¡ºåºçš„æƒ…å†µä¸‹åˆ é™¤æŸäº›å­—ç¬¦ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ä»»ä½•å­—ç¬¦ï¼‰åç»„æˆçš„æ–°å­—ç¬¦ä¸²ã€‚</p>
<ul>
<li>ä¾‹å¦‚ï¼Œ"ace" æ˜¯ "abcde" çš„å­åºåˆ—ï¼Œä½† "aec" ä¸æ˜¯ "abcde"
çš„å­åºåˆ—ã€‚</li>
</ul>
<p>ä¸¤ä¸ªå­—ç¬¦ä¸²çš„ å…¬å…±å­åºåˆ— æ˜¯è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²æ‰€å…±åŒæ‹¥æœ‰çš„å­åºåˆ—ã€‚</p>
<ul>
<li><code>text1</code> å’Œ <code>text2</code> ä»…ç”±å°å†™è‹±æ–‡å­—ç¬¦ç»„æˆã€‚</li>
</ul>
<h5 id="è§£é¢˜æ€è·¯"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>â€‹ æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜æ˜¯å…¸å‹çš„äºŒç»´åŠ¨æ€è§„åˆ’é—®é¢˜ã€‚</p>
<p>â€‹ æˆ‘ä»¬è®¾å®šä¸€ä¸ªäºŒç»´æ•°ç»„ res, <span
class="math inline">\(res[i][j]\)</span>
ä»£è¡¨text1çš„å‰iä¸ªå­—ç¬¦å’Œtext2çš„å‰jä¸ªå­—ç¬¦çš„æœ€é•¿å…¬å…±å­åºåˆ—ã€‚å½“i =
0æˆ–j=0æ—¶ï¼Œå‡åˆå§‹åŒ–ä¸º0ï¼Œç„¶åæˆ‘ä»¬å†™å‡ºé€’å½’è¡¨è¾¾å¼ï¼š <span
class="math display">\[
res[i][j] = res[i-1][j-1] + 1  \ \ \ \ \ (if \ \ \ \ text1[i-1] ==
text2[j-1])
\]</span></p>
<p><span class="math display">\[
res[i][j] = max(res[i-1][j],res[i][j-1])  \ \ \ \ \ (if \ \ \ \
text1[i-1] != text2[j-1])
\]</span></p>
<p>â€‹ ç„¶åæŒ‰ç…§åŠ¨æ€è§„åˆ’è§„åˆ™ï¼Œè¿›è¡Œå¾ªç¯æ±‚è§£å³å¯ã€‚</p>
<h5 id="è§£é¢˜ä»£ç "><strong>è§£é¢˜ä»£ç </strong>ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">longestCommonSubsequence</span><span class="params">(string text1, string text2)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> len_1 = text1.<span class="built_in">length</span>();</span><br><span class="line">        <span class="type">int</span> len_2 = text2.<span class="built_in">length</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">res</span>(len_1 + <span class="number">1</span>,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(len_2 + <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=len_1;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;=len_2;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(text1[i<span class="number">-1</span>] == text2[j<span class="number">-1</span>])&#123;</span><br><span class="line">                    res[i][j] = res[i<span class="number">-1</span>][j<span class="number">-1</span>] + <span class="number">1</span>; </span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    res[i][j] = <span class="built_in">max</span>(res[i<span class="number">-1</span>][j] , res[i][j<span class="number">-1</span>]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res[len_1][len_2];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>C++ä»£ç æŠ€å·§æ³¨æ„</strong>ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆå§‹åŒ–äºŒç»´æ•°ç»„çš„æ–¹æ³•</span></span><br><span class="line">vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(m + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n + <span class="number">1</span>));</span><br></pre></td></tr></table></figure>
<p>â€‹</p>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>åŠ¨æ€è§„åˆ’ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>dynamic programming</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ¨æ€è§„åˆ’â€”â€”æœ€å°‘å›æ–‡åˆ†å‰²é—®é¢˜ï¼ˆå¾…æ›´æ–°ï¼‰</title>
    <url>/2022/02/18/52df1a6e55af/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-094.-æœ€å°‘å›æ–‡åˆ†å‰²"><a
href="https://leetcode-cn.com/problems/omKAoA/">å‰‘æŒ‡ Offer II 094.
æœ€å°‘å›æ–‡åˆ†å‰²</a></h4>
<p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² <code>s</code>ï¼Œè¯·å°† <code>s</code>
åˆ†å‰²æˆä¸€äº›å­ä¸²ï¼Œä½¿æ¯ä¸ªå­ä¸²éƒ½æ˜¯å›æ–‡ä¸²ã€‚</p>
<p>è¿”å›ç¬¦åˆè¦æ±‚çš„ <strong>æœ€å°‘åˆ†å‰²æ¬¡æ•°</strong> ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = &quot;aab&quot;</span><br><span class="line">è¾“å‡ºï¼š1</span><br><span class="line">è§£é‡Šï¼šåªéœ€ä¸€æ¬¡åˆ†å‰²å°±å¯å°† s åˆ†å‰²æˆ [&quot;aa&quot;,&quot;b&quot;] è¿™æ ·ä¸¤ä¸ªå›æ–‡å­ä¸²ã€‚</span><br></pre></td></tr></table></figure>
<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šs = &quot;a&quot;</span><br><span class="line">è¾“å‡ºï¼š0</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>â€‹ å…¶å†…éƒ¨å…¶å®å«æœ‰ä¸¤ä¸ªDPå­é—®é¢˜ï¼š</p>
<ul>
<li>1ã€å­—ç¬¦ä¸²æ‰€æœ‰çš„å­ä¸²ï¼Œå®ƒä»¬æ˜¯ä¸æ˜¯å›æ–‡ä¸²ã€‚å³ s[i, j]
è¿™ä¸€æ®µæ˜¯ä¸æ˜¯å›æ–‡å­—ç¬¦ä¸²</li>
<li>2ã€å¦‚ä½•åˆ†å‰²èƒ½å¤Ÿæœ‰æœ€å°‘çš„åˆ†å‰²æ¬¡æ•°</li>
</ul>
<h5 id="å­é—®é¢˜1"><strong>å­é—®é¢˜1ï¼š</strong></h5>
<p>â€‹ æˆ‘ä»¬ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„ isPalindrome
æ¥è¿›è¡Œè®°å½•ï¼Œåˆå§‹åŒ–ä¸ºfalseã€‚æŒ‰ç…§lené•¿åº¦è¿›è¡Œéå†ï¼šçŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š
<span class="math display">\[
s[i][j] = true  \ \ \ \ \ (len = 1)
\]</span></p>
<p><span class="math display">\[
s[i][j] = (s[i] == s[j])  \ \ \ \ \ (len = 2)
\]</span></p>
<p><span class="math display">\[
s[i][j] = (s[i] == s[j] \ \ \ \&amp;\&amp; \ \ \
isPalindrome[i+1][j-1])  \ \ \ \ (len &gt; 2)
\]</span></p>
<h5 id="ä»£ç 1">ä»£ç 1ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> n = s.<span class="built_in">length</span>();</span><br><span class="line"><span class="comment">// åˆå§‹åŒ–å…¨false</span></span><br><span class="line">vector&lt;vector&lt;<span class="type">bool</span>&gt;&gt; <span class="built_in">isPalindrome</span>(n, <span class="built_in">vector</span>&lt;<span class="type">bool</span>&gt;(n, <span class="literal">false</span>));</span><br><span class="line"><span class="comment">// é•¿åº¦ä¸º1çš„æ˜¯å›æ–‡ä¸²</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) isPalindrome[i][i] = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// ä»é•¿åº¦ä¸º2çš„å­ä¸²å¼€å§‹æšä¸¾[left, right]</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> len = <span class="number">2</span>; len &lt;= n; ++len)&#123;</span><br><span class="line">    <span class="comment">// å·¦ç«¯ç‚¹</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> left = <span class="number">0</span>; left + len &lt;= n; ++left) &#123;</span><br><span class="line">        <span class="comment">// å³ç«¯ç‚¹</span></span><br><span class="line">        <span class="type">int</span> right = left + len - <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// é•¿åº¦ä¸º2å°±æ˜¯è¿™ä¿©æ˜¯å¦ç›¸ç­‰</span></span><br><span class="line">        <span class="keyword">if</span> (len == <span class="number">2</span>) isPalindrome[left][right] = (s[left] == s[right]);</span><br><span class="line">        <span class="comment">// é•¿åº¦å¤§äº2, ç«¯ç‚¹ç›¸åŒçš„åŒæ—¶ï¼Œå†…ä¾§ä¹Ÿè¦æ˜¯å›æ–‡</span></span><br><span class="line">        <span class="keyword">if</span> (len &gt; <span class="number">2</span>) isPalindrome[left][right] = (s[left] == s[right]) &amp;&amp; isPalindrome[left + <span class="number">1</span>][right - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å­é—®é¢˜2"><strong>å­é—®é¢˜2ï¼š</strong></h5>
<p>â€‹ æˆ‘ä»¬ç”¨ä¸€ç»´æ•°ç»„å­˜å‚¨ï¼Œå­—ç¬¦ä¸²ä»ã€Œèµ·ç‚¹å­—ç¬¦ã€åˆ°ã€Œç¬¬ i
ä¸ªå­—ç¬¦ã€ç»„æˆçš„å­ä¸²ï¼Œæœ€å°‘éœ€è¦å¤šå°‘åˆ†å‰²æ¬¡æ•°ã€‚<code>dp[i]</code> ä¸ºå°†
<code>[0,i]</code>
è¿™ä¸€æ®µå­—ç¬¦åˆ†å‰²ä¸ºè‹¥å¹²å›æ–‡ä¸²çš„æœ€å°åˆ†å‰²æ¬¡æ•°ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li><p>ä»ã€Œèµ·ç‚¹å­—ç¬¦ã€åˆ°ã€Œç¬¬ i ä¸ªå­—ç¬¦ã€èƒ½å½¢æˆå›æ–‡ä¸²ã€‚é‚£ä¹ˆæœ€å°åˆ†å‰²æ¬¡æ•°ä¸º
0ï¼Œæ­¤æ—¶æœ‰ <code>dp[i] = 0</code>ï¼› <span class="math display">\[
dp[i] = 0 \ \ \ \ \ ( isPalindrome[0][i] == true)
\]</span></p></li>
<li><p>ä»ã€Œèµ·ç‚¹å­—ç¬¦ã€åˆ°ã€Œç¬¬ i
ä¸ªå­—ç¬¦ã€ä¸èƒ½å½¢æˆå›æ–‡ä¸²ã€‚æ­¤æ—¶æˆ‘ä»¬éœ€è¦æšä¸¾å·¦ç«¯ç‚¹<code>l</code>ï¼Œå¦‚æœ<code>[l, i]</code>
è¿™ä¸€æ®µæ˜¯å›æ–‡ä¸²çš„è¯ï¼Œé‚£ä¹ˆæœ‰ <code>dp[i] = dp[l- 1] + 1</code> (
æ»¡è¶³å›æ–‡è¦æ±‚çš„å·¦ç«¯ç‚¹ä½ç½® l å¯èƒ½æœ‰å¾ˆå¤šä¸ªï¼Œå–æœ€å°</p></li>
</ul>
<p><span class="math display">\[
dp[i] = min(dp[l_0-1],dp[l_1-1],â€¦â€¦,dp[l_{i} - 1]  ) + 1 \ \ \ (
isPalindrome[0][i] == false)(l_i = i)
\]</span></p>
<h5 id="ä»£ç 2">ä»£ç 2ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// n = s.length()</span></span><br><span class="line"><span class="comment">//2ã€res[i]ä»£è¡¨ä»ã€Œèµ·ç‚¹å­—ç¬¦ã€åˆ°ã€Œç¬¬ i ä¸ªå­—ç¬¦ã€ç»„æˆçš„å­ä¸²è¦åˆ†å‰²æˆå›æ–‡ä¸²æœ€å°‘çš„åˆ†å‰²æ¬¡æ•°</span></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">res</span><span class="params">(n)</span></span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(isPalindrome[<span class="number">0</span>][i]) res[i] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="type">int</span> min = <span class="number">1e9</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">0</span>;l&lt;=i;l++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(isPalindrome[l][i] &amp;&amp; res[l<span class="number">-1</span>] &lt; min)&#123;</span><br><span class="line">                min = res[l<span class="number">-1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        res[i] = min + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æ€»è§£é¢˜ä»£ç ">æ€»è§£é¢˜ä»£ç ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minCut</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1ã€éœ€è¦é¢„å…ˆçŸ¥é“ i - j çš„å­—ç¬¦ä¸²æ˜¯ä¸æ˜¯å›æ–‡ä¸² ( i &lt; j) </span></span><br><span class="line">        <span class="comment">//isPalindrome[i][j] ä»£è¡¨ i - j å­ä¸²</span></span><br><span class="line">        <span class="type">int</span> n = s.<span class="built_in">length</span>();</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–å…¨false</span></span><br><span class="line">        vector&lt;vector&lt;<span class="type">bool</span>&gt;&gt; <span class="built_in">isPalindrome</span>(n, <span class="built_in">vector</span>&lt;<span class="type">bool</span>&gt;(n, <span class="literal">false</span>));</span><br><span class="line">        <span class="comment">// é•¿åº¦ä¸º1çš„æ˜¯å›æ–‡ä¸²</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) isPalindrome[i][i] = <span class="literal">true</span>;</span><br><span class="line">        <span class="comment">// ä»é•¿åº¦ä¸º2çš„å­ä¸²å¼€å§‹æšä¸¾[left, right]</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> len = <span class="number">2</span>; len &lt;= n; ++len)&#123;</span><br><span class="line">            <span class="comment">// å·¦ç«¯ç‚¹</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> left = <span class="number">0</span>; left + len &lt;= n; ++left) &#123;</span><br><span class="line">                <span class="comment">// å³ç«¯ç‚¹</span></span><br><span class="line">                <span class="type">int</span> right = left + len - <span class="number">1</span>;</span><br><span class="line">                <span class="comment">// é•¿åº¦ä¸º2å°±æ˜¯è¿™ä¿©æ˜¯å¦ç›¸ç­‰</span></span><br><span class="line">                <span class="keyword">if</span> (len == <span class="number">2</span>) isPalindrome[left][right] = (s[left] == s[right]);</span><br><span class="line">                <span class="comment">// é•¿åº¦å¤§äº2, ç«¯ç‚¹ç›¸åŒçš„åŒæ—¶ï¼Œå†…ä¾§ä¹Ÿè¦æ˜¯å›æ–‡</span></span><br><span class="line">                <span class="keyword">if</span> (len &gt; <span class="number">2</span>) isPalindrome[left][right] = (s[left] == s[right]) &amp;&amp; isPalindrome[left + <span class="number">1</span>][right - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2ã€res[i]ä»£è¡¨ä»ã€Œèµ·ç‚¹å­—ç¬¦ã€åˆ°ã€Œç¬¬ i ä¸ªå­—ç¬¦ã€ç»„æˆçš„å­ä¸²è¦åˆ†å‰²æˆå›æ–‡ä¸²æœ€å°‘çš„åˆ†å‰²æ¬¡æ•°</span></span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">res</span><span class="params">(n)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(isPalindrome[<span class="number">0</span>][i]) res[i] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="type">int</span> min = <span class="number">1e9</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> l=<span class="number">0</span>;l&lt;=i;l++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(isPalindrome[l][i] &amp;&amp; res[l<span class="number">-1</span>] &lt; min)&#123;</span><br><span class="line">                        min = res[l<span class="number">-1</span>];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                res[i] = min + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res[n<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>åŠ¨æ€è§„åˆ’ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>dynamic programming</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ¨æ€è§„åˆ’â€”â€”ç»å…¸èƒŒåŒ…é—®é¢˜åŠæ‰©å±•</title>
    <url>/2022/02/21/8eca8d666ea6/</url>
    <content><![CDATA[<h3 id="ä¸€èƒŒåŒ…é—®é¢˜ç®€ä»‹">ä¸€ã€èƒŒåŒ…é—®é¢˜ç®€ä»‹</h3>
<p>â€‹
èƒŒåŒ…é—®é¢˜å…¶å®åˆ†å¾ˆå¤šç§ï¼Œæ­¤ç±»é—®é¢˜çš„ä¸€èˆ¬æè¿°ä¸ºï¼šèƒ½å¦é€‰æ‹©è‹¥å¹²ç‰©å“ï¼Œä½¿å®ƒä»¬åˆšå¥½æ”¾æ»¡ä¸€ä¸ªå®¹é‡ä¸º
t çš„èƒŒåŒ…ã€‚åœ¨è¯¥ç¯‡åšæ–‡ä¸­ï¼Œæˆ‘å¯¹å…¶è¿›è¡Œäº†è¯¦ç»†çš„æ¢³ç†ã€‚</p>
<ul>
<li><p>è‹¥æ¯ç§ç‰©å“å¯ä»¥é€‰æ‹©æ‹¿ä¸€éƒ¨åˆ†ï¼Œåˆ™ä¸º<strong>åˆ†æ•°èƒŒåŒ…é—®é¢˜</strong>ï¼Œå¯ä»¥ä½¿ç”¨è´ªå©ªè§£å†³ã€‚</p></li>
<li><p>è‹¥æ¯ç§ç‰©å“åªæœ‰ä¸€ä¸ªï¼Œåªèƒ½æ‹¿æˆ–è€…ä¸æ‹¿ï¼Œåˆ™ä¸º<strong>0-1èƒŒåŒ…é—®é¢˜</strong>ï¼Œè´ªå©ªæ— æ³•å¾—åˆ°æœ€ä¼˜è§£ï¼Œéœ€ç”¨DPã€‚</p></li>
<li><p>è‹¥æ¯ä¸ªç‰©å“çš„ä¸ªæ•°æœ‰é™ï¼Œåˆ™ä¸º<strong>å¤šé‡èƒŒåŒ…é—®é¢˜</strong>ï¼›</p></li>
<li><p>è‹¥æ¯ä¸ªç‰©å“çš„ä¸ªæ•°æ— é™ï¼Œåˆ™ä¸º<strong>å®Œå…¨èƒŒåŒ…é—®é¢˜</strong>ã€‚</p></li>
</ul>
<h3 id="äºŒåˆ†æ•°èƒŒåŒ…é—®é¢˜">äºŒã€åˆ†æ•°èƒŒåŒ…é—®é¢˜ï¼š</h3>
<p>â€‹
åˆ†æ•°èƒŒåŒ…é—®é¢˜æ€è·¯éå¸¸ç®€å•ï¼Œé‡‡ç”¨è´ªå©ªçš„æ€è·¯ï¼Œæˆ‘ä»¬åªéœ€è¦å…ˆè®¡ç®—æ¯ä¸€ç§ç‰©å“ï¼Œå®ƒçš„æ€§ä»·æ¯”ï¼Œç„¶åè¿›è¡Œæ’åºï¼Œæ‹¿æ€§ä»·æ¯”é«˜çš„ç‰©å“ï¼Œç›´åˆ°èƒŒåŒ…è¢«è£…æ»¡å³å¯ã€‚
<span class="math display">\[
æ€§ä»·æ¯” = ç‰©å“æ€»ä»·å€¼ / ç‰©å“æ€»ä½“ç§¯
\]</span></p>
<h3 id="ä¸‰0-1èƒŒåŒ…é—®é¢˜">ä¸‰ã€0-1èƒŒåŒ…é—®é¢˜ï¼š</h3>
<h4 id="é¢˜ç›®æè¿°">é¢˜ç›®æè¿°ï¼š</h4>
<p>â€‹
ä¸€å…±æœ‰Nä»¶ç‰©å“ï¼Œç¬¬iï¼ˆiä»1å¼€å§‹ï¼‰ä»¶ç‰©å“çš„é‡é‡ä¸ºw[i]ï¼Œä»·å€¼ä¸ºv[i]ã€‚åœ¨æ€»é‡é‡ä¸è¶…è¿‡èƒŒåŒ…æ‰¿è½½ä¸Šé™Wçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿè£…å…¥èƒŒåŒ…çš„æœ€å¤§ä»·å€¼æ˜¯å¤šå°‘ï¼Ÿ</p>
<h4 id="åˆ†æ">åˆ†æï¼š</h4>
<p>â€‹
å¦‚æœé‡‡ç”¨æš´åŠ›ç©·ä¸¾çš„æ–¹å¼ï¼Œæ¯ä»¶ç‰©å“éƒ½å­˜åœ¨è£…å…¥å’Œä¸è£…å…¥ä¸¤ç§æƒ…å†µï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(2^N)ï¼Œè¿™æ˜¯ä¸å¯æ¥å—çš„ã€‚è€Œä½¿ç”¨åŠ¨æ€è§„åˆ’å¯ä»¥å°†å¤æ‚åº¦é™è‡³O(NW)ã€‚æˆ‘ä»¬çš„<strong>ç›®æ ‡æ˜¯ä¹¦åŒ…å†…ç‰©å“çš„æ€»ä»·å€¼ï¼Œè€Œå˜é‡æ˜¯ç‰©å“å’Œä¹¦åŒ…çš„é™é‡</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯æœ‰å¦‚ä¸‹è§£å†³æ–¹æ¡ˆ</p>
<ul>
<li><p>å®šä¹‰è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>dp[i][j]</code>
è¡¨ç¤ºå°†å‰iä»¶ç‰©å“è£…è¿›é™é‡ä¸ºjçš„èƒŒåŒ…å¯ä»¥è·å¾—çš„æœ€å¤§ä»·å€¼,å…¶ä¸­
<code>0&lt;=i&lt;=N, 0&lt;=j&lt;=W</code></li>
</ul></li>
<li><p>åˆå§‹åŒ–çŠ¶æ€ï¼š</p>
<ul>
<li>å°†<code>dp[0][0...W]</code>åˆå§‹åŒ–ä¸º0ï¼Œè¡¨ç¤ºå°†å‰0ä¸ªç‰©å“ï¼ˆå³æ²¡æœ‰ç‰©å“ï¼‰è£…å…¥ä¹¦åŒ…çš„æœ€å¤§ä»·å€¼ä¸º0ã€‚</li>
</ul></li>
<li><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</p>
<ul>
<li><p>å½“ i &gt; 0 æ—¶<code>dp[i][j]</code> æœ‰ä¸¤ç§æƒ…å†µï¼š</p>
<ol type="1">
<li>ä¸è£…å…¥ç¬¬iä»¶ç‰©å“ï¼Œå³<code>dp[i-1][j]</code> ï¼›</li>
<li>è£…å…¥ç¬¬ i ä»¶ç‰©å“ï¼ˆå‰ææ˜¯èƒ½è£…ä¸‹ï¼‰ï¼Œå³
<code>dp[iâˆ’1][jâˆ’w[i]] + v[i]</code>ã€‚</li>
</ol></li>
<li><p>``` dp[i][j] = max(dp[iâˆ’1][j], dp[iâˆ’1][jâˆ’w[i]]+v[i]) Â Â Â Â Â Â Â if( j
&gt;= w[i] ) <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">    ä»ä¸Šè¿°æ–¹ç¨‹ä¸­ï¼Œæˆ‘ä»¬çŸ¥æ™“`dp[i][j]`çš„å€¼åªä¸`dp[i-1][0,...,j-1]`æœ‰å…³ï¼Œå°±å¯ä»¥å¼€å§‹ä¹¦å†™åŠ¨æ€è§„åˆ’ä»£ç ï¼Œ</span><br><span class="line"></span><br><span class="line">    ç¬¬ i ä»¶ç‰©å“è£…å…¥æˆ–è€…ä¸è£…å…¥è€Œè·å¾—çš„æœ€å¤§ä»·å€¼å®Œå…¨å¯ä»¥ç”±å‰é¢ i-1 ä»¶ç‰©å“çš„æœ€å¤§ä»·å€¼å†³å®šï¼Œæš´åŠ›æšä¸¾å¿½ç•¥äº†è¿™ä¸ªäº‹å®</span><br><span class="line"></span><br><span class="line">- æ ¸å¿ƒä»£ç ï¼š</span><br><span class="line"></span><br><span class="line">  ```C++</span><br><span class="line">  for(int i=0;i&lt;n;i++)</span><br><span class="line">  	for(int j=0;j&lt;W;j++)</span><br><span class="line">  		dp[i][j] = max(dp[iâˆ’1][j], dp[iâˆ’1][jâˆ’w[i]]+v[i])</span><br></pre></td></tr></table></figure></p></li>
</ul></li>
</ul>
<h4 id="é¢˜ç›®ç¤ºä¾‹">é¢˜ç›®ç¤ºä¾‹ï¼š</h4>
<p>â€‹ <a href="https://leetcode-cn.com/problems/YaVDxD/">å‰‘æŒ‡ Offer II
102. åŠ å‡çš„ç›®æ ‡å€¼</a></p>
<h3 id="å››å®Œå…¨èƒŒåŒ…é—®é¢˜">å››ã€å®Œå…¨èƒŒåŒ…é—®é¢˜ï¼š</h3>
<h4 id="é¢˜ç›®æè¿°-1">é¢˜ç›®æè¿°ï¼š</h4>
<p>â€‹ å®Œå…¨èƒŒåŒ…ï¼ˆunbounded knapsack
problemï¼‰ä¸01èƒŒåŒ…ä¸åŒå°±æ˜¯æ¯ç§ç‰©å“å¯ä»¥æœ‰æ— é™å¤šä¸ªï¼šä¸€å…±æœ‰Nç§ç‰©å“ï¼Œæ¯ç§ç‰©å“æœ‰æ— é™å¤šä¸ªï¼Œç¬¬iï¼ˆiä»1å¼€å§‹ï¼‰ç§ç‰©å“çš„é‡é‡ä¸ºw[i]ï¼Œä»·å€¼ä¸ºv[i]ã€‚åœ¨æ€»é‡é‡ä¸è¶…è¿‡èƒŒåŒ…æ‰¿è½½ä¸Šé™Wçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿè£…å…¥èƒŒåŒ…çš„æœ€å¤§ä»·å€¼æ˜¯å¤šå°‘ï¼Ÿ</p>
<h4 id="åˆ†ææ€è·¯1">åˆ†ææ€è·¯1ï¼š</h4>
<p>â€‹
å¤§ä½“çš„è§„åˆ™ä¸åˆå§‹åŒ–çŠ¶æ€éƒ½å’Œ0-1èƒŒåŒ…é—®é¢˜ä¸€è‡´ï¼Œåœ¨çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¤„æœ‰æ‰€åŒºåˆ«ï¼š</p>
<ul>
<li><p>å®šä¹‰è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>dp[i][j]</code>
è¡¨ç¤ºå°†å‰iä»¶ç‰©å“è£…è¿›é™é‡ä¸ºjçš„èƒŒåŒ…å¯ä»¥è·å¾—çš„æœ€å¤§ä»·å€¼,å…¶ä¸­
<code>0&lt;=i&lt;=N, 0&lt;=j&lt;=W</code></li>
</ul></li>
<li><p>åˆå§‹åŒ–çŠ¶æ€ï¼š</p>
<ul>
<li>å°†<code>dp[0][0...W]</code>åˆå§‹åŒ–ä¸º0ï¼Œè¡¨ç¤ºå°†å‰0ä¸ªç‰©å“ï¼ˆå³æ²¡æœ‰ç‰©å“ï¼‰è£…å…¥ä¹¦åŒ…çš„æœ€å¤§ä»·å€¼ä¸º0ã€‚</li>
</ul></li>
<li><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</p>
<ul>
<li><p>å½“ i &gt; 0 æ—¶<code>dp[i][j]</code> æœ‰ä¸¤ç§æƒ…å†µï¼š</p>
<ol type="1">
<li>ä¸è£…å…¥ç¬¬iä»¶ç‰©å“ï¼Œå³<code>dp[i-1][j]</code> ï¼›</li>
<li>è£…å…¥ç¬¬iç§ç‰©å“ï¼Œæ­¤æ—¶å’Œ0-1èƒŒåŒ…ä¸å¤ªä¸€æ ·ï¼Œå› ä¸ºæ¯ç§ç‰©å“æœ‰æ— é™ä¸ªï¼ˆä½†æ³¨æ„ä¹¦åŒ…é™é‡æ˜¯æœ‰é™çš„ï¼‰ï¼Œæ‰€ä»¥æ­¤æ—¶ä¸åº”è¯¥è½¬ç§»åˆ°<code>dp[iâˆ’1][jâˆ’w[i]]</code>è€Œåº”è¯¥è½¬ç§»åˆ°<code>dp[i][jâˆ’w[i]]</code>ï¼Œå³è£…å…¥ç¬¬
iç§å•†å“åè¿˜å¯ä»¥å†ç»§ç»­è£…å…¥ç¬¬iç§å•†å“ã€‚</li>
</ol></li>
<li><p>``` dp[i][j] = max(dp[iâˆ’1][j], dp[i][jâˆ’w[i]]+v[i]) if( j &gt;=
w[i] ) <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">  ä»ä¸Šè¿°æ–¹ç¨‹ä¸­ï¼Œæˆ‘ä»¬çŸ¥æ™“`dp[i][j]`çš„å€¼åªä¸`dp[i-1][0,...,j-1]`æœ‰å…³ï¼Œå°±å¯ä»¥å¼€å§‹ä¹¦å†™åŠ¨æ€è§„åˆ’ä»£ç ï¼Œ</span><br><span class="line"></span><br><span class="line">  æ­¤è§£æ³•æ—¶é—´å¤æ‚åº¦ä¸ºO(NW)</span><br><span class="line"></span><br><span class="line">- ä¼ªä»£ç ï¼š</span><br><span class="line"></span><br></pre></td></tr></table></figure> for(int i=0;i&lt;n;i++) for(int j=0;j&lt;W;j++)
dp[i][j] = max(dp[iâˆ’1][j], dp[i][jâˆ’w[i]]+v[i]) <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">#### åˆ†ææ€è·¯2ï¼š</span><br><span class="line"></span><br><span class="line">â€‹	æˆ‘ä»¬ä»è£…å…¥ç¬¬ `i `ç§ç‰©å“å¤šå°‘ä»¶å‡ºå‘ï¼Œ0-1èƒŒåŒ…åªæœ‰ä¸¤ç§æƒ…å†µå³å–0ä»¶å’Œå–1ä»¶ï¼Œè€Œè¿™é‡Œæ˜¯å–0ä»¶ã€1ä»¶ã€2ä»¶...ç›´åˆ°è¶…è¿‡é™é‡ï¼ˆk &gt; j/w[i]ï¼‰ï¼Œæ‰€ä»¥çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼š</span><br><span class="line"></span><br><span class="line">- å®šä¹‰è§„åˆ™å¦‚ä¸‹ï¼šä¸0-1ç›¸åŒ</span><br><span class="line">  - `dp[i][j]` è¡¨ç¤ºå°†å‰iä»¶ç‰©å“è£…è¿›é™é‡ä¸ºjçš„èƒŒåŒ…å¯ä»¥è·å¾—çš„æœ€å¤§ä»·å€¼,å…¶ä¸­  `0&lt;=i&lt;=N, 0&lt;=j&lt;=W`</span><br><span class="line"></span><br><span class="line">- åˆå§‹åŒ–çŠ¶æ€ï¼šä¸0-1ç›¸åŒ</span><br><span class="line"></span><br><span class="line">  - å°†`dp[0][0...W]`åˆå§‹åŒ–ä¸º0ï¼Œè¡¨ç¤ºå°†å‰0ä¸ªç‰©å“ï¼ˆå³æ²¡æœ‰ç‰©å“ï¼‰è£…å…¥ä¹¦åŒ…çš„æœ€å¤§ä»·å€¼ä¸º0ã€‚</span><br><span class="line"></span><br><span class="line">- çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</span><br><span class="line"></span><br><span class="line">  - ```text</span><br><span class="line">    # kä¸ºè£…å…¥ç¬¬iç§ç‰©å“çš„ä»¶æ•°, k &lt;= j/w[i]</span><br><span class="line">    dp[i][j] = max&#123;(dp[i-1][j âˆ’ k*w[i]] + k*v[i]) for every k&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä»ä¸Šè¿°æ–¹ç¨‹ä¸­ï¼Œæˆ‘ä»¬çŸ¥æ™“<code>dp[i][j]</code>çš„å€¼åªä¸<code>dp[i-1][0,...,j-1]</code>æœ‰å…³ï¼Œå°±å¯ä»¥å¼€å§‹ä¹¦å†™åŠ¨æ€è§„åˆ’ä»£ç </p></li>
</ul></li>
<li><p>ä¼ªä»£ç ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;W;j++)</span><br><span class="line">        <span class="keyword">for</span>ï¼ˆ<span class="type">int</span> k = <span class="number">0</span>;k&lt;j/w[i];k++)  <span class="comment">// j / w[i] ä¸ºå¯ä»¥è£…è¿›çš„æœ€å¤§æ•°ç›®</span></span><br><span class="line">            dp[i][j] = <span class="built_in">max</span>(dp[i<span class="number">-1</span>][j], dp[i][jâˆ’k*w[i]]+k*v[i])</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="é¢˜ç›®ç¤ºä¾‹-1">é¢˜ç›®ç¤ºä¾‹ï¼š</h4>
<p>â€‹ <a href="https://leetcode-cn.com/problems/gaM7Ch/">å‰‘æŒ‡ Offer II
103. æœ€å°‘çš„ç¡¬å¸æ•°ç›®</a></p>
<h3 id="äº”å¤šé‡èƒŒåŒ…é—®é¢˜">äº”ã€å¤šé‡èƒŒåŒ…é—®é¢˜ï¼š</h3>
<h4 id="é¢˜ç›®æè¿°-2">é¢˜ç›®æè¿°ï¼š</h4>
<p>â€‹ å¤šé‡èƒŒåŒ…ï¼ˆbounded knapsack
problemï¼‰ä¸å‰é¢ä¸åŒå°±æ˜¯<strong>æ¯ç§ç‰©å“æ˜¯æœ‰é™ä¸ª</strong>ï¼šä¸€å…±æœ‰Nç§ç‰©å“ï¼Œç¬¬iï¼ˆiä»1å¼€å§‹ï¼‰ç§ç‰©å“çš„æ•°é‡ä¸ºn[i]ï¼Œé‡é‡ä¸ºw[i]ï¼Œä»·å€¼ä¸ºv[i]ã€‚åœ¨æ€»é‡é‡ä¸è¶…è¿‡èƒŒåŒ…æ‰¿è½½ä¸Šé™Wçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿè£…å…¥èƒŒåŒ…çš„æœ€å¤§ä»·å€¼æ˜¯å¤šå°‘ï¼Ÿ</p>
<h4 id="åˆ†æ-1">åˆ†æï¼š</h4>
<p>â€‹
å¤§ä½“çš„è§„åˆ™ä¸åˆå§‹åŒ–çŠ¶æ€éƒ½å’Œå®Œå…¨èƒŒåŒ…çš„åˆ†æ2è§’åº¦ä¸€è‡´ï¼Œå°±æ˜¯åœ¨çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¤„çš„kçš„å¤§å°æœ‰äº†ä¸€ä¸ªæ›´é«˜çš„é™åˆ¶ã€‚</p>
<ul>
<li><p>å®šä¹‰è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>dp[i][j]</code>
è¡¨ç¤ºå°†å‰iä»¶ç‰©å“è£…è¿›é™é‡ä¸ºjçš„èƒŒåŒ…å¯ä»¥è·å¾—çš„æœ€å¤§ä»·å€¼,å…¶ä¸­
<code>0&lt;=i&lt;=N, 0&lt;=j&lt;=W</code></li>
</ul></li>
<li><p>åˆå§‹åŒ–çŠ¶æ€ï¼š</p>
<ul>
<li>å°†<code>dp[0][0...W]</code>åˆå§‹åŒ–ä¸º0ï¼Œè¡¨ç¤ºå°†å‰0ä¸ªç‰©å“ï¼ˆå³æ²¡æœ‰ç‰©å“ï¼‰è£…å…¥ä¹¦åŒ…çš„æœ€å¤§ä»·å€¼ä¸º0ã€‚</li>
</ul></li>
<li><p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š</p>
<ul>
<li>```text # kä¸ºè£…å…¥ç¬¬iç§ç‰©å“çš„ä»¶æ•°, k &lt;= min(n[i], j/w[i]) dp[i][j]
= max{(dp[i-1][j âˆ’ k*w[i]] + k*v[i]) for every k} <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">  ä»ä¸Šè¿°æ–¹ç¨‹ä¸­ï¼Œæˆ‘ä»¬çŸ¥æ™“`dp[i][j]`çš„å€¼åªä¸`dp[i-1][0,...,j-1]`æœ‰å…³ï¼Œå°±å¯ä»¥å¼€å§‹ä¹¦å†™åŠ¨æ€è§„åˆ’ä»£ç ï¼Œ</span><br><span class="line"></span><br><span class="line">- ä¼ªä»£ç ï¼š</span><br><span class="line"></span><br><span class="line">  ```C++</span><br><span class="line">  for(int i=0;i&lt;n;i++)</span><br><span class="line">  	for(int j=0;j&lt;W;j++)</span><br><span class="line">          forï¼ˆint k = 0;k&lt;min(n[i], j/w[i]);k++)  // min(n[i], j/w[i]) ä¸ºå¯ä»¥è£…è¿›çš„èƒŒåŒ…çš„æœ€å¤§æ•°ç›®</span><br><span class="line">              dp[i][j] = max(dp[i-1][j], dp[i-1][jâˆ’k*w[i]]+k*v[i])</span><br></pre></td></tr></table></figure></li>
</ul></li>
</ul>
<h3 id="å…­å¤‡æ³¨">å…­ã€å¤‡æ³¨ï¼š</h3>
<p>â€‹
ä¸Šè¿°æ‰€æœ‰çš„ç®—æ³•ï¼Œç”±äºçŠ¶æ€è½¬ç§»æ–¹ç¨‹çš„ç‰¹æ®Šæ€§ï¼Œæ‰€ä»¥å…¶å®åœ¨ç©ºé—´å¤æ‚åº¦ä¸Šæ˜¯å¯ä»¥è¿›è¡Œä¼˜åŒ–çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>æ»šåŠ¨æ•°ç»„</strong>çš„æ–¹æ³•æ¥è¿›è¡Œä¼˜åŒ–ï¼Œå°±æ¯”å¦‚æœ€æ™®é€šçš„0-1é—®é¢˜ï¼Œä½¿ç”¨æ»šåŠ¨æ•°ç»„ä¼˜åŒ–åï¼Œæˆ‘ä»¬å¯ä»¥ä»…ç”¨ä¸€ä¸ªä¸€ç»´æ•°ç»„æ¥å­˜å‚¨ç»“æœï¼Œä¸¢æ‰åŸå…ˆäºŒç»´æ•°ç»„çš„ç¬¬1ä¸ªç»´åº¦ã€‚</p>
<p>â€‹
ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¯¹jéå†çš„æ—¶å€™ï¼Œå¿…é¡»é€†å‘æšä¸¾ï¼Œè¿™æ˜¯ä¸ºäº†é˜²æ­¢ä¸Šä¸€å±‚å¾ªç¯çš„<code>dp[0,...,j-1]</code>è¢«è¦†ç›–ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">dp[<span class="number">0</span>,...,W] = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>,...,N</span><br><span class="line">    <span class="keyword">for</span> j = W,...,w[i] <span class="comment">// å¿…é¡»é€†å‘æšä¸¾!!!</span></span><br><span class="line">        dp[j] = <span class="built_in">max</span>(dp[j], dp[jâˆ’w[i]]+v[i])</span><br></pre></td></tr></table></figure>
<p>å‚è€ƒï¼š<strong>https://zhuanlan.zhihu.com/p/93857890</strong></p>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>åŠ¨æ€è§„åˆ’ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>dynamic programming</tag>
        <tag>knapsack problem</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ¨æ€è§„åˆ’â€”â€”èƒŒåŒ…é—®é¢˜åº”ç”¨</title>
    <url>/2022/02/24/46f0b3257e29/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-102.-åŠ å‡çš„ç›®æ ‡å€¼"><a
href="https://leetcode-cn.com/problems/YaVDxD/">å‰‘æŒ‡ Offer II 102.
åŠ å‡çš„ç›®æ ‡å€¼</a></h4>
<p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° target ã€‚</p>
<p>å‘æ•°ç»„ä¸­çš„æ¯ä¸ªæ•´æ•°å‰æ·»åŠ  '+' æˆ– '-'
ï¼Œç„¶åä¸²è”èµ·æ‰€æœ‰æ•´æ•°ï¼Œå¯ä»¥æ„é€ ä¸€ä¸ª è¡¨è¾¾å¼ï¼š</p>
<ul>
<li>ä¾‹å¦‚ï¼Œnums = [2, 1] ï¼Œå¯ä»¥åœ¨ 2 ä¹‹å‰æ·»åŠ  '+' ï¼Œåœ¨ 1 ä¹‹å‰æ·»åŠ  '-'
ï¼Œç„¶åä¸²è”èµ·æ¥å¾—åˆ°è¡¨è¾¾å¼ "+2-1"</li>
</ul>
<p>è¿”å›å¯ä»¥é€šè¿‡ä¸Šè¿°æ–¹æ³•æ„é€ çš„ã€è¿ç®—ç»“æœç­‰äº target çš„ä¸åŒ è¡¨è¾¾å¼
çš„æ•°ç›®ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [1,1,1,1,1], target = 3</span><br><span class="line">è¾“å‡ºï¼š5</span><br><span class="line">è§£é‡Šï¼šä¸€å…±æœ‰ 5 ç§æ–¹æ³•è®©æœ€ç»ˆç›®æ ‡å’Œä¸º 3.</span><br><span class="line">-1 + 1 + 1 + 1 + 1 = 3</span><br><span class="line">+1 - 1 + 1 + 1 + 1 = 3</span><br><span class="line">+1 + 1 - 1 + 1 + 1 = 3</span><br><span class="line">+1 + 1 + 1 - 1 + 1 = 3</span><br><span class="line">+1 + 1 + 1 + 1 - 1 = 3</span><br></pre></td></tr></table></figure>
<p><strong>æç¤º</strong>ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> &lt;= nums.length &lt;= <span class="number">20</span></span><br><span class="line"><span class="number">0</span> &lt;= nums[i] &lt;= <span class="number">1000</span></span><br><span class="line"><span class="number">0</span> &lt;= <span class="built_in">sum</span>(nums[i]) &lt;= <span class="number">1000</span></span><br><span class="line"><span class="number">-1000</span> &lt;= target &lt;= <span class="number">1000</span></span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>â€‹
åœ¨æœ¬é¢˜çš„èƒŒæ™¯ä¸‹ï¼Œ<strong>ä¸€å¼€å§‹çš„é”™è¯¯æ€è·¯ï¼š</strong>åˆ©ç”¨åŠ¨æ€è§„åˆ’çš„æ€æƒ³ï¼Œå®šä¹‰äºŒç»´æ•°ç»„resï¼Œ<code>res[i][j]</code>ä»£è¡¨å‰<code>i</code>ä¸ªæ•°ï¼ŒæŒ‰ç…§é¢˜ç›®æ‰€ç»™è§„åˆ™ï¼Œè®¡ç®—å¾—åˆ°<code>target = j</code>çš„æ–¹æ³•æ•°ç›®ã€‚ç„¶åçŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹
<code>res[i][j] = res[i-1][j-ele] + res[i-1][j+ele]</code>ï¼Œ<code>ele</code>æ˜¯ç¬¬<code>i</code>ä¸ªå…ƒç´ ã€‚è¿™ä¸ªæ€è·¯åŸºäºçš„æ€æƒ³å°±æ˜¯ï¼šç¬¬<code>i</code>ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å®ƒæ·»åŠ <code>+</code>æˆ–è€…<code>-</code>å·ï¼Œè¿™æ ·çš„è¯å’Œä¸ºå‰<code>i</code>ä¸ªå…ƒç´ è®¡ç®—å¾—åˆ°<code>target</code>ä¸º<code>j</code>çš„æ–¹æ³•æ•°åªæœ‰ä¸¤ç§å¯èƒ½çš„è·¯å¾„ï¼Œå°±æ˜¯å‰<code>i-1</code>ä¸ªå…ƒç´ ã€‚</p>
<p>â€‹
ä½†æ˜¯ä»£ç å†™ç€å†™ç€ï¼Œå‘ç°ä¸€ä¸ªä¸å¤ªå¯¹çš„åœ°æ–¹ï¼Œé‚£å°±æ˜¯targetç›®æ ‡æ˜¯æœ‰å¯èƒ½è´Ÿçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–çš„<code>j</code>çš„ç»´åº¦éœ€è¦ä»£è¡¨ä»<code>-1000~target</code>ï¼Œä½†æ˜¯è¿™æ ·è¿˜ä¸èƒ½è§£å†³é—®é¢˜ï¼Œå› ä¸ºæœ‰å¯èƒ½<code>j-ele</code>æ˜¯æ¯”<code>-1000</code>å°çš„ï¼Œå°å¤šå°‘æ— ä»å¯çŸ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±æ²¡æœ‰åŠæ³•è¿›è¡Œæ¯”è¾ƒé«˜æ•ˆçš„åŠ¨æ€è§„åˆ’ã€‚</p>
<p>â€‹ <strong>æ­£ç¡®æ€è·¯</strong>ï¼š
æˆ‘ä»¬å¯ä»¥å°†ä¸Šè¿°é—®é¢˜è½¬åŒ–ä¸ºï¼Œä»å‰<code>i</code>ä¸ªæ•°å­—ä¸­ï¼Œé€‰å–ä¸€å®šçš„æ•°å­—ï¼Œä½¿å¾—å’Œä¸º<code>j</code>ï¼Œå¯èƒ½çš„æ–¹æ³•æ•°é‡ã€‚è¿™ä¸ªå’Œä¸Šé¢çš„åŒºåˆ«åœ¨äºï¼Œæˆ‘ä»¬ä¸å†è€ƒè™‘æ·»åŠ æ­£è´Ÿå·ï¼Œè€Œæ˜¯ç›´æ¥æŠŠä¸Šè¿°é—®é¢˜è½¬æ¢ä¸ºäº†ä¸€ä¸ªèƒŒåŒ…é—®é¢˜ã€‚å› ä¸ºæˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœæ­£æ•°å’Œä¸º<code>j</code>ï¼Œé‚£ä¹ˆå‰©ä½™çš„è´Ÿæ•°å’Œä¸º<code>sum-j</code>ï¼Œ<code>sum</code>ä¸º<code>nums</code>æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ çš„å’Œã€‚é‚£ä¹ˆæœ€ååªéœ€è¦æ»¡è¶³å¦‚ä¸‹å…¬å¼ï¼š<code>2 * j - sum = target</code>ï¼Œå°±å¯ä»¥å¾—åˆ°æˆ‘ä»¬éœ€è¦çš„å¯¹åº”æ–¹æ³•çš„æ•°é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¦‚æœå®šä¹‰äºŒç»´æ•°ç»„<code>res</code>ï¼Œä»£è¡¨å‰<code>i</code>ä¸ªæ•°ï¼Œé€‰å–ä¸€å®šæ•°å­—ï¼Œå¾—åˆ°å’Œä¸º<code>j</code>çš„æ–¹æ³•æ•°ç›®ï¼Œé‚£ä¹ˆæˆ‘ä»¬æœ€å<code>res[nums.size()][(sum + target) / 2]</code>å³ä¸ºæˆ‘ä»¬æ‰€éœ€è¦çš„ç­”æ¡ˆã€‚ï¼ˆæ³¨ï¼šå¦‚æœ<code>sum+target</code>æ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆå¿…å®šä¸å­˜åœ¨ä»»ä½•ä¸€ç§æ–¹æ³•ï¼‰ã€‚</p>
<p>ä»¥ä¸‹ä¸ºåŠ¨æ€è§„åˆ’çš„å‡ ä¸ªé‡è¦å†…å®¹ï¼š</p>
<h5 id="åŠ¨æ€è§„åˆ’æ€æƒ³"><strong>åŠ¨æ€è§„åˆ’æ€æƒ³</strong>ï¼š</h5>
<pre><code>`res[i][j]`ï¼Œä»£è¡¨å‰`i`ä¸ªæ•°ï¼Œé€‰å–ä¸€å®šæ•°å­—ï¼Œå¾—åˆ°å’Œä¸º`j`çš„æ–¹æ³•æ•°ç›®</code></pre>
<h5 id="åˆå§‹åŒ–çŠ¶æ€"><strong>åˆå§‹åŒ–çŠ¶æ€</strong>ï¼š</h5>
<pre><code>`res[0][0-target] `éƒ½ç½®ä¸º0ï¼Œä¸” `res[0][0]` ç½®ä¸º 1</code></pre>
<h5 id="çŠ¶æ€è½¬ç§»æ–¹ç¨‹"><strong>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</strong>ï¼š</h5>
<p>â€‹
<code>res[i][j] = res[i-1][j] + res[i-1][j-ele] (if j - ele &gt;= 0)</code></p>
<p>â€‹ <code>res[i][j] = res[i-1][j] (if j - ele &lt; 0)</code></p>
<p>â€‹ <code>ele = nums[i-1]</code></p>
<h5 id="ä»£ç å¦‚ä¸‹"><strong>ä»£ç å¦‚ä¸‹</strong>ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findTargetSumWays</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            sum += nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">		</span><br><span class="line">        <span class="keyword">if</span>((sum+target) % <span class="number">2</span> != <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> need_size = (sum + target) / <span class="number">2</span>;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">res</span>(nums.<span class="built_in">size</span>()+<span class="number">1</span>,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(need_size+<span class="number">1</span>));</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–çŠ¶æ€ï¼š res[0][0-target] éƒ½ç½®ä¸º0ï¼Œä¸” res[0][0] ç½®ä¸º 1</span></span><br><span class="line">        <span class="comment">//çŠ¶æ€è½¬ç§»ï¼š res[i][j] = res[i-1][j] + res[i-1][j-ele] å‰ææ˜¯ j-ele å­˜åœ¨</span></span><br><span class="line">        <span class="comment">//å¦‚æœj-ele ä¸å­˜åœ¨ res[i][j] = res[i-1][j] </span></span><br><span class="line">        res[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=nums.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="type">int</span> ele = nums[i<span class="number">-1</span>];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=need_size;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(j &gt;= ele)&#123;</span><br><span class="line">                    res[i][j] = res[i<span class="number">-1</span>][j] + res[i<span class="number">-1</span>][j-ele];</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    res[i][j] = res[i<span class="number">-1</span>][j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res[nums.<span class="built_in">size</span>()][need_size];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="å‰‘æŒ‡-offer-ii-103.-æœ€å°‘çš„ç¡¬å¸æ•°ç›®"><a
href="https://leetcode-cn.com/problems/gaM7Ch/">å‰‘æŒ‡ Offer II 103.
æœ€å°‘çš„ç¡¬å¸æ•°ç›®</a></h4>
<p>ç»™å®šä¸åŒé¢é¢çš„ç¡¬å¸ coins å’Œä¸€ä¸ªæ€»é‡‘é¢
amountã€‚ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—å¯ä»¥å‡‘æˆæ€»é‡‘é¢æ‰€éœ€çš„æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ç§ç¡¬å¸ç»„åˆèƒ½ç»„æˆæ€»é‡‘é¢ï¼Œè¿”å›
-1ã€‚</p>
<p>ä½ å¯ä»¥è®¤ä¸ºæ¯ç§ç¡¬å¸çš„æ•°é‡æ˜¯æ— é™çš„ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šcoins = [1, 2, 5], amount = 11</span><br><span class="line">è¾“å‡ºï¼š3 </span><br><span class="line">è§£é‡Šï¼š11 = 5 + 5 + 1</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯-1"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>å…¶å®æœ¬é¢˜å°±æ˜¯ä¸€é“å®Œå…¨èƒŒåŒ…é—®é¢˜ï¼Œç¨åŠ è½¬æ¢å³å¯ï¼š</p>
<h5 id="å®šä¹‰"><strong>å®šä¹‰</strong>ï¼š</h5>
<pre><code>å‰`i`ä¸ªç¡¬å¸ï¼Œæ„æˆé‡‘é¢`j`ï¼Œæ‰€éœ€è¦çš„æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°ä¸º `res[i][j]`</code></pre>
<h5 id="åˆå§‹åŒ–çŠ¶æ€-1"><strong>åˆå§‹åŒ–çŠ¶æ€</strong>ï¼š</h5>
<pre><code>`res[0][0-amount] = -1  res[0][0] = 0`</code></pre>
<h5 id="çŠ¶æ€è½¬ç§»"><strong>çŠ¶æ€è½¬ç§»</strong>ï¼š</h5>
<pre><code>`res[i][j] = min( res[i][j-ele] + 1 , res[i-1][j] )`</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºæˆ‘ä»¬åˆå§‹åŒ–ä¸å­˜åœ¨è§£çš„å€¼ä¸º-1ï¼Œæ‰€ä»¥åœ¨åç»­çŠ¶æ€è½¬ç§»åˆ¤å®šçš„æ—¶å€™ï¼Œæƒ…å†µè¾ƒå¤šï¼Œå…·ä½“è§ä»£ç ï¼š</p>
<h5 id="è§£é¢˜ä»£ç ">è§£é¢˜ä»£ç ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">coinChange</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; coins, <span class="type">int</span> amount)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å‰iä¸ªç¡¬å¸ï¼Œæ„æˆé‡‘é¢jï¼Œæ‰€éœ€è¦çš„æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°ä¸º res[i][j]</span></span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–çŠ¶æ€ï¼š res[0][0-amount] = -1  res[0][0] = 0</span></span><br><span class="line">        <span class="comment">// çŠ¶æ€è½¬ç§»ï¼š res[i][j] = min( res[i][j-ele] + 1 , res[i-1][j] )</span></span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">res</span>(coins.<span class="built_in">size</span>() + <span class="number">1</span>,<span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(amount+<span class="number">1</span>,<span class="number">-1</span>));</span><br><span class="line">        res[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=coins.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="type">int</span> ele = coins[i<span class="number">-1</span>];</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;=amount;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(j &gt;= ele)&#123;</span><br><span class="line">                    <span class="type">int</span> r1 = res[i<span class="number">-1</span>][j];</span><br><span class="line">                    <span class="type">int</span> r2 = res[i][j-ele];</span><br><span class="line">                    <span class="keyword">if</span>(r1 == <span class="number">-1</span> &amp;&amp; r2 != <span class="number">-1</span>)&#123;  <span class="comment">// r1 ä¸å­˜åœ¨ , r2 å­˜åœ¨ï¼Œé‚£ä¹ˆå‚ç…§r2 + 1</span></span><br><span class="line">                        res[i][j] = r2+<span class="number">1</span>;</span><br><span class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(r1 != <span class="number">-1</span> &amp;&amp; r2 == <span class="number">-1</span>)&#123; <span class="comment">// r1 å­˜åœ¨ , r2 ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå‚ç…§ r1</span></span><br><span class="line">                        res[i][j] = r1; </span><br><span class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(r1 != <span class="number">-1</span> &amp;&amp; r2 != <span class="number">-1</span>)&#123;  <span class="comment">// r1 å­˜åœ¨ , r2 å­˜åœ¨ï¼Œé‚£ä¹ˆå‚ç…§min(r2+1,r1)</span></span><br><span class="line">                        res[i][j] = <span class="built_in">min</span>(r1,r2+<span class="number">1</span>);</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;   <span class="comment">// r1 ä¸å­˜åœ¨ , r2 ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä¹Ÿä¸å­˜åœ¨  = -1</span></span><br><span class="line">                        res[i][j] = <span class="number">-1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    res[i][j] = res[i<span class="number">-1</span>][j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res[coins.<span class="built_in">size</span>()][amount];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>åŠ¨æ€è§„åˆ’ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>dynamic programming</tag>
      </tags>
  </entry>
  <entry>
    <title>é“¾è¡¨ç³»åˆ—â€”â€”é“¾è¡¨é—®é¢˜çš„å¸¸è§æŠ€å·§</title>
    <url>/2022/02/04/bb6e8e482b2b/</url>
    <content><![CDATA[<h3 id="ä¸€å‰‘æŒ‡-offer-ii-022.-é“¾è¡¨ä¸­ç¯çš„å…¥å£èŠ‚ç‚¹">ä¸€ã€<a
href="https://leetcode-cn.com/problems/c32eOV/">å‰‘æŒ‡ Offer II 022.
é“¾è¡¨ä¸­ç¯çš„å…¥å£èŠ‚ç‚¹</a></h3>
<p><strong>é¢˜ç›®ç®€å•æè¿°</strong>ï¼š</p>
<p>â€‹ ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œéœ€è¦è¿”å›é“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚
ä»é“¾è¡¨çš„å¤´èŠ‚ç‚¹å¼€å§‹æ²¿ç€ next
æŒ‡é’ˆè¿›å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸ºç¯çš„å…¥å£èŠ‚ç‚¹ã€‚å¦‚æœé“¾è¡¨æ— ç¯ï¼Œåˆ™è¿”å› nullã€‚</p>
<p>â€‹ è¿›é˜¶ï¼šæ˜¯å¦å¯ä»¥ä½¿ç”¨ O(1) ç©ºé—´è§£å†³æ­¤é¢˜ï¼Ÿ</p>
<h5 id="è§£é¢˜æ€è·¯"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>â€‹
æœ¬é¢˜æœ¬èº«æƒ³è¦è§£ç­”ååˆ†ç®€å•ï¼Œå°†å…¶æ”¾å…¥åšå®¢ä¸­æ•´ç†æ˜¯æƒ³è®°å½•æˆ‘ä»¬åº”è¯¥å¦‚ä½•åˆ©ç”¨O(1)ç©ºé—´å»è§£å†³è¿™ä¸ªé¢˜ç›®å‘¢ï¼Ÿ</p>
<p>â€‹ <strong>å¿«æ…¢æŒ‡é’ˆæ³•</strong>ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œfast ä¸
slowã€‚å®ƒä»¬èµ·å§‹éƒ½ä½äºé“¾è¡¨çš„å¤´éƒ¨ã€‚éšåï¼Œslow æŒ‡é’ˆæ¯æ¬¡å‘åç§»åŠ¨ä¸€ä¸ªä½ç½®ï¼Œè€Œ
fast æŒ‡é’ˆå‘åç§»åŠ¨ä¸¤ä¸ªä½ç½®ã€‚å¦‚æœé“¾è¡¨ä¸­å­˜åœ¨ç¯ï¼Œåˆ™ fast æŒ‡é’ˆæœ€ç»ˆå°†å†æ¬¡ä¸
slow æŒ‡é’ˆåœ¨ç¯ä¸­ç›¸é‡ã€‚</p>
<p>â€‹
å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå³å¯éå¸¸å¥½çš„ç†è§£å¦‚ä¸‹ï¼šé‚£ä¹ˆï¼Œåˆè¯¥å¦‚ä½•åˆ¤æ–­å…¥ç¯ç‚¹çš„ä½ç½®å‘¢ï¼Ÿæˆ‘ä»¬å…ˆä¸Šç»“è®ºï¼šç»è¿‡æ•°å­¦æ¨æ–­å¯ä»¥å¾—çŸ¥ï¼š</p>
<p>â€‹
<strong>å‡è®¾å¿«æ…¢æŒ‡é’ˆç›¸é‡æ—¶ï¼ŒfastæŒ‡é’ˆå·²ç»èµ°å®Œäº†ç¯çš„nåœˆï¼Œé‚£ä¹ˆ</strong></p>
<p>â€‹ <strong>ä»ç›¸é‡ç‚¹åˆ°å…¥ç¯ç‚¹çš„è·ç¦»åŠ ä¸Š nâˆ’1
åœˆçš„ç¯é•¿ï¼Œæ°å¥½ç­‰äºä»é“¾è¡¨å¤´éƒ¨åˆ°å…¥ç¯ç‚¹çš„è·ç¦»ã€‚</strong></p>
<p>â€‹
<strong>æ ¹æ®æ­¤ç»“è®ºï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å¿«æ…¢æŒ‡é’ˆç›¸é‡æ—¶ï¼Œå†åŠ ä¸€ä¸ªptræŒ‡é’ˆï¼Œè®©å…¶æŒ‡å‘é“¾è¡¨å¤´éƒ¨ï¼›éšåï¼Œå®ƒå’Œ
slow æŒ‡é’ˆæ¯æ¬¡å‘åç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚æœ€ç»ˆï¼Œå®ƒä»¬ä¼šåœ¨å…¥ç¯ç‚¹ç›¸é‡ã€‚</strong></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-02-04 ä¸‹åˆ2.06.49.png" alt="æˆªå±2022-02-04 ä¸‹åˆ2.06.49" style="zoom:33%;" /></p>
<p>â€‹ <strong>ç»“è®ºè¯æ˜</strong>ï¼šè®¾é“¾è¡¨ä¸­ç¯å¤–éƒ¨åˆ†çš„é•¿åº¦ä¸º aã€‚slow
æŒ‡é’ˆè¿›å…¥ç¯åï¼Œåˆèµ°äº† b çš„è·ç¦»ä¸ fast ç›¸é‡ã€‚æ­¤æ—¶ï¼Œfast æŒ‡é’ˆå·²ç»èµ°å®Œäº†ç¯çš„
n åœˆï¼Œå› æ­¤å®ƒèµ°è¿‡çš„æ€»è·ç¦»ä¸º <span class="math inline">\(a + n \times
(b+c) + b\)</span> ,è€Œæ­¤æ—¶ï¼ŒslowæŒ‡é’ˆèµ°è¿‡çš„æ€»è·ç¦»ä¸º <span
class="math inline">\(a + b\)</span>ã€‚</p>
<p>â€‹
<strong>ã€æ­¤å¤„éœ€è¦è§£é‡Šä¸€ä¸‹ï¼šä¸ºä½•fastä¸slowç›¸é‡æ—¶ï¼Œslowå¿…å®šè¿˜åœ¨èµ°ç¬¬ä¸€åœˆï¼Ÿã€‘</strong>ï¼ˆæˆ‘ä»¬å‡è®¾fastå’Œslowå¦‚æœåŒæ—¶ä»å…¥ç¯ç‚¹å‡ºå‘ï¼Œç”±äºé€Ÿåº¦æ˜¯2å€çš„å…³ç³»ï¼Œslowèµ°å®Œ1åœˆçš„æ—¶å€™ï¼Œfaståˆšå¥½èµ°å®Œ2åœˆï¼Œä»–ä»¬ä¼šåœ¨èµ·ç‚¹ç›¸é‡ã€‚ä½†æ˜¯ç°åœ¨ï¼Œfastæ¯”slowå…ˆå…¥ç¯ï¼Œä¹Ÿå°±æ˜¯è¯´slowå…¥ç¯çš„æ—¶å€™ï¼Œfastä¸ç®¡åœ¨ç¯çš„å“ªé‡Œï¼Œè‚¯å®šèƒ½åœ¨slowèµ°å®Œä¸€åœˆå‰ï¼Œå°†å…¶è¿½ä¸Šã€‚ï¼‰</p>
<p>â€‹ ç”±äºfastæŒ‡é’ˆèµ°çš„é€Ÿåº¦æ˜¯slowæŒ‡é’ˆçš„2å€ï¼Œé‚£ä¹ˆå¯ä»¥å¾—åˆ°ä»¥ä¸‹ç­‰å¼ï¼š$ a + n
(b+c) = 2 (a + b)$ æ‰€ä»¥å¯ä»¥å¾—åˆ°å¦‚ä¸‹ç»“è®ºï¼š $ a = c + (n-1) (b+c)$
,è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œæœ€å¼€å§‹è¯´çš„ï¼Œ ä»ç›¸é‡ç‚¹åˆ°å…¥ç¯ç‚¹çš„è·ç¦» + (n-1)
åœˆç¯çš„è·ç¦»ï¼Œç­‰äºé“¾è¡¨å¤´åˆ°å…¥ç¯ç‚¹çš„è·ç¦»ã€‚</p>
<p>â€‹
é‚£ä¹ˆä¸ºä»€ä¹ˆè¯´ï¼Œå¦‚æœç›¸é‡çš„æ—¶å€™ï¼Œpträ»é“¾è¡¨å¤´å‡ºå‘ï¼Œptrå’Œslowå¿…å®šåœ¨å…¥ç¯å£ç›¸é‡å‘¢ï¼Ÿå› ä¸ºaçš„è·ç¦»æ˜¯cåŠ ä¸Šè®¸å¤šåœˆç¯çš„è·ç¦»ï¼Œæ‰€ä»¥å½“ptråˆ°è¾¾é“¾è¡¨å…¥ç¯å£çš„æ—¶å€™ï¼Œæ—¶é—´ç»è¿‡äº†aï¼Œæ­¤æ—¶slowå¿…å®šå‡ºç°åœ¨å…¥ç¯å£å¤„ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ ¹æ®æ­¤æ¥åˆ¤æ–­ï¼Œå…¥ç¯å£çš„ä½ç½®æ˜¯å“ªä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>
<h3 id="äºŒå‰‘æŒ‡-offer-ii-023.-ä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªé‡åˆèŠ‚ç‚¹">äºŒã€<a
href="https://leetcode-cn.com/problems/3u1WK4/">å‰‘æŒ‡ Offer II 023.
ä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªé‡åˆèŠ‚ç‚¹</a></h3>
<p><strong>ç®€å•é¢˜ç›®æè¿°</strong>ï¼š</p>
<p>â€‹ ç»™å®šä¸¤ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ headA å’Œ headB
ï¼Œè¯·æ‰¾å‡ºå¹¶è¿”å›ä¸¤ä¸ªå•é“¾è¡¨ç›¸äº¤çš„èµ·å§‹èŠ‚ç‚¹ã€‚å¦‚æœä¸¤ä¸ªé“¾è¡¨æ²¡æœ‰äº¤ç‚¹ï¼Œè¿”å› null
ã€‚è¯¦ç»†è§åŸç½‘å€</p>
<p><strong>è§£é¢˜æ€è·¯</strong>ï¼š</p>
<p>å‚è€ƒï¼šhttps://leetcode-cn.com/problems/3u1WK4/solution/liang-ge-lian-biao-de-di-yi-ge-zhong-he-0msfg/</p>
<p>æ­¤é¢˜éš¾ç‚¹åœ¨äºè®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ O(n) ã€ä»…ç”¨ O(1) å†…å­˜çš„è§£å†³æ–¹æ¡ˆï¼Ÿ</p>
<p>â€‹
æˆ‘ä»¬å¯ä»¥è€ƒè™‘åŒæŒ‡é’ˆçš„æ–¹æ³•å¯¹ä¸¤ä¸ªé“¾è¡¨è¿›è¡Œæ±‚è§£ï¼Œä½†æ˜¯åŒæŒ‡é’ˆçš„éš¾ç‚¹åœ¨äºï¼Œä¸¤æ¡é“¾è¡¨çš„é•¿åº¦ä¸åŒï¼Œæ— æ³•åšåˆ°ä¸€ä¸€å¯¹åº”ã€‚æˆ‘ä»¬å…ˆç»™å‡º<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<p>â€‹ å½“é“¾è¡¨ headA å’Œ headB éƒ½ä¸ä¸ºç©ºæ—¶ï¼Œåˆ›å»ºä¸¤ä¸ªæŒ‡é’ˆ pA å’Œ pB
ï¼Œåˆå§‹æ—¶åˆ†åˆ«æŒ‡å‘ä¸¤ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ headAå’Œ headB
ï¼Œç„¶åå°†ä¸¤ä¸ªæŒ‡é’ˆä¾æ¬¡éå†ä¸¤ä¸ªé“¾è¡¨çš„æ¯ä¸ªèŠ‚ç‚¹ã€‚å…·ä½“åšæ³•å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ¯æ­¥æ“ä½œéœ€è¦åŒæ—¶æ›´æ–°æŒ‡é’ˆ pA å’Œ pBã€‚</li>
<li>å¦‚æœæŒ‡é’ˆ pA ä¸ä¸ºç©ºï¼Œåˆ™å°†æŒ‡é’ˆ pA ç§»åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼›å¦‚æœæŒ‡é’ˆ pB
ä¸ä¸ºç©ºï¼Œåˆ™å°†æŒ‡é’ˆ pB ç§»åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚</li>
<li>å¦‚æœæŒ‡é’ˆ pA ä¸ºç©ºï¼Œåˆ™å°†æŒ‡é’ˆ pA ç§»åˆ°é“¾è¡¨ headB çš„å¤´èŠ‚ç‚¹ï¼›å¦‚æœæŒ‡é’ˆ pB
ä¸ºç©ºï¼Œåˆ™å°†æŒ‡é’ˆ pB ç§»åˆ°é“¾è¡¨ headA çš„å¤´èŠ‚ç‚¹ã€‚</li>
<li>å½“æŒ‡é’ˆ pA å’Œ pB æŒ‡å‘åŒä¸€ä¸ªèŠ‚ç‚¹æˆ–è€…éƒ½ä¸ºç©ºæ—¶ï¼Œè¿”å›å®ƒä»¬æŒ‡å‘çš„èŠ‚ç‚¹æˆ–è€…
nullã€‚</li>
</ul>
<p>â€‹
<strong>ä¹ä¸€çœ‹ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªéå¸¸å¥‡æ€ªçš„ç‚¹</strong>ï¼Œå°±æ˜¯å¦‚æœæŒ‡é’ˆpAä¸ºç©ºï¼Œé‚£ä¹ˆå°†æŒ‡é’ˆpAç§»åŠ¨åˆ°é“¾è¡¨headBçš„å¤´èŠ‚ç‚¹ã€‚ä½†å…¶å®ä»”ç»†ä¸€æƒ³ï¼Œè¿™æ ·å­æ˜¯æ²¡é—®é¢˜çš„ã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºè¿™ä¸ªæ“ä½œï¼Œæˆ‘ä»¬æ‰èƒ½å¤Ÿå¾—ä»¥è§£å†³ä¸¤ä¸ªé“¾è¡¨é•¿åº¦ä¸ä¸€è‡´å¯¼è‡´çš„ä¸å¯¹åº”é—®é¢˜ã€‚è¾ƒä¸ºè¯¦ç»†çš„è¯æ˜å¦‚ä¸‹ï¼š</p>
<p>â€‹
æˆ‘ä»¬å…ˆè€ƒè™‘<strong>ä¸¤é“¾è¡¨ç›¸äº¤çš„æƒ…å†µ</strong>ï¼Œå¦‚æœä¸¤é“¾è¡¨é•¿åº¦ä¸€è‡´ï¼Œé‚£ä¸éœ€è¦æƒ³ï¼ŒpAå’ŒpBå¿…å®šåŒæ—¶åˆ°è¾¾æŸä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>
<p>â€‹
å¦‚æœä¸¤é“¾è¡¨é•¿åº¦ä¸ä¸€è‡´ï¼Œè¿™æ ·å­çš„è¯ï¼Œæˆ‘ä»¬å‡è®¾é“¾è¡¨Aã€Bé•¿åº¦ä¸ºmå’Œnï¼ŒAã€Bçš„ä¸ç›¸äº¤éƒ¨åˆ†èŠ‚ç‚¹æ•°ä¸ºaï¼Œbï¼Œç›¸äº¤éƒ¨åˆ†èŠ‚ç‚¹æ•°ä¸ºcï¼Œé‚£ä¹ˆm
= a + c , n = b + c.
pAå’ŒpBç¬¬ä¸€ééå†å®Œå„è‡ªçš„é“¾è¡¨åï¼Œä»–ä»¬ä¸æ˜¯åŒæ—¶åˆ°è¾¾å°¾éƒ¨èŠ‚ç‚¹çš„ï¼Œä½†æ˜¯å½“pAéå†å®Œ
a + c + bä¸ªèŠ‚ç‚¹ï¼Œå½“pBéå†å®Œb + c +
aä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œä¸¤è€…å°±ä¼šåŒæ—¶åˆ°è¾¾ç›¸äº¤çš„èŠ‚ç‚¹ã€‚</p>
<p>â€‹
å†è¯æ˜<strong>ä¸¤é“¾è¡¨ä¸ç›¸äº¤çš„æƒ…å†µ</strong>ï¼Œå¦‚æœä¸¤é“¾è¡¨é•¿åº¦ä¸€è‡´ï¼Œé‚£ä¸éœ€è¦æƒ³ï¼ŒpAå’ŒpBå¿…å®šåŒæ—¶åˆ°è¾¾æœ€ç»ˆçš„NULLèŠ‚ç‚¹ã€‚</p>
<p>â€‹
å¦‚æœä¸¤é“¾è¡¨é•¿åº¦ä¸ä¸€è‡´ï¼Œè¿™æ ·å­çš„è¯ï¼Œæˆ‘ä»¬å‡è®¾é“¾è¡¨Aã€Bçš„é•¿åº¦å„ä½må’Œnï¼Œå½“pA
éå†å®Œ m + nä¸ªèŠ‚ç‚¹ï¼ŒpBéå†å®Œ n +
mä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œå¿…å®šåŒæ—¶åˆ°è¾¾å°¾éƒ¨çš„NULLèŠ‚ç‚¹ã€‚</p>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>é“¾è¡¨ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>linked list</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°ç»„ç³»åˆ—â€”â€”å€¼å’Œä¸‹æ ‡ä¹‹å·®éƒ½åœ¨ç»™å®šèŒƒå›´å†…</title>
    <url>/2022/02/26/994b03ade281/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-057.-å€¼å’Œä¸‹æ ‡ä¹‹å·®éƒ½åœ¨ç»™å®šçš„èŒƒå›´å†…"><a
href="https://leetcode-cn.com/problems/7WqeDu/">å‰‘æŒ‡ Offer II 057.
å€¼å’Œä¸‹æ ‡ä¹‹å·®éƒ½åœ¨ç»™å®šçš„èŒƒå›´å†…</a></h4>
<p>â€‹ ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸¤ä¸ªæ•´æ•° k å’Œ t ã€‚è¯·ä½ åˆ¤æ–­æ˜¯å¦å­˜åœ¨
ä¸¤ä¸ªä¸åŒä¸‹æ ‡ i å’Œ jï¼Œä½¿å¾— abs(nums[i] - nums[j]) &lt;= t ï¼ŒåŒæ—¶åˆæ»¡è¶³
abs(i - j) &lt;= k ã€‚</p>
<p>â€‹ å¦‚æœå­˜åœ¨åˆ™è¿”å› trueï¼Œä¸å­˜åœ¨è¿”å› falseã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [1,2,3,1], k = 3, t = 0</span><br><span class="line">è¾“å‡ºï¼štrue</span><br></pre></td></tr></table></figure>
<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [1,0,1,1], k = 1, t = 2</span><br><span class="line">è¾“å‡ºï¼štrue</span><br></pre></td></tr></table></figure>
<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [1,5,9,1,5,9], k = 2, t = 3</span><br><span class="line">è¾“å‡ºï¼šfalse</span><br></pre></td></tr></table></figure>
<p>æç¤ºï¼š</p>
<pre><code>0 &lt;= nums.length &lt;= 2 * 10^4
-2^31 &lt;= nums[i] &lt;= 2^31 - 1
0 &lt;= k &lt;= 10^4
0 &lt;= t &lt;= 2^31 - 1</code></pre>
<p>å‚è€ƒå®˜æ–¹é¢˜è§£ï¼šhttps://leetcode-cn.com/problems/7WqeDu/solution/zhi-he-xia-biao-zhi-chai-du-zai-gei-ding-94ei/</p>
<p><strong>è§£é¢˜æ€è·¯</strong>ï¼š</p>
<p>â€‹
å¯¹äºåºåˆ—ä¸­æ¯ä¸€ä¸ªå…ƒç´ xå·¦ä¾§çš„æœ€å¤škä¸ªå…ƒç´ è€Œè¨€ï¼Œå¦‚æœè¿™kä¸ªå…ƒç´ ä¸­å­˜åœ¨ä¸€ä¸ªå…ƒç´ è½åœ¨åŒºé—´<code>[x-t,x+t]</code>ä¸­ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ‰¾åˆ°ä¸€å¯¹ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ã€‚<strong>æ³¨æ„åˆ°å¯¹äºä¸¤ä¸ªç›¸é‚»çš„å…ƒç´ è€Œè¨€ï¼Œå®ƒä»¬å·¦ä¾§çš„kä¸ªå…ƒç´ ä¸­æœ‰k-1ä¸ªæ˜¯é‡åˆçš„ï¼Œæ‰€ä»¥å¯ä»¥è€ƒè™‘æ»‘åŠ¨çª—å£çš„æ€è·¯ï¼Œç»´æŠ¤ä¸€ä¸ªå¤§å°ä¸ºkçš„æ»‘åŠ¨çª—å£ï¼Œæ¯æ¬¡éå†åˆ°å…ƒç´ xçš„æ—¶å€™ï¼Œæ»‘åŠ¨çª—å£ä¸­åŒ…å«xå‰é¢çš„kä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬åªéœ€è¦æ£€æŸ¥çª—å£ä¸­æ˜¯å¦æœ‰å…ƒç´ æ»¡è¶³è¦æ±‚å³å¯ã€‚</strong></p>
<p>â€‹
æ­¤æ—¶ï¼Œé—®é¢˜å°±æ¥äº†ï¼š<strong>å¦‚æœä½¿ç”¨é˜Ÿåˆ—ç»´æŠ¤æ»‘åŠ¨çª—å£å†…çš„å…ƒç´ ï¼Œç”±äºå…ƒç´ æ˜¯æ— åºçš„ï¼Œæˆ‘ä»¬åªèƒ½å¯¹äºæ¯ä¸ªå…ƒç´ éƒ½éå†ä¸€æ¬¡é˜Ÿåˆ—æ¥æ£€æŸ¥æ˜¯å¦æœ‰å…ƒç´ ç¬¦åˆæ¡ä»¶ã€‚</strong>å¦‚æœæ•°ç»„çš„é•¿åº¦ä¸º
nï¼Œåˆ™ä½¿ç”¨é˜Ÿåˆ—çš„æ—¶é—´å¤æ‚åº¦ä¸º
O(nk)ï¼Œè¿™æ ·è·Ÿæš´åŠ›æ±‚è§£æ²¡æœ‰åŒºåˆ«äº†ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ•°æ®ç»“æ„èƒ½å¤Ÿæ¥ç”¨äºç»´æŠ¤æ»‘åŠ¨çª—å£ï¼Œè¯¥å®¹å™¨éœ€è¦æ»¡è¶³ï¼š</p>
<ul>
<li>æ”¯æŒæ·»åŠ +åˆ é™¤å…ƒç´ </li>
<li>å†…éƒ¨å…ƒç´ æœ‰åºï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿåˆ¤æ–­æ˜¯å¦æœ‰æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ã€‚ï¼ˆå…·ä½“è€Œè¨€ï¼Œå¯¹äºå…ƒç´ 
xï¼Œå½“æˆ‘ä»¬å¸Œæœ›åˆ¤æ–­æ»‘åŠ¨çª—å£ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªæ•° y è½åœ¨åŒºé—´
<code>[x - t, x + t]</code>ä¸­ï¼Œåªéœ€è¦åˆ¤æ–­æ»‘åŠ¨çª—å£ä¸­æ‰€æœ‰å¤§äºç­‰äº xâˆ’t
çš„å…ƒç´ ä¸­çš„æœ€å°å…ƒç´ æ˜¯å¦å°äºç­‰äº x+t å³å¯ã€‚</li>
</ul>
<p><strong>æ³¨æ„</strong></p>
<p>â€‹ å¦‚æœå½“å‰æœ‰åºé›†åˆä¸­å­˜åœ¨ç›¸åŒå…ƒç´ ï¼Œé‚£ä¹ˆæ­¤æ—¶ç¨‹åºå°†ç›´æ¥è¿”å›
trueã€‚å› æ­¤æœ¬é¢˜ä¸­çš„æœ‰åºé›†åˆæ— éœ€å¤„ç†ç›¸åŒå…ƒç´ çš„æƒ…å†µã€‚</p>
<h5 id="å®˜æ–¹è§£é¢˜ä»£ç ">å®˜æ–¹è§£é¢˜ä»£ç ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">containsNearbyAlmostDuplicate</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> k, <span class="type">int</span> t)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = nums.<span class="built_in">size</span>();</span><br><span class="line">        set&lt;<span class="type">int</span>&gt; rec;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">auto</span> iter = rec.<span class="built_in">lower_bound</span>(<span class="built_in">max</span>(nums[i], INT_MIN + t) - t);</span><br><span class="line">            <span class="keyword">if</span> (iter != rec.<span class="built_in">end</span>() &amp;&amp; *iter &lt;= <span class="built_in">min</span>(nums[i], INT_MAX - t) + t) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            rec.<span class="built_in">insert</span>(nums[i]);</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= k) &#123;</span><br><span class="line">                rec.<span class="built_in">erase</span>(nums[i - k]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ä½œè€…ï¼šLeetCode-Solution</span><br><span class="line">é“¾æ¥ï¼šhttps:<span class="comment">//leetcode-cn.com/problems/7WqeDu/solution/zhi-he-xia-biao-zhi-chai-du-zai-gei-ding-94ei/</span></span><br><span class="line">æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰</span><br><span class="line">è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>æ•°ç»„ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>array</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°ç»„ç³»åˆ—â€”â€”æœ€é•¿æ–æ³¢é‚£å¥‘æ•°åˆ—</title>
    <url>/2022/02/21/aa9aa6191741/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-093.-æœ€é•¿æ–æ³¢é‚£å¥‘æ•°åˆ—"><a
href="https://leetcode-cn.com/problems/Q91FMA/">å‰‘æŒ‡ Offer II 093.
æœ€é•¿æ–æ³¢é‚£å¥‘æ•°åˆ—</a></h4>
<p>å¦‚æœåºåˆ— X_1, X_2, ..., X_n æ»¡è¶³ä¸‹åˆ—æ¡ä»¶ï¼Œå°±è¯´å®ƒæ˜¯ æ–æ³¢é‚£å¥‘å¼
çš„ï¼š</p>
<pre><code>n &gt;= 3
å¯¹äºæ‰€æœ‰ i + 2 &lt;= nï¼Œéƒ½æœ‰ X_i + X_&#123;i+1&#125; = X_&#123;i+2&#125;</code></pre>
<p>ç»™å®šä¸€ä¸ªä¸¥æ ¼é€’å¢çš„æ­£æ•´æ•°æ•°ç»„å½¢æˆåºåˆ— arr ï¼Œæ‰¾åˆ° arr
ä¸­æœ€é•¿çš„æ–æ³¢é‚£å¥‘å¼çš„å­åºåˆ—çš„é•¿åº¦ã€‚å¦‚æœä¸€ä¸ªä¸å­˜åœ¨ï¼Œè¿”å› 0 ã€‚</p>
<p>ç¤ºä¾‹ 1ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: arr = [1,2,3,4,5,6,7,8]</span><br><span class="line">è¾“å‡º: 5</span><br><span class="line">è§£é‡Š: æœ€é•¿çš„æ–æ³¢é‚£å¥‘å¼å­åºåˆ—ä¸º [1,2,3,5,8] ã€‚</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ 2ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: arr = [1,3,7,11,12,14,18]</span><br><span class="line">è¾“å‡º: 3</span><br><span class="line">è§£é‡Š: æœ€é•¿çš„æ–æ³¢é‚£å¥‘å¼å­åºåˆ—æœ‰ [1,11,12]ã€[3,11,14] ä»¥åŠ [7,11,18] ã€‚</span><br></pre></td></tr></table></figure>
<h5 id="è§£é¢˜æ€è·¯"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>â€‹
æœ¬é¢˜åœ¨LeetCodeä¸Šï¼Œå¤§å¤šé‡‡ç”¨åŠ¨æ€è§„åˆ’çš„æ–¹æ³•è§£å†³ï¼Œæˆ‘å€Ÿé‰´äº†éƒ¨åˆ†æ€è·¯åï¼Œå‘ç°å…¶å®å¯ä»¥ç”¨ä¸åŠ¨æ€è§„åˆ’æ—¶é—´å¤æ‚åº¦ç±»ä¼¼çš„ç®—æ³•è§£å†³ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>â€‹
<strong>å¯¹äºä¸€ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—æ¥è¯´ï¼Œå…¶æ€§è´¨ç»™å®ƒå¸¦æ¥äº†ä¸€ä¸ªéå¸¸é‡è¦ç‰¹æ€§ï¼šä¹Ÿå°±æ˜¯æˆ‘ä»¬åªè¦çŸ¥é“æ–æ³¢é‚£å¥‘æ•°åˆ—ä¸­çš„æœ€åä¸¤ä¸ªæ•°ï¼Œæˆ–è€…å‰ä¸¤ä¸ªæ•°ï¼Œäº¦æˆ–è€…ä¸­é—´çš„ä»»æ„çš„è¿ç»­çš„ä¸¤ä¸ªæ•°ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿç¡®å®šä¸€æ•´ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—çš„å…ƒç´ </strong></p>
<p>â€‹
ä¸¾ä¾‹è€Œè¨€ï¼Œæˆ‘ä»¬çŸ¥é“ä¸€ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—ä¸­ï¼Œæœ‰ä¸¤ä¸ªè¿ç»­çš„æ•°ä¸º5ï¼Œ8ï¼Œé‚£ä¹ˆæ•´ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—å‰é¢å¯èƒ½æ‹¥æœ‰çš„æ•°ä¸º3ï¼Œå†å‰é¢å¯èƒ½çš„æ•°ä¸º2ï¼Œå†å‰é¢å¯èƒ½çš„æ•°ä¸º1ã€‚åä¹‹ï¼Œå†åé¢çš„æ•°ä¸º13ï¼Œå†åé¢çš„æ•°ä¸º21ï¼Œç­‰ç­‰ã€‚</p>
<p>â€‹
ä¹‹æ‰€ä»¥ç§°ä¹‹ä¸ºå¯èƒ½çš„æ•°ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬å¹¶ä¸çŸ¥é“æ–æ³¢é‚£å¥‘æ•°åˆ—çš„é•¿åº¦ï¼Œæ‰€ä»¥å¯èƒ½ä¸å­˜åœ¨è¿™äº›æ•°ã€‚æ”¾åˆ°è¿™é“é¢˜ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œiå’Œjï¼Œéå†arrä¸­æ‰€æœ‰çš„å…ƒç´ ï¼Œä¾‹å¦‚ï¼šå½“i=2ï¼Œj=4çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å‡è®¾arr[i]å’Œarr[j]æ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—çš„æœ€åä¸¤ä¸ªæ•°ï¼Œç„¶åå¾ªç¯çš„å‘å‰è®¡ç®—ï¼Œè§‚å¯Ÿarrä¸­æ˜¯å¦æœ‰æ»¡è¶³æ¡ä»¶çš„å‰é¢çš„æ•°ã€‚</p>
<p>â€‹
éå†æ•´ä¸ªæ•°åˆ—çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n^2)ï¼Œè€ŒæŸ¥æ‰¾arrä¸­æ˜¯å¦æœ‰æ»¡è¶³æ¡ä»¶çš„æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Hashè¡¨æ¥å®Œæˆï¼Œå…ˆå†ä»£ç å¼€å§‹å¤„ï¼Œç”¨O(n)çš„æ—¶é—´ï¼Œè¿›è¡Œæ’å…¥ï¼Œåç»­æŸ¥æ‰¾éƒ½åªéœ€è¦O(1)çš„æ—¶é—´ã€‚</p>
<h5 id="è§£é¢˜ä»£ç "><strong>è§£é¢˜ä»£ç </strong>ï¼š</h5>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">lenLongestFibSubseq</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; arr)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> n = arr.<span class="built_in">size</span>();</span><br><span class="line">      	<span class="comment">//æ„å»ºhashè¡¨ï¼Œä»¥ä¾¿åç»­æŸ¥æ‰¾</span></span><br><span class="line">        unordered_map&lt;<span class="type">int</span>,<span class="type">int</span>&gt; m;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            m[arr[i]] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      	<span class="comment">//éå†iï¼Œjï¼Œè®¡ç®—ä»¥arr[i]å’Œarr[j]ä¸ºæœ€åä¸¤ä¸ªå…ƒç´ çš„æ–æ³¢é‚£å¥‘æ•°åˆ—çš„é•¿åº¦</span></span><br><span class="line">        <span class="type">int</span> maxLen = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;n;j++)&#123;</span><br><span class="line">                <span class="type">int</span> res = <span class="built_in">calculateMaxLen</span>(arr[i],arr[j],m);</span><br><span class="line">                <span class="keyword">if</span>( res &gt; maxLen)&#123;</span><br><span class="line">                    maxLen = res;</span><br><span class="line">                &#125;   </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxLen;</span><br><span class="line">    &#125;</span><br><span class="line">		</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">calculateMaxLen</span><span class="params">(<span class="type">int</span> ele1,<span class="type">int</span> ele2,unordered_map&lt;<span class="type">int</span>,<span class="type">int</span>&gt; &amp;m)</span></span>&#123;</span><br><span class="line">        <span class="type">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="type">int</span> len = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæ‰¾ä¸åˆ°çš„è¯ï¼Œé€€å‡ºå¾ªç¯</span></span><br><span class="line">            <span class="keyword">if</span>(ele2 - ele1 &gt;= ele1) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span>(m.<span class="built_in">find</span>(ele2-ele1) == m.<span class="built_in">end</span>()) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//å¦‚æœæ‰¾åˆ°äº†,è¿­ä»£ï¼šç»§ç»­å¾ªç¯</span></span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">                <span class="type">int</span> tmp = ele2-ele1;</span><br><span class="line">                ele2 = ele1;</span><br><span class="line">                ele1 = tmp;</span><br><span class="line">                len++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!flag) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> len;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>æ•°ç»„ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>array</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°ç»„ç³»åˆ—â€”â€”è¿ç»­å­ä¸²é—®é¢˜</title>
    <url>/2022/02/02/0f0611fa7b0b/</url>
    <content><![CDATA[<h4
id="æ³¨æ„è¿ç»­å­ä¸²é—®é¢˜è¾ƒä¸ºå¸¸è§çš„ä¸¤ä¸ªæŠ€å·§ä¸ºæ»‘åŠ¨çª—å£æ³•ä¸å‰ç¼€å’Œæ»‘åŠ¨çª—å£æ³•è§£ç›¸å…³å­æ•°ç»„é—®é¢˜ä¸€èˆ¬è€Œè¨€éœ€è¦æ•°ç»„å†…å…ƒç´ éƒ½ä¸ºæ­£æ•´æ•°å¦‚æœæ•°ç»„å†…å…ƒç´ å­˜åœ¨è´Ÿæ•°çš„è¯æ»‘åŠ¨çª—å£æ˜¯æ— æ³•å¤„ç†ç›¸å…³çš„è´Ÿæ•°æ ·ä¾‹çš„éœ€è¦é‡‡ç”¨å‰ç¼€å’Œçš„æŠ€å·§è¿›è¡Œæ±‚è§£">æ³¨æ„ï¼šè¿ç»­å­ä¸²é—®é¢˜è¾ƒä¸ºå¸¸è§çš„ä¸¤ä¸ªæŠ€å·§ä¸ºï¼šæ»‘åŠ¨çª—å£æ³•ä¸å‰ç¼€å’Œï¼Œæ»‘åŠ¨çª—å£æ³•è§£ç›¸å…³å­æ•°ç»„é—®é¢˜ï¼Œä¸€èˆ¬è€Œè¨€éœ€è¦æ•°ç»„å†…å…ƒç´ éƒ½ä¸ºæ­£æ•´æ•°ï¼Œå¦‚æœæ•°ç»„å†…å…ƒç´ å­˜åœ¨è´Ÿæ•°çš„è¯ï¼Œæ»‘åŠ¨çª—å£æ˜¯æ— æ³•å¤„ç†ç›¸å…³çš„è´Ÿæ•°æ ·ä¾‹çš„ï¼Œéœ€è¦é‡‡ç”¨å‰ç¼€å’Œçš„æŠ€å·§è¿›è¡Œæ±‚è§£ã€‚</h4>
<h3 id="ä¸€å‰‘æŒ‡-offer-ii-008.-å’Œå¤§äºç­‰äº-target-çš„æœ€çŸ­å­æ•°ç»„">ä¸€ã€<a
href="https://leetcode-cn.com/problems/2VG8Kg/">å‰‘æŒ‡ Offer II 008.
å’Œå¤§äºç­‰äº target çš„æœ€çŸ­å­æ•°ç»„</a></h3>
<p><strong>ä¾‹é¢˜1æè¿°ï¼š</strong></p>
<p>â€‹ ç»™å®šä¸€ä¸ªå«æœ‰ n ä¸ªæ­£æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ªæ­£æ•´æ•° target ã€‚</p>
<p>â€‹ æ‰¾å‡ºè¯¥æ•°ç»„ä¸­æ»¡è¶³å…¶å’Œ â‰¥ target çš„é•¿åº¦æœ€å°çš„è¿ç»­å­æ•°ç»„ [numsl,
numsl+1, ..., numsr-1, numsr]
ï¼Œå¹¶è¿”å›å…¶é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œè¿”å› 0 ã€‚</p>
<ul>
<li><p>ç¤ºä¾‹ 1ï¼š</p>
<ul>
<li>è¾“å…¥ï¼štarget = 7, nums = [2,3,1,2,4,3]</li>
<li>è¾“å‡ºï¼š2</li>
<li>è§£é‡Šï¼šå­æ•°ç»„ [4,3] æ˜¯è¯¥æ¡ä»¶ä¸‹çš„é•¿åº¦æœ€å°çš„å­æ•°ç»„ã€‚</li>
</ul></li>
<li><p>ç¤ºä¾‹ 2ï¼š</p>
<ul>
<li>è¾“å…¥ï¼štarget = 4, nums = [1,4,4]</li>
<li>è¾“å‡ºï¼š1</li>
</ul></li>
<li><p>ç¤ºä¾‹ 3ï¼š</p>
<ul>
<li>è¾“å…¥ï¼štarget = 11, nums = [1,1,1,1,1,1,1,1]</li>
<li>è¾“å‡ºï¼š0</li>
</ul></li>
<li><p>æç¤ºï¼š</p>
<p>1 &lt;= target &lt;= 10^9 1 &lt;= nums.length &lt;= 10^5 1 &lt;=
nums[i] &lt;= 10^5</p></li>
</ul>
<p><strong>ä¾‹é¢˜1è¯¦è§£</strong>ï¼š</p>
<p>â€‹ æœ¬é¢˜åœ¨åšçš„æ—¶å€™æœ‰ä¸‰ç§è§£å†³æ–¹æ¡ˆ:</p>
<p>â€‹ ç¬¬ä¸€ç§å°±æ˜¯æœ€ä¸ºç®€å•çš„å…ˆè®¡ç®—å‰ç¼€å’Œï¼Œç„¶åæš´åŠ›å¼€å§‹ä»len = 1 åˆ° len =
nums.length è¿›è¡Œæœç´¢ï¼Œæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„lenå³è¿”å›.</p>
<p>â€‹
ç¬¬äºŒç§,åœ¨ç¬¬ä¸€ç§çš„åŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›,å°†æš´åŠ›æœç´¢æ”¹ä¸ºäºŒåˆ†ç´¢,left=1,right=nums.length,
len=(left + right)/2,æ—¶é—´å¤æ‚åº¦èƒ½å¤§å¤§é™ä½ã€‚</p>
<p>â€‹ ç¬¬ä¸‰ç§å°±æ˜¯æœ¬æ–‡ç€é‡è®°å½•çš„<strong>æ»‘åŠ¨çª—å£</strong>è§£å†³æ–¹æ¡ˆï¼š</p>
<p>â€‹
å¯ä»¥ä½¿ç”¨æ»‘çª—çš„é¢˜ç›®ä¸€èˆ¬é¢˜ç›®ä¸­éƒ½ä¼šæœ‰æ˜ç¡®çš„â€œ<strong>è¿ç»­å­æ•°ç»„</strong>â€ã€â€œ<strong>è¿ç»­å­ä¸²</strong>â€ç­‰å…³é”®å­—ï¼Œå¦å¤–å¯èƒ½ä¼šé™„å¸¦<strong>æœ€å¤§</strong>ã€<strong>æœ€å°</strong>çš„é™å®šè¯è¿›è¡Œè¡¥å……ã€‚</p>
<p>â€‹ é‚£ä¹ˆé‡åˆ°æ­¤ç±»é¢˜ç›®ï¼Œå¾€å¾€å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥è¿›è¡Œæ±‚è§£ï¼š</p>
<ul>
<li>åˆå§‹åŒ–çª—å£å·¦è¾¹ç•Œä¸º0ï¼Œå³è¾¹ç•Œå¯ä»¥ä¸º0ï¼Œä¹Ÿå¯ä»¥æ ¹æ®é¢˜æ„å›ºå®šå¤§å°ã€‚</li>
<li>æˆ‘ä»¬éœ€è¦åˆå§‹åŒ–ä¸€ä¸ªretçš„è¿”å›å€¼ï¼Œé»˜è®¤ä¸º0æˆ–è€…æ ¹æ®é¢˜æ„é»˜è®¤ä¸ºæœ€å¤§å€¼ã€‚</li>
<li>çª—å£çš„å¤§å°éœ€è¦æ ¹æ®é¢˜ç›®æ¡ä»¶è¿›è¡Œè°ƒæ•´
<ul>
<li>æœ€å¤§è¿ç»­...å°½é‡æ‰©å¼ å³è¾¹ç•Œï¼Œç›´åˆ°ä¸æ»¡è¶³é¢˜æ„å†æ”¶ç¼©å·¦è¾¹ç•Œ</li>
<li>æœ€å°è¿ç»­...å°½é‡ç¼©å°å·¦è¾¹ç•Œï¼Œç›´åˆ°ä¸æ»¡è¶³é¢˜æ„å†æ‰©å¤§å³è¾¹ç•Œ</li>
</ul></li>
<li>åœ¨æ‰§è¡Œ3æ“ä½œçš„è¿‡ç¨‹ä¸­ï¼Œä¸æ–­ä¸retè¿›è¡Œæ¯”è¾ƒ</li>
<li>æœ€ç»ˆè¿”å›retç»“æœå³å¯ã€‚</li>
</ul>
<p>æ ¹æ®ä¸Šè¿°æŒ‡å—ï¼Œæˆ‘ä»¬å¯ä»¥ä¹¦å†™ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="type">int</span> target, vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> len = <span class="number">1e7</span>;</span><br><span class="line">        <span class="type">int</span> left = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> right = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> total = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(;right&lt;nums.<span class="built_in">size</span>();right++)&#123;</span><br><span class="line">            total += nums[right];</span><br><span class="line">            <span class="keyword">while</span>(total &gt;= target)&#123;</span><br><span class="line">                <span class="keyword">if</span>(right - left + <span class="number">1</span> &lt; len) len = right - left + <span class="number">1</span>;</span><br><span class="line">                total-= nums[left++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(len == <span class="number">1e7</span>) len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> len;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="äºŒå‰‘æŒ‡-offer-ii-009-ä¹˜ç§¯å°äº-k-çš„å­æ•°ç»„">äºŒã€<a
href="https://leetcode-cn.com/problems/ZVAVXX/">å‰‘æŒ‡ Offer II 009
ä¹˜ç§¯å°äº K çš„å­æ•°ç»„</a></h3>
<p><strong>ä¾‹é¢˜2æè¿°ï¼š</strong></p>
<p>â€‹ ç»™å®šä¸€ä¸ª<strong>æ­£æ•´æ•°æ•°ç»„ <code>nums</code></strong>å’Œæ•´æ•°
<code>k</code> ï¼Œè¯·æ‰¾å‡ºè¯¥æ•°ç»„å†…ä¹˜ç§¯å°äº <code>k</code>
çš„è¿ç»­çš„å­æ•°ç»„çš„ä¸ªæ•°ã€‚</p>
<ul>
<li><p>ç¤ºä¾‹ 1:</p>
<ul>
<li>è¾“å…¥: nums = [10,5,2,6], k = 100</li>
<li>è¾“å‡º: 8</li>
<li>è§£é‡Š: 8 ä¸ªä¹˜ç§¯å°äº 100 çš„å­æ•°ç»„åˆ†åˆ«ä¸º: [10], [5], [2], [6], [10,5],
[5,2], [2,6], [5,2,6]ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ [10,5,2]
å¹¶ä¸æ˜¯ä¹˜ç§¯å°äº100çš„å­æ•°ç»„ã€‚</li>
</ul></li>
<li><p>ç¤ºä¾‹ 2:</p>
<ul>
<li>è¾“å…¥: nums = [1,2,3], k = 0</li>
<li>è¾“å‡º: 0</li>
</ul></li>
<li><p>æç¤º:</p>
<p>1 &lt;= nums.length &lt;= 3 * 10^4 1 &lt;= nums[i] &lt;= 1000 0 &lt;=
k &lt;= 10^6</p></li>
</ul>
<p><strong>ä¾‹é¢˜2è§£æ</strong>ï¼š</p>
<p>â€‹
æŒ‰ç…§ä¸Šè¿°ä¾‹é¢˜1çš„æ€æƒ³ï¼Œç®€å•æ¥å‘ï¼Œæˆ‘ä»¬å‘ç°æ­¤é¢˜ç›®æ±‚è§£çš„ä¸æ˜¯æŸä¸ªé•¿åº¦æœ€å°æˆ–é•¿åº¦æœ€å¤§çš„å€¼ï¼Œè€Œæ˜¯æ‰€æœ‰çš„è¿ç»­å­æ•°ç»„çš„ä¸ªæ•°ï¼Œä¹ä¸€çœ‹æ— æ³•æŒ‰ç…§å…ˆå‰çš„å†…å®¹è¿›è¡Œæ±‚è§£ï¼Œä½†å…¶å®æˆ‘ä»¬å¯ä»¥å‘ç°ï¼š</p>
<p>â€‹ çª—å£æ¯æ¬¡ç§»åŠ¨åï¼Œretéƒ½å¯ä»¥å¢åŠ  <strong>right - left +
1</strong>ä¸ªå­æ•°ç»„ã€‚å…·ä½“è€Œè¨€æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p>
<p>â€‹ æ¯”å¦‚æŸæ¬¡éå†ç¬¦åˆé¢˜æ„çš„å­æ•°ç»„ä¸º
ABCXï¼Œé‚£ä¹ˆåœ¨è¯¥æ¡ä»¶ä¸‹ç¬¦åˆæ¡ä»¶çš„æœ‰Xï¼ŒCXï¼ŒBCXï¼ŒABCXå…±å››ä¸ªï¼ˆå¯ä»¥è¿›è¡Œå¤šä¸ªä¾‹å­ï¼Œå‘ç°ä¸ªæ•°ç¬¦åˆright-left+1ï¼‰
â€‹æˆ‘ä»¬å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼šABï¼ŒBCä¹Ÿç®—ï¼Œä¸ºä»€ä¹ˆä¸ç®—è¿›å»ï¼Ÿ â€‹
è®°ä½ä¸€ç‚¹<strong>æˆ‘ä»¬æ˜¯ä»¥æœ€å³è¾¹çš„Xä¸ºå¿…è¦æ¡ä»¶ï¼Œè¿›è¡Œè®¡ç®—ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œå¦åˆ™ä¼šå‡ºç°é‡å¤çš„ï¼</strong>
â€‹
æ¯”å¦‚åœ¨Xä¸ºå³ä¾§è¾¹ç•Œæ—¶ï¼ˆABCXï¼‰ï¼Œæˆ‘ä»¬æŠŠBCç®—è¿›å»äº†ï¼Œå¯æ˜¯æˆ‘ä»¬åœ¨Cä¸ºæœ€å³ä¾§æ—¶ï¼ˆABCï¼‰ï¼ŒBCå·²ç»å‡ºç°è¿‡ï¼Œæˆ‘ä»¬é‡å¤åŠ äº†BCè¿™ä¸ªå­æ•°ç»„ä¸¤æ¬¡ï¼</p>
<p>å…·ä½“çš„ä»£ç åº”å½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">numSubarrayProductLessThanK</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> left = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> right = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> product = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(;right&lt;nums.<span class="built_in">size</span>();right++)&#123;</span><br><span class="line">            product = product * nums[right];</span><br><span class="line">            <span class="comment">//ä¸‹é¢åŠ äº†ä¸€ä¸ªæ¡ä»¶ï¼šleft&lt;=rightæ˜¯å› ä¸ºï¼Œå¦‚æœä¸åŠ è¿™ä¸ªæ¡ä»¶ï¼Œå½“k=0çš„æ—¶å€™ï¼Œä¼šä¸€ç›´é™·å…¥è¯¥æ­»å¾ªç¯ä¸­æ— æ³•å‡ºå¾ªç¯ã€‚</span></span><br><span class="line">            <span class="keyword">while</span>(left &lt;= right &amp;&amp; product &gt;= k)&#123;</span><br><span class="line">                product = product / nums[left];</span><br><span class="line">                left++;</span><br><span class="line">            &#125;</span><br><span class="line">            count += right - left + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸‰å‰‘æŒ‡-offer-ii-010.-å’Œä¸º-k-çš„å­æ•°ç»„">ä¸‰ã€<a
href="https://leetcode-cn.com/problems/ZVAVXX/">å‰‘æŒ‡ Offer II 010. å’Œä¸º
k çš„å­æ•°ç»„</a></h3>
<p><strong>ä¾‹é¢˜3æè¿°ï¼š</strong></p>
<p>â€‹ ç»™å®šä¸€ä¸ª<strong>æ•´æ•°æ•°ç»„</strong>å’Œä¸€ä¸ªæ•´æ•° <code>k</code>
<strong>ï¼Œ</strong>è¯·æ‰¾åˆ°è¯¥æ•°ç»„ä¸­å’Œä¸º <code>k</code>
çš„è¿ç»­å­æ•°ç»„çš„ä¸ªæ•°ã€‚</p>
<ul>
<li><p>ç¤ºä¾‹ 1:</p>
<ul>
<li>``` è¾“å…¥:nums = [1,1,1], k = 2 è¾“å‡º: 2 è§£é‡Š: æ­¤é¢˜ [1,1] ä¸ [1,1]
ä¸ºä¸¤ç§ä¸åŒçš„æƒ…å†µ <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- ç¤ºä¾‹ 2:</span><br><span class="line"></span><br><span class="line">  - ```</span><br><span class="line">    è¾“å…¥:nums = [1,2,3], k = 3</span><br><span class="line">    è¾“å‡º: 2</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li><p>æç¤º:</p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 2 * 104</code></li>
<li><code>-1000 &lt;= nums[i] &lt;= 1000</code></li>
<li><code>-107 &lt;= k &lt;= 107</code></li>
</ul></li>
</ul>
<p><strong>ä¾‹é¢˜3è§£æ</strong>ï¼š</p>
<p>â€‹
éå¸¸éœ€è¦æ³¨æ„çš„æ˜¯ï¼šæ­¤é¢˜ä¸­ç»™å‡ºçš„æ¡ä»¶æ˜¯æ•´æ•°æ•°ç»„ï¼Œè€Œéæ­£æ•´æ•°ï¼Œæ•…è€Œæ»‘åŠ¨çª—å£æ²¡æ³•ä½¿ç”¨ï¼Œå› ä¸ºæ»‘åŠ¨çª—å£æ˜¯éœ€è¦ä½ èƒ½ä¿è¯ï¼Œå½“å³è¾¹ç•Œæ‰©å……æ—¶ï¼Œå’Œå¿…å¢å¤§ï¼Œå·¦è¾¹ç•Œæ”¶ç¼©æ—¶å’Œå¿…å‡å°ï¼Œä½†æ˜¯å¦‚æœæ•°ç»„ä¸­å­˜åœ¨è´Ÿæ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ— æ³•ä¿è¯ã€‚æ­¤æ—¶éœ€è¦åº”ç”¨å‰ç¼€å’Œã€‚</p>
<p>â€‹
<strong>ä»¥å‰æˆ‘ä½¿ç”¨å‰ç¼€å’Œï¼Œéƒ½æ˜¯é€šè¿‡å…ˆæŠŠæ‰€æœ‰çš„å‰ç¼€å’Œè®¡ç®—å¾—åˆ°ï¼Œç„¶åå­˜åœ¨Vector<int>ä¸­ï¼Œç„¶åå†å»æ ¹æ®å‰ç¼€å’Œï¼Œéå†å¤„ç†é—®é¢˜ï¼Œä½†è¿™æ ·äººå·¥éå†å…¶å¤æ‚åº¦ä¸ºN^2</strong>ï¼Œå°±ä¼šå¯¼è‡´è¾ƒé«˜çš„æ—¶é—´å¤æ‚åº¦ï¼Œå¹¶ä¸”å®¹æ˜“é‡å¤è®¡ç®—ã€‚é‚£ä¹ˆåº”å½“å¦‚ä½•å»è¿›è¡Œå¤„ç†ä¼šæ¯”è¾ƒå¥½å‘¢ï¼Ÿ</p>
<p>â€‹
æˆ‘ä»¬<strong>ä¸€èˆ¬å¯ä»¥é‡‡ç”¨Hashè¡¨æ¥å­˜å‚¨å‰ç¼€å’Œï¼Œ</strong>åœ¨C++ä¸­å¯ä»¥ä½¿ç”¨é€Ÿåº¦è¾ƒå¿«çš„unordered_mapï¼Œå…¶åº•å±‚å°±æ˜¯ç”¨hashè¡¨è¿›è¡Œå®ç°ã€‚&lt;key,value&gt;ï¼Œå…¶å­˜å‚¨çš„keyä»£è¡¨å‰ç¼€å’Œçš„å€¼ï¼Œvalueä»£è¡¨è¯¥å‰ç¼€å’Œå‡ºç°çš„æ¬¡æ•°ã€‚<strong>ï¼ˆåªæœ‰åœ¨æ•°ç»„å†…å­˜åœ¨è´Ÿæ•°çš„æ—¶å€™ï¼Œæ‰ä¼šæœ‰å‰ç¼€å’Œå‡ºç°å¤šæ¬¡çš„æƒ…å†µï¼‰</strong></p>
<p>â€‹
ç„¶åï¼Œåœ¨ä¸Šè¿°ä¾‹é¢˜ä¸­ï¼Œåº”å½“åœ¨è®¡ç®—å‰ç¼€å’Œçš„æ¯ä¸€æ­¥ä¸­ï¼Œå°±å»è®¡ç®—ï¼Œåˆ°è¯¥å…ƒç´ ä¸ºæ­¢ï¼Œä»¥è¯¥å…ƒç´ ä¸ºç»“å°¾çš„å­åºåˆ—ï¼Œæœ‰æ²¡æœ‰ç¬¦åˆå’Œä¸ºk
è¿™ä¸€æ¡ä»¶çš„ï¼Œä¸ç„¶å®¹æ˜“é‡å¤è®¡ç®—ã€‚</p>
<p>â€‹
åŒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œè¦åœ¨å¼€å§‹æ—¶å°±å¾€hashè¡¨ä¸­ï¼Œæ’å…¥(0,1)è¿™ä¸€å¯¹å…ƒç´ ï¼Œä»¥å¤„ç†è¾¹ç•Œæ¡ä»¶ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">subarraySum</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums, <span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//åˆ©ç”¨å“ˆå¸Œè¡¨å­˜å‚¨ è®¡ç®—å‰ç¼€å’Œ</span></span><br><span class="line">        unordered_map&lt;<span class="type">int</span>,<span class="type">int</span>&gt; sums;</span><br><span class="line">        sums[<span class="number">0</span>] = <span class="number">1</span>;  <span class="comment">// sum = 0 , å‡ºç°äº†1æ¬¡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            sum = sum + nums[i];</span><br><span class="line">            <span class="comment">//åˆ¤æ–­ä»¥è¯¥å…ƒç´ ä¸ºç»“å°¾çš„å­åºåˆ—ï¼Œæœ‰æ²¡æœ‰ç¬¦åˆå’Œä¸ºk è¿™ä¸€æ¡ä»¶çš„</span></span><br><span class="line">            <span class="keyword">if</span>(sums.<span class="built_in">find</span>(sum-k) != sums.<span class="built_in">end</span>()) count+= sums[sum-k];</span><br><span class="line">			<span class="comment">//å°†è¯¥ä½ç½®çš„å‰ç¼€å’Œä¹Ÿå­˜å…¥hashè¡¨ä¸­ï¼Œä»¥ä¾›åç»­è®¡ç®—å‚è€ƒ</span></span><br><span class="line">            <span class="keyword">if</span>(sums.<span class="built_in">find</span>(sum) != sums.<span class="built_in">end</span>()) sums[sum]++;</span><br><span class="line">            <span class="keyword">else</span> sums[sum] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>æ•°ç»„ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>array</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ‘ç³»åˆ—â€”â€”å½“äºŒå‰æ ‘éœ€è¦ä»¥å±‚ä¸ºå•ä½è®¡ç®—æ—¶å±‚åºéå†çš„ä¼˜åŒ–ç‰ˆæœ¬</title>
    <url>/2022/02/06/36f0ee63db4b/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-045.-äºŒå‰æ ‘æœ€åº•å±‚æœ€å·¦è¾¹çš„å€¼"><a
href="https://leetcode-cn.com/problems/LwUNpT/">å‰‘æŒ‡ Offer II 045.
äºŒå‰æ ‘æœ€åº•å±‚æœ€å·¦è¾¹çš„å€¼</a></h4>
<h5 id="é¢˜ç›®æè¿°"><strong>é¢˜ç›®æè¿°</strong>ï¼š</h5>
<p>â€‹ ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„ <strong>æ ¹èŠ‚ç‚¹</strong>
<code>root</code>ï¼Œè¯·æ‰¾å‡ºè¯¥äºŒå‰æ ‘çš„ <strong>æœ€åº•å±‚ æœ€å·¦è¾¹</strong>
èŠ‚ç‚¹çš„å€¼ã€‚å‡è®¾äºŒå‰æ ‘ä¸­è‡³å°‘æœ‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚å…·ä½“ä¿¡æ¯è¯·ç‚¹å‡»é“¾æ¥æŸ¥çœ‹ã€‚</p>
<h5 id="é¢˜ç›®è§£ç­”"><strong>é¢˜ç›®è§£ç­”</strong>ï¼š</h5>
<p>â€‹
æ€è·¯æ˜¯å¾ˆç®€å•çš„ï¼Œä¸€ä¸ªå±‚åºéå†ï¼Œç„¶åæœ€åä¸€å±‚å±‚åºéå†çš„ç¬¬ä¸€ä¸ªå€¼è¿”å›å³å¯ï¼Œä½†æ˜¯æ•´ä¸ªè¿‡ç¨‹ä¸­è¿˜æ˜¯æœ‰å¾ˆå¤šæ­¥éª¤å¯ä»¥ä¼˜åŒ–çš„ã€‚ä»¥æœ€ç®€å•çš„æ€æƒ³æ¥è®²ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ¥ä¸€éå±‚åºéå†ï¼Œç¡®å®šæ€»å…±æœ‰å¤šå°‘å±‚ï¼Œç„¶åå†æ¥ä¸€éå±‚åºéå†ï¼Œå½“çŸ¥é“åˆ°æœ€åä¸€å±‚çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™è®°å½•è¿”å›ã€‚ä½†æ˜¯å…¶å®å¯ä»¥åªç”¨ä¸€æ¬¡å±‚åºéå†å®Œæˆï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">findBottomLeftValue</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        vector&lt;vector&lt;TreeNode*&gt;&gt; v;</span><br><span class="line">        queue&lt;TreeNode*&gt; q;</span><br><span class="line">        q.<span class="built_in">push</span>(root);  </span><br><span class="line">        <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            <span class="type">int</span> size = q.<span class="built_in">size</span>();</span><br><span class="line">            vector&lt;TreeNode*&gt; tmp;</span><br><span class="line">            <span class="keyword">while</span>(size--)&#123;          <span class="comment">// æœ€ç²¾å¦™çš„åœ¨äºæ­¤</span></span><br><span class="line">                TreeNode* t = q.<span class="built_in">front</span>();</span><br><span class="line">                tmp.<span class="built_in">push_back</span>(t);</span><br><span class="line">                q.<span class="built_in">pop</span>();</span><br><span class="line">                <span class="keyword">if</span>(t-&gt;left) q.<span class="built_in">push</span>(t-&gt;left);</span><br><span class="line">                <span class="keyword">if</span>(t-&gt;right) q.<span class="built_in">push</span>(t-&gt;right);</span><br><span class="line">            &#125;</span><br><span class="line">            v.<span class="built_in">push_back</span>(tmp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> v[v.<span class="built_in">size</span>()<span class="number">-1</span>][<span class="number">0</span>]-&gt;val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>â€‹
ä¸Šè¿°å±‚åºéå†ä¸­ï¼Œæœ€ä¸ºç²¾é«“çš„éƒ¨åˆ†å°±æ˜¯åœ¨while(!q.empty())ä¸­ï¼ŒåŠ å…¥äº†ä¸€ä¸ªwhile(size--)çš„å¾ªç¯ï¼Œè€Œæ¯æ¬¡åœ¨è¿™é‡Œé¢è¿›è¡Œå¾ªç¯çš„ï¼Œå¿…å®šæ˜¯åŒä¸€å±‚çš„èŠ‚ç‚¹ã€‚è¿™ä¸€ç‚¹å°è¯•ä»¥åå°±ä¼šå‘ç°æ˜¯æ­£ç¡®çš„ï¼Œå¦‚æ­¤ä¸€æ¥å°±å¤§å¤§ç¼©å‡äº†æ•´ä¸ªå±‚åºéå†çš„è¿‡ç¨‹ã€‚å¦‚æœè¿™é“é¢˜ç›®éœ€è¦æ‰¾åˆ°æ¯ä¸€å±‚çš„æœ€å¤§å€¼ï¼Œä¹Ÿå°±ä¸éœ€è¦ä¸¤æ¬¡éå†äº†ï¼Œæˆ‘ä»¬åªè¦åœ¨å†…å¾ªç¯ä¸­æ¯æ¬¡æ‰¾åˆ°ä¸€ä¸ªæœ€å¤§å€¼ï¼Œå°±æ˜¯åœ¨æ¯ä¸€å±‚é‡Œæ‰¾æœ€å¤§å€¼ã€‚</p>
<p>â€‹ æ­¤ç¯‡åšå®¢å°±æ˜¯ä¸ºäº†è®°å½•è¿™æ ·ä¸€ä¸ªå°çš„Trickã€‚</p>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>æ ‘ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>tree</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ‘ç³»åˆ—â€”â€”äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼ˆå¦‚ä½•æ›´å¥½çš„ç”¨çº¿æ€§æ–¹å¼è®°å½•äºŒå‰æ ‘çš„ç»“æ„ï¼‰</title>
    <url>/2022/02/07/5f449aa44840/</url>
    <content><![CDATA[<h4 id="å‰‘æŒ‡-offer-ii-048.-åºåˆ—åŒ–ä¸ååºåˆ—åŒ–äºŒå‰æ ‘"><a
href="https://leetcode-cn.com/problems/h54YBf/">å‰‘æŒ‡ Offer II 048.
åºåˆ—åŒ–ä¸ååºåˆ—åŒ–äºŒå‰æ ‘</a></h4>
<h5 id="é¢˜ç›®æè¿°"><strong>é¢˜ç›®æè¿°</strong>ï¼š</h5>
<p>â€‹
åºåˆ—åŒ–æ˜¯å°†ä¸€ä¸ªæ•°æ®ç»“æ„æˆ–è€…å¯¹è±¡è½¬æ¢ä¸ºè¿ç»­çš„æ¯”ç‰¹ä½çš„æ“ä½œï¼Œè¿›è€Œå¯ä»¥å°†è½¬æ¢åçš„æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶æˆ–è€…å†…å­˜ä¸­ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡ç½‘ç»œä¼ è¾“åˆ°å¦ä¸€ä¸ªè®¡ç®—æœºç¯å¢ƒï¼Œé‡‡å–ç›¸åæ–¹å¼é‡æ„å¾—åˆ°åŸæ•°æ®ã€‚</p>
<p>â€‹ è¯·è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥å®ç°äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ã€‚è¿™é‡Œä¸é™å®šä½ çš„åºåˆ— /
ååºåˆ—åŒ–ç®—æ³•æ‰§è¡Œé€»è¾‘ï¼Œåªéœ€è¦ä¿è¯ä¸€ä¸ªäºŒå‰æ ‘å¯ä»¥è¢«åºåˆ—åŒ–ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å¹¶ä¸”å°†è¿™ä¸ªå­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºåŸå§‹çš„æ ‘ç»“æ„ã€‚</p>
<h5 id="è§£é¢˜æ€è·¯"><strong>è§£é¢˜æ€è·¯</strong>ï¼š</h5>
<p>â€‹
æˆ‘ä»¬éƒ½å¾ˆæ¸…æ¥šï¼Œ<strong>ä¸€ä¸ªå‰åºåºåˆ—ï¼ˆååº/å±‚åºåºåˆ—ï¼‰+ä¸­åºåºåˆ—å¯ä»¥ç¡®å®šæ¢å¤ä¸€é¢—äºŒå‰æ ‘ç»“æ„ã€‚</strong>åœ¨è¿™ä¸ªé¢˜ç›®é‡Œçš„è¯ï¼Œæˆ‘ä¸€å¼€å§‹çš„æ€è·¯æ˜¯è®°å½•å‰åº+
ä¸­åºåºåˆ—ï¼Œå°†å®ƒä»¬å˜æˆå­—ç¬¦ä¸²ï¼Œç„¶åååºåˆ—åŒ–çš„æ—¶å€™ï¼Œå†é€šè¿‡å‰åºå’Œä¸­åºåºåˆ—é‡æ„å³å¯ã€‚æ€è·¯æ•´ä½“è€Œè¨€ä¹Ÿè¾ƒä¸ºæ¸…æ™°ï¼Œä½†æ˜¯å½“æˆ‘å†™å®Œæ‰€æœ‰ä»£ç çš„æ—¶å€™ï¼Œå‘ç°äº†ä¸€ä¸ªä»¤äººçª’æ¯çš„é—®é¢˜ï¼š</p>
<p>â€‹
<strong>è¿™ä¸ªé¢˜ç›®ä¸­æ ‘èŠ‚ç‚¹çš„å€¼æ˜¯å¯èƒ½é‡å¤çš„</strong>ï¼Œè¿™å°±ä¼šå¯¼è‡´å¦‚æœåªè®°å½•èŠ‚ç‚¹çš„å€¼ï¼Œæ ‘çš„é‡æ„æ˜¯ä¼šå‡ºé—®é¢˜çš„ã€‚å¦‚æœï¼Œéœ€è¦å…‹æœè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬è¿˜è¦ç»™æ¯ä¸ªèŠ‚ç‚¹åŠ ä¸Šindexï¼Œå¹¶ä¸”åˆ©ç”¨ä¸€ä¸ªhashè¡¨è®°å½•èŠ‚ç‚¹indexå’Œå€¼çš„å¯¹åº”å…³ç³»ã€‚è¿™æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ã€‚</p>
<p>â€‹
æ­¤Blogå°±æ˜¯ä¸ºäº†è®°å½•å¦ä¸€ç§è§£é¢˜æ€è·¯ï¼š<strong>åœ¨ç‰¹å®šæ¡ä»¶ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä»…å‡­å€Ÿæ ‘çš„å‰åºåºåˆ—å°±èƒ½å¤Ÿç¡®å®šæ¢å¤ä¸€é¢—å”¯ä¸€çš„äºŒå‰æ ‘</strong>ã€‚</p>
<p>â€‹
<strong>å¦‚æœæƒ³è¦è¾¾åˆ°ä¸Šé¢çš„æ•ˆæœï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å‰åºéå†åºåˆ—æ˜¯éœ€è¦è®°å½•ä¸ºNullçš„èŠ‚ç‚¹çš„ï¼Œç¤ºä¾‹å¦‚ä¸‹</strong>ï¼š</p>
<p><img src="https://assets.leetcode.com/uploads/2020/09/15/serdeser.jpg" alt="img" style="zoom:33%;" /></p>
<p>â€‹ å¯¹äºä¸Šè¿°äºŒå‰æ ‘ï¼Œæ™®é€šçš„å‰åºåºåˆ—åº”å½“ä¸º:</p>
<p>â€‹ <strong>1 2 3 4 5 </strong></p>
<p>â€‹ è€Œå¦‚æœæˆ‘ä»¬æƒ³è¦ç”¨æ¥æ¢å¤æ ‘ç»“æ„ï¼Œå‰åºåºåˆ—åº”å½“ä¸ºï¼š</p>
<p>â€‹ <strong>1 2 None None 3 4 None None 5 None None</strong></p>
<p>â€‹
å…·ä½“å¦‚ä½•æ“ä½œï¼Œä»¥åŠå¦‚ä½•æ¢å¤è§å¦‚ä¸‹ä»£ç ï¼šå…ˆåºéå†å’Œæ­£å¸¸çš„ç±»ä¼¼ï¼Œåªä¸è¿‡å¦‚æœç¢°åˆ°äº†ä¸ºNULLçš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬ä¸æ˜¯ç›´æ¥returnï¼Œè€Œæ˜¯ä¼šå°†å…¶è®°å½•å…¥åºåˆ—ä¸­ã€‚</p>
<p>â€‹
åœ¨é‡å»ºæ“ä½œä¸­ï¼Œæˆ‘ä»¬å°†åºåˆ—å­˜å…¥ä¸€ä¸ªé˜Ÿåˆ—ä¸­æ“ä½œè¾ƒä¸ºæ–¹ä¾¿ï¼Œç„¶åå¦‚æœç¢°åˆ°Noneå°±è¿”å›NULLï¼Œå¦åˆ™å°±æ–°å»ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ©ç”¨é€’å½’çš„å½¢å¼ï¼Œç¡®å®šå·¦å³å­æ ‘èŠ‚ç‚¹ï¼Œç„¶åè¿”å›æ–°å»ºèŠ‚ç‚¹ã€‚æœ€ç»ˆå°±èƒ½å®Œæˆä¸€æ•´é¢—æ ‘çš„é‡å»ºã€‚è¿™ç§æ–¹æ³•ä»æ—¶é—´å¤æ‚åº¦å’Œä»£ç å¤æ‚åº¦ä¸Šéƒ½ä¼˜äºå‰ä¸€ç§é€šè¿‡ä¸¤ä¸ªåºåˆ—è¿›è¡Œé‡å»ºçš„æ–¹æ³•ã€‚ä½†æ˜¯å±€é™å°±æ˜¯ï¼Œå‰åºéå†å¾—åˆ°çš„åºåˆ—éœ€è¦æ˜¯ä½ è‡ªå·±å½¢æˆçš„â€œç‰¹æ®Šâ€çš„å‰åºéå†åºåˆ—ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Codec</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">preOrder</span><span class="params">(TreeNode* root,string &amp;res)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">NULL</span>)&#123;</span><br><span class="line">            res += <span class="string">&quot;None,&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        res += <span class="built_in">to_string</span>(root-&gt;val) + <span class="string">&quot;,&quot;</span>;</span><br><span class="line">        <span class="built_in">preOrder</span>(root-&gt;left,res);</span><br><span class="line">        <span class="built_in">preOrder</span>(root-&gt;right,res);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Encodes a tree to a single string.</span></span><br><span class="line">    <span class="function">string <span class="title">serialize</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        string str = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="comment">//éœ€è¦ä¸€æ£µæ ‘çš„å‰åº(P) + ä¸­åºéå†åºåˆ—(I)æ‰èƒ½å¤Ÿè¿›è¡Œé‡æ„</span></span><br><span class="line">        <span class="built_in">preOrder</span>(root,str);</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">TreeNode* <span class="title">preOrderReverse</span><span class="params">(queue&lt;string&gt; &amp;q)</span></span>&#123;</span><br><span class="line">        string tmp = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span>(tmp == <span class="string">&quot;None&quot;</span>) <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">        TreeNode* root = <span class="keyword">new</span> <span class="built_in">TreeNode</span>(<span class="built_in">stoi</span>(tmp));</span><br><span class="line">        root-&gt;left = <span class="built_in">preOrderReverse</span>(q);</span><br><span class="line">        root-&gt;right =<span class="built_in">preOrderReverse</span>(q);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Decodes your encoded data to tree.</span></span><br><span class="line">    <span class="function">TreeNode* <span class="title">deserialize</span><span class="params">(string data)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// å…ˆæŠŠstringè½¬æˆåºåˆ—çš„å½¢å¼</span></span><br><span class="line">        queue&lt;string&gt; q;</span><br><span class="line">        <span class="keyword">while</span>(i&lt;data.<span class="built_in">length</span>()<span class="number">-1</span>)&#123;</span><br><span class="line">            <span class="comment">// i = 0 æ˜¯ç¬¬ä¸€ä¸ªæ•°å­—çš„èµ·å§‹ä½ç½®ï¼Œi = data.lenth()-1 æ˜¯ Iå‰é¢é‚£ä¸ªé€—å·çš„ä½ç½®</span></span><br><span class="line">            string tmp_str = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">while</span>(data[i]!=<span class="string">&#x27;,&#x27;</span>)&#123;</span><br><span class="line">                tmp_str += data[i];</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            i++;</span><br><span class="line">            q.<span class="built_in">push</span>(tmp_str);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ç„¶åå†é€šè¿‡åºåˆ—é‡å»ºæ ‘</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">preOrderReverse</span>(q);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>æ ‘ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>tree</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°ç»„ç³»åˆ—â€”â€”ç»å…¸ä¸‰æ•°ä¹‹å’Œé—®é¢˜</title>
    <url>/2022/02/03/16dab5183b1f/</url>
    <content><![CDATA[<h3 id="q1å‰‘æŒ‡-offer-ii-007.-æ•°ç»„ä¸­å’Œä¸º-0-çš„ä¸‰ä¸ªæ•°">Q1ã€<a
href="https://leetcode-cn.com/problems/1fGaJU/">å‰‘æŒ‡ Offer II 007.
æ•°ç»„ä¸­å’Œä¸º 0 çš„ä¸‰ä¸ªæ•°</a></h3>
<p>â€‹ ç»™å®šä¸€ä¸ªåŒ…å« n ä¸ªæ•´æ•°çš„æ•°ç»„ numsï¼Œåˆ¤æ–­ nums ä¸­æ˜¯å¦å­˜åœ¨ä¸‰ä¸ªå…ƒç´  a ï¼Œb
ï¼Œc ï¼Œä½¿å¾— a + b + c = 0 ï¼Ÿè¯·æ‰¾å‡ºæ‰€æœ‰å’Œä¸º 0 ä¸” ä¸é‡å¤ çš„ä¸‰å…ƒç»„ã€‚</p>
<p>ç¤ºä¾‹ 1ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [-1,0,1,2,-1,-4]</span><br><span class="line">è¾“å‡ºï¼š[[-1,-1,2],[-1,0,1]]</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ 2ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = []</span><br><span class="line">è¾“å‡ºï¼š[]</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹ 3ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¾“å…¥ï¼šnums = [0]</span><br><span class="line">è¾“å‡ºï¼š[]</span><br></pre></td></tr></table></figure>
<p>æç¤ºï¼š</p>
<pre><code>0 &lt;= nums.length &lt;= 3000
-105 &lt;= nums[i] &lt;= 105</code></pre>
<h4 id="è§£é¢˜æ€è·¯">è§£é¢˜æ€è·¯ï¼š</h4>
<p>â€‹ è¯¥é¢˜æœ€é‡è¦çš„æ˜¯å¦‚ä½•<strong>é«˜æ•ˆç‡çš„å¾ªç¯éå†</strong>ä»¥åŠ
å¦‚ä½•<strong>é«˜æ•ˆç‡çš„å»é™¤é‡å¤ä¸‰å…ƒç»„</strong></p>
<p>â€‹
æœ€ç®€å•çš„O(n^3)çš„æš´åŠ›æ±‚è§£ï¼Œå¯¹äºè¯¥é¢˜è€Œè¨€æ—¶é—´å¤æ‚åº¦ä¼šå¤§å¤§è¶…å‡ºã€‚æ‰€ä»¥æˆ‘ä»¬è€ƒè™‘åŒæŒ‡é’ˆçš„è§£æ³•ã€‚<strong>åŒæŒ‡é’ˆåœ¨ä¸‰æ•°ä¹‹å’Œä¸­å¦‚ä½•åº”ç”¨å‘¢ï¼Ÿ</strong></p>
<p>â€‹
<strong>æ— éæ˜¯åœ¨ä¼ ç»ŸåŒæŒ‡é’ˆæ±‚æ³•çš„å‰æä¸Šï¼Œåœ¨å¤–å±‚å¤šåŠ äº†ä¸€å±‚å¾ªç¯</strong>ï¼Œä¹Ÿå°±æ˜¯å…ˆå›ºå®šä½ä¸€ä¸ªå…ƒç´ ï¼Œç„¶ååˆ©ç”¨åŒæŒ‡é’ˆï¼Œå°†å†…éƒ¨O(n^2)çš„å¤æ‚åº¦ï¼Œç¼©å‡è‡³O(n)ï¼Œä»è€Œä½¿å¾—æ•´ä¸ªæ±‚è§£å¤æ‚åº¦é™è‡³O(n
^2)ã€‚</p>
<p>â€‹
è¯¥é¢˜å¦å¤–ä¸€ä¸ªæ ¸å¿ƒè¦ç‚¹æ˜¯ï¼Œå¦‚ä½•é«˜æ•ˆç‡çš„å»é™¤é‡å¤ï¼Ÿæˆ‘ä»¬å½“ç„¶å¯ä»¥å»ä½¿ç”¨Hashè¡¨ï¼Œç„¶åæ¯æœ‰ä¸€ä¸ªå…ƒç´ å°±å°†å…¶pushè¿›å»ï¼Œå¹¶è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå·²ç»å­˜åœ¨å°±ä¸è®¡å…¥ç»“æœä¸­ã€‚ä½†æ˜¯è¿™æ ·çš„æ–¹æ³•ä»ç„¶ä¼šå¯¼è‡´å¤§é‡çš„è®¡ç®—æµªè´¹ã€‚</p>
<p>â€‹ è§‚å¯Ÿåï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œåœ¨å¾ªç¯çš„æ—¶å€™ï¼Œæœ‰ä¸¤ç§æƒ…å†µä¼šå¯¼è‡´é‡å¤ï¼š</p>
<p><strong>æƒ…å†µ1</strong>ï¼šå½“å¤–å±‚å¾ªç¯çš„i , nums[i] == nums[i-1]
çš„æ—¶å€™ï¼ŒåŸå› æ˜¯ï¼Œå¦‚æœnums[i] ==
nums[i-1]ï¼Œé‚£ä¹ˆå½“å‰nums[i]èƒ½å¤Ÿæ‰¾åˆ°çš„jå’Œkï¼Œåœ¨nums[i-1]ä¸­å¿…å®šå·²ç»å‡ºç°è¿‡äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„å¤„ç†æ–¹æ³•æ˜¯ï¼Œç›´æ¥è·³è¿‡è¯¥æ¬¡å¤–å±‚å¾ªç¯ï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªi</p>
<p><strong>æƒ…å†µ2</strong>ï¼šå‡ºç°åœ¨å†…éƒ¨åŒæŒ‡é’ˆè¿è¡Œçš„æ—¶å€™ï¼Œå¦‚ä¸‹è¿°æƒ…å†µï¼šiï¼Œj,
kåˆ†åˆ«æŒ‡å‘-4ï¼Œ-1ï¼Œ5ï¼Œæ­¤æ—¶æ»¡è¶³ä¸€ç»„æ¡ä»¶ï¼Œæˆ‘ä»¬ä¼šå°† j++,
ä»¥è®©å¾ªç¯ç»§ç»­è¿è¡Œã€‚æ­¤æ—¶ï¼Œé‡å¤å‘ç”Ÿäº†ï¼Œå¦‚æœnums[j] == nums[j +
1]ï¼Œé‚£ä¹ˆnums[j+1]æ‰€äº§ç”Ÿçš„ç¬¦åˆæ¡ä»¶çš„ä¸‰å…ƒç»„å°±ä¼šä¸ä¹‹å‰çš„é‡å¤ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡‡å–çš„æªæ–½æ˜¯ï¼Œè®©jä¸€ç›´è‡ªå¢ï¼Œç›´åˆ°å…¶å’Œä¸‹ä¸€ä¸ªå…ƒç´ ä¸ç›¸ç­‰æˆ–è€…åˆ°è¾¾kã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">	-4  -1  -1  -1  2  5</span><br><span class="line"></span><br><span class="line">â€‹	i   j              k</span><br></pre></td></tr></table></figure>
<p>ç»¼ä¸Šï¼Œä»£ç ä¹¦å†™å¦‚ä¸‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">threeSum</span>(vector&lt;<span class="type">int</span>&gt;&amp; nums) &#123;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; res;</span><br><span class="line">        <span class="built_in">sort</span>(nums.<span class="built_in">begin</span>(),nums.<span class="built_in">end</span>());</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i &gt;= <span class="number">1</span> &amp;&amp; nums[i] == nums[i<span class="number">-1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="type">int</span> j = i+<span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> k = nums.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>(j&lt;k)&#123;</span><br><span class="line">                <span class="type">int</span> value = nums[i] + nums[j] + nums[k];</span><br><span class="line">                <span class="keyword">if</span>(value &gt; <span class="number">0</span>) k--;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(value &lt; <span class="number">0</span>) j++;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    res.<span class="built_in">push_back</span>(&#123;nums[i],nums[j],nums[k]&#125;);</span><br><span class="line">                    <span class="keyword">while</span> (j &lt; k &amp;&amp; nums[j] == nums[j + <span class="number">1</span>]) j++; </span><br><span class="line">                    j++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“· ç®—æ³•ç±»ç¬”è®°</category>
        <category>æ•°ç»„ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>leetcode</tag>
        <tag>array</tag>
      </tags>
  </entry>
  <entry>
    <title>2.3.1 è¿›ç¨‹åŒæ­¥ä¸è¿›ç¨‹äº’æ–¥åŠä¿¡å·é‡æœºåˆ¶</title>
    <url>/2022/04/13/c34143b1b4b5/</url>
    <content><![CDATA[<p>ç¬”è®°è¯¾ç¨‹è§†é¢‘ï¼šhttps://www.bilibili.com/video/BV1YE411D7nH?p=18</p>
<h3 id="ä¸€è¿›ç¨‹åŒæ­¥ä¸è¿›ç¨‹äº’æ–¥">ä¸€ã€è¿›ç¨‹åŒæ­¥ä¸è¿›ç¨‹äº’æ–¥</h3>
<h4 id="è¿›ç¨‹åŒæ­¥">1ã€è¿›ç¨‹åŒæ­¥</h4>
<p>â€‹
åŒæ­¥äº¦ç§°<strong>ç›´æ¥åˆ¶çº¦å…³ç³»</strong>ï¼Œå®ƒæ˜¯æŒ‡ä¸ºå®ŒæˆæŸç§ä»»åŠ¡è€Œå»ºç«‹çš„ä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹ï¼Œè¿™äº›è¿›ç¨‹å› ä¸ºéœ€è¦åœ¨æŸäº›ä½ç½®ä¸Šåè°ƒå®ƒä»¬çš„å·¥ä½œæ¬¡åºè€Œäº§ç”Ÿçš„åˆ¶çº¦å…³ç³»ã€‚è¿›ç¨‹é—´çš„ç›´æ¥åˆ¶çº¦å…³ç³»å°±æ˜¯æºäºå®ƒä»¬ä¹‹é—´çš„ç›¸äº’åˆä½œã€‚</p>
<p>â€‹ ä¾‹å¦‚ï¼šå¿…é¡»æŒ‰ç…§å†™è¿›ç¨‹ç„¶åå†è¯»è¿›ç¨‹çš„æ•°æ®è¿›è¡Œã€‚</p>
<h4 id="è¿›ç¨‹äº’æ–¥">2ã€è¿›ç¨‹äº’æ–¥</h4>
<p>â€‹
æˆ‘ä»¬æŠŠä¸€ä¸ªæ—¶é—´æ®µå†…åªå…è®¸ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨çš„èµ„æºç§°ä¸ºä¸´ç•Œèµ„æºã€‚å¤šç‰©ç†è®¾å¤‡ï¼ˆæ¯”å¦‚æ‘„åƒå¤´ã€æ‰“å°æœºï¼‰éƒ½å±äºä¸´ç•Œèµ„æºã€‚æ­¤å¤–è¿˜æœ‰è®¸å¤šå˜é‡ã€æ•°æ®ã€å†…å­˜ç¼“å†²åŒºç­‰éƒ½å±äºä¸´ç•Œèµ„æºã€‚</p>
<p>â€‹
å¯¹ä¸´ç•Œèµ„æºçš„è®¿é—®ï¼Œ<strong>å¿…é¡»äº’æ–¥åœ°è¿›è¡Œã€‚</strong>äº’æ–¥ï¼Œäº¦ç§°<strong>é—´æ¥åˆ¶çº¦å…³ç³»</strong>ã€‚è¿›ç¨‹äº’æ–¥æŒ‡å½“ä¸€ä¸ªè¿›ç¨‹è®¿é—®æŸä¸´ç•Œèµ„æºæ—¶ï¼Œå¦ä¸€ä¸ªæƒ³è¦è®¿é—®è¯¥ä¸´ç•Œèµ„æºçš„è¿›ç¨‹å¿…é¡»ç­‰å¾…ã€‚å½“å‰è®¿é—®ä¸´ç•Œèµ„æºçš„è¿›ç¨‹è®¿é—®ç»“æŸï¼Œé‡Šæ”¾è¯¥èµ„æºä¹‹åï¼Œå¦ä¸€ä¸ªè¿›ç¨‹æ‰èƒ½å»è®¿é—®ä¸´ç•Œèµ„æºã€‚</p>
<h4 id="å¯¹ä¸´ç•Œèµ„æºçš„äº’æ–¥è®¿é—®">3ã€å¯¹ä¸´ç•Œèµ„æºçš„äº’æ–¥è®¿é—®ï¼š</h4>
<p>åœ¨é€»è¾‘ä¸Šåˆ†ä¸º4ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li>è¿›å…¥åŒº
<ul>
<li>è´Ÿè´£æ£€æŸ¥æ˜¯å¦å¯è¿›å…¥ä¸´ç•ŒåŒºï¼Œè‹¥å¯è¿›å…¥ï¼Œåˆ™åº”è®¾ç½®æ­£åœ¨è®¿é—®ä¸´ç•Œèµ„æºçš„æ ‡å¿—ï¼ˆå¯ç†è§£ä¸ºâ€œä¸Šé”â€ï¼‰ï¼Œä»¥é˜»æ­¢å…¶ä»–è¿›ç¨‹åŒæ—¶è¿›å…¥ä¸´ç•ŒåŒº</li>
</ul></li>
<li>ä¸´ç•ŒåŒº
<ul>
<li>è®¿é—®ä¸´ç•Œèµ„æºçš„é‚£æ®µä»£ç </li>
</ul></li>
<li>é€€å‡ºåŒº
<ul>
<li>è´Ÿè´£è§£é™¤æ­£åœ¨è®¿é—®ä¸´ç•Œèµ„æºçš„æ ‡å¿—ï¼ˆå¯ç†è§£ä¸ºâ€œè§£é”€â€ï¼‰</li>
</ul></li>
<li>å‰©ä½™åŒº
<ul>
<li>åšå…¶ä»–å¤„ç†</li>
</ul></li>
</ul>
<h4 id="è¿›ç¨‹äº’æ–¥éœ€è¦éµå¾ªçš„åŸåˆ™">4ã€è¿›ç¨‹äº’æ–¥éœ€è¦éµå¾ªçš„åŸåˆ™ï¼š</h4>
<p>ä¸ºäº†å®ç°å¯¹ä¸´ç•Œèµ„æºçš„äº’æ–¥è®¿é—®ï¼ŒåŒæ—¶ä¿è¯ç³»ç»Ÿæ•´ä½“æ€§èƒ½ï¼Œéœ€è¦éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š</p>
<p>â€‹
1.ç©ºé—²è®©è¿›ã€‚ä¸´ç•ŒåŒºç©ºé—²æ—¶ï¼Œå¯ä»¥å…è®¸ä¸€ä¸ªè¯·æ±‚è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹ç«‹å³è¿›å…¥ä¸´ç•ŒåŒºï¼›</p>
<p>â€‹
2.å¿™åˆ™ç­‰å¾…ã€‚å½“å·²æœ‰è¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œå…¶ä»–è¯•å›¾è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹å¿…é¡»ç­‰å¾…ï¼›</p>
<p>â€‹
3.æœ‰é™ç­‰å¾…ã€‚å¯¹è¯·æ±‚è®¿é—®çš„è¿›ç¨‹ï¼Œåº”ä¿è¯èƒ½åœ¨æœ‰é™æ—¶é—´å†…è¿›å…¥ä¸´ç•ŒåŒºï¼ˆä¿è¯ä¸ä¼šé¥¥é¥¿ï¼‰ï¼›</p>
<p>â€‹
4.è®©æƒç­‰å¾…ã€‚å½“è¿›ç¨‹ä¸èƒ½è¿›å…¥ä¸´ç•ŒåŒºæ—¶ï¼Œåº”ç«‹å³é‡Šæ”¾å¤„ç†æœºï¼Œé˜²æ­¢è¿›ç¨‹å¿™ç­‰å¾…ã€‚</p>
<h3 id="äºŒè¿›ç¨‹äº’æ–¥çš„è½¯ä»¶å®ç°æ–¹æ³•">äºŒã€è¿›ç¨‹äº’æ–¥çš„è½¯ä»¶å®ç°æ–¹æ³•ï¼š</h3>
<h4 id="å•æ ‡å¿—æ³•">1ã€å•æ ‡å¿—æ³•ï¼š</h4>
<p>â€‹
<strong>ç®—æ³•æ€æƒ³ï¼š</strong>ä¸¤ä¸ªè¿›ç¨‹åœ¨è®¿é—®å®Œä¸´ç•ŒåŒºåä¼šæŠŠä½¿ç”¨ä¸´ç•ŒåŒºçš„æƒé™è½¬äº¤ç»™å¦ä¸€ä¸ªè¿›ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªè¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºçš„æƒé™åªèƒ½è¢«å¦ä¸€ä¸ªè¿›ç¨‹èµ‹äºˆ</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220412173137552.png" /></p>
<ul>
<li>è¿™ç§å¿…é¡»â€œè½®æµè®¿é—®â€å¸¦æ¥çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœæ­¤æ—¶å…è®¸è¿›å…¥ä¸´ç•ŒåŒºçš„è¿›ç¨‹æ˜¯Poï¼Œè€ŒPOä¸€ç›´ä¸è®¿é—®ä¸´ç•ŒåŒºï¼Œé‚£ä¹ˆè™½ç„¶æ­¤æ—¶ä¸´ç•ŒåŒºç©ºé—²ï¼Œä½†æ˜¯å¹¶ä¸å…è®¸P1è®¿é—®ã€‚</li>
<li><strong>å› æ­¤ï¼Œå•æ ‡å¿—æ³•å­˜åœ¨çš„ä¸»è¦é—®é¢˜æ˜¯ï¼šè¿èƒŒâ€œç©ºé—²è®©è¿›â€åŸåˆ™ã€‚</strong></li>
</ul>
<h4 id="åŒæ ‡å¿—å…ˆæ£€æŸ¥æ³•">2ã€åŒæ ‡å¿—å…ˆæ£€æŸ¥æ³•</h4>
<p>â€‹</p>
<h4 id="åŒæ ‡å¿—åæ£€æŸ¥æ³•">3ã€åŒæ ‡å¿—åæ£€æŸ¥æ³•</h4>
<h4 id="petersonç®—æ³•">4ã€Petersonç®—æ³•</h4>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ“ä½œç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Operating System</tag>
      </tags>
  </entry>
  <entry>
    <title>2.3.2 ç»å…¸é—®é¢˜ï¼ˆç”Ÿäº§è€…-æ¶ˆè´¹è€…ç­‰ï¼‰</title>
    <url>/2022/04/15/ef402168a5bd/</url>
    <content><![CDATA[<p>ç¬”è®°è¯¾ç¨‹è§†é¢‘ï¼šhttps://www.bilibili.com/video/BV1YE411D7nH?p=19</p>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ“ä½œç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Operating System</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç®—æœºç»„æˆåŸç†Chapter1â€”æ¦‚è¿°</title>
    <url>/2022/04/27/5b4ea41fcadf/</url>
    <content><![CDATA[<p>è§†é¢‘åœ°å€ï¼šhttps://www.bilibili.com/video/BV1BE411D7ii</p>
<h4 id="ä¸€è®¡ç®—æœºç¡¬ä»¶å‘å±•">ä¸€ã€è®¡ç®—æœºç¡¬ä»¶å‘å±•ï¼š</h4>
<p>â€‹ ç”µå­ç®¡æ—¶ä»£â€”â€”æ™¶ä½“ç®¡æ—¶ä»£â€”â€”ä¸­å°è§„æ¨¡é›†æˆç”µè·¯â€”â€”å¤§è§„æ¨¡é›†æˆç”µè·¯</p>
<h4
id="äºŒè®¡ç®—æœºç¡¬ä»¶çš„åŸºæœ¬ç»„æˆå†¯è¯ºä¾æ›¼-ç°ä»£è®¡ç®—æœº">äºŒã€è®¡ç®—æœºç¡¬ä»¶çš„åŸºæœ¬ç»„æˆï¼ˆå†¯è¯ºä¾æ›¼
&amp; ç°ä»£è®¡ç®—æœºï¼‰</h4>
<h5 id="å†¯è¯ºä¾æ›¼çš„è®¡ç®—æœºå·¥ä½œåŸç†">1ã€å†¯è¯ºä¾æ›¼çš„è®¡ç®—æœºå·¥ä½œåŸç†ï¼š</h5>
<ul>
<li><strong>å­˜å‚¨ç¨‹åºï¼š</strong>æŒ‡å°†æŒ‡ä»¤<strong>ä»¥äºŒè¿›åˆ¶ä»£ç çš„å½¢å¼äº‹å…ˆè¾“å…¥è®¡ç®—æœºçš„ä¸»å­˜å‚¨å™¨ï¼Œ</strong>ç„¶åæŒ‰å…¶åœ¨å­˜å‚¨å™¨ä¸­çš„é¦–åœ°å€æ‰§è¡Œç¨‹åºçš„ç¬¬ä¸€æ¡æŒ‡ä»¤ï¼Œä»¥åå°±æŒ‰è¯¥ç¨‹åºçš„è§„å®šé¡ºåºæ‰§è¡Œå…¶ä»–æŒ‡ä»¤ï¼Œç›´è‡³ç¨‹åºæ‰§è¡Œç»“æŸã€‚</li>
<li><strong>ç¨‹åºæ§åˆ¶ï¼š</strong>æŒ‰æŒ‡ä»¤åœ°å€è®¿é—®å­˜å‚¨å™¨å¹¶å–å‡ºæŒ‡ä»¤ï¼Œç»è¯‘ç ä¾æ¬¡äº§ç”ŸæŒ‡ä»¤æ‰§è¡Œæ‰€éœ€çš„æ§åˆ¶ä¿¡å·ï¼Œå®ç°å¯¹è®¡ç®—çš„æ§åˆ¶ï¼Œå®ŒæˆæŒ‡ä»¤çš„åŠŸèƒ½ã€‚</li>
</ul>
<h5 id="å†¯è¯ºä¾æ›¼çš„è®¡ç®—æœºçš„ç»„æˆ">2ã€å†¯è¯ºä¾æ›¼çš„è®¡ç®—æœºçš„ç»„æˆï¼š</h5>
<ul>
<li><p>ç¡¬ä»¶ç³»ç»Ÿæ€»è§ˆï¼š</p>
<ul>
<li><p>ä¸»æœºï¼šCPUï¼ˆè¿ç®—å™¨ã€ç®—æ•°è¿ç®—ã€é€»è¾‘è¿ç®—ã€‘ +
æ§åˆ¶å™¨ã€æŒ‡æŒ¥ç¨‹åºè¿è¡Œã€‘ï¼‰ã€å†…å­˜</p></li>
<li><p>å¤–è®¾ï¼šè¾“å…¥è¾“å‡ºè®¾å¤‡ï¼ˆå°†ä¿¡æ¯è½¬æ¢æˆæœºå™¨èƒ½è¯†åˆ«çš„å½¢å¼ï¼‰ã€å¤–å­˜å‚¨å™¨</p></li>
<li><p>æ€»çº¿ï¼šåœ°å€çº¿ã€æ•°æ®çº¿ã€æ§åˆ¶çº¿</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220430165516086.png" style="zoom: 50%;" /></p>
<p><strong>åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œè½¯ä»¶å’Œç¡¬ä»¶åœ¨é€»è¾‘ä¸Šæ˜¯ç­‰æ•ˆçš„</strong></p></li>
</ul></li>
<li><p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li><p>è®¡ç®—æœºç”±äº”å¤§éƒ¨ä»¶ç»„æˆã€å¦‚ä¸‹å›¾ã€‘</p></li>
<li><p>æŒ‡ä»¤å’Œæ•°æ®ä»¥åŒç­‰åœ°ä½å­˜äºå­˜å‚¨å™¨ï¼Œå¯æŒ‰ç…§åœ°å€å¯»è®¿</p></li>
<li><p>æŒ‡ä»¤å’Œæ•°æ®ç”¨äºŒè¿›åˆ¶æ ‡è¯†</p></li>
<li><p>æŒ‡ä»¤ç”±æ“ä½œç å’Œåœ°å€ç ç»„æˆ</p></li>
<li><p>å­˜å‚¨ç¨‹åº</p></li>
</ul></li>
</ul>
<p>â€‹
<strong>ä»¥è¿ç®—å™¨ä¸ºä¸­å¿ƒ</strong>ï¼Œæ•°æ®çš„ä¼ è¾“éƒ½è¦ç»è¿‡è¿ç®—å™¨è¿›è¡Œä¸­è½¬</p>
<h5 id="ç°ä»£è®¡ç®—æœºçš„ç»„æˆ">3ã€ç°ä»£è®¡ç®—æœºçš„ç»„æˆï¼š</h5>
<p>â€‹
ç›¸æ¯”äºå†¯è¯ºä¾æ›¼è®¡ç®—æœºï¼Œç°ä»£è®¡ç®—æœºä»¥<strong>å­˜å‚¨å™¨ä¸ºæ ¸å¿ƒ</strong>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220430170456159.png" style="zoom:50%;" /></p>
<p>ç”±äºè¿ç®—å™¨å’Œæ§åˆ¶å™¨è”ç³»å¾ˆç´§å¯†ï¼Œåœ¨ç°ä»£çš„å¤§è§„æ¨¡é›†æˆç”µè·¯ä¸­ï¼Œè¿ç®—å™¨å’Œæ§åˆ¶å™¨å¾€å¾€ä¼šè¢«é›†æˆåˆ°ä¸€ä¸ªèŠ¯ç‰‡ä¸­ï¼Œå³æˆ‘ä»¬ç†ŸçŸ¥çš„CPUã€‚</p>
<p>æ•…ï¼š<strong>CPU = è¿ç®—å™¨ +
æ§åˆ¶å™¨</strong>ï¼Œç®€åŒ–åçš„ç°ä»£è®¡ç®—æœºç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220430170613131.png" alt="image-20220430170613131" style="zoom:50%;" /></p>
<p>å„ä¸ªä¸“ä¸šåè¯çš„åŒºåˆ†ï¼š</p>
<ul>
<li>ä¸»å­˜ä¸€èˆ¬æŒ‡
ä¸»å­˜å‚¨å™¨ï¼Œæ¯”å¦‚æ‰‹æœºä¸­ç»å¸¸å†™çš„è¿è¡Œå†…å­˜RAMå°±æ˜¯æŒ‡ä¸»å­˜å‚¨å™¨</li>
<li>è¾…å­˜ä¸€èˆ¬æŒ‡ åƒæœºæ¢°ç¡¬ç›˜ã€å›ºæ€ç¡¬ç›˜ç­‰å¤–éƒ¨IOè®¾å¤‡</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220430170848656.png" style="zoom:50%;" /></p>
<h4 id="ä¸‰å„ä¸ªç¡¬ä»¶éƒ¨ä»¶">ä¸‰ã€å„ä¸ªç¡¬ä»¶éƒ¨ä»¶</h4>
<h5 id="ä¸»å­˜å‚¨å™¨çš„åŸºæœ¬ç»„æˆ">1ã€ä¸»å­˜å‚¨å™¨çš„åŸºæœ¬ç»„æˆ</h5>
<h6 id="æ€»è§ˆ">1ï¼‰æ€»è§ˆ</h6>
<ul>
<li>1ã€å­˜å‚¨ä½“ï¼šç”¨äºå­˜æ”¾æ•°æ®</li>
<li>2ã€MAR å­˜å‚¨åœ°å€å¯„å­˜å™¨ã€3ã€MDR å­˜å‚¨æ•°æ®å¯„å­˜å™¨ï¼š
<ul>
<li>CPUå°†åœ°å€æ”¾åˆ°MARä¸­ï¼Œä¸»å­˜å‚¨å™¨æ ¹æ®MARä¸­çš„åœ°å€ï¼Œå»å­˜å‚¨ä½“ä¸­æ‹¿åˆ°è¿™ä¸ªæ•°æ®ï¼Œç„¶åæŠŠè¿™ä¸ªæ•°æ®å†™å…¥MDRä¸­ï¼ŒCPUé€šè¿‡æ•°æ®çº¿è·¯ä»MDRä¸­å–èµ°æ•°æ®ã€‚</li>
</ul></li>
<li>ç¤ºæ„å›¾ï¼š</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220430171815662.png" style="zoom:50%;" /></p>
<h6 id="å­˜å‚¨ä½“">2ï¼‰å­˜å‚¨ä½“ï¼š</h6>
<p>â€‹ å­˜å‚¨ä½“ç”±è®¸å¤šå­˜å‚¨å•å…ƒç»„æˆã€‚</p>
<ul>
<li>å­˜å‚¨å•å…ƒï¼šæ¯ä¸ªå­˜å‚¨å•å…ƒä¸­å°†ä¼šå­˜æ”¾ä¸€ä¸²äºŒè¿›åˆ¶ä»£ç ï¼Œæ¯ä¸ªå­˜å‚¨å•å…ƒä¼šå¯¹åº”ä¸€ä¸ªåœ°å€</li>
<li>å­˜å‚¨å­—ï¼šå­˜å‚¨å•å…ƒä¸­äºŒè¿›åˆ¶ä»£ç çš„ç»„åˆ</li>
<li>å­˜å‚¨å­—é•¿ï¼šå­˜å‚¨å•å…ƒä¸­äºŒè¿›åˆ¶ä»£ç çš„ä½æ•°ï¼ˆå¸¸è§çš„æœ‰8bit,16bit,32bit,64bitï¼‰</li>
<li>å­˜å‚¨å…ƒï¼šå­˜å‚¨äºŒè¿›åˆ¶çš„ç”µå­å…ƒä»¶ï¼Œæ¯ä¸ªå­˜å‚¨å…ƒå¯ä»¥å­˜1bitã€ç”µå®¹ã€‘</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220430172031137.png" style="zoom:50%;" /></p>
<h6 id="marmdr">3ï¼‰MARã€MDR</h6>
<p>â€‹ MARçš„ä½æ•°åæ˜ äº†å­˜å‚¨å•å…ƒçš„ä¸ªæ•°ï¼ˆå› ä¸ºè¦æŒ‡æ˜åœ°å€ï¼‰</p>
<p>â€‹ MDRçš„ä½æ•° = å­˜å‚¨å­—é•¿,å³ä¸€ä¸ªå­˜å‚¨å•å…ƒå¯ä»¥å­˜å‚¨äºŒè¿›åˆ¶ä»£ç çš„ä½æ•°</p>
<h5 id="è¿ç®—å™¨çš„åŸºæœ¬ç»„æˆ">2ã€è¿ç®—å™¨çš„åŸºæœ¬ç»„æˆ</h5>
<p>â€‹ ç”¨äºå®ç°ç®—æœ¯è¿ç®—ã€é€»è¾‘è¿ç®—ï¼Œç”±ä¸‰ä¸ªå¯„å­˜å™¨å’Œç®—æœ¯é€»è¾‘å•å…ƒç»„æˆ</p>
<p><img src="C:\Users\14012\AppData\Roaming\Typora\typora-user-images\image-20220430204256104.png" style="zoom:50%;" /></p>
<ul>
<li>ACCï¼šç´¯åŠ å™¨ï¼Œç”¨äºå­˜æ”¾æ“ä½œæ•°æˆ–è¿ç®—ç»“æœ</li>
<li>MQï¼ˆMultiple-Quotientï¼‰ï¼šä¹˜å•†å¯„å­˜å™¨ï¼Œåœ¨ä¹˜ã€é™ˆè¿ç®—æ—¶ï¼Œç”¨äºå­˜æ”¾æ“ä½œæ•°æˆ–è¿ç®—ç»“æœã€‚</li>
<li>Xï¼šé€šç”¨çš„æ“ä½œæ•°å¯„å­˜å™¨ï¼Œç”¨äºå­˜æ”¾æ“ä½œæ•°</li>
<li>ALU: ç®—æœ¯é€»è¾‘å•å…ƒï¼Œé€šè¿‡å†…éƒ¨å¤æ‚çš„ç”µè·¯å®ç°ç®—æ•°è¿ç®—ã€é€»è¾‘è¿ç®—</li>
</ul>
<h5 id="æ§åˆ¶å™¨çš„åŸºæœ¬ç»„æˆ">3ã€æ§åˆ¶å™¨çš„åŸºæœ¬ç»„æˆ</h5>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220430204642685.png" style="zoom:50%;" /></p>
<ul>
<li>CUï¼šæ§åˆ¶å•å…ƒï¼Œåˆ†ææŒ‡ä»¤ï¼Œç»™å‡ºæ§åˆ¶ä¿¡å·</li>
<li>IRï¼šæŒ‡ä»¤å¯„å­˜å™¨ï¼Œå­˜æ”¾å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤</li>
<li>PCï¼šç¨‹åºè®¡æ•°å™¨ï¼Œå­˜æ”¾ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€ï¼Œæœ‰è‡ªåŠ¨+1çš„åŠŸèƒ½ã€‚</li>
</ul>
<p>æˆ‘ä»¬çš„è®¡ç®—æœºæ¯å®Œæˆä¸€æ¡æŒ‡ä»¤ï¼Œéœ€è¦æœ‰ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>å–æŒ‡ä»¤ï¼Œç”±PCé…åˆæ‰§è¡Œ</li>
<li>åˆ†ææŒ‡ä»¤ï¼Œç”±IRé…åˆæ‰§è¡Œ</li>
<li>æ‰§è¡ŒæŒ‡ä»¤ï¼Œç”±CUé…åˆæ‰§è¡Œ</li>
</ul>
<h4 id="å››è®¡ç®—æœºçš„å·¥ä½œè¿‡ç¨‹ç¤ºä¾‹">å››ã€è®¡ç®—æœºçš„å·¥ä½œè¿‡ç¨‹ç¤ºä¾‹</h4>
<p>â€‹ <strong>æ­¥éª¤1ï¼š</strong>é«˜çº§è¯­è¨€ â€”ã€‹ ç¼–è¯‘è£…å…¥ä¸»å­˜</p>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220430213423487.png" /></p>
<p>â€‹ <strong>æ­¥éª¤2</strong>ï¼šå®ŒæˆæŒ‡ä»¤çš„ç¤ºä¾‹è¿‡ç¨‹ï¼š</p>
<p>â€‹ åˆå§‹ï¼šæŒ‡ä»¤ã€æ•°æ®å­˜å…¥ä¸»å­˜ï¼ŒPCæŒ‡å‘ç¬¬ä¸€æ¡æŒ‡ä»¤</p>
<p>â€‹
æ­¥éª¤æ¦‚è¿°ï¼šä»ä¸»å­˜ä¸­å–æŒ‡ä»¤æ”¾å…¥IRã€PCè‡ªåŠ¨åŠ 1ã€CUåˆ†ææŒ‡ä»¤ã€CUæŒ‡æŒ¥å…¶ä»–éƒ¨ä»¶æ‰§è¡ŒæŒ‡ä»¤<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220430213124210.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220430213216295.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220430213523337.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220430213547286.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501000330518.png" /></p>
<p>æ€»ç»“ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501000641611.png" style="zoom:67%;" /></p>
<h4 id="ä¸‰è®¡ç®—æœºç³»ç»Ÿæ€§èƒ½è¯„ä»·">ä¸‰ã€è®¡ç®—æœºç³»ç»Ÿæ€§èƒ½è¯„ä»·</h4>
<h5 id="éæ—¶é—´æŒ‡æ ‡">1ã€éæ—¶é—´æŒ‡æ ‡ï¼š</h5>
<ul>
<li><p>1ï¼‰æœºå™¨å­—é•¿ï¼šæŒ‡æœºå™¨ä¸€æ¬¡èƒ½å¤„ç†çš„äºŒè¿›åˆ¶ä½æ•°</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429110326661.png" style="zoom: 67%;" /></p>
<ul>
<li>ç”±åŠ æ³•å™¨ã€å¯„å­˜å™¨çš„ä½æ•°å†³å®šï¼›</li>
<li>ä¸€èˆ¬ä¸å†…éƒ¨å¯„å­˜å™¨çš„ä½æ•°ç›¸ç­‰ï¼ˆå­—é•¿ï¼‰ï¼›</li>
<li>å­—é•¿è¶Šé•¿ï¼Œè¡¨ç¤ºæ•°æ®çš„èŒƒå›´å°±è¶Šå¤§ï¼Œç²¾ç¡®åº¦è¶Šé«˜ï¼›</li>
<li>ç›®å‰å¸¸è§çš„æœ‰32ä½å’Œ64ä½å­—é•¿ã€‚</li>
</ul></li>
<li><p>2ï¼‰æ€»çº¿å®½åº¦ï¼šæ•°æ®æ€»çº¿ä¸€æ¬¡èƒ½å¤Ÿå¹¶è¡Œä¼ é€çš„æœ€å¤§ä¿¡æ¯ä½æ•°</p>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429110651202.png" /></p>
<ul>
<li>ä¸€èˆ¬æŒ‡è¿ç®—å™¨ä¸å­˜å‚¨å™¨ä¹‹é—´çš„æ•°æ®æ€»çº¿ä½æ•°ã€‚æœ‰äº›è®¡ç®—æœºå†…éƒ¨ä¸å¤–éƒ¨æ•°æ®æ€»çº¿å®½åº¦ä¸ä¸€è‡´ï¼š</li>
</ul></li>
<li><p>3ï¼‰ä¸»å­˜å®¹é‡ä¸å­˜å‚¨å¸¦å®½</p>
<ul>
<li><strong>ä¸»å­˜å®¹é‡ï¼š</strong>ä¸€å°è®¡ç®—æœºè´®å­˜æ‰€åŒ…å«çš„å­˜å‚¨å•å…ƒæ€»æ•°</li>
<li><strong>å­˜å‚¨å¸¦å®½ï¼š</strong>æŒ‡å•ä½æ—¶é—´å†…ä¸è´®å­˜äº¤æ¢çš„äºŒè¿›åˆ¶ä¿¡æ¯é‡</li>
</ul></li>
</ul>
<h5 id="æ—¶é—´æŒ‡æ ‡">2ã€æ—¶é—´æŒ‡æ ‡ï¼š</h5>
<ul>
<li>ä¸»é¢‘f / æ—¶é’Ÿå‘¨æœŸTï¼Œå¤–é¢‘ä¸å€é¢‘
<ul>
<li>ä¸»é¢‘fï¼šCPUå†…æ ¸å·¥ä½œçš„æ—¶é’Ÿé¢‘ç‡</li>
<li>æ—¶é’Ÿå‘¨æœŸTï¼š</li>
</ul></li>
</ul>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>è®¡ç®—æœºç»„æˆåŸç†</category>
      </categories>
      <tags>
        <tag>Computer Composition</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/2022/10/27/5b0755a55834/</url>
    <content><![CDATA[<h3 id="ä¸€ç´¢å¼•çš„åˆ›å»ºä¸åˆ é™¤">ä¸€ã€ç´¢å¼•çš„åˆ›å»ºä¸åˆ é™¤</h3>
<ul>
<li>åˆ†ç±»ä¹‹<strong>å…¨æ–‡ç´¢å¼•</strong>ï¼šæœç´¢å¼•æ“ä½¿ç”¨çš„ä¸€ç§å…³é”®æŠ€æœ¯ã€‚å®ƒèƒ½å¤Ÿåˆ©ç”¨ã€åˆ†è¯æŠ€æœ¯ã€‘ç­‰å¤šç§ç®—æ³•æ™ºèƒ½åˆ†æå‡ºæ–‡æœ¬æ–‡å­—ä¸­å…³é”®è¯çš„é¢‘ç‡å’Œé‡è¦æ€§ï¼Œç„¶åæŒ‰ç…§ä¸€å®šçš„ç®—æ³•è§„åˆ™æ™ºèƒ½åœ°ç­›é€‰å‡ºæˆ‘ä»¬æƒ³è¦çš„æœç´¢ç»“æœã€‚<strong>å…¨æ–‡ç´¢å¼•éå¸¸é€‚åˆå¤§å‹æ•°æ®é›†ï¼Œå¯¹äºå°çš„æ•°æ®é›†ï¼Œå®ƒçš„ç”¨å¤„æ¯”è¾ƒå°ã€‚</strong>
<ul>
<li>ä½¿ç”¨å‚æ•°FULLTEXTå¯ä»¥è®¾ç½®ç´¢å¼•ä¸ºå…¨æ–‡ç´¢å¼•ã€‚</li>
<li>åœ¨å®šä¹‰ç´¢å¼•çš„åˆ—ä¸Šæ”¯æŒå€¼çš„å…¨æ–‡æŸ¥æ‰¾ï¼Œå…è®¸åœ¨è¿™äº›ç´¢å¼•åˆ—ä¸­æ’å…¥é‡å¤å€¼å’Œç©ºå€¼ã€‚æŸ¥è¯¢æ•°æ®é‡è¾ƒå¤§çš„å­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µæ—¶ï¼Œä½¿ç”¨å…¨æ–‡ç´¢å¼•å¯ä»¥æé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚ä¾‹å¦‚ï¼Œè¡¨studentçš„å­—æ®µinformationæ˜¯TEXTç±»å‹ï¼Œè¯¥å­—æ®µåŒ…å«äº†å¾ˆå¤šæ–‡å­—ä¿¡æ¯ã€‚åœ¨å­—æ®µinformationä¸Šå»ºç«‹å…¨æ–‡ç´¢å¼•åï¼Œå¯ä»¥æé«˜æŸ¥è¯¢å­—æ®µinformationçš„é€Ÿåº¦ã€‚</li>
</ul></li>
</ul>
<h4 id="åˆ›å»ºåˆ é™¤ç´¢å¼•">1ã€åˆ›å»ºåˆ é™¤ç´¢å¼•ï¼š</h4>
<h5 id="åˆ›å»ºè¡¨æ—¶æ–°å¢">1ï¼‰åˆ›å»ºè¡¨æ—¶æ–°å¢</h5>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE table_name [col_name data_type]</span><br><span class="line">[UNIQUE | FULLTEXT | SPATIAL] [INDEX | KEY] [index_name] (col_name [length]) [ASC | DESC]</span><br></pre></td></tr></table></figure>
<ul>
<li><p>UNIQUE ã€FULLTEXT å’ŒSPATIAL
ä¸ºå¯é€‰å‚æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºå”¯ä¸€ç´¢å¼•ã€å…¨æ–‡ç´¢å¼•å’Œç©ºé—´ç´¢å¼•ï¼›</p></li>
<li><p>INDEX ä¸KEY ä¸ºåŒä¹‰è¯ï¼Œä¸¤è€…çš„ä½œç”¨ç›¸åŒï¼Œç”¨æ¥æŒ‡å®šåˆ›å»ºç´¢å¼•ï¼›</p></li>
<li><p>index_name
æŒ‡å®šç´¢å¼•çš„åç§°ï¼Œä¸ºå¯é€‰å‚æ•°ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œé‚£ä¹ˆMySQLé»˜è®¤col_nameä¸ºç´¢å¼•åï¼›</p></li>
<li><p>col_name
ä¸ºéœ€è¦åˆ›å»ºç´¢å¼•çš„å­—æ®µåˆ—ï¼Œè¯¥åˆ—å¿…é¡»ä»æ•°æ®è¡¨ä¸­å®šä¹‰çš„å¤šä¸ªåˆ—ä¸­é€‰æ‹©ï¼›</p></li>
<li><p>length
ä¸ºå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºç´¢å¼•çš„é•¿åº¦ï¼Œåªæœ‰å­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µæ‰èƒ½æŒ‡å®šç´¢å¼•é•¿åº¦ï¼›</p></li>
<li><p>ASC æˆ–DESC æŒ‡å®šå‡åºæˆ–è€…é™åºçš„ç´¢å¼•å€¼å­˜</p></li>
<li><p>å¤šåˆ—ç´¢å¼•ï¼š</p></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">INDEX multi_idx(id,name,age)</span><br></pre></td></tr></table></figure>
<ul>
<li>å…¨æ–‡ç´¢å¼•ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE `papers` (</span><br><span class="line">`id` int(10) unsigned NOT NULL AUTO_INCREMENT,</span><br><span class="line">`title` varchar(200) DEFAULT NULL,</span><br><span class="line">`content` text,</span><br><span class="line">PRIMARY KEY (`id`),</span><br><span class="line">FULLTEXT KEY `title` (`title`,`content`)</span><br><span class="line">) ENGINE=MyISAM DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure>
<p>å…¨æ–‡æ£€ç´¢å¦‚ä½•æŸ¥è¯¢ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT * FROM papers WHERE content LIKE â€˜%æŸ¥è¯¢å­—ç¬¦ä¸²%â€™; # æ™®é€šæŸ¥è¯¢</span><br><span class="line">SELECT * FROM papers WHERE MATCH(title,content) AGAINST (â€˜æŸ¥è¯¢å­—ç¬¦ä¸²â€™); # å…¨æ–‡æ£€ç´¢ï¼Œéå¸¸å¿«</span><br></pre></td></tr></table></figure>
<h5 id="åˆ›å»ºè¡¨åæ–°å¢">2ï¼‰åˆ›å»ºè¡¨åæ–°å¢</h5>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE [UNIQUE | FULLTEXT | SPATIAL] INDEX index_name</span><br><span class="line">ON table_name (col_name[length],...) [ASC | DESC]</span><br></pre></td></tr></table></figure>
<h5 id="åˆ é™¤ç´¢å¼•">3ï¼‰åˆ é™¤ç´¢å¼•ï¼š</h5>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DROP INDEX index_name ON table_name;</span><br></pre></td></tr></table></figure>
<h3 id="äºŒmysql8.0ç´¢å¼•æ–°ç‰¹æ€§">äºŒã€Mysql8.0ç´¢å¼•æ–°ç‰¹æ€§ï¼š</h3>
<h4 id="é™åºç´¢å¼•">1ã€é™åºç´¢å¼•ï¼š</h4>
<p>â€‹ å³DESCå…³é”®å­—è¢«æ”¯æŒï¼Œå…¶åœ¨æŸç§åœºæ™¯ä¸‹æ„ä¹‰é‡å¤§ï¼Œå¦‚ä¸‹ï¼š</p>
<p>å…ˆåˆ›å»ºç´¢å¼•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE ts1(a int,b int,index idx_a_b(a ASC,b desc));</span><br></pre></td></tr></table></figure>
<p>â€‹ åœ¨æ‰§è¡Œå¦‚ä¸‹è¯­å¥æ—¶ï¼Œæ‰§è¡Œè®¡åˆ’ä¸­æ‰«ææ•°ä¸º799ï¼Œè€Œä¸”æç¤ºä½¿ç”¨äº†Using
filesortï¼Œè¿™æ˜¯MySQLä¸­ä¸€ç§é€Ÿåº¦æ¯”è¾ƒæ…¢çš„å¤–éƒ¨æ’åºï¼Œèƒ½é¿å…æ˜¯æœ€å¥½çš„ã€‚å¤šæ•°æƒ…å†µä¸‹ï¼Œç®¡ç†å‘˜å¯ä»¥é€šè¿‡ä¼˜åŒ–ç´¢å¼•æ¥å°½é‡é¿å…å‡ºç°Using
filesortï¼Œä»è€Œæé«˜æ•°æ®åº“æ‰§è¡Œé€Ÿåº¦ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM ts1 ORDER BY a,b DESC LIMIT 5;</span><br></pre></td></tr></table></figure>
<p>â€‹ ä½†æ˜¯åœ¨æ‰§è¡Œå¦‚ä¸‹è¯­å¥æ—¶ï¼Œå°±ä¼šå¿«å¾ˆå¤šä¸”ä¸ä¼šä½¿ç”¨Using filesortï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM ts1 ORDER BY a ASC,b DESC LIMIT 5;</span><br></pre></td></tr></table></figure>
<h4 id="éšè—ç´¢å¼•">2ã€éšè—ç´¢å¼•ï¼š</h4>
<p>â€‹
åªéœ€è¦å°†å¾…åˆ é™¤çš„ç´¢å¼•è®¾ç½®ä¸ºéšè—ç´¢å¼•ï¼Œä½¿æŸ¥è¯¢ä¼˜åŒ–å™¨ä¸å†ä½¿ç”¨è¿™ä¸ªç´¢å¼•ï¼ˆå³ä½¿ä½¿ç”¨force
indexï¼ˆå¼ºåˆ¶ä½¿ç”¨ç´¢å¼•ï¼‰ï¼Œä¼˜åŒ–å™¨ä¹Ÿä¸ä¼šä½¿ç”¨è¯¥ç´¢å¼•ï¼‰ï¼Œç¡®è®¤å°†ç´¢å¼•è®¾ç½®ä¸ºéšè—ç´¢å¼•åç³»ç»Ÿä¸å—ä»»ä½•å“åº”ï¼Œå°±å¯ä»¥å½»åº•åˆ é™¤ç´¢å¼•ã€‚</p>
<p>â€‹ è¿™ç§é€šè¿‡å…ˆå°†ç´¢å¼•è®¾ç½®ä¸ºéšè—ç´¢å¼•ï¼Œå†åˆ é™¤ç´¢å¼•çš„æ–¹å¼å°±æ˜¯è½¯åˆ é™¤ã€‚</p>
<p>â€‹
åŒæ—¶ï¼Œå¦‚æœä½ æƒ³éªŒè¯æŸä¸ªç´¢å¼•åˆ é™¤ä¹‹åçš„æŸ¥è¯¢æ€§èƒ½å½±å“ï¼Œå°±å¯ä»¥æš‚æ—¶å…ˆéšè—è¯¥ç´¢å¼•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE INDEX indexname</span><br><span class="line">ON tablename(propname[(length)]) INVISIBLE;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ALTER TABLE tablename ALTER INDEX index_name INVISIBLE; #åˆ‡æ¢æˆéšè—ç´¢å¼•</span><br><span class="line">ALTER TABLE tablename ALTER INDEX index_name VISIBLE; #åˆ‡æ¢æˆééšè—ç´¢å¼•</span><br></pre></td></tr></table></figure>
<h3 id="ä¸‰ç´¢å¼•çš„è®¾è®¡åŸåˆ™">ä¸‰ã€ç´¢å¼•çš„è®¾è®¡åŸåˆ™</h3>
<h4 id="å“ªäº›æƒ…å†µé€‚åˆåˆ›å»ºç´¢å¼•">1ã€å“ªäº›æƒ…å†µé€‚åˆåˆ›å»ºç´¢å¼•ï¼Ÿ</h4>
<h5
id="å­—æ®µçš„æ•°å€¼æœ‰å”¯ä¸€æ€§çš„é™åˆ¶ä½†æ˜¯æ²¡æœ‰åŠ å”¯ä¸€æ€§çº¦æŸçš„å­—æ®µ">1ï¼‰å­—æ®µçš„æ•°å€¼æœ‰å”¯ä¸€æ€§çš„é™åˆ¶ï¼Œä½†æ˜¯æ²¡æœ‰åŠ å”¯ä¸€æ€§çº¦æŸçš„å­—æ®µ</h5>
<h5 id="é¢‘ç¹ä½œä¸ºwhereæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µ">2ï¼‰é¢‘ç¹ä½œä¸ºWHEREæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µ</h5>
<h5 id="ç»å¸¸group-byå’Œorder-byçš„åˆ—">3ï¼‰ç»å¸¸GROUP BYå’ŒORDER BYçš„åˆ—</h5>
<p>â€‹
éœ€è¦å¯¹åˆ†ç»„æˆ–è€…æ’åºçš„å­—æ®µè¿›è¡Œç´¢å¼•ã€‚å¦‚æœå¾…æ’åºçš„åˆ—æœ‰å¤šä¸ªï¼Œé‚£ä¹ˆå¯ä»¥åœ¨è¿™äº›åˆ—ä¸Šå»ºç«‹è”åˆç´¢å¼•ã€‚æ—¢æœ‰GROUP
BY åˆæœ‰ ORDER BYï¼Œå¯ä»¥è€ƒè™‘å»ºç«‹è”åˆç´¢å¼•ï¼Œä½†è”åˆç´¢å¼•è¦å…ˆå†™GROUP BY å†å†™
ORDER BYã€‚</p>
<h5 id="updatedelete-çš„-where-æ¡ä»¶åˆ—">4ï¼‰UPDATEã€DELETE çš„ WHERE
æ¡ä»¶åˆ—</h5>
<p>â€‹
å¦‚æœè¿›è¡Œæ›´æ–°çš„æ—¶å€™ï¼Œæ›´æ–°çš„å­—æ®µæ˜¯éç´¢å¼•å­—æ®µï¼Œæå‡çš„æ•ˆç‡ä¼šæ›´æ˜æ˜¾ï¼Œè¿™æ˜¯å› ä¸ºéç´¢å¼•å­—æ®µæ›´æ–°ä¸éœ€è¦å¯¹ç´¢å¼•è¿›è¡Œç»´æŠ¤ã€‚</p>
<h5 id="distinct-æ“ä½œçš„å­—æ®µéœ€è¦åˆ›å»ºç´¢å¼•">5ï¼‰DISTINCT
æ“ä½œçš„å­—æ®µéœ€è¦åˆ›å»ºç´¢å¼•</h5>
<p>â€‹
æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹æŸä¸ªå­—æ®µè¿›è¡Œå»é‡ï¼Œä½¿ç”¨DISTINCTï¼Œé‚£ä¹ˆå¯¹è¿™ä¸ªå­—æ®µåˆ›å»ºç´¢å¼•ï¼Œä¹Ÿä¼šæå‡æŸ¥è¯¢æ•ˆç‡ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT DISTINCT(student_id) FROM `student_info`;</span><br></pre></td></tr></table></figure>
<h5
id="å¤šè¡¨joinè¿æ¥æ“ä½œæ—¶åˆ›å»ºç´¢å¼•çš„æ³¨æ„äº‹é¡¹">6ï¼‰å¤šè¡¨JOINè¿æ¥æ“ä½œæ—¶ï¼Œåˆ›å»ºç´¢å¼•çš„æ³¨æ„äº‹é¡¹:</h5>
<ul>
<li>è¿æ¥çš„è¡¨æ•°é‡ä¸è¦è¶…è¿‡3å¼ </li>
<li>å¯¹WHEREæ¡ä»¶åˆ›å»ºç´¢å¼•</li>
<li><strong>å¯¹ç”¨äºè¿æ¥çš„å­—æ®µåˆ›å»ºç´¢å¼•</strong>ï¼Œå¹¶ä¸”è¯¥å­—æ®µåœ¨å¤šå¼ è¡¨ä¸­çš„ç±»å‹å¿…é¡»ä¸€è‡´ã€‚</li>
</ul>
<h5 id="ä½¿ç”¨åˆ—çš„ç±»å‹å°çš„åˆ›å»ºç´¢å¼•">7ï¼‰ä½¿ç”¨åˆ—çš„ç±»å‹å°çš„åˆ›å»ºç´¢å¼•</h5>
<ul>
<li><p>ç±»å‹å¤§å°æŒ‡è¯¥ç±»å‹è¡¨ç¤ºçš„æ•°æ®èŒƒå›´çš„å¤§å°ã€‚</p></li>
<li><p>å¦‚æœè¦å¯¹æŸä¸ªåˆ—å»ºç«‹ç´¢å¼•ï¼Œå°½é‡è®©è¿™ä¸ªåˆ—ä½¿ç”¨è¾ƒå°çš„æ•°æ®ç±»å‹ã€‚åŸå› ï¼š</p>
<ul>
<li>æ•°æ®ç±»å‹è¶Šå°ï¼Œåœ¨æŸ¥è¯¢æ—¶è¿›è¡Œçš„æ¯”è¾ƒæ“ä½œè¶Šå¿«</li>
<li>æ•°æ®ç±»å‹è¶Šå°ï¼Œç´¢å¼•å ç”¨çš„å­˜å‚¨ç©ºé—´å°±è¶Šå°‘ï¼Œåœ¨ä¸€ä¸ªæ•°æ®é¡µå†…å°±å¯ä»¥æ”¾ä¸‹æ›´å¤šçš„è®°å½•ï¼Œä»è€Œå‡å°‘ç£ç›˜I/0å¸¦æ¥çš„æ€§èƒ½æŸè€—ï¼Œä¹Ÿå°±æ„å‘³ç€å¯ä»¥æŠŠæ›´å¤šçš„æ•°æ®é¡µç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œä»è€ŒåŠ å¿«è¯»å†™æ•ˆç‡ã€‚</li>
</ul></li>
</ul>
<h5
id="åˆ›å»ºå­—ç¬¦ä¸²åˆ—çš„ç´¢å¼•æ—¶æ³¨æ„äº‹é¡¹">8ï¼‰åˆ›å»ºå­—ç¬¦ä¸²åˆ—çš„ç´¢å¼•æ—¶æ³¨æ„äº‹é¡¹ï¼š</h5>
<p>â€‹
å‡è®¾æˆ‘ä»¬çš„å­—ç¬¦ä¸²å¾ˆé•¿ï¼Œé‚£å­˜å‚¨ä¸€ä¸ªå­—ç¬¦ä¸²å°±éœ€è¦å ç”¨å¾ˆå¤§çš„å­˜å‚¨ç©ºé—´ã€‚åœ¨æˆ‘ä»¬éœ€è¦ä¸ºè¿™ä¸ªå­—ç¬¦ä¸²åˆ—å»ºç«‹ç´¢å¼•æ—¶ï¼Œé‚£å°±æ„å‘³ç€åœ¨å¯¹åº”çš„B+æ ‘ä¸­æœ‰è¿™ä¹ˆä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>B+æ ‘ç´¢å¼•ä¸­çš„è®°å½•éœ€è¦æŠŠè¯¥åˆ—çš„å®Œæ•´å­—ç¬¦ä¸²å­˜å‚¨èµ·æ¥ï¼Œæ›´è´¹æ—¶ã€‚è€Œä¸”å­—ç¬¦ä¸²è¶Šé•¿ï¼Œåœ¨ç´¢å¼•ä¸­å ç”¨çš„å­˜å‚¨ç©ºé—´è¶Šå¤§ã€‚</li>
<li>å¦‚æœB+æ ‘ç´¢å¼•ä¸­ç´¢å¼•åˆ—å­˜å‚¨çš„å­—ç¬¦ä¸²å¾ˆé•¿ï¼Œé‚£åœ¨åšå­—ç¬¦ä¸²æ¯”è¾ƒæ—¶ä¼šå ç”¨æ›´å¤šçš„æ—¶é—´ã€‚</li>
</ul>
<p>â€‹
<strong>é€šè¿‡æˆªå–å­—æ®µçš„å‰é¢ä¸€éƒ¨åˆ†å†…å®¹å»ºç«‹ç´¢å¼•ï¼Œè¿™ä¸ªå°±å«å‰ç¼€ç´¢å¼•ã€‚</strong></p>
<p>â€‹
è¿™æ ·åœ¨æŸ¥æ‰¾è®°å½•æ—¶è™½ç„¶ä¸èƒ½ç²¾ç¡®çš„å®šä½åˆ°è®°å½•çš„ä½ç½®ï¼Œä½†æ˜¯èƒ½å®šä½åˆ°ç›¸åº”å‰ç¼€æ‰€åœ¨çš„ä½ç½®ï¼Œç„¶å<strong>æ ¹æ®å‰ç¼€ç›¸åŒçš„è®°å½•çš„ä¸»é”®å€¼å›è¡¨æŸ¥è¯¢å®Œæ•´çš„å­—ç¬¦ä¸²å€¼ã€‚</strong>æ—¢èŠ‚çº¦ç©ºé—´ï¼Œåˆå‡å°‘äº†å­—ç¬¦ä¸²çš„æ¯”è¾ƒæ—¶é—´ï¼Œè¿˜å¤§ä½“èƒ½è§£å†³æ’åºçš„é—®é¢˜ã€‚</p>
<ul>
<li><p><strong>å…³é”®é—®é¢˜</strong>ï¼šæˆªå–å¤šå°‘æ¯”è¾ƒåˆé€‚ï¼Ÿ</p></li>
<li><p>å…ˆçœ‹ä¸€ä¸‹å­—æ®µåœ¨å…¨éƒ¨æ•°æ®ä¸­çš„é€‰æ‹©åº¦</p>
<ul>
<li>```mysql select count(distinct address) / count(<em>) from shop;
count(distinct left(åˆ—å, ç´¢å¼•é•¿åº¦))/count(</em>) <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- ```mysql</span><br><span class="line">  select count(distinct left(address,10)) / count(*) as sub10, -- æˆªå–å‰10ä¸ªå­—ç¬¦çš„é€‰æ‹©åº¦</span><br><span class="line">  count(distinct left(address,15)) / count(*) as sub11, -- æˆªå–å‰15ä¸ªå­—ç¬¦çš„é€‰æ‹©åº¦</span><br><span class="line">  count(distinct left(address,20)) / count(*) as sub12, -- æˆªå–å‰20ä¸ªå­—ç¬¦çš„é€‰æ‹©åº¦</span><br><span class="line">  count(distinct left(address,25)) / count(*) as sub13 -- æˆªå–å‰25ä¸ªå­—ç¬¦çš„é€‰æ‹©åº¦</span><br></pre></td></tr></table></figure></li>
</ul></li>
</ul>
<h5 id="åŒºåˆ†åº¦é«˜çš„åˆ—é€‚åˆä½œä¸ºç´¢å¼•">9ï¼‰åŒºåˆ†åº¦é«˜çš„åˆ—é€‚åˆä½œä¸ºç´¢å¼•ï¼š</h5>
<p>â€‹
åˆ—çš„åŸºæ•°æŒ‡çš„æ˜¯æŸä¸€åˆ—ä¸­ä¸é‡å¤æ•°æ®çš„ä¸ªæ•°ï¼Œæ¯”æ–¹è¯´æŸä¸ªåˆ—åŒ…å«å€¼2ï¼Œ5ï¼Œ8ï¼Œ2ï¼Œ5ï¼Œ8ï¼Œ2ï¼Œ5ï¼Œ8ï¼Œè™½ç„¶æœ‰9æ¡è®°å½•ï¼Œä½†è¯¥åˆ—çš„åŸºæ•°å´æ˜¯3ã€‚</p>
<p>â€‹ å¯ä»¥ä½¿ç”¨å…¬å¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select count(distinct a)/count(*) from t1 </span><br></pre></td></tr></table></figure>
<p>â€‹ è®¡ç®—åŒºåˆ†åº¦ï¼Œè¶Šæ¥è¿‘1è¶Šå¥½ï¼Œä¸€èˆ¬è¶…è¿‡33%å°±ç®—æ˜¯æ¯”è¾ƒé«˜æ•ˆçš„ç´¢å¼•äº†ã€‚</p>
<h5
id="ä½¿ç”¨æœ€é¢‘ç¹çš„åˆ—æ”¾åˆ°è”åˆç´¢å¼•çš„å·¦ä¾§">10ï¼‰ä½¿ç”¨æœ€é¢‘ç¹çš„åˆ—æ”¾åˆ°è”åˆç´¢å¼•çš„å·¦ä¾§</h5>
<h5
id="åœ¨å¤šä¸ªå­—æ®µéƒ½è¦åˆ›å»ºç´¢å¼•æ—¶è”åˆç´¢å¼•ä¼˜äºå•å€¼ç´¢å¼•">11ï¼‰åœ¨å¤šä¸ªå­—æ®µéƒ½è¦åˆ›å»ºç´¢å¼•æ—¶ï¼Œè”åˆç´¢å¼•ä¼˜äºå•å€¼ç´¢å¼•</h5>
<h4 id="ç´¢å¼•æ•°ç›®çš„é™åˆ¶">2ã€ç´¢å¼•æ•°ç›®çš„é™åˆ¶ï¼š</h4>
<ul>
<li><p>å•å¼ è¡¨ä¸è¶…è¿‡6ä¸ªç´¢å¼•</p></li>
<li><p>ç´¢å¼•å ç”¨ç£ç›˜ç©ºé—´ã€ä¼šå½±å“insertï¼Œupdateçš„æ•ˆç‡ã€‚åŒæ—¶ï¼Œå› ä¸ºä¼˜åŒ–å™¨åœ¨æ‰§è¡ŒæŸ¥è¯¢å‰ï¼Œå¦‚æœç´¢å¼•å¤ªå¤šï¼Œä¼šå¯¼è‡´å…¶ç”Ÿæˆæ‰§è¡Œè®¡åˆ’çš„æ—¶é—´é™ä½ã€‚</p></li>
</ul>
<h4 id="å“ªäº›æƒ…å†µä¸é€‚åˆåˆ›å»ºç´¢å¼•">3ã€å“ªäº›æƒ…å†µä¸é€‚åˆåˆ›å»ºç´¢å¼•ï¼Ÿ</h4>
<h5
id="åœ¨whereä¸­ä½¿ç”¨ä¸åˆ°çš„å­—æ®µä¸è¦è®¾ç½®ç´¢å¼•">1ï¼‰åœ¨whereä¸­ä½¿ç”¨ä¸åˆ°çš„å­—æ®µï¼Œä¸è¦è®¾ç½®ç´¢å¼•</h5>
<h5
id="æ•°æ®é‡å°çš„è¡¨æœ€å¥½ä¸è¦ä½¿ç”¨ç´¢å¼•">2ï¼‰æ•°æ®é‡å°çš„è¡¨æœ€å¥½ä¸è¦ä½¿ç”¨ç´¢å¼•</h5>
<h5
id="æœ‰å¤§é‡é‡å¤æ•°æ®çš„åˆ—ä¸Šä¸è¦å»ºç«‹ç´¢å¼•10">3ï¼‰æœ‰å¤§é‡é‡å¤æ•°æ®çš„åˆ—ä¸Šä¸è¦å»ºç«‹ç´¢å¼•ï¼ˆ10%ï¼‰</h5>
<p>â€‹ è¦åœ¨ 100 ä¸‡è¡Œæ•°æ®ä¸­æŸ¥æ‰¾å…¶ä¸­çš„ 50
ä¸‡è¡Œï¼ˆæ¯”å¦‚æ€§åˆ«ä¸ºç”·çš„æ•°æ®ï¼‰ï¼Œä¸€æ—¦åˆ›å»ºäº†ç´¢å¼•ï¼Œä½ éœ€è¦å…ˆè®¿é—® 50
ä¸‡æ¬¡ç´¢å¼•ï¼Œç„¶åå†è®¿é—® 50
ä¸‡æ¬¡æ•°æ®è¡¨ï¼Œè¿™æ ·åŠ èµ·æ¥çš„å¼€é”€æ¯”ä¸ä½¿ç”¨ç´¢å¼•å¯èƒ½è¿˜è¦å¤§.</p>
<h5
id="é¿å…å¯¹ç»å¸¸æ›´æ–°çš„è¡¨åˆ›å»ºè¿‡å¤šçš„ç´¢å¼•">4ï¼‰é¿å…å¯¹ç»å¸¸æ›´æ–°çš„è¡¨åˆ›å»ºè¿‡å¤šçš„ç´¢å¼•</h5>
<h5 id="ä¸å»ºè®®ç”¨æ— åºçš„å€¼ä½œä¸ºç´¢å¼•">5ï¼‰ä¸å»ºè®®ç”¨æ— åºçš„å€¼ä½œä¸ºç´¢å¼•</h5>
<p>â€‹
ä¾‹å¦‚èº«ä»½è¯ã€UUID(åœ¨ç´¢å¼•æ¯”è¾ƒæ—¶éœ€è¦è½¬ä¸ºASCIIï¼Œå¹¶ä¸”æ’å…¥æ—¶å¯èƒ½é€ æˆé¡µåˆ†è£‚)ã€MD5ã€HASHã€æ— åºé•¿å­—ç¬¦ä¸²ç­‰ã€‚</p>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ•°æ®åº“ç²¾ç®€ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>äº‹åŠ¡</title>
    <url>/2022/10/17/a0984953b2e8/</url>
    <content><![CDATA[<h3 id="ä¸€">ä¸€ã€</h3>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ•°æ®åº“ç²¾ç®€ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysqlæ—¥å¿—ä¸å¤‡ä»½</title>
    <url>/2022/10/17/f545bfc8e29a/</url>
    <content><![CDATA[<h3 id="ä¸€">ä¸€ã€</h3>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ•°æ®åº“ç²¾ç®€ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>MysqlåŸºæœ¬æŸ¥è¯¢å†…å®¹</title>
    <url>/2022/09/03/7e7267227ba3/</url>
    <content><![CDATA[<h4 id="ä¸€äº›éå…³ç³»å‹æ•°æ®åº“">1ã€ä¸€äº›éå…³ç³»å‹æ•°æ®åº“</h4>
<h5 id="é”®å€¼å‹æ•°æ®åº“">é”®å€¼å‹æ•°æ®åº“ï¼š</h5>
<p>â€‹
æŸ¥æ‰¾é€Ÿåº¦æå¿«ï¼Œä½†æ— æ³•ä½¿ç”¨æ¡ä»¶è¿‡æ»¤ã€‚æœ€å…¸å‹çš„åº”ç”¨åœºæ™¯ä¸ºå†…å­˜ç¼“å­˜ï¼ŒRedisæ˜¯æœ€æµè¡Œçš„é”®å€¼å‹æ•°æ®åº“</p>
<h5 id="æ–‡æ¡£å‹æ•°æ®åº“">æ–‡æ¡£å‹æ•°æ®åº“ï¼š</h5>
<p>â€‹
å­˜æ”¾å¹¶è·å–æ–‡æ¡£ï¼Œæ–‡æ¡£ä½œä¸ºåŸºæœ¬å•ä½ï¼Œä¸€ä¸ªæ–‡æ¡£ä¸ºä¸€æ¡è®°å½•ï¼Œå¯ä»¥æ˜¯XMLæˆ–JSONæ ¼å¼ï¼ŒMongoDBæ˜¯æœ€å¸¸è§çš„æ–‡æ¡£å‹æ•°æ®åº“</p>
<h5 id="æœç´¢å¼•æ“æ•°æ®åº“">æœç´¢å¼•æ“æ•°æ®åº“ï¼š</h5>
<p>â€‹ æ ¸å¿ƒæ˜¯â€œå€’æ’ç´¢å¼•â€ã€‚</p>
<h5 id="åˆ—å¼æ•°æ®åº“">åˆ—å¼æ•°æ®åº“ï¼š</h5>
<p>â€‹ å¤§é‡é™ä½ç³»ç»ŸIOï¼Œé€‚åˆäºåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</p>
<h5 id="å›¾å½¢æ•°æ®åº“">å›¾å½¢æ•°æ®åº“ï¼š</h5>
<p>â€‹ åˆ©ç”¨äº†å›¾è¿™ç§æ•°æ®ç»“æ„å­˜å‚¨å®ä½“å¯¹è±¡ä¹‹é—´çš„å…³ç³» æ¯”å¦‚Neo4J</p>
<h4 id="eræ¨¡å‹ä¸è¡¨è®°å½•">2ã€ERæ¨¡å‹ä¸è¡¨è®°å½•</h4>
<ul>
<li>ERæ¨¡å‹ï¼Œä¸‰ä¸ªä¸»è¦æ¦‚å¿µï¼š<strong>å®ä½“é›†ã€å±æ€§ã€è”ç³»é›†</strong></li>
<li>ORMæ€æƒ³ï¼šObject Relational Mapping å¯¹è±¡å…³ç³»æ˜ å°„ ã€ æ•°æ®åº“ä¸­çš„ä¸€ä¸ªè¡¨
å¯¹åº”ç¼–ç¨‹è¯­è¨€ä¸­çš„ä¸€ä¸ªç±»ã€‘</li>
</ul>
<h5 id="ä¸€å¯¹ä¸€å…³ç³»">1) ä¸€å¯¹ä¸€å…³ç³»ï¼š</h5>
<p>â€‹
å®é™…åº”ç”¨ä¸­ä¸å¤šï¼Œå› ä¸º1å¯¹1çš„å…³ç³»å®é™…ä¸Šå¯ä»¥å»ºç«‹æˆä¸€å¼ è¡¨ã€‚<strong>ä¸»è¦åº”ç”¨äºä¼˜åŒ–æ€§èƒ½ã€‚</strong>æ¯”å¦‚è¯´è®¾è®¡å­¦ç”Ÿè¡¨ï¼ŒæŠŠä»–æ‹†è§£ä¸ºåŸºç¡€ä¿¡æ¯è¡¨å’Œä¸å¸¸ç”¨ä¿¡æ¯è¡¨ï¼Œè¿™æ ·å­å¿«é€ŸæŸ¥è¯¢æ—¶åªéœ€è¦æŸ¥è¯¢åŸºç¡€ä¿¡æ¯è¡¨å³å¯ï¼Œæå‡æŸ¥è¯¢é€Ÿåº¦</p>
<h5 id="ä¸€å¯¹å¤šå…³ç³»å¤šå¯¹å¤šå…³ç³»ç­‰">2) ä¸€å¯¹å¤šå…³ç³»ã€å¤šå¯¹å¤šå…³ç³»ç­‰</h5>
<h4 id="sqlåˆ†ç±»">3ã€SQLåˆ†ç±»ï¼š</h4>
<ul>
<li>DDLï¼šæ•°æ®å®šä¹‰è¯­è¨€ï¼ˆCREATE ALTER TRUNCATEç­‰ï¼‰</li>
<li>DMLï¼šæ•°æ®æ“ä½œè¯­è¨€ï¼ˆINSERT DELETEç­‰ï¼‰</li>
<li>DCLï¼šæ•°æ®æ§åˆ¶è¯­è¨€ï¼ˆCOMMIT ROLLBACK SAVEPOINT GRANT REVOKEï¼‰</li>
</ul>
<h4 id="sqlä½¿ç”¨è§„èŒƒä¸è§„åˆ™">4ã€SQLä½¿ç”¨è§„èŒƒä¸è§„åˆ™</h4>
<ul>
<li>MYSQLåœ¨Windowsç¯å¢ƒä¸‹æ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„</li>
<li>MYSQLåœ¨Linuxç¯å¢ƒä¸‹ï¼šæ•°æ®åº“åã€è¡¨åã€å˜é‡åä¸¥æ ¼åŒºåˆ†å¤§å°å†™</li>
<li>åœ¨Linuxç¯å¢ƒä¸‹ï¼šå…³é”®å­—ã€å‡½æ•°åã€åˆ—åå¿½ç•¥å¤§å°å†™</li>
</ul>
<h4 id="selectåŸºç¡€æ“ä½œ">5ã€SELECTåŸºç¡€æ“ä½œï¼š</h4>
<ul>
<li>åˆ—çš„åˆ«å</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT employee_id AS emp_id,last_name AS lname,salary * 12 AS sal</span><br><span class="line">FROM employees</span><br></pre></td></tr></table></figure>
<ul>
<li>å»é™¤é‡å¤ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT DISTINCT department_id</span><br><span class="line">FROM employees</span><br><span class="line">/** å°†department_id å’Œ salaryè§†ä½œä¸€ä¸ªæ•´ä½“å»é‡**/</span><br><span class="line">SELECT DISTINCT department_id,salary</span><br><span class="line">FROM employees</span><br></pre></td></tr></table></figure>
<ul>
<li>ç©ºå€¼NULLå¦‚ä½•å‚ä¸è¿ç®—</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT salary AS &quot;æœˆå·¥èµ„&quot;,salary * (1 + IFNULL(commission_pct,0)) * 12 AS &quot;å¹´å·¥èµ„&quot;</span><br><span class="line">FROM employees</span><br></pre></td></tr></table></figure>
<ul>
<li>æ˜¾ç¤ºè¡¨ç»“æ„,æ˜¾ç¤ºè¡¨å­—æ®µçš„ç›¸å…³ä¿¡æ¯</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DESCRIBE employees</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220903195253736.png" /></p>
<h4
id="æ¯”è¾ƒè¿ç®—ç¬¦ä½¿ç”¨å…³é”®æ˜¯nullå€¼å‚ä¸æ¯”è¾ƒæ—¶è§„åˆ™">6ã€æ¯”è¾ƒè¿ç®—ç¬¦ä½¿ç”¨ï¼šï¼ˆå…³é”®æ˜¯NULLå€¼å‚ä¸æ¯”è¾ƒæ—¶è§„åˆ™ï¼‰</h4>
<ul>
<li><p>= è¿ç®—ç¬¦ï¼š</p>
<ul>
<li><p>åœ¨MYSQLä¸­ï¼Œå¦‚æœæ•°å€¼å’Œå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œå­—ç¬¦ä¸²å­˜åœ¨éšå¼è½¬æ¢ï¼Œå¦‚æœè½¬æ¢æ•°å€¼ä¸æˆåŠŸï¼Œåˆ™çœ‹ä½œ0</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT 0 = &#x27;a&#x27;  # ä¸º 1</span><br><span class="line">FROM DUAL;</span><br></pre></td></tr></table></figure></li>
<li><p>åªè¦æœ‰NULLå‚ä¸æ¯”è¾ƒï¼Œåˆ™ç»“æœå‡ä¸ºNULL</p></li>
</ul></li>
<li><p>è‹¥ä½¿ç”¨å®‰å…¨ç­‰äºè¿ç®—ç¬¦ &lt;=&gt; ä¼šæœ‰æ‰€ä¸åŒ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 &lt;=&gt; NULL  #ä¸º0   </span><br><span class="line">NULL&lt;=&gt;NULL #ä¸º1</span><br></pre></td></tr></table></figure></li>
<li><p>LEAST Â GREATEST è¿ç®—ç¬¦ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT LEAST(first_name,last_name)</span><br><span class="line">FROM employees</span><br></pre></td></tr></table></figure></li>
<li><p>IN Â NOT INè¿ç®—ç¬¦ï¼š ç¦»æ•£å€¼æŸ¥æ‰¾</p></li>
</ul>
<p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT last_name</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id IN (10,20,30)</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>LIKE æ¨¡ç³ŠæŸ¥è¯¢ï¼š</p>
<ul>
<li>% 0ä¸ªåŠä»¥ä¸Šçš„å­—ç¬¦å ä½ç¬¦</li>
<li>_ 1ä¸ªå­—ç¬¦å ä½ç¬¦</li>
</ul></li>
<li><p>REGEXP ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…</p></li>
</ul>
<h4 id="æ’åºä¸åˆ†é¡µ">7ã€æ’åºä¸åˆ†é¡µï¼š</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT employee_id</span><br><span class="line">FROM employees</span><br><span class="line">ORDER BY salary DESC;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>å¯ä»¥ä½¿ç”¨åˆ—çš„åˆ«åè¿›è¡Œæ’åºï¼Œä½†ä¸å¯ä»¥ä½¿ç”¨åˆ—çš„åˆ«ååœ¨WHEREä¸­</p></li>
<li><p>å¯ä»¥ä½¿ç”¨ä¸åœ¨SELECTä¸­çš„å­—æ®µè¿›è¡Œæ’åºæ“ä½œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT employee_id,salary,salary*12 AS annual_sal</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id &lt; 50</span><br><span class="line">ORDER BY annual_sal;</span><br></pre></td></tr></table></figure></li>
<li><p>æ•°æ®åº“æŸ¥è¯¢æ“ä½œçš„æ‰§è¡Œé¡ºåºï¼š</p>
<ul>
<li>FROM + WHEREéƒ¨åˆ†æœ€ä¼˜å…ˆ</li>
<li>æ‰§è¡ŒSELECT éƒ¨åˆ†ï¼Œç¡®å®šè¦æŸ¥è¯¢çš„å­—æ®µ</li>
<li>æ‰§è¡ŒORDER BYéƒ¨åˆ†</li>
<li>æ‰§è¡ŒLIMITéƒ¨åˆ†</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">LIMIT $&#123;offset&#125;,$&#123;count&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="å¤šè¡¨æŸ¥è¯¢">8ã€å¤šè¡¨æŸ¥è¯¢ï¼š</h4>
<ul>
<li>è¿æ¥æ¡ä»¶ï¼Œç¬›å¡å°”ç§¯ï¼ŒAè¡¨ä¸­çš„æ¯ä¸€æ¡è®°å½•éƒ½å»å¯¹åº”Bè¡¨ä¸­çš„æ¯ä¸€æ¡è®°å½•ï¼Œè¿›è¡Œç»„åˆã€‚</li>
<li>å¦‚æœæŸ¥è¯¢è¯­å¥ä¸­å‡ºç°äº†å¤šä¸ªè¡¨ä¸­éƒ½å­˜åœ¨çš„å­—æ®µï¼Œåˆ™å¿…é¡»æŒ‡æ˜æ­¤å­—æ®µæ‰€åœ¨çš„è¡¨ã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT employee idï¼Œdepartment name #ä¸¤ä¸ªè¡¨çš„è¿æ¥æ¡ä»¶</span><br><span class="line">FROM employees,departments</span><br><span class="line">WHERE employees.&#x27;department_id&#x27;=departments.department_id</span><br></pre></td></tr></table></figure>
<ul>
<li><p>å¯ä»¥ç»™è¡¨èµ·åˆ«åï¼Œåœ¨SELECTå’ŒWHEREä¸­ä½¿ç”¨è¡¨çš„åˆ«åã€‚æ³¨æ„ï¼šå¦‚æœç»™è¡¨èµ·äº†åˆ«åï¼Œä¸€æ—¦åœ¨SELECTæˆ–WHEREä¸­ä½¿ç”¨è¡¨åçš„è¯ï¼Œåˆ™å¿…é¡»ä½¿ç”¨è¡¨çš„åˆ«åï¼Œè€Œä¸èƒ½å†ä½¿ç”¨è¡¨çš„åŸåã€‚</p></li>
<li><p>å¦‚æœæœ‰nä¸ªè¡¨å®ç°å¤šè¡¨çš„æŸ¥è¯¢ï¼Œåˆ™éœ€è¦è‡³å°‘n-1ä¸ªè¿æ¥æ¡ä»¶</p></li>
<li><p>è‡ªè¿æ¥</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT employee _id, last name, employee id, last_name</span><br><span class="line">FROM employees emy, employees mgr</span><br><span class="line">WHERE emp.manager_id = mgr. employee_id</span><br></pre></td></tr></table></figure></li>
<li><p>å†…è¿æ¥ï¼šåˆå¹¶å…·æœ‰åŒä¸€åˆ—çš„ä¸¤ä¸ªä»¥ä¸Šçš„è¡¨çš„è¡Œï¼Œç»“æœé›†ä¸­ä¸åŒ…å«ä¸€ä¸ªè¡¨ä¸å¦ä¸€ä¸ªè¡¨ä¸åŒ¹é…çš„è¡Œ</p></li>
<li><p>å¤–è¿æ¥ï¼šåˆå¹¶å…·æœ‰åŒä¸€åˆ—çš„ä¸¤ä¸ªä»¥ä¸Šçš„è¡¨çš„è¡Œï¼Œç»“æœé›†ä¸­é™¤äº†åŒ…å«ä¸€ä¸ªè¡¨ä¸å¦ä¸€ä¸ªè¡¨åŒ¹é…çš„è¡Œä¹‹å¤–ï¼Œè¿˜æŸ¥è¯¢åˆ°äº†å·¦è¡¨æˆ–å³è¡¨ä¸­ä¸åŒ¹é…çš„è¡Œã€‚</p>
<ul>
<li>å·¦å¤–è¿æ¥ &amp; å³å¤–è¿æ¥</li>
<li>ä¸¤ä¸ªè¡¨åœ¨è¿æ¥è¿‡ç¨‹ä¸­é™¤äº†è¿”å›æ»¡è¶³è¿æ¥æ¡ä»¶çš„è¡Œä»¥å¤–è¿˜è¿”å›å·¦è¡¨ï¼ˆå³è¡¨ï¼‰ä¸­ä¸æ»¡è¶³æ¡ä»¶çš„è¡Œï¼Œ</li>
</ul></li>
<li><p>ç¤ºä¾‹ï¼šæŸ¥è¯¢<strong>æ‰€æœ‰çš„</strong>å‘˜å·¥çš„last_nameï¼Œdepartment_nameä¿¡æ¯</p></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT last name, department name</span><br><span class="line">FROM employees e LEFT OUTER JOIN departments d</span><br><span class="line">ON e.department_id = d.department_id</span><br></pre></td></tr></table></figure>
<ul>
<li>ç¤ºä¾‹ï¼šæŸ¥è¯¢<strong>æœ‰éƒ¨é—¨çš„</strong>å‘˜å·¥çš„last_nameï¼Œdepartment_nameä¿¡æ¯(å†…è¿æ¥)ï¼Œä½¿ç”¨
JOIN ONè¯­æ³•</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT last name, department name</span><br><span class="line">FROM employees e INNER JOIN departments d</span><br><span class="line">ON e.department_id = d.department_id</span><br></pre></td></tr></table></figure>
<h4 id="unionå…³é”®å­—">9ã€UNIONå…³é”®å­—</h4>
<p>â€‹ ç”¨äºåˆå¹¶ä¸¤ä¸ªç»“æœé›†</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT ... FROM ... </span><br><span class="line">UNION</span><br><span class="line">SELECT ... FROM ...</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220905112924821.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220905112945650.png" /></p>
<p>â€‹
<strong>æ³¨æ„ï¼šæ‰§è¡ŒUNIONALLè¯­å¥æ—¶æ‰€éœ€è¦çš„èµ„æºæ¯”UNIONè¯­å¥å°‘ã€‚å¦‚æœæ˜ç¡®çŸ¥é“åˆå¹¶æ•°æ®åçš„ç»“æœæ•°æ®ä¸å­˜åœ¨é‡å¤æ•°æ®ï¼Œæˆ–è€…ä¸éœ€è¦å»é™¤é‡å¤çš„æ•°æ®ï¼Œåˆ™å°½é‡ä½¿ç”¨UNIONALLè¯­å¥ï¼Œä»¥æé«˜æ•°æ®æŸ¥è¯¢çš„æ•ˆç‡ã€‚</strong></p>
<h4 id="ç§sqlçš„-joinæ“ä½œ">10ã€7ç§SQLçš„ JOINæ“ä½œï¼š</h4>
<p>â€‹ æœ‰äº›å…·ä½“æ•°æ®åº“ä¸æ”¯æŒçš„æ“ä½œï¼Œå¯ä»¥é€šè¿‡UNIONæˆ–UNION
ALLæ¥åˆå¹¶æ”¯æŒæ“ä½œçš„ç»“æœé›†</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220905112815584.png" style="zoom: 80%;" /></p>
<h4 id="natural-join-å’Œ-using-è¿æ¥sql99æ–°ç‰¹æ€§">11ã€NATURAL JOIN å’Œ USING
è¿æ¥ï¼ˆSQL99æ–°ç‰¹æ€§ï¼‰</h4>
<ul>
<li>Natural Join
å®ƒä¼šå¸®ä½ è‡ªåŠ¨æŸ¥è¯¢ä¸¤å¼ è¿æ¥è¡¨ä¸­æ‰€æœ‰æŸ¯åŒçš„å­—æ®µï¼Œç„¶åè¿›è¡Œç­‰å€¼è¿æ¥ã€‚</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220905113547787.png" /></p>
<ul>
<li>ä»¥ä¸‹ä¸¤æ¡è¯­å¥ç­‰ä»·ï¼š</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220905113555008.png" /></p>
<ul>
<li>Using ä¼˜åŒ–ï¼š
<ul>
<li>USINGæŒ‡å®šäº†å…·ä½“çš„ç›¸åŒçš„å­—æ®µåç§°ï¼Œä½ éœ€è¦åœ¨USINGçš„æ‹¬å·ï¼ˆï¼‰ä¸­å¡«å…¥è¦æŒ‡å®šçš„åŒåå­—æ®µã€‚åŒæ—¶ä½¿ç”¨JOIN...USINGå¯ä»¥ç®€åŒ–JOIN
ONçš„ç­‰å€¼è¿æ¥ã€‚å®ƒä¸ä¸‹é¢çš„SQLæŸ¥è¯¢ç»“æœæ˜¯ç›¸åŒçš„ï¼š</li>
</ul></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220905113740065.png" /></p>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ•°æ®åº“ç²¾ç®€ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysqlå„ç±»å‡½æ•°ä¸å­æŸ¥è¯¢</title>
    <url>/2022/09/05/22f2ef21dade/</url>
    <content><![CDATA[<h3 id="ä¸€å‡½æ•°">ä¸€ã€å‡½æ•°</h3>
<h4 id="æµç¨‹æ§åˆ¶å‡½æ•°">1ã€æµç¨‹æ§åˆ¶å‡½æ•°</h4>
<ul>
<li>CASE WHEN THEN</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT employee_id,salary, CASE WHEN salary&gt;=15000 THEN &#x27;é«˜è–ª&#x27;</span><br><span class="line">WHEN salary&gt;=10000 THEN &#x27;æ½œåŠ›è‚¡&#x27;</span><br><span class="line">WHEN salary&gt;=8000 THEN &#x27;å±Œä¸&#x27;</span><br><span class="line">ELSE &#x27;è‰æ ¹&#x27; END &quot;æè¿°&quot;</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>
<ul>
<li>IF &amp;&amp; IFNULL</li>
</ul>
<h4 id="åŠ å¯†ä¸è§£å¯†å‡½æ•°">2ã€åŠ å¯†ä¸è§£å¯†å‡½æ•°</h4>
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220905172002244.png" /></li>
</ul>
<h4 id="mysqlä¿¡æ¯å‡½æ•°">3ã€MYSQLä¿¡æ¯å‡½æ•°</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220905172039855.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220905172112542.png" /></p>
<h4 id="ä¸€äº›å…¶ä»–å•è¡Œå‡½æ•°">4ã€ä¸€äº›å…¶ä»–å•è¡Œå‡½æ•°ï¼š</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220905172140390.png" /></p>
<h4 id="èšåˆå‡½æ•°">5ã€èšåˆå‡½æ•°ï¼š</h4>
<p>â€‹ <strong>è¾“å…¥ä¸€ç»„æ•°æ®çš„é›†åˆï¼Œè¾“å‡ºå•ä¸ªå€¼</strong></p>
<ul>
<li>å¸¸ç”¨çš„èšåˆå‡½æ•°ï¼šAVG SUM MAX MIN</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT AVG(salary),SUM(salary),AVG(salary)*107</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT MAX(salary),MIN(salary)</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>
<ul>
<li>COUNT</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT COUNT(employee_id),COUNT(salary),COUNT(2* salary)</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>COUNTè®¡ç®—æŒ‡å®šå­—æ®µï¼Œæ˜¯ä¸è®¡ç®—è¯¥å­—æ®µä¸ºç©ºå€¼çš„è®°å½•æ•°ç›®çš„</p></li>
<li><p>æ‰€ä»¥å¦‚æœæƒ³è¦è®¡ç®—è¡¨ä¸­æœ‰å¤šå°‘æ¡è®°å½•ï¼Œå¯ä»¥ä½¿ç”¨COUNT(*)</p></li>
</ul>
<p><strong>éœ€æ±‚ï¼šæŸ¥è¯¢å…¬å¸ä¸­å¹³å‡å¥–é‡‘ç‡</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># é”™è¯¯çš„åšæ³•ï¼Œå› ä¸ºæœ‰å¯èƒ½commission_pctä¸ºnull</span><br><span class="line">SELECT AVG(commission_pct)</span><br><span class="line">FROM employees;</span><br><span class="line"># æ­£ç¡®çš„åšæ³•ï¼š</span><br><span class="line">SELECT SUM(commission_pct) / COUNT(IFNULL(commission_pct,0))</span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure>
<ul>
<li>GROUP BY çš„ä½¿ç”¨</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT department_id,AVG(salary)</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœè¦ä½¿ç”¨å¤šä¸ªåˆ—è¿›è¡ŒGROUP BY åˆ†ç»„æ“ä½œï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT department_id,job_id,AVG(salary)</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id,job_id</span><br></pre></td></tr></table></figure>
<p><strong>æç¤ºç»“è®º</strong>ï¼š</p>
<ul>
<li><p>å‡ºç°åœ¨SELECTä¸­çš„éèšåˆå‡½æ•°å­—æ®µï¼Œéƒ½å¿…é¡»å‡ºç°åœ¨GROUP
BYé‡Œé¢ã€‚</p></li>
<li><p>GROUP BY å£°æ˜åœ¨FROMåé¢ã€WHEREåé¢ï¼ŒORDER
BYå‰é¢ã€LIMITå‰é¢</p></li>
<li><p>åœ¨GROUP BYä¸­ä½¿ç”¨ WITH ROLLUPï¼Œä½¿ç”¨WITH
ROLLUPå…³é”®å­—ä¹‹åï¼Œåœ¨æ‰€æœ‰æŸ¥è¯¢å‡ºçš„åˆ†ç»„è®°å½•ä¹‹åå¢åŠ ä¸€æ¡è®°å½•ï¼Œè¯¥è®°å½•è®¡ç®—æŸ¥è¯¢å‡ºçš„æ‰€æœ‰è®°å½•çš„æ€»å’Œï¼Œå³ç»Ÿè®¡è®°å½•æ•°é‡ã€‚</p></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT department_id,AVG(salary) AS avg_sal</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id WITH ROLLUP;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># å½“ä½¿ç”¨ROLLUPæ—¶ï¼Œä¸èƒ½åŒæ—¶ä½¿ç”¨ORDER BYå­å¥è¿›è¡Œç»“æœæ’é‚£ï¼Œå³ROLLUPå’ŒORDER BYæ˜¯äº’ç›¸æ’æ–¥çš„ã€‚</span><br><span class="line">SELECT department_id,AVG(salary) AS avg_sal</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">ORDER BY avg_sal ASC;</span><br></pre></td></tr></table></figure>
<ul>
<li>Havingçš„ä½¿ç”¨ï¼ˆç”¨äºè¿‡æ»¤æ•°æ®ï¼‰
<ul>
<li>å¦‚æœè¿‡æ»¤æ¡ä»¶ä¸­ä½¿ç”¨äº†èšåˆå‡½æ•°ï¼Œå¿…é¡»ä½¿ç”¨HAVINGæ¥æ›¿æ¢WHERE</li>
<li>å¦‚æœè¿‡æ»¤æ¡ä»¶ä¸­æ²¡æœ‰èšåˆå‡½æ•°ï¼Œåˆ™è¿‡æ»¤æ¡ä»¶å£°æ˜åœ¨HAVINGæˆ–WHEREä¸­éƒ½å¯ä»¥</li>
</ul></li>
</ul>
<p><strong>æŸ¥è¯¢å„ä¸ªéƒ¨é—¨ä¸­æœ€é«˜å·¥èµ„æ¯”10000é«˜çš„éƒ¨é—¨ä¿¡æ¯ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT department_id,MAX(salary)</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">HAVING MAX(salary) &gt; 10000</span><br></pre></td></tr></table></figure>
<h4 id="where-å’Œ-havingçš„åŒºåˆ«">6ã€WHERE å’Œ HAVINGçš„åŒºåˆ«ï¼š</h4>
<ul>
<li>åŒºåˆ«1ï¼šWHEREå¯ä»¥ç›´æ¥ä½¿ç”¨è¡¨ä¸­çš„å­—æ®µä½œä¸ºç­›é€‰æ¡ä»¶ï¼Œä½†ä¸èƒ½ä½¿ç”¨åˆ†ç»„ä¸­çš„è®¡ç®—å‡½æ•°ä½œä¸ºç­›é€‰æ¡ä»¶ï¼›HAVINGå¿…é¡»è¦ä¸GROUPBYé…åˆä½¿ç”¨ï¼Œå¯ä»¥æŠŠåˆ†ç»„è®¡ç®—çš„å‡½æ•°å’Œåˆ†ç»„å­—æ®µä½œä¸ºç­›é€‰æ¡ä»¶ã€‚</li>
<li>åŒºåˆ«2ï¼šå¦‚æœéœ€è¦é€šè¿‡è¿æ¥ä»å…³è”è¡¨ä¸­è·å–éœ€è¦çš„æ•°æ®ï¼ŒWHEREæ˜¯å…ˆç­›é€‰åè¿æ¥ï¼Œè€Œ
HAVINGæ˜¯å…ˆè¿æ¥åç­›é€‰ã€‚è¿™ä¸€ç‚¹ï¼Œå°±å†³å®šäº†åœ¨å…³è”æŸ¥è¯¢ä¸­ï¼ŒWHEREæ¯”HAVINGæ›´é«˜æ•ˆã€‚å› ä¸ºWHEREå¯ä»¥å…ˆç­›é€‰ï¼Œç”¨ä¸€ä¸ªç­›é€‰åçš„è¾ƒå°æ•°æ®é›†å’Œå…³è”è¡¨è¿›è¡Œè¿æ¥ï¼Œè¿™æ ·å ç”¨çš„èµ„æºæ¯”è¾ƒå°‘ï¼Œæ‰§è¡Œæ•ˆç‡ä¹Ÿæ¯”è¾ƒé«˜ã€‚HAVINGåˆ™éœ€è¦å…ˆæŠŠç»“æœé›†å‡†å¤‡å¥½ï¼Œä¹Ÿå°±æ˜¯ç”¨æœªè¢«ç­›é€‰çš„æ•°æ®é›†è¿›è¡Œå…³è”ï¼Œç„¶åå¯¹è¿™ä¸ªå¤§çš„æ•°æ®é›†è¿›è¡Œç­›é€‰ï¼Œè¿™æ ·å ç”¨çš„èµ„æºå°±æ¯”è¾ƒå¤šï¼Œæ‰§è¡Œæ•ˆç‡ä¹Ÿè¾ƒä½ã€‚</li>
</ul>
<h4 id="sqlåº•å±‚æ‰§è¡ŒåŸç†">7ã€SQLåº•å±‚æ‰§è¡ŒåŸç†ï¼š</h4>
<p>Selectè¯­å¥çš„å®Œæ•´ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># sql92</span><br><span class="line">SELECT ... , ... , ... (å­˜åœ¨èšåˆå‡½æ•°)</span><br><span class="line">FROM ... , ... , ...</span><br><span class="line">WHERE å¤šè¡¨è¿æ¥æ¡ä»¶ AND ä¸åŒ…å«èšåˆå‡½æ•°çš„è¿‡æ»¤æ¡ä»¶</span><br><span class="line">GROUP BY ...</span><br><span class="line">HAVING åŒ…å«èšåˆå‡½æ•°çš„è¿‡æ»¤æ¡ä»¶</span><br><span class="line">ORDER BY ... (ASC/DESC)</span><br><span class="line">LIMIT ...,...</span><br><span class="line"></span><br><span class="line"># sql92</span><br><span class="line">SELECT ... , ... , ... (å­˜åœ¨èšåˆå‡½æ•°)</span><br><span class="line">FROM ... JOIN ... ON å¤šè¡¨è¿æ¥æ¡ä»¶</span><br><span class="line">JOIN ... ON ...</span><br><span class="line">WHERE ä¸åŒ…å«èšåˆå‡½æ•°çš„è¿‡æ»¤æ¡ä»¶</span><br><span class="line">GROUP BY ...</span><br><span class="line">HAVING åŒ…å«èšåˆå‡½æ•°çš„è¿‡æ»¤æ¡ä»¶</span><br><span class="line">ORDER BY ... (ASC/DESC)</span><br><span class="line">LIMIT ...,...</span><br></pre></td></tr></table></figure>
<ul>
<li>SQLè¯­å¥å¦‚ä½•æ‰§è¡Œï¼Œæ‰§è¡Œè¿‡ç¨‹ï¼Ÿ
<ul>
<li>FROMâ€”&gt; ON( å¤šè¡¨è¿æ¥æ¡ä»¶)â€”&gt; ( LEFT / RIGHT JOIN
æ ¹æ®å·¦å¤–å³å¤–è¿æ¥è¡¥å……æ•°æ® ) â€”&gt; WHEREï¼ˆç­›é€‰æ•°æ®ï¼‰</li>
<li>â€”&gt; GROUP BYï¼ˆåˆ†ç»„ï¼‰ â€”&gt; HAVINGï¼ˆåˆ†ç»„åç­›é€‰ï¼‰ â€”&gt;
SELECTï¼ˆé€‰æ‹©ï¼‰ â€”&gt; ORDER BYï¼ˆæ’åºï¼‰ â€”&gt;</li>
<li>LIMIT ï¼ˆé™åˆ¶æ¡æ•°ï¼‰</li>
</ul></li>
</ul>
<h3 id="äºŒå­æŸ¥è¯¢">äºŒã€å­æŸ¥è¯¢</h3>
<p>â€‹
å¾ˆå¤šæ—¶å€™æŸ¥è¯¢éœ€è¦ä»ç»“æœé›†ä¸­è·å–æ•°æ®ï¼Œæˆ–è€…<strong>éœ€è¦ä»åŒä¸€ä¸ªè¡¨ä¸­å…ˆè®¡ç®—å¾—å‡ºä¸€ä¸ªæ•°æ®ç»“æœï¼Œç„¶åä¸è¿™ä¸ªæ•°æ®ç»“æœï¼ˆå¯èƒ½æ˜¯æŸä¸ªæ ‡é‡ï¼Œä¹Ÿå¯èƒ½æ˜¯æŸä¸ªé›†åˆï¼‰è¿›è¡Œæ¯”è¾ƒã€‚</strong></p>
<p>â€‹ <strong>è™½ç„¶æœ‰çš„æ—¶å€™å­æŸ¥è¯¢å¯ä»¥é€šè¿‡
ä¸¤ä¸ªè¿ç»­çš„SQLæŸ¥è¯¢æˆ–è‡ªè¿æ¥å®ç°åŒæ ·çš„åŠŸèƒ½ï¼Œä½†æ˜¯å­æŸ¥è¯¢æ€§èƒ½æ›´ä¼˜ã€‚</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT last_name,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary &gt; (</span><br><span class="line"> 			SELECT salary</span><br><span class="line">			FROM employees</span><br><span class="line">			WHERE last_name = &#x27;Abel&#x27;</span><br><span class="line"> 			);</span><br></pre></td></tr></table></figure>
<p>â€‹ <strong>å­æŸ¥è¯¢åœ¨ä¸»æŸ¥è¯¢ä¹‹å‰ä¸€æ¬¡æ‰§è¡Œå®Œæˆ</strong></p>
<p>â€‹ <strong>å°†å­æŸ¥è¯¢æ”¾åœ¨æ¯”è¾ƒæ¡ä»¶çš„å³ä¾§</strong></p>
<p>â€‹ <strong>å•è¡Œæ“ä½œå¯¹åº”å•è¡Œå­æŸ¥è¯¢ï¼Œå¤šè¡Œæ“ä½œå¯¹åº”å¤šè¡Œå­æŸ¥è¯¢</strong></p>
<h4
id="å†…æŸ¥è¯¢è¿”å›çš„ç»“æœæ¡ç›®æ•°å•è¡Œå¤šè¡Œå­æŸ¥è¯¢">1ã€å†…æŸ¥è¯¢è¿”å›çš„ç»“æœæ¡ç›®æ•°ï¼ˆå•è¡Œã€å¤šè¡Œå­æŸ¥è¯¢ï¼‰ï¼š</h4>
<ul>
<li><p>å•è¡Œå­æŸ¥è¯¢ï¼ˆå†…æŸ¥è¯¢è¿”å›å•è¡Œæ•°æ®ï¼‰</p></li>
<li><p>å¤šè¡Œå­æŸ¥è¯¢ï¼šåº”å½“ä½¿ç”¨å¤šè¡Œæ¯”è¾ƒæ“ä½œç¬¦ï¼š IN ï¼Œ ANY ï¼Œ ALL</p>
<ul>
<li><p>è¿”å›å…¶å®ƒjob_idä¸­æ¯”job_idä¸º 'IT_PROG'
éƒ¨é—¨ä»»ä¸€å·¥èµ„ä½çš„å‘˜å·¥çš„å‘˜å·¥å·</p></li>
<li><p>```mysql SELECT employee_id,last_name,job_id,salary FROM
employees WHERE job_id &lt;&gt; 'IT_PROG' AND salary &lt; ANY ( SELECT
salary FROM employees WHERE job id = 'IT PROG' );
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#### 2ã€å†…æŸ¥è¯¢æ˜¯å¦è¢«æ‰§è¡Œå¤šæ¬¡ï¼ˆç›¸å…³å­æŸ¥è¯¢ã€ä¸ç›¸å…³å­æŸ¥è¯¢ï¼‰ï¼š</span><br><span class="line"></span><br><span class="line">- ç›¸å…³å­æŸ¥è¯¢</span><br><span class="line"></span><br><span class="line">  - å†…æŸ¥è¯¢è¿”å›çš„å€¼ä¸å¤–æŸ¥è¯¢ç›¸å…³</span><br><span class="line"></span><br><span class="line">  - å¦‚æœå­æŸ¥è¯¢çš„æ‰§è¡Œä¾èµ–äºå¤–éƒ¨æŸ¥è¯¢ï¼Œé€šå¸¸æƒ…å†µä¸‹éƒ½æ˜¯å› ä¸ºå­æŸ¥è¯¢ä¸­çš„è¡¨ç”¨åˆ°äº†å¤–éƒ¨çš„è¡¨ï¼Œå¹¶è¿›è¡Œäº†æ¡ä»¶å…³è”ï¼Œ**å› æ­¤æ¯æ‰§è¡Œä¸€æ¬¡å¤–éƒ¨æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢éƒ½è¦é‡æ–°è®¡ç®—ä¸€æ¬¡ï¼Œè¿™æ ·çš„å­æŸ¥è¯¢å°±ç§°ä¹‹ä¸ºå…³è”å­æŸ¥è¯¢ã€‚**</span><br><span class="line"></span><br><span class="line">    ```mysql</span><br><span class="line">    # æŸ¥è¯¢å·¥èµ„å¤§äºæœ¬éƒ¨é—¨å¹³å‡å·¥èµ„çš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line">    # å¼ ä¸‰åœ¨éƒ¨é—¨Aï¼Œæå››åœ¨éƒ¨é—¨Bï¼Œé‚£ä¹ˆå¼ ä¸‰æ¥æŸ¥å’Œæå››æ¥æŸ¥ï¼Œå†…æŸ¥è¯¢æŸ¥çš„æ˜¯å„è‡ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„ï¼Œè¿”å›çš„æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯å†…æŸ¥è¯¢æ‰§è¡Œäº†å¤šæ¬¡</span><br></pre></td></tr></table></figure></p></li>
</ul></li>
</ul>
<p>â€‹ <strong>æ‰§è¡Œæµç¨‹</strong>ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220907113232810.png" style="zoom: 67%;" /></p>
<p><strong>æŸ¥è¯¢å‘˜å·¥ä¸­å·¥èµ„å¤§äºæœ¬éƒ¨é—¨å¹³å‡å·¥èµ„çš„å‘˜å·¥çš„lat_nameï¼Œsalaryå’Œå…¶department_id</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT last_name,salry,department_id</span><br><span class="line">FROM employees AS e1</span><br><span class="line">WHERE salry &gt; (</span><br><span class="line">			SELECT AVG(salary) as avg_sal</span><br><span class="line">			FROM employees as e2</span><br><span class="line">			WHERE e2.department_id = e1.department_id</span><br><span class="line">			GROUP BY department_id )</span><br></pre></td></tr></table></figure>
<p><strong>æŸ¥è¯¢å‘˜å·¥çš„id,salary,æŒ‰ç…§department_nameæ’åº</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT employee id, salary</span><br><span class="line">FROM employees AS e</span><br><span class="line">ORDER BY(</span><br><span class="line">		SELECT department_name</span><br><span class="line">		FROM departments AS d</span><br><span class="line">		WHERE e.department_id = d.department_id </span><br><span class="line">) ASC;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>ä¸ç›¸å…³å­æŸ¥è¯¢</p>
<ul>
<li><p>å†…æŸ¥è¯¢è¿”å›çš„å€¼ä¸å¤–æŸ¥è¯¢æ— å…³</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># æŸ¥è¯¢å·¥èµ„å¤§äºæœ¬å…¬å¸å¹³å‡å·¥èµ„çš„å‘˜å·¥ä¿¡æ¯</span><br><span class="line"># å¼ ä¸‰åœ¨éƒ¨é—¨Aï¼Œæå››åœ¨éƒ¨é—¨Bï¼Œé‚£ä¹ˆå¼ ä¸‰æ¥æŸ¥å’Œæå››æ¥æŸ¥ï¼Œå†…æŸ¥è¯¢æŸ¥çš„éƒ½æ˜¯å…¨å…¬å¸çš„å¹³å‡å·¥èµ„ï¼Œè¿”å›çš„æ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯å†…æŸ¥è¯¢æ‰§è¡Œäº†ä¸€æ¬¡</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li><p>ç›¸å…³å­æŸ¥è¯¢ç»“è®ºï¼š<strong>åœ¨SELECTè¯­å¥ä¸­ï¼Œé™¤äº†GROUP BY å’Œ
LIMITä¹‹å¤–ï¼Œå…¶ä»–åœ°æ–¹éƒ½å¯ä»¥å£°æ˜å­æŸ¥è¯¢</strong></p></li>
</ul>
<h4
id="ç›¸å…³å­æŸ¥è¯¢ä¸­çš„exists-å’Œ-not-existså…³é”®å­—">3ã€ç›¸å…³å­æŸ¥è¯¢ä¸­çš„EXISTS å’Œ
NOT EXISTSå…³é”®å­—</h4>
<ul>
<li><p>å¦‚æœåœ¨å­æŸ¥è¯¢ä¸­ä¸å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„è¡Œï¼š</p>
<ul>
<li><p>æ¡ä»¶è¿”å› FALSE</p></li>
<li><p>ç»§ç»­åœ¨å­æŸ¥è¯¢ä¸­æŸ¥æ‰¾</p></li>
</ul></li>
<li><p>å¦‚æœåœ¨å­æŸ¥è¯¢ä¸­å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„è¡Œï¼š</p>
<ul>
<li>ä¸åœ¨å­æŸ¥è¯¢ä¸­ç»§ç»­æŸ¥æ‰¾</li>
<li>æ¡ä»¶è¿”å› TRUE</li>
</ul></li>
</ul>
<p><strong>æŸ¥è¯¢å…¬å¸ç®¡ç†è€…çš„employee_idï¼Œlast_nameï¼Œjob_idï¼Œdepartment_idä¿¡æ¯</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT employee id, last name, job id, department id</span><br><span class="line">FROM employees e1</span><br><span class="line">WHERE EXISTS(</span><br><span class="line">			SELECT *</span><br><span class="line">			FROM employees e2</span><br><span class="line">			WHERE e1.employee_id= e2.manager_id</span><br><span class="line">		 );</span><br><span class="line"># å°†å¤–æŸ¥è¯¢ä¸­çš„ç¬¬1æ¡è®°å½•é€å…¥å­æŸ¥è¯¢ä¸­ï¼Œæ‰§è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœå­˜åœ¨åˆ™è¿”å›TRUE</span><br><span class="line"># å°†å¤–æŸ¥è¯¢ä¸­çš„ç¬¬2æ¡è®°å½•é€å…¥å­æŸ¥è¯¢ä¸­ï¼Œæ‰§è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœå­˜åœ¨åˆ™è¿”å›TRUE</span><br><span class="line"># å°†å¤–æŸ¥è¯¢ä¸­çš„ç¬¬...æ¡è®°å½•é€å…¥å­æŸ¥è¯¢ä¸­ï¼Œæ‰§è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœå­˜åœ¨åˆ™è¿”å›TRUE   </span><br><span class="line"># ç›¸å…³å­æŸ¥è¯¢çš„æ‰§è¡Œè¿‡ç¨‹å°±æ˜¯å¦‚ä¸Šæ‰€è¿°</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ•°æ®åº“ç²¾ç®€ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysql çº¦æŸ</title>
    <url>/2022/09/10/ee0ee8e192df/</url>
    <content><![CDATA[<h3 id="ä¸€çº¦æŸ">ä¸€ã€çº¦æŸ</h3>
<p>â€‹ çº¦æŸæ˜¯è¡¨çº§çš„å¼ºåˆ¶è§„å®š,å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹è¡¨çš„çº¦æŸ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT * FROM information_schema.table_constraints</span><br><span class="line">WHERE table name=&#x27;â€™&#x27;è¡¨åç§°&#x27;ï¼›</span><br></pre></td></tr></table></figure>
<h3 id="äºŒéç©ºçº¦æŸ">äºŒã€éç©ºçº¦æŸ</h3>
<p>â€‹ å•åˆ—çº¦æŸï¼Œä¸èƒ½ç»„åˆéç©ºå€¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE test(</span><br><span class="line">	id INT NOT NULL,</span><br><span class="line">    email CHAR</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">ALTER TABLE test</span><br><span class="line">MODIFY email CHAR NOT NULL;</span><br><span class="line"></span><br><span class="line">ALTER TABLE test</span><br><span class="line">MODIFY id INT NULL;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸‰å”¯ä¸€æ€§çº¦æŸ">ä¸‰ã€å”¯ä¸€æ€§çº¦æŸ</h3>
<p>â€‹ å•åˆ—çº¦æŸï¼Œå…è®¸å‡ºç°å¤šä¸ªNULLå€¼ï¼Œå¯ä»¥å¤šä¸ªåˆ—çš„ç»„åˆå”¯ä¸€</p>
<ul>
<li>å”¯ä¸€æ€§çº¦æŸå…è®¸åˆ—å€¼ä¸ºç©ºã€‚</li>
<li>åœ¨åˆ›å»ºå”¯ä¸€çº¦æŸçš„æ—¶å€™ï¼Œå¦‚æœä¸ç»™å”¯ä¸€çº¦æŸå‘½åï¼Œå°±é»˜è®¤å’Œåˆ—åç›¸åŒã€‚</li>
<li><strong>MySQLä¼šç»™å”¯ä¸€çº¦æŸçš„åˆ—ä¸Šé»˜è®¤åˆ›å»ºä¸€ä¸ªå”¯ä¸€ç´¢å¼•ã€‚</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE USER(</span><br><span class="line">    id INT NOT NULL,</span><br><span class="line">    CNAME VARCHAR(25) UNIQUE,  # åˆ—çº§çº¦æŸè¯­æ³•</span><br><span class="line">    NAME VARCHAR(25),</span><br><span class="line">    PASSWORD VARCHAR(16),</span><br><span class="line">    # ä½¿ç”¨è¡¨çº§çº¦æŸè¯­æ³•</span><br><span class="line">    CONSTRAINT uk_name_pwd UNIQUE(NAME,PASSWORD) # ç”¨æˆ·åå’Œå¯†ç ç»„åˆä¸èƒ½é‡å¤</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>å¤åˆå”¯ä¸€çº¦æŸ</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table student_course(</span><br><span class="line">    id int,</span><br><span class="line">    sid int,</span><br><span class="line">    cid int,</span><br><span class="line">    score int,</span><br><span class="line">    unique key(sid,cid) #å¤åˆå”¯ä¸€</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="å››ä¸»é”®çº¦æŸ">å››ã€ä¸»é”®çº¦æŸ</h3>
<ul>
<li>ä¸»é”®çº¦æŸç›¸å½“äºå”¯ä¸€çº¦æŸ+éç©ºçº¦æŸçš„ç»„åˆï¼Œä¸»é”®çº¦æŸåˆ—ä¸å…è®¸é‡å¤ï¼Œä¹Ÿä¸å…è®¸å‡ºç°ç©ºå€¼ã€‚</li>
<li>ä¸»é”®çº¦æŸå¯¹åº”ç€è¡¨ä¸­çš„ä¸€åˆ—æˆ–è€…å¤šåˆ—ï¼ˆå¤åˆä¸»é”®ï¼‰</li>
<li>MySQLçš„ä¸»é”®åæ€»æ˜¯PRIMARYï¼Œå°±ç®—è‡ªå·±å‘½åäº†ä¸»é”®çº¦æŸåä¹Ÿæ²¡ç”¨ã€‚</li>
<li>å½“åˆ›å»ºä¸»é”®çº¦æŸæ—¶ï¼Œç³»ç»Ÿé»˜è®¤ä¼šåœ¨æ‰€åœ¨çš„åˆ—æˆ–åˆ—ç»„åˆä¸Šå»ºç«‹å¯¹åº”çš„ä¸»é”®ç´¢å¼•</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE emp4(</span><br><span class="line">    id INT PRIMARY KEY AUTO_INCREMENT ,</span><br><span class="line">    NAME VARCHAR(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table student_course(</span><br><span class="line">    sid int,</span><br><span class="line">    cid int,</span><br><span class="line">    score int,</span><br><span class="line">    primary key(sid,cid) #å¤åˆä¸»é”®</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">alter table è¡¨åç§° drop primary key;</span><br></pre></td></tr></table></figure>
<h3 id="äº”auto_increment">äº”ã€AUTO_INCREMENT</h3>
<ul>
<li>ä¸€ä¸ªè¡¨æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªè‡ªå¢é•¿åˆ—</li>
<li>å½“éœ€è¦äº§ç”Ÿå”¯ä¸€æ ‡è¯†ç¬¦æˆ–é¡ºåºå€¼æ—¶ï¼Œå¯è®¾ç½®è‡ªå¢é•¿</li>
<li>è‡ªå¢é•¿åˆ—çº¦æŸçš„åˆ—å¿…é¡»æ˜¯é”®åˆ—ï¼ˆä¸»é”®åˆ—ï¼Œå”¯ä¸€é”®åˆ—ï¼‰</li>
<li>è‡ªå¢çº¦æŸçš„åˆ—çš„æ•°æ®ç±»å‹å¿…é¡»æ˜¯æ•´æ•°ç±»å‹</li>
<li>å¦‚æœè‡ªå¢åˆ—æŒ‡å®šäº† 0 å’Œ
nullï¼Œä¼šåœ¨å½“å‰æœ€å¤§å€¼çš„åŸºç¡€ä¸Šè‡ªå¢ï¼›å¦‚æœè‡ªå¢åˆ—æ‰‹åŠ¨æŒ‡å®šäº†å…·ä½“å€¼ï¼Œç›´æ¥
èµ‹å€¼ä¸ºå…·ä½“å€¼ã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table è¡¨åç§°(</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ primary key auto_increment,</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ unique key not null,</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ unique key,</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼,</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„ï¼šè‡ªå¢ä¸»é”®çš„æŒä¹…åŒ–ï¼š</strong></p>
<p>â€‹ åœ¨MySQL 5.7ç³»ç»Ÿä¸­ï¼Œå¯¹äºè‡ªå¢ä¸»é”®çš„åˆ†é…è§„åˆ™ï¼Œæ˜¯ç”±InnoDBæ•°æ®å­—å…¸
å†…éƒ¨ä¸€ä¸ª è®¡æ•°å™¨ æ¥å†³å®šçš„ï¼Œè€Œè¯¥è®¡æ•°å™¨åªåœ¨ å†…å­˜ä¸­ç»´æŠ¤
ï¼Œå¹¶ä¸ä¼šæŒä¹…åŒ–åˆ°ç£ç›˜ä¸­ã€‚å½“æ•°æ®åº“é‡å¯æ—¶ï¼Œè¯¥ è®¡æ•°å™¨ä¼šè¢«åˆå§‹åŒ–ã€‚</p>
<p>â€‹ MySQL 8.0å°†è‡ªå¢ä¸»é”®çš„è®¡æ•°å™¨æŒä¹…åŒ–åˆ° é‡åšæ—¥å¿—
ä¸­ã€‚æ¯æ¬¡è®¡æ•°å™¨å‘ç”Ÿæ”¹å˜ï¼Œéƒ½ä¼šå°†å…¶å†™å…¥é‡åšæ—¥å¿—
ä¸­ã€‚å¦‚æœæ•°æ®åº“é‡å¯ï¼ŒInnoDBä¼šæ ¹æ®é‡åšæ—¥å¿—ä¸­çš„ä¿¡æ¯æ¥åˆå§‹åŒ–è®¡æ•°å™¨çš„å†…å­˜å€¼</p>
<h3 id="å…­å¤–é”®çº¦æŸ">å…­ã€å¤–é”®çº¦æŸ</h3>
<p><strong>ä»è¡¨çš„å¤–é”®åˆ—ï¼Œå¿…é¡»å¼•ç”¨/å‚è€ƒä¸»è¡¨çš„ä¸»é”®æˆ–å”¯ä¸€çº¦æŸçš„åˆ—</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table dept( #ä¸»è¡¨</span><br><span class="line">    did int primary key, #éƒ¨é—¨ç¼–å·</span><br><span class="line">    dname varchar(50) #éƒ¨é—¨åç§°</span><br><span class="line">);</span><br><span class="line">create table emp(#ä»è¡¨</span><br><span class="line">    eid int primary key, #å‘˜å·¥ç¼–å·</span><br><span class="line">    ename varchar(5), #å‘˜å·¥å§“å</span><br><span class="line">    deptid int, #å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨</span><br><span class="line">    foreign key (deptid) references dept(did) #åœ¨ä»è¡¨ä¸­æŒ‡å®šå¤–é”®çº¦æŸ</span><br><span class="line">    #empè¡¨çš„deptidå’Œå’Œdeptè¡¨çš„didçš„æ•°æ®ç±»å‹ä¸€è‡´ï¼Œæ„ä¹‰éƒ½æ˜¯è¡¨ç¤ºéƒ¨é—¨çš„ç¼–å·</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>çº¦æŸç­‰çº§</strong>ï¼š</p>
<ul>
<li>Cascadeæ–¹å¼
ï¼šåœ¨çˆ¶è¡¨ä¸Šupdate/deleteè®°å½•æ—¶ï¼ŒåŒæ­¥update/deleteæ‰å­è¡¨çš„åŒ¹é…è®°å½•</li>
<li>Set nullæ–¹å¼
ï¼šåœ¨çˆ¶è¡¨ä¸Šupdate/deleteè®°å½•æ—¶ï¼Œå°†å­è¡¨ä¸ŠåŒ¹é…è®°å½•çš„åˆ—è®¾ä¸ºnullï¼Œä½†æ˜¯è¦æ³¨æ„å­
è¡¨çš„å¤–é”®åˆ—ä¸èƒ½ä¸ºnot null</li>
<li>No actionæ–¹å¼
ï¼šå¦‚æœå­è¡¨ä¸­æœ‰åŒ¹é…çš„è®°å½•ï¼Œåˆ™ä¸å…è®¸å¯¹çˆ¶è¡¨å¯¹åº”å€™é€‰é”®è¿›è¡Œupdate/deleteæ“ä½œ</li>
<li>Restrictæ–¹å¼ ï¼šåŒno actionï¼Œ éƒ½æ˜¯ç«‹å³æ£€æŸ¥å¤–é”®çº¦æŸ</li>
<li>Set defaultæ–¹å¼
ï¼ˆåœ¨å¯è§†åŒ–å·¥å…·SQLyogä¸­å¯èƒ½æ˜¾ç¤ºç©ºç™½ï¼‰ï¼šçˆ¶è¡¨æœ‰å˜æ›´æ—¶ï¼Œå­è¡¨å°†å¤–é”®åˆ—è®¾ç½®
æˆä¸€ä¸ªé»˜è®¤çš„å€¼ï¼Œä½†Innodbä¸èƒ½è¯†åˆ«</li>
</ul>
<p><strong>å¯¹äºå¤–é”®çº¦æŸï¼Œæœ€å¥½æ˜¯é‡‡ç”¨: ON UPDATE CASCADE ON DELETE
RESTRICT çš„æ–¹å¼ã€‚</strong></p>
<p><strong>åœ¨ MySQL
é‡Œï¼Œå¤–é”®çº¦æŸæ˜¯æœ‰æˆæœ¬çš„ï¼Œéœ€è¦æ¶ˆè€—ç³»ç»Ÿèµ„æºã€‚å¯¹äºå¤§å¹¶å‘çš„ SQL
æ“ä½œï¼Œæœ‰å¯èƒ½ä¼šä¸é€‚ åˆã€‚æ¯”å¦‚å¤§å‹ç½‘ç«™çš„ä¸­å¤®æ•°æ®åº“ï¼Œå¯èƒ½ä¼š
å› ä¸ºå¤–é”®çº¦æŸçš„ç³»ç»Ÿå¼€é”€è€Œå˜å¾—éå¸¸æ…¢ ã€‚æ‰€ä»¥ï¼Œ MySQL å…
è®¸ä½ ä¸ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„å¤–é”®çº¦æŸï¼Œåœ¨ åº”ç”¨å±‚é¢
å®Œæˆæ£€æŸ¥æ•°æ®ä¸€è‡´æ€§çš„é€»è¾‘ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿ä½ ä¸
ç”¨å¤–é”®çº¦æŸï¼Œä¹Ÿè¦æƒ³åŠæ³•é€šè¿‡åº”ç”¨å±‚é¢çš„é™„åŠ é€»è¾‘ï¼Œæ¥å®ç°å¤–é”®çº¦æŸçš„åŠŸèƒ½ï¼Œç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚</strong></p>
<p><strong>ä¸€äº›æç¤ºï¼šã€ å¼ºåˆ¶
ã€‘ä¸å¾—ä½¿ç”¨å¤–é”®ä¸çº§è”ï¼Œä¸€åˆ‡å¤–é”®æ¦‚å¿µå¿…é¡»åœ¨åº”ç”¨å±‚è§£å†³ã€‚
è¯´æ˜ï¼šï¼ˆæ¦‚å¿µè§£é‡Šï¼‰å­¦ç”Ÿè¡¨ä¸­çš„ student_id æ˜¯ä¸»é”®ï¼Œé‚£ä¹ˆæˆç»©è¡¨ä¸­çš„
student_id åˆ™ä¸ºå¤–é”®ã€‚å¦‚æœæ›´æ–°å­¦ ç”Ÿè¡¨ä¸­çš„ student_idï¼ŒåŒæ—¶è§¦å‘æˆç»©è¡¨ä¸­çš„
student_id æ›´æ–°ï¼Œå³ä¸ºçº§è”æ›´æ–°ã€‚å¤–é”®ä¸çº§è”æ›´æ–°é€‚ç”¨äº å• æœºä½å¹¶å‘ ï¼Œä¸é€‚åˆ
åˆ†å¸ƒå¼ ã€ é«˜å¹¶å‘é›†ç¾¤ ï¼›çº§è”æ›´æ–°æ˜¯å¼ºé˜»å¡ï¼Œå­˜åœ¨æ•°æ®åº“ æ›´æ–°é£æš´
çš„é£é™©ï¼›å¤–é”®å½±å“ æ•°æ®åº“çš„ æ’å…¥é€Ÿåº¦ ã€‚</strong></p>
<h3 id="ä¸ƒæ£€æŸ¥çº¦æŸä¸é»˜è®¤å€¼çº¦æŸ">ä¸ƒã€æ£€æŸ¥çº¦æŸä¸é»˜è®¤å€¼çº¦æŸ</h3>
<h4 id="checkçº¦æŸ">1 CHECKçº¦æŸ</h4>
<p>â€‹ æ£€æŸ¥æŸä¸ªå­—æ®µçš„å€¼æ˜¯å¦ç¬¦åˆxxè¦æ±‚ï¼Œä¸€èˆ¬æŒ‡çš„æ˜¯å€¼çš„èŒƒå›´</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE temp(</span><br><span class="line">    id INT AUTO_INCREMENT,</span><br><span class="line">    NAME VARCHAR(20),</span><br><span class="line">    age INT CHECK(age &gt; 20),</span><br><span class="line">    PRIMARY KEY(id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="default-çº¦æŸ">2 DEFAULT çº¦æŸ</h4>
<p>ç»™æŸä¸ªå­—æ®µ/æŸåˆ—æŒ‡å®šé»˜è®¤å€¼ï¼Œä¸€æ—¦è®¾ç½®é»˜è®¤å€¼ï¼Œåœ¨æ’å…¥æ•°æ®æ—¶ï¼Œå¦‚æœæ­¤å­—æ®µæ²¡æœ‰æ˜¾å¼èµ‹å€¼ï¼Œåˆ™èµ‹å€¼ä¸ºé»˜
è®¤å€¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table è¡¨åç§°(</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ primary key,</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ unique key not null,</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ unique key,</span><br><span class="line">    å­—æ®µå æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼,</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>ä¸€äº›é—®é¢˜</strong>ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆä¸æƒ³è¦ null çš„å€¼
<ul>
<li>1ï¼‰ä¸å¥½æ¯”è¾ƒã€‚nullæ˜¯ä¸€ç§ç‰¹æ®Šå€¼ï¼Œæ¯”è¾ƒæ—¶åªèƒ½ç”¨ä¸“é—¨çš„is null å’Œ is not
nullæ¥æ¯”è¾ƒã€‚ç¢°åˆ°è¿ç®—ç¬¦ï¼Œé€š å¸¸è¿”å›nullã€‚</li>
<li>2ï¼‰æ•ˆç‡ä¸é«˜ã€‚å½±å“æé«˜ç´¢å¼•æ•ˆæœã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¾€å¾€åœ¨å»ºè¡¨æ—¶ not null
default '' æˆ– default 0</li>
</ul></li>
</ul>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ•°æ®åº“ç²¾ç®€ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysql DDLä¸DCLæ“ä½œã€å¢åˆ æ”¹ä¸æ•°æ®ç±»å‹</title>
    <url>/2022/09/07/60ff079d7c8c/</url>
    <content><![CDATA[<h3 id="ä¸€ä¸€äº›ddlä¸dclæ“ä½œ">ä¸€ã€ä¸€äº›DDLä¸DCLæ“ä½œï¼š</h3>
<h4 id="æ•°æ®åº“ç›¸å…³æ“ä½œ">1ã€æ•°æ®åº“ç›¸å…³æ“ä½œï¼š</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE DATABASE mytest1 CHARACTER SET &#x27;utf8&#x27;;</span><br><span class="line">ALTER DATABASE mytest1 CHARACTER SET &#x27;utf8mb4&#x27;;</span><br><span class="line">DROP DATABASE IF EXISTS mytest1;  //åˆ é™¤æ•°æ®åº“</span><br></pre></td></tr></table></figure>
<h4 id="æ•°æ®è¡¨ç›¸å…³æ“ä½œ">2ã€æ•°æ®è¡¨ç›¸å…³æ“ä½œï¼š</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE IF NOT EXISTS myempl(</span><br><span class="line">id INT,</span><br><span class="line">emp_name VARCHAR(15),</span><br><span class="line">hire_date DATE); # åˆ›å»ºè¡¨</span><br><span class="line"></span><br><span class="line">DESC myempl;  # æŸ¥çœ‹è¡¨ç»“æ„</span><br><span class="line"></span><br><span class="line"># é€šè¿‡ç°æœ‰è¡¨å»ºç«‹æ–°è¡¨ï¼Œä¼šå¯¼å…¥ç°æœ‰è¡¨æ•°æ®</span><br><span class="line">CREATE TABLE myemp3</span><br><span class="line">AS </span><br><span class="line">SELECT *</span><br><span class="line">FROM employees</span><br><span class="line"></span><br><span class="line"># ç»“åˆå­æŸ¥è¯¢ï¼Œé€šè¿‡ç°æœ‰è¡¨æ‰§è¡Œ</span><br><span class="line">CREATE TABLE myemp3</span><br><span class="line">AS </span><br><span class="line">SELECT e.employee_id emp_id,e.last_name lname,d.department name</span><br><span class="line">FROM employees e JOIN departments d</span><br><span class="line">ON e.department id = d. department id;</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹è¡¨</span><br><span class="line"># ====== æ·»åŠ ä¸€ä¸ªå­—æ®µ ====== </span><br><span class="line">ALTER TABLE myemp1</span><br><span class="line">ADD salary DOUBLE(10,2);  # é»˜è®¤æ·»åŠ åˆ°è¡¨ä¸­çš„æœ€åä¸€ä¸ªå­—æ®µ</span><br><span class="line"></span><br><span class="line">ALTER TABLE myemp1</span><br><span class="line">ADD salary DOUBLE(10,2) FIRST;  # æ·»åŠ åˆ°è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå­—æ®µ</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹ä¸€ä¸ªå­—æ®µ</span><br><span class="line">ALTER TABLE myemp1</span><br><span class="line">MODIFY salary DOUBLE(10,2) DEFAULT &#x27;aaa&#x27;;  # æ·»åŠ åˆ°è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå­—æ®µ</span><br><span class="line"></span><br><span class="line"># é‡å‘½åä¸€ä¸ªå­—æ®µ</span><br><span class="line">ALTER TABLE dept80</span><br><span class="line">CHANGE department_name dept_name varchar(15);</span><br><span class="line"></span><br><span class="line"># åˆ é™¤ä¸€ä¸ªå­—æ®µ</span><br><span class="line">ALTER TABLE myemp1 DROP salary</span><br><span class="line"></span><br><span class="line"># é‡å‘½åè¡¨</span><br><span class="line">RENAME TABLE myemp1</span><br><span class="line">TO myemp11</span><br><span class="line"></span><br><span class="line"># åˆ é™¤è¡¨</span><br><span class="line">DROP TABLE myemp1 IF EXISTS</span><br><span class="line"></span><br><span class="line"># æ¸…ç©ºè¡¨</span><br><span class="line">TRUNCATE TABLE myemp1;</span><br><span class="line">#ã€å‚è€ƒã€‘TRUNCATE TABLE æ¯” DELETE é€Ÿåº¦å¿«ï¼Œä¸”ä½¿ç”¨çš„ç³»ç»Ÿå’Œäº‹åŠ¡æ—¥å¿—èµ„æºå°‘ï¼Œä½† TRUNCATE æ— äº‹åŠ¡ä¸”ä¸è§¦å‘ TRIGGERï¼Œæœ‰å¯èƒ½é€ æˆäº‹æ•…ï¼Œæ•…ä¸å»ºè®®åœ¨å¼€å‘ä»£ç ä¸­ä½¿ç”¨æ­¤è¯­å¥ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="äºŒddl-å’Œ-dmlçš„è¯´æ˜">äºŒã€DDL å’Œ DMLçš„è¯´æ˜</h3>
<p>â€‹ DDLçš„æ“ä½œä¸€æ—¦æ‰§è¡Œï¼Œå°±ä¸å¯å›æ»šã€‚</p>
<p>â€‹
DMLçš„æ“ä½œé»˜è®¤æƒ…å†µï¼Œä¸€æ—¦æ‰§è¡Œï¼Œä¹Ÿæ˜¯ä¸å¯å›æ»šçš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœåœ¨æ‰§è¡ŒDLä¹‹å‰ï¼Œæ‰§è¡Œäº†SET
autocommit=FALSEï¼Œåˆ™æ‰§è¡Œçš„DMLæ“ä½œå°±å¯ä»¥å®ç°å›æ»šã€‚</p>
<h3 id="ä¸‰mysql8-ddlçš„åŸå­åŒ–">ä¸‰ã€MYSQL8 â€”â€”DDLçš„åŸå­åŒ–ï¼š</h3>
<p>â€‹
åœ¨MySQL8.0ç‰ˆæœ¬ä¸­ï¼ŒInnoDBè¡¨çš„DDLæ”¯æŒäº‹åŠ¡å®Œæ•´æ€§ï¼Œå³DDLæ“ä½œè¦ä¹ˆæˆåŠŸè¦ä¹ˆå›æ»šã€‚DDLæ“ä½œå›æ»šæ—¥å¿—å†™å…¥åˆ°data
dictionaryæ•°æ®å­—å…¸è¡¨mysql.innodb_ddlIlogï¼ˆè¯¥è¡¨æ˜¯éšè—çš„è¡¨ï¼Œé€šè¿‡show
tablesæ— æ³•çœ‹åˆ°ï¼‰ä¸­ï¼Œç”¨äºå›æ»šæ“ä½œã€‚é€šè¿‡è®¾ç½®å‚æ•°ï¼Œå¯å°†DDLæ“ä½œæ—¥å¿—æ‰“å°è¾“å‡ºåˆ°MySQLé”™è¯¯æ—¥å¿—ä¸­ã€‚</p>
<h3 id="å››å¢åˆ æ”¹">å››ã€å¢åˆ æ”¹</h3>
<h4 id="å¢">1ã€å¢</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">INSERT INTO departments(department_id, department_name)</span><br><span class="line">VALUES (80, &#x27;IT&#x27;);</span><br><span class="line"></span><br><span class="line">INSERT INTO emp(emp_id,emp_name)</span><br><span class="line">VALUES (1001,&#x27;shkstart&#x27;),</span><br><span class="line">(1002,&#x27;atguigu&#x27;),</span><br><span class="line">(1003,&#x27;Tom&#x27;);</span><br><span class="line"></span><br><span class="line"># é€šè¿‡SELECTæ¥å¢åŠ </span><br><span class="line">INSERT INTO sales_reps(id, name, salary, commission_pct)</span><br><span class="line">SELECT employee_id, last_name, salary, commission_pct</span><br><span class="line">FROM employees</span><br><span class="line">WHERE job_id LIKE &#x27;%REP%&#x27;;</span><br></pre></td></tr></table></figure>
<h4 id="åˆ ">2ã€åˆ </h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DELETE FROM departments</span><br><span class="line">WHERE department_name = &#x27;Finance&#x27;;</span><br></pre></td></tr></table></figure>
<h4 id="æ”¹">3ã€æ”¹</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">UPDATE employees</span><br><span class="line">SET department_id = 70</span><br><span class="line">WHERE employee_id = 113;</span><br></pre></td></tr></table></figure>
<h4 id="mysql8-è®¡ç®—åˆ—">4ã€MYSQL8 è®¡ç®—åˆ—ï¼š</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE tb1(</span><br><span class="line">    id INT,</span><br><span class="line">    a INT,</span><br><span class="line">    b INT,</span><br><span class="line">    c INT GENERATED ALWAYS AS (a + b) VIRTUAL</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="äº”æ•°æ®ç±»å‹è¯¦è§£">äº”ã€æ•°æ®ç±»å‹è¯¦è§£ï¼š</h3>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220910112143456.png" style="zoom:67%;" /></p>
<h4 id="æ•´å‹">1ã€æ•´å‹</h4>
<ul>
<li><p>TINYINT 1å­—èŠ‚
ä¸€èˆ¬ç”¨äºæšä¸¾æ•°æ®ï¼Œæ¯”å¦‚ç³»ç»Ÿè®¾å®šå–å€¼èŒƒå›´å¾ˆå°ä¸”å›ºå®šçš„åœºæ™¯</p></li>
<li><p>SMALLINT 2å­—èŠ‚
å¯ä»¥ç”¨äºè¾ƒå°èŒƒå›´çš„ç»Ÿè®¡æ•°æ®ï¼Œæ¯”å¦‚ç»Ÿè®¡å·¥å‚çš„å›ºå®šèµ„äº§åº“å­˜æ•°é‡</p></li>
<li><p>MEDUIMINT 3å­—èŠ‚ ç”¨äºè¾ƒå¤§æ•´æ•°çš„è®¡ç®—ï¼Œæ¯”å¦‚è½¦ç«™æ¯æ—¥çš„å®¢æµé‡</p></li>
<li><p>INT4å­—èŠ‚
å–å€¼èŒƒå›´è¶³å¤Ÿå¤§ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸ç”¨è€ƒè™‘è¶…é™é—®é¢˜ï¼Œç”¨å¾—æœ€å¤šã€‚æ¯”å¦‚å•†å“ç¼–å·</p></li>
<li><p>BIGINT 8å­—èŠ‚
åªæœ‰å½“ä½ å¤„ç†ç‰¹åˆ«å·¨å¤§çš„æ•´æ•°æ—¶æ‰ä¼šç”¨åˆ°ã€‚æ¯”å¦‚åŒåä¸€çš„äº¤æ˜“é‡ã€å¤§å‹é—¨æˆ·ç½‘ç«™ç‚¹å‡»é‡ã€è¯
åˆ¸å…¬å¸è¡ç”Ÿäº§å“æŒä»“ç­‰</p></li>
<li><p>å¯é€‰å±æ€§</p>
<ul>
<li>UNSIGNED æ— ç¬¦å·å±æ€§</li>
<li>ZEROFILL é›¶å¡«å……</li>
</ul></li>
</ul>
<h4 id="æµ®ç‚¹ç±»å‹">2ã€æµ®ç‚¹ç±»å‹</h4>
<ul>
<li>FLOAT</li>
<li>DOUBLE</li>
</ul>
<p>â€‹
å¦‚æœç”¨åˆ°æµ®ç‚¹æ•°ï¼Œè¦ç‰¹åˆ«æ³¨æ„è¯¯å·®é—®é¢˜ï¼Œå› ä¸ºæµ®ç‚¹æ•°æ˜¯ä¸å‡†ç¡®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦é¿å…ä½¿ç”¨â€œ=â€æ¥
â€‹
åˆ¤æ–­ä¸¤ä¸ªæ•°æ˜¯å¦ç›¸ç­‰ã€‚åŒæ—¶ï¼Œåœ¨ä¸€äº›å¯¹ç²¾ç¡®åº¦è¦æ±‚è¾ƒé«˜çš„é¡¹ç›®ä¸­ï¼Œåƒä¸‡ä¸è¦ä½¿ç”¨æµ®ç‚¹æ•°ï¼Œä¸ç„¶ä¼šå¯¼è‡´ç»“
æœé”™è¯¯ï¼Œç”šè‡³æ˜¯é€ æˆä¸å¯æŒ½å›çš„æŸå¤±</p>
<h4 id="å®šç‚¹æ•°ç±»å‹">3ã€å®šç‚¹æ•°ç±»å‹ï¼š</h4>
<ul>
<li><p>DECIMAL(M,D)</p></li>
<li><p>è¡¨ç¤ºé«˜ç²¾åº¦å°æ•°ã€‚å…¶ä¸­ï¼ŒMè¢«ç§°ä¸ºç²¾åº¦ï¼ŒDè¢«ç§°ä¸ºæ ‡åº¦ã€‚0&lt;=M&lt;=65ï¼Œ
0&lt;=D&lt;=30ï¼ŒD&lt;Mã€‚ä¾‹å¦‚ï¼Œå®šä¹‰DECIMALï¼ˆ5,2ï¼‰çš„ç±»å‹ï¼Œè¡¨ç¤ºè¯¥åˆ—å–å€¼èŒƒå›´æ˜¯-999.99~999.99ã€‚</p></li>
<li><p>DECIMAL
çš„å­˜å‚¨ç©ºé—´å¹¶ä¸æ˜¯å›ºå®šçš„ï¼Œç”±ç²¾åº¦å€¼Må†³å®šï¼Œæ€»å…±å ç”¨çš„å­˜å‚¨ç©ºé—´ä¸ºM+2ä¸ªå­—èŠ‚ã€‚ä¹Ÿå°±æ˜¯
è¯´ï¼Œåœ¨ä¸€äº›å¯¹ç²¾åº¦è¦æ±‚ä¸é«˜çš„åœºæ™¯ä¸‹ï¼Œæ¯”èµ·å ç”¨åŒæ ·å­—èŠ‚é•¿åº¦çš„å®šç‚¹æ•°ï¼Œæµ®ç‚¹æ•°è¡¨è¾¾çš„æ•°å€¼èŒƒå›´å¯
ä»¥æ›´å¤§ä¸€äº›ã€‚</p></li>
<li><p>å®šç‚¹æ•°åœ¨MySQLå†…éƒ¨æ˜¯ä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿›è¡Œå­˜å‚¨ï¼Œè¿™å°±å†³å®šäº†<strong>å®ƒä¸€å®šæ˜¯ç²¾å‡†çš„</strong>ã€‚</p></li>
</ul>
<h4 id="ä½ç±»å‹">4ã€ä½ç±»å‹</h4>
<ul>
<li>BIT(M)</li>
<li>å¦‚æœæ²¡æœ‰æŒ‡å®š(M)ï¼Œé»˜è®¤æ˜¯1ä½ã€‚è¿™ä¸ª1ä½ï¼Œè¡¨ç¤ºåªèƒ½å­˜1ä½çš„äºŒè¿›åˆ¶å€¼ã€‚è¿™é‡Œ(M)æ˜¯è¡¨ç¤ºäºŒè¿›åˆ¶çš„
ä½æ•°ï¼Œä½æ•°æœ€å°å€¼ä¸º1ï¼Œæœ€å¤§å€¼ä¸º64ã€‚</li>
</ul>
<h4 id="æ—¥æœŸä¸æ—¶é—´ç±»å‹">5ã€æ—¥æœŸä¸æ—¶é—´ç±»å‹</h4>
<ul>
<li><p>YEAR ç±»å‹é€šå¸¸ç”¨æ¥è¡¨ç¤ºå¹´</p></li>
<li><p>DATE ç±»å‹é€šå¸¸ç”¨æ¥è¡¨ç¤ºå¹´ã€æœˆã€æ—¥</p></li>
<li><p>TIME ç±»å‹é€šå¸¸ç”¨æ¥è¡¨ç¤ºæ—¶ã€åˆ†ã€ç§’</p></li>
<li><p>DATETIME ç±»å‹é€šå¸¸ç”¨æ¥è¡¨ç¤ºå¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’</p></li>
<li><p>TIMESTAMP ç±»å‹é€šå¸¸ç”¨æ¥è¡¨ç¤ºå¸¦æ—¶åŒºçš„å¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’</p></li>
<li><p>DATETIMEå ç”¨8ä¸ªå­—èŠ‚</p></li>
<li><p>TIMESTAMPå ç”¨4ä¸ªå­—èŠ‚ï¼ŒTIMESTAMPåº•å±‚å­˜å‚¨çš„æ˜¯æ¯«ç§’å€¼</p></li>
<li><p>DATETIME å’Œ TIMESTAMPå·®åˆ«ï¼š</p>
<ul>
<li>TIMESTAMPå­˜å‚¨çš„æ—¶é—´èŒƒå›´æ¯”DATETIMEè¦å°å¾ˆå¤šï¼Œåªèƒ½å­˜å‚¨â€œ1970-01-01
00:00:01 UTCâ€åˆ°â€œ2038-01-19 03:14:07
UTCâ€ä¹‹é—´çš„æ—¶é—´ã€‚å­˜å‚¨æ•°æ®çš„æ—¶å€™éœ€è¦å¯¹å½“å‰æ—¶é—´æ‰€åœ¨çš„æ—¶åŒºè¿›è¡Œè½¬æ¢ï¼ŒæŸ¥è¯¢æ•°æ®çš„æ—¶å€™å†å°†æ—¶é—´è½¬æ¢å›å½“å‰çš„æ—¶
åŒºã€‚å› æ­¤ï¼Œä½¿ç”¨TIMESTAMPå­˜å‚¨çš„åŒä¸€ä¸ªæ—¶é—´å€¼ï¼Œåœ¨ä¸åŒçš„æ—¶åŒºæŸ¥è¯¢æ—¶ä¼šæ˜¾ç¤ºä¸åŒçš„æ—¶é—´</li>
<li>TIMESTAMPä¼šæ ¹æ®ç”¨æˆ·çš„æ—¶åŒºä¸åŒï¼Œæ˜¾ç¤ºä¸åŒçš„ç»“æœã€‚è€ŒDATETIMEåˆ™åªèƒ½
åæ˜ å‡ºæ’å…¥æ—¶å½“åœ°çš„æ—¶åŒºï¼Œå…¶ä»–æ—¶åŒºçš„äººæŸ¥çœ‹æ•°æ®å¿…ç„¶ä¼šæœ‰è¯¯å·®çš„,éœ€è¦é¢å¤–åšå¤„ç†</li>
</ul></li>
</ul>
<h4 id="æ–‡æœ¬å­—ç¬¦ä¸²ç±»å‹">6ã€æ–‡æœ¬å­—ç¬¦ä¸²ç±»å‹</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220910143332516.png" /></p>
<ul>
<li>ä½•æ—¶ä½¿ç”¨CHARï¼Ÿä½•æ—¶ä½¿ç”¨VARCHARï¼Ÿ
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220910143612992.png" /></li>
<li>æƒ…å†µ1ï¼šå­˜å‚¨å¾ˆçŸ­çš„ä¿¡æ¯ã€‚æ¯”å¦‚é—¨ç‰Œå·ç 101ï¼Œ201....è¿™æ ·å¾ˆçŸ­çš„ä¿¡æ¯åº”è¯¥ç”¨charï¼Œå› ä¸ºvarcharè¿˜è¦å ä¸ªbyteç”¨äº
å­˜å‚¨ä¿¡æ¯é•¿åº¦ï¼Œæœ¬æ¥æ‰“ç®—èŠ‚çº¦å­˜å‚¨çš„ï¼Œç»“æœå¾—ä¸å¿å¤±ã€‚</li>
<li>æƒ…å†µ2ï¼šå›ºå®šé•¿åº¦çš„ã€‚æ¯”å¦‚ä½¿ç”¨uuidä½œä¸ºä¸»é”®ï¼Œé‚£ç”¨charåº”è¯¥æ›´åˆé€‚ã€‚å› ä¸ºä»–å›ºå®šé•¿åº¦ï¼ŒvarcharåŠ¨æ€æ ¹æ®é•¿åº¦çš„ç‰¹æ€§å°±æ¶ˆå¤±äº†ï¼Œè€Œä¸”è¿˜è¦å ä¸ªé•¿åº¦ä¿¡æ¯ã€‚</li>
<li>æƒ…å†µ3ï¼šååˆ†é¢‘ç¹æ”¹å˜çš„åˆ—ï¼Œå› ä¸ºvarcharçš„æ¯æ¬¡å­˜å‚¨éƒ½éœ€è¦æœ‰é¢å¤–çš„è®¡ç®—ï¼Œå¾—åˆ°é•¿åº¦ç­‰å·¥ä½œã€‚å¦‚æœä¸€ä¸ªéå¸¸é¢‘ç¹æ”¹å˜çš„è¯ï¼Œä¼šåˆè¾ƒå¤šçš„å°å·ç”¨äºè®¡ç®—ã€‚</li>
<li>æƒ…å†µ4ï¼šå…·ä½“å­˜å‚¨å¼•æ“çš„æƒ…å†µï¼š
<ul>
<li>InnoDB
å­˜å‚¨å¼•æ“ï¼Œå»ºè®®ä½¿ç”¨VARCHARç±»å‹ã€‚å› ä¸ºå¯¹äºInnoDBæ•°æ®è¡¨ï¼Œå†…éƒ¨çš„è¡Œå­˜å‚¨æ ¼å¼å¹¶æ²¡æœ‰åŒº
åˆ†å›ºå®šé•¿åº¦å’Œå¯å˜é•¿åº¦åˆ—ï¼ˆæ‰€æœ‰æ•°æ®è¡Œéƒ½ä½¿ç”¨æŒ‡å‘æ•°æ®åˆ—å€¼çš„å¤´æŒ‡é’ˆï¼‰ï¼Œè€Œä¸”ä¸»è¦å½±å“æ€§èƒ½çš„å› ç´ 
æ˜¯æ•°æ®è¡Œä½¿ç”¨çš„å­˜å‚¨æ€»é‡ï¼Œç”±äºcharå¹³å‡å ç”¨çš„ç©ºé—´å¤šäºvarcharï¼Œæ‰€ä»¥é™¤äº†ç®€çŸ­å¹¶ä¸”å›ºå®šé•¿åº¦çš„ï¼Œ
å…¶ä»–è€ƒè™‘varcharã€‚è¿™æ ·èŠ‚çœç©ºé—´ï¼Œå¯¹ç£ç›˜I/Oå’Œæ•°æ®å­˜å‚¨æ€»é‡æ¯”è¾ƒå¥½ã€‚</li>
</ul></li>
</ul></li>
<li>å…³äºTEXTå­—æ®µï¼š
<ul>
<li>TEXTæ–‡æœ¬ç±»å‹ï¼Œå¯ä»¥å­˜æ¯”è¾ƒå¤§çš„æ–‡æœ¬æ®µï¼Œæœç´¢é€Ÿåº¦ç¨æ…¢ï¼Œå› æ­¤å¦‚æœä¸æ˜¯ç‰¹åˆ«å¤§çš„å†…å®¹ï¼Œå»ºè®®ä½¿ç”¨CHARï¼Œ
VARCHARæ¥ä»£æ›¿ã€‚è¿˜æœ‰TEXTç±»å‹ä¸ç”¨åŠ é»˜è®¤å€¼ï¼ŒåŠ äº†ä¹Ÿæ²¡ç”¨ã€‚è€Œä¸”textå’Œblobç±»å‹çš„æ•°æ®åˆ é™¤åå®¹æ˜“å¯¼è‡´
â€œç©ºæ´â€ï¼Œä½¿å¾—æ–‡ä»¶ç¢ç‰‡æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥é¢‘ç¹ä½¿ç”¨çš„è¡¨ä¸å»ºè®®åŒ…å«TEXTç±»å‹å­—æ®µï¼Œå»ºè®®å•ç‹¬åˆ†å‡ºå»ï¼Œå•ç‹¬ç”¨
ä¸€ä¸ªè¡¨ã€‚</li>
</ul></li>
<li>å…³äºENUMå’ŒSET
<ul>
<li>è®¾ç½®å­—æ®µå€¼æ—¶ï¼ŒENUMç±»å‹åªå…è®¸ä»æˆå‘˜ä¸­é€‰å–å•ä¸ªå€¼ï¼Œä¸èƒ½ä¸€æ¬¡é€‰å–å¤šä¸ªå€¼ã€‚</li>
<li>SETç±»å‹åœ¨é€‰å–æˆå‘˜æ—¶ï¼Œå¯ä»¥ä¸€æ¬¡é€‰æ‹©å¤šä¸ªæˆå‘˜ï¼Œè¿™ä¸€ç‚¹ä¸ENUMç±»å‹ä¸åŒã€‚</li>
</ul></li>
</ul>
<h4 id="äºŒè¿›åˆ¶å­—ç¬¦ä¸²">7ã€äºŒè¿›åˆ¶å­—ç¬¦ä¸²</h4>
<p>BINARY VARBINARY BLOB</p>
<ul>
<li>ä½¿ç”¨TEXTå’ŒBLOBæ—¶çš„æ³¨æ„äº‹é¡¹ï¼š
<ul>
<li>BLOBå’ŒTEXTå€¼ä¹Ÿä¼šå¼•èµ·è‡ªå·±çš„ä¸€äº›é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯æ‰§è¡Œäº†å¤§é‡çš„åˆ é™¤æˆ–æ›´æ–°æ“ä½œçš„æ—¶å€™ã€‚åˆ é™¤è¿™ç§å€¼
ä¼šåœ¨æ•°æ®è¡¨ä¸­ç•™ä¸‹å¾ˆå¤§çš„"
ç©ºæ´"ï¼Œä»¥åå¡«å…¥è¿™äº›"ç©ºæ´"çš„è®°å½•å¯èƒ½é•¿åº¦ä¸åŒã€‚ä¸ºäº†æé«˜æ€§èƒ½ï¼Œå»ºè®®å®šæœŸ ä½¿ç”¨
OPTIMIZE TABLE åŠŸèƒ½å¯¹è¿™ç±»è¡¨è¿›è¡Œç¢ç‰‡æ•´ç†ã€‚</li>
<li>å¦‚æœéœ€è¦å¯¹å¤§æ–‡æœ¬å­—æ®µè¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ï¼ŒMySQL
æä¾›äº†å‰ç¼€ç´¢å¼•ã€‚ä½†æ˜¯ä»ç„¶è¦åœ¨ä¸å¿…è¦çš„æ—¶å€™é¿å…æ£€
ç´¢å¤§å‹çš„BLOBæˆ–TEXTå€¼ã€‚ä¾‹å¦‚ï¼ŒSELECT *
æŸ¥è¯¢å°±ä¸æ˜¯å¾ˆå¥½çš„æƒ³æ³•ï¼Œé™¤éä½ èƒ½å¤Ÿç¡®å®šä½œä¸ºçº¦æŸæ¡ä»¶çš„
WHEREå­å¥åªä¼šæ‰¾åˆ°æ‰€éœ€è¦çš„æ•°æ®è¡Œã€‚å¦åˆ™ï¼Œä½ å¯èƒ½æ¯«æ— ç›®çš„åœ°åœ¨ç½‘ç»œä¸Šä¼ è¾“å¤§é‡çš„å€¼ã€‚</li>
<li>æŠŠBLOBæˆ–TEXTåˆ—åˆ†ç¦»åˆ°å•ç‹¬çš„è¡¨ä¸­ã€‚åœ¨æŸäº›ç¯å¢ƒä¸­ï¼Œå¦‚æœæŠŠè¿™äº›æ•°æ®åˆ—ç§»åŠ¨åˆ°ç¬¬äºŒå¼ æ•°æ®è¡¨ä¸­ï¼Œå¯
ä»¥è®©ä½ æŠŠåŸæ•°æ®è¡¨ä¸­çš„æ•°æ®åˆ—è½¬æ¢ä¸ºå›ºå®šé•¿åº¦çš„æ•°æ®è¡Œæ ¼å¼ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯æœ‰æ„ä¹‰çš„ã€‚è¿™ä¼šå‡å°‘ä¸»è¡¨ä¸­çš„
ç¢ç‰‡ï¼Œä½¿ä½ å¾—åˆ°å›ºå®šé•¿åº¦æ•°æ®è¡Œçš„æ€§èƒ½ä¼˜åŠ¿ã€‚å®ƒè¿˜ä½¿ä½ åœ¨ä¸»æ•°æ®è¡¨ä¸Šè¿è¡Œ SELECT
* æŸ¥è¯¢çš„æ—¶å€™ä¸ä¼šé€šè¿‡ ç½‘ç»œä¼ è¾“å¤§é‡çš„BLOBæˆ–TEXTå€¼ã€‚</li>
</ul></li>
</ul>
<h4 id="jsonç±»å‹">8ã€JSONç±»å‹ï¼š</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">INSERT INTO test_json (js)</span><br><span class="line">VALUES (&#x27;&#123;&quot;name&quot;:&quot;songhk&quot;, &quot;age&quot;:18, &quot;address&quot;:&#123;&quot;province&quot;:&quot;beijing&quot;,</span><br><span class="line">&quot;city&quot;:&quot;beijing&quot;&#125;&#125;&#x27;);</span><br></pre></td></tr></table></figure>
<h4 id="ç©ºé—´ç±»å‹">9ã€ç©ºé—´ç±»å‹ï¼š</h4>
<p>â€‹ MySQL
ç©ºé—´ç±»å‹æ‰©å±•æ”¯æŒåœ°ç†ç‰¹å¾çš„ç”Ÿæˆã€å­˜å‚¨å’Œåˆ†æã€‚è¿™é‡Œçš„åœ°ç†ç‰¹å¾è¡¨ç¤ºä¸–ç•Œä¸Šå…·æœ‰ä½ç½®çš„ä»»ä½•ä¸œ
è¥¿ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå®ä½“ï¼Œä¾‹å¦‚ä¸€åº§å±±ï¼›å¯ä»¥æ˜¯ç©ºé—´ï¼Œä¾‹å¦‚ä¸€åº§åŠå…¬æ¥¼ï¼›ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯å®šä¹‰çš„ä½ç½®ï¼Œä¾‹å¦‚
ä¸€ä¸ªåå­—è·¯å£ç­‰ç­‰ã€‚MySQLä¸­ä½¿ç”¨Geometryï¼ˆå‡ ä½•ï¼‰
æ¥è¡¨ç¤ºæ‰€æœ‰åœ°ç†ç‰¹å¾ã€‚GeometryæŒ‡ä¸€ä¸ªç‚¹æˆ–ç‚¹çš„
é›†åˆï¼Œä»£è¡¨ä¸–ç•Œä¸Šä»»ä½•å…·æœ‰ä½ç½®çš„äº‹ç‰©ã€‚</p>
<h4 id="æ€»ç»“">10ã€æ€»ç»“ï¼š</h4>
<ul>
<li>ä»»ä½•å­—æ®µå¦‚æœä¸ºéè´Ÿæ•°ï¼Œå¿…é¡»æ˜¯ UNSIGNED</li>
<li>ã€å¼ºåˆ¶ã€‘å°æ•°ç±»å‹ä¸º DECIMALï¼Œç¦æ­¢ä½¿ç”¨ FLOAT å’Œ
DOUBLEã€‚è¯´æ˜ï¼šåœ¨å­˜å‚¨çš„æ—¶å€™ï¼ŒFLOAT å’Œ DOUBLE
éƒ½å­˜åœ¨ç²¾åº¦æŸå¤±çš„é—®é¢˜ï¼Œå¾ˆå¯èƒ½åœ¨æ¯”è¾ƒå€¼çš„æ—¶å€™ï¼Œå¾—åˆ°ä¸æ­£ç¡®çš„ç»“æœã€‚å¦‚æœå­˜å‚¨çš„æ•°æ®èŒƒå›´è¶…è¿‡
DECIMAL çš„èŒƒå›´ï¼Œå»ºè®®å°†æ•°æ®æ‹†æˆæ•´æ•°å’Œå°æ•°å¹¶åˆ†å¼€å­˜å‚¨ã€‚</li>
<li>ã€å¼ºåˆ¶ã€‘å¦‚æœå­˜å‚¨çš„å­—ç¬¦ä¸²é•¿åº¦å‡ ä¹ç›¸ç­‰ï¼Œä½¿ç”¨ CHAR
å®šé•¿å­—ç¬¦ä¸²ç±»å‹ã€‚</li>
<li>ã€å¼ºåˆ¶ã€‘VARCHAR æ˜¯å¯å˜é•¿å­—ç¬¦ä¸²ï¼Œä¸é¢„å…ˆåˆ†é…å­˜å‚¨ç©ºé—´ï¼Œé•¿åº¦ä¸è¦è¶…è¿‡
5000ã€‚å¦‚æœå­˜å‚¨é•¿åº¦å¤§ äºæ­¤å€¼ï¼Œå®šä¹‰å­—æ®µç±»å‹ä¸º
TEXTï¼Œç‹¬ç«‹å‡ºæ¥ä¸€å¼ è¡¨ï¼Œç”¨ä¸»é”®æ¥å¯¹åº”ï¼Œé¿å…å½±å“å…¶å®ƒå­—æ®µç´¢å¼•æ•ˆç‡ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ•°æ®åº“ç²¾ç®€ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysql è§†å›¾ï¼Œå­˜å‚¨è¿‡ç¨‹ä¸å‡½æ•°</title>
    <url>/2022/09/12/108274e25ef3/</url>
    <content><![CDATA[<h3 id="ä¸€è§†å›¾">ä¸€ã€è§†å›¾</h3>
<p>â€‹
<strong>è§†å›¾ä¸€æ–¹é¢å¯ä»¥å¸®æˆ‘ä»¬ä½¿ç”¨è¡¨çš„ä¸€éƒ¨åˆ†è€Œä¸æ˜¯æ‰€æœ‰çš„è¡¨ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥é’ˆå¯¹ä¸åŒçš„ç”¨æˆ·åˆ¶å®šä¸åŒçš„æŸ¥
è¯¢è§†å›¾ã€‚æ¯”å¦‚ï¼Œé’ˆå¯¹ä¸€ä¸ªå…¬å¸çš„é”€å”®äººå‘˜ï¼Œæˆ‘ä»¬åªæƒ³ç»™ä»–çœ‹éƒ¨åˆ†æ•°æ®ï¼Œè€ŒæŸäº›ç‰¹æ®Šçš„æ•°æ®ï¼Œæ¯”å¦‚é‡‡è´­çš„
ä»·æ ¼ï¼Œåˆ™ä¸ä¼šæä¾›ç»™ä»–ã€‚å†æ¯”å¦‚ï¼Œäººå‘˜è–ªé…¬æ˜¯ä¸ªæ•æ„Ÿçš„å­—æ®µï¼Œé‚£ä¹ˆåªç»™æŸä¸ªçº§åˆ«ä»¥ä¸Šçš„äººå‘˜å¼€æ”¾ï¼Œå…¶ä»–
äººçš„æŸ¥è¯¢è§†å›¾ä¸­åˆ™ä¸æä¾›è¿™ä¸ªå­—æ®µã€‚</strong></p>
<ul>
<li><p>è§†å›¾æ˜¯ä¸€ç§è™šæ‹Ÿè¡¨ï¼Œæœ¬èº«æ˜¯ä¸å…·æœ‰æ•°æ®çš„ï¼Œå ç”¨å¾ˆå°‘çš„å†…å­˜ç©ºé—´</p></li>
<li><p>è§†å›¾å»ºç«‹åœ¨å·²æœ‰è¡¨çš„åŸºç¡€ä¸Š, è§†å›¾èµ–ä»¥å»ºç«‹çš„è¿™äº›è¡¨ç§°ä¸ºåŸºè¡¨</p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220912195718829.png" /></p>
<ul>
<li><p>è§†å›¾çš„åˆ›å»ºå’Œåˆ é™¤åªå½±å“è§†å›¾æœ¬èº«ï¼Œä¸å½±å“å¯¹åº”çš„åŸºè¡¨ã€‚ä½†æ˜¯å½“å¯¹è§†å›¾ä¸­çš„æ•°æ®è¿›è¡Œå¢åŠ ã€åˆ é™¤å’Œ
ä¿®æ”¹æ“ä½œæ—¶ï¼Œæ•°æ®è¡¨ä¸­çš„æ•°æ®ä¼šç›¸åº”åœ°å‘ç”Ÿå˜åŒ–ï¼Œåä¹‹äº¦ç„¶ã€‚</p></li>
<li><p>è§†å›¾ï¼Œæ˜¯å‘ç”¨æˆ·æä¾›åŸºè¡¨æ•°æ®çš„å¦ä¸€ç§è¡¨ç°å½¢å¼ã€‚<strong>é€šå¸¸æƒ…å†µä¸‹ï¼Œå°å‹é¡¹ç›®çš„æ•°æ®åº“å¯ä»¥ä¸ä½¿ç”¨è§†
å›¾ï¼Œä½†æ˜¯åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œä»¥åŠæ•°æ®è¡¨æ¯”è¾ƒå¤æ‚çš„æƒ…å†µä¸‹ï¼Œè§†å›¾çš„ä»·å€¼å°±å‡¸æ˜¾å‡ºæ¥äº†ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘
ä»¬æŠŠç»å¸¸æŸ¥è¯¢çš„ç»“æœé›†æ”¾åˆ°è™šæ‹Ÿè¡¨ä¸­ï¼Œæå‡ä½¿ç”¨æ•ˆç‡ã€‚ç†è§£å’Œä½¿ç”¨èµ·æ¥éƒ½éå¸¸æ–¹ä¾¿</strong></p></li>
</ul>
<h3 id="äºŒåˆ›å»ºè§†å›¾">äºŒã€åˆ›å»ºè§†å›¾ï¼š</h3>
<ul>
<li>åˆ›å»ºå•è¡¨è§†å›¾</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE VIEW empvu80</span><br><span class="line">AS</span><br><span class="line">SELECT employee_id, last_name, salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id = 80;</span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ›å»ºå¤šè¡¨è”åˆè§†å›¾ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE VIEW empview</span><br><span class="line">AS</span><br><span class="line">SELECT employee_id emp_id,last_name NAME,department_name</span><br><span class="line">FROM employees e,departments d</span><br><span class="line">WHERE e.department_id = d.department_id;</span><br></pre></td></tr></table></figure>
<ul>
<li>å¯ä»¥åˆ©ç”¨è§†å›¾æ¥å¯¹æ•°æ®è¿›è¡Œæ ¼å¼åŒ–ï¼š</li>
</ul>
<p>â€‹
æ¯”å¦‚æˆ‘ä»¬æƒ³è¾“å‡ºå‘˜å·¥å§“åå’Œå¯¹åº”çš„éƒ¨é—¨åï¼Œå¯¹åº”æ ¼å¼ä¸ºemp_name(department_name)ï¼Œå°±å¯ä»¥ä½¿ç”¨è§†å›¾æ¥å®Œæˆæ•°æ®æ ¼å¼åŒ–çš„æ“ä½œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE VIEW emp_depart</span><br><span class="line">AS</span><br><span class="line">SELECT CONCAT(last_name,&#x27;(&#x27;,department_name,&#x27;)&#x27;) AS emp_dept</span><br><span class="line">FROM employees e JOIN departments d</span><br><span class="line">WHERE e.department_id = d.department_id</span><br></pre></td></tr></table></figure>
<h3 id="ä¸‰æ›´æ–°è§†å›¾çš„æ•°æ®">ä¸‰ã€æ›´æ–°è§†å›¾çš„æ•°æ®</h3>
<p>â€‹
æ”¯æŒä½¿ç”¨INSERTã€UPDATEå’ŒDELETEè¯­å¥å¯¹è§†å›¾ä¸­çš„æ•°æ®è¿›è¡Œæ’å…¥ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œ</p>
<h4 id="å…³äºä¸€äº›ä¸å¯æ›´æ–°çš„è§†å›¾">å…³äºä¸€äº›ä¸å¯æ›´æ–°çš„è§†å›¾</h4>
<p>â€‹
è¦ä½¿è§†å›¾å¯æ›´æ–°ï¼Œè§†å›¾ä¸­çš„è¡Œå’Œåº•å±‚åŸºæœ¬è¡¨ä¸­çš„è¡Œä¹‹é—´å¿…é¡»å­˜åœ¨ä¸€å¯¹ä¸€çš„å…³ç³»ã€‚å¦å¤–å½“è§†å›¾å®šä¹‰å‡ºç°å¦‚
ä¸‹æƒ…å†µæ—¶ï¼Œè§†å›¾ä¸æ”¯æŒæ›´æ–°æ“ä½œï¼š</p>
<ul>
<li>åœ¨å®šä¹‰è§†å›¾çš„æ—¶å€™æŒ‡å®šäº†â€œALGORITHM =
TEMPTABLEâ€ï¼Œè§†å›¾å°†ä¸æ”¯æŒINSERTå’ŒDELETEæ“ä½œï¼›</li>
<li>è§†å›¾ä¸­ä¸åŒ…å«åŸºè¡¨ä¸­æ‰€æœ‰è¢«å®šä¹‰ä¸ºéç©ºåˆæœªæŒ‡å®šé»˜è®¤å€¼çš„åˆ—ï¼Œè§†å›¾å°†ä¸æ”¯æŒINSERTæ“ä½œï¼›</li>
<li>åœ¨å®šä¹‰è§†å›¾çš„SELECTè¯­å¥ä¸­ä½¿ç”¨äº†JOINè”åˆæŸ¥è¯¢ï¼Œè§†å›¾å°†ä¸æ”¯æŒINSERTå’ŒDELETEæ“ä½œï¼›</li>
<li>åœ¨å®šä¹‰è§†å›¾çš„SELECTè¯­å¥åçš„å­—æ®µåˆ—è¡¨ä¸­ä½¿ç”¨äº†æ•°å­¦è¡¨è¾¾å¼æˆ–å­æŸ¥è¯¢ï¼Œè§†å›¾å°†ä¸æ”¯æŒINSERTï¼Œä¹Ÿ</li>
<li>ä¸æ”¯æŒUPDATEä½¿ç”¨äº†æ•°å­¦è¡¨è¾¾å¼ã€å­æŸ¥è¯¢çš„å­—æ®µå€¼ï¼›</li>
<li>åœ¨å®šä¹‰è§†å›¾çš„SELECTè¯­å¥åçš„å­—æ®µåˆ—è¡¨ä¸­ä½¿ç”¨DISTINCT ã€èšåˆå‡½æ•°ã€GROUP
BY ã€HAVING ã€ UNION ç­‰ï¼Œè§†å›¾å°†ä¸æ”¯æŒINSERTã€UPDATEã€DELETEï¼›</li>
<li>åœ¨å®šä¹‰è§†å›¾çš„SELECTè¯­å¥ä¸­åŒ…å«äº†å­æŸ¥è¯¢ï¼Œè€Œå­æŸ¥è¯¢ä¸­å¼•ç”¨äº†FROMåé¢çš„è¡¨ï¼Œè§†å›¾å°†ä¸æ”¯æŒ
INSERTã€UPDATEã€DELETEï¼›</li>
<li>è§†å›¾å®šä¹‰åŸºäºä¸€ä¸ªä¸å¯æ›´æ–°è§†å›¾</li>
<li>å¸¸é‡è§†å›¾</li>
</ul>
<h3 id="å››è§†å›¾çš„ä¼˜ç¼ºç‚¹ä¸æ€»ç»“">å››ã€è§†å›¾çš„ä¼˜ç¼ºç‚¹ä¸æ€»ç»“ï¼š</h3>
<ul>
<li>ä¼˜ç‚¹</li>
</ul>
<p>1ã€æ“ä½œç®€å•ï¼Œ<strong>å°†ç»å¸¸ä½¿ç”¨çš„æŸ¥è¯¢æ“ä½œå®šä¹‰ä¸ºè§†å›¾ï¼Œå¼€å‘äººå‘˜ä¸éœ€è¦å…³å¿ƒè§†å›¾å¯¹åº”çš„æ•°æ®è¡¨çš„ç»“æ„ã€è¡¨ä¸è¡¨ä¹‹é—´çš„å…³è”å…³ç³»ç­‰</strong></p>
<p>2ã€å‡å°‘æ•°æ®å†—ä½™ï¼Œå…¶å­˜å‚¨çš„æ˜¯æŸ¥è¯¢è¯­å¥ï¼Œæœ¬èº«ä¸å­˜å‚¨æ•°æ®</p>
<p>3ã€æ•°æ®å®‰å…¨ï¼Œå°†ç”¨æˆ·å¯¹æ•°æ®çš„è®¿é—®é™åˆ¶åœ¨æŸäº›æ•°æ®çš„ç»“æœé›†ä¸Šï¼Œå…·æœ‰ä¸€å®šçš„éš”ç¦»æ€§ã€‚</p>
<p>4ã€é€‚åº”å¤šå˜çš„éœ€æ±‚ï¼Œåˆ†è§£å¤æ‚çš„æŸ¥è¯¢é€»è¾‘ã€‚å¯ä»¥å…ˆå°†å¤æ‚çš„é€»è¾‘æŸ¥è¯¢åˆ†è§£ï¼Œåˆ›å»ºå¤šä¸ªè§†å›¾ï¼Œå†å°†è¿™å¤šä¸ªè§†å›¾ç»“åˆèµ·æ¥ï¼Œå®Œæˆå¤æ‚çš„æŸ¥è¯¢é€»è¾‘ã€‚</p>
<ul>
<li>ç¼ºç‚¹ï¼š</li>
</ul>
<p>1ã€å¦‚æœå®é™…æ•°æ®è¡¨çš„ç»“æ„å˜æ›´äº†ï¼Œæˆ‘ä»¬å°±éœ€è¦åŠæ—¶å¯¹ç›¸å…³çš„è§†å›¾è¿›è¡Œç›¸åº”çš„ç»´æŠ¤ã€‚ç‰¹åˆ«æ˜¯åµŒå¥—çš„è§†å›¾ï¼ˆå°±æ˜¯åœ¨è§†å›¾çš„åŸºç¡€ä¸Šåˆ›å»ºè§†å›¾ï¼‰ï¼Œç»´æŠ¤ä¼šå˜å¾—æ¯”è¾ƒå¤æ‚ï¼Œ
å¯è¯»æ€§ä¸å¥½ï¼Œå®¹æ˜“å˜æˆç³»ç»Ÿçš„æ½œåœ¨éšæ‚£ã€‚å› ä¸ºåˆ›å»ºè§†å›¾çš„ SQL
æŸ¥è¯¢å¯èƒ½ä¼šå¯¹å­—æ®µé‡å‘½åï¼Œä¹Ÿå¯èƒ½åŒ…å«å¤æ‚çš„é€»è¾‘ï¼Œè¿™äº›éƒ½ä¼šå¢åŠ ç»´æŠ¤çš„æˆæœ¬ã€‚</p>
<h3 id="äº”å­˜å‚¨è¿‡ç¨‹ä¸å‡½æ•°">äº”ã€å­˜å‚¨è¿‡ç¨‹ä¸å‡½æ•°ï¼š</h3>
<ul>
<li>å­˜å‚¨è¿‡ç¨‹å°±æ˜¯ä¸€ç»„ç»è¿‡é¢„å…ˆç¼–è¯‘çš„ SQL è¯­å¥çš„å°è£…ã€‚</li>
<li>æ‰§è¡Œè¿‡ç¨‹ï¼šå­˜å‚¨è¿‡ç¨‹é¢„å…ˆå­˜å‚¨åœ¨ MySQL
æœåŠ¡å™¨ä¸Šï¼Œéœ€è¦æ‰§è¡Œçš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯åªéœ€è¦å‘æœåŠ¡å™¨ç«¯å‘å‡ºè°ƒç”¨
å­˜å‚¨è¿‡ç¨‹çš„å‘½ä»¤ï¼ŒæœåŠ¡å™¨ç«¯å°±å¯ä»¥æŠŠé¢„å…ˆå­˜å‚¨å¥½çš„è¿™ä¸€ç³»åˆ— SQL
è¯­å¥å…¨éƒ¨æ‰§è¡Œã€‚</li>
</ul>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ•°æ®åº“ç²¾ç®€ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysql å˜é‡ä¸æ¸¸æ ‡.è§¦å‘å™¨</title>
    <url>/2022/09/12/2c85f3f81b49/</url>
    <content><![CDATA[<h3 id="ä¸€ç³»ç»Ÿå˜é‡">ä¸€ã€ç³»ç»Ÿå˜é‡ï¼š</h3>
<p>â€‹
ç³»ç»Ÿå˜é‡ç”±ç³»ç»Ÿå®šä¹‰ï¼Œä¸æ˜¯ç”¨æˆ·å®šä¹‰ï¼Œå±äºæœåŠ¡å™¨å±‚é¢ã€‚å¯åŠ¨MySQLæœåŠ¡ï¼Œç”ŸæˆMySQLæœåŠ¡å®ä¾‹æœŸé—´ï¼Œ
MySQLå°†ä¸ºMySQLæœåŠ¡å™¨å†…å­˜ä¸­çš„ç³»ç»Ÿå˜é‡èµ‹å€¼ï¼Œè¿™äº›ç³»ç»Ÿå˜é‡å®šä¹‰äº†å½“å‰MySQLæœåŠ¡å®ä¾‹çš„å±æ€§ã€ç‰¹
å¾ã€‚è¿™äº›ç³»ç»Ÿå˜é‡çš„å€¼è¦ä¹ˆæ˜¯ç¼–è¯‘MySQLæ—¶å‚æ•°çš„é»˜è®¤å€¼ï¼Œè¦ä¹ˆæ˜¯é…ç½®æ–‡ä»¶ï¼ˆä¾‹å¦‚my.iniç­‰ï¼‰ä¸­çš„å‚æ•°
å€¼ã€‚</p>
<h4
id="å…¨å±€ç³»ç»Ÿå˜é‡-globalå…³é”®å­—-ä¼šè¯ç³»ç»Ÿå˜é‡-sessionå…³é”®å­—">1ã€å…¨å±€ç³»ç»Ÿå˜é‡
globalå…³é”®å­— &amp; ä¼šè¯ç³»ç»Ÿå˜é‡ sessionå…³é”®å­—</h4>
<p>â€‹
æ¯ä¸€ä¸ªMySQLå®¢æˆ·æœºæˆåŠŸè¿æ¥MySQLæœåŠ¡å™¨åï¼Œéƒ½ä¼šäº§ç”Ÿä¸ä¹‹å¯¹åº”çš„ä¼šè¯Sessionã€‚ä¼šè¯æœŸé—´ï¼ŒMySQLæœåŠ¡å®ä¾‹ä¼šåœ¨MySQLæœåŠ¡å™¨å†…å­˜ä¸­ç”Ÿæˆä¸è¯¥ä¼šè¯å¯¹åº”çš„<strong>ä¼šè¯ç³»ç»Ÿå˜é‡</strong>ï¼Œè¿™äº›ä¼šè¯ç³»ç»Ÿå˜é‡çš„åˆå§‹å€¼æ˜¯å…¨å±€ç³»ç»Ÿå˜
é‡å€¼çš„å¤åˆ¶ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220912221138151.png" /></p>
<ul>
<li><p>å…¨å±€ç³»ç»Ÿå˜é‡é’ˆå¯¹äºæ‰€æœ‰ä¼šè¯ï¼ˆè¿æ¥ï¼‰æœ‰æ•ˆï¼Œ<strong>ä½†ä¸èƒ½è·¨é‡å¯</strong></p></li>
<li><p>ä¼šè¯1å¯¹æŸä¸ªå…¨å±€ç³»ç»Ÿå˜é‡å€¼çš„ä¿®æ”¹ä¼šå¯¼è‡´ä¼šè¯2ä¸­åŒä¸€ä¸ªå…¨å±€ç³»ç»Ÿå˜é‡å€¼çš„ä¿®æ”¹</p></li>
</ul>
<p>â€‹ <strong>åœ¨MySQLä¸­æœ‰äº›ç³»ç»Ÿå˜é‡åªèƒ½æ˜¯å…¨å±€çš„ï¼Œä¾‹å¦‚ max_connections
ç”¨äºé™åˆ¶æœåŠ¡å™¨çš„æœ€å¤§è¿æ¥æ•°ï¼›æœ‰äº›ç³»
ç»Ÿå˜é‡ä½œç”¨åŸŸæ—¢å¯ä»¥æ˜¯å…¨å±€åˆå¯ä»¥æ˜¯ä¼šè¯ï¼Œä¾‹å¦‚ character_set_client
ç”¨äºè®¾ç½®å®¢æˆ·ç«¯çš„å­—ç¬¦é›†ï¼›æœ‰äº›ç³» ç»Ÿå˜é‡çš„ä½œç”¨åŸŸåªèƒ½æ˜¯å½“å‰ä¼šè¯ï¼Œä¾‹å¦‚
pseudo_thread_id ç”¨äºæ ‡è®°å½“å‰ä¼šè¯çš„ MySQL è¿æ¥ ID</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#æŸ¥çœ‹æ‰€æœ‰å…¨å±€å˜é‡</span><br><span class="line">SHOW GLOBAL VARIABLES;</span><br><span class="line">#æŸ¥çœ‹æ‰€æœ‰ä¼šè¯å˜é‡</span><br><span class="line">SHOW SESSION VARIABLES;</span><br><span class="line">æˆ–</span><br><span class="line">SHOW VARIABLES;</span><br></pre></td></tr></table></figure>
<p>â€‹ MySQL ä¸­çš„ç³»ç»Ÿå˜é‡ä»¥ä¸¤ä¸ªâ€œ@â€ å¼€å¤´ï¼Œå…¶ä¸­â€œ@<span class="citation"
data-cites="global">@global</span>â€ä»…ç”¨äºæ ‡è®°å…¨å±€ç³»ç»Ÿå˜é‡ï¼Œâ€œ@<span
class="citation"
data-cites="session">@session</span>â€ä»…ç”¨äºæ ‡è®°ä¼šè¯ç³»ç»Ÿå˜é‡ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#æŸ¥çœ‹æŒ‡å®šçš„ç³»ç»Ÿå˜é‡çš„å€¼</span><br><span class="line">SELECT @@global.å˜é‡å;</span><br><span class="line">#æŸ¥çœ‹æŒ‡å®šçš„ä¼šè¯å˜é‡çš„å€¼</span><br><span class="line">SELECT @@session.å˜é‡å;</span><br><span class="line">#æˆ–è€…</span><br><span class="line">SELECT @@å˜é‡å;</span><br><span class="line"></span><br><span class="line">#ä¸ºæŸä¸ªå…¨å±€å˜é‡èµ‹å€¼</span><br><span class="line">#æ–¹å¼1</span><br><span class="line">SET @@global.å˜é‡å=å˜é‡å€¼;</span><br><span class="line">#æ–¹å¼2ï¼š</span><br><span class="line">SET GLOBAL å˜é‡å=å˜é‡å€¼;</span><br><span class="line">#ä¸ºæŸä¸ªä¼šè¯å˜é‡èµ‹å€¼</span><br><span class="line">#æ–¹å¼1ï¼š</span><br><span class="line">SET @@session.å˜é‡å=å˜é‡å€¼;</span><br><span class="line">#æ–¹å¼2ï¼š</span><br><span class="line">SET SESSION å˜é‡å=å˜é‡å€¼;</span><br></pre></td></tr></table></figure>
<h4 id="ä¼šè¯ç”¨æˆ·å˜é‡ä¸å±€éƒ¨å˜é‡">2ã€ä¼šè¯ç”¨æˆ·å˜é‡ä¸å±€éƒ¨å˜é‡ï¼š</h4>
<ul>
<li>ä¼šè¯ç”¨æˆ·å˜é‡ï¼šä½œç”¨åŸŸå’Œä¼šè¯å˜é‡ä¸€æ ·ï¼Œåªå¯¹å½“å‰è¿æ¥ä¼šè¯æœ‰æ•ˆã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#æ–¹å¼1ï¼šâ€œ=â€æˆ–â€œ:=â€</span><br><span class="line">SET @ç”¨æˆ·å˜é‡ = å€¼;</span><br><span class="line">SET @ç”¨æˆ·å˜é‡ := å€¼;</span><br><span class="line">#æ–¹å¼2ï¼šâ€œ:=â€ æˆ– INTOå…³é”®å­—</span><br><span class="line">SELECT @ç”¨æˆ·å˜é‡ := è¡¨è¾¾å¼ [FROM ç­‰å­å¥];</span><br><span class="line">SELECT è¡¨è¾¾å¼ INTO @ç”¨æˆ·å˜é‡ [FROM ç­‰å­å¥];</span><br></pre></td></tr></table></figure>
<ul>
<li>å±€éƒ¨å˜é‡ï¼šåªåœ¨ BEGIN å’Œ END
è¯­å¥å—ä¸­æœ‰æ•ˆã€‚å±€éƒ¨å˜é‡åªèƒ½åœ¨å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°ä¸­ä½¿ç”¨ã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">BEGIN</span><br><span class="line">#å£°æ˜å±€éƒ¨å˜é‡</span><br><span class="line">DECLARE å˜é‡å1 å˜é‡æ•°æ®ç±»å‹ [DEFAULT å˜é‡é»˜è®¤å€¼];</span><br><span class="line">DECLARE å˜é‡å2,å˜é‡å3,... å˜é‡æ•°æ®ç±»å‹ [DEFAULT å˜é‡é»˜è®¤å€¼];</span><br><span class="line">#ä¸ºå±€éƒ¨å˜é‡èµ‹å€¼</span><br><span class="line">SET å˜é‡å1 = å€¼;</span><br><span class="line">SELECT å€¼ INTO å˜é‡å2 [FROM å­å¥];</span><br><span class="line">#æŸ¥çœ‹å±€éƒ¨å˜é‡çš„å€¼</span><br><span class="line">SELECT å˜é‡1,å˜é‡2,å˜é‡3;</span><br><span class="line">END</span><br></pre></td></tr></table></figure>
<h3 id="äºŒæ¸¸æ ‡">äºŒã€æ¸¸æ ‡</h3>
<p>â€‹
æ¸¸æ ‡ï¼Œæä¾›äº†ä¸€ç§çµæ´»çš„æ“ä½œæ–¹å¼ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿå¯¹ç»“æœé›†ä¸­çš„æ¯ä¸€æ¡è®°å½•è¿›è¡Œå®šä½ï¼Œå¹¶å¯¹æŒ‡å‘çš„è®°å½•ä¸­çš„æ•°æ®è¿›è¡Œæ“ä½œçš„æ•°æ®ç»“æ„ã€‚æ¸¸æ ‡è®©
SQL è¿™ç§é¢å‘é›†åˆçš„è¯­è¨€æœ‰äº†é¢å‘è¿‡ç¨‹å¼€å‘çš„èƒ½åŠ›ã€‚</p>
<p>â€‹
æ¸¸æ ‡æ˜¯ä¸€ç§ä¸´æ—¶çš„æ•°æ®åº“å¯¹è±¡ï¼Œå¯ä»¥æŒ‡å‘å­˜å‚¨åœ¨æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®è¡ŒæŒ‡é’ˆã€‚è¿™é‡Œæ¸¸æ ‡å……å½“äº†æŒ‡é’ˆçš„ä½œç”¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ“ä½œæ¸¸æ ‡æ¥å¯¹æ•°æ®è¡Œè¿›è¡Œæ“ä½œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DELIMITER //</span><br><span class="line">CREATE PROCEDURE get_count_by_limit_total_salary(IN limit_total_salary DOUBLE,OUT</span><br><span class="line">total_count INT)</span><br><span class="line">BEGIN</span><br><span class="line">DECLARE sum_salary DOUBLE DEFAULT 0; #è®°å½•ç´¯åŠ çš„æ€»å·¥èµ„</span><br><span class="line">DECLARE cursor_salary DOUBLE DEFAULT 0; #è®°å½•æŸä¸€ä¸ªå·¥èµ„å€¼</span><br><span class="line">DECLARE emp_count INT DEFAULT 0; #è®°å½•å¾ªç¯ä¸ªæ•°</span><br><span class="line">#å®šä¹‰æ¸¸æ ‡</span><br><span class="line">DECLARE emp_cursor CURSOR FOR SELECT salary FROM employees ORDER BY salary DESC;</span><br><span class="line">#æ‰“å¼€æ¸¸æ ‡</span><br><span class="line">OPEN emp_cursor;</span><br><span class="line">REPEAT</span><br><span class="line">#ä½¿ç”¨æ¸¸æ ‡ï¼ˆä»æ¸¸æ ‡ä¸­è·å–æ•°æ®ï¼‰</span><br><span class="line">FETCH emp_cursor INTO cursor_salary;</span><br><span class="line">SET sum_salary = sum_salary + cursor_salary;</span><br><span class="line">SET emp_count = emp_count + 1;</span><br><span class="line">UNTIL sum_salary &gt;= limit_total_salary</span><br><span class="line">END REPEAT;</span><br><span class="line">SET total_count = emp_count;</span><br><span class="line">#å…³é—­æ¸¸æ ‡</span><br><span class="line">CLOSE emp_cursor;</span><br><span class="line">END //</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸‰è§¦å‘å™¨">ä¸‰ã€è§¦å‘å™¨</h3>
<p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<p>â€‹ åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼šæœ‰ 2
ä¸ªæˆ–è€…å¤šä¸ªç›¸äº’å…³è”çš„è¡¨ï¼Œå¦‚å•†å“ä¿¡æ¯å’Œåº“å­˜ä¿¡æ¯åˆ†åˆ«å­˜æ”¾åœ¨ 2
ä¸ªä¸åŒçš„æ•°æ®è¡¨ä¸­ï¼Œæˆ‘ä»¬åœ¨æ·»åŠ ä¸€æ¡æ–°å•†å“è®°å½•çš„æ—¶å€™ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œå¿…é¡»åŒæ—¶åœ¨åº“å­˜è¡¨ä¸­æ·»åŠ ä¸€æ¡åº“å­˜è®°å½•ã€‚
â€‹
è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¿…é¡»æŠŠè¿™ä¸¤ä¸ªå…³è”çš„æ“ä½œæ­¥éª¤å†™åˆ°ç¨‹åºé‡Œé¢ï¼Œè€Œä¸”è¦ç”¨äº‹åŠ¡åŒ…è£¹èµ·æ¥ï¼Œç¡®ä¿è¿™ä¸¤ä¸ªæ“ä½œæˆä¸ºä¸€ä¸ªåŸå­æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚è¦æ˜¯é‡åˆ°ç‰¹æ®Šæƒ…å†µï¼Œå¯èƒ½è¿˜éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ‰‹åŠ¨ç»´æŠ¤ï¼Œè¿™æ ·å°±å¾ˆå®¹æ˜“å¿˜è®°å…¶ä¸­çš„ä¸€æ­¥ï¼Œå¯¼è‡´æ•°æ®ç¼ºå¤±ã€‚
â€‹
è¿™ä¸ªæ—¶å€™ï¼Œå’±ä»¬å¯ä»¥ä½¿ç”¨è§¦å‘å™¨ã€‚ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªè§¦å‘å™¨ï¼Œè®©å•†å“ä¿¡æ¯æ•°æ®çš„æ’å…¥æ“ä½œè‡ªåŠ¨è§¦å‘åº“å­˜æ•°
æ®çš„æ’å…¥æ“ä½œã€‚è¿™æ ·ä¸€æ¥ï¼Œå°±ä¸ç”¨æ‹…å¿ƒå› ä¸ºå¿˜è®°æ·»åŠ åº“å­˜æ•°æ®è€Œå¯¼è‡´çš„æ•°æ®ç¼ºå¤±äº†ã€‚</p>
<p>â€‹</p>
<p><strong>æ¦‚è¿°</strong>ï¼š</p>
<p>â€‹ è§¦å‘å™¨æ˜¯ç”±äº‹ä»¶æ¥è§¦å‘æŸä¸ªæ“ä½œï¼Œè¿™äº›äº‹ä»¶åŒ…æ‹¬INSERT ã€UPDATE ã€DELETE
äº‹ä»¶ã€‚æ‰€è°“äº‹ä»¶å°±æ˜¯æŒ‡
ç”¨æˆ·çš„åŠ¨ä½œæˆ–è€…è§¦å‘æŸé¡¹è¡Œä¸ºã€‚å¦‚æœå®šä¹‰äº†è§¦å‘ç¨‹åºï¼Œå½“æ•°æ®åº“æ‰§è¡Œè¿™äº›è¯­å¥æ—¶å€™ï¼Œå°±ç›¸å½“äºäº‹ä»¶å‘ç”Ÿ
äº†ï¼Œå°±ä¼šè‡ªåŠ¨æ¿€å‘è§¦å‘å™¨æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚</p>
<ul>
<li>ä¼˜ç‚¹ï¼š
<ul>
<li>è§¦å‘å™¨å¯ä»¥ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ã€‚</li>
<li>è§¦å‘å™¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬è®°å½•æ“ä½œæ—¥å¿—ã€‚</li>
<li>å¯ä»¥å…·ä½“è®°å½•ä»€ä¹ˆæ—¶é—´å‘ç”Ÿäº†ä»€ä¹ˆã€‚æ¯”å¦‚ï¼Œè®°å½•ä¿®æ”¹ä¼šå‘˜å‚¨å€¼é‡‘é¢çš„è§¦å‘å™¨ï¼Œå°±æ˜¯ä¸€ä¸ªå¾ˆ
å¥½çš„ä¾‹å­ã€‚è¿™å¯¹æˆ‘ä»¬è¿˜åŸæ“ä½œæ‰§è¡Œæ—¶çš„å…·ä½“åœºæ™¯ï¼Œ</li>
<li>è§¦å‘å™¨è¿˜å¯ä»¥ç”¨åœ¨æ“ä½œæ•°æ®å‰ï¼Œå¯¹æ•°æ®è¿›è¡Œåˆæ³•æ€§æ£€æŸ¥ã€‚</li>
</ul></li>
<li>ç¼ºç‚¹ï¼š
<ul>
<li>ç€è§¦å‘å™¨æœ‰å¯èƒ½ä¸å—åº”ç”¨å±‚çš„æ§åˆ¶ã€‚è¿™å¯¹ç³»ç»Ÿç»´æŠ¤æ˜¯éå¸¸æœ‰æŒ‘æˆ˜çš„ã€‚</li>
<li>ç›¸å…³æ•°æ®çš„å˜æ›´ï¼Œå¯èƒ½ä¼šå¯¼è‡´è§¦å‘å™¨å‡ºé”™ã€‚ç‰¹åˆ«æ˜¯æ•°æ®è¡¨ç»“æ„çš„å˜æ›´ï¼Œéƒ½å¯èƒ½ä¼šå¯¼è‡´è§¦å‘å™¨å‡ºé”™ï¼Œè¿›è€Œå½±å“æ•°æ®æ“ä½œçš„æ­£å¸¸è¿è¡Œã€‚è¿™äº›éƒ½ä¼šç”±äºè§¦å‘å™¨æœ¬èº«çš„éšè”½æ€§ï¼Œå½±å“åˆ°åº”ç”¨ä¸­é”™è¯¯åŸå› æ’æŸ¥çš„æ•ˆç‡ã€‚</li>
</ul></li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<p>â€‹ å¦‚æœåœ¨å­è¡¨ä¸­å®šä¹‰äº†å¤–é”®çº¦æŸï¼Œå¹¶ä¸”å¤–é”®æŒ‡å®šäº†ON UPDATE/DELETE
CASCADE/SET
NULLå­å¥ï¼Œæ­¤æ—¶ä¿®æ”¹çˆ¶è¡¨è¢«å¼•ç”¨çš„é”®å€¼æˆ–åˆ é™¤çˆ¶è¡¨è¢«å¼•ç”¨çš„è®°å½•è¡Œæ—¶ï¼Œä¹Ÿä¼šå¼•èµ·å­è¡¨çš„ä¿®æ”¹å’Œåˆ é™¤æ“ä½œï¼Œæ­¤æ—¶åŸºäºå­è¡¨çš„UPDATEå’ŒDELETEè¯­å¥å®šä¹‰çš„è§¦å‘å™¨å¹¶ä¸ä¼šè¢«æ¿€æ´»ã€‚</p>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ•°æ®åº“ç²¾ç®€ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysqlé€»è¾‘æ¶æ„å’Œå­˜å‚¨å¼•æ“</title>
    <url>/2022/10/17/6d0d3039dfe2/</url>
    <content><![CDATA[<h3 id="ä¸€é€»è¾‘æ¶æ„">ä¸€ã€é€»è¾‘æ¶æ„ï¼š</h3>
<p>â€‹ ä½¿ç”¨ç»å…¸çš„C/Sæ¶æ„ï¼ŒæœåŠ¡ç«¯ç¨‹åºä½¿ç”¨çš„æ˜¯
mysqldæœåŠ¡ï¼ŒæœåŠ¡ç«¯å¤§è‡´åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>è¿æ¥ç®¡ç†ï¼ˆè¿æ¥æ± ï¼‰</li>
<li>è§£æå’Œä¼˜åŒ–ï¼ˆSQLæ¥å£ã€è§£æå™¨ã€ä¼˜åŒ–å™¨ï¼‰</li>
<li>å­˜å‚¨å¼•æ“ï¼ˆå­˜å‚¨å¼•æ“å’Œæ–‡ä»¶ç³»ç»Ÿã€æ—¥å¿—æ–‡ä»¶ï¼‰</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221017154005406.png" /></p>
<h4 id="connectors">1ã€Connectors:</h4>
<p>â€‹
MySQLæ˜¯ä¸€ä¸ªç½‘ç»œiç¨‹åºï¼Œæœ¬è´¨ä¸Šå°±æ˜¯åœ¨TCPè¿æ¥ä¸Šï¼Œé€šè¿‡MySqlåè®®è·ŸMysqlæœåŠ¡å™¨è¿›è¡Œæ•°æ®çš„äº¤äº’</p>
<h4 id="è¿æ¥ç®¡ç†">2ã€è¿æ¥ç®¡ç†ï¼š</h4>
<p>â€‹
ç”¨æˆ·åå¯†ç è®¤è¯é€šè¿‡ï¼Œä¼šä»æƒé™è¡¨æŸ¥å‡ºè´¦å·æ‹¥æœ‰çš„æƒé™ä¸è¿æ¥å…³è”ï¼Œä¹‹åçš„æƒé™åˆ¤æ–­é€»è¾‘ï¼Œ<strong>éƒ½å°†ä¾èµ–äºæ­¤æ—¶è¯»åˆ°çš„æƒé™ã€‚</strong></p>
<p>â€‹
<strong>TCPè¿æ¥æ± </strong>ï¼šç”¨äºé™åˆ¶è¿æ¥æ•°ï¼Œå¯ä»¥é‡‡ç”¨é•¿è¿æ¥æ¨¡å¼æ¥å¤ç”¨TCPè¿æ¥ï¼Œè§£å†³ä¸Šè¿°é—®é¢˜</p>
<p>â€‹
<strong>çº¿ç¨‹æ± </strong>ï¼šTCPè¿æ¥æ”¶åˆ°è¯·æ±‚åï¼Œå¿…é¡»è¦åˆ†é…ç»™ä¸€ä¸ªçº¿ç¨‹ä¸“é—¨ä¸è¿™ä¸ªå®¢æˆ·ç«¯çš„äº¤äº’ã€‚æ‰€ä»¥è¿˜ä¼šæœ‰ä¸ªçº¿ç¨‹æ± ï¼Œå»èµ°åé¢çš„æµç¨‹ã€‚æ¯ä¸€ä¸ªè¿æ¥ä»çº¿ç¨‹æ± ä¸­è·å–çº¿ç¨‹ï¼Œçœå»äº†åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„å¼€é”€ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221017161445894.png" style="zoom:50%;" /></p>
<h4 id="æœåŠ¡å±‚">3ã€æœåŠ¡å±‚ï¼š</h4>
<ul>
<li><p>SQLæ¥å£ï¼š</p>
<ul>
<li>æ¥æ”¶ç”¨æˆ·çš„SQLå‘½ä»¤ï¼Œå¹¶ä¸”è¿”å›ç”¨æˆ·éœ€è¦æŸ¥è¯¢çš„ç»“æœã€‚æ¯”å¦‚SELECT ...
FROMå°±æ˜¯è°ƒç”¨SQL Interface</li>
</ul></li>
<li><p>Parserè§£æå™¨ï¼š</p>
<ul>
<li>åœ¨è§£æå™¨ä¸­å¯¹ SQL
è¯­å¥è¿›è¡Œè¯­æ³•åˆ†æã€è¯­ä¹‰åˆ†æã€‚å°†SQLè¯­å¥åˆ†è§£æˆæ•°æ®ç»“æ„ï¼Œå¹¶å°†è¿™ä¸ªç»“æ„ä¼ é€’åˆ°åç»­æ­¥éª¤ï¼Œä»¥åSQLè¯­å¥çš„ä¼ é€’å’Œå¤„ç†å°±æ˜¯åŸºäºè¿™ä¸ªç»“æ„çš„ã€‚å¦‚æœåœ¨åˆ†è§£æ„æˆä¸­é‡åˆ°é”™è¯¯ï¼Œé‚£ä¹ˆå°±è¯´æ˜è¿™ä¸ªSQLè¯­å¥æ˜¯ä¸åˆç†çš„ã€‚</li>
<li><strong>åœ¨SQLå‘½ä»¤ä¼ é€’åˆ°è§£æå™¨çš„æ—¶å€™ä¼šè¢«è§£æå™¨éªŒè¯å’Œè§£æï¼Œå¹¶ä¸ºå…¶åˆ›å»ºè¯­æ³•æ ‘ï¼Œå¹¶æ ¹æ®æ•°æ®å­—å…¸ä¸°å¯ŒæŸ¥è¯¢è¯­æ³•æ ‘ï¼Œä¼šéªŒè¯è¯¥å®¢æˆ·ç«¯æ˜¯å¦å…·æœ‰æ‰§è¡Œè¯¥æŸ¥è¯¢çš„æƒé™</strong></li>
</ul></li>
<li><p>Optimizerä¼˜åŒ–å™¨ï¼š</p>
<ul>
<li><p>SQLè¯­å¥åœ¨è¯­æ³•è§£æä¹‹åã€æŸ¥è¯¢ä¹‹å‰ä¼šä½¿ç”¨æŸ¥è¯¢ä¼˜åŒ–å™¨ç¡®å®š SQL
è¯­å¥çš„æ‰§è¡Œè·¯å¾„ï¼Œç”Ÿæˆä¸€ä¸ªæ‰§è¡Œè®¡åˆ’ã€‚è¿™ä¸ªæ‰§è¡Œè®¡åˆ’è¡¨æ˜åº”è¯¥ä½¿ç”¨å“ªäº›ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢ï¼ˆå…¨è¡¨æ£€ç´¢è¿˜æ˜¯ä½¿ç”¨ç´¢å¼•æ£€ç´¢ï¼‰ï¼Œè¡¨ä¹‹é—´çš„è¿æ¥é¡ºåºå¦‚ä½•ï¼Œæœ€åä¼šæŒ‰ç…§æ‰§è¡Œè®¡åˆ’ä¸­çš„æ­¥éª¤è°ƒç”¨å­˜å‚¨å¼•æ“æä¾›çš„æ–¹æ³•æ¥çœŸæ­£çš„æ‰§è¡ŒæŸ¥è¯¢ï¼Œå¹¶å°†æŸ¥è¯¢ç»“æœè¿”å›ç»™ç”¨æˆ·ã€‚</p></li>
<li><p>å®ƒä½¿ç”¨â€œ é€‰å–-æŠ•å½±-è¿æ¥â€ç­–ç•¥è¿›è¡ŒæŸ¥è¯¢</p></li>
<li><pre><code>  SELECT id,name FROM student WHERE gender = &#39;å¥³&#39;;</code></pre></li>
<li><p>è¿™ä¸ªSELECTæŸ¥è¯¢å…ˆæ ¹æ®WHEREè¯­å¥è¿›è¡Œé€‰å–ï¼Œè€Œä¸æ˜¯å°†è¡¨å…¨éƒ¨æŸ¥è¯¢å‡ºæ¥ä»¥åå†è¿›è¡Œgenderè¿‡æ»¤ã€‚
è¿™ä¸ªSELECTæŸ¥è¯¢å…ˆæ ¹æ®idå’Œnameè¿›è¡Œå±æ€§æŠ•å½±ï¼Œè€Œä¸æ˜¯å°†å±æ€§å…¨éƒ¨å–å‡ºä»¥åå†è¿›è¡Œè¿‡æ»¤ï¼Œå°†è¿™ä¸¤ä¸ªæŸ¥è¯¢æ¡ä»¶è¿æ¥èµ·æ¥ç”Ÿæˆæœ€ç»ˆæŸ¥è¯¢ç»“æœã€‚</p></li>
</ul></li>
<li><p>Caches &amp; Buffersï¼š æŸ¥è¯¢ç¼“å­˜ç»„ä»¶</p>
<ul>
<li>è¿™ä¸ªç¼“å­˜æœºåˆ¶æ˜¯ç”±ä¸€ç³»åˆ—å°ç¼“å­˜ç»„æˆçš„ã€‚æ¯”å¦‚è¡¨ç¼“å­˜ï¼Œè®°å½•ç¼“å­˜ï¼Œkeyç¼“å­˜ï¼Œæƒé™ç¼“å­˜ç­‰
ã€‚è¿™ä¸ªæŸ¥è¯¢ç¼“å­˜å¯ä»¥åœ¨ä¸åŒå®¢æˆ·ç«¯ä¹‹é—´å…±äº«</li>
</ul></li>
</ul>
<h4 id="å¼•æ“å±‚">4ã€å¼•æ“å±‚</h4>
<p>â€‹ æ’ä»¶å¼å­˜å‚¨å¼•æ“å±‚ï¼ˆ Storage
Enginesï¼‰ï¼ŒçœŸæ­£çš„è´Ÿè´£äº†MySQLä¸­æ•°æ®çš„å­˜å‚¨å’Œæå–ï¼Œå¯¹ç‰©ç†æœåŠ¡å™¨çº§åˆ«ç»´æŠ¤çš„åº•å±‚æ•°æ®æ‰§è¡Œæ“ä½œ</p>
<h4 id="å­˜å‚¨å±‚">5ã€å­˜å‚¨å±‚ï¼š</h4>
<p>â€‹
æ‰€æœ‰çš„æ•°æ®ï¼Œæ•°æ®åº“ã€è¡¨çš„å®šä¹‰ï¼Œè¡¨çš„æ¯ä¸€è¡Œçš„å†…å®¹ï¼Œç´¢å¼•ï¼Œéƒ½æ˜¯å­˜åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šï¼Œä»¥æ–‡ä»¶çš„æ–¹å¼å­˜åœ¨çš„ï¼Œå¹¶å®Œæˆä¸å­˜å‚¨å¼•æ“çš„äº¤äº’</p>
<h3 id="äºŒsqlæ‰§è¡Œæµç¨‹">äºŒã€SQLæ‰§è¡Œæµç¨‹ï¼š</h3>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221017163209630.png" /></p>
<h4 id="æŸ¥è¯¢ç¼“å­˜">1ã€æŸ¥è¯¢ç¼“å­˜ï¼š</h4>
<p>â€‹ å› ä¸ºæŸ¥è¯¢ç¼“å­˜å¾€å¾€æ•ˆç‡ä¸é«˜ï¼Œæ‰€ä»¥åœ¨ MySQL8.0
ä¹‹åå°±æŠ›å¼ƒäº†è¿™ä¸ªåŠŸèƒ½ã€‚ä¸‰å¤§åœºæ™¯åŸå› å¦‚ä¸‹ï¼š</p>
<ul>
<li>åœ¨MySQL
ä¸­çš„æŸ¥è¯¢ç¼“å­˜ï¼Œä¸æ˜¯ç¼“å­˜æŸ¥è¯¢è®¡åˆ’ï¼Œè€Œæ˜¯æŸ¥è¯¢å¯¹åº”çš„ç»“æœã€‚è¿™å°±æ„å‘³ç€æŸ¥è¯¢åŒ¹é…çš„é²æ£’æ€§å¤§å¤§é™ä½ï¼Œ<strong>åªæœ‰ç›¸åŒçš„æŸ¥è¯¢æ“ä½œæ‰ä¼šå‘½ä¸­æŸ¥è¯¢ç¼“å­˜ã€‚</strong>ä¸¤ä¸ªæŸ¥è¯¢è¯·æ±‚åœ¨ä»»ä½•å­—ç¬¦ä¸Šçš„ä¸åŒï¼ˆä¾‹å¦‚ï¼šç©ºæ ¼ã€æ³¨é‡Šã€å¤§å°å†™ï¼‰ï¼Œéƒ½ä¼šå¯¼è‡´ç¼“å­˜ä¸ä¼šå‘½ä¸­ã€‚å› æ­¤
MySQL çš„æŸ¥è¯¢ç¼“å­˜å‘½ä¸­ç‡ä¸é«˜ã€‚</li>
<li>å¦‚æœ<strong>æŸ¥è¯¢è¯·æ±‚ä¸­åŒ…å«æŸäº›ç³»ç»Ÿå‡½æ•°ã€ç”¨æˆ·è‡ªå®šä¹‰å˜é‡å’Œå‡½æ•°</strong>ã€ä¸€äº›ç³»ç»Ÿè¡¨ï¼Œå¦‚
mysql ã€ information_schemaã€ performance_schema
æ•°æ®åº“ä¸­çš„è¡¨ï¼Œé‚£è¿™ä¸ªè¯·æ±‚å°±ä¸ä¼šè¢«ç¼“å­˜ã€‚</li>
<li>æ­¤å¤–ï¼Œæ—¢ç„¶æ˜¯ç¼“å­˜ï¼Œé‚£å°±æœ‰å®ƒç¼“å­˜å¤±æ•ˆçš„æ—¶å€™ã€‚<strong>MySQLçš„ç¼“å­˜ç³»ç»Ÿä¼šç›‘æµ‹æ¶‰åŠåˆ°çš„æ¯å¼ è¡¨ï¼Œåªè¦è¯¥è¡¨çš„ç»“æ„æˆ–è€…æ•°æ®è¢«ä¿®æ”¹ï¼Œ</strong>å¦‚å¯¹è¯¥è¡¨ä½¿ç”¨äº†INSERT
ã€ UPDATE ã€DELETE ã€TRUNCATE TABLE ã€ALTER TABLE ã€DROP TABLE æˆ– DROP
DATABASE
è¯­å¥ï¼Œé‚£<strong>ä½¿ç”¨è¯¥è¡¨çš„æ‰€æœ‰é«˜é€Ÿç¼“å­˜æŸ¥è¯¢éƒ½å°†å˜ä¸ºæ— æ•ˆå¹¶ä»é«˜é€Ÿç¼“å­˜ä¸­åˆ é™¤ï¼</strong>å¯¹äºæ›´æ–°å‹åŠ›å¤§çš„æ•°æ®åº“æ¥è¯´ï¼ŒæŸ¥è¯¢ç¼“å­˜çš„å‘½ä¸­ç‡ä¼šéå¸¸ä½ã€‚</li>
</ul>
<h4 id="è§£æå™¨">2ã€è§£æå™¨ï¼š</h4>
<ul>
<li><p>è¯æ³•åˆ†æ</p>
<ul>
<li>MySQL
éœ€è¦è¯†åˆ«å‡ºSQLè¯­å¥é‡Œé¢çš„å­—ç¬¦ä¸²åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Œä»£è¡¨ä»€ä¹ˆã€‚æ˜¯ä»£è¡¨å…³é”®å­—è¿˜æ˜¯è¡¨å</li>
</ul></li>
<li><p>è¯­æ³•åˆ†æ</p>
<ul>
<li>æ ¹æ®è¯æ³•åˆ†æçš„ç»“æœï¼Œè¯­æ³•åˆ†æå™¨ï¼ˆæ¯”å¦‚ï¼šBisonï¼‰ä¼šæ ¹æ®è¯­æ³•è§„åˆ™ï¼Œåˆ¤æ–­ä½ è¾“
å…¥çš„è¿™ä¸ª SQL è¯­å¥æ˜¯å¦æ»¡è¶³ MySQL è¯­æ³•ã€‚</li>
</ul></li>
<li><p>å¦‚æœSQLè¯­å¥æ­£ç¡®ï¼Œä¼šç”Ÿæˆä¸€ä¸ªè¯­æ³•æ ‘ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221017165049678.png" /></p></li>
</ul>
<h4 id="ä¼˜åŒ–å™¨">3ã€ä¼˜åŒ–å™¨ï¼š</h4>
<p>â€‹ åœ¨ä¼˜åŒ–å™¨ä¸­ä¼šç¡®å®š SQL
è¯­å¥çš„æ‰§è¡Œè·¯å¾„ï¼Œä¼˜åŒ–å™¨æ˜¯åœ¨è¡¨é‡Œé¢æœ‰å¤šä¸ªç´¢å¼•çš„æ—¶å€™ï¼Œå†³å®šä½¿ç”¨å“ªä¸ªç´¢å¼•ï¼›æˆ–è€…åœ¨ä¸€ä¸ªè¯­å¥æœ‰å¤šè¡¨å…³è”ï¼ˆjoinï¼‰çš„æ—¶å€™ï¼Œå†³å®šå„ä¸ªè¡¨çš„è¿æ¥é¡ºåºï¼Œè¿˜æœ‰è¡¨è¾¾å¼ç®€åŒ–ã€å­æŸ¥è¯¢è½¬ä¸ºè¿æ¥ã€å¤–è¿æ¥è½¬ä¸ºå†…è¿æ¥ç­‰ã€‚</p>
<p>â€‹
åœ¨æŸ¥è¯¢ä¼˜åŒ–å™¨ä¸­ï¼Œå¯ä»¥åˆ†ä¸º<strong>é€»è¾‘æŸ¥è¯¢ä¼˜åŒ–é˜¶æ®µ</strong>å’Œ<strong>ç‰©ç†æŸ¥è¯¢ä¼˜åŒ–é˜¶æ®µ</strong>ã€‚</p>
<ul>
<li>é€»è¾‘æŸ¥è¯¢ä¼˜åŒ–å°±æ˜¯é€šè¿‡æ”¹å˜SQL
è¯­å¥çš„å†…å®¹æ¥ä½¿å¾—SQLæŸ¥è¯¢æ›´é«˜æ•ˆï¼ŒåŒæ—¶ä¸ºç‰©ç†æŸ¥è¯¢ä¼˜åŒ–æä¾›æ›´å¤šçš„å€™é€‰æ‰§è¡Œè®¡åˆ’ã€‚é€šå¸¸é‡‡ç”¨çš„æ–¹å¼æ˜¯å¯¹SQLè¯­å¥è¿›è¡Œç­‰ä»·å˜æ¢ï¼Œå¯¹æŸ¥è¯¢è¿›è¡Œé‡å†™ï¼Œè€ŒæŸ¥è¯¢é‡å†™çš„æ•°å­¦åŸºç¡€å°±æ˜¯å…³ç³»ä»£æ•°ã€‚<strong>å¯¹æ¡ä»¶è¡¨è¾¾å¼è¿›è¡Œç­‰ä»·è°“è¯é‡å†™ã€æ¡ä»¶ç®€åŒ–ï¼Œå¯¹è§†å›¾è¿›è¡Œé‡å†™ï¼Œå¯¹å­æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–ï¼Œå¯¹è¿æ¥è¯­ä¹‰è¿›è¡Œäº†å¤–è¿æ¥æ¶ˆé™¤ã€åµŒå¥—è¿æ¥æ¶ˆé™¤ç­‰</strong></li>
<li>ç‰©ç†æŸ¥è¯¢ä¼˜åŒ–æ˜¯åŸºäºå…³ç³»ä»£æ•°è¿›è¡Œçš„æŸ¥è¯¢é‡å†™ï¼Œè€Œå…³ç³»ä»£æ•°çš„æ¯ä¸€æ­¥éƒ½å¯¹åº”ç€ç‰©ç†è®¡ç®—ï¼Œè¿™äº›ç‰©ç†è®¡ç®—å¾€å¾€å­˜åœ¨å¤šç§ç®—æ³•ï¼Œå› æ­¤éœ€è¦è®¡ç®—å„ç§ç‰©ç†è·¯å¾„çš„ä»£ä»·ï¼Œä»ä¸­é€‰æ‹©ä»£ä»·æœ€å°çš„ä½œä¸ºæ‰§è¡Œè®¡åˆ’ã€‚åœ¨è¿™ä¸ªé˜¶æ®µé‡Œï¼Œå¯¹äºå•è¡¨å’Œå¤šè¡¨è¿æ¥çš„æ“ä½œï¼Œéœ€è¦é«˜æ•ˆåœ°ä½¿ç”¨ç´¢å¼•ï¼Œæå‡æŸ¥è¯¢æ•ˆç‡ã€‚</li>
</ul>
<h4 id="æ‰§è¡Œå™¨">4ã€æ‰§è¡Œå™¨ï¼š</h4>
<p>â€‹
åœ¨æ‰§è¡Œä¹‹å‰éœ€è¦åˆ¤æ–­è¯¥ç”¨æˆ·æ˜¯å¦å…·å¤‡æƒé™ã€‚å¦‚æœæ²¡æœ‰ï¼Œå°±ä¼šè¿”å›æƒé™é”™è¯¯ã€‚å¦‚æœå…·å¤‡æƒé™ï¼Œå°±æ‰§è¡Œ
SQLæŸ¥è¯¢å¹¶è¿”å›ç»“æœã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221017165434638.png" /></p>
<h4 id="è¯­æ³•é¡ºåº">5ã€è¯­æ³•é¡ºåºï¼š</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221017170108824.png" /></p>
<h3 id="ä¸‰æ•°æ®åº“ç¼“å†²æ± ">ä¸‰ã€æ•°æ®åº“ç¼“å†²æ± ï¼š</h3>
<p>â€‹
InnoDBå­˜å‚¨å¼•æ“æ˜¯ä»¥é¡µä¸ºå•ä½æ¥ç®¡ç†å­˜å‚¨ç©ºé—´çš„ï¼Œæˆ‘ä»¬è¿›è¡Œçš„å¢åˆ æ”¹æŸ¥æ“ä½œå…¶å®æœ¬è´¨ä¸Šéƒ½æ˜¯åœ¨è®¿é—®é¡µé¢ï¼ˆåŒ…æ‹¬è¯»é¡µé¢ã€å†™é¡µé¢ã€åˆ›å»ºæ–°é¡µé¢ç­‰æ“ä½œï¼‰ã€‚è€Œç£ç›˜I/0éœ€è¦æ¶ˆè€—çš„æ—¶é—´å¾ˆå¤šï¼Œè€Œåœ¨å†…å­˜ä¸­è¿›è¡Œæ“ä½œï¼Œæ•ˆç‡åˆ™ä¼šé«˜å¾ˆå¤šï¼Œä¸ºäº†èƒ½è®©æ•°æ®è¡¨æˆ–è€…ç´¢å¼•ä¸­çš„æ•°æ®éšæ—¶è¢«æˆ‘ä»¬æ‰€ç”¨ï¼ŒDBMSä¼šç”³è¯·å ç”¨å†…å­˜æ¥ä½œä¸ºæ•°æ®ç¼“å†²æ± ï¼Œåœ¨çœŸæ­£è®¿é—®é¡µé¢ä¹‹å‰ï¼Œéœ€è¦æŠŠåœ¨ç£ç›˜ä¸Šçš„é¡µç¼“å­˜åˆ°å†…å­˜ä¸­çš„Buffer
Poo1ä¹‹åæ‰å¯ä»¥è®¿é—®ã€‚</p>
<p>â€‹ <strong>ç›®çš„</strong>ï¼šå‡å°‘ä¸ç£ç›˜ç›´æ¥è¿›è¡ŒI/Oçš„æ—¶é—´</p>
<h4 id="ç¼“å†²æ± ">1ã€ç¼“å†²æ± ï¼š</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221017171714267.png" /></p>
<p>â€‹
ç¼“å†²æ± å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ¶ˆé™¤CPUå’Œç£ç›˜ä¹‹é—´çš„é¸¿æ²Ÿã€‚æ‰€ä»¥InnoDBå­˜å‚¨å¼•æ“åœ¨å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚æ—¶ï¼Œå½“éœ€è¦è®¿é—®æŸä¸ªé¡µçš„æ•°æ®æ—¶ï¼Œå°±ä¼šæŠŠå®Œæ•´çš„é¡µçš„æ•°æ®å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œ<strong>ä¹Ÿå°±æ˜¯è¯´å³ä½¿æˆ‘ä»¬åªéœ€è¦è®¿é—®ä¸€ä¸ªé¡µçš„ä¸€æ¡è®°å½•ï¼Œé‚£ä¹Ÿéœ€è¦å…ˆæŠŠæ•´ä¸ªé¡µçš„æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</strong>å°†æ•´ä¸ªé¡µåŠ è½½åˆ°å†…å­˜ä¸­åå°±å¯ä»¥è¿›è¡Œè¯»å†™è®¿é—®äº†ï¼Œ<strong>åœ¨è¿›è¡Œå®Œè¯»å†™è®¿é—®ä¹‹åå¹¶ä¸ç€æ€¥æŠŠè¯¥é¡µå¯¹åº”çš„å†…å­˜ç©ºé—´é‡Šæ”¾æ‰ï¼Œè€Œæ˜¯å°†å…¶ç¼“å­˜èµ·æ¥ï¼Œè¿™æ ·å°†æ¥æœ‰è¯·æ±‚å†æ¬¡è®¿é—®è¯¥é¡µé¢æ—¶ï¼Œå°±å¯ä»¥çœå»ç£ç›˜IOçš„å¼€é”€äº†ã€‚</strong></p>
<p><strong>ç¼“å­˜åŸåˆ™ï¼š</strong></p>
<p>â€‹ ä¼˜å…ˆå¯¹ä½¿ç”¨é¢‘æ¬¡é«˜çš„æ•°æ®è¿›è¡ŒåŠ è½½</p>
<p><strong>ç¼“å†²æ± çš„é¢„è¯»ç‰¹æ€§ï¼š</strong></p>
<p>â€‹
ç¼“å†²æ± çš„ä½œç”¨å°±æ˜¯æå‡I/0æ•ˆç‡ï¼Œè€Œæˆ‘ä»¬è¿›è¡Œè¯»å–æ•°æ®çš„æ—¶å€™å­˜åœ¨ä¸€ä¸ªâ€œå±€éƒ¨æ€§åŸç†â€ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä½¿ç”¨äº†ä¸€äº›æ•°æ®ï¼Œå¤§æ¦‚ç‡è¿˜ä¼šä½¿ç”¨å®ƒå‘¨å›´çš„ä¸€äº›æ•°æ®ï¼Œå› æ­¤é‡‡ç”¨â€œé¢„è¯»â€çš„æœºåˆ¶æå‰åŠ è½½ï¼Œå¯ä»¥å‡å°‘æœªæ¥å¯èƒ½çš„ç£ç›˜I/Oæ“ä½œã€‚</p>
<h4 id="ç¼“å†²æ± å¦‚ä½•è¯»å–æ•°æ®">2ã€ç¼“å†²æ± å¦‚ä½•è¯»å–æ•°æ®ï¼š</h4>
<p>â€‹
ç¼“å†²æ± ç®¡ç†å™¨ä¼šå°½é‡å°†ç»å¸¸ä½¿ç”¨çš„æ•°æ®ä¿å­˜èµ·æ¥ï¼Œåœ¨æ•°æ®åº“è¿›è¡Œé¡µé¢è¯»æ“ä½œçš„æ—¶å€™ï¼Œé¦–å…ˆä¼šåˆ¤æ–­è¯¥é¡µé¢æ˜¯å¦åœ¨ç¼“å†²æ± ä¸­ï¼Œå¦‚æœå­˜åœ¨å°±ç›´æ¥è¯»å–ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°±ä¼šé€šè¿‡å†…å­˜æˆ–ç£ç›˜å°†é¡µé¢å­˜æ”¾åˆ°ç¼“å†²æ± ä¸­å†è¿›è¡Œè¯»å–ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221017172013707.png" /></p>
<p>â€‹ å¦‚æœæˆ‘ä»¬æ‰§è¡Œ SQL
è¯­å¥çš„æ—¶å€™æ›´æ–°äº†ç¼“å­˜æ± ä¸­çš„æ•°æ®ï¼Œé‚£ä¹ˆè¿™äº›æ•°æ®ä¼šé©¬ä¸ŠåŒæ­¥åˆ°ç£ç›˜ä¸Šå—ï¼Ÿ</p>
<p>â€‹
å®é™…ä¸Šï¼Œå½“æˆ‘ä»¬å¯¹æ•°æ®åº“ä¸­çš„è®°å½•è¿›è¡Œä¿®æ”¹çš„æ—¶å€™ï¼Œ<strong>é¦–å…ˆä¼šä¿®æ”¹ç¼“å†²æ± ä¸­é¡µé‡Œé¢çš„è®°å½•ä¿¡æ¯ï¼Œç„¶åæ•°æ®åº“ä¼šä»¥ä¸€å®šçš„é¢‘ç‡åˆ·æ–°åˆ°ç£ç›˜ä¸Šã€‚</strong></p>
<p>â€‹
æ³¨æ„å¹¶ä¸æ˜¯æ¯æ¬¡å‘ç”Ÿæ›´æ–°æ“ä½œï¼Œéƒ½ä¼šç«‹åˆ»è¿›è¡Œç£ç›˜å›å†™ã€‚ç¼“å†²æ± ä¼šé‡‡ç”¨ä¸€ç§å«åšcheckpointçš„æœºåˆ¶å°†æ•°æ®å›å†™åˆ°ç£ç›˜ä¸Šï¼Œè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯æå‡äº†æ•°æ®åº“çš„æ•´ä½“æ€§èƒ½ã€‚æ¯”å¦‚ï¼Œå½“ç¼“å†²æ± ä¸å¤Ÿç”¨æ—¶ï¼Œéœ€è¦é‡Šæ”¾æ‰ä¸€äº›ä¸å¸¸ç”¨çš„é¡µï¼Œæ­¤æ—¶å°±å¯ä»¥å¼ºè¡Œé‡‡ç”¨checkpointçš„æ–¹å¼ï¼Œ<strong>å°†ä¸å¸¸ç”¨çš„è„é¡µå›å†™åˆ°ç£ç›˜ä¸Šï¼Œç„¶åå†ä»ç¼“å†²æ± ä¸­å°†è¿™äº›é¡µé‡Šæ”¾æ‰ã€‚è¿™é‡Œè„é¡µï¼ˆdirty
pageï¼‰æŒ‡çš„æ˜¯ç¼“å†²æ± ä¸­è¢«ä¿®æ”¹è¿‡çš„é¡µï¼Œä¸ç£ç›˜ä¸Šçš„æ•°æ®é¡µä¸ä¸€è‡´ã€‚</strong></p>
<h4 id="å¤šä¸ªbuffer-poolå®ä¾‹">3ã€å¤šä¸ªBuffer Poolå®ä¾‹ï¼š</h4>
<p>â€‹ Buffer
Poolæœ¬è´¨æ˜¯InnoDBå‘æ“ä½œç³»ç»Ÿç”³è¯·çš„ä¸€å—è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œè®¿é—®Buffer
Poolä¸­çš„æ•°æ®éƒ½éœ€è¦åŠ é”å¤„ç†ã€‚<strong>åœ¨Buffer
Poolç‰¹åˆ«å¤§è€Œä¸”å¤šçº¿ç¨‹å¹¶å‘è®¿é—®ç‰¹åˆ«é«˜çš„æƒ…å†µä¸‹ï¼Œå•ä¸€çš„Buffer
Poolå¯èƒ½ä¼šå½±å“è¯·æ±‚çš„å¤„ç†é€Ÿåº¦ã€‚</strong>æ‰€ä»¥åœ¨Buffer
Poolç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒä»¬æ‹†åˆ†æˆè‹¥å¹²ä¸ªå°çš„Buffer
Poolï¼Œ<strong>æ¯ä¸ªBuffer
Pooléƒ½ç§°ä¸ºä¸€ä¸ªå®ä¾‹ï¼Œå®ƒä»¬éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œç‹¬ç«‹çš„å»ç”³è¯·å†…å­˜ç©ºé—´ï¼Œç‹¬ç«‹çš„ç®¡ç†å„ç§é“¾è¡¨ã€‚æ‰€ä»¥åœ¨å¤šçº¿ç¨‹å¹¶å‘è®¿é—®æ—¶å¹¶ä¸ä¼šç›¸äº’å½±å“ï¼Œä»è€Œæé«˜å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚</strong></p>
<h4 id="ä¸€äº›æ•°æ®ä¸€è‡´æ€§é—®é¢˜">4ã€ä¸€äº›æ•°æ®ä¸€è‡´æ€§é—®é¢˜</h4>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221017172737298.png"
alt="image-20221017172737298" />
<figcaption aria-hidden="true">image-20221017172737298</figcaption>
</figure>
<p>â€‹ å‡è®¾æˆ‘ä»¬ä¿®æ”¹Buffer
Poolä¸­çš„æ•°æ®æˆåŠŸï¼Œä½†æ˜¯è¿˜æ²¡æ¥å¾—åŠå°†æ•°æ®åˆ·å…¥ç£ç›˜MySQLå°±æŒ‚äº†æ€ä¹ˆåŠï¼ŸæŒ‰ç…§ä¸Šå›¾çš„é€»è¾‘ï¼Œæ­¤æ—¶æ›´æ–°ä¹‹åçš„æ•°æ®åªå­˜åœ¨äºBuffer
Poolä¸­ï¼Œå¦‚æœæ­¤æ—¶MySQLå®•æœºäº†ï¼Œè¿™éƒ¨åˆ†æ•°æ®å°†ä¼šæ°¸ä¹…åœ°ä¸¢å¤±ï¼›æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>â€‹ ä½¿ç”¨Redo Logå’ŒUndo Logæ¥è§£å†³</p>
<h3 id="å››å­˜å‚¨å¼•æ“">å››ã€å­˜å‚¨å¼•æ“ï¼š</h3>
<h4
id="innodbå¼•æ“å…·å¤‡å¤–é”®æ”¯æŒåŠŸèƒ½çš„äº‹åŠ¡å­˜å‚¨å¼•æ“">1ã€InnoDBå¼•æ“ï¼šå…·å¤‡å¤–é”®æ”¯æŒåŠŸèƒ½çš„äº‹åŠ¡å­˜å‚¨å¼•æ“</h4>
<ul>
<li>é»˜è®¤äº‹åŠ¡å‹å¼•æ“ï¼Œè®¾è®¡ç”¨äºå¤„ç†å¤§é‡çš„çŸ­æœŸäº‹åŠ¡ï¼Œç¡®ä¿äº‹åŠ¡çš„å®Œæ•´æäº¤å’Œå›æ»š</li>
<li>å…¶ä¸ºå¤„ç†å·¨å¤§æ•°æ®é‡çš„æœ€å¤§æ€§èƒ½è®¾è®¡</li>
<li>InnoDBå†™çš„å¤„ç†æ•ˆç‡ä¼šå·®ä¸€äº›ï¼Œå…¶ä¼šå ç”¨æ›´å¤šçš„ç£ç›˜ç©ºé—´æ¥ä¿å­˜æ•°æ®å’Œç´¢å¼•</li>
<li>MyISAMåªç¼“å­˜ç´¢å¼•ï¼Œä¸ç¼“å­˜çœŸå®æ•°æ®ã€‚InnoDBä¸ä»…ç¼“å­˜ç´¢å¼•ï¼Œè¿˜ç¼“å­˜çœŸå®æ•°æ®ï¼Œå¯¹å†…å­˜è¦æ±‚è¾ƒé«˜ï¼Œå†…å­˜å¤§å°å¯¹æ€§èƒ½æœ‰å†³å®šæ€§çš„å½±å“ã€‚</li>
</ul>
<h4
id="myisamå¼•æ“ä¸»è¦çš„éäº‹åŠ¡å¤„ç†å­˜å‚¨å¼•æ“">2ã€MyISAMå¼•æ“ï¼šä¸»è¦çš„éäº‹åŠ¡å¤„ç†å­˜å‚¨å¼•æ“</h4>
<ul>
<li>MyISAMæä¾›äº†å¤§é‡çš„ç‰¹æ€§ï¼ŒåŒ…æ‹¬å…¨æ–‡ç´¢å¼•ã€å‹ç¼©ã€ç©ºé—´å‡½æ•°(GIS)ç­‰ï¼Œä½†MyISAM
ä¸æ”¯æŒäº‹åŠ¡ã€è¡Œçº§é”ã€å¤–é”®ï¼Œæœ‰ä¸€ä¸ªæ¯«æ— ç–‘é—®çš„ç¼ºé™·å°±æ˜¯å´©æºƒåæ— æ³•å®‰å…¨æ¢å¤ã€‚</li>
<li>ä¼˜åŠ¿æ˜¯è®¿é—®çš„é€Ÿåº¦å¿«ï¼Œå¯¹äº‹åŠ¡å®Œæ•´æ€§æ²¡æœ‰è¦æ±‚æˆ–è€…ä»¥SELECTã€INSERTä¸ºä¸»çš„åº”ç”¨</li>
<li>åº”ç”¨åœºæ™¯ï¼šåªè¯»åº”ç”¨æˆ–è€…ä»¥è¯»ä¸ºä¸»çš„ä¸šåŠ¡</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221018172423185.png" /></p>
<h4 id="archiveå¼•æ“ç”¨äºæ•°æ®å½’æ¡£">3ã€Archiveå¼•æ“ï¼šç”¨äºæ•°æ®å½’æ¡£</h4>
<h4
id="csvå¼•æ“å¯ä»¥å¿«é€Ÿä¾¿æ·å’Œå¤–ç•Œè¿›è¡Œæ•°æ®äº¤æ¢">4ã€CSVå¼•æ“ï¼šå¯ä»¥å¿«é€Ÿä¾¿æ·å’Œå¤–ç•Œè¿›è¡Œæ•°æ®äº¤æ¢</h4>
<h4 id="memoryå¼•æ“ç½®äºå†…å­˜çš„è¡¨">5ã€Memoryå¼•æ“ï¼šç½®äºå†…å­˜çš„è¡¨</h4>
<p>â€‹ Memoryé‡‡ç”¨çš„é€»è¾‘ä»‹è´¨æ˜¯å†…å­˜ï¼Œ
å“åº”é€Ÿåº¦å¾ˆå¿«ï¼Œä½†æ˜¯å½“mysqldå®ˆæŠ¤è¿›ç¨‹å´©æºƒçš„æ—¶å€™æ•°æ®ä¼šä¸¢å¤±ã€‚å¦‚ä¸‹åº”ç”¨åœºæ™¯ï¼š</p>
<ol type="1">
<li>ç›®æ ‡æ•°æ®æ¯”è¾ƒå°ï¼Œè€Œä¸”éå¸¸é¢‘ç¹çš„è¿›è¡Œè®¿é—®ï¼Œåœ¨å†…å­˜ä¸­å­˜æ”¾æ•°æ®ï¼Œå¦‚æœå¤ªå¤§çš„æ•°æ®ä¼šé€ æˆå†…å­˜æº¢å‡ºã€‚</li>
<li>å¦‚æœæ•°æ®æ˜¯ä¸´æ—¶çš„ï¼Œè€Œä¸”å¿…é¡»ç«‹å³å¯ç”¨å¾—åˆ°ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ”¾åœ¨å†…å­˜ä¸­ã€‚</li>
<li>å­˜å‚¨åœ¨Memoryè¡¨ä¸­çš„æ•°æ®å¦‚æœçªç„¶é—´ä¸¢å¤±çš„è¯ä¹Ÿæ²¡æœ‰å¤ªå¤§çš„å…³ç³»ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ•°æ®åº“ç²¾ç®€ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysql å­—ç¬¦é›†åº•å±‚åŸç†ï¼Œç”¨æˆ·ä¸æƒé™ç®¡ç†</title>
    <url>/2022/09/13/50a88c64ec31/</url>
    <content><![CDATA[<h3 id="ä¸€å­—ç¬¦é›†ä¸åº•å±‚åŸç†">ä¸€ã€å­—ç¬¦é›†ä¸åº•å±‚åŸç†</h3>
<p>mysql5.7é»˜è®¤serverå­—ç¬¦é›†ä¸º latinï¼Œä¸æ”¯æŒä¸­æ–‡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">show variables like &#x27;%character%&#x27;;</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220913152542290.png" /></p>
<ul>
<li>å½“åˆ›å»ºæ•°æ®åº“æ—¶ä¸æ˜¾ç¤ºåœ°æŒ‡å®šå­—ç¬¦é›†ï¼Œåˆ™ç»§æ‰¿mysqlæœåŠ¡å™¨çš„é»˜è®¤å­—ç¬¦é›†</li>
<li>å½“åˆ›å»ºæ•°æ®è¡¨æ—¶ä¸æ˜¾ç¤ºåœ°æŒ‡å®šå­—ç¬¦é›†ï¼Œåˆ™ç»§æ‰¿æ‰€åœ¨æ•°æ®åº“çš„é»˜è®¤å­—ç¬¦é›†</li>
</ul>
<h4 id="å·²æœ‰åº“è¡¨çš„å­—ç¬¦é›†ä¿®æ”¹">å·²æœ‰åº“è¡¨çš„å­—ç¬¦é›†ä¿®æ”¹ï¼š</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table emp1 convert to character set &#x27;utf8&#x27;</span><br></pre></td></tr></table></figure>
<h4 id="å„çº§åˆ«çš„å­—ç¬¦é›†">å„çº§åˆ«çš„å­—ç¬¦é›†ï¼š</h4>
<ul>
<li>æœåŠ¡å™¨çº§åˆ« character_set_server</li>
<li>æ•°æ®åº“çº§åˆ« character_set_database</li>
<li>è¡¨çº§åˆ«</li>
<li>åˆ—çº§åˆ«</li>
</ul>
<h4 id="å­—ç¬¦é›†å’Œæ¯”è¾ƒè§„åˆ™">å­—ç¬¦é›†å’Œæ¯”è¾ƒè§„åˆ™</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220913221630290.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220913221612265.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220913221723119.png" /></p>
<h4
id="è¯·æ±‚åˆ°å“åº”è¿‡ç¨‹ä¸­å­—ç¬¦é›†çš„å˜åŒ–">è¯·æ±‚åˆ°å“åº”è¿‡ç¨‹ä¸­å­—ç¬¦é›†çš„å˜åŒ–ï¼š</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220914222210985.png" /></p>
<p><strong>è¿™ä¸ªè¿‡ç¨‹ä¸­æ¶‰åŠåˆ°ä¸‰ä¸ªå˜é‡ï¼š</strong></p>
<p>character_set_client å’Œ character_set_connection å’Œ
character_set_results</p>
<p><strong>ä¸€èˆ¬æ¥è¯´å®¢æˆ·ç«¯ï¼šç±»unixæ“ä½œç³»ç»Ÿä½¿ç”¨utf8ç¼–ç ï¼Œwindowsä½¿ç”¨gbkç¼–ç </strong></p>
<p><strong>å¼€å‘ä¸­é€šå¸¸æŠŠä¸Šè¿°ä¸‰ä¸ªç³»ç»Ÿå˜é‡è®¾ç½®æˆå’Œå®¢æˆ·ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†ä¸€è‡´çš„æƒ…å†µï¼Œè¿™æ ·å°±å‡å°‘äº†å¾ˆå¤šæ— è°“çš„å­—ç¬¦é›†è½¬æ¢</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SET NAMES utf8mb4</span><br></pre></td></tr></table></figure>
<h3 id="äºŒsqlå¤§å°å†™è§„èŒƒ">äºŒã€SQLå¤§å°å†™è§„èŒƒ</h3>
<ul>
<li>MySQLåœ¨windowsä¸‹æ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„</li>
<li>MySQLåœ¨Linuxä¸‹æ•°æ®åº“åã€è¡¨åã€åˆ—åã€åˆ«åå¤§å°å†™è§„åˆ™æ˜¯è¿™æ ·çš„ï¼š
<ul>
<li>1ã€æ•°æ®åº“åã€è¡¨åã€è¡¨çš„åˆ«åã€å˜é‡åæ˜¯ä¸¥æ ¼åŒºåˆ†å¤§å°å†™çš„ï¼›</li>
<li>2ã€å…³é”®å­—ã€å‡½æ•°åç§°åœ¨SQLä¸­ä¸åŒºåˆ†å¤§å°å†™ï¼›</li>
<li>3ã€åˆ—åï¼ˆæˆ–å­—æ®µåï¼‰ä¸åˆ—çš„åˆ«åï¼ˆæˆ–å­—æ®µåˆ«åï¼‰åœ¨æ‰€æœ‰çš„æƒ…å†µä¸‹å‡æ˜¯å¿½ç•¥å¤§å°å†™çš„ï¼›</li>
</ul></li>
</ul>
<h3 id="ä¸‰sqlç¼–å†™å»ºè®®">ä¸‰ã€SQLç¼–å†™å»ºè®®ï¼š</h3>
<ul>
<li>å…³é”®å­—å’Œå‡½æ•°åç§°<strong>å…¨éƒ¨å¤§å†™</strong></li>
<li>æ•°æ®åº“åã€è¡¨åã€è¡¨åˆ«åã€å­—æ®µåã€å­—æ®µåˆ«åç­‰<strong>å…¨éƒ¨å°å†™</strong></li>
<li>SQLè¯­å¥å¿…é¡»ä»¥åˆ†å·ç»“å°¾</li>
</ul>
<h3 id="å››sql_modeçš„åˆç†è®¾ç½®">å››ã€SQL_MODEçš„åˆç†è®¾ç½®ï¼š</h3>
<p>â€‹ å…¶ä¼šå½±å“æ”¯æŒçš„SQLè¯­æ³•ä»¥åŠå®ƒæ‰§è¡Œçš„æ•°æ®éªŒè¯æ£€æŸ¥ã€‚</p>
<h4 id="å®½æ¾æ¨¡å¼-ä¸¥æ ¼æ¨¡å¼">1ã€å®½æ¾æ¨¡å¼ &amp; ä¸¥æ ¼æ¨¡å¼</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-06%2009.25.12.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-06%2009.25.57.png" /></p>
<p><strong>è™½ç„¶MYSQLç­‰æ•°æ®åº“æ€»æƒ³æŠŠå…³äºæ•°æ®åº“çš„æ‰€æœ‰æ“ä½œéƒ½è‡ªå·±åŒ…æ½ä¸‹æ¥ï¼ŒåŒ…æ‹¬æ•°æ®çš„æ ¡éªŒç­‰ç­‰ï¼Œä½†æ˜¯å…¶å®æœ‰äº›æ ¡éªŒæœ€å¥½åœ¨å¼€å‘å±‚å®Œæˆ</strong></p>
<h3 id="äº”æ•°æ®åº“åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„è¡¨ç¤º">äº”ã€æ•°æ®åº“åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„è¡¨ç¤ºï¼š</h3>
<h4 id="innodbå­˜å‚¨å¼•æ“æ¨¡å¼">1ã€Innodbå­˜å‚¨å¼•æ“æ¨¡å¼</h4>
<h5 id="è¡¨ç»“æ„">1ï¼‰ è¡¨ç»“æ„ï¼š</h5>
<p>â€‹ ä¸ºäº†ä¿å­˜è¡¨ç»“æ„ï¼Œ InnoDB
åœ¨æ•°æ®ç›®å½•ä¸‹å¯¹åº”çš„æ•°æ®åº“å­ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªä¸“é—¨<strong>ç”¨äºæè¿°è¡¨ç»“æ„çš„æ–‡ä»¶</strong>ï¼Œæ–‡ä»¶åæ˜¯è¿™æ ·ï¼Œè¯¥æ–‡ä»¶ä»¥äºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¡¨å.frm</span><br></pre></td></tr></table></figure>
<h5 id="è¡¨ä¸­æ•°æ®å’Œç´¢å¼•">2ï¼‰è¡¨ä¸­æ•°æ®å’Œç´¢å¼•ï¼š</h5>
<ul>
<li>ç³»ç»Ÿè¡¨ç©ºé—´ï¼š
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼ŒInnoDBä¼šåœ¨æ•°æ®ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºibdata1 ã€å¤§å°ä¸º12M
çš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯å¯¹åº”çš„ç³»ç»Ÿè¡¨ç©ºé—´åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šçš„è¡¨ç¤ºã€‚æ³¨æ„è¿™ä¸ªæ–‡ä»¶æ˜¯è‡ªæ‰©å±•æ–‡ä»¶ï¼Œå½“ä¸å¤Ÿç”¨çš„æ—¶å€™å®ƒä¼šè‡ªå·±å¢åŠ æ–‡ä»¶å¤§å°ã€‚</li>
</ul></li>
<li>ç‹¬ç«‹è¡¨ç©ºé—´ï¼š
<ul>
<li>åœ¨mysql5.6ä»¥åï¼ŒInnoDBå¹¶ä¸ä¼šé»˜è®¤çš„æŠŠå„ä¸ªè¡¨çš„æ•°æ®å­˜å‚¨åˆ°ç³»ç»Ÿè¡¨ç©ºé—´ä¸­ï¼Œè€Œæ˜¯<strong>ä¸ºæ¯ä¸€ä¸ªè¡¨å»ºç«‹ä¸€ä¸ªç‹¬ç«‹è¡¨ç©ºé—´</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åˆ›å»ºäº†å¤šå°‘ä¸ªè¡¨ï¼Œå°±æœ‰å¤šå°‘ä¸ªç‹¬ç«‹è¡¨ç©ºé—´ã€‚ä½¿ç”¨ç‹¬ç«‹è¡¨ç©ºé—´æ¥å­˜å‚¨è¡¨æ•°æ®çš„è¯ï¼Œä¼šåœ¨è¯¥è¡¨æ‰€å±æ•°æ®åº“å¯¹åº”çš„å­ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªè¡¨ç¤ºè¯¥ç‹¬ç«‹è¡¨ç©ºé—´çš„æ–‡ä»¶ï¼Œæ–‡ä»¶åå’Œè¡¨åç›¸åŒï¼Œåªä¸è¿‡æ·»åŠ äº†ä¸€ä¸ª.ibd
çš„æ‰©å±•åè€Œå·²ï¼Œæ‰€ä»¥å®Œæ•´çš„æ–‡ä»¶åç§°é•¿è¿™æ ·ï¼š</li>
</ul></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è¡¨å.ibd</span><br></pre></td></tr></table></figure>
<h4 id="myisamå­˜å‚¨å¼•æ“æ¨¡å¼">2ã€MyISAMå­˜å‚¨å¼•æ“æ¨¡å¼ï¼š</h4>
<h5 id="è¡¨ç»“æ„ä¸innodbä¸€è‡´">1ï¼‰è¡¨ç»“æ„ï¼šä¸Innodbä¸€è‡´</h5>
<h5 id="è¡¨ä¸­æ•°æ®å’Œç´¢å¼•-1">2ï¼‰è¡¨ä¸­æ•°æ®å’Œç´¢å¼•ï¼š</h5>
<p>â€‹
åœ¨MyISAMä¸­çš„ç´¢å¼•å…¨éƒ¨éƒ½æ˜¯äºŒçº§ç´¢å¼•ï¼Œè¯¥<strong>å­˜å‚¨å¼•æ“çš„æ•°æ®å’Œç´¢å¼•æ˜¯åˆ†å¼€å­˜æ”¾çš„</strong>ã€‚å‡å¦‚testè¡¨ä½¿ç”¨MyISAMå­˜å‚¨å¼•æ“çš„è¯ï¼Œé‚£ä¹ˆåœ¨å®ƒæ‰€åœ¨æ•°æ®åº“å¯¹åº”çš„atguigu
ç›®å½•ä¸‹ä¼šä¸ºtest è¡¨åˆ›å»ºè¿™ä¸‰ä¸ªæ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">test.frm å­˜å‚¨è¡¨ç»“æ„</span><br><span class="line">test.MYD å­˜å‚¨æ•°æ® (MYData)</span><br><span class="line">test.MYI å­˜å‚¨ç´¢å¼• (MYIndex)</span><br></pre></td></tr></table></figure>
<h3 id="å…­ç”¨æˆ·å’Œæƒé™ç®¡ç†">å…­ã€ç”¨æˆ·å’Œæƒé™ç®¡ç†ï¼š</h3>
<h4 id="åˆ›å»ºä¿®æ”¹ä¸åˆ é™¤ç”¨æˆ·">1ã€åˆ›å»ºã€ä¿®æ”¹ä¸åˆ é™¤ç”¨æˆ·</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE USER &#x27;kangshifu&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;123456&#x27;;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">UPDATE mysql.user SET USER=&#x27;li4&#x27; WHERE USER=&#x27;wang5&#x27;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DROP USER &#x27;kangshifu&#x27;@&#x27;localhost&#x27;;</span><br></pre></td></tr></table></figure>
<h4 id="å¯†ç ç›¸å…³ç­–ç•¥å†…å®¹">2ã€å¯†ç ç›¸å…³ç­–ç•¥å†…å®¹</h4>
<ul>
<li>ä½¿ç”¨rootç”¨æˆ·ç™»å½•Mysqlåï¼Œå¯ä»¥è¿™æ ·ä¿®æ”¹è‡ªå·±çš„å¯†ç </li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SET PASSWORD=&#x27;new_password&#x27;;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¿®æ”¹å…¶ä»–ç”¨æˆ·å¯†ç ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SET PASSWORD FOR &#x27;username&#x27;@&#x27;hostname&#x27;=&#x27;new_password&#x27;;</span><br></pre></td></tr></table></figure>
<ul>
<li>å¯†ç è¿‡æœŸç­–ç•¥ï¼š</li>
</ul>
<p>â€‹
åœ¨MySQLä¸­ï¼Œæ•°æ®åº“ç®¡ç†å‘˜å¯ä»¥æ‰‹åŠ¨è®¾ç½®è´¦å·å¯†ç è¿‡æœŸï¼Œä¹Ÿå¯ä»¥å»ºç«‹ä¸€ä¸ªè‡ªåŠ¨å¯†ç è¿‡æœŸç­–ç•¥ã€‚è¿‡æœŸç­–ç•¥å¯ä»¥æ˜¯å…¨å±€çš„ï¼Œä¹Ÿå¯ä»¥ä¸ºæ¯ä¸ªè´¦å·è®¾ç½®å•ç‹¬çš„è¿‡æœŸç­–</p>
<ul>
<li>å¯†ç é‡ç”¨ç­–ç•¥ï¼š</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SET PERSIST password_history = 6; #è®¾ç½®ä¸èƒ½é€‰æ‹©æœ€è¿‘ä½¿ç”¨è¿‡çš„6ä¸ªå¯†ç </span><br><span class="line">SET PERSIST password_reuse_interval = 365; #è®¾ç½®ä¸èƒ½é€‰æ‹©æœ€è¿‘ä¸€å¹´å†…çš„å¯†ç </span><br></pre></td></tr></table></figure>
<h4 id="æƒé™åˆ—è¡¨ç§ç±»">3ã€æƒé™åˆ—è¡¨ç§ç±»ï¼š</h4>
<ul>
<li>Mysqlçš„æƒé™ç§ç±»ï¼š
<ul>
<li>CREATEå’ŒDROP åˆ›å»ºåˆ é™¤æ•°æ®åº“å’Œè¡¨</li>
<li>SELECTã€INSERTã€UPDATEå’ŒDELETE åœ¨æ•°æ®åº“ç°æœ‰è¡¨ä¸Šæ“ä½œ</li>
<li>SELECT æ£€ç´¢æƒé™</li>
<li>INDEX å…è®¸åˆ›å»ºæˆ–åˆ é™¤ç´¢å¼•</li>
<li>ALTER æ›´æ”¹è¡¨ç»“æ„å’Œé‡å‘½å</li>
<li>GRANT å…è®¸æˆæƒç»™å…¶ä»–ç”¨æˆ·</li>
</ul></li>
<li>æˆäºˆæƒé™çš„åŸåˆ™ï¼š
<ul>
<li>åªæˆäºˆæ»¡è¶³éœ€è¦çš„æœ€å°æƒé™</li>
<li>åˆ›å»ºç”¨æˆ·æ—¶é™åˆ¶ç™»é™†ä¸»æœºIP</li>
</ul></li>
<li>æˆäºˆæƒé™æ–¹å¼æœ‰ä¸¤ç§
<ul>
<li>æŠŠè§’è‰²èµ‹äºˆç»™ç”¨æˆ·æˆæƒ</li>
<li>ç›´æ¥ç»™ç”¨æˆ·æˆæƒ</li>
</ul></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GRANT æƒé™1,æƒé™2,â€¦æƒé™n ON æ•°æ®åº“åç§°.è¡¨åç§° TO ç”¨æˆ·å@ç”¨æˆ·åœ°å€ [IDENTIFIED BY â€˜å¯†ç å£ä»¤â€™];</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHOW GRANTS FOR &#x27;user&#x27;@&#x27;ä¸»æœºåœ°å€&#x27;;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ”¶å›æƒé™</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">REVOKE æƒé™1,æƒé™2,â€¦æƒé™n ON æ•°æ®åº“åç§°.è¡¨åç§° FROM ç”¨æˆ·å@ç”¨æˆ·åœ°å€;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#æ”¶å›å…¨åº“å…¨è¡¨çš„æ‰€æœ‰æƒé™</span><br><span class="line">REVOKE ALL PRIVILEGES ON *.* FROM joe@&#x27;%&#x27;;</span><br><span class="line">#æ”¶å›mysqlåº“ä¸‹çš„æ‰€æœ‰è¡¨çš„æ’åˆ æ”¹æŸ¥æƒé™</span><br><span class="line">REVOKE SELECT,INSERT,UPDATE,DELETE ON mysql.* FROM joe@localhost;</span><br></pre></td></tr></table></figure>
<h4 id="æƒé™è¡¨">4ã€æƒé™è¡¨</h4>
<h5 id="userè¡¨">1ï¼‰Userè¡¨</h5>
<p>â€‹
è®°å½•ç”¨æˆ·è´¦å·å’Œæƒé™ä¿¡æ¯ï¼Œåˆ†ä¸ºç”¨æˆ·åˆ—ã€æƒé™åˆ—ã€å®‰å…¨åˆ—ã€èµ„æºæ§åˆ¶åˆ—ï¼ˆé™åˆ¶ç”¨æˆ·ä½¿ç”¨çš„èµ„æºï¼Œæ¯”å¦‚æ¯å°æ—¶å…è®¸æ‰§è¡Œçš„æŸ¥è¯¢æ“ä½œæ¬¡æ•°ç­‰ï¼‰</p>
<h5 id="dbè¡¨">2ï¼‰dbè¡¨</h5>
<p>â€‹
DBè¡¨ä¸­å­˜å‚¨äº†ç”¨æˆ·å¯¹æŸä¸ªæ•°æ®åº“çš„æ“ä½œæƒé™,å†³å®šç”¨æˆ·èƒ½ä»å“ªä¸ªæ•°æ®åº“ä¸­å­˜å–</p>
<h5
id="tables_privè¡¨å’Œcolumns_privè¡¨">3ï¼‰tables_privè¡¨å’Œcolumns_privè¡¨</h5>
<p>â€‹
tables_privè¡¨ç”¨æ¥å¯¹è¡¨è®¾ç½®æ“ä½œæƒé™ï¼Œcolumns_privè¡¨ç”¨æ¥å¯¹è¡¨çš„æŸä¸€åˆ—è®¾ç½®æƒé™</p>
<h5 id="procs_privè¡¨">4ï¼‰procs_privè¡¨ï¼š</h5>
<p>â€‹ procs_privè¡¨å¯ä»¥å¯¹å­˜å‚¨è¿‡ç¨‹å’Œå­˜å‚¨å‡½æ•°è®¾ç½®æ“ä½œæƒé™</p>
<h4 id="è®¿é—®æ§åˆ¶">5ã€è®¿é—®æ§åˆ¶ï¼š</h4>
<ul>
<li>è¿æ¥æ ¸å®é˜¶æ®µ</li>
</ul>
<p>â€‹
æœåŠ¡å™¨<strong>åªæœ‰åœ¨userè¡¨è®°å½•çš„Hostå’ŒUserå­—æ®µåŒ¹é…å®¢æˆ·ç«¯ä¸»æœºåå’Œç”¨æˆ·åï¼Œå¹¶ä¸”æä¾›æ­£ç¡®çš„å¯†ç æ—¶æ‰æ¥å—è¿æ¥</strong>ã€‚å¦‚æœè¿æ¥æ ¸å®æ²¡æœ‰é€šè¿‡ï¼ŒæœåŠ¡å™¨å°±å®Œå…¨æ‹’ç»è®¿é—®ï¼›å¦åˆ™ï¼ŒæœåŠ¡å™¨æ¥å—è¿æ¥ï¼Œç„¶åè¿›å…¥è¯·æ±‚æ ¸å®é˜¶æ®µç­‰å¾…ç”¨æˆ·è¯·æ±‚ã€‚</p>
<ul>
<li>è¯·æ±‚æ ¸å®é˜¶æ®µ</li>
</ul>
<p>â€‹
å¯¹æ­¤è¿æ¥ä¸Šè¿›æ¥çš„æ¯ä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨æ£€æŸ¥è¯¥è¯·æ±‚è¦æ‰§è¡Œä»€ä¹ˆæ“ä½œã€æ˜¯å¦æœ‰è¶³å¤Ÿçš„æƒé™æ¥æ‰§è¡Œå®ƒï¼Œè¿™æ­£æ˜¯éœ€è¦æˆæƒè¡¨ä¸­çš„æƒé™åˆ—å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚è¿™äº›æƒé™å¯ä»¥æ¥è‡ªuserã€dbã€table_privå’Œcolumn_privè¡¨ã€‚</p>
<p>â€‹
ç¡®è®¤æƒé™æ—¶ï¼ŒMySQL<strong>é¦–å…ˆæ£€æŸ¥userè¡¨</strong>ï¼Œå¦‚æœæŒ‡å®šçš„æƒé™æ²¡æœ‰åœ¨userè¡¨ä¸­è¢«æˆäºˆï¼Œé‚£ä¹ˆMySQLå°±ä¼š<strong>ç»§ç»­æ£€æŸ¥dbè¡¨</strong>ï¼Œdbè¡¨æ˜¯ä¸‹ä¸€å®‰å…¨å±‚çº§ï¼Œå…¶ä¸­çš„æƒé™é™å®šäºæ•°æ®åº“å±‚çº§ï¼Œåœ¨è¯¥å±‚çº§çš„SELECTæƒé™å…è®¸ç”¨æˆ·æŸ¥çœ‹æŒ‡å®šæ•°æ®åº“çš„æ‰€æœ‰è¡¨ä¸­çš„æ•°æ®ï¼›å¦‚æœåœ¨è¯¥å±‚çº§æ²¡æœ‰æ‰¾åˆ°é™å®šçš„æƒé™ï¼Œåˆ™MySQL<strong>ç»§ç»­æ£€æŸ¥tables_privè¡¨ä»¥åŠcolumns_privè¡¨</strong>ï¼Œå¦‚æœæ‰€æœ‰æƒé™è¡¨éƒ½æ£€æŸ¥å®Œæ¯•ï¼Œä½†è¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°å…è®¸çš„æƒé™æ“ä½œï¼ŒMySQLå°†è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œç”¨æˆ·è¯·æ±‚çš„æ“ä½œä¸èƒ½æ‰§è¡Œï¼Œæ“ä½œå¤±è´¥ã€‚</p>
<h4 id="è§’è‰²ç®¡ç†">6ã€è§’è‰²ç®¡ç†</h4>
<ul>
<li><p>åˆ›å»ºè§’è‰²ã€ç»™è§’è‰²èµ‹äºˆæƒé™ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE ROLE &#x27;role_name&#x27;[@&#x27;host_name&#x27;] [,&#x27;role_name&#x27;[@&#x27;host_name&#x27;]]...</span><br><span class="line"># åˆ›å»ºè§’è‰²ä¹‹åï¼Œé»˜è®¤è¿™ä¸ªè§’è‰²æ˜¯æ²¡æœ‰ä»»ä½•æƒé™çš„ï¼Œæˆ‘ä»¬éœ€è¦ç»™è§’è‰²æˆæƒã€‚ç»™è§’è‰²æˆæƒçš„è¯­æ³•ç»“æ„æ˜¯</span><br><span class="line">GRANT privileges ON table_name TO &#x27;role_name&#x27;[@&#x27;host_name&#x27;];</span><br><span class="line"># ä¸Šè¿°è¯­å¥ä¸­privilegesä»£è¡¨æƒé™çš„åç§°ï¼Œå¤šä¸ªæƒé™ä»¥é€—å·éš”å¼€</span><br><span class="line"># æŸ¥çœ‹è§’è‰²æƒé™ï¼š</span><br><span class="line">SHOW GRANTS FOR &#x27;manager&#x27;;</span><br><span class="line"># åªè¦ä½ åˆ›å»ºäº†ä¸€ä¸ªè§’è‰²ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨ç»™ä½ ä¸€ä¸ªâ€œ USAGE â€æƒé™ï¼Œæ„æ€æ˜¯è¿æ¥ç™»å½•æ•°æ®åº“çš„æƒé™ã€‚</span><br></pre></td></tr></table></figure></li>
<li><p>å›æ”¶è§’è‰²æƒé™ã€åˆ é™¤è§’è‰²</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># è§’è‰²æˆæƒåï¼Œå¯ä»¥å¯¹è§’è‰²çš„æƒé™è¿›è¡Œç»´æŠ¤ï¼Œå¯¹æƒé™è¿›è¡Œæ·»åŠ æˆ–æ’¤é”€ã€‚æ·»åŠ æƒé™ä½¿ç”¨GRANTè¯­å¥ï¼Œä¸è§’è‰²æˆæƒç›¸åŒã€‚æ’¤é”€è§’è‰²æˆ–è§’è‰²æƒé™ä½¿ç”¨REVOKEè¯­å¥ã€‚æ’¤é”€è§’è‰²</span><br><span class="line">REVOKE privileges ON tablename FROM &#x27;rolename&#x27;;</span><br><span class="line"># åˆ é™¤è§’è‰²</span><br><span class="line">DROP ROLE role [,role2]...</span><br></pre></td></tr></table></figure></li>
<li><p>ç»™ç”¨æˆ·èµ‹äºˆè§’è‰²</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># è§’è‰²åˆ›å»ºå¹¶æˆæƒåï¼Œè¦èµ‹ç»™ç”¨æˆ·å¹¶å¤„äºæ¿€æ´»çŠ¶æ€æ‰èƒ½å‘æŒ¥ä½œç”¨</span><br><span class="line">GRANT role [,role2,...] TO user [,user2,...];</span><br></pre></td></tr></table></figure></li>
<li><p>æ¿€æ´»è§’è‰²</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SET DEFAULT ROLE ALL TO user@&#x27;localhost&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><p>æ’¤é”€è§’è‰²</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">REVOKE role FROM user</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ•°æ®åº“ç²¾ç®€ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/2022/10/17/bb6cac39113d/</url>
    <content><![CDATA[<h3 id="ä¸€ä¸ºä»€ä¹ˆä½¿ç”¨ç´¢å¼•ä¼˜ç¼ºç‚¹">ä¸€ã€ä¸ºä»€ä¹ˆä½¿ç”¨ç´¢å¼•&amp;ä¼˜ç¼ºç‚¹ï¼š</h3>
<p>â€‹
é¿å…å…¨è¡¨æ‰«æï¼Œé¦–å…ˆæŸ¥çœ‹æŸ¥è¯¢æ¡ä»¶æ˜¯å¦å‘½ä¸­æŸæ¡ç´¢å¼•ï¼Œç¬¦åˆåˆ™é€šè¿‡ç´¢å¼•æŸ¥æ‰¾ç›¸å…³æ•°æ®ã€‚</p>
<p>â€‹
å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ•°æ®åº“æ²¡æœ‰ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œæ•°æ®åˆ†å¸ƒåœ¨ç¡¬ç›˜ä¸åŒçš„ä½ç½®ä¸Šé¢ï¼Œ<strong>è¯»å–æ•°æ®æ—¶ï¼Œæ‘†è‡‚éœ€è¦å‰åæ‘†åŠ¨æŸ¥æ‰¾æ•°æ®ï¼Œè¿™æ ·æ“ä½œéå¸¸æ¶ˆè€—æ—¶é—´ã€‚</strong></p>
<p>â€‹
ç´¢å¼•æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç¼“å­˜çš„æ˜¯ä¸€ä¸ªKey-Valueç»“æ„ï¼ŒKeyæ˜¯åˆ—çš„å€¼ï¼ŒValueæ˜¯è¯¥Keyæ‰€åœ¨è¡Œå¯¹åº”çš„æŒ‡é’ˆï¼ˆæ–‡ä»¶ä½ç½®ï¼‰ã€‚</p>
<h4 id="ä¼˜ç‚¹">ä¼˜ç‚¹ï¼š</h4>
<ul>
<li>é™ä½æ•°æ®åº“çš„IOæˆæœ¬ï¼Œæé«˜æ•°æ®æ£€ç´¢çš„æ•ˆç‡</li>
<li>åŠ é€Ÿè¡¨å’Œè¡¨ä¹‹é—´çš„è¿æ¥ã€‚å¯¹äºæœ‰ä¾èµ–å…³ç³»çš„å­è¡¨å’Œçˆ¶è¡¨è”åˆæŸ¥è¯¢æ—¶ï¼Œæé«˜é€Ÿåº¦</li>
<li>æ˜¾è‘—å‡å°‘æŸ¥è¯¢ä¸­åˆ†ç»„å’Œæ’åºçš„æ—¶é—´ï¼Œé™ä½CPUæ¶ˆè€—</li>
</ul>
<h4 id="ç¼ºç‚¹">ç¼ºç‚¹ï¼š</h4>
<ul>
<li>åˆ›å»ºå’Œç»´æŠ¤éœ€è¦è€—è´¹æ—¶é—´</li>
<li>ç´¢å¼•éœ€è¦å æ®ç£ç›˜ç©ºé—´ã€‚</li>
<li>ç´¢å¼•æé«˜æŸ¥è¯¢é€Ÿåº¦çš„åŒæ—¶ï¼Œä¼šé™ä½æ›´æ–°è¡¨çš„é€Ÿåº¦ã€‚</li>
</ul>
<h3 id="äºŒæ²¡æœ‰ç´¢å¼•æ—¶çš„æŸ¥æ‰¾">äºŒã€æ²¡æœ‰ç´¢å¼•æ—¶çš„æŸ¥æ‰¾ï¼š</h3>
<h4 id="case1-åœ¨å•é¡µä¸­çš„æŸ¥æ‰¾">Case1: åœ¨å•é¡µä¸­çš„æŸ¥æ‰¾</h4>
<p>â€‹ å¦‚æœæ•°æ®è¾ƒå°‘ï¼Œåˆ™æ‰€æœ‰è®°å½•éƒ½å¯ä»¥è¢«å­˜æ”¾åˆ°ä¸€ä¸ªé¡µé‡Œé¢</p>
<ul>
<li>ä»¥ä¸»é”®ä¸ºæœç´¢æ¡ä»¶ï¼šå¯ä»¥ä»¥Oï¼ˆlogN)å¤æ‚åº¦æŸ¥è¯¢åˆ°</li>
<li>ä»¥å…¶ä»–é”®ä¸ºæœç´¢æ¡ä»¶ï¼šåªèƒ½éå†.ä»æœ€å°è®°å½•å¼€å§‹ä»¥æ­¤éå†å•é“¾è¡¨ä¸­çš„æ¯æ¡è®°å½•ã€‚</li>
</ul>
<h4 id="case2åœ¨å¤šé¡µä¸­çš„æŸ¥æ‰¾">Case2ï¼šåœ¨å¤šé¡µä¸­çš„æŸ¥æ‰¾</h4>
<p>â€‹ å¦‚æœè®°å½•éå¸¸å¤šï¼Œéœ€è¦å¾ˆå¤šæ•°æ®é¡µæ¥å­˜å‚¨è¿™äº›è®°å½•ï¼Œä¸»è¦æ­¥éª¤åˆ†ä¸ºï¼š</p>
<ul>
<li>å®šä½åˆ°è®°å½•æ‰€åœ¨çš„é¡µ</li>
<li>ä»æ‰€åœ¨çš„é¡µå†…æŸ¥æ‰¾ç›¸åº”çš„è®°å½•</li>
</ul>
<p>â€‹
åœ¨æ²¡æœ‰ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œç”±äºä¸èƒ½å¿«é€Ÿå®šä½åˆ°è®°å½•æ‰€åœ¨çš„é¡µï¼Œåªèƒ½ä»ç¬¬ä¸€ä¸ªé¡µæ²¿ç€åŒå‘é“¾è¡¨ä¸€ç›´å¾€ä¸‹æ‰¾ã€‚åœ¨æ¯ä¸ªé¡µä¸­è¿›è¡ŒåŒ¹é…ã€‚å› ä¸ºè¦éå†æ‰€æœ‰çš„æ•°æ®é¡µ(ä»¥åŠåŠ è½½)ï¼Œæ‰€ä»¥éå¸¸è€—æ—¶.</p>
<h3 id="ä¸‰ç´¢å¼•çš„è®¾è®¡">ä¸‰ã€ç´¢å¼•çš„è®¾è®¡:</h3>
<p>é¦–å…ˆï¼Œç®€åŒ–å‡è®¾æŸä¸€æ¡è®°å½•åœ¨ç£ç›˜ä¸Šçš„è®°å½•å½¢å¼å¦‚ä¸‹ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221021092747727.png" /></p>
<p>é‚£</p>
<p>1ä¹ˆï¼Œå°†ä¸€äº›è®°å½•æ”¾åˆ°é¡µä¸­çš„ç¤ºæ„å›¾å°±æ˜¯å¦‚ä¸‹æ‰€ç¤ºï¼šä¸€ä¸ªæ•°æ®é¡µçš„é»˜è®¤å¤§å°ä¸º16KBï¼Œå…¶ä¸­ä¼šå­˜æœ‰ä¸€å®šæ•°é‡çš„è®°å½•ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221021105655165.png" /></p>
<p>â€‹
æˆ‘ä»¬ç°åœ¨çš„é—®é¢˜å°±æ˜¯ï¼šæƒ³è¦å¿«é€Ÿçš„å®šä½åˆ°éœ€è¦æŸ¥æ‰¾çš„è®°å½•åœ¨å“ªäº›æ•°æ®é¡µä¸­ã€‚æˆ‘ä»¬å¯ä»¥é‡‡ç”¨B+æ ‘çš„å½¢å¼è¿›è¡Œæ¶æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šæœ€åº•å±‚çš„æ•°æ®é¡µå­˜æ”¾çš„æ˜¯æ™®é€šçš„è®°å½•ï¼Œrecord_type=0ï¼Œé¡µä¸é¡µç›´æ¥ä»¥åŒå‘é“¾è¡¨çš„å½¢å¼é“¾æ¥ã€‚å†ä¸Šå±‚çš„æ•°æ®é¡µä¸­å­˜å‚¨çš„æ˜¯æ™®é€šè®°å½•çš„ç›®å½•é¡¹è®°å½•ï¼Œå®ƒä»¬çš„record_type=1ï¼Œå†å¾€ä¸Šèµ°å°±æ˜¯å±‚çº§æ›´é«˜çš„ç›®å½•é¡¹ï¼Œè‡³æ­¤æ„æˆä¸€é¢—B+æ ‘ã€‚éœ€è¦å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç›¸é‚»çš„é¡µä¹‹é—´é¡µç¼–å·ä¸ä¸€å®šè¿ç»­ï¼Œæ˜¯é€šè¿‡æŒ‡é’ˆæŒ‡å‘é“¾æ¥çš„ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221021105859291.png" /></p>
<p>â€‹
æˆ‘ä»¬å¯ä»¥åˆ©ç”¨B+æ ‘å®šä½åˆ°æŸæ¡è®°å½•åœ¨å“ªä¸ªæ•°æ®é¡µçš„å½¢å¼ï¼Œå¯ä»¥å¤§å¤§èŠ‚çœå†…å­˜å’Œç¡¬ç›˜çš„IOæ¬¡æ•°ï¼Œå®šä½åˆ°å…·ä½“çš„æ•°æ®é¡µä»¥åï¼Œåœ¨æ¯ä¸ªé¡µé¢å†…ä¹Ÿæœ‰é¡µç›®å½•ï¼Œå¯ä»¥é€šè¿‡äºŒåˆ†æ³•æ¥å®ç°å¿«é€Ÿçš„å®šä½è®°å½•ã€‚</p>
<h3 id="å››å¸¸è§ç´¢å¼•çš„æ¦‚å¿µ">å››ã€å¸¸è§ç´¢å¼•çš„æ¦‚å¿µ:</h3>
<h4 id="èšç°‡ç´¢å¼•">1ã€èšç°‡ç´¢å¼•ï¼š</h4>
<p>â€‹
æ˜¯ä¸€ç§æ•°æ®å­˜å‚¨æ–¹å¼ï¼Œæ‰€æœ‰çš„ç”¨æˆ·è®°å½•éƒ½å­˜å‚¨åœ¨äº†å¶å­èŠ‚ç‚¹ï¼Œå³<strong>æ•°æ®å³ç´¢å¼•</strong>ï¼Œ<strong>ç´¢å¼•å³æ•°æ®</strong>ã€‚</p>
<h5 id="ç‰¹ç‚¹">ç‰¹ç‚¹ï¼š</h5>
<ul>
<li>ä½¿ç”¨è®°å½•æœ¬èº«çš„ ä¸»é”®å€¼çš„å¤§å° è¿›è¡Œè®°å½•å’Œé¡µçš„æ’åº
<ul>
<li>é¡µå†…çš„è®°å½•â€”â€”æŒ‰ç…§ä¸»é”®çš„å¤§å°é¡ºåºæ’æˆå•å‘é“¾è¡¨ã€‚</li>
<li>å„ä¸ªå­˜æ”¾ç”¨æˆ·è®°å½•çš„é¡µâ€”â€”æ ¹æ®ä¸»é”®å¤§å°é¡ºåºæ’æˆä¸€ä¸ªåŒå‘é“¾è¡¨</li>
<li>å­˜æ”¾ç›®å½•é¡¹è®°å½•çš„é¡µâ€”â€”åˆ†ä¸ºä¸åŒçš„å±‚æ¬¡ï¼ŒåŒä¸€å±‚æ¬¡ä¸­çš„é¡µä¹‹é—´æŒ‰é€æ¸å¤§å°é¡ºåºæ’æˆåŒå‘é“¾è¡¨</li>
</ul></li>
<li>B+æ ‘çš„å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯å®Œæ•´çš„ç”¨æˆ·è®°å½•</li>
<li>è¿™ç§ç´¢å¼•ä¸éœ€è¦æˆ‘ä»¬åœ¨mysqlä¸­æ˜¾å¼åˆ›å»ºï¼ŒInnoDBä¼šè‡ªåŠ¨åˆ›å»ºèšç°‡ç´¢å¼•ã€‚</li>
</ul>
<h5 id="ä¼˜ç‚¹-1">ä¼˜ç‚¹ï¼š</h5>
<ul>
<li>è®¿é—®é€Ÿåº¦æ›´å¿«ï¼Œå¯¹äºä¸»é”®çš„æ’åºæŸ¥æ‰¾å’ŒèŒƒå›´æŸ¥æ‰¾éå¸¸å¿«</li>
<li>æŸ¥è¯¢æ˜¾ç¤ºä¸€å®šèŒƒå›´æ•°æ®çš„æ—¶å€™ï¼Œç”±äºæ•°æ®éƒ½ç´§å¯†ç›¸è¿ï¼Œæ•°æ®åº“ä¸ç”¨ä»å¤šä¸ªæ•°æ®å—ä¸­æå–æ•°æ®ï¼ŒèŠ‚çœäº†å¤§é‡çš„ioæ“ä½œã€‚</li>
</ul>
<h5 id="ç¼ºç‚¹-1">ç¼ºç‚¹ï¼š</h5>
<ul>
<li>æ’å…¥é€Ÿåº¦ä¸¥é‡ä¾èµ–äºæ’å…¥é¡ºåº</li>
<li>æ›´æ–°ä¸»é”®ä»£ä»·å¾ˆé«˜ï¼Œæ‰€ä»¥ä¸€èˆ¬å®šä¹‰ä¸»é”®ä¸å¯æ›´æ–°</li>
<li>äºŒçº§ç´¢å¼•è®¿é—®éœ€è¦ä¸¤æ¬¡æŸ¥æ‰¾</li>
</ul>
<h5 id="é™åˆ¶">é™åˆ¶ï¼š</h5>
<ul>
<li>ä»…æœ‰InnoDBæ•°æ®å¼•æ“æ”¯æŒï¼ŒMyISAMä¸æ”¯æŒèšç°‡ç´¢å¼•</li>
<li>æ¯ä¸ªMysqlçš„è¡¨åªèƒ½æœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯è¡¨çš„ä¸»é”®</li>
</ul>
<h4
id="äºŒçº§ç´¢å¼•è¾…åŠ©ç´¢å¼•éèšç°‡ç´¢å¼•">2ã€äºŒçº§ç´¢å¼•ï¼ˆè¾…åŠ©ç´¢å¼•ã€éèšç°‡ç´¢å¼•ï¼‰</h4>
<p>â€‹
å¦‚æœæƒ³ä»¥éä¸»é”®è¿›è¡ŒæŸ¥æ‰¾æ€ä¹ˆåŠå‘¢ï¼Ÿå¤šå»ºå‡ é¢—B+æ ‘å³å¯ã€‚ä½¿ç”¨è¯¥åˆ—çš„å¤§å°ä½œä¸ºæ•°æ®é¡µã€é¡µä¸­è®°å½•çš„æ’åºè§„åˆ™ã€‚å¯¹äºè¿™äº›B+æ ‘ä¸­ï¼Œå…¶å¶å­èŠ‚ç‚¹ä¸­å¹¶ä¸å­˜å‚¨å®Œæ•´çš„ç”¨æˆ·è®°å½•ï¼Œè€Œæ˜¯ä»…å­˜å‚¨<strong>è¯¥åˆ—
+ ä¸»é”®çš„å€¼</strong></p>
<h5 id="ç‰¹ç‚¹-1">ç‰¹ç‚¹ï¼š</h5>
<ul>
<li>ä½¿ç”¨è®°å½•æœ¬èº«çš„ è¯¥åˆ—ï¼ˆå»ºB+æ ‘ç´¢å¼•çš„åˆ—ï¼‰å€¼çš„å¤§å° è¿›è¡Œè®°å½•å’Œé¡µçš„æ’åº
<ul>
<li>é¡µå†…çš„è®°å½•â€”â€”æŒ‰ç…§è¯¥åˆ—çš„å¤§å°é¡ºåºæ’æˆå•å‘é“¾è¡¨ã€‚</li>
<li>å„ä¸ªå­˜æ”¾ç”¨æˆ·è®°å½•çš„é¡µâ€”â€”æ ¹æ®è¯¥åˆ—å¤§å°é¡ºåºæ’æˆä¸€ä¸ªåŒå‘é“¾è¡¨</li>
<li>å­˜æ”¾ç›®å½•é¡¹è®°å½•çš„é¡µâ€”â€”åˆ†ä¸ºä¸åŒçš„å±‚æ¬¡ï¼ŒåŒä¸€å±‚æ¬¡ä¸­çš„é¡µä¹‹é—´æŒ‰é€æ¸å¤§å°é¡ºåºæ’æˆåŒå‘é“¾è¡¨</li>
</ul></li>
<li>B+æ ‘çš„å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯ <strong>è¯¥åˆ—çš„å€¼ + ä¸»é”®çš„å€¼</strong></li>
<li>è¿™ç§ç´¢å¼•éœ€è¦æˆ‘ä»¬åœ¨mysqlä¸­æ˜¾å¼åˆ›å»ºã€‚</li>
<li><strong>åœ¨ä»¥è¯¥åˆ—ä¸ºæ¡ä»¶æœç´¢çš„æ—¶å€™ï¼Œéœ€è¦è¿›è¡Œå›è¡¨æ“ä½œ</strong>ï¼Œå°±æ˜¯è¯´å…ˆæŸ¥æ‰¾åˆ°è®°å½•çš„ä¸»é”®çš„å€¼ï¼Œå†åˆ©ç”¨ä¸»é”®çš„å€¼å»èšç°‡ç´¢å¼•ä¸­æŸ¥æ‰¾æ•´æ¡è®°å½•çš„å€¼ã€‚</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221021212458365.png" /></p>
<h4 id="è”åˆç´¢å¼•">3ã€è”åˆç´¢å¼•ï¼š</h4>
<p>â€‹
åŒæ—¶ä»¥å¤šä¸ªåˆ—çš„å¤§å°ä½œä¸ºæ’åºè§„åˆ™ï¼Œä¹Ÿå°±æ˜¯åŒæ—¶ä¸ºå¤šä¸ªåˆ—å»ºç«‹ç´¢å¼•ï¼Œæ¯”æ–¹è¯´æˆ‘ä»¬æƒ³è®©B+æ ‘æŒ‰ç…§
c2å’Œc3åˆ— çš„å¤§å°è¿›è¡Œæ’åºï¼Œè¿™ä¸ªåŒ…å«ä¸¤å±‚å«ä¹‰ï¼š</p>
<ul>
<li><p>å…ˆæŠŠå„ä¸ªè®°å½•å’Œé¡µæŒ‰ç…§c2åˆ—è¿›è¡Œæ’åºã€‚</p></li>
<li><p>åœ¨è®°å½•çš„c2åˆ—ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œé‡‡ç”¨c3åˆ—è¿›è¡Œæ’åº</p></li>
<li><p>ä»¥c2å’Œc3åˆ—çš„å¤§å°ä¸ºæ’åºè§„åˆ™å»ºç«‹çš„B+æ ‘ç§°ä¸º è”åˆç´¢å¼•
ï¼Œ<strong>æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªäºŒçº§ç´¢å¼•ã€‚</strong>å®ƒçš„æ„æ€ä¸åˆ†åˆ«ä¸ºc2å’Œc3åˆ—åˆ†åˆ«å»ºç«‹ç´¢å¼•çš„è¡¨è¿°æ˜¯ä¸åŒçš„ï¼Œä¸»è¦è¡¨ç°ä¸ºï¼š</p>
<ul>
<li>å»ºç«‹ è”åˆç´¢å¼• åªä¼šå»ºç«‹å¦‚ä¸Šå›¾ä¸€æ ·çš„1æ£µB+æ ‘ã€‚</li>
</ul></li>
</ul>
<h4 id="innodbçš„bæ ‘ç´¢å¼•çš„æ³¨æ„äº‹é¡¹">4ã€InnoDBçš„B+æ ‘ç´¢å¼•çš„æ³¨æ„äº‹é¡¹ï¼š</h4>
<ul>
<li><strong>æ ¹é¡µé¢ä½ç½®ä¸å˜</strong>ï¼Œå®é™…ä¸ŠB+æ ‘çš„å½¢æˆè¿‡ç¨‹å¦‚ä¸‹ï¼š
<ul>
<li>æ¯å½“ä¸ºæŸä¸ªè¡¨åˆ›å»ºä¸€ä¸ªB+æ ‘ç´¢å¼•çš„æ—¶å€™ï¼Œ<strong>éƒ½ä¼šä¸ºè¿™ä¸ªç´¢å¼•åˆ›å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹é¡µé¢ã€‚</strong></li>
<li>æœ€å¼€å§‹è¡¨ä¸­æ²¡æœ‰æ•°æ®çš„æ—¶å€™ï¼Œæ¯ä¸ªB+æ ‘ç´¢å¼•å¯¹åº”çš„æ ¹èŠ‚ç‚¹ä¸­æ—¢æ²¡æœ‰ç”¨æˆ·è®°å½•ï¼Œä¹Ÿæ²¡æœ‰ç›®å½•é¡¹è®°å½•ã€‚</li>
</ul></li>
<li>éå¶èŠ‚ç‚¹ä¸­ç›®å½•é¡¹è®°å½•çš„å”¯ä¸€æ€§ï¼šå³å¦‚æœå»ºç«‹çš„éèšç°‡ç´¢å¼•çš„é‚£ä¸€åˆ—å€¼ä¸å”¯ä¸€æ€ä¹ˆåŠï¼Ÿå®¹æ˜“å¯¼è‡´éå¶èŠ‚ç‚¹çš„ç›®å½•é¡¹ä¸å”¯ä¸€ã€‚
<ul>
<li>ä¸ºäº†è®©æ–°æ’å…¥è®°å½•èƒ½æ‰¾åˆ°è‡ªå·±åœ¨å“ªä¸ªé¡µé‡Œï¼Œ<strong>æˆ‘ä»¬éœ€è¦ä¿è¯åœ¨B+æ ‘çš„åŒä¸€å±‚å†…èŠ‚ç‚¹çš„ç›®å½•é¡¹è®°å½•é™¤é¡µå·è¿™ä¸ªå­—æ®µä»¥å¤–æ˜¯å”¯ä¸€çš„ã€‚</strong>æ‰€ä»¥å¯¹äºäºŒçº§ç´¢å¼•çš„å†…èŠ‚ç‚¹çš„ç›®å½•é¡¹è®°å½•çš„å†…å®¹å®é™…ä¸Šæ˜¯ç”±ä¸‰ä¸ªéƒ¨åˆ†æ„æˆçš„ï¼š
<ul>
<li>ç´¢å¼•åˆ—çš„å€¼</li>
<li>ä¸»é”®å€¼</li>
<li>é¡µå·</li>
</ul></li>
</ul></li>
</ul>
<figure>
<img
src="C:\Users\Fantast\AppData\Roaming\Typora\typora-user-images\image-20221021223514710.png"
alt="è“è‰²å³ä¸ºä¸»é”®å€¼ï¼Œæ©™è‰²ä¸ºå»ºç«‹ç´¢å¼•åˆ—çš„å€¼" />
<figcaption
aria-hidden="true">è“è‰²å³ä¸ºä¸»é”®å€¼ï¼Œæ©™è‰²ä¸ºå»ºç«‹ç´¢å¼•åˆ—çš„å€¼</figcaption>
</figure>
<ul>
<li>ä¸€ä¸ªé¡µé¢æœ€å°‘å­˜å‚¨2æ¡è®°å½•ï¼ˆå…¶å®å°±æ˜¯B+æ ‘æœ¬èº«çš„é™åˆ¶ï¼‰</li>
</ul>
<h4 id="myisamä¸­çš„ç´¢å¼•æ–¹æ¡ˆ">5ã€MyISAMä¸­çš„ç´¢å¼•æ–¹æ¡ˆï¼š</h4>
<p>â€‹
åœ¨MyISAMä¸­ï¼Œå…¶ä½¿ç”¨çš„B+æ ‘ç´¢å¼•çš„ï¼Œå¶å­ç»“ç‚¹å­˜å‚¨çš„æ˜¯æ•°æ®è®°å½•çš„åœ°å€ï¼Œè€Œä¸æ˜¯æ•°æ®æœ¬èº«ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/image-20221022120251019.png" /></p>
<h4 id="innodbå’Œmyisamå¼•æ“çš„åŒºåˆ«">6ã€InnoDBå’ŒMyISAMå¼•æ“çš„åŒºåˆ«</h4>
<p><strong>MyISAMçš„ç´¢å¼•æ–¹å¼éƒ½æ˜¯â€œéèšç°‡â€çš„ï¼Œä¸InnoDBåŒ…å«1ä¸ªèšç°‡ç´¢å¼•æ˜¯ä¸åŒçš„ã€‚</strong></p>
<ul>
<li><p>â‘ 
åœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦æ ¹æ®ä¸»é”®å€¼å¯¹èšç°‡ç´¢å¼•è¿›è¡Œä¸€æ¬¡æŸ¥æ‰¾å°±èƒ½æ‰¾åˆ°å¯¹åº”çš„è®°å½•ï¼Œè€Œåœ¨MyISAM
ä¸­å´éœ€è¦è¿›è¡Œä¸€æ¬¡å›è¡¨æ“ä½œï¼Œæ„å‘³ç€MyISAMä¸­å»ºç«‹çš„ç´¢å¼•ç›¸å½“äºå…¨éƒ¨éƒ½æ˜¯äºŒçº§ç´¢å¼•ã€‚</p></li>
<li><p>â‘¡
InnoDBçš„æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯ç´¢å¼•æ–‡ä»¶ï¼Œè€ŒMyISAMç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶æ˜¯åˆ†ç¦»çš„ï¼Œç´¢å¼•æ–‡ä»¶ä»…ä¿å­˜æ•°æ®è®°å½•çš„åœ°å€ã€‚</p></li>
<li><p>â‘¢
InnoDBçš„éèšç°‡ç´¢å¼•dataåŸŸå­˜å‚¨ç›¸åº”è®°å½•ä¸»é”®çš„å€¼ï¼Œè€ŒMyISAMç´¢å¼•è®°å½•çš„æ˜¯åœ°å€ã€‚</p></li>
<li><p>â‘£
MyISAMçš„å›è¡¨æ“ä½œæ˜¯ååˆ†å¿«é€Ÿçš„ï¼Œå› ä¸ºæ˜¯æ‹¿ç€åœ°å€åç§»é‡ç›´æ¥åˆ°æ–‡ä»¶ä¸­å–æ•°æ®çš„ï¼Œåè§‚InnoDBæ˜¯é€šè¿‡è·å–ä¸»é”®ä¹‹åå†å»èšç°‡ç´¢å¼•é‡Œæ‰¾è®°å½•ï¼Œè™½ç„¶è¯´ä¹Ÿä¸æ…¢ï¼Œä½†è¿˜æ˜¯æ¯”ä¸ä¸Šç›´æ¥ç”¨åœ°å€å»è®¿é—®ã€‚</p></li>
<li><p>â‘¤ InnoDBè¦æ±‚è¡¨å¿…é¡»æœ‰ä¸»é”®ï¼ˆ
MyISAMå¯ä»¥æ²¡æœ‰ï¼‰ã€‚å¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡å®šï¼Œåˆ™MySQLç³»ç»Ÿä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªå¯ä»¥éç©ºä¸”å”¯ä¸€æ ‡è¯†æ•°æ®è®°å½•çš„åˆ—ä½œä¸ºä¸»é”®ã€‚å¦‚æœä¸å­˜åœ¨è¿™ç§åˆ—ï¼Œåˆ™MySQLè‡ªåŠ¨ä¸ºInnoDBè¡¨ç”Ÿæˆä¸€ä¸ªéšå«å­—æ®µä½œä¸ºä¸»é”®ï¼Œè¿™ä¸ªå­—æ®µé•¿åº¦ä¸º6ä¸ªå­—èŠ‚ï¼Œç±»å‹ä¸ºé•¿æ•´å‹ã€‚</p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-22%2012.06.40.png" /></p>
<h4 id="ç´¢å¼•çš„æ•°æ®ç»“æ„é€‰å–">7ã€ç´¢å¼•çš„æ•°æ®ç»“æ„é€‰å–</h4>
<p>â€‹
ä¸ºäº†å‡å°‘ç´¢å¼•åœ¨å†…å­˜ä¸­çš„å ç”¨ï¼Œå…¶éƒ½æ˜¯å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¸å¯èƒ½æŠŠç´¢å¼•å…¨éƒ½ä¸€æ¬¡æ€§åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œæ‰€ä»¥è¦å°½å¯èƒ½çš„è®¾è®¡ç´¢å¼•çš„æ•°æ®ç»“æ„ï¼Œä½¿å¾—<strong>ç£ç›˜IOæ¬¡æ•°è¾ƒå°‘</strong></p>
<ul>
<li>Hashç´¢å¼•ä»é€Ÿåº¦ä¸Šæ¥è®²æ¯”æ ‘å‹ç´¢å¼•è¦å¿«å¾ˆå¤šï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆç´¢å¼•è¿˜æ˜¯è®¾è®¡æˆæ ‘çš„æ ·å­å‘¢ï¼Ÿ
<ul>
<li>å› ä¸ºHashç´¢å¼•ä»…èƒ½æ”¯æŒ ç­‰äºã€ä¸ç­‰äº æ“ä½œï¼Œæ— æ³•æ”¯æŒèŒƒå›´æŸ¥è¯¢</li>
<li>æ•°æ®çš„å­˜å‚¨æ²¡æœ‰é¡ºåºï¼Œå¦‚æœéœ€è¦ORDER BYçš„æƒ…å†µä¸‹ï¼Œè¿˜è¦é‡æ–°æ’åº</li>
<li>å¦‚æœé‡å¤å€¼å¤šï¼ŒHashå†²çªå¤šçš„è¯ï¼Œæ•ˆç‡ä¹Ÿä¼šä¸‹é™</li>
<li>ä¸èƒ½æ”¯æŒè”åˆç´¢å¼•</li>
<li>InnoDBä¸æ”¯æŒHashç´¢å¼•</li>
</ul></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/image-20221022121840709.png" /></p>
<ul>
<li>InnoDBæœ¬èº«ä¸æ”¯æŒHashç´¢å¼•ï¼Œä½†æä¾›è‡ªé€‚åº”Hashç´¢å¼•ï¼š
<ul>
<li>å¦‚æœæŸä¸ªæ•°æ®ç»å¸¸è¢«è®¿é—®ï¼Œä¸”æ»¡è¶³ä¸€å®šæ¡ä»¶ï¼Œè¯¥æ•°æ®é¡µçš„åœ°å€å°±ä¼šæ”¾å…¥Hashè¡¨ä¸­ã€‚ä¸‹æ¬¡æŸ¥è¯¢çš„æ—¶å€™ï¼Œç›´æ¥é€šè¿‡è‡ªé€‚åº”Hashå°±å¯ä»¥è®¿é—®åˆ°è¿™ä¸ªæ•°æ®é¡µã€‚</li>
</ul></li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/image-20221022122100058.png" style="zoom: 33%;" /></p>
<h4 id="bæ ‘å’Œbæ ‘çš„é€‰å–">8ã€Bæ ‘å’ŒB+æ ‘çš„é€‰å–ï¼š</h4>
<ul>
<li><p>Bæ ‘ï¼šå¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘ï¼š</p>
<ul>
<li>ï¼ˆå¶å­ç»“ç‚¹å’Œéå¶å­ç»“ç‚¹éƒ½ä¼šå­˜å‚¨æ•°æ®ï¼Œæœç´¢æœ‰å¯èƒ½ç»ˆæ­¢äºéå¶å­ç»“ç‚¹ï¼‰</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/image-20221022122415040.png" /></p></li>
<li><p>B+æ ‘ï¼š</p>
<p>B+æ ‘æ›´é€‚åˆæ–‡ä»¶ç´¢å¼•ï¼Œä¸¤è€…åŒºåˆ«å¦‚ä¸‹ï¼š</p>
<ul>
<li>æœ‰ k ä¸ªå­©å­çš„èŠ‚ç‚¹å°±æœ‰ k ä¸ªå…³é”®å­—ã€‚ä¹Ÿå°±æ˜¯å­©å­æ•°é‡ = å…³é”®å­—æ•°ï¼Œè€Œ B
æ ‘ä¸­ï¼Œå­©å­æ•°é‡ = å…³é”®å­—æ•°+1ã€‚</li>
<li>éå¶å­èŠ‚ç‚¹çš„å…³é”®å­—ä¹Ÿä¼šåŒæ—¶å­˜åœ¨åœ¨å­èŠ‚ç‚¹ä¸­ï¼Œå¹¶ä¸”æ˜¯åœ¨å­èŠ‚ç‚¹ä¸­æ‰€æœ‰å…³é”®å­—çš„æœ€å¤§ï¼ˆæˆ–æœ€å°ï¼‰ã€‚</li>
<li>éå¶å­èŠ‚ç‚¹ä»…ç”¨äºç´¢å¼•ï¼Œä¸ä¿å­˜æ•°æ®è®°å½•ï¼Œè·Ÿè®°å½•æœ‰å…³çš„ä¿¡æ¯éƒ½æ”¾åœ¨å¶å­èŠ‚ç‚¹ä¸­ã€‚è€Œ
B æ ‘ä¸­ï¼Œ éå¶å­èŠ‚ç‚¹æ—¢ä¿å­˜ç´¢å¼•ï¼Œä¹Ÿä¿å­˜æ•°æ®è®°å½•ã€‚</li>
<li>æ‰€æœ‰å…³é”®å­—éƒ½åœ¨å¶å­èŠ‚ç‚¹å‡ºç°ï¼Œå¶å­èŠ‚ç‚¹æ„æˆä¸€ä¸ªæœ‰åºé“¾è¡¨ï¼Œè€Œä¸”å¶å­èŠ‚ç‚¹æœ¬èº«æŒ‰ç…§å…³é”®å­—çš„å¤§å°ä»å°åˆ°å¤§é¡ºåºé“¾æ¥</li>
</ul></li>
<li><p>B+æ ‘ç›¸æ¯”äºBæ ‘çš„åŒºåˆ«å’Œå¥½å¤„ï¼Ÿ</p>
<ul>
<li>æŸ¥æ‰¾æ•ˆç‡æ›´ç¨³å®šï¼ˆæ•°æ®éƒ½åœ¨å¶å­èŠ‚ç‚¹ï¼‰ï¼Œä¸”æ›´é«˜ï¼ˆæ›´çŸ®èƒ–ï¼‰</li>
<li>èŒƒå›´æŸ¥æ‰¾ä¸­ï¼Œæ•ˆç‡ä¹Ÿæ›´é«˜ã€‚å› ä¸ºæ•°æ®éƒ½åœ¨å¶å­èŠ‚ç‚¹ä¸­ï¼Œå¯ä»¥é€šè¿‡æŒ‡é’ˆé“¾æ¥æŸ¥æ‰¾ã€‚</li>
</ul></li>
</ul>
<h4 id="ræ ‘">9ã€Ræ ‘</h4>
<p>â€‹
å…¶ä»…æ”¯æŒgeometryæ•°æ®ç±»å‹ã€‚æ¯”å¦‚æŸ¥æ‰¾20kmä»¥å†…æ‰€æœ‰çš„é¤å…ï¼Œå²‚èƒ½è§£å†³é«˜ç»´ç©ºé—´çš„æœç´¢é—®é¢˜ã€‚å…¶å®è´¨ä¸Šå°±æ˜¯ä¸€é¢—ç”¨æ¥å­˜å‚¨é«˜ç»´æ•°æ®çš„å¹³è¡¡æ ‘ã€‚</p>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ•°æ®åº“ç²¾ç®€ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç½‘å¾®è¯¾å ‚Chap1â€”â€”è®¡ç½‘åŸºç¡€çŸ¥è¯†ä¸æ¦‚è¿°</title>
    <url>/2022/04/27/dcdee696a9ce/</url>
    <content><![CDATA[<p>è§†é¢‘åœ°å€ï¼šhttps://www.bilibili.com/video/BV1c4411d7jb?p=2</p>
<h4 id="ä¸€ç½‘ç»œäº’è”ç½‘å’Œå› ç‰¹ç½‘æ¦‚è¿°">ä¸€ã€ç½‘ç»œã€äº’è”ç½‘å’Œå› ç‰¹ç½‘æ¦‚è¿°ï¼š</h4>
<p>1ã€ç½‘ç»œï¼ˆNetworkï¼‰ç”±è‹¥å¹²ç»“ç‚¹ï¼ˆNodeï¼‰å’Œè¿æ¥è¿™äº›ç»“ç‚¹çš„é“¾è·¯ï¼ˆLinkï¼‰ç»„æˆã€‚</p>
<p>2ã€å¤šä¸ªç½‘ç»œå¯ä»¥é€šè¿‡è·¯ç”±å™¨äº’è”ï¼Œå°±æ„æˆäº†ä¸€ä¸ªè¦†ç›–èŒƒå›´æ›´å¤§çš„ç½‘ç»œï¼Œå³<strong>äº’è”ç½‘</strong></p>
<p>3ã€<strong>å› ç‰¹ç½‘</strong>æ˜¯ä¸–ç•Œä¸Šç»™æœ€å¤§çš„äº’è”ç½‘ã€‚</p>
<h4 id="äºŒå› ç‰¹ç½‘å‘å±•é˜¶æ®µ">äºŒã€å› ç‰¹ç½‘å‘å±•é˜¶æ®µï¼š</h4>
<p>1ã€ä»å•ä¸ªç½‘ç»œARPANETå‘äº’è”ç½‘å‘å±•</p>
<p>2ã€é€æ­¥æ„æˆä¸‰çº§ç»“æ„çš„å› ç‰¹ç½‘</p>
<p>3ã€é€æ­¥å½¢æˆå¤šå±‚æ¬¡ISPç»“æ„çš„å› ç‰¹ç½‘ï¼ˆISPï¼šå› ç‰¹ç½‘æœåŠ¡æä¾›è€…ï¼‰</p>
<h4 id="ä¸‰å› ç‰¹ç½‘æœåŠ¡æä¾›è€…isp">ä¸‰ã€å› ç‰¹ç½‘æœåŠ¡æä¾›è€…ISPï¼š</h4>
<p>â€‹ ISPæ‹¥æœ‰æ¥å…¥å› ç‰¹ç½‘çš„èƒ½åŠ›ï¼Œä¸ªäººæˆ–ä¼ä¸šéœ€è¦å‘ISPç”³è¯·IPã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428140348424.png" /></p>
<h4
id="å››åŸºäºispçš„ä¸‰å±‚ç»“æ„çš„å› ç‰¹ç½‘">å››ã€åŸºäºISPçš„ä¸‰å±‚ç»“æ„çš„å› ç‰¹ç½‘ï¼š</h4>
<ul>
<li>ç¬¬ä¸€å±‚ï¼šå›½é™…æ€§åŒºåŸŸ</li>
<li>ç¬¬äºŒå±‚ï¼šåŒºåŸŸæ€§æˆ–å›½å®¶æ€§è¦†ç›–è§„æ¨¡</li>
<li>ç¬¬ä¸‰å±‚ï¼šæœ¬åœ°èŒƒå›´</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428140515599.png" style="zoom: 33%;" /></p>
<p>â€‹
ä¸€ä¸ªä¸ªäººä¸»æœºåœ¨æ¥å…¥å› ç‰¹ç½‘åä¹Ÿå¯ä»¥æˆä¸ºä¸€ä¸ªISPï¼Œåªè¦ä½¿ç”¨è·¯ç”±å™¨ç­‰å†…å®¹å°†å…¶ä»–ä¸»æœºè¿å…¥å³å¯ã€‚</p>
<h4 id="äº”å› ç‰¹ç½‘çš„æ ‡å‡†åŒ–å·¥ä½œ">äº”ã€å› ç‰¹ç½‘çš„æ ‡å‡†åŒ–å·¥ä½œï¼š</h4>
<p>â€‹
å› ç‰¹ç½‘åœ¨åˆ¶å®šå…¶æ ‡å‡†ä¸Šçš„ä¸€ä¸ªå¾ˆå¤§çš„ç‰¹ç‚¹æ˜¯<strong>é¢å‘å…¬ä¼—ã€‚</strong></p>
<p>â€‹ å› ç‰¹ç½‘æ‰€æœ‰çš„RFCï¼ˆRequest For
Commentsï¼‰æŠ€æœ¯æ–‡æ¡£éƒ½å¯ä»å› ç‰¹ç½‘ä¸Šå…è´¹ä¸‹è½½ï¼›</p>
<p>â€‹
å› ç‰¹ç½‘åä¼šISOCæ˜¯ä¸€ä¸ªå›½é™…æ€§ç»„ç»‡ï¼Œå®ƒè´Ÿè´£å¯¹å› ç‰¹ç½‘è¿›è¡Œå…¨é¢ç®¡ç†ï¼Œä»¥åŠåœ¨ä¸–ç•ŒèŒƒå›´å†…ä¿ƒè¿›å…¶å‘å±•å’Œä½¿ç”¨ã€‚</p>
<h4 id="å…­å› ç‰¹ç½‘çš„ç»„æˆ">å…­ã€å› ç‰¹ç½‘çš„ç»„æˆï¼š</h4>
<ul>
<li>è¾¹ç¼˜éƒ¨åˆ†ï¼š
<ul>
<li>ç”±æ‰€æœ‰è¿æ¥åœ¨å› ç‰¹ç½‘ä¸Šçš„ä¸»æœºç»„æˆã€‚è¿™éƒ¨åˆ†æ˜¯ç”¨æˆ·ç›´æ¥ä½¿ç”¨çš„ï¼Œç”¨æ¥è¿›è¡Œé€šä¿¡ï¼ˆä¼ é€æ•°æ®ã€éŸ³é¢‘æˆ–è§†é¢‘ï¼‰å’Œèµ„æºå…±äº«ã€‚</li>
</ul></li>
<li>æ ¸å¿ƒéƒ¨åˆ†ï¼š
<ul>
<li>ç”±å¤§é‡ç½‘ç»œå’Œè¿æ¥è¿™äº›ç½‘ç»œçš„è·¯ç”±å™¨ç»„æˆã€‚è¿™éƒ¨åˆ†æ˜¯ä¸ºè¾¹ç¼˜éƒ¨åˆ†æä¾›æœåŠ¡çš„ï¼ˆ<strong>æä¾›è¿é€šæ€§å’Œäº¤æ¢</strong>ï¼‰ã€‚</li>
</ul></li>
</ul>
<h4 id="ä¸ƒä¸‰ç§äº¤æ¢æ–¹å¼">ä¸ƒã€ä¸‰ç§äº¤æ¢æ–¹å¼ï¼š</h4>
<h5 id="ç”µè·¯äº¤æ¢-circuit-switching">1ã€ç”µè·¯äº¤æ¢ Circuit Switching</h5>
<p>â€‹
å½“ç”µè¯æ•°é‡å¢å¤šæ—¶ï¼Œæ— æ³•ä½¿å¾—ä¸¤ä¸¤ç”µè¯æœºä¹‹é—´æ¥é€šï¼Œåªèƒ½ä½¿ç”¨ç”µè¯äº¤æ¢æœºæ¥å®Œæˆç”µè¯æœºä¹‹é—´ä¸¤ä¸¤çš„é€šä¿¡ä»»åŠ¡ã€‚</p>
<p>â€‹
<strong>ç”µè¯äº¤æ¢æœºæ¥é€šç”µè¯çº¿çš„æ–¹å¼ç§°ä¸ºç”µè·¯äº¤æ¢ï¼›</strong>ä»é€šä¿¡èµ„æºçš„åˆ†é…è§’åº¦æ¥çœ‹ï¼Œ<strong>äº¤æ¢ï¼ˆSwitchingï¼‰å°±æ˜¯æŒ‰ç…§æŸç§æ–¹å¼åŠ¨æ€åœ°åˆ†é…ä¼ è¾“çº¿è·¯çš„èµ„æºï¼›</strong></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428141032502.png" alt="image-20220428141032502" style="zoom:33%;" /></p>
<p><strong>ç”µè·¯äº¤æ¢çš„ä¸‰ä¸ªæ­¥éª¤</strong>ï¼š</p>
<ul>
<li><p>å»ºç«‹è¿æ¥ï¼šåˆ†é…é€šä¿¡èµ„æºï¼ˆä¸€æ¡å›ºå®šçš„ç‰©ç†è¿æ¥ï¼Œåœ¨åŒæ–¹é€šä¿¡æ—¶ä¸ä¼šè¢«å…¶ä»–ç”¨æˆ·å ç”¨ï¼‰</p></li>
<li><p>é€šè¯ï¼ˆä¸€ç›´å ç”¨é€šä¿¡èµ„æºï¼‰</p></li>
<li><p>é‡Šæ”¾è¿æ¥ï¼ˆå½’è¿˜é€šä¿¡èµ„æºï¼‰</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428141314096.png" style="zoom: 33%;" /></p>
<p>â€‹
å½“ä½¿ç”¨ç”µè·¯äº¤æ¢æ¥ä¼ é€è®¡ç®—æœºæ•°æ®æ—¶ï¼Œå…¶çº¿è·¯çš„ä¼ è¾“æ•ˆç‡å¾€å¾€å¾ˆä½ã€‚<strong>è¿™æ˜¯ç”±äºè®¡ç®—æœºçš„æ•°æ®å¾€å¾€æ˜¯çªå‘çš„å‡ºç°åœ¨é“¾è·¯ä¸Šçš„</strong></p></li>
</ul>
<h5 id="åˆ†ç»„äº¤æ¢-packet-switching">2ã€åˆ†ç»„äº¤æ¢ Packet Switching</h5>
<p>â€‹ <strong>è·¯ç”±å™¨æ˜¯åˆ†ç»„äº¤æ¢ä¸­æœ€é‡è¦çš„è®¾å¤‡</strong></p>
<p>å‘é€æ–¹ï¼š</p>
<ul>
<li>æ„é€ åˆ†ç»„ + å‘é€åˆ†ç»„</li>
</ul>
<p>è·¯ç”±å™¨ï¼š</p>
<ul>
<li>ç¼“å­˜åˆ†ç»„ + è½¬å‘åˆ†ç»„</li>
</ul>
<p>æ¥æ”¶æ–¹ï¼š</p>
<ul>
<li>æ¥å—åˆ†ç»„ + è¿˜åŸæŠ¥æ–‡</li>
</ul>
<h5 id="æŠ¥æ–‡äº¤æ¢">3ã€æŠ¥æ–‡äº¤æ¢ï¼š</h5>
<p>â€‹
å¤§è‡´ä¸åˆ†ç»„äº¤æ¢ä¸€è‡´ï¼Œä½†æ˜¯æŠ¥æ–‡äº¤æ¢<strong>ä¸é™åˆ¶æŠ¥æ–‡çš„å¤§å°ï¼Œä¹Ÿå°±è¦æ±‚è½¬å‘çš„ä¸­é—´èŠ‚ç‚¹æœ‰è¶³å¤Ÿçš„ç¼“å­˜ç©ºé—´</strong>ï¼Œè€Œåˆ†ç»„äº¤æ¢æ˜¯ä¼šæŠŠæ•´ä¸ªæŠ¥æ–‡åˆ†æˆä¸€ä¸ªä¸ªåˆ†ç»„ï¼Œä»è€Œè¿›è¡Œä¼ è¾“ã€‚</p>
<h5 id="å¯¹æ¯”">4ã€å¯¹æ¯”ï¼š</h5>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428142115539.png" alt="image-20220428142115539" style="zoom:50%;" /></p>
<ul>
<li>ç”µè·¯äº¤æ¢ï¼š
<ul>
<li>é€šä¿¡å»¶æ—¶å°ã€æœ‰åºä¼ è¾“ã€æ— å†²çªã€é€‚ç”¨èŒƒå›´å¹¿ï¼ˆä¼ è¾“æ¨¡æ‹Ÿã€æ•°å­—ä¿¡å·éƒ½å¯ï¼‰ã€å®æ—¶æ€§å¼º</li>
<li>å»ºç«‹è¿æ¥æ—¶é—´é•¿ï¼Œçº¿è·¯ç‹¬å ï¼Œä½¿ç”¨æ•ˆç‡ä½ã€çµæ´»æ€§å·®ï¼ˆåªè¦ä¸­é—´æœ‰ä¸€ä¸ªç‚¹å‡ºé”™å°±è¦é‡æ–°æ‹¨å·ï¼‰</li>
</ul></li>
<li>æŠ¥æ–‡äº¤æ¢ï¼š
<ul>
<li>æ— éœ€å»ºç«‹è¿æ¥</li>
<li>åŠ¨æ€åˆ†é…çº¿è·¯ï¼ˆèŠ‚ç‚¹äº¤æ¢æœºä¼šå…ˆå­˜å‚¨æ•´ä¸ªæŠ¥æ–‡ï¼Œå†é€‰æ‹©åˆé€‚çš„ç©ºé—²è·¯å¾„è½¬å‘æŠ¥æ–‡ï¼‰</li>
<li>æé«˜çº¿è·¯åˆ©ç”¨ç‡ï¼Œå¯é æ€§ã€‚</li>
<li>æä¾›å¤šç›®æ ‡æœåŠ¡</li>
<li>å­˜åœ¨è½¬å‘æ—¶å»¶ã€éœ€è¦è¾ƒå¤§å­˜å‚¨ç¼“å­˜ç©ºé—´ã€éœ€è¦ä¼ è¾“é¢å¤–ä¿¡æ¯é‡ï¼ˆæŠ¥æ–‡å¤´ç­‰ï¼‰</li>
</ul></li>
<li>åˆ†ç»„äº¤æ¢ï¼š
<ul>
<li>ä¼˜ç‚¹ï¼šæŠ¥æ–‡äº¤æ¢æ‰€æ‹¥æœ‰çš„æ‰€æœ‰ä¼˜ç‚¹ï¼ŒåŒæ—¶ç®€åŒ–äº†å­˜å‚¨ç®¡ç†ï¼Œå› ä¸ºåˆ†ç»„çš„å¤§å°å›ºå®šï¼Œæ‰€æœ‰ç¼“å†²åŒºå¤§å°ä¹Ÿä¼šå›ºå®šï¼Œæ–¹ä¾¿ç®¡ç†ã€‚åŠ é€Ÿä¼ è¾“ã€å‡å°‘å‡ºé”™æ¦‚ç‡å’Œé‡å‘æ•°æ®é‡ï¼ˆå¦‚æœå‡ºé”™ï¼Œåªéœ€è¦é‡ä¼ å‡ºé”™åˆ†ç»„å³å¯ï¼‰</li>
<li>ç¼ºç‚¹ï¼šå­˜åœ¨è½¬å‘æ—¶å»¶ã€éœ€è¦è¾ƒå¤§å­˜å‚¨ç¼“å­˜ç©ºé—´ã€éœ€è¦ä¼ è¾“é¢å¤–ä¿¡æ¯é‡ï¼ˆæ§åˆ¶ä¿¡æ¯ç­‰ï¼‰ã€‚</li>
</ul></li>
<li>åˆ†ç»„äº¤æ¢ä¸­ï¼š
<ul>
<li>å¯¹äºæ•°æ®æŠ¥æœåŠ¡è€Œè¨€ï¼šå­˜åœ¨å¤±åºã€ä¸¢åºã€æˆ–è€…é‡å¤åˆ†ç»„çš„é—®é¢˜</li>
<li>å¯¹äºè™šç”µè·¯æœåŠ¡è€Œè¨€ï¼šå­˜åœ¨å‘¼å«å»ºç«‹ã€æ•°æ®ä¼ è¾“ã€è™šç”µè·¯é‡Šæ”¾ä¸‰ä¸ªè¿‡ç¨‹</li>
</ul></li>
</ul>
<h4 id="å…«è®¡ç®—æœºç½‘ç»œåˆ†ç±»">å…«ã€è®¡ç®—æœºç½‘ç»œåˆ†ç±»ï¼š</h4>
<ul>
<li>æŒ‰ç…§è¦†ç›–èŒƒå›´åˆ†ç±»ï¼š
<ul>
<li>å¹¿åŸŸç½‘WANï¼ˆè¦†ç›–èŒƒå›´æœ€å¹¿ï¼Œç”¨äºé«˜é€Ÿé•¿é€”ä¼ è¾“ï¼‰</li>
<li>åŸåŸŸç½‘MANï¼ˆé€šå¸¸ä½œä¸ºåŸå¸‚éª¨å¹²ç½‘ï¼‰</li>
<li>å±€åŸŸç½‘LAN</li>
<li>ä¸ªåŸŸç½‘PAN</li>
</ul></li>
<li>æŒ‰æ‹“æ‰‘ç»“æ„åˆ†ç±»ï¼š
<ul>
<li>æ€»çº¿å‹ç½‘ç»œ</li>
<li>æ˜Ÿå‹ç½‘ç»œ</li>
<li>ç¯å‹ç½‘ç»œ</li>
<li>ç½‘çŠ¶å‹ç½‘ç»œ</li>
</ul></li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428150509644.png" style="zoom:50%;" /></p>
<h4 id="ä¹è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡">ä¹ã€è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡ï¼š</h4>
<h5 id="é€Ÿç‡">1ã€é€Ÿç‡</h5>
<p>â€‹
è¿æ¥åœ¨è®¡ç®—æœºç½‘ç»œä¸Šçš„<strong>ä¸»æœºåœ¨æ•°å­—ä¿¡é“ä¸Šä¼ é€æ¯”ç‰¹çš„é€Ÿç‡</strong>ï¼Œä¹Ÿç§°ä¸ºæ¯”ç‰¹ç‡æˆ–æ•°æ®ç‡ã€‚</p>
<h5 id="å¸¦å®½">2ã€å¸¦å®½</h5>
<ul>
<li>åœ¨æ¨¡æ‹Ÿä¿¡å·ç³»ç»Ÿä¸­çš„æ„ä¹‰ï¼š
<ul>
<li>ä¿¡å·æ‰€åŒ…å«çš„å„ç§ä¸åŒé¢‘ç‡æˆåˆ†æ‰€å æ®çš„é¢‘ç‡èŒƒå›´ï¼›</li>
<li>å•ä½ï¼šHz ï¼Œå¸¦å®½3.1Hz( 300Hz ~ 3.4kHz)</li>
</ul></li>
<li>åœ¨è®¡ç®—æœºç½‘ç»œä¸­çš„æ„ä¹‰ï¼š
<ul>
<li>ç”¨æ¥è¡¨ç¤º<strong>ç½‘ç»œçš„é€šä¿¡çº¿è·¯æ‰€èƒ½ä¼ é€æ•°æ®çš„èƒ½åŠ›</strong>ï¼Œå› æ­¤<strong>ç½‘ç»œå¸¦å®½è¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…ä»ç½‘ç»œä¸­çš„æŸä¸€ç‚¹åˆ°å¦ä¸€ç‚¹æ‰€èƒ½é€šè¿‡çš„â€œæœ€é«˜æ•°æ®ç‡â€ï¼›</strong></li>
<li>å•ä½ï¼šb/s</li>
</ul></li>
</ul>
<h5 id="ååé‡">3ã€ååé‡</h5>
<p>â€‹ ååé‡è¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…é€šè¿‡æŸä¸ªç½‘ç»œï¼ˆæˆ–ä¿¡é“ã€æ¥å£ï¼‰çš„æ•°æ®é‡ã€‚</p>
<p>â€‹ ååé‡å—ç½‘ç»œçš„å¸¦å®½æˆ–é¢å®šé€Ÿç‡çš„é™åˆ¶</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428173106779.png" style="zoom: 50%;" /></p>
<h5 id="æ—¶å»¶">4ã€æ—¶å»¶</h5>
<p>â€‹
ç½‘ç»œæ—¶å»¶ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šå‘é€æ—¶å»¶ã€ä¼ æ’­æ—¶å»¶ã€å¤„ç†æ—¶å»¶ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹æ‰€ç¤ºï¼šï¼ˆå¤„ç†æ—¶å»¶ä¸€èˆ¬ä¸åšè®¡ç®—ï¼‰</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428173416712.png" /></p>
<h5 id="æ—¶å»¶å¸¦å®½ç§¯">5ã€æ—¶å»¶å¸¦å®½ç§¯</h5>
<ul>
<li><p>æ—¶å»¶å¸¦å®½ç§¯ = ä¼ æ’­æ—¶å»¶ * å¸¦å®½</p>
<p>è‹¥å‘é€ç«¯è¿ç»­å‘é€æ•°æ®ï¼Œåˆ™åœ¨æ‰€å‘é€çš„ç¬¬ä¸€ä¸ªæ¯”ç‰¹å³å°†åˆ°è¾¾ç»ˆç‚¹æ—¶ï¼Œå‘é€ç«¯å°±å·²ç»å‘é€äº†æ—¶å»¶å¸¦å®½ç§¯ä¸ªæ¯”ç‰¹ï¼›</p></li>
</ul>
<p>â€‹ é“¾è·¯çš„æ—¶å»¶å¸¦å®½ç§¯åˆç§°ä¸ºä»¥æ¯”ç‰¹ä¸ºå•ä½çš„é“¾è·¯é•¿åº¦ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428173800437.png" style="zoom:50%;" /></p>
<h5 id="å¾€è¿”æ—¶é—´-rtt">6ã€å¾€è¿”æ—¶é—´ RTT</h5>
<p>â€‹ ä»æºä¸»æœºåˆ°ç›®æ ‡ä¸»æœºï¼Œç›´åˆ°æºä¸»æœºæ”¶åˆ°ç›®æ ‡ä¸»æœºçš„ç­”å¤æ‰€èŠ±è´¹çš„æ—¶é—´</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428173913426.png" style="zoom: 67%;" /></p>
<h5 id="åˆ©ç”¨ç‡">7ã€åˆ©ç”¨ç‡</h5>
<ul>
<li>ä¿¡é“åˆ©ç”¨ç‡
<ul>
<li>ç”¨æ¥è¡¨ç¤ºæŸä¿¡é“æœ‰ç™¾åˆ†ä¹‹å‡ çš„æ—¶é—´æ˜¯è¢«åˆ©ç”¨çš„ï¼ˆæœ‰æ•°æ®é€šè¿‡ï¼‰ã€‚</li>
</ul></li>
<li>ç½‘ç»œåˆ©ç”¨ç‡
<ul>
<li>å…¨ç½‘ç»œçš„ä¿¡é“åˆ©ç”¨ç‡çš„åŠ æƒå¹³å‡ã€‚</li>
</ul></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428174105464.png" /></p>
<h5 id="ä¸¢åŒ…ç‡">8ã€ä¸¢åŒ…ç‡</h5>
<p>â€‹
æ˜¯æŒ‡åœ¨ä¸€å®šçš„æ—¶é—´èŒƒå›´å†…ï¼Œ<strong>ä¼ è¾“è¿‡ç¨‹ä¸­ä¸¢å¤±çš„åˆ†ç»„æ•°é‡ä¸æ€»åˆ†ç»„æ•°é‡çš„æ¯”ç‡ã€‚</strong></p>
<p>â€‹ <strong>åˆ†ç»„ä¸¢å¤±ä¸€èˆ¬æœ‰ä¸¤ç§æƒ…å†µ</strong>ï¼š</p>
<ul>
<li>åˆ†ç»„åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°è¯¯ç ï¼Œè¢«èŠ‚ç‚¹ä¸¢å¼ƒ</li>
<li>åˆ†ç»„åˆ°è¾¾ä¸€å°é˜Ÿåˆ—å·²æ»¡çš„åˆ†ç»„äº¤æ¢æœºæ—¶è¢«ä¸¢å¼ƒï¼Œåœ¨é€šä¿¡é‡è¾ƒå¤§æ—¶å°±å¯èƒ½é€ æˆç½‘ç»œæ‹¥å¡ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œä¸¢åŒ…ç‡åæ˜ äº†ç½‘ç»œçš„æ‹¥å¡æƒ…å†µï¼š</p>
<ul>
<li>æ— æ‹¥å¡æ—¶è·¯å¾„ä¸¢åŒ…ç‡ä¸º0</li>
<li>è½»åº¦æ‹¥å¡æ—¶è·¯å¾„ä¸¢åŒ…ç‡ä¸º1%~4%</li>
<li>ä¸¥é‡æ‹¥å¡æ—¶è·¯å¾„ä¸¢åŒ…ç‡ä¸º5%~15%</li>
</ul>
<h4 id="åè®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„">åã€è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ï¼š</h4>
<h5 id="å¸¸è§çš„è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„">1ã€å¸¸è§çš„è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ï¼š</h5>
<p>â€‹ OSIä½“ç³»ç»“æ„ ï¼ˆæ³•å¾‹ä¸Šçš„å›½é™…æ ‡å‡†ï¼‰ã€TCP/IP
ä½“ç³»ç»“æ„ï¼ˆäº‹å®ä¸Šçš„å›½é™…æ ‡å‡†ï¼‰</p>
<ul>
<li>OSIåè®®åˆ¶å®šè¾ƒä¸ºå¤æ‚ï¼Œè¿è¡Œæ•ˆç‡ä½ï¼Œå±‚æ¬¡åˆ’åˆ†å¹¶ä¸åˆç†ï¼Œè¢«TCP/IPä½“ç³»ä»£æ›¿</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429160500448.png" style="zoom:50%;" /></p>
<p>â€‹
å¦‚æœç”¨æˆ·ä¸»æœºéœ€è¦æ¥å…¥å› ç‰¹ç½‘ï¼Œå¿…é¡»å«æœ‰TCP/IPåè®®æ—ã€‚è·¯ç”±å™¨ä¹Ÿéœ€è¦å«æœ‰TCP/IPåè®®æ—ï¼Œä½†æ˜¯å¾€å¾€è·¯ç”±å™¨åªå…·æœ‰
ç½‘é™…å±‚å’Œç½‘ç»œæ¥å£å±‚ã€‚</p>
<p>â€‹
TCP/IPçš„ç½‘ç»œæ¥å£å±‚å¹¶æ²¡æœ‰åšè¿‡å¤šè§„å®šï¼Œå¯ä»¥å…¼å®¹å¤šç§ç½‘ç»œæ¥å£ï¼Œå¦‚æœ‰çº¿ç½‘ç»œã€WIFIæ¥å£ç­‰ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429160803014.png" style="zoom:50%;" /></p>
<p>â€‹
ä½¿ç”¨IPåè®®äº’è”ä¸åŒçš„ç½‘ç»œæ¥å£ï¼Œä¸ºå‘å…¶ä¸Šçš„TCPåè®®å’ŒUDPåè®®æä¾›ç½‘ç»œäº’è”æœåŠ¡ï¼ŒTCPåè®®åœ¨äº«å—IPæä¾›çš„ç½‘ç»œäº’è”æœåŠ¡åŸºç¡€ä¸Šï¼Œå¯å‘åº”ç”¨å±‚éƒ¨åˆ†åè®®æä¾›å¯é ä¼ è¾“çš„æœåŠ¡ï¼Œè€ŒUDPåè®®åœ¨äº«å—IPæä¾›çš„ç½‘ç»œäº’è”æœåŠ¡åŸºç¡€ä¸Šï¼Œå¯å‘åº”ç”¨å±‚éƒ¨åˆ†åè®®æä¾›ä¸å¯é ä¼ è¾“çš„æœåŠ¡ã€‚</p>
<h5 id="è®¡ç½‘ç»“æ„åˆ†å±‚çš„å¿…è¦æ€§">2ã€è®¡ç½‘ç»“æ„åˆ†å±‚çš„å¿…è¦æ€§ï¼š</h5>
<p>åœ¨å®ç°è®¡ç®—æœºç½‘ç»œçš„è¿‡ç¨‹ä¸­å¸¸è§éœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼Œå¹¶å°†ç›¸åº”é—®é¢˜åˆ’åˆ†ç»™ç›¸åº”çš„å±‚å»è¿›è¡Œå¤„ç†ï¼š</p>
<p><strong>æƒ…å†µ1ï¼š</strong></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429161416991.png" alt="ä¸¤å°ç›´è¿è®¡ç®—æœºé—´çš„ä¼ è¾“" style="zoom:50%;" /></p>
<ul>
<li><p>ç‰©ç†å±‚é—®é¢˜</p>
<ul>
<li><p>é‡‡ç”¨ä½•ç§ä¼ è¾“åª’ä½“</p></li>
<li><p>é‡‡ç”¨æ€æ ·çš„ç‰©ç†æ¥å£</p></li>
<li><p>ä½¿ç”¨æ€æ ·çš„ä¿¡å·è¡¨ç¤ºæ¯”ç‰¹0å’Œæ¯”ç‰¹1</p></li>
</ul></li>
</ul>
<p><strong>æƒ…å†µ2ï¼šåœ¨ä¸Šè¿°é—®é¢˜è§£å†³å‰æä¸‹ï¼Œè€ƒè™‘å¦‚ä¸‹æ€»çº¿å‹ç½‘ç»œï¼šï¼ˆç°åœ¨å·²ç»ä¸å¸¸ç”¨äº†ï¼‰</strong></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429161454976.png" alt="æ€»çº¿å‹ç½‘ç»œ" style="zoom:50%;" /></p>
<ul>
<li><p>æ•°æ®é“¾è·¯å±‚é—®é¢˜ï¼š</p>
<ul>
<li><p>å¦‚ä½•æ ‡è¯†ç½‘ç»œä¸­å„ä¸»æœºï¼ˆä¸»æœºç¼–å€é—®é¢˜ï¼Œä¾‹å¦‚MACåœ°å€ï¼‰</p></li>
<li><p>å¦‚ä½•ä»ä¿¡å·æ‰€æ ‡è¯†çš„ä¸€è¿ä¸²æ¯”ç‰¹æµä¸­åŒºåˆ†å‡º<strong>åœ°å€å’Œæ•°æ®</strong></p></li>
<li><p>å¦‚ä½•åè°ƒå„ä¸ªä¸»æœºäº‰ç”¨æ€»çº¿</p></li>
<li><p>ä½¿ç”¨ä»¥å¤ªç½‘äº¤æ¢æœºå°†å¤šå°ä¸»æœºäº’è”å½¢æˆçš„äº¤æ¢å¼ä»¥å¤ªç½‘ä¸­ï¼šä»¥å¤ªç½‘äº¤æ¢æœºæ˜¯å¦‚ä½•å®ç°çš„</p></li>
</ul></li>
</ul>
<p><strong>æƒ…å†µ3ï¼šè§£å†³ä»¥ä¸Šé—®é¢˜åï¼Œåˆ†ç»„å°±å¯ä»¥åœ¨ä¸€ç»„ç½‘ç»œä¸­ä¼ è¾“äº†ï¼Œç„¶è€Œæˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„å› ç‰¹ç½‘æ›´ä¸ºå¤æ‚ï¼Œå…¶æ˜¯ç”±è®¸å¤šè·¯ç”±å™¨å°†å¤šä¸ªç½‘ç»œè¿›è¡Œäº’è¿èµ·æ¥çš„äº’è”ç½‘ï¼Œè€ƒè™‘å¦‚ä¸‹ç”±3ä¸ªè·¯ç”±å™¨å’Œ4ä¸ªç½‘ç»œæ„æˆçš„å°å‹äº’è”ç½‘</strong></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429162242434.png" alt="=" style="zoom:50%;" /></p>
<ul>
<li><p>ç½‘ç»œå±‚:</p>
<ul>
<li><p>å¦‚ä½•æ ‡è¯†å„ä¸ªç½‘ç»œä»¥åŠç½‘ç»œä¸­çš„å„ä¸»æœºï¼ˆç½‘ç»œå’Œä¸»æœºå…±åŒç¼–å€çš„é—®é¢˜ï¼Œå¦‚IPåœ°å€ï¼‰</p></li>
<li><p>åˆ†ç»„ä»æºä¸»æœºåˆ°ç›®çš„ä¸»æœºå¯èµ°è·¯å¾„ä¸æ­¢ä¸€æ¡ï¼Œè·¯ç”±å™¨åº”å½“å¦‚ä½•è½¬å‘åˆ†ç»„ï¼Œå¦‚ä½•è¿›è¡Œè·¯ç”±é€‰æ‹©</p></li>
</ul></li>
</ul>
<p><strong>æƒ…å†µ4ï¼šè§£å†³ä»¥ä¸Šé—®é¢˜åï¼Œå¯ä»¥å®ç°åˆ†ç»„åœ¨ç½‘ç»œä¸¤ä¸»æœºé—´ä¼ è¾“çš„é—®é¢˜ï¼Œå¯¹äºè®¡ç®—æœºç½‘ç»œåº”ç”¨è€Œè¨€è¿œè¿œä¸å¤Ÿï¼Œå¯¹äºä¸€å°ä¸»æœºè€Œè¨€ï¼Œå¯èƒ½å­˜åœ¨å¤šä¸ªè¿›ç¨‹</strong></p>
<ul>
<li><p>è¿è¾“å±‚</p>
<ul>
<li><p><strong>å¦‚ä½•æ ‡è¯†ä¸ç½‘ç»œé€šä¿¡ç›¸å…³çš„åº”ç”¨è¿›ç¨‹</strong>ï¼Œå³è§£å†³è¿›ç¨‹ä¹‹é—´åŸºäºç½‘ç»œçš„é€šä¿¡é—®é¢˜</p></li>
<li><p>å‡ºç°ä¼ è¾“é”™è¯¯æ—¶ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿï¼ˆæŸä¸ªåˆ†ç»„åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°è¯¯ç ï¼Œæˆ–ç”±äºè·¯ç”±å™¨ç¹å¿™ä¸¢å¼ƒåˆ†ç»„ï¼‰</p></li>
</ul></li>
</ul>
<p><strong>æƒ…å†µ5ï¼šè§£å†³ä¸Šè¿°é—®é¢˜åï¼Œå¯ä»¥å®ç°è¿›ç¨‹ä¹‹é—´ï¼ŒåŸºäºç½‘ç»œçš„é€šä¿¡ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œåˆ¶å®šåº”ç”¨å±‚åè®®ï¼Œæ ¹æ®åè®®å†…å®¹å®Œæˆç‰¹å®šç½‘ç»œåº”ç”¨å³å¯</strong></p>
<ul>
<li>åº”ç”¨å±‚
<ul>
<li>æ”¯æŒä¸‡ç»´ç½‘åº”ç”¨çš„HTTP</li>
<li>æ”¯æŒé‚®ä»¶æœåŠ¡çš„SMTP</li>
<li>â€¦â€¦</li>
</ul></li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429162801442.png" style="zoom:50%;" /></p>
<h5 id="åˆ†å±‚æ€æƒ³ä¸¾ä¾‹">3ã€åˆ†å±‚æ€æƒ³ä¸¾ä¾‹ï¼š</h5>
<video src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/2022_04_29_19_04_47_435.mp4">
</video>
<h5 id="ä¸“ç”¨æœ¯è¯­">4ã€ä¸“ç”¨æœ¯è¯­ï¼š</h5>
<ul>
<li>å®ä½“ï¼šä»»ä½•å¯å‘é€æˆ–æ¥æ”¶ä¿¡æ¯çš„ç¡¬ä»¶æˆ–è½¯ä»¶è¿›ç¨‹ã€‚</li>
<li>å¯¹ç­‰å®ä½“ï¼šæ”¶å‘åŒå‘ç›¸åŒå±‚æ¬¡ä¸­çš„å®ä½“
<ul>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429202752020.png" style="zoom:50%;" /></li>
</ul></li>
<li>åè®®ï¼šæ§åˆ¶ä¸¤ä¸ªå¯¹ç­‰å®ä½“<strong>è¿›è¡Œé€»è¾‘é€šä¿¡</strong>çš„è§„åˆ™çš„é›†åˆã€‚
<ul>
<li>åè®®çš„ä¸‰è¦ç´ ï¼š
<ul>
<li>è¯­æ³•ï¼šå®šä¹‰æ‰€äº¤æ¢ä¿¡æ¯çš„æ ¼å¼</li>
<li>è¯­ä¹‰ï¼šå®šä¹‰æ”¶å‘åŒæ–¹æ‰€è¦å®Œæˆçš„æ“ä½œ</li>
<li>åŒæ­¥ï¼šå®šä¹‰æ”¶å‘åŒæ–¹çš„æ—¶åºå…³ç³»ï¼ˆ ä¾‹å¦‚ TCPå®¢æˆ·ç«¯ä¸
TCPæœåŠ¡å™¨ä¹‹é—´çš„æ—¶åºå…³ç³»ï¼ŒçŠ¶æ€è½¬æ¢ï¼‰</li>
</ul></li>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429202822644.png" style="zoom:50%;" /></li>
</ul></li>
<li>æœåŠ¡ï¼šåœ¨åè®®çš„æ§åˆ¶ä¸‹ï¼Œä¸¤ä¸ªå¯¹ç­‰å®ä½“é—´çš„é€»è¾‘é€šä¿¡ä½¿å¾—æœ¬å±‚èƒ½å¤Ÿå‘ä¸Šä¸€å±‚æä¾›æœåŠ¡ã€‚
<ul>
<li>è¦å®ç°æœ¬å±‚åè®®ï¼Œè¿˜éœ€è¦ä½¿ç”¨ä¸‹é¢ä¸€å±‚æ‰€æä¾›çš„æœåŠ¡ã€‚</li>
<li>åè®®æ˜¯â€œæ°´å¹³çš„"ï¼ŒæœåŠ¡æ˜¯â€œå‚ç›´çš„"ã€‚</li>
<li>å®ä½“çœ‹å¾—è§ç›¸é‚»ä¸‹å±‚æ‰€æä¾›çš„æœåŠ¡ï¼Œä½†å¹¶ä¸çŸ¥é“å®ç°è¯¥æœåŠ¡çš„å…·ä½“åè®®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸‹é¢çš„åè®®å¯¹ä¸Šé¢çš„å®ä½“æ˜¯â€œé€æ˜â€çš„ã€‚</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429203246032.png" /></li>
</ul></li>
<li>æœåŠ¡è®¿é—®ç‚¹ï¼šåœ¨åŒä¸€ç³»ç»Ÿä¸­ç›¸é‚»ä¸¤å±‚çš„å®ä½“äº¤æ¢ä¿¡æ¯çš„é€»è¾‘æ¥å£ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„æœåŠ¡ç±»å‹ã€‚</li>
<li>æœåŠ¡åŸè¯­ï¼šä¸Šå±‚ä½¿ç”¨ä¸‹å±‚æ‰€æä¾›çš„æœåŠ¡å¿…é¡»é€šè¿‡ä¸ä¸‹å±‚äº¤æ¢ä¸€äº›å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤ç§°ä¸ºæœåŠ¡åŸè¯­ã€‚</li>
<li>åè®®æ•°æ®å•å…ƒPDUï¼šå¯¹ç­‰å±‚æ¬¡ä¹‹é—´ä¼ é€çš„æ•°æ®åŒ…ç§°ä¸ºè¯¥å±‚çš„<strong>åè®®æ•°æ®å•å…ƒ</strong>ã€‚
<ul>
<li>æ¯”ç‰¹æµã€å¸§ã€IPæ•°æ®æŠ¥ã€TCPæŠ¥æ–‡æ®µã€UDPç”¨æˆ·æ•°æ®æŠ¥ã€æŠ¥æ–‡</li>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429203352501.png" style="zoom:67%;" /></li>
</ul></li>
<li>æœåŠ¡æ•°æ®å•å…ƒSDUï¼šåŒä¸€ç³»ç»Ÿå†…ï¼Œå±‚ä¸å±‚ä¹‹é—´äº¤æ¢çš„æ•°æ®åŒ…ç§°ä¸ºæœåŠ¡æ•°æ®å•å…ƒã€‚</li>
</ul>
<h4 id="åä¸€ä¹ é¢˜">åä¸€ã€ä¹ é¢˜ï¼š</h4>
<h5 id="section">1ã€</h5>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220430113545991.png" /></p>
<h5 id="section-1">2ã€</h5>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220430113940223.png" /></p>
<h5 id="section-2">3ã€</h5>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220430114621627.png" /></p>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>Computer Network</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç½‘å¾®è¯¾å ‚Chap1â€”â€”è®¡ç½‘åŸºç¡€çŸ¥è¯†ä¸æ¦‚è¿°</title>
    <url>/2022/04/27/70c42ee7d534/</url>
    <content><![CDATA[<p>è§†é¢‘åœ°å€ï¼šhttps://www.bilibili.com/video/BV1c4411d7jb?p=2</p>
<h4 id="ä¸€ç½‘ç»œäº’è”ç½‘å’Œå› ç‰¹ç½‘æ¦‚è¿°">ä¸€ã€ç½‘ç»œã€äº’è”ç½‘å’Œå› ç‰¹ç½‘æ¦‚è¿°ï¼š</h4>
<p>1ã€ç½‘ç»œï¼ˆNetworkï¼‰ç”±è‹¥å¹²ç»“ç‚¹ï¼ˆNodeï¼‰å’Œè¿æ¥è¿™äº›ç»“ç‚¹çš„é“¾è·¯ï¼ˆLinkï¼‰ç»„æˆã€‚</p>
<p>2ã€å¤šä¸ªç½‘ç»œå¯ä»¥é€šè¿‡è·¯ç”±å™¨äº’è”ï¼Œå°±æ„æˆäº†ä¸€ä¸ªè¦†ç›–èŒƒå›´æ›´å¤§çš„ç½‘ç»œï¼Œå³<strong>äº’è”ç½‘</strong></p>
<p>3ã€<strong>å› ç‰¹ç½‘</strong>æ˜¯ä¸–ç•Œå±±ç»™æœ€å¤§çš„äº’è”ç½‘ã€‚</p>
<h4 id="äºŒå› ç‰¹ç½‘å‘å±•é˜¶æ®µ">äºŒã€å› ç‰¹ç½‘å‘å±•é˜¶æ®µï¼š</h4>
<p>1ã€ä»å•ä¸ªç½‘ç»œARPANETå‘äº’è”ç½‘å‘å±•</p>
<p>2ã€é€æ­¥æ„æˆä¸‰çº§ç»“æ„çš„å› ç‰¹ç½‘</p>
<p>3ã€é€æ­¥å½¢æˆå¤šå±‚æ¬¡ISPç»“æ„çš„å› ç‰¹ç½‘ï¼ˆISPï¼šå› ç‰¹ç½‘æœåŠ¡æä¾›è€…ï¼‰</p>
<h4 id="ä¸‰å› ç‰¹ç½‘æœåŠ¡æä¾›è€…isp">ä¸‰ã€å› ç‰¹ç½‘æœåŠ¡æä¾›è€…ISPï¼š</h4>
<p>â€‹ ISPæ‹¥æœ‰æ¥å…¥å› ç‰¹ç½‘çš„èƒ½åŠ›ï¼Œä¸ªäººæˆ–ä¼ä¸šéœ€è¦å‘ISPç”³è¯·IPã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428140348424.png" /></p>
<h4
id="å››åŸºäºispçš„ä¸‰å±‚ç»“æ„çš„å› ç‰¹ç½‘">å››ã€åŸºäºISPçš„ä¸‰å±‚ç»“æ„çš„å› ç‰¹ç½‘ï¼š</h4>
<ul>
<li>ç¬¬ä¸€å±‚ï¼šå›½é™…æ€§åŒºåŸŸ</li>
<li>ç¬¬äºŒå±‚ï¼šåŒºåŸŸæ€§æˆ–å›½å®¶æ€§è¦†ç›–è§„æ¨¡</li>
<li>ç¬¬ä¸‰å±‚ï¼šæœ¬åœ°èŒƒå›´</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428140515599.png" style="zoom: 33%;" /></p>
<p>â€‹
ä¸€ä¸ªä¸ªäººä¸»æœºåœ¨æ¥å…¥å› ç‰¹ç½‘åä¹Ÿå¯ä»¥æˆä¸ºä¸€ä¸ªISPï¼Œåªè¦ä½¿ç”¨è·¯ç”±å™¨ç­‰å†…å®¹å°†å…¶ä»–ä¸»æœºè¿å…¥å³å¯ã€‚</p>
<h4 id="äº”å› ç‰¹ç½‘çš„æ ‡å‡†åŒ–å·¥ä½œ">äº”ã€å› ç‰¹ç½‘çš„æ ‡å‡†åŒ–å·¥ä½œï¼š</h4>
<p>â€‹
å› ç‰¹ç½‘åœ¨åˆ¶å®šå…¶æ ‡å‡†ä¸Šçš„ä¸€ä¸ªå¾ˆå¤§çš„ç‰¹ç‚¹æ˜¯<strong>é¢å‘å…¬ä¼—ã€‚</strong></p>
<p>â€‹ å› ç‰¹ç½‘æ‰€æœ‰çš„RFCï¼ˆRequest For
Commentsï¼‰æŠ€æœ¯æ–‡æ¡£éƒ½å¯ä»å› ç‰¹ç½‘ä¸Šå…è´¹ä¸‹è½½ï¼›</p>
<p>â€‹
å› ç‰¹ç½‘åä¼šISOCæ˜¯ä¸€ä¸ªå›½é™…æ€§ç»„ç»‡ï¼Œå®ƒè´Ÿè´£å¯¹å› ç‰¹ç½‘è¿›è¡Œå…¨é¢ç®¡ç†ï¼Œä»¥åŠåœ¨ä¸–ç•ŒèŒƒå›´å†…ä¿ƒè¿›å…¶å‘å±•å’Œä½¿ç”¨ã€‚</p>
<h4 id="å…­å› ç‰¹ç½‘çš„ç»„æˆ">å…­ã€å› ç‰¹ç½‘çš„ç»„æˆï¼š</h4>
<ul>
<li>è¾¹ç¼˜éƒ¨åˆ†ï¼š
<ul>
<li>ç”±æ‰€æœ‰è¿æ¥åœ¨å› ç‰¹ç½‘ä¸Šçš„ä¸»æœºç»„æˆã€‚è¿™éƒ¨åˆ†æ˜¯ç”¨æˆ·ç›´æ¥ä½¿ç”¨çš„ï¼Œç”¨æ¥è¿›è¡Œé€šä¿¡ï¼ˆä¼ é€æ•°æ®ã€éŸ³é¢‘æˆ–è§†é¢‘ï¼‰å’Œèµ„æºå…±äº«ã€‚</li>
</ul></li>
<li>æ ¸å¿ƒéƒ¨åˆ†ï¼š
<ul>
<li>ç”±å¤§é‡ç½‘ç»œå’Œè¿æ¥è¿™äº›ç½‘ç»œçš„è·¯ç”±å™¨ç»„æˆã€‚è¿™éƒ¨åˆ†æ˜¯ä¸ºè¾¹ç¼˜éƒ¨åˆ†æä¾›æœåŠ¡çš„ï¼ˆ<strong>æä¾›è¿é€šæ€§å’Œäº¤æ¢</strong>ï¼‰ã€‚</li>
</ul></li>
</ul>
<h4 id="ä¸ƒä¸‰ç§äº¤æ¢æ–¹å¼">ä¸ƒã€ä¸‰ç§äº¤æ¢æ–¹å¼ï¼š</h4>
<h5 id="ç”µè·¯äº¤æ¢-circuit-switching">1ã€ç”µè·¯äº¤æ¢ Circuit Switching</h5>
<p>â€‹
å½“ç”µè¯æ•°é‡å¢å¤šæ—¶ï¼Œæ— æ³•ä½¿å¾—ä¸¤ä¸¤ç”µè¯æœºä¹‹é—´æ¥é€šï¼Œåªèƒ½ä½¿ç”¨ç”µè¯äº¤æ¢æœºæ¥å®Œæˆç”µè¯æœºä¹‹é—´ä¸¤ä¸¤çš„é€šä¿¡ä»»åŠ¡ã€‚</p>
<p>â€‹
<strong>ç”µè¯äº¤æ¢æœºæ¥é€šç”µè¯çº¿çš„æ–¹å¼ç§°ä¸ºç”µè·¯äº¤æ¢ï¼›</strong>ä»é€šä¿¡èµ„æºçš„åˆ†é…è§’åº¦æ¥çœ‹ï¼Œ<strong>äº¤æ¢ï¼ˆSwitchingï¼‰å°±æ˜¯æŒ‰ç…§æŸç§æ–¹å¼åŠ¨æ€åœ°åˆ†é…ä¼ è¾“çº¿è·¯çš„èµ„æºï¼›</strong></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428141032502.png" alt="image-20220428141032502" style="zoom:33%;" /></p>
<p><strong>ç”µè·¯äº¤æ¢çš„ä¸‰ä¸ªæ­¥éª¤</strong>ï¼š</p>
<ul>
<li><p>å»ºç«‹è¿æ¥ï¼šåˆ†é…é€šä¿¡èµ„æºï¼ˆä¸€æ¡å›ºå®šçš„ç‰©ç†è¿æ¥ï¼Œåœ¨åŒæ–¹é€šä¿¡æ—¶ä¸ä¼šè¢«å…¶ä»–ç”¨æˆ·å ç”¨ï¼‰</p></li>
<li><p>é€šè¯ï¼ˆä¸€ç›´å ç”¨é€šä¿¡èµ„æºï¼‰</p></li>
<li><p>é‡Šæ”¾è¿æ¥ï¼ˆå½’è¿˜é€šä¿¡èµ„æºï¼‰</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428141314096.png" style="zoom: 33%;" /></p>
<p>â€‹
å½“ä½¿ç”¨ç”µè·¯äº¤æ¢æ¥ä¼ é€è®¡ç®—æœºæ•°æ®æ—¶ï¼Œå…¶çº¿è·¯çš„ä¼ è¾“æ•ˆç‡å¾€å¾€å¾ˆä½ã€‚<strong>è¿™æ˜¯ç”±äºè®¡ç®—æœºçš„æ•°æ®å¾€å¾€æ˜¯çªå‘çš„å‡ºç°åœ¨é“¾è·¯ä¸Šçš„</strong></p></li>
</ul>
<h5 id="åˆ†ç»„äº¤æ¢-packet-switching">2ã€åˆ†ç»„äº¤æ¢ Packet Switching</h5>
<p>â€‹ <strong>è·¯ç”±å™¨æ˜¯åˆ†ç»„äº¤æ¢ä¸­æœ€é‡è¦çš„è®¾å¤‡</strong></p>
<p>å‘é€æ–¹ï¼š</p>
<ul>
<li>æ„é€ åˆ†ç»„ + å‘é€åˆ†ç»„</li>
</ul>
<p>è·¯ç”±å™¨ï¼š</p>
<ul>
<li>ç¼“å­˜åˆ†ç»„ + è½¬å‘åˆ†ç»„</li>
</ul>
<p>æ¥æ”¶æ–¹ï¼š</p>
<ul>
<li>æ¥å—åˆ†ç»„ + è¿˜åŸæŠ¥æ–‡</li>
</ul>
<h5 id="æŠ¥æ–‡äº¤æ¢">3ã€æŠ¥æ–‡äº¤æ¢ï¼š</h5>
<p>â€‹
å¤§è‡´ä¸åˆ†ç»„äº¤æ¢ä¸€è‡´ï¼Œä½†æ˜¯æŠ¥æ–‡äº¤æ¢<strong>ä¸é™åˆ¶æŠ¥æ–‡çš„å¤§å°ï¼Œä¹Ÿå°±è¦æ±‚è½¬å‘çš„ä¸­é—´èŠ‚ç‚¹æœ‰è¶³å¤Ÿçš„ç¼“å­˜ç©ºé—´</strong>ï¼Œè€Œåˆ†ç»„äº¤æ¢æ˜¯ä¼šæŠŠæ•´ä¸ªæŠ¥æ–‡åˆ†æˆä¸€ä¸ªä¸ªåˆ†ç»„ï¼Œä»è€Œè¿›è¡Œä¼ è¾“ã€‚</p>
<h5 id="å¯¹æ¯”">4ã€å¯¹æ¯”ï¼š</h5>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428142115539.png" alt="image-20220428142115539" style="zoom:50%;" /></p>
<ul>
<li>ç”µè·¯äº¤æ¢ï¼š
<ul>
<li>é€šä¿¡å»¶æ—¶å°ã€æœ‰åºä¼ è¾“ã€æ— å†²çªã€é€‚ç”¨èŒƒå›´å¹¿ï¼ˆä¼ è¾“æ¨¡æ‹Ÿã€æ•°å­—ä¿¡å·éƒ½å¯ï¼‰ã€å®æ—¶æ€§å¼º</li>
<li>å»ºç«‹è¿æ¥æ—¶é—´é•¿ï¼Œçº¿è·¯ç‹¬å ï¼Œä½¿ç”¨æ•ˆç‡ä½ã€çµæ´»æ€§å·®ï¼ˆåªè¦ä¸­é—´æœ‰ä¸€ä¸ªç‚¹å‡ºé”™å°±è¦é‡æ–°æ‹¨å·ï¼‰</li>
</ul></li>
<li>æŠ¥æ–‡äº¤æ¢ï¼š
<ul>
<li>æ— éœ€å»ºç«‹è¿æ¥</li>
<li>åŠ¨æ€åˆ†é…çº¿è·¯ï¼ˆèŠ‚ç‚¹äº¤æ¢æœºä¼šå…ˆå­˜å‚¨æ•´ä¸ªæŠ¥æ–‡ï¼Œå†é€‰æ‹©åˆé€‚çš„ç©ºé—²è·¯å¾„è½¬å‘æŠ¥æ–‡ï¼‰</li>
<li>æé«˜çº¿è·¯åˆ©ç”¨ç‡ï¼Œå¯é æ€§ã€‚</li>
<li>æä¾›å¤šç›®æ ‡æœåŠ¡</li>
<li>å­˜åœ¨è½¬å‘æ—¶å»¶ã€éœ€è¦è¾ƒå¤§å­˜å‚¨ç¼“å­˜ç©ºé—´ã€éœ€è¦ä¼ è¾“é¢å¤–ä¿¡æ¯é‡ï¼ˆæŠ¥æ–‡å¤´ç­‰ï¼‰</li>
</ul></li>
<li>åˆ†ç»„äº¤æ¢ï¼š
<ul>
<li>ä¼˜ç‚¹ï¼šæŠ¥æ–‡äº¤æ¢æ‰€æ‹¥æœ‰çš„æ‰€æœ‰ä¼˜ç‚¹ï¼ŒåŒæ—¶ç®€åŒ–äº†å­˜å‚¨ç®¡ç†ï¼Œå› ä¸ºåˆ†ç»„çš„å¤§å°å›ºå®šï¼Œæ‰€æœ‰ç¼“å†²åŒºå¤§å°ä¹Ÿä¼šå›ºå®šï¼Œæ–¹ä¾¿ç®¡ç†ã€‚åŠ é€Ÿä¼ è¾“ã€å‡å°‘å‡ºé”™æ¦‚ç‡å’Œé‡å‘æ•°æ®é‡ï¼ˆå¦‚æœå‡ºé”™ï¼Œåªéœ€è¦é‡ä¼ å‡ºé”™åˆ†ç»„å³å¯ï¼‰</li>
<li>ç¼ºç‚¹ï¼šå­˜åœ¨è½¬å‘æ—¶å»¶ã€éœ€è¦è¾ƒå¤§å­˜å‚¨ç¼“å­˜ç©ºé—´ã€éœ€è¦ä¼ è¾“é¢å¤–ä¿¡æ¯é‡ï¼ˆæ§åˆ¶ä¿¡æ¯ç­‰ï¼‰ã€‚</li>
</ul></li>
<li>åˆ†ç»„äº¤æ¢ä¸­ï¼š
<ul>
<li>å¯¹äºæ•°æ®æŠ¥æœåŠ¡è€Œè¨€ï¼šå­˜åœ¨å¤±åºã€ä¸¢åºã€æˆ–è€…é‡å¤åˆ†ç»„çš„é—®é¢˜</li>
<li>å¯¹äºè™šç”µè·¯æœåŠ¡è€Œè¨€ï¼šå­˜åœ¨å‘¼å«å»ºç«‹ã€æ•°æ®ä¼ è¾“ã€è™šç”µè·¯é‡Šæ”¾ä¸‰ä¸ªè¿‡ç¨‹</li>
</ul></li>
</ul>
<h4 id="å…«è®¡ç®—æœºç½‘ç»œåˆ†ç±»">å…«ã€è®¡ç®—æœºç½‘ç»œåˆ†ç±»ï¼š</h4>
<ul>
<li>æŒ‰ç…§è¦†ç›–èŒƒå›´åˆ†ç±»ï¼š
<ul>
<li>å¹¿åŸŸç½‘WANï¼ˆè¦†ç›–èŒƒå›´æœ€å¹¿ï¼Œç”¨äºé«˜é€Ÿé•¿é€”ä¼ è¾“ï¼‰</li>
<li>åŸåŸŸç½‘MANï¼ˆé€šå¸¸ä½œä¸ºåŸå¸‚éª¨å¹²ç½‘ï¼‰</li>
<li>å±€åŸŸç½‘LAN</li>
<li>ä¸ªåŸŸç½‘PAN</li>
</ul></li>
<li>æŒ‰æ‹“æ‰‘ç»“æ„åˆ†ç±»ï¼š
<ul>
<li>æ€»çº¿å‹ç½‘ç»œ</li>
<li>æ˜Ÿå‹ç½‘ç»œ</li>
<li>ç¯å‹ç½‘ç»œ</li>
<li>ç½‘çŠ¶å‹ç½‘ç»œ</li>
</ul></li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428150509644.png" style="zoom:50%;" /></p>
<h4 id="ä¹è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡">ä¹ã€è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡ï¼š</h4>
<h5 id="é€Ÿç‡">1ã€é€Ÿç‡</h5>
<p>â€‹
è¿æ¥åœ¨è®¡ç®—æœºç½‘ç»œä¸Šçš„<strong>ä¸»æœºåœ¨æ•°å­—ä¿¡é“ä¸Šä¼ é€æ¯”ç‰¹çš„é€Ÿç‡</strong>ï¼Œä¹Ÿç§°ä¸ºæ¯”ç‰¹ç‡æˆ–æ•°æ®ç‡ã€‚</p>
<h5 id="å¸¦å®½">2ã€å¸¦å®½</h5>
<ul>
<li>åœ¨æ¨¡æ‹Ÿä¿¡å·ç³»ç»Ÿä¸­çš„æ„ä¹‰ï¼š
<ul>
<li>ä¿¡å·æ‰€åŒ…å«çš„å„ç§ä¸åŒé¢‘ç‡æˆåˆ†æ‰€å æ®çš„é¢‘ç‡èŒƒå›´ï¼›</li>
<li>å•ä½ï¼šHz ï¼Œå¸¦å®½3.1Hz( 300Hz ~ 3.4kHz)</li>
</ul></li>
<li>åœ¨è®¡ç®—æœºç½‘ç»œä¸­çš„æ„ä¹‰ï¼š
<ul>
<li>ç”¨æ¥è¡¨ç¤º<strong>ç½‘ç»œçš„é€šä¿¡çº¿è·¯æ‰€èƒ½ä¼ é€æ•°æ®çš„èƒ½åŠ›</strong>ï¼Œå› æ­¤<strong>ç½‘ç»œå¸¦å®½è¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…ä»ç½‘ç»œä¸­çš„æŸä¸€ç‚¹åˆ°å¦ä¸€ç‚¹æ‰€èƒ½é€šè¿‡çš„â€œæœ€é«˜æ•°æ®ç‡â€ï¼›</strong></li>
<li>å•ä½ï¼šb/s</li>
</ul></li>
</ul>
<h5 id="ååé‡">3ã€ååé‡</h5>
<p>â€‹ ååé‡è¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…é€šè¿‡æŸä¸ªç½‘ç»œï¼ˆæˆ–ä¿¡é“ã€æ¥å£ï¼‰çš„æ•°æ®é‡ã€‚</p>
<p>â€‹ ååé‡å—ç½‘ç»œçš„å¸¦å®½æˆ–é¢å®šé€Ÿç‡çš„é™åˆ¶</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428173106779.png" style="zoom: 50%;" /></p>
<h5 id="æ—¶å»¶">4ã€æ—¶å»¶</h5>
<p>â€‹
ç½‘ç»œæ—¶å»¶ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šå‘é€æ—¶å»¶ã€ä¼ æ’­æ—¶å»¶ã€å¤„ç†æ—¶å»¶ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹æ‰€ç¤ºï¼šï¼ˆå¤„ç†æ—¶å»¶ä¸€èˆ¬ä¸åšè®¡ç®—ï¼‰</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428173416712.png" /></p>
<h5 id="æ—¶å»¶å¸¦å®½ç§¯">5ã€æ—¶å»¶å¸¦å®½ç§¯</h5>
<ul>
<li><p>æ—¶å»¶å¸¦å®½ç§¯ = ä¼ æ’­æ—¶å»¶ * å¸¦å®½</p>
<p>è‹¥å‘é€ç«¯è¿ç»­å‘é€æ•°æ®ï¼Œåˆ™åœ¨æ‰€å‘é€çš„ç¬¬ä¸€ä¸ªæ¯”ç‰¹å³å°†åˆ°è¾¾ç»ˆç‚¹æ—¶ï¼Œå‘é€ç«¯å°±å·²ç»å‘é€äº†æ—¶å»¶å¸¦å®½ç§¯ä¸ªæ¯”ç‰¹ï¼›</p></li>
</ul>
<p>â€‹ é“¾è·¯çš„æ—¶å»¶å¸¦å®½ç§¯åˆç§°ä¸ºä»¥æ¯”ç‰¹ä¸ºå•ä½çš„é“¾è·¯é•¿åº¦ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428173800437.png" style="zoom:50%;" /></p>
<h5 id="å¾€è¿”æ—¶é—´-rtt">6ã€å¾€è¿”æ—¶é—´ RTT</h5>
<p>â€‹ ä»æºä¸»æœºåˆ°ç›®æ ‡ä¸»æœºï¼Œç›´åˆ°æºä¸»æœºæ”¶åˆ°ç›®æ ‡ä¸»æœºçš„ç­”å¤æ‰€èŠ±è´¹çš„æ—¶é—´</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428173913426.png" style="zoom: 67%;" /></p>
<h5 id="åˆ©ç”¨ç‡">7ã€åˆ©ç”¨ç‡</h5>
<ul>
<li>ä¿¡é“åˆ©ç”¨ç‡
<ul>
<li>ç”¨æ¥è¡¨ç¤ºæŸä¿¡é“æœ‰ç™¾åˆ†ä¹‹å‡ çš„æ—¶é—´æ˜¯è¢«åˆ©ç”¨çš„ï¼ˆæœ‰æ•°æ®é€šè¿‡ï¼‰ã€‚</li>
</ul></li>
<li>ç½‘ç»œåˆ©ç”¨ç‡
<ul>
<li>å…¨ç½‘ç»œçš„ä¿¡é“åˆ©ç”¨ç‡çš„åŠ æƒå¹³å‡ã€‚</li>
</ul></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220428174105464.png" /></p>
<h5 id="ä¸¢åŒ…ç‡">8ã€ä¸¢åŒ…ç‡</h5>
<p>â€‹
æ˜¯æŒ‡åœ¨ä¸€å®šçš„æ—¶é—´èŒƒå›´å†…ï¼Œ<strong>ä¼ è¾“è¿‡ç¨‹ä¸­ä¸¢å¤±çš„åˆ†ç»„æ•°é‡ä¸æ€»åˆ†ç»„æ•°é‡çš„æ¯”ç‡ã€‚</strong></p>
<p>â€‹ <strong>åˆ†ç»„ä¸¢å¤±ä¸€èˆ¬æœ‰ä¸¤ç§æƒ…å†µ</strong>ï¼š</p>
<ul>
<li>åˆ†ç»„åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°è¯¯ç ï¼Œè¢«èŠ‚ç‚¹ä¸¢å¼ƒ</li>
<li>åˆ†ç»„åˆ°è¾¾ä¸€å°é˜Ÿåˆ—å·²æ»¡çš„åˆ†ç»„äº¤æ¢æœºæ—¶è¢«ä¸¢å¼ƒï¼Œåœ¨é€šä¿¡é‡è¾ƒå¤§æ—¶å°±å¯èƒ½é€ æˆç½‘ç»œæ‹¥å¡ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œä¸¢åŒ…ç‡åæ˜ äº†ç½‘ç»œçš„æ‹¥å¡æƒ…å†µï¼š</p>
<ul>
<li>æ— æ‹¥å¡æ—¶è·¯å¾„ä¸¢åŒ…ç‡ä¸º0</li>
<li>è½»åº¦æ‹¥å¡æ—¶è·¯å¾„ä¸¢åŒ…ç‡ä¸º1%~4%</li>
<li>ä¸¥é‡æ‹¥å¡æ—¶è·¯å¾„ä¸¢åŒ…ç‡ä¸º5%~15%</li>
</ul>
<h4 id="åè®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„">åã€è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ï¼š</h4>
<h5 id="å¸¸è§çš„è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„">1ã€å¸¸è§çš„è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ï¼š</h5>
<p>â€‹ OSIä½“ç³»ç»“æ„ ï¼ˆæ³•å¾‹ä¸Šçš„å›½é™…æ ‡å‡†ï¼‰ã€TCP/IP
ä½“ç³»ç»“æ„ï¼ˆäº‹å®ä¸Šçš„å›½é™…æ ‡å‡†ï¼‰</p>
<ul>
<li>OSIåè®®åˆ¶å®šè¾ƒä¸ºå¤æ‚ï¼Œè¿è¡Œæ•ˆç‡ä½ï¼Œå±‚æ¬¡åˆ’åˆ†å¹¶ä¸åˆç†ï¼Œè¢«TCP/IPä½“ç³»ä»£æ›¿</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429160500448.png" style="zoom:50%;" /></p>
<p>â€‹
å¦‚æœç”¨æˆ·ä¸»æœºéœ€è¦æ¥å…¥å› ç‰¹ç½‘ï¼Œå¿…é¡»å«æœ‰TCP/IPåè®®æ—ã€‚è·¯ç”±å™¨ä¹Ÿéœ€è¦å«æœ‰TCP/IPåè®®æ—ï¼Œä½†æ˜¯å¾€å¾€è·¯ç”±å™¨åªå…·æœ‰
ç½‘é™…å±‚å’Œç½‘ç»œæ¥å£å±‚ã€‚</p>
<p>â€‹
TCP/IPçš„ç½‘ç»œæ¥å£å±‚å¹¶æ²¡æœ‰åšè¿‡å¤šè§„å®šï¼Œå¯ä»¥å…¼å®¹å¤šç§ç½‘ç»œæ¥å£ï¼Œå¦‚æœ‰çº¿ç½‘ç»œã€WIFIæ¥å£ç­‰ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429160803014.png" style="zoom:50%;" /></p>
<p>â€‹
ä½¿ç”¨IPåè®®äº’è”ä¸åŒçš„ç½‘ç»œæ¥å£ï¼Œä¸ºå‘å…¶ä¸Šçš„TCPåè®®å’ŒUDPåè®®æä¾›ç½‘ç»œäº’è”æœåŠ¡ï¼ŒTCPåè®®åœ¨äº«å—IPæä¾›çš„ç½‘ç»œäº’è”æœåŠ¡åŸºç¡€ä¸Šï¼Œå¯å‘åº”ç”¨å±‚éƒ¨åˆ†åè®®æä¾›å¯é ä¼ è¾“çš„æœåŠ¡ï¼Œè€ŒUDPåè®®åœ¨äº«å—IPæä¾›çš„ç½‘ç»œäº’è”æœåŠ¡åŸºç¡€ä¸Šï¼Œå¯å‘åº”ç”¨å±‚éƒ¨åˆ†åè®®æä¾›ä¸å¯é ä¼ è¾“çš„æœåŠ¡ã€‚</p>
<h5 id="è®¡ç½‘ç»“æ„åˆ†å±‚çš„å¿…è¦æ€§">2ã€è®¡ç½‘ç»“æ„åˆ†å±‚çš„å¿…è¦æ€§ï¼š</h5>
<p>åœ¨å®ç°è®¡ç®—æœºç½‘ç»œçš„è¿‡ç¨‹ä¸­å¸¸è§éœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼Œå¹¶å°†ç›¸åº”é—®é¢˜åˆ’åˆ†ç»™ç›¸åº”çš„å±‚å»è¿›è¡Œå¤„ç†ï¼š</p>
<p><strong>æƒ…å†µ1ï¼š</strong></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429161416991.png" alt="ä¸¤å°ç›´è¿è®¡ç®—æœºé—´çš„ä¼ è¾“" style="zoom:50%;" /></p>
<ul>
<li><p>ç‰©ç†å±‚é—®é¢˜</p>
<ul>
<li><p>é‡‡ç”¨ä½•ç§ä¼ è¾“åª’ä½“</p></li>
<li><p>é‡‡ç”¨æ€æ ·çš„ç‰©ç†æ¥å£</p></li>
<li><p>ä½¿ç”¨æ€æ ·çš„ä¿¡å·è¡¨ç¤ºæ¯”ç‰¹0å’Œæ¯”ç‰¹1</p></li>
</ul></li>
</ul>
<p><strong>æƒ…å†µ2ï¼šåœ¨ä¸Šè¿°é—®é¢˜è§£å†³å‰æä¸‹ï¼Œè€ƒè™‘å¦‚ä¸‹æ€»çº¿å‹ç½‘ç»œï¼šï¼ˆç°åœ¨å·²ç»ä¸å¸¸ç”¨äº†ï¼‰</strong></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429161454976.png" alt="æ€»çº¿å‹ç½‘ç»œ" style="zoom:50%;" /></p>
<ul>
<li><p>æ•°æ®é“¾è·¯å±‚é—®é¢˜ï¼š</p>
<ul>
<li><p>å¦‚ä½•æ ‡è¯†ç½‘ç»œä¸­å„ä¸»æœºï¼ˆä¸»æœºç¼–å€é—®é¢˜ï¼Œä¾‹å¦‚MACåœ°å€ï¼‰</p></li>
<li><p>å¦‚ä½•ä»ä¿¡å·æ‰€æ ‡è¯†çš„ä¸€è¿ä¸²æ¯”ç‰¹æµä¸­åŒºåˆ†å‡º<strong>åœ°å€å’Œæ•°æ®</strong></p></li>
<li><p>å¦‚ä½•åè°ƒå„ä¸ªä¸»æœºäº‰ç”¨æ€»çº¿</p></li>
<li><p>ä½¿ç”¨ä»¥å¤ªç½‘äº¤æ¢æœºå°†å¤šå°ä¸»æœºäº’è”å½¢æˆçš„äº¤æ¢å¼ä»¥å¤ªç½‘ä¸­ï¼šä»¥å¤ªç½‘äº¤æ¢æœºæ˜¯å¦‚ä½•å®ç°çš„</p></li>
</ul></li>
</ul>
<p><strong>æƒ…å†µ3ï¼šè§£å†³ä»¥ä¸Šé—®é¢˜åï¼Œåˆ†ç»„å°±å¯ä»¥åœ¨ä¸€ç»„ç½‘ç»œä¸­ä¼ è¾“äº†ï¼Œç„¶è€Œæˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„å› ç‰¹ç½‘æ›´ä¸ºå¤æ‚ï¼Œå…¶æ˜¯ç”±è®¸å¤šè·¯ç”±å™¨å°†å¤šä¸ªç½‘ç»œè¿›è¡Œäº’è¿èµ·æ¥çš„äº’è”ç½‘ï¼Œè€ƒè™‘å¦‚ä¸‹ç”±3ä¸ªè·¯ç”±å™¨å’Œ4ä¸ªç½‘ç»œæ„æˆçš„å°å‹äº’è”ç½‘</strong></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429162242434.png" alt="=" style="zoom:50%;" /></p>
<ul>
<li><p>ç½‘ç»œå±‚:</p>
<ul>
<li><p>å¦‚ä½•æ ‡è¯†å„ä¸ªç½‘ç»œä»¥åŠç½‘ç»œä¸­çš„å„ä¸»æœºï¼ˆç½‘ç»œå’Œä¸»æœºå…±åŒç¼–å€çš„é—®é¢˜ï¼Œå¦‚IPåœ°å€ï¼‰</p></li>
<li><p>åˆ†ç»„ä»æºä¸»æœºåˆ°ç›®çš„ä¸»æœºå¯èµ°è·¯å¾„ä¸æ­¢ä¸€æ¡ï¼Œè·¯ç”±å™¨åº”å½“å¦‚ä½•è½¬å‘åˆ†ç»„ï¼Œå¦‚ä½•è¿›è¡Œè·¯ç”±é€‰æ‹©</p></li>
</ul></li>
</ul>
<p><strong>æƒ…å†µ4ï¼šè§£å†³ä»¥ä¸Šé—®é¢˜åï¼Œå¯ä»¥å®ç°åˆ†ç»„åœ¨ç½‘ç»œä¸¤ä¸»æœºé—´ä¼ è¾“çš„é—®é¢˜ï¼Œå¯¹äºè®¡ç®—æœºç½‘ç»œåº”ç”¨è€Œè¨€è¿œè¿œä¸å¤Ÿï¼Œå¯¹äºä¸€å°ä¸»æœºè€Œè¨€ï¼Œå¯èƒ½å­˜åœ¨å¤šä¸ªè¿›ç¨‹</strong></p>
<ul>
<li><p>è¿è¾“å±‚</p>
<ul>
<li><p><strong>å¦‚ä½•æ ‡è¯†ä¸ç½‘ç»œé€šä¿¡ç›¸å…³çš„åº”ç”¨è¿›ç¨‹</strong>ï¼Œå³è§£å†³è¿›ç¨‹ä¹‹é—´åŸºäºç½‘ç»œçš„é€šä¿¡é—®é¢˜</p></li>
<li><p>å‡ºç°ä¼ è¾“é”™è¯¯æ—¶ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿï¼ˆæŸä¸ªåˆ†ç»„åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°è¯¯ç ï¼Œæˆ–ç”±äºè·¯ç”±å™¨ç¹å¿™ä¸¢å¼ƒåˆ†ç»„ï¼‰</p></li>
</ul></li>
</ul>
<p><strong>æƒ…å†µ5ï¼šè§£å†³ä¸Šè¿°é—®é¢˜åï¼Œå¯ä»¥å®ç°è¿›ç¨‹ä¹‹é—´ï¼ŒåŸºäºç½‘ç»œçš„é€šä¿¡ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œåˆ¶å®šåº”ç”¨å±‚åè®®ï¼Œæ ¹æ®åè®®å†…å®¹å®Œæˆç‰¹å®šç½‘ç»œåº”ç”¨å³å¯</strong></p>
<ul>
<li>åº”ç”¨å±‚
<ul>
<li>æ”¯æŒä¸‡ç»´ç½‘åº”ç”¨çš„HTTP</li>
<li>æ”¯æŒé‚®ä»¶æœåŠ¡çš„SMTP</li>
<li>â€¦â€¦</li>
</ul></li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429162801442.png" style="zoom:50%;" /></p>
<h5 id="åˆ†å±‚æ€æƒ³ä¸¾ä¾‹">3ã€åˆ†å±‚æ€æƒ³ä¸¾ä¾‹ï¼š</h5>
<video src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/2022_04_29_19_04_47_435.mp4">
</video>
<h5 id="ä¸“ç”¨æœ¯è¯­">4ã€ä¸“ç”¨æœ¯è¯­ï¼š</h5>
<ul>
<li>å®ä½“ï¼šä»»ä½•å¯å‘é€æˆ–æ¥æ”¶ä¿¡æ¯çš„ç¡¬ä»¶æˆ–è½¯ä»¶è¿›ç¨‹ã€‚</li>
<li>å¯¹ç­‰å®ä½“ï¼šæ”¶å‘åŒå‘ç›¸åŒå±‚æ¬¡ä¸­çš„å®ä½“
<ul>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429202752020.png" style="zoom:50%;" /></li>
</ul></li>
<li>åè®®ï¼šæ§åˆ¶ä¸¤ä¸ªå¯¹ç­‰å®ä½“<strong>è¿›è¡Œé€»è¾‘é€šä¿¡</strong>çš„è§„åˆ™çš„é›†åˆã€‚
<ul>
<li>åè®®çš„ä¸‰è¦ç´ ï¼š
<ul>
<li>è¯­æ³•ï¼šå®šä¹‰æ‰€äº¤æ¢ä¿¡æ¯çš„æ ¼å¼</li>
<li>è¯­ä¹‰ï¼šå®šä¹‰æ”¶å‘åŒæ–¹æ‰€è¦å®Œæˆçš„æ“ä½œ</li>
<li>åŒæ­¥ï¼šå®šä¹‰æ”¶å‘åŒæ–¹çš„æ—¶åºå…³ç³»ï¼ˆ ä¾‹å¦‚ TCPå®¢æˆ·ç«¯ä¸
TCPæœåŠ¡å™¨ä¹‹é—´çš„æ—¶åºå…³ç³»ï¼ŒçŠ¶æ€è½¬æ¢ï¼‰</li>
</ul></li>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429202822644.png" style="zoom:50%;" /></li>
</ul></li>
<li>æœåŠ¡ï¼šåœ¨åè®®çš„æ§åˆ¶ä¸‹ï¼Œä¸¤ä¸ªå¯¹ç­‰å®ä½“é—´çš„é€»è¾‘é€šä¿¡ä½¿å¾—æœ¬å±‚èƒ½å¤Ÿå‘ä¸Šä¸€å±‚æä¾›æœåŠ¡ã€‚
<ul>
<li>è¦å®ç°æœ¬å±‚åè®®ï¼Œè¿˜éœ€è¦ä½¿ç”¨ä¸‹é¢ä¸€å±‚æ‰€æä¾›çš„æœåŠ¡ã€‚</li>
<li>åè®®æ˜¯â€œæ°´å¹³çš„"ï¼ŒæœåŠ¡æ˜¯â€œå‚ç›´çš„"ã€‚</li>
<li>å®ä½“çœ‹å¾—è§ç›¸é‚»ä¸‹å±‚æ‰€æä¾›çš„æœåŠ¡ï¼Œä½†å¹¶ä¸çŸ¥é“å®ç°è¯¥æœåŠ¡çš„å…·ä½“åè®®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸‹é¢çš„åè®®å¯¹ä¸Šé¢çš„å®ä½“æ˜¯â€œé€æ˜â€çš„ã€‚</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429203246032.png" /></li>
</ul></li>
<li>æœåŠ¡è®¿é—®ç‚¹ï¼šåœ¨åŒä¸€ç³»ç»Ÿä¸­ç›¸é‚»ä¸¤å±‚çš„å®ä½“äº¤æ¢ä¿¡æ¯çš„é€»è¾‘æ¥å£ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„æœåŠ¡ç±»å‹ã€‚</li>
<li>æœåŠ¡åŸè¯­ï¼šä¸Šå±‚ä½¿ç”¨ä¸‹å±‚æ‰€æä¾›çš„æœåŠ¡å¿…é¡»é€šè¿‡ä¸ä¸‹å±‚äº¤æ¢ä¸€äº›å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤ç§°ä¸ºæœåŠ¡åŸè¯­ã€‚</li>
<li>åè®®æ•°æ®å•å…ƒPDUï¼šå¯¹ç­‰å±‚æ¬¡ä¹‹é—´ä¼ é€çš„æ•°æ®åŒ…ç§°ä¸ºè¯¥å±‚çš„<strong>åè®®æ•°æ®å•å…ƒ</strong>ã€‚
<ul>
<li>æ¯”ç‰¹æµã€å¸§ã€IPæ•°æ®æŠ¥ã€TCPæŠ¥æ–‡æ®µã€UDPç”¨æˆ·æ•°æ®æŠ¥ã€æŠ¥æ–‡</li>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220429203352501.png" style="zoom:67%;" /></li>
</ul></li>
<li>æœåŠ¡æ•°æ®å•å…ƒSDUï¼šåŒä¸€ç³»ç»Ÿå†…ï¼Œå±‚ä¸å±‚ä¹‹é—´äº¤æ¢çš„æ•°æ®åŒ…ç§°ä¸ºæœåŠ¡æ•°æ®å•å…ƒã€‚</li>
</ul>
<h4 id="åä¸€ä¹ é¢˜">åä¸€ã€ä¹ é¢˜ï¼š</h4>
<h5 id="section">1ã€</h5>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220430113545991.png" /></p>
<h5 id="section-1">2ã€</h5>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220430113940223.png" /></p>
<h5 id="section-2">3ã€</h5>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220430114621627.png" /></p>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>Computer Network</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç½‘å¾®è¯¾å ‚Chap2â€”â€”ç‰©ç†å±‚åŸç†</title>
    <url>/2022/05/01/81ac33552c19/</url>
    <content><![CDATA[<p>è§†é¢‘åœ°å€ï¼šhttps://www.bilibili.com/video/BV1c4411d7jb?p=14</p>
<h4 id="ä¸€ç‰©ç†å±‚çš„åŸºæœ¬æ¦‚å¿µ">ä¸€ã€ç‰©ç†å±‚çš„åŸºæœ¬æ¦‚å¿µï¼š</h4>
<p>â€‹
è§£å†³åœ¨å„ç§ä¼ è¾“åª’ä½“ä¸Šä¼ è¾“æ¯”ç‰¹0å’Œ1æµçš„é—®é¢˜ï¼Œä»è€Œç»™æ•°æ®é“¾è·¯å±‚æä¾›é€æ˜çš„ä¼ è¾“æ¯”ç‰¹æµçš„æœåŠ¡ã€‚</p>
<p>â€‹ <strong>ç‰©ç†å±‚ä¸ºæ•°æ®é“¾è·¯å±‚å±è”½äº†å„ç§ä¼ è¾“åª’ä½“çš„å·®å¼‚ã€‚</strong></p>
<p>ç‰©ç†å±‚åè®®çš„ä¸»è¦ä»»åŠ¡ï¼š</p>
<ul>
<li>æœºæ¢°ç‰¹æ€§ï¼šæŒ‡æ˜æ¥å£æ‰€ç”¨æ¥çº¿å™¨çš„å½¢çŠ¶å’Œå°ºå¯¸ã€å¼•è„šæ•°ç›®å’Œæ’åˆ—ã€å›ºå®šå’Œé”å®šè£…ç½®ã€‚</li>
<li>ç”µæ°”ç‰¹æ€§ï¼šæŒ‡æ˜åœ¨æ¥å£ç”µç¼†çš„å„æ¡çº¿ä¸Šå‡ºç°çš„ç”µå‹çš„èŒƒå›´ã€‚</li>
<li>åŠŸèƒ½ç‰¹æ€§ï¼šæŒ‡æ˜æŸæ¡çº¿ä¸Šå‡ºç°çš„æŸä¸€å›½å¹³çš„ç”µå‹è¡¨ç¤ºä½•ç§æ„ä¹‰ã€‚</li>
<li>è¿‡ç¨‹ç‰¹æ€§ï¼šæŒ‡æ˜å¯¹äºä¸åŒåŠŸèƒ½çš„å„ç§å¯èƒ½äº‹ä»¶çš„å‡ºç°é¡ºåºã€‚</li>
</ul>
<p>ç”±äºç‰©ç†å±‚ä¼ è¾“åª’ä½“ä¼—å¤šï¼Œç‰©ç†å±‚åè®®ä¼—å¤šï¼Œä¸»è¦éœ€è¦æŠŠæ¡ä»¥ä¸Šå››ä¸ªä»»åŠ¡ã€‚</p>
<h4 id="äºŒç‰©ç†å±‚ä¸‹é¢çš„ä¼ è¾“åª’ä½“">äºŒã€ç‰©ç†å±‚ä¸‹é¢çš„ä¼ è¾“åª’ä½“ï¼š</h4>
<h5 id="å¯¼å¼•å‹ä¼ è¾“åª’ä½“å›ºä½“çº¿ç¼†">1ã€å¯¼å¼•å‹ä¼ è¾“åª’ä½“ï¼ˆå›ºä½“çº¿ç¼†ï¼‰</h5>
<ul>
<li>åŒè½´ç”µç¼†ï¼š</li>
</ul>
<p><img src="C:\Users\14012\AppData\Roaming\Typora\typora-user-images\image-20220501094821175.png" style="zoom:50%;" /></p>
<ul>
<li>åŒç»çº¿ï¼š
<ul>
<li>å¸¸ç”¨äºå±€åŸŸç½‘ä¼ è¾“</li>
</ul></li>
</ul>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501094949365.png" /></p>
<ul>
<li><p>å…‰çº¤ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501095410880.png" /></p>
<ul>
<li>é€šä¿¡å®¹é‡å¤§ï¼ˆ25000~30000GHzçš„å¸¦å®½ï¼‰</li>
<li>ä¼ è¾“æŸè€—å°ï¼Œè¿œè·ç¦»ä¼ è¾“æ—¶æ›´åŠ ç»æµã€‚</li>
<li>æŠ—é›·ç”µå’Œç”µç£å¹²æ‰°æ€§èƒ½å¥½ã€‚è¿™åœ¨å¤§ç”µæµè„‰å†²å¹²æ‰°çš„ç¯å¢ƒä¸‹å°¤ä¸ºé‡è¦ã€‚</li>
<li>æ— ä¸²éŸ³å¹²æ‰°ï¼Œä¿å¯†æ€§å¥½ï¼Œä¸æ˜“è¢«çªƒå¬ã€‚</li>
<li>ä½“ç§¯å°ï¼Œé‡é‡è½»ã€‚</li>
<li>å‰²æ¥éœ€è¦ä¸“ç”¨è®¾å¤‡</li>
<li>æ¥å£ä»·æ ¼è¾ƒè´µ</li>
</ul></li>
<li><p>ç”µåŠ›çº¿</p></li>
</ul>
<h5
id="éå¯¼å¼•å‹ä¼ è¾“åª’ä½“è‡ªç”±ç©ºé—´ç”µç£æ³¢">2ã€éå¯¼å¼•å‹ä¼ è¾“åª’ä½“ï¼ˆè‡ªç”±ç©ºé—´ï¼Œç”µç£æ³¢ï¼‰</h5>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501095538393.png" style="zoom: 67%;" /></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501095701647.png" style="zoom:67%;" /></p>
<ul>
<li>æ— çº¿ç”µæ³¢ï¼š</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501095636403.png" /></p>
<ul>
<li><p>å¾®æ³¢ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501095750323.png" /></p></li>
<li><p>çº¢å¤–çº¿ï¼š</p>
<ul>
<li>ç”µè§†ã€ç©ºè°ƒç­‰é¥æ§å™¨</li>
<li>ç‚¹å¯¹ç‚¹æ— çº¿ä¼ è¾“ï¼Œ</li>
<li>ç›´çº¿ä¼ è¾“ï¼Œä¸­é—´ä¸èƒ½æœ‰éšœç¢ç‰©ï¼Œ</li>
<li>ä¼ è¾“è·ç¦»çŸ­ä¼ è¾“é€Ÿç‡ä½ï¼ˆ4Mb/s~16Mb/sï¼‰</li>
</ul></li>
</ul>
<h4 id="ä¸‰ä¼ è¾“æ–¹å¼">ä¸‰ã€ä¼ è¾“æ–¹å¼ï¼š</h4>
<h5 id="ä¸²è¡Œä¼ è¾“å’Œå¹¶è¡Œä¼ è¾“">1ã€ä¸²è¡Œä¼ è¾“å’Œå¹¶è¡Œä¼ è¾“ï¼š</h5>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501100428195.png" style="zoom:67%;" /></p>
<h5 id="åŒæ­¥ä¼ è¾“ä¸å¼‚æ­¥ä¼ è¾“">2ã€åŒæ­¥ä¼ è¾“ä¸å¼‚æ­¥ä¼ è¾“ï¼š</h5>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501100542991.png" /></p>
<ul>
<li><p>åŒæ­¥ä¼ è¾“æ¯”ç‰¹æµé€ä¸€å‘é€ï¼Œæ¥æ”¶æ–¹åœ¨æ¯”ç‰¹ä¿¡å·çš„ä¸­é—´æ—¶åˆ»è¿›è¡Œæ£€æµ‹ï¼Œç”±äºä¸åŒè®¾å¤‡çš„æ—¶é’Ÿé¢‘ç‡ä¸ä¸€æ ·ï¼Œå®¹æ˜“äº§ç”Ÿæ—¶é’Ÿè¯¯å·®ç´¯ç§¯ï¼Œå¯¼è‡´æ¯”ç‰¹ä¿¡å·çš„è¯¯æ£€æµ‹ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•å®ç°æ”¶å‘åŒæ–¹æ—¶é’ŸåŒæ­¥ï¼š</p>
<ul>
<li><p>å¤–åŒæ­¥ï¼šåœ¨æ”¶å‘åŒæ–¹ä¹‹é—´æ·»åŠ ä¸€æ¡å•ç‹¬çš„æ—¶é’Ÿä¿¡å·çº¿</p></li>
<li><p>å†…åŒæ­¥ï¼šå‘é€ç«¯å°†æ—¶é’ŸåŒæ­¥ä¿¡å·ç¼–ç åˆ°å‘é€æ•°æ®ä¸­ä¸€èµ·ä¼ è¾“ï¼ˆä¾‹å¦‚ä¼ ç»Ÿä»¥å¤ªç½‘é‡‡ç”¨çš„æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼‰</p></li>
</ul></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501100823960.png" /></p>
<ul>
<li>å¼‚æ­¥ä¼ è¾“ä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œæ¥æ”¶ç«¯ä»…åœ¨æ¯ä¸ªå­—èŠ‚çš„èµ·å§‹å¤„å¯¹å­—èŠ‚å†…çš„æ¯”ç‰¹å®ç°åŒæ­¥ï¼Œæ•…è€Œéœ€è¦åœ¨å­—èŠ‚å‰ååŠ ä¸Šèµ·å§‹ä½å’Œç»“æŸä½ã€‚</li>
</ul>
<h5 id="å•å·¥åŠåŒå·¥å…¨åŒå·¥">3ã€å•å·¥ã€åŠåŒå·¥ã€å…¨åŒå·¥ï¼š</h5>
<ul>
<li>å•å·¥ç¤ºä¾‹ï¼šå¹¿æ’­</li>
<li>åŠåŒå·¥ç¤ºä¾‹ï¼šå¯¹è®²æœº</li>
<li>å…¨åŒå·¥ç¤ºä¾‹ï¼šç”µè¯</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501101002739.png" /></p>
<h4 id="å››ç¼–ç ä¸è°ƒåˆ¶">å››ã€ç¼–ç ä¸è°ƒåˆ¶ï¼š</h4>
<p>â€‹
<strong>è®¡ç®—æœºä¸­äºŒè¿›åˆ¶æ•°æ®æ˜¯è¿é€æ¶ˆæ¯çš„å®ä½“ï¼Œè®¡ç®—æœºçš„ç½‘å¡ä¼šå°†äºŒè¿›åˆ¶çš„æ•°æ®è°ƒåˆ¶æˆç”µä¿¡å·ï¼Œ</strong>é€šè¿‡ç½‘çº¿å‘é€å‡ºå»ã€‚ä¿¡æºå‘é€çš„åŸå§‹ç”µä¿¡å·æˆä¸ºåŸºå¸¦ä¿¡å·ï¼Œå…¶åˆåˆ†ä¸ºæ•°å­—åŸºå¸¦ä¿¡å·ä¸æ¨¡æ‹ŸåŸºå¸¦ä¿¡å·ã€‚</p>
<p>â€‹ ä¿¡å·éœ€è¦åœ¨ä¿¡é“ä¸­è¿›è¡Œä¼ è¾“ï¼Œä¿¡é“åˆåˆ†æ•°å­—ä¿¡é“å’Œæ¨¡æ‹Ÿä¿¡é“ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501134907767.png" /></p>
<ul>
<li><p>ç å…ƒï¼šä»£è¡¨ä¸åŒç¦»æ•£æ•°å€¼çš„åŸºæœ¬æ³¢å½¢ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501135008970.png" style="zoom:50%;" /></p></li>
<li><p>è®¡ç®—æœºç½‘ç»œä¸­ï¼Œå¸¸ç”¨çš„æ˜¯å°†æ•°å­—ä¿¡å·ç¼–ç æˆ–è°ƒåˆ¶ååœ¨ä¿¡é“ä¸­è¿›è¡Œä¼ è¾“</p></li>
</ul>
<h4 id="äº”å¸¸ç”¨ç¼–ç ">äº”ã€å¸¸ç”¨ç¼–ç ï¼š</h4>
<ul>
<li>å½’é›¶ç¼–ç ï¼šè‡ªåŒæ­¥ï¼Œä½†ç¼–ç æ•ˆç‡ä½ã€‚</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501135231432.png" /></p>
<ul>
<li><p>æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501135335053.png" /></p></li>
<li><p>æ›¼å½»æ–¯ç‰¹å·®åˆ†ç¼–ç ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501135411267.png" /></p></li>
</ul>
<h4 id="å…­å¸¸ç”¨è°ƒåˆ¶æ–¹æ³•">å…­ã€å¸¸ç”¨è°ƒåˆ¶æ–¹æ³•ï¼š</h4>
<ul>
<li>åŸºæœ¬è°ƒåˆ¶æ–¹æ³•ï¼Œ1ä¸ªç å…ƒåªèƒ½åŒ…å«1ä¸ªæ¯”ç‰¹ä¿¡æ¯</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501135556799.png" style="zoom:50%;" /></p>
<ul>
<li><p>æ··åˆè°ƒåˆ¶ï¼š</p>
<p>æ­£äº¤æŒ¯å¹…è°ƒåˆ¶QAM:</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501135724678.png" style="zoom:50%;" /></p></li>
<li><p>12ç§ç›¸ä½</p></li>
<li><p>æ¯ç§ç›¸ä½æœ‰1æˆ–2ç§æŒ¯å¹…å¯é€‰,æ•…å¯ä»¥è°ƒåˆ¶å‡º16ç§ç å…ƒï¼ˆæ³¢å½¢ï¼‰</p></li>
<li><p>æ¯ç§ç å…ƒå¯ä»¥å¯¹åº”è¡¨ç¤º4ä¸ªæ¯”ç‰¹</p></li>
<li><p>ç å…ƒä¸4ä¸ªæ¯”ç‰¹çš„å¯¹åº”å…³ç³»é‡‡ç”¨æ ¼é›·ç ï¼Œå³ä»»æ„ä¸¤ä¸ªç å…ƒåªæœ‰ä¸€ä¸ªæ¯”ç‰¹ä¸åŒ</p></li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501155644426.png" style="zoom:50%;" /></p>
<h4 id="ä¸ƒä¿¡é“çš„æé™å®¹é‡">ä¸ƒã€ä¿¡é“çš„æé™å®¹é‡ï¼š</h4>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501155815683.png" style="zoom: 50%;" /></p>
<h5 id="å¥ˆæ°å‡†åˆ™"><strong>1ã€å¥ˆæ°å‡†åˆ™ï¼š</strong></h5>
<h5
id="åœ¨å‡å®šçš„ç†æƒ³æ¡ä»¶ä¸‹ä¸ºäº†é¿å…ç é—´ä¸²æ‰°ç å…ƒçš„ä¼ è¾“é€Ÿç‡æ˜¯æœ‰ä¸Šé™çš„"><strong>åœ¨å‡å®šçš„ç†æƒ³æ¡ä»¶ä¸‹ï¼Œä¸ºäº†é¿å…ç é—´ä¸²æ‰°ï¼Œç å…ƒçš„ä¼ è¾“é€Ÿç‡æ˜¯æœ‰ä¸Šé™çš„ã€‚</strong></h5>
<ul>
<li><p>ç†æƒ³ä½é€šä¿¡é“çš„æœ€é«˜ç å…ƒä¼ è¾“é€Ÿç‡=2W Baud=2Wç å…ƒ/ç§’</p></li>
<li><p>ç†æƒ³å¸¦é€šä¿¡é“çš„æœ€é«˜ç å…ƒä¼ è¾“é€Ÿç‡=W Baud =Wç å…ƒ/ç§’</p></li>
<li><p>Wï¼šä¿¡é“å¸¦å®½ï¼ˆå•ä½ä¸ºHzï¼‰</p></li>
<li><p>Baudï¼šæ³¢ç‰¹ï¼Œå³ç å…ƒ/ç§’</p></li>
</ul>
<p><strong>ç å…ƒä¼ è¾“é€Ÿç‡åˆç§°ä¸ºæ³¢ç‰¹ç‡</strong>ï¼š</p>
<ul>
<li>å½“1ä¸ªç å…ƒåªæºå¸¦ä¸€æ¯”ç‰¹çš„ä¿¡æ¯é‡æ—¶ï¼Œæ³¢ç‰¹ç‡ = æ¯”ç‰¹ç‡</li>
<li>å½“1ä¸ªç å…ƒæºå¸¦ N æ¯”ç‰¹çš„ä¿¡æ¯é‡æ—¶ï¼Œæ³¢ç‰¹ç‡ = æ¯”ç‰¹ç‡ / N</li>
</ul>
<p><strong>è¦æé«˜ä¿¡æ¯ä¼ è¾“é€Ÿç‡ï¼ˆæ¯”ç‰¹ç‡ï¼‰ï¼Œå°±å¿…é¡»è®¾æ³•ä½¿æ¯ä¸€ä¸ªç å…ƒèƒ½æºå¸¦æ›´å¤šä¸ªæ¯”ç‰¹çš„ä¿¡æ¯é‡ã€‚</strong></p>
<p><strong>å®é™…çš„ä¿¡é“æ‰€èƒ½ä¼ è¾“çš„æœ€é«˜ç å…ƒé€Ÿç‡ï¼Œè¦æ˜æ˜¾ä½äºå¥ˆæ°å‡†åˆ™ç»™å‡ºçš„è¿™ä¸ªä¸Šé™æ•°å€¼ã€‚</strong></p>
<h5 id="é¦™å†œå…¬å¼">2ã€é¦™å†œå…¬å¼ï¼š</h5>
<p>â€‹
æŒ‰ç…§ä¸Šè¿°å…¬å¼æ‰€è¯´ï¼Œéš¾é“åªè¦é‡‡ç”¨æ›´å¥½çš„è°ƒåˆ¶æ–¹æ³•ï¼Œä½¿å¾—ç å…ƒå¯ä»¥æºå¸¦æ›´å¤šçš„æ¯”ç‰¹ï¼Œå°±èƒ½æ— é™åˆ¶åœ°æé«˜ä¿¡æ¯çš„ä¼ è¾“é€Ÿç‡ï¼Ÿ</p>
<p>â€‹
ç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚å› ä¸º<strong>ä¿¡é“çš„æé™ä¿¡æ¯ä¼ è¾“é€Ÿç‡è¿˜è¦å—é™äºå®é™…çš„ä¿¡å·åœ¨ä¿¡é“ä¸­ä¼ è¾“æ—¶çš„ä¿¡å™ªæ¯”ã€‚</strong></p>
<p><strong>é¦™å†œå…¬å¼</strong>ï¼š</p>
<p>â€‹
å¸¦å®½å—é™ä¸”æœ‰é«˜æ–¯ç™½å™ªå£°å¹²æ‰°çš„ä¿¡é“çš„<strong>æé™ä¿¡æ¯ä¼ è¾“é€Ÿç‡å¦‚ä¸‹</strong>ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220501160421428.png" style="zoom: 67%;" /></p>
<p><strong>ä¿¡é“å¸¦å®½æˆ–ä¿¡é“ä¸­ä¿¡å™ªæ¯”è¶Šå¤§ï¼Œä¿¡æ¯çš„æé™ä¼ è¾“é€Ÿç‡è¶Šé«˜ã€‚</strong></p>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>Computer Network</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç½‘å¾®è¯¾å ‚Chap5â€”â€”è¿è¾“å±‚åŸç†</title>
    <url>/2022/07/15/b846bd0fbb3c/</url>
    <content><![CDATA[<p>è§†é¢‘åœ°å€ï¼šhttps://www.bilibili.com/video/BV1c4411d7jb?p=58</p>
<h4 id="ä¸€è¿è¾“å±‚çš„åŸºæœ¬æ¦‚å¿µ">ä¸€ã€è¿è¾“å±‚çš„åŸºæœ¬æ¦‚å¿µï¼š</h4>
<p>â€‹ å…ˆå‰çš„æ‰€æœ‰å±‚å…±åŒè§£å†³äº†<strong>ä¸»æœºåˆ°ä¸»æœºçš„é€šä¿¡</strong></p>
<p>â€‹
å®é™…ä¸Šè®¡ç®—æœºç½‘ç»œä¸­è¿›è¡Œ<strong>é€šä¿¡çš„çœŸæ­£å®ä½“æ˜¯ä½äºé€šä¿¡ä¸¤ç«¯ä¸»æœºä¸­çš„è¿›ç¨‹</strong></p>
<p>â€‹
<strong>å¦‚ä½•ä¸ºè¿è¡Œåœ¨ä¸åŒä¸»æœºä¸Šçš„åº”ç”¨è¿›ç¨‹æä¾›ç›´æ¥çš„é€šä¿¡æœåŠ¡æ˜¯è¿è¾“å±‚çš„ä»»åŠ¡ï¼Œè¿è¾“å±‚åè®®åˆç§°ä¸ºç«¯åˆ°ç«¯åè®®ã€‚</strong></p>
<p>â€‹
è¿è¾“å±‚å‘é«˜å±‚ç”¨æˆ·å±è”½äº†ä¸‹é¢ç½‘ç»œæ ¸å¿ƒçš„ç»†èŠ‚ï¼ˆå¦‚ç½‘ç»œæ‹“æ‰‘ã€æ‰€é‡‡ç”¨çš„è·¯ç”±é€‰æ‹©åè®®ç­‰ï¼‰ï¼Œå®ƒä½¿åº”ç”¨è¿›ç¨‹çœ‹è§çš„å°±å¥½åƒæ˜¯åœ¨ä¸¤ä¸ªè¿è¾“å±‚å®ä½“ä¹‹é—´æœ‰ä¸€æ¡ç«¯åˆ°ç«¯çš„é€»è¾‘é€šä¿¡ä¿¡é“ã€‚</p>
<p>â€‹
æ ¹æ®åº”ç”¨éœ€æ±‚çš„ä¸åŒï¼Œå› ç‰¹ç½‘çš„è¿è¾“å±‚ä¸ºåº”ç”¨å±‚æä¾›äº†ä¸¤ç§ä¸åŒçš„è¿è¾“åè®®ï¼Œå³é¢å‘è¿æ¥çš„TCPå’Œæ— è¿æ¥çš„UDPï¼Œè¿™ä¸¤ç§åè®®å°±æ˜¯æœ¬ç« è¦è®¨è®ºçš„ä¸»è¦å†…å®¹ã€‚</p>
<h4
id="äºŒè¿è¾“å±‚ç«¯å£å·å¤ç”¨ä¸åˆ†ç”¨çš„æ¦‚å¿µ">äºŒã€è¿è¾“å±‚ç«¯å£å·ã€å¤ç”¨ä¸åˆ†ç”¨çš„æ¦‚å¿µ</h4>
<ul>
<li>â€‹ ç«¯å£å·ï¼š</li>
</ul>
<p>â€‹ è¿è¡Œåœ¨è®¡ç®—æœºä¸Šçš„è¿›ç¨‹ä½¿ç”¨è¿›ç¨‹æ ‡è¯†ç¬¦PIDæ¥æ ‡å¿—ã€‚</p>
<p>â€‹
å› ç‰¹ç½‘ä¸Šçš„è®¡ç®—æœº<strong>å¹¶ä¸æ˜¯ä½¿ç”¨ç»Ÿä¸€çš„æ“ä½œç³»ç»Ÿ</strong>ï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿï¼ˆwindowsï¼ŒLinuxï¼ŒMac
OSï¼‰åˆä½¿ç”¨ä¸åŒæ ¼å¼çš„è¿›ç¨‹æ ‡è¯†ç¬¦ã€‚</p>
<p>â€‹
ä¸ºäº†ä½¿è¿è¡Œä¸åŒæ“ä½œç³»ç»Ÿçš„è®¡ç®—æœºçš„åº”ç”¨è¿›ç¨‹ä¹‹é—´èƒ½å¤Ÿè¿›è¡Œç½‘ç»œé€šä¿¡ï¼Œå°±å¿…é¡»ä½¿ç”¨ç»Ÿä¸€çš„æ–¹æ³•å¯¹TCP/IPä½“ç³»çš„åº”ç”¨è¿›ç¨‹è¿›è¡Œæ ‡è¯†ã€‚<strong>TCP/IPä½“ç³»çš„è¿è¾“å±‚ä½¿ç”¨ç«¯å£å·æ¥åŒºåˆ†åº”ç”¨å±‚çš„ä¸åŒåº”ç”¨è¿›ç¨‹ã€‚</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715215440625.png" /></p>
<ul>
<li>å‘é€æ–¹çš„å¤ç”¨å’Œæ¥æ”¶æ–¹çš„åˆ†ç”¨</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715215959063.png" /></p>
<ul>
<li>å¸¸ç”¨çš„åº”ç”¨å±‚åè®®ä½¿ç”¨çš„è¿è¾“å±‚ç«¯å£å·</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715220025060.png" /></p>
<h4 id="ä¸‰udpå’Œtcpçš„åŒºåˆ«">ä¸‰ã€UDPå’ŒTCPçš„åŒºåˆ«ï¼š</h4>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>UDP</th>
<th>TCP</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>æ— è¿æ¥ï¼Œéšæ—¶ä¼ è¾“æ•°æ®</td>
<td>é¢å‘è¿æ¥ï¼Œéœ€è¦å»ºç«‹è¿æ¥ã€é‡Šæ”¾è¿æ¥</td>
</tr>
<tr class="even">
<td>æ”¯æŒå•æ’­ã€å¤šæ’­ã€å¹¿æ’­</td>
<td>ä»…æ”¯æŒå•æ’­</td>
</tr>
<tr class="odd">
<td>é¢å‘åº”ç”¨æŠ¥æ–‡çš„</td>
<td>é¢å‘å­—èŠ‚æµçš„</td>
</tr>
<tr class="even">
<td>å‘ä¸Šå±‚æä¾›æ— è¿æ¥ä¸å¯é ä¼ è¾“æœåŠ¡ï¼ˆé€‚ç”¨äºIPç”µè¯ã€è§†é¢‘ä¼šè®®ç­‰å®æ—¶åº”ç”¨ï¼‰ã€‚</td>
<td>å‘ä¸Šå±‚æä¾›é¢å‘è¿æ¥çš„å¯é ä¼ è¾“æœåŠ¡ï¼ˆé€‚ç”¨äºè¦æ±‚å¯é ä¼ è¾“çš„åº”ç”¨ï¼Œä¾‹å¦‚æ–‡ä»¶ä¼ è¾“ï¼‰</td>
</tr>
<tr class="odd">
<td>é¦–éƒ¨ä»…8å­—èŠ‚</td>
<td>é¦–éƒ¨æ›´ä¸ºå¤æ‚ï¼Œå› ä¸ºè¦å®ç°å¯é ä¼ è¾“ã€æµé‡æ§åˆ¶ã€æ‹¥å¡æ§åˆ¶</td>
</tr>
</tbody>
</table>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715221236586.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715221534600.png" /></p>
<h4 id="å››tcpçš„æµé‡æ§åˆ¶">å››ã€TCPçš„æµé‡æ§åˆ¶ï¼š</h4>
<p>â€‹ æ‰€è°“æµé‡æ§åˆ¶ï¼ˆflow
controlï¼‰å°±æ˜¯è®©å‘é€æ–¹çš„å‘é€é€Ÿç‡ä¸è¦å¤ªå¿«ï¼Œè¦è®©æ¥æ”¶æ–¹æ¥å¾—åŠæ¥æ”¶ã€‚</p>
<ul>
<li><p>å¯ä»¥ä½¿ç”¨æ»‘åŠ¨çª—å£æœºåˆ¶å®ç°ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p></li>
<li><p><strong>ä¸»æœºAæ ¹æ®ä¸»æœºBçš„ACKå¸§ä¸­çš„æ¥æ”¶çª—å£å¤§å°æ¥è°ƒæ•´è‡ªå·±çš„å‘é€çª—å£å¤§å°ã€‚</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220716111424822.png" /></p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220716111513511.png" /></p>
<p>â€‹
ä¸ºé¿å…ä¸Šè¿°æƒ…å†µå‘ç”Ÿï¼Œæ¯ä¸ªä¸»æœºå½“æ”¶åˆ°é›¶çª—å£é€šçŸ¥æ—¶ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªæŒç»­è®¡æ—¶å™¨ï¼Œå½“è¯¥è®¡æ—¶å™¨è¶…æ—¶ï¼Œåˆ™ä¸»æœºä¼šå‘é€ä¸€ä¸ª<strong>é›¶çª—å£æ¢æµ‹æŠ¥æ–‡</strong>ï¼Œä»…æºå¸¦1å­—èŠ‚æ•°æ®ï¼Œè¯¢é—®æ¥æ”¶çª—å£å¤§å°ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220716111638398.png" /></p>
<h4 id="äº”tcpçš„æ‹¥å¡æ§åˆ¶">äº”ã€TCPçš„æ‹¥å¡æ§åˆ¶ï¼š</h4>
<p>â€‹
åœ¨æŸæ®µæ—¶é—´ï¼Œè‹¥å¯¹ç½‘ç»œä¸­æŸä¸€èµ„æºçš„éœ€æ±‚è¶…è¿‡äº†è¯¥èµ„æºæ‰€èƒ½æä¾›çš„å¯ç”¨éƒ¨åˆ†ï¼Œç½‘ç»œæ€§èƒ½å°±è¦å˜åã€‚è¿™ç§æƒ…å†µå°±å«åšæ‹¥å¡ï¼ˆcongestionï¼‰ã€‚</p>
<ul>
<li>åœ¨è®¡ç®—æœºç½‘ç»œä¸­çš„é“¾è·¯å®¹é‡ï¼ˆå³å¸¦å®½ï¼‰ã€äº¤æ¢ç»“ç‚¹ä¸­çš„ç¼“å­˜å’Œå¤„ç†æœºç­‰ï¼Œéƒ½æ˜¯ç½‘ç»œçš„èµ„æºã€‚è‹¥å‡ºç°æ‹¥å¡è€Œä¸è¿›è¡Œæ§åˆ¶ï¼Œæ•´ä¸ªç½‘ç»œçš„ååé‡å°†éšè¾“å…¥è´Ÿè·çš„å¢å¤§è€Œä¸‹é™ã€‚</li>
</ul>
<p><strong>TCPå…±æœ‰ä»¥ä¸‹å››ç§æ‹¥å¡æ§åˆ¶ç®—æ³•</strong>ï¼š</p>
<ul>
<li><p>å‡è®¾ï¼š</p>
<ul>
<li>æ•°æ®æ˜¯å•æ–¹å‘ä¼ é€ï¼Œè€Œå¦ä¸€ä¸ªæ–¹å‘åªä¼ é€ç¡®è®¤ã€‚</li>
<li>æ¥æ”¶æ–¹æ€»æ˜¯æœ‰è¶³å¤Ÿå¤§çš„ç¼“å­˜ç©ºé—´ï¼Œå› è€Œå‘é€æ–¹å‘é€çª—å£çš„å¤§å°ç”±ç½‘ç»œçš„æ‹¥å¡ç¨‹åº¦æ¥å†³å®šã€‚</li>
<li>ä»¥æœ€å¤§æŠ¥æ–‡æ®µMSSçš„ä¸ªæ•°ä¸ºè®¨è®ºé—®é¢˜çš„å•ä½ï¼Œè€Œä¸æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½ã€‚</li>
</ul></li>
<li><p><strong>TCPä½¿ç”¨æ‹¥å¡é¿å…ç®—æ³•çš„åŸºæœ¬è¿‡ç¨‹ï¼š</strong></p></li>
<li><p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220716112248505.png" /></p></li>
<li><p>æ…¢å¼€å§‹ç®—æ³•ï¼š</p></li>
</ul>
<p>â€‹ æ¯æ”¶åˆ°ä¸€ä¸ªç¡®è®¤æŠ¥æ–‡ï¼Œæ‹¥å¡çª—å£å¤§å°å¢åŠ 1.
æ¯ä¸ªä¼ è¾“è½®æ¬¡ç»“æŸåï¼ŒæŒ‰ç…§<strong>æŒ‡æ•°é€Ÿåº¦</strong>å¢é•¿æ‹¥å¡çª—å£ã€‚</p>
<ul>
<li>æ‹¥å¡é¿å…ç®—æ³•ï¼š</li>
</ul>
<p>â€‹
æ¯ä¸ªä¼ è¾“è½®æ¬¡ç»“æŸåï¼Œæ‹¥å¡çª—å£å¤§å°å¢åŠ 1.æ¯ä¸ªä¼ è¾“è½®æ¬¡ç»“æŸåï¼ŒæŒ‰ç…§<strong>çº¿æ€§é€Ÿåº¦</strong>å¢é•¿æ‹¥å¡çª—å£ã€‚</p>
<p>â€‹
å½“æŸä¸€æ¬¡ï¼Œé‡ä¼ è®¡æ—¶å™¨è¶…æ—¶ï¼Œåˆ™<strong>ç½‘ç»œå¾ˆå¯èƒ½å‡ºç°äº†æ‹¥å¡ï¼Œè¿›è¡Œä»¥ä¸‹å·¥ä½œ</strong>ï¼š</p>
<p>â€‹ 1ã€å°†ssthreshå€¼æ›´æ–°ä¸ºå‘ç”Ÿæ‹¥å¡æ—¶cwndå€¼çš„ä¸€åŠï¼›</p>
<p>â€‹ 2ã€å°†cwndå€¼å‡å°‘ä¸º1ï¼Œå¹¶é‡æ–°å¼€å§‹æ‰§è¡Œæ…¢å¼€å§‹ç®—æ³•ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220716112813706.png" /></p>
<ul>
<li><p>å¿«é‡ä¼ å’Œå¿«æ¢å¤ï¼š</p>
<ul>
<li>æœ‰æ—¶ï¼Œä¸ªåˆ«æŠ¥æ–‡æ®µä¼šåœ¨ç½‘ç»œä¸­ä¸¢å¤±ï¼Œä½†å®é™…ä¸Šç½‘ç»œå¹¶æœªå‘ç”Ÿæ‹¥å¡ã€‚è¿™å°†å¯¼è‡´å‘é€æ–¹è¶…æ—¶é‡ä¼ ï¼Œå¹¶è¯¯è®¤ä¸ºç½‘ç»œå‘ç”Ÿäº†æ‹¥å¡ï¼›è¿™ä¸¤ä¸ªç®—æ³•å°†ä¼š<strong>æ”¹è¿›TCPçš„æ€§èƒ½</strong></li>
</ul></li>
<li><p>å¿«é‡ä¼ ç®—æ³•ï¼š</p>
<p>â€‹ é‡‡ç”¨å¿«é‡ä¼ ç®—æ³•å¯ä»¥è®©å‘é€æ–¹å°½æ—©çŸ¥é“å‘ç”Ÿäº†ä¸ªåˆ«æŠ¥æ–‡æ®µçš„ä¸¢å¤±ã€‚</p>
<p>â€‹
æ‰€è°“å¿«é‡ä¼ ï¼Œå°±æ˜¯ä½¿å‘é€æ–¹å°½å¿«è¿›è¡Œé‡ä¼ ï¼Œè€Œä¸æ˜¯ç­‰è¶…æ—¶é‡ä¼ è®¡æ—¶å™¨è¶…æ—¶å†é‡ä¼ ã€‚</p>
<p>â€‹
å£è¦æ±‚æ¥æ”¶æ–¹ä¸è¦ç­‰å¾…è‡ªå·±å‘é€æ•°æ®æ—¶æ‰è¿›è¡Œæå¸¦ç¡®è®¤ï¼Œè€Œæ˜¯è¦ç«‹å³å‘é€ç¡®è®¤ï¼›</p>
<p>â€‹ å›—å³ä½¿æ”¶åˆ°äº†å¤±åºçš„æŠ¥æ–‡æ®µä¹Ÿè¦ç«‹å³å‘å‡ºå¯¹å·²æ”¶åˆ°çš„æŠ¥æ–‡æ®µçš„é‡å¤ç¡®è®¤ã€‚</p>
<p>â€‹
å£å‘é€æ–¹ä¸€æ—¦æ”¶åˆ°3ä¸ªè¿ç»­çš„é‡å¤ç¡®è®¤ï¼Œå°±å°†ç›¸åº”çš„æŠ¥æ–‡æ®µç«‹å³é‡ä¼ ï¼Œè€Œä¸æ˜¯ç­‰è¯¥æŠ¥æ–‡æ®µçš„è¶…æ—¶é‡ä¼ è®¡æ—¶å™¨è¶…æ—¶å†é‡ä¼ ã€‚</p></li>
</ul>
<p>â€‹
å£å¯¹äºä¸ªåˆ«ä¸¢å¤±çš„æŠ¥æ–‡æ®µï¼Œå‘é€æ–¹ä¸ä¼šå‡ºç°è¶…æ—¶é‡ä¼ ï¼Œä¹Ÿå°±ä¸ä¼šè¯¯è®¤ä¸ºå‡ºç°äº†æ‹¥å¡ï¼ˆè¿›è€Œé™ä½æ‹¥å¡çª—å£cwndä¸º1ï¼‰ã€‚ä½¿ç”¨å¿«é‡ä¼ å¯ä»¥ä½¿æ•´ä¸ªç½‘ç»œçš„åå¶é‡æé«˜çº¦20%ã€‚.</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220716122753536.png" /></p>
<ul>
<li><p>å¿«æ¢å¤ç®—æ³•ï¼š</p>
<p>â€‹
å‘é€æ–¹ä¸€æ—¦æ”¶åˆ°3ä¸ªé‡å¤ç¡®è®¤ï¼Œå°±çŸ¥é“ç°åœ¨åªæ˜¯ä¸¢å¤±äº†ä¸ªåˆ«çš„æŠ¥æ–‡æ®µã€‚äºæ˜¯ä¸å¯åŠ¨æ…¢å¼€å§‹ç®—æ³•ï¼Œè€Œæ‰§è¡Œå¿«æ¢å¤ç®—æ³•ï¼›</p>
<p>â€‹
<strong>å‘é€æ–¹å°†æ…¢å¼€å§‹é—¨é™ssthreshå€¼å’Œæ‹¥å¡çª—å£cwndå€¼è°ƒæ•´ä¸ºå½“å‰çª—å£çš„ä¸€åŠï¼›å¼€å§‹æ‰§è¡Œæ‹¥å¡é¿å…ç®—æ³•ã€‚</strong></p></li>
<li><p>ç»¼åˆæ€»ç»“</p></li>
</ul>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220716122929537.png"
alt="image-20220716122929537" />
<figcaption aria-hidden="true">image-20220716122929537</figcaption>
</figure>
<h4 id="å…­tcpè¶…æ—¶é‡ä¼ æ—¶é—´çš„é€‰æ‹©">å…­ã€TCPè¶…æ—¶é‡ä¼ æ—¶é—´çš„é€‰æ‹©ï¼š</h4>
<p>â€‹ ä¸èƒ½ç›´æ¥ä½¿ç”¨æŸæ¬¡æµ‹é‡å¾—åˆ°çš„RTTæ ·æœ¬æ¥è®¡ç®—è¶…æ—¶é‡ä¼ æ—¶é—´RTOã€‚</p>
<p>â€‹
åˆ©ç”¨æ¯æ¬¡æµ‹é‡å¾—åˆ°çš„RTTæ ·æœ¬ï¼Œè®¡ç®—åŠ æƒå¹³å‡å¾€è¿”æ—¶é—´RTTsåˆ©ç”¨æ¯æ¬¡æµ‹é‡å¾—åˆ°çš„RTTæ ·æœ¬ï¼Œè®¡ç®—åŠ æƒå¹³å‡å¾€è¿”æ—¶é—´RTTsï¼ˆåˆç§°ä¸ºå¹³æ»‘çš„å¾€è¿”æ—¶é—´ï¼‰ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220716123516884.png" style="zoom:67%;" /></p>
<ul>
<li>å¾€è¿”æ—¶é—´RTTçš„æµ‹é‡æ¯”è¾ƒå¤æ‚ï¼š</li>
</ul>
<p>â€‹
é’ˆå¯¹å‡ºç°è¶…æ—¶é‡ä¼ æ—¶æ— æ³•æµ‹å‡†å¾€è¿”æ—¶é—´RTTçš„é—®é¢˜ï¼ŒKarnæå‡ºäº†ä¸€ä¸ªç®—æ³•ï¼šåœ¨è®¡ç®—åŠ æƒå¹³å‡å¾€è¿”æ—¶é—´RTTsæ—¶ï¼Œåªè¦æŠ¥æ–‡æ®µé‡ä¼ äº†ï¼Œå°±ä¸é‡‡ç”¨å…¶å¾€è¿”æ—¶é—´RTTæ ·æœ¬ã€‚ä¹Ÿå°±æ˜¯å‡ºç°é‡ä¼ æ—¶ï¼Œä¸é‡æ–°è®¡ç®—RTTsï¼Œè¿›è€Œè¶…æ—¶é‡ä¼ æ—¶é—´RTOä¹Ÿä¸ä¼šé‡æ–°è®¡ç®—ã€‚</p>
<p>â€‹
å› æ­¤ï¼ŒKarnç®—æ³•ä¹Ÿéœ€è¦ä¿®æ­£ã€‚æ–¹æ³•æ˜¯ï¼š<strong>æŠ¥æ–‡æ®µæ¯é‡ä¼ ä¸€æ¬¡ï¼Œå°±æŠŠè¶…æ—¶é‡ä¼ æ—¶é—´RTOå¢å¤§ä¸€äº›ã€‚</strong>å…¸å‹çš„åšæ³•æ˜¯å°†æ–°RTOçš„å€¼å–ä¸ºæ—§RTOå€¼çš„2å€ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220716123844458.png" /></p>
<h4 id="ä¸ƒå¯é ä¼ è¾“çš„å®ç°">ä¸ƒã€å¯é ä¼ è¾“çš„å®ç°ï¼š</h4>
<ul>
<li><p>TCPåŸºäº<strong>ä»¥å­—èŠ‚ä¸ºå•ä½çš„æ»‘åŠ¨çª—å£</strong>æ¥å®ç°å¯é ä¼ è¾“</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220716132341532.png" /></p></li>
<li><p>å¦‚ä½•æè¿°å‘é€çª—å£çš„çŠ¶æ€ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220716132527433.png" /></p></li>
<li><p>æ¥æ”¶çª—å£ï¼š</p>
<ul>
<li>æ¥æ”¶æ–¹åªèƒ½åº”ç­”å·²æ”¶åˆ°æŠ¥æ–‡çš„æœ€é«˜åºå·</li>
<li>å¯¹äºä¸æŒ‰éœ€åˆ°è¾¾çš„æ•°æ®åº”å¦‚ä½•å¤„ç†ï¼ŒTCPæ— æ˜ç¡®è§„å®šï¼š
<ul>
<li>TCPé€šå¸¸å¯¹ä¸æŒ‰åºåˆ°è¾¾çš„æ•°æ®æ˜¯å…ˆä¸´æ—¶å­˜æ”¾åœ¨æ¥æ”¶çª—å£ä¸­ï¼Œç­‰åˆ°å­—èŠ‚æµä¸­æ‰€ç¼ºå°‘çš„å­—èŠ‚æ”¶åˆ°åï¼Œå†æŒ‰åºäº¤ä»˜ä¸Šå±‚çš„åº”ç”¨è¿›ç¨‹ã€‚</li>
</ul></li>
<li>TCPè¦æ±‚æ¥æ”¶æ–¹å¿…é¡»æœ‰ç´¯ç§¯ç¡®è®¤å’Œæå¸¦ç¡®è®¤æœºåˆ¶ï¼Œè¿™æ ·å¯ä»¥å‡å°ä¼ è¾“å¼€é”€ã€‚æ¥æ”¶æ–¹å¯ä»¥åœ¨åˆé€‚çš„æ—¶å€™å‘é€ç¡®è®¤ï¼Œä¹Ÿå¯ä»¥åœ¨è‡ªå·±æœ‰æ•°æ®è¦å‘é€æ—¶æŠŠç¡®è®¤ä¿¡æ¯é¡ºä¾¿æå¸¦ä¸Šã€‚</li>
</ul></li>
<li><p>TCPæ˜¯å…¨åŒå·¥é€šä¿¡ã€‚æ¯ä¸€æ–¹éƒ½æœ‰è‡ªå·±çš„æ¥æ”¶çª—å£å’Œå‘é€çª—å£</p></li>
</ul>
<h4 id="å…«tcpçš„è¿æ¥å»ºç«‹ä¸‰æ¬¡æ¡æ‰‹">å…«ã€TCPçš„è¿æ¥å»ºç«‹â€”â€”ä¸‰æ¬¡æ¡æ‰‹</h4>
<p>TCPè¿è¾“è¿æ¥æœ‰ä»¥ä¸‹ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>å»ºç«‹TCPè¿æ¥</li>
<li>æ•°æ®ä¼ é€</li>
<li>é‡Šæ”¾TCPè¿æ¥</li>
</ul>
<p>TCPçš„è¿æ¥å»ºç«‹è¦è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>ä½¿TCPåŒæ–¹èƒ½å¤Ÿç¡®çŸ¥å¯¹æ–¹çš„å­˜åœ¨ï¼›</li>
<li>ä½¿TCPåŒæ–¹èƒ½å¤Ÿåå•†ä¸€äº›å‚æ•°ï¼ˆå¦‚æœ€å¤§çª—å£å€¼ã€æ˜¯å¦ä½¿ç”¨çª—å£æ‰©å¤§é€‰é¡¹å’Œæ—¶é—´æˆ³é€‰é¡¹ä»¥åŠæœåŠ¡è´¨é‡ç­‰ï¼‰ï¼›</li>
<li>ä½¿TCPåŒæ–¹èƒ½å¤Ÿå¯¹è¿è¾“å®ä½“èµ„æºï¼ˆå¦‚ç¼“å­˜å¤§å°ã€è¿æ¥è¡¨ä¸­çš„é¡¹ç›®ç­‰ï¼‰è¿›è¡Œåˆ†é…ã€‚</li>
</ul>
<p><strong>TCPè¿æ¥å»ºç«‹çš„è¿‡ç¨‹ï¼š</strong></p>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220716133727985.png" /></p>
<ul>
<li><p>xæ˜¯å®¢æˆ·ç«¯é€‰æ‹©çš„åˆå§‹åºå·</p></li>
<li><p>yæ˜¯æœåŠ¡å™¨é€‰æ‹©çš„åˆå§‹åºå·</p></li>
<li><p>TCPè¿æ¥è¯·æ±‚å¸§å’ŒTCPè¿æ¥è¯·æ±‚ç¡®è®¤å¸§ä¸èƒ½æºå¸¦å…¶ä»–æ•°æ®</p></li>
<li><p>ä¸ºä»€ä¹ˆæœ€åè¦å‘é€ç¡®è®¤æŠ¥æ–‡ï¼Ÿ</p>
<ul>
<li>å¦‚æœæœ‰TCPè¿æ¥è¯·æ±‚æ»ç•™åœ¨ç½‘ç»œä¸­ï¼Œé‚£ä¹ˆå½“è¯¥è¿æ¥è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨åï¼ŒæœåŠ¡å™¨åˆä¼šå¤„äºè¿æ¥å»ºç«‹çŠ¶æ€ï¼Œè€Œå®¢æˆ·ç«¯å·²ç»å¤„äºå…³é—­çŠ¶æ€ï¼Œæ•…è€Œä¼šæµªè´¹æœåŠ¡å™¨èµ„æºã€‚</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220716134101110.png" /></li>
</ul></li>
</ul>
<h4 id="ä¹tcpçš„è¿æ¥é‡Šæ”¾å››æ¬¡æŒ¥æ‰‹">ä¹ã€TCPçš„è¿æ¥é‡Šæ”¾â€”â€”å››æ¬¡æŒ¥æ‰‹</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220716140346765.png" /></p>
<ul>
<li>å®¢æˆ·ç«¯ä¸ºä»€ä¹ˆè¦æœ‰TIME-WAITé˜¶æ®µï¼Ÿ
<ul>
<li>å¦‚æœæœ€åä¸€ä¸ªå®¢æˆ·ç«¯çš„ç¡®è®¤æ•°æ®æŠ¥æ–‡ä¸¢å¤±ï¼Œåˆ™ï¼š</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220716140540038.png" /></li>
</ul></li>
<li>å¦‚æœTCPå®¢æˆ·ç«¯å‡ºç°æ•…éšœï¼ŒTCPæœåŠ¡å™¨è¿›ç¨‹å¦‚ä½•å‘ç°å‘¢ï¼Ÿ
<ul>
<li>TCPæœåŠ¡å™¨è¿›ç¨‹æ¯æ”¶åˆ°ä¸€æ¬¡TCPå®¢æˆ·è¿›ç¨‹çš„æ•°æ®ï¼Œå°±é‡æ–°è®¾ç½®å¹¶å¯åŠ¨ä¿æ´»è®¡æ—¶å™¨ï¼ˆ2å°æ—¶å®šæ—¶ï¼‰ã€‚</li>
<li>è‹¥ä¿æ´»è®¡æ—¶å™¨å®šæ—¶å‘¨æœŸå†…æœªæ”¶åˆ°TCPå®¢æˆ·è¿›ç¨‹å‘æ¥çš„æ•°æ®ï¼Œåˆ™å½“ä¿æ´»è®¡æ—¶å™¨åˆ°æ—¶åï¼ŒTCPæœåŠ¡å™¨è¿›ç¨‹å°±å‘TCPå®¢æˆ·è¿›ç¨‹å‘é€ä¸€ä¸ªæ¢æµ‹æŠ¥æ–‡æ®µï¼Œä»¥ååˆ™æ¯éš”75ç§’é’Ÿå‘é€ä¸€æ¬¡ã€‚</li>
<li>è‹¥ä¸€è¿å‘é€10ä¸ªæ¢æµ‹æŠ¥æ–‡æ®µåä»æ— TCPå®¢æˆ·è¿›ç¨‹çš„å“åº”ï¼ŒTCPæœåŠ¡å™¨è¿›ç¨‹å°±è®¤ä¸ºTCPå®¢æˆ·è¿›ç¨‹æ‰€åœ¨ä¸»æœºå‡ºäº†æ•…éšœï¼Œæ¥ç€å°±å…³é—­è¿™ä¸ªè¿æ¥ã€‚</li>
</ul></li>
</ul>
<h4 id="åtcpæŠ¥æ–‡æ®µçš„é¦–éƒ¨æ ¼å¼">åã€TCPæŠ¥æ–‡æ®µçš„é¦–éƒ¨æ ¼å¼</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220716140957849.png" /></p>
<ul>
<li><p>æºç«¯å£ï¼šå 16æ¯”ç‰¹ï¼Œå†™å…¥æºç«¯å£å·ï¼Œç”¨æ¥æ ‡è¯†å‘é€è¯¥TCPæŠ¥æ–‡æ®µçš„åº”ç”¨è¿›ç¨‹ã€‚</p></li>
<li><p>ç›®çš„ç«¯å£ï¼šå 16æ¯”ç‰¹ï¼Œå†™å…¥ç›®çš„ç«¯å£å·ï¼Œç”¨æ¥æ ‡è¯†æ¥æ”¶è¯¥TCPæŠ¥æ–‡æ®µçš„åº”ç”¨è¿›ç¨‹ã€‚</p></li>
<li><p>åºå·ï¼šå 32æ¯”ç‰¹ï¼Œå–å€¼èŒƒå›´[0ï¼Œ<span class="math inline">\(2^{32} -
1\)</span>]ï¼Œåºå·å¢åŠ åˆ°æœ€åä¸€ä¸ªåï¼Œä¸‹ä¸€ä¸ªåºå·å°±åˆå›åˆ°0ã€‚æŒ‡å‡ºæœ¬TCPæŠ¥æ–‡æ®µæ•°æ®è½½è·çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚</p></li>
<li><p>ç¡®è®¤å·ï¼šå 32æ¯”ç‰¹ï¼Œå–å€¼èŒƒå›´[0ï¼Œ<span class="math inline">\(2^{32}
-
1\)</span>]ï¼Œç¡®è®¤å·å¢åŠ åˆ°æœ€åä¸€ä¸ªåï¼Œä¸‹ä¸€ä¸ªç¡®è®¤å·å°±åˆå›åˆ°0ã€‚æŒ‡å‡ºæœŸæœ›æ”¶åˆ°å¯¹æ–¹ä¸‹ä¸€ä¸ªTCPæŠ¥æ–‡æ®µçš„æ•°æ®è½½è·çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¯¹ä¹‹å‰æ”¶åˆ°çš„æ‰€æœ‰æ•°æ®çš„ç¡®è®¤ã€‚</p></li>
<li><p>ç¡®è®¤æ ‡å¿—ä½ACKï¼šå–å€¼ä¸º1æ—¶ç¡®è®¤å·å­—æ®µæ‰æœ‰æ•ˆï¼›å–å€¼ä¸º0æ—¶ç¡®è®¤å·å­—æ®µæ— æ•ˆã€‚TCPè§„å®šï¼Œåœ¨è¿æ¥å»ºç«‹åæ‰€æœ‰ä¼ é€çš„TCPæŠ¥æ–‡æ®µéƒ½å¿…é¡»æŠŠACKç½®1ã€‚</p></li>
<li><p>æ•°æ®åç§»ï¼šå 4æ¯”ç‰¹ï¼Œå¹¶ä»¥4å­—èŠ‚ä¸ºå•ä½ã€‚ç”¨æ¥æŒ‡å‡ºTCPæŠ¥æ–‡æ®µçš„æ•°æ®è½½è·éƒ¨åˆ†çš„èµ·å§‹å¤„è·ç¦»TCPæŠ¥æ–‡æ®µçš„èµ·å§‹å¤„æœ‰å¤šè¿œã€‚è¿™ä¸ªå­—æ®µå®é™…ä¸Šæ˜¯æŒ‡å‡ºäº†TCPæŠ¥æ–‡æ®µçš„é¦–éƒ¨é•¿åº¦ã€‚</p></li>
<li><p>çª—å£ï¼šå 16æ¯”ç‰¹ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ã€‚æŒ‡å‡ºå‘é€æœ¬æŠ¥æ–‡æ®µçš„ä¸€æ–¹çš„æ¥æ”¶çª—å£ã€‚çª—å£å€¼ä½œä¸ºæ¥æ”¶æ–¹è®©å‘é€æ–¹è®¾ç½®å…¶å‘é€çª—å£çš„ä¾æ®ã€‚è¿™æ˜¯ä»¥æ¥æ”¶æ–¹çš„æ¥æ”¶èƒ½åŠ›æ¥æ§åˆ¶å‘é€æ–¹çš„å‘é€èƒ½åŠ›ï¼Œç§°ä¸ºæµé‡æ§åˆ¶ã€‚</p></li>
<li><p>æ ¡éªŒå’Œï¼šå 16æ¯”ç‰¹ï¼Œæ£€æŸ¥èŒƒå›´åŒ…æ‹¬TCPæŠ¥æ–‡æ®µçš„é¦–éƒ¨å’Œæ•°æ®è½½è·ä¸¤éƒ¨åˆ†ã€‚åœ¨è®¡ç®—æ ¡éªŒå’Œæ—¶ï¼Œè¦åœ¨TCPæŠ¥æ–‡æ®µçš„å‰é¢åŠ ä¸Š12å­—èŠ‚çš„ä¼ªé¦–éƒ¨ã€‚</p></li>
<li><p>åŒæ­¥æ ‡å¿—ä½SYNï¼šåœ¨TCPè¿æ¥å»ºç«‹æ—¶ç”¨æ¥åŒæ­¥åºå·ã€‚</p></li>
<li><p>ç»ˆæ­¢æ ‡å¿—ä½FINï¼šç”¨æ¥é‡Šæ”¾TCPè¿æ¥ã€‚</p></li>
<li><p>å¤ä½æ ‡å¿—ä½RSTï¼šç”¨æ¥å¤ä½TCPè¿æ¥ã€‚å½“RST=1æ—¶ï¼Œè¡¨æ˜TCPè¿æ¥å‡ºç°äº†å¼‚å¸¸ï¼Œå¿…é¡»é‡Šæ”¾è¿æ¥ï¼Œç„¶åå†é‡æ–°å»ºç«‹è¿æ¥ã€‚RSTç½®1è¿˜ç”¨æ¥æ‹’ç»ä¸€ä¸ªéæ³•çš„æŠ¥æ–‡æ®µæˆ–æ‹’ç»æ‰“å¼€ä¸€ä¸ªTCPè¿æ¥ã€‚</p></li>
<li><p>æ¨é€æ ‡å¿—ä½PSHï¼šæ¥æ”¶æ–¹çš„TCPæ”¶åˆ°è¯¥æ ‡å¿—ä½ä¸º1çš„æŠ¥æ–‡æ®µä¼šå°½å¿«ä¸Šäº¤åº”ç”¨è¿›ç¨‹ï¼Œè€Œä¸å¿…ç­‰åˆ°æ¥æ”¶ç¼“å­˜éƒ½å¡«æ»¡åå†å‘ä¸Šäº¤ä»˜ã€‚</p></li>
<li><p>ç´§æ€¥æ ‡å¿—ä½URGï¼šå–å€¼ä¸º1æ—¶ç´§æ€¥æŒ‡é’ˆå­—æ®µæœ‰æ•ˆï¼›å–å€¼ä¸º0æ—¶ç´§æ€¥æŒ‡é’ˆå­—æ®µæ— æ•ˆã€‚</p></li>
<li><p>ç´§æ€¥æŒ‡é’ˆï¼šå 16æ¯”ç‰¹ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œç”¨æ¥æŒ‡æ˜ç´§æ€¥æ•°æ®çš„é•¿åº¦ã€‚</p></li>
<li><p>å¡«å……ï¼šç”±äºé€‰é¡¹çš„é•¿åº¦å¯å˜ï¼Œå› æ­¤ä½¿ç”¨å¡«å……æ¥ç¡®ä¿æŠ¥æ–‡æ®µé¦–éƒ¨èƒ½è¢«4æ•´é™¤ï¼ˆå› ä¸ºæ•°æ®åç§»å­—æ®µï¼Œä¹Ÿå°±æ˜¯é¦–éƒ¨é•¿åº¦å­—æ®µï¼Œæ˜¯ä»¥4å­—èŠ‚ä¸ºå•ä½çš„ï¼‰ã€‚</p></li>
</ul>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>Computer Network</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¾è®¡æ¨¡å¼1</title>
    <url>/2022/09/03/2ceecb19279d/</url>
    <content><![CDATA[<h4 id="è®¾è®¡æ¨¡å¼">1ã€è®¾è®¡æ¨¡å¼</h4>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç½‘å¾®è¯¾å ‚Chap6â€”â€”åº”ç”¨å±‚åŸç†</title>
    <url>/2022/07/17/78c11b2eddea/</url>
    <content><![CDATA[<p>è§†é¢‘åœ°å€ï¼šhttps://www.bilibili.com/video/BV1c4411d7jb?p=67</p>
<h4 id="ä¸€å®¢æˆ·æœåŠ¡å™¨æ–¹å¼-å’Œ-å¯¹ç­‰æ–¹å¼">ä¸€ã€å®¢æˆ·/æœåŠ¡å™¨æ–¹å¼ å’Œ
å¯¹ç­‰æ–¹å¼ï¼š</h4>
<ul>
<li><strong>C/Sæ–¹å¼ï¼ˆåŒ…æ‹¬ä¸‡ç»´ç½‘ã€ç”µå­é‚®ä»¶ã€æ–‡ä»¶ä¼ è¾“FTPç­‰ï¼‰</strong>
<ul>
<li>å®¢æˆ·æ˜¯æœåŠ¡è¯·æ±‚æ–¹ï¼ŒæœåŠ¡å™¨æ˜¯æœåŠ¡æä¾›æ–¹ã€‚æœåŠ¡å™¨æ€»æ˜¯å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œå¹¶ç­‰å¾…å®¢æˆ·çš„æœåŠ¡è¯·æ±‚ã€‚æœåŠ¡å™¨å…·æœ‰å›ºå®šç«¯å£å·ï¼ˆä¾‹å¦‚HTTPæœåŠ¡å™¨çš„é»˜è®¤ç«¯å£å·ä¸º80ï¼‰ï¼Œè€Œè¿è¡ŒæœåŠ¡å™¨çš„ä¸»æœºä¹Ÿå…·æœ‰å›ºå®šçš„IPåœ°å€ã€‚</li>
</ul></li>
<li><strong>P2Pæ–¹å¼ï¼ˆåŒ…æ‹¬æ–‡ä»¶å…±äº«ã€å³æ—¶é€šä¿¡ã€P2Pæµåª’ä½“ã€åˆ†å¸ƒå¼å­˜å‚¨ï¼‰</strong>ï¼š
<ul>
<li>åœ¨P2Pæ–¹å¼ä¸­ï¼Œæ²¡æœ‰å›ºå®šçš„æœåŠ¡è¯·æ±‚è€…å’ŒæœåŠ¡æä¾›è€…ï¼Œåˆ†å¸ƒåœ¨ç½‘ç»œè¾¹ç¼˜å„ç«¯ç³»ç»Ÿä¸­çš„åº”ç”¨è¿›ç¨‹æ˜¯å¯¹ç­‰çš„ï¼Œè¢«ç§°ä¸ºå¯¹ç­‰æ–¹ã€‚</li>
<li>å¯¹ç­‰æ–¹ç›¸äº’ä¹‹é—´ç›´æ¥é€šä¿¡ï¼Œæ¯ä¸ªå¯¹ç­‰æ–¹æ—¢æ˜¯æœåŠ¡çš„è¯·æ±‚è€…ï¼Œåˆæ˜¯æœåŠ¡çš„æä¾›è€…ã€‚</li>
</ul></li>
</ul>
<h4 id="äºŒdhcpåè®®">äºŒã€DHCPåè®®ï¼š</h4>
<ul>
<li><p>DHCPçš„ä½œç”¨ï¼š</p>
<ul>
<li><p><strong>å¯ä»¥ä¸ºå±€åŸŸç½‘ä¸­å„ä¸»æœºé…ç½®ä»¥ä¸‹ä¿¡æ¯ï¼š</strong></p>
<ul>
<li>IPåœ°å€ã€å­ç½‘æ©ç ã€é»˜è®¤ç½‘å…³ã€DNSæœåŠ¡å™¨</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717094843438.png" /></p></li>
</ul></li>
<li><p><strong>DHCPçš„å·¥ä½œè¿‡ç¨‹ï¼š</strong></p></li>
</ul>
<p>â€‹
åœ¨DHCPæœåŠ¡å™¨ä¸Šè¿è¡ŒDHCPæœåŠ¡å™¨è¿›ç¨‹ï¼Œåœ¨ç”¨æˆ·ä¸»æœºä¸Šè¿è¡ŒDHCPå®¢æˆ·ç«¯è¿›ç¨‹ï¼Œå…¶åŸºäºUDPåè®®ã€‚ä¸»æœºå¯åŠ¨åï¼Œä¸»æœºé¦–å…ˆä¼šå¹¿æ’­<strong>DHCPå‘ç°æŠ¥æ–‡</strong>ï¼ŒæºIPåœ°å€ä¸º0.0.0.0ï¼Œå› ä¸ºæ­¤æ—¶ä¸»æœºè¿˜æ²¡æœ‰IPåœ°å€ã€‚å¯¹äºDHCPæœåŠ¡å™¨ï¼Œæ¥æ”¶è¯¥æŠ¥æ–‡ï¼Œæ ¹æ®å…¶ä¸­å°è£…çš„å®¢æˆ·ç«¯MACåœ°å€æ¥æŸ¥æ‰¾è‡ªå·±çš„æ•°æ®åº“ï¼Œå¹¶æ ¹æ®ç›¸åº”ä¿¡æ¯å‘é€DHCPæä¾›æŠ¥æ–‡ã€‚è¯¥æŠ¥æ–‡çš„ç›®çš„åœ°å€ä¸ºå¹¿æ’­åœ°å€ï¼Œå› ä¸ºç”¨æˆ·ä¸»æœºè¿˜æ²¡æœ‰IPåœ°å€ã€‚å¯¹äºDHCPå®¢æˆ·è€Œè¨€ï¼Œæ ¹æ®DHCPæä¾›æŠ¥æ–‡ä¸­çš„<strong>äº‹åŠ¡ID</strong>æ¥åˆ¤æ–­è¯¥æŠ¥æ–‡æ˜¯ä¸æ˜¯è‡ªå·±è¯·æ±‚çš„æŠ¥æ–‡ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™æ¥æ”¶è¯¥DHCPæä¾›æŠ¥æ–‡ï¼Œå¹¶æ ¹æ®å…¶å†…å°è£…çš„ä¿¡æ¯é…ç½®è‡ªå·±çš„é»˜è®¤ä¿¡æ¯ã€‚</p>
<p>â€‹
æ­¤æ—¶DHCPå®¢æˆ·ä»å¤šä¸ªDHCPæœåŠ¡å™¨ä¸­è¿”å›çš„ä¿¡æ¯ä¸­æŒ‘é€‰ä¸€ä¸ªï¼ˆä¸€èˆ¬æ˜¯å…ˆåˆ°çš„ï¼‰ï¼Œç„¶åå‘é€å¹¿æ’­DHCPè¯·æ±‚æŠ¥æ–‡ï¼Œå‘è¯¥DHCPæœåŠ¡å™¨è¯·æ±‚ä½¿ç”¨è¯¥IPåœ°å€ã€‚éšåå¯¹åº”DHCPæœåŠ¡å™¨å‘é€<strong>DHCPç¡®è®¤æŠ¥æ–‡</strong>ï¼Œå®¢æˆ·æœºæ¥æ”¶åˆ°ä»¥åï¼Œä½¿ç”¨ARPæ£€æµ‹æ‰€åˆ†é…åˆ°çš„IPåœ°å€æ˜¯å¦å·²è¢«ç½‘ç»œä¸­å…¶ä»–ä¸»æœºå ç”¨ï¼šè‹¥è¢«å ç”¨ï¼šç»™DHCPæœåŠ¡å™¨å‘é€â€œDHCPè‹¥è¢«å ç”¨ï¼šç»™DHCPæœåŠ¡å™¨å‘é€â€œDHCPDECLINE"æŠ¥æ–‡æ’¤é”€lPåœ°å€ç§Ÿçº¦ï¼Œå¹¶é‡æ–°å‘é€â€œDHCP
DISCOVER"æŠ¥æ–‡ï¼›è‹¥æœªè¢«å ç”¨ï¼šå¯ä»¥ä½¿ç”¨ç§Ÿçº¦ä¸­çš„IPåœ°å€ä¸ç½‘ç»œä¸­å…¶ä»–ä¸»æœºé€šä¿¡äº†ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717095933859.png" /></p>
<ul>
<li><p>DHCPä¸­ç»§ä»£ç†ï¼š</p></li>
<li><p>ä½¿ç”¨ä¸­ç»§ä»£ç†çš„åŸå› æ˜¯ï¼Œæˆ‘ä»¬å¹¶ä¸æ„¿æ„åœ¨æ¯ä¸ªç½‘ç»œä¸­éƒ½è®¾ç½®ä¸€ä¸ªDHCPæœåŠ¡å™¨ï¼Œæ‰€ä»¥éœ€è¦ä¸­ç»§ä»£ç†ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717100100162.png" /></p></li>
</ul>
<h4 id="ä¸‰dnsåè®®">ä¸‰ã€DNSåè®®ï¼š</h4>
<p>â€‹ å› ç‰¹ç½‘é‡‡ç”¨å±‚æ¬¡æ ‘çŠ¶ç»“æ„çš„åŸŸåç»“æ„<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717104938232.png" /></p>
<ul>
<li><p>é¡¶çº§åŸŸååŒ…å«ä¸‰ç±»ï¼š</p>
<ul>
<li><p>å›½å®¶é¡¶çº§åŸŸå</p></li>
<li><p>é€šç”¨é¡¶çº§åŸŸå</p></li>
<li><p>åå‘åŸŸ</p>
<p>åœ¨å›½å®¶é¡¶çº§åŸŸåä¸‹æ³¨å†Œçš„äºŒçº§åŸŸåå‡ç”±è¯¥å›½å®¶è‡ªè¡Œç¡®å®šã€‚ä¾‹å¦‚ï¼Œé¡¶çº§åŸŸåä¸ºjpçš„æ—¥æœ¬ï¼Œå°†å…¶æ•™è‚²å’Œä¼ä¸šæœºæ„çš„äºŒçº§åŸŸåå®šä¸ºacå’Œcoï¼Œè€Œä¸ç”¨eduå’Œcomã€‚</p></li>
</ul></li>
<li><p>åŸŸåç©ºé—´</p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717105639917.png" /></p>
<ul>
<li><p>DNSä½¿ç”¨åˆ†å¸ƒåœ¨å„åœ°çš„åŸŸåæœåŠ¡å™¨æ¥å®ç°åŸŸååˆ°IPçš„è½¬æ¢</p></li>
<li><p>åŸŸåæœåŠ¡å™¨å¯ä»¥åˆ’åˆ†ä¸ºä»¥ä¸‹å››ç§ç±»å‹ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717105930441.png" /></p></li>
<li><p>åŸŸåè§£æçš„è¿‡ç¨‹</p>
<ul>
<li>é€’å½’æŸ¥è¯¢ï¼š
<ul>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717110034788.png" style="zoom:67%;" /></li>
</ul></li>
<li>è¿­ä»£æŸ¥è¯¢ï¼š
<ul>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717110127143.png" style="zoom:67%;" /></li>
</ul></li>
</ul></li>
<li><p>ä¸ºäº†æé«˜DNSçš„æŸ¥è¯¢æ•ˆç‡ï¼Œå¹¶å‡è½»æ ¹åŸŸåæœåŠ¡å™¨çš„è´Ÿè·å’Œå‡å°‘å› ç‰¹ç½‘ä¸Šçš„DNSæŸ¥è¯¢æŠ¥æ–‡æ•°é‡ï¼Œåœ¨åŸŸåæœåŠ¡å™¨ä¸­å¹¿æ³›åœ°ä½¿ç”¨äº†é«˜é€Ÿç¼“å­˜ã€‚é«˜é€Ÿç¼“å­˜ç”¨æ¥å­˜æ”¾æœ€è¿‘æŸ¥è¯¢è¿‡çš„åŸŸåä»¥åŠä»ä½•å¤„è·å¾—åŸŸåæ˜ å°„ä¿¡æ¯çš„è®°å½•ã€‚</p></li>
<li><p>ç”±äºåŸŸååˆ°IPåœ°å€çš„æ˜ å°„å…³ç³»å¹¶ä¸æ˜¯æ°¸ä¹…ä¸å˜ï¼Œä¸ºä¿æŒé«˜é€Ÿç¼“å­˜ä¸­çš„å†…å®¹æ­£ç¡®ï¼ŒåŸŸåæœåŠ¡å™¨åº”ä¸ºæ¯é¡¹å†…å®¹è®¾ç½®è®¡æ—¶å™¨å¹¶åˆ é™¤è¶…è¿‡åˆç†æ—¶é—´çš„é¡¹ï¼ˆä¾‹å¦‚ï¼Œæ¯ä¸ªé¡¹ç›®åªå­˜æ”¾ä¸¤å¤©ï¼‰ã€‚</p></li>
<li><p>ä¸ä½†åœ¨æœ¬åœ°åŸŸåæœåŠ¡å™¨ä¸­éœ€è¦é«˜é€Ÿç¼“å­˜ï¼Œåœ¨ç”¨æˆ·ä¸»æœºä¸­ä¹Ÿå¾ˆéœ€è¦ã€‚è®¸å¤šç”¨æˆ·ä¸»æœºåœ¨å¯åŠ¨æ—¶ä»æœ¬åœ°åŸŸåæœåŠ¡å™¨ä¸‹è½½åŸŸåå’ŒIPåœ°å€çš„å…¨éƒ¨æ•°æ®åº“ï¼Œç»´æŠ¤å­˜æ”¾è‡ªå·±æœ€è¿‘ä½¿ç”¨çš„åŸŸåçš„é«˜é€Ÿç¼“å­˜ï¼Œå¹¶ä¸”åªåœ¨ä»ç¼“å­˜ä¸­æ‰¾ä¸åˆ°åŸŸåæ—¶æ‰å‘åŸŸåæœåŠ¡å™¨æŸ¥è¯¢ã€‚åŒç†ï¼Œä¸»æœºä¹Ÿéœ€è¦ä¿æŒé«˜é€Ÿç¼“å­˜ä¸­å†…å®¹çš„æ­£ç¡®æ€§ã€‚</p></li>
</ul>
<h4 id="å››ftpåè®®">å››ã€FTPåè®®ï¼š</h4>
<ul>
<li><p>FTPçš„åŸºæœ¬å·¥ä½œåŸç†ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717110619535.png" /></p></li>
</ul>
<p>â€‹
æ€»å…±ä¼šå¼€é€šä¸¤ä¸ªTCPè¿æ¥ï¼Œç”¨äºä¼ é€æ§åˆ¶å‘½ä»¤çš„TCPè¿æ¥ä¸€ç›´ä¿æŒæ‰“å¼€çŠ¶æ€ï¼ŒäºŒç”¨äºä¼ é€æ•°æ®çš„TCPè¿æ¥æ¯æ¬¡ä¼ é€å®Œæ•°æ®åéƒ½ä¼šå…³é—­ã€‚</p>
<h4 id="äº”ç”µå­é‚®ä»¶">äº”ã€ç”µå­é‚®ä»¶ï¼š</h4>
<ul>
<li>ä¸‰ä¸ªæ­¥éª¤ï¼š</li>
</ul>
<p><img
src="C:\Users\14012\AppData\Roaming\Typora\typora-user-images\image-20220717110817694.png" /></p>
<ul>
<li><p>ä¸‰ä¸ªä¸»è¦æ„ä»¶ï¼š</p>
<ul>
<li>ç”¨æˆ·ä»£ç†ã€é‚®ä»¶æœåŠ¡å™¨ã€ç”µå­é‚®ä»¶æ‰€éœ€è¦çš„åè®®</li>
<li><strong>ç”¨æˆ·ä»£ç†</strong>æ˜¯ç”¨æˆ·ä¸ç”µå­é‚®ä»¶ç³»ç»Ÿçš„æ¥å£ï¼Œåˆç§°ä¸ºç”µå­é‚®ä»¶å®¢æˆ·ç«¯è½¯ä»¶ã€‚</li>
<li><strong>é‚®ä»¶æœåŠ¡å™¨</strong>æ˜¯ç”µå­é‚®ä»¶ç³»ç»Ÿçš„åŸºç¡€è®¾æ–½ã€‚å› ç‰¹ç½‘ä¸Šæ‰€æœ‰çš„ISPéƒ½æœ‰é‚®ä»¶æœåŠ¡å™¨ï¼Œå…¶åŠŸèƒ½æ˜¯å‘é€å’Œæ¥æ”¶é‚®ä»¶ï¼ŒåŒæ—¶è¿˜è¦è´Ÿè´£ç»´æŠ¤ç”¨æˆ·çš„é‚®ç®±ã€‚</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717111014969.png" /></p></li>
<li><p>é‚®ä»¶å‘é€å’Œæ¥æ”¶è¿‡ç¨‹ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717111159217.png" /></p></li>
<li><p>SMTPåè®®åŸºæœ¬å·¥ä½œåŸç†ï¼š</p>
<ul>
<li>æ³¨æ„ï¼š1.ä¸ºäº†ç®€å•èµ·è§ï¼Œçœç•¥äº†è®¤è¯è¿‡ç¨‹ï¼›2.åº”ç­”ä»£ç åé¢ä¸€èˆ¬éƒ½è·Ÿæœ‰ç®€å•çš„æè¿°ä¿¡æ¯3.ä¸åŒçš„SMTPæœåŠ¡å™¨ç»™å‡ºçš„ç›¸åŒåº”ç­”ä»£ç çš„æè¿°ä¿¡æ¯å¯èƒ½ä¸åŒ</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717111351617.png" /></p></li>
<li><p>ç”µå­é‚®ä»¶çš„å®šä¹‰ï¼š</p>
<ul>
<li>ä¸€ä¸ªç”µå­é‚®ä»¶æœ‰ä¿¡å°å’Œå†…å®¹ä¸¤éƒ¨åˆ†ã€‚è€Œå†…å®¹åˆç”±é¦–éƒ¨å’Œä¸»ä½“ä¸¤éƒ¨åˆ†æ„æˆã€‚</li>
</ul></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717111501861.png" /></p>
<ul>
<li>MIMEï¼š
<ul>
<li>SMTPåè®®åªèƒ½ä¼ é€ASCIIç æ–‡æœ¬æ•°æ®ï¼Œä¸èƒ½ä¼ é€å¯æ‰§è¡Œæ–‡ä»¶æˆ–å…¶ä»–çš„äºŒè¿›åˆ¶å¯¹è±¡ã€‚SMTPä¸èƒ½æ»¡è¶³ä¼ é€å¤šåª’ä½“é‚®ä»¶ï¼ˆä¾‹å¦‚å¸¦æœ‰å›¾ç‰‡ã€éŸ³é¢‘æˆ–è§†é¢‘æ•°æ®ï¼‰çš„éœ€è¦ã€‚å¹¶ä¸”è®¸å¤šå…¶ä»–éè‹±è¯­å›½å®¶çš„æ–‡å­—ï¼ˆä¾‹å¦‚ä¸­æ–‡ã€ä¿„æ–‡ã€ç”šè‡³å¸¦æœ‰é‡éŸ³ç¬¦å·çš„æ³•æ–‡æˆ–å¾·æ–‡ï¼‰ä¹Ÿæ— æ³•ç”¨SMTPä¼ é€ã€‚</li>
<li>ä¸ºè§£å†³SMTPä¼ é€éASCIç æ–‡æœ¬çš„é—®é¢˜ï¼Œæå‡ºäº†<strong>å¤šç”¨é€”å› ç‰¹ç½‘é‚®ä»¶æ‰©å±•MIMEï¼ˆMulipurpose
Internet Mail Extensionsï¼‰</strong></li>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717111557311.png" style="zoom:67%;" /></li>
</ul></li>
<li>å¸¸ç”¨çš„é‚®ä»¶è¯»å–åè®®ï¼š
<ul>
<li>é‚®å±€åè®®POP
<ul>
<li>éå¸¸ç®€å•ã€åŠŸèƒ½æœ‰é™çš„é‚®ä»¶è¯»å–åè®®ã€‚ç”¨æˆ·åªèƒ½ä»¥ä¸‹è½½å¹¶åˆ é™¤æ–¹å¼æˆ–ä¸‹è½½å¹¶ä¿ç•™æ–¹å¼ä»é‚®ä»¶æœåŠ¡å™¨ä¸‹è½½é‚®ä»¶åˆ°ç”¨æˆ·æ–¹è®¡ç®—æœºã€‚<strong>ä¸å…è®¸ç”¨æˆ·åœ¨é‚®ä»¶æœåŠ¡å™¨ä¸Šç®¡ç†è‡ªå·±çš„é‚®ä»¶ã€‚</strong>ï¼ˆä¾‹å¦‚åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œå¯¹é‚®ä»¶è¿›è¡Œåˆ†ç±»ç®¡ç†ç­‰ï¼‰ã€‚</li>
</ul></li>
<li>å› ç‰¹ç½‘é‚®ä»¶è®¿é—®åè®®IMAP
<ul>
<li>åŠŸèƒ½æ¯”POP3å¼ºå¤§çš„é‚®ä»¶è¯»å–åè®®ã€‚<strong>ç”¨æˆ·åœ¨è‡ªå·±çš„è®¡ç®—æœºä¸Šå°±å¯ä»¥æ“æ§é‚®ä»¶æœåŠ¡å™¨ä¸­çš„é‚®ç®±ï¼Œå°±åƒåœ¨æœ¬åœ°æ“æ§ä¸€æ ·ï¼Œå› æ­¤IMAPæ˜¯ä¸€ä¸ªè”æœºåè®®ã€‚</strong></li>
</ul></li>
<li>POP3å’ŒIMAP4éƒ½é‡‡ç”¨åŸºäºTCPè¿æ¥çš„å®¢æˆ·/æœåŠ¡å™¨æ–¹å¼ã€‚POP3ä½¿ç”¨ç†ŸçŸ¥ç«¯å£110ï¼ŒIMAP4ä½¿ç”¨ç†ŸçŸ¥ç«¯å£143ã€‚</li>
</ul></li>
</ul>
<h4 id="å…­ä¸‡ç»´ç½‘www">å…­ã€ä¸‡ç»´ç½‘WWW</h4>
<ul>
<li>æµè§ˆå™¨æœ€é‡è¦çš„éƒ¨åˆ†æ˜¯æ¸²æŸ“å¼•æ“ï¼Œä¹Ÿå°±æ˜¯æµè§ˆå™¨å†…æ ¸ã€‚è´Ÿè´£å¯¹ç½‘é¡µå†…å®¹è¿›è¡Œè§£æå’Œæ˜¾ç¤ºã€‚</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717112048715.png" /></p>
<ul>
<li>HTTP/1.0
<ul>
<li>HTTP/1.0é‡‡ç”¨éæŒç»­è¿æ¥æ–¹å¼ã€‚åœ¨è¯¥æ–¹å¼ä¸‹ï¼Œæ¯æ¬¡æµè§ˆå™¨è¦è¯·æ±‚ä¸€ä¸ªæ–‡ä»¶éƒ½è¦ä¸æœåŠ¡å™¨å»ºç«‹TCPè¿æ¥ï¼Œå½“æ”¶åˆ°å“åº”åå°±ç«‹å³å…³é—­è¿æ¥ã€‚</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717132023000.png" /></li>
</ul></li>
<li>HTTP1.1
<ul>
<li>HTTP/1.1é‡‡ç”¨æŒç»­è¿æ¥æ–¹å¼ã€‚åœ¨è¯¥æ–¹å¼ä¸‹ï¼Œä¸‡ç»´ç½‘æœåŠ¡å™¨åœ¨å‘é€å“åº”åä»ç„¶ä¿æŒè¿™æ¡è¿æ¥ï¼Œä½¿åŒä¸€ä¸ªå®¢æˆ·ï¼ˆæµè§ˆå™¨ï¼‰å’Œè¯¥æœåŠ¡å™¨å¯ä»¥ç»§ç»­åœ¨è¿™æ¡è¿æ¥ä¸Šä¼ é€åç»­çš„HTTPè¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡ã€‚è¿™å¹¶ä¸å±€é™äºä¼ é€åŒä¸€ä¸ªé¡µé¢ä¸Šå¼•ç”¨çš„å¯¹è±¡ï¼Œè€Œæ˜¯åªè¦è¿™äº›æ–‡æ¡£éƒ½åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šå°±è¡Œã€‚</li>
</ul></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717132217029.png" /></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717132242334.png" style="zoom:67%;" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220717132321231.png" /></p>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>Computer Network</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç®—æœºç§‘å­¦ç¬”è®°1â€”â€”P1~P10é›†å†…å®¹ç¬”è®°</title>
    <url>/2022/04/27/87bb1a3b00a2/</url>
    <content><![CDATA[<h4 id="ä¸€ç”µå­è®¡ç®—æœºç»„æˆ">ä¸€ã€ç”µå­è®¡ç®—æœºç»„æˆï¼š</h4>
<h5 id="æ§åˆ¶ç”µè·¯">1ã€æ§åˆ¶ç”µè·¯</h5>
<p>â€‹ è®¡ç®—æœºæ§åˆ¶ç”µè·¯å¼€å…³å‘å±•å†ç¨‹ï¼šç”µç£ç»§ç”µå™¨â€”â€”çœŸç©ºç®¡â€”â€”æ™¶ä½“ç®¡</p>
<p>â€‹ å‘å±•è¶‹åŠ¿ï¼šæ¯ç§’å¼€å…³æ¬¡æ•°æ›´å¤§ï¼Œæ›´ä¸å®¹æ˜“æŸåï¼Œä½“ç§¯æ›´å°</p>
<ul>
<li>ç¡…è°·çš„åå­—æ¥ç”±ï¼Ÿæ™¶ä½“ç®¡çš„ä¸»è¦åˆ¶ä½œæ¥æºæ˜¯ç¡…</li>
</ul>
<h5
id="ä¸ºä»€ä¹ˆç”µå­è®¡ç®—æœºæ˜¯äºŒè¿›åˆ¶è¡¨ç¤º">2ã€ä¸ºä»€ä¹ˆç”µå­è®¡ç®—æœºæ˜¯äºŒè¿›åˆ¶è¡¨ç¤ºï¼Ÿ</h5>
<p>â€‹
1ã€æ™¶ä½“ç®¡æœ¬èº«æ˜¯ä¸ä»…å¯ä»¥æœ‰ç”µæµæµè¿‡å’Œä¸æµè¿‡ä¸¤ç§çŠ¶æ€ï¼Œè¿˜å¯ä»¥è¡¨ç¤ºç”µæµå¤§å°ï¼Œæ‰€ä»¥æ—©æœŸç”µå­è®¡ç®—æœºå¯èƒ½é‡‡ç”¨ä¸‰è¿›åˆ¶ã€äº”è¿›åˆ¶ã€‚ä½†æ˜¯ç”±äºçŠ¶æ€å¤ªå¤šï¼Œæ™¶ä½“ç®¡å˜åŒ–å¤ªå¿«ï¼Œå¾ˆå®¹æ˜“å¯¼è‡´ä¿¡å·æ··æ‚å‡ºç°é—®é¢˜ã€‚</p>
<p>â€‹ 2ã€å¸ƒå°”ä»£æ•°çš„ç†è®ºå®Œå–„ã€‚</p>
<h5 id="é€»è¾‘é—¨">3ã€é€»è¾‘é—¨ï¼š</h5>
<p>â€‹
æˆ‘ä»¬å¯ä»¥é€šè¿‡äºŒè¿›åˆ¶çš„å½¢å¼ï¼Œä½¿ç”¨æ™¶ä½“ç®¡æ¥æ„å»ºé€»è¾‘é—¨ã€‚å¯ä»¥æ„å»ºæ›´ä¸ºå¤æ‚çš„é€»è¾‘ç”µè·¯ã€‚æˆ‘ä»¬å¯ä»¥æ­å»ºæœ€åŸºç¡€çš„
AND/ OR / NOT / XOR é€»è¾‘é—¨ï¼Œä»è€Œæ„å»ºæ›´ä¸ºå¤æ‚çš„é€»è¾‘é—¨ã€‚</p>
<p><img src="C:\Users\14012\AppData\Roaming\Typora\typora-user-images\image-20220427175830177.png" alt="â€œä¸â€é€»è¾‘ç”µè·¯" style="zoom:25%;" /></p>
<h5 id="è®¡ç®—æœºå¦‚ä½•å­˜å‚¨">4ã€è®¡ç®—æœºå¦‚ä½•å­˜å‚¨ï¼Ÿ</h5>
<p>â€‹
ä½¿ç”¨Trueå’ŒFalseè¡¨ç¤ºäºŒè¿›åˆ¶æ•°çš„0å’Œ1ã€‚è®¡ç®—æœºä¸­ä½¿ç”¨äºŒè¿›åˆ¶æ•°è¿›è¡Œå­˜å‚¨å’Œè®¡ç®—ã€‚</p>
<p>â€‹
<strong>æ•´æ•°è¡¨ç¤ºï¼š</strong>ä½¿ç”¨ç¬¬ä¸€ä½è¡¨ç¤ºæ•°å­—çš„æ­£è´Ÿï¼Œ1æ˜¯è´Ÿï¼Œ0ä¸ºæ­£ã€‚</p>
<p>â€‹
<strong>æµ®ç‚¹æ•°è¡¨ç¤ºï¼š</strong>IEEE754æ ‡å‡†ï¼Œä½¿ç”¨ç§‘å­¦è®¡æ•°çš„å½¢å¼è¿›è¡Œå­˜å‚¨ã€‚</p>
<p>â€‹ 32ä½æµ®ç‚¹æ•°ï¼š1 + 8 + 23 ï¼ˆæ­£è´Ÿ + æŒ‡æ•° + æ•°å­—ï¼‰</p>
<p>â€‹ <strong>ASCIIç ï¼š</strong>8ä½ï¼Œç”¨äºè¡¨ç¤ºå„ç§å„æ ·çš„è‹±æ–‡ç¬¦å·ã€‚</p>
<p>â€‹
<strong>Unicodeç¼–ç ï¼š</strong>è®¾è®¡ä¸1992å¹´ï¼Œè§£å†³äº†ä¸åŒå›½å®¶ä¸åŒæ ‡å‡†çš„é—®é¢˜ã€‚æœ€å¸¸è§çš„Unicodeæ˜¯16ä½ï¼Œå®Œå…¨è¶³å¤Ÿæ‰€æœ‰è¯­è¨€ã€è¡¨æƒ…è¿›è¡Œä½¿ç”¨ã€‚</p>
<h5 id="è®¡ç®—æœºå¦‚ä½•è®¡ç®—">5ã€è®¡ç®—æœºå¦‚ä½•è®¡ç®—ï¼š</h5>
<p>â€‹ <strong>ç®—æ•°é€»è¾‘å•å…ƒALU</strong>ï¼šè®¡ç®—æœºé‡Œè´Ÿè´£è¿ç®—çš„ç»„ä»¶</p>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>è®¡ç®—æœºç§‘å­¦è¯¾</category>
      </categories>
      <tags>
        <tag>Computer Science</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç®—æœºç§‘å­¦ç¬”è®°1â€”â€”P1~P10é›†å†…å®¹ç¬”è®°</title>
    <url>/2022/04/27/698edcb24aab/</url>
    <content><![CDATA[
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>è®¡ç®—æœºç§‘å­¦è¯¾</category>
      </categories>
      <tags>
        <tag>Computer Science</tag>
      </tags>
  </entry>
  <entry>
    <title>äº‘åŸç”Ÿå¿«é€Ÿå…¥é—¨ç³»åˆ—Chap1â€”â€”äº‘å¹³å°+å®¹å™¨åŒ–</title>
    <url>/2022/04/27/a1c507dae6b0/</url>
    <content><![CDATA[<h4 id="å…¬æœ‰äº‘å’Œç§æœ‰äº‘">1ã€å…¬æœ‰äº‘å’Œç§æœ‰äº‘ï¼š</h4>
<ul>
<li><p>å…¬æœ‰äº‘ï¼š</p>
<ul>
<li>å…¬æœ‰äº‘èµ„æºï¼ˆä¾‹å¦‚æœåŠ¡å™¨å’Œå­˜å‚¨ç©ºé—´ï¼‰ç”±ç¬¬ä¸‰æ–¹äº‘æœåŠ¡æä¾›å•†æ‹¥æœ‰å’Œè¿è¥ï¼Œè¿™äº›èµ„æºé€šè¿‡
Internet æä¾›</li>
<li><strong>æˆæœ¬æ›´ä½</strong>ï¼šæ— éœ€è´­ä¹°ç¡¬ä»¶æˆ–è½¯ä»¶ï¼Œä»…å¯¹ä½¿ç”¨çš„æœåŠ¡ä»˜è´¹ã€‚</li>
<li><strong>æ— éœ€ç»´æŠ¤</strong>ï¼šç»´æŠ¤ç”±æœåŠ¡æä¾›å•†æä¾›ã€‚</li>
<li><strong>è¿‘ä¹æ— é™åˆ¶çš„ç¼©æ”¾æ€§</strong>ï¼šæä¾›æŒ‰éœ€èµ„æºï¼Œå¯æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ã€‚</li>
<li><strong>é«˜å¯é æ€§</strong>ï¼šå…·å¤‡ä¼—å¤šæœåŠ¡å™¨ï¼Œç¡®ä¿å…å—æ•…éšœå½±å“ã€‚</li>
<li>å¯ç”¨æ€§ï¼š Nä¸ª9 å…¨å¹´çš„æ•…éšœæ—¶é—´ï¼š 365<em>24</em>3600*(1-99.9999%)</li>
</ul></li>
<li><p>ç§æœ‰äº‘ï¼š</p>
<ul>
<li><p>ç§æœ‰äº‘ç”±ä¸“ä¾›ä¸€ä¸ªä¼ä¸šæˆ–ç»„ç»‡ä½¿ç”¨çš„äº‘è®¡ç®—èµ„æºæ„æˆã€‚åœ¨ç§æœ‰äº‘ä¸­ï¼Œ<strong>æœåŠ¡å’ŒåŸºç¡€ç»“æ„å§‹ç»ˆåœ¨ç§æœ‰ç½‘ç»œä¸Šè¿›è¡Œç»´æŠ¤ï¼Œç¡¬ä»¶å’Œè½¯ä»¶ä¸“ä¾›ç»„ç»‡ä½¿ç”¨ã€‚</strong>ç§æœ‰äº‘çš„ä½¿ç”¨å¯¹è±¡é€šå¸¸ä¸ºæ”¿åºœæœºæ„ã€é‡‘èæœºæ„ä»¥åŠå…¶ä»–å…·å¤‡ä¸šåŠ¡å…³é”®æ€§è¿è¥ä¸”å¸Œæœ›å¯¹ç¯å¢ƒæ‹¥æœ‰æ›´å¤§æ§åˆ¶æƒçš„ä¸­å‹åˆ°å¤§å‹ç»„ç»‡ã€‚</p></li>
<li><p><strong>çµæ´»æ€§æ›´å¼º</strong>ï¼šç»„ç»‡å¯è‡ªå®šä¹‰äº‘ç¯å¢ƒä»¥æ»¡è¶³ç‰¹å®šä¸šåŠ¡éœ€æ±‚ã€‚</p></li>
<li><p><strong>æ§åˆ¶åŠ›æ›´å¼º</strong>ï¼šèµ„æºä¸ä¸å…¶ä»–ç»„ç»‡å…±äº«ï¼Œå› æ­¤èƒ½è·å¾—æ›´é«˜çš„æ§åˆ¶åŠ›ä»¥åŠ<strong>æ›´é«˜çš„éšç§çº§åˆ«ã€‚</strong></p></li>
<li><p><strong>å¯ä¼¸ç¼©æ€§æ›´å¼º</strong>ï¼šä¸æœ¬åœ°åŸºç¡€ç»“æ„ç›¸æ¯”ï¼Œç§æœ‰äº‘é€šå¸¸å…·æœ‰æ›´å¼ºçš„å¯ä¼¸ç¼©æ€§ã€‚</p></li>
</ul></li>
<li><p>æ²¡æœ‰ä¸€ç§äº‘è®¡ç®—ç±»å‹é€‚ç”¨äºæ‰€æœ‰äººã€‚å¤šç§ä¸åŒçš„äº‘è®¡ç®—æ¨¡å‹ã€ç±»å‹å’ŒæœåŠ¡å·²å¾—åˆ°å‘å±•ï¼Œå¯ä»¥æ»¡è¶³ç»„ç»‡å¿«é€Ÿå˜åŒ–çš„æŠ€æœ¯éœ€æ±‚ã€‚</p></li>
</ul>
<h4 id="ç§æœ‰ç½‘ç»œvpc">2ã€ç§æœ‰ç½‘ç»œVPC</h4>
<p>â€‹ é›†ç¾¤å†…æœåŠ¡å™¨ä¹‹é—´äº’ç›¸è®¿é—®ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨ç§æœ‰IPè¿›è¡Œè®¿é—®ï¼Œé€Ÿåº¦æ›´å¿«.</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221031170245325.png" /></p>
<p>â€‹
åœ¨å®é™…çš„æœåŠ¡å™¨é›†ç¾¤ä¸­,å¯ä»¥è‡ªå·±å…ˆæ–°å»ºä¸€ä¸ªä¸“æœ‰ç½‘ç»œ(å…¶å®å°±æ˜¯å¯ä»¥åœ¨å†…éƒ¨åˆ›å»ºå±€åŸŸç½‘,ç„¶åå†é€šè¿‡äº¤æ¢æœºåˆ›å»ºå­ç½‘ç­‰),åˆ’åˆ†ç›¸åº”çš„ç½‘æ®µ.æ¯”å¦‚è¯´192.168.o.0/16.</p>
<p>â€‹ ä¸åŒVPCä¹‹é—´çš„ä¸»æœºä¸èƒ½ç›´æ¥é€šä¿¡,VPCæä¾›äº†ä¸€ä¸ªéš”ç¦»åŸŸ.</p>
<h4 id="dockerå®¹å™¨åŒ–æ¦‚å¿µ">3ã€Dockerå®¹å™¨åŒ–æ¦‚å¿µ</h4>
<ul>
<li>ç»Ÿä¸€æ ‡å‡†ï¼Œåº”ç”¨æ„å»ºã€åˆ†äº«å’Œè¿è¡Œã€‚</li>
<li>èµ„æºéš”ç¦»ï¼šcpuå†…å­˜èµ„æºéš”ç¦»ä¸é™åˆ¶ï¼Œè®¿é—®è®¾å¤‡éš”ç¦»ä¸é™åˆ¶ï¼Œç½‘ç»œéš”ç¦»ä¸é™åˆ¶ç­‰</li>
<li>è™šæ‹ŸåŒ–æŠ€æœ¯ï¼š
<ul>
<li>åœ¨Dockerå®¹å™¨åŒ–æŠ€æœ¯è¿˜æ²¡æœ‰å‡ºç°çš„æ—¶å€™ï¼Œäººä»¬ä½¿ç”¨çš„æ˜¯è™šæ‹ŸåŒ–æŠ€æœ¯ã€‚åŸºäºè™šæ‹Ÿæœºçš„éƒ¨ç½²æ–¹å¼ï¼ŒåŸºç¡€é•œåƒéå¸¸å¤§ï¼Œåˆ›å»ºä½¿ç”¨ç¨å¾®å¤æ‚ï¼Œå¯åŠ¨é€Ÿåº¦è¾ƒæ…¢ï¼Œç§»æ¤ä¸åˆ†äº«ä¸æ–¹ä¾¿ï¼Œè™½ç„¶å…¶éš”ç¦»æ€§éå¸¸çš„å¥½ã€‚</li>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221101161243475.png" style="zoom:67%;" /></li>
</ul></li>
<li>åŸºäºè™šæ‹ŸåŒ–çš„Dockerå®¹å™¨åŒ–æŠ€æœ¯ï¼š
<ul>
<li>åŸºç¡€é•œåƒMBçº§åˆ«ï¼Œåˆ›å»ºç®€å•ï¼Œå¯åŠ¨é€Ÿåº¦å¿«ï¼Œç§»æ¤ä¸åˆ†äº«æ–¹ä¾¿</li>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221101161359831.png" style="zoom:67%;" /></li>
<li>æ¶æ„å¦‚å›¾æ‰€ç¤ºï¼šRegistryé•œåƒä»“åº“ï¼ŒContainerså®¹å™¨ï¼ŒImagesé•œåƒ</li>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221101161524606.png" style="zoom:67%;" /></li>
</ul></li>
</ul>
<h4 id="dockerå®¹å™¨åŒ–å¸¸ç”¨å‘½ä»¤">4ã€Dockerå®¹å™¨åŒ–å¸¸ç”¨å‘½ä»¤</h4>
<h5 id="é•œåƒç›¸å…³">1ï¼‰é•œåƒç›¸å…³</h5>
<p>â€‹ Docker Hubå¸¸ç”¨çš„é•œåƒç½‘ç«™</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker pull nginx  <span class="comment">#ä¸‹è½½æœ€æ–°ç‰ˆ</span></span><br><span class="line">docker pull nginx:1.20.1 <span class="comment">#ä¸‹è½½æŒ‡å®šç‰ˆæœ¬</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¸‹è½½æ¥çš„é•œåƒéƒ½åœ¨æœ¬åœ°</span></span><br><span class="line">docker images  <span class="comment">#æŸ¥çœ‹æ‰€æœ‰é•œåƒ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç§»é™¤é•œåƒ</span></span><br><span class="line">docker rmi é•œåƒå:ç‰ˆæœ¬å· / é•œåƒ<span class="built_in">id</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="å®¹å™¨å¯åŠ¨åœæ­¢ç›¸å…³">2ï¼‰å®¹å™¨å¯åŠ¨åœæ­¢ç›¸å…³ï¼š</h5>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</span><br><span class="line"></span><br><span class="line"><span class="comment"># -dï¼šåå°è¿è¡Œ</span></span><br><span class="line"><span class="comment"># --restart=always   è¯¥å®¹å™¨å¼€æœºè‡ªå¯ï¼Œåº”ç”¨å¼€æœºè‡ªå¯</span></span><br><span class="line"><span class="comment"># -p å¤–éƒ¨ç«¯å£:å†…éƒ¨ç«¯å£  ç«¯å£æ˜ å°„ </span></span><br><span class="line">docker run --name=mynginx -d --restart=always -p 88:80 nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span></span><br><span class="line">docker ps</span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ‰€æœ‰å®¹å™¨</span></span><br><span class="line">docker ps -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤åœæ­¢çš„å®¹å™¨</span></span><br><span class="line">docker <span class="built_in">rm</span>  å®¹å™¨<span class="built_in">id</span>/åå­—</span><br><span class="line">docker <span class="built_in">rm</span> -f mynginx   <span class="comment"># å¼ºåˆ¶åˆ é™¤æ­£åœ¨è¿è¡Œä¸­çš„å®¹å™¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åœæ­¢å®¹å™¨</span></span><br><span class="line">docker stop å®¹å™¨<span class="built_in">id</span>/åå­—</span><br><span class="line"><span class="comment">#å†æ¬¡å¯åŠ¨</span></span><br><span class="line">docker start å®¹å™¨<span class="built_in">id</span>/åå­—</span><br></pre></td></tr></table></figure>
<h5 id="ä¿®æ”¹å®¹å™¨å†…å®¹">3ï¼‰ä¿®æ”¹å®¹å™¨å†…å®¹ï¼š</h5>
<ul>
<li>æ³•1ï¼šè¿›å…¥å®¹å™¨å†…éƒ¨ï¼Œç„¶åä¿®æ”¹</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿›å…¥å®¹å™¨å†…éƒ¨çš„ç³»ç»Ÿï¼Œä¿®æ”¹å®¹å™¨å†…å®¹</span></span><br><span class="line">docker <span class="built_in">exec</span> -it å®¹å™¨<span class="built_in">id</span> /bin/bash</span><br></pre></td></tr></table></figure>
<ul>
<li>æ³•2ï¼šæŒ‚è½½æ•°æ®åˆ°å¤–éƒ¨ä¿®æ”¹ï¼š(è¯·æ³¨æ„ï¼šæŒ‚è½½åœ¨å¤–éƒ¨çš„æ•°æ®æ˜¯æ²¡æ³•æäº¤æ”¹å˜çš„)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run --name=mynginx </span><br><span class="line">-d  --restart=always </span><br><span class="line">-p  88:80 </span><br><span class="line">-v /data/html:/usr/share/nginx/html:ro  <span class="comment"># å¤–éƒ¨æ•°æ®åœ°å€:å†…éƒ¨æ•°æ®åœ°å€ :roä»£è¡¨åªè¯»æ¨¡å¼ï¼Œå®¹å™¨å†…ä¸èƒ½ä¿®æ”¹</span></span><br><span class="line">nginx</span><br></pre></td></tr></table></figure>
<h5 id="æäº¤æ”¹å˜">4ï¼‰æäº¤æ”¹å˜ï¼š</h5>
<ul>
<li>å°†è‡ªå·±ä¿®æ”¹å¥½çš„è‡ªå®šä¹‰é•œåƒæäº¤,è¿™æ ·ä¼šåœ¨æœ¬åœ°äº§ç”Ÿä¸€ä¸ªæ–°çš„é•œåƒ</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># -a author -m message</span></span><br><span class="line">docker commit -a <span class="string">&quot;fantast&quot;</span> -m <span class="string">&quot;é¦–é¡µå˜åŒ–&quot;</span> 341d81f7504f slksnginx:v1.0</span><br></pre></td></tr></table></figure>
<ul>
<li>å°†é•œåƒæ–‡ä»¶æ‰“åŒ…å­˜å‚¨ï¼Œç„¶åä¼ è¾“ç»™å¦ä¸€å°ä¸»æœºï¼š</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ‰“åŒ…é•œåƒè‡³å‹ç¼©åŒ…</span></span><br><span class="line">docker save -o abc.tar fantastnginx:v1.0</span><br><span class="line"><span class="comment"># è¿œç¨‹ä¼ è¾“</span></span><br><span class="line">scp abc.tar root@128.12.33.12:/root/</span><br><span class="line"><span class="comment"># åŠ è½½dockeré•œåƒå‹ç¼©åŒ…</span></span><br><span class="line">docker load abc.tar</span><br></pre></td></tr></table></figure>
<ul>
<li>æ¨é€è‡³è¿œç¨‹ä»“åº“docker hub</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŠŠæ—§é•œåƒçš„åå­—ï¼Œæ”¹æˆä»“åº“è¦æ±‚çš„æ–°ç‰ˆåå­—</span></span><br><span class="line">docker tag fantastnginx:v1.0 fantast616/fantastnginx:v1.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç™»å½•åˆ°docker hub</span></span><br><span class="line">docker login       </span><br><span class="line"></span><br><span class="line">docker <span class="built_in">logout</span>ï¼ˆæ¨é€å®Œæˆé•œåƒåé€€å‡ºï¼‰</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨é€</span></span><br><span class="line">docker push fantast616/fantastnginx:v1.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ«çš„æœºå™¨ä¸‹è½½</span></span><br><span class="line">docker pull fantast616/fantastnginx:v1.0</span><br></pre></td></tr></table></figure>
<h5 id="å…¶ä»–å‘½ä»¤">5ï¼‰å…¶ä»–å‘½ä»¤ï¼š</h5>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># docker è¿è¡Œæ—¥å¿—</span></span><br><span class="line">docker logs å®¹å™¨å/id</span><br><span class="line"><span class="comment"># docker è¿›å…¥å†…éƒ¨BASHæ§åˆ¶å°</span></span><br><span class="line">docker <span class="built_in">exec</span> -it å®¹å™¨<span class="built_in">id</span> /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># docker ç»å¸¸ä¿®æ”¹nginxé…ç½®æ–‡ä»¶</span></span><br><span class="line">docker run -d -p 80:80 \</span><br><span class="line">-v /data/html:/usr/share/nginx/html:ro \</span><br><span class="line">-v /data/conf/nginx.conf:/etc/nginx/nginx.conf \</span><br><span class="line">--name mynginx-02 \</span><br><span class="line">nginx</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŠŠå®¹å™¨æŒ‡å®šä½ç½®çš„ä¸œè¥¿å¤åˆ¶å‡ºæ¥ </span></span><br><span class="line">docker <span class="built_in">cp</span> 5eff66eec7e1:/etc/nginx/nginx.conf  /data/conf/nginx.conf  </span><br><span class="line"><span class="comment">#æŠŠå¤–é¢çš„å†…å®¹å¤åˆ¶åˆ°å®¹å™¨é‡Œé¢</span></span><br><span class="line">docker <span class="built_in">cp</span>  /data/conf/nginx.conf  5eff66eec7e1:/etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure>
<h4 id="ç¼–å†™è‡ªå·±çš„åº”ç”¨å¹¶éƒ¨ç½²">5ã€ç¼–å†™è‡ªå·±çš„åº”ç”¨å¹¶éƒ¨ç½²ï¼š</h4>
]]></content>
      <categories>
        <category>â‘§ å·¥ç¨‹ç±»ç¬”è®°</category>
        <category>äº‘åŸç”Ÿå…¥é—¨</category>
      </categories>
      <tags>
        <tag>Cloud Native</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”µå­ä¿¡æ¯å·¥ç¨‹ä¸­æ•°å­¦æ¨¡å‹ä¸æ–¹æ³•â€”â€”å•å…ƒ2 ç³»ç»Ÿè¾¨è¯†</title>
    <url>/2022/10/12/f71a1b069441/</url>
    <content><![CDATA[<h2 id="ä¸€æ¨¡å‹æ™ºèƒ½">ä¸€ã€æ¨¡å‹æ™ºèƒ½</h2>
<h3 id="ä»€ä¹ˆæ˜¯æ™ºèƒ½">1ã€ä»€ä¹ˆæ˜¯æ™ºèƒ½ï¼Ÿ</h3>
<p>â€‹ æ™ºèƒ½æœ‰ä¸‰ä¸ªå±‚æ¬¡ï¼ˆæŸIBMç§‘å­¦å®¶ï¼‰ï¼šæ„ŸçŸ¥æ™ºèƒ½ï¼Œæ‰§è¡Œæ™ºèƒ½ï¼Œè®¤çŸ¥æ™ºèƒ½</p>
<ul>
<li>æ„ŸçŸ¥æ™ºèƒ½ï¼šæ„ŸçŸ¥ç¯å¢ƒçŠ¶æ€</li>
<li>æ‰§è¡Œæ™ºèƒ½ï¼šé‡‡å–è¡ŒåŠ¨</li>
<li>è®¤çŸ¥æ™ºèƒ½ï¼šå»ºæ¨¡ã€åˆ†æä¸å†³ç­–ï¼Œè®¤çŸ¥æ™ºèƒ½æ˜¯æœ€é«˜çº§æ™ºèƒ½</li>
</ul>
<p>è®¤çŸ¥æ™ºèƒ½æ˜¯åŠ¨ç‰©å’Œäººå»ºç«‹/æ”¹è¿›ç¯å¢ƒæ¨¡å‹ï¼ˆè§„å¾‹çš„è¡¨è¿°ï¼‰ï¼Œä½¿ç”¨æ¨¡å‹å¤„ç†ä¿¡æ¯å¹¶åšå‡ºé¢„æµ‹å’Œå†³ç­–çš„èƒ½åŠ›</p>
<ul>
<li><p>ç†æƒ³äººå·¥æ™ºèƒ½:
äººå·¥æ™ºèƒ½æ˜¯ç ”ç©¶æ¨¡æ‹Ÿå’Œæ‰©å±•åŠ¨ç‰©å’Œäººçš„æ™ºèƒ½çš„ç†è®ºå’Œæ–¹æ³•ï¼ŒåŒ…å«æ„ŸçŸ¥æ™ºèƒ½ã€æ‰§è¡Œæ™ºèƒ½å’Œè®¤çŸ¥æ™ºèƒ½ã€‚</p></li>
<li><p>å½“å‰äººå·¥æ™ºèƒ½ï¼šç°åœ¨çš„æ‰€è°“äººå·¥æ™ºèƒ½å¤§éƒ½æ˜¯å¼€å‘åŸºäºå›¾åƒå’Œå£°éŸ³çš„æ„ŸçŸ¥æŠ€æœ¯ã€‚æ‰€ä»¥å½“å‰çš„äººå·¥æ™ºèƒ½è¿˜åœ¨æ„ŸçŸ¥æ™ºèƒ½çš„å±‚æ¬¡</p></li>
</ul>
<p>ä¸‹å›¾ä¸ºè‡ªåŠ¨æ§åˆ¶æµç¨‹ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220923163300371.png" style="zoom:67%;" /></p>
<ul>
<li><strong>ä¸€ä¸ªç³»ç»Ÿçš„æœ€ä¼˜æ§åˆ¶å™¨ä¸€å®šæ˜¯è¯¥ç³»ç»Ÿçš„æ•°å­¦æ¨¡å‹!</strong></li>
</ul>
<h3 id="åŸºäºæ™ºèƒ½å»ºæ¨¡çš„æ™ºèƒ½å»ºé€ æŠ€æœ¯">2ã€åŸºäºæ™ºèƒ½å»ºæ¨¡çš„æ™ºèƒ½å»ºé€ æŠ€æœ¯ï¼š</h3>
<ul>
<li><p>æµç¨‹å·¥ä¸šåŒ…æ‹¬çŸ³åŒ–ã€åŒ–å·¥ã€å‘ç”µã€é’¢é“ã€æ°´æ³¥ã€é€ çº¸ã€é‡‡çŸ¿ç­‰ï¼Œæ˜¯å›½æ°‘ç»æµçš„åŸºç¡€</p></li>
<li><p>å‚¬ç”Ÿä¸€ä¸ªå·¨å¤§çš„æµç¨‹å·¥ä¸šæ™ºèƒ½åˆ¶é€ å¸‚åœºï¼Œåœ¨æµç¨‹å·¥ä¸šå®ç°å…¨é¢è‡ªåŠ¨åŒ–ç”Ÿäº§ï¼Œå³æ™ºèƒ½åˆ¶é€ ï¼Œå¯ä»¥èŠ‚èƒ½1%
-10%ï¼Œæé«˜æ”¶ç›Š0.1% - 2%ï¼Œå‡å°‘æ±¡æŸ“ç‰©ç”Ÿæˆ5% - 50%</p></li>
</ul>
<p>è®¡åˆ’è°ƒåº¦ã€è¯Šæ–­ç›‘æ§ã€å®æ—¶ä¼˜åŒ–ã€æ¨¡å‹é¢„æµ‹æ§åˆ¶ã€å¸¸è§„PIDæ§åˆ¶ã€è®¾å¤‡ä»ªè¡¨åŠDCSç³»ç»Ÿ</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220923163633152.png" /></p>
<p><strong>è¿‡ç¨‹æ¨¡å‹çš„å»ºç«‹/ç»´æŠ¤ï¼Œæ˜¯å®ç°æ¯ä¸€å±‚è‡ªåŠ¨/é—­ç¯çš„å…³é”®</strong></p>
<p><strong>æ¨¡å‹æ™ºèƒ½ï¼š</strong>æ¨¡å‹æ™ºèƒ½æ˜¯ä¸€ä¸ªè®¡ç®—æœºç®—æ³•ï¼ˆè½¯ä»¶ï¼‰ï¼Œå¯¹äºä¸€ç±»ç»™å®šè¿‡ç¨‹ï¼Œå¯ä»¥å¯¹å…¶è‡ªåŠ¨å»ºæ¨¡ã€è‡ªåŠ¨ç»´æŠ¤æ¨¡å‹ã€å¹¶è‡ªåŠ¨ä½¿ç”¨æ¨¡å‹è¿›è¡Œé¢„æµ‹ã€æ§åˆ¶ã€ä¼˜åŒ–åŠè¯Šæ–­</p>
<h4 id="ç³»ç»Ÿè¾¨è¯†çš„æ¸è¿›æ³•">1ï¼‰ç³»ç»Ÿè¾¨è¯†çš„æ¸è¿›æ³•ï¼š</h4>
<ul>
<li>å¤šå˜é‡ã€é—­ç¯ã€è‡ªåŠ¨ç³»ç»Ÿè¾¨è¯†ï¼ˆå»ºæ¨¡ï¼‰æŠ€æœ¯
<ul>
<li>â€¢ è‡ªåŠ¨æœ€ä¼˜æ¿€åŠ±ä¿¡å·è®¾è®¡ï¼Œå¤šå˜é‡ã€é—­ç¯ã€è‡ªåŠ¨æµ‹è¯•</li>
<li>â€¢ è‡ªåŠ¨ç¡®å®šæ¨¡å‹é˜¶æ¬¡</li>
<li>â€¢ è‡ªåŠ¨æ¨¡å‹å‚æ•°ä¼°è®¡ï¼ˆè®¡ç®—ï¼‰</li>
<li>â€¢ è‡ªåŠ¨æ¨¡å‹æ£€éªŒï¼Œç»™å‡ºæ¯ä¸ªæ¨¡å‹A, B, C, Dè¯„çº§</li>
</ul></li>
</ul>
<h4 id="pidé—­ç¯å‚æ•°æ•´å®š">2ï¼‰PIDé—­ç¯å‚æ•°æ•´å®š</h4>
<p>â€‹
PIDæ§åˆ¶å™¨ä»¥å…¶ç»“æ„ç®€å•ã€ç¨³å®šæ€§å¥½ã€è°ƒæ•´æ–¹ä¾¿è€Œæˆä¸ºåº”ç”¨æœ€å¹¿æ³›çš„ä¸€ç±»å·¥ä¸šæ§åˆ¶å™¨ã€‚</p>
<ul>
<li>é—®é¢˜æ ¸å¿ƒï¼šPIDæ§åˆ¶å™¨å‚æ•°æ•´å®šå›°éš¾</li>
<li>å‚æ•°æ•´å®šæ–¹æ³•ï¼š</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220923164457568.png" style="zoom:67%;" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220923164619424.png" /></p>
<h4 id="æ¨¡å‹é¢„æµ‹æ§åˆ¶">3ï¼‰æ¨¡å‹é¢„æµ‹æ§åˆ¶ï¼š</h4>
<p>â€‹
æ¨¡å‹é¢„æµ‹æ§åˆ¶ï¼šæ˜¯æŒ‡åˆ©ç”¨å¯¹è±¡çš„å†å²ä¿¡æ¯å’Œæ¨¡å‹ä¿¡æ¯ï¼Œé€šè¿‡åœ¨æœªæ¥æ—¶æ®µä¸Šä¼˜åŒ–è¿‡ç¨‹è¾“å‡ºæ¥è®¡ç®—æœ€ä½³è¾“å…¥åºåˆ—çš„ä¸€ç±»ç®—æ³•ã€‚</p>
<p>â€‹ <strong>å…³é”®ç¯èŠ‚ï¼š</strong>é¢„æµ‹æ¨¡å‹ã€æ»šåŠ¨ä¼˜åŒ–ã€åé¦ˆæ ¡æ­£</p>
<p>â€‹ å‡å°‘æ³¢åŠ¨ä»¥åå°±å¯ä»¥å¡è¾¹æ“ä½œ</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220923164911006.png" style="zoom:67%;" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220923165006259.png" /></p>
<h4 id="æ€»ç»“">3ã€æ€»ç»“ï¼š</h4>
<ul>
<li>åŠ¨æ€æ¨¡å‹æ˜¯æ™ºèƒ½åˆ¶é€ çš„å…³é”®ï¼Œæ¨¡å‹æ‰æ˜¯æ™ºèƒ½</li>
<li>å›¢é˜Ÿç»è¿‡å¤šå¹´ç ”å‘ï¼Œæµç¨‹å·¥ä¸šç³»ç»Ÿçš„æ™ºèƒ½å»ºæ¨¡ã€æ§åˆ¶åŠä¼˜åŒ–æŠ€æœ¯å·²æˆç†Ÿï¼ŒåŒ…æ‹¬:
(1) åŸºç¡€æ§åˆ¶å±‚; (2) å…ˆè¿›æ§åˆ¶å±‚; (3) å®æ—¶ä¼˜åŒ–å±‚</li>
<li>å¯åœ¨å„æµç¨‹å·¥ä¸šæ™®åŠåº”ç”¨ï¼ŒèŠ‚èƒ½å‡æ’ã€æé«˜æ”¶ç›Š</li>
</ul>
<h2
id="äºŒç³»ç»Ÿè¾¨è¯†åŠ¨æ€æ•°æ®å»ºæ¨¡çš„ç†è®ºå’Œæ–¹æ³•">äºŒã€ç³»ç»Ÿè¾¨è¯†â€”â€”åŠ¨æ€æ•°æ®å»ºæ¨¡çš„ç†è®ºå’Œæ–¹æ³•ï¼š</h2>
<h3
id="ç³»ç»Ÿè¾¨è¯†ä»‹ç»ç³»ç»Ÿè¾¨è¯†çš„å…³é”®æ­¥éª¤">1ã€ç³»ç»Ÿè¾¨è¯†ä»‹ç»ï¼ˆç³»ç»Ÿè¾¨è¯†çš„å…³é”®æ­¥éª¤ï¼‰</h3>
<ul>
<li><p>ç³»ç»Ÿ Systemï¼š
ç³»ç»Ÿæ˜¯ä»¥æœ‰åºå½¢å¼æ’åˆ—çš„å¯¹è±¡çš„é›†åˆï¼Œç”¨äºæŸç§ç›®çš„</p></li>
<li><p>è¿‡ç¨‹ Process:
è¿‡ç¨‹æ˜¯ç”¨äºåœ¨æµç¨‹å·¥ä¸šä¸­åˆ¶é€ å‡è´¨ææ–™æˆ–èƒ½æºäº§å“çš„åŠ å·¥å‚ã€‚
åŠ å·¥å·¥ä¸šåŒ…æ‹¬ï¼šçŸ³æ²¹ã€åŒ–å·¥ã€ç”µåŠ›ã€é€ çº¸ã€ç»ç’ƒã€é‡‡çŸ¿ã€é‡‘å±ã€æ°´æ³¥ã€è¯å“ã€é£Ÿå“</p></li>
<li><p>æ¨¡å‹ Model:
æ¨¡å‹æ˜¯ä¸€ä¸ªç³»ç»Ÿï¼ˆè¿‡ç¨‹ï¼‰åŸºæœ¬æ–¹é¢çš„è¡¨ç¤ºï¼Œè¡¨ç¤ºè¯¥ç³»ç»Ÿçš„çŸ¥è¯†</p></li>
<li><p>æ•°å­¦æ¨¡å‹ Mathematical Models:
ç”¨å¾®åˆ†æ–¹ç¨‹å’Œä»£æ•°æ–¹ç¨‹æè¿°ç³»ç»Ÿå˜é‡ä¹‹é—´çš„å…³ç³»ã€‚å·¥ç¨‹é¢†åŸŸçš„ä¸»è¦éƒ¨åˆ†æ¶‰åŠä½¿ç”¨æ•°å­¦æ¨¡å‹è¿›è¡Œè®¾è®¡ã€æ¨¡æ‹Ÿã€é¢„æµ‹å’Œæ§åˆ¶/ä¼˜åŒ–ã€‚</p></li>
<li><p>ç³»ç»Ÿè¾¨è¯†ï¼šç³»ç»Ÿæˆ–è¿‡ç¨‹è¯†åˆ«æ˜¯ä½¿ç”¨æµ‹è¯•æ•°æ®å¯¹ç³»ç»Ÿï¼ˆè¿‡ç¨‹ï¼‰è¿›è¡Œæ•°å­¦å»ºæ¨¡çš„é¢†åŸŸã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼ŒZadehï¼ˆ1962ï¼‰å°†ç³»ç»Ÿè¯†åˆ«å®šä¹‰ä¸ºï¼šåœ¨è¾“å…¥å’Œè¾“å‡ºçš„åŸºç¡€ä¸Šï¼Œç¡®å®šç‰¹å®šç±»åˆ«ç³»ç»Ÿï¼ˆæ¨¡å‹ï¼‰å†…çš„ç³»ç»Ÿæ¨¡å‹ã€‚</p></li>
<li><p><strong>ç³»ç»Ÿè¾¨è¯†çš„è¿‡ç¨‹</strong></p></li>
</ul>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220923173506705.png"
alt="image-20220923173506705" />
<figcaption aria-hidden="true">image-20220923173506705</figcaption>
</figure>
<p><strong>ç³»ç»Ÿè¾¨è¯†çš„å…³é”®æ­¥éª¤</strong>ï¼š</p>
<p>1ï¼‰è¯†åˆ«æµ‹è¯•ï¼Œè¾¨è¯†å®éªŒçš„è®¾è®¡ Identification tests/experiments
ï¼šç”Ÿæˆä¿¡æ¯ï¼Œè¾“å…¥è¾“å‡ºæ•°æ®</p>
<p>2ï¼‰æ¨¡å‹ç»“æ„é€‰æ‹© Model order/structure selection
ï¼šçº¿æ€§æˆ–éçº¿æ€§ï¼Œä»€ä¹ˆç»“æ„ï¼ˆMIMOï¼‰ï¼Œä»€ä¹ˆé¡ºåºï¼Ÿ</p>
<p>3ï¼‰å‚æ•°ä¼°è®¡Parameter estimation ï¼šä½¿ç”¨ä¸€äº›ä¼˜åŒ–æŠ€æœ¯ç¡®å®šæ¨¡å‹å‚æ•°ã€‚</p>
<p>4ï¼‰ æ¨¡å‹éªŒè¯Model validation:
ï¼šæ£€æŸ¥è·å¾—çš„æ¨¡å‹æ˜¯å¦è¶³å¤Ÿå¥½ï¼Œæ˜¯å¦èƒ½å¤Ÿä½¿ç”¨ï¼ˆç›®çš„ï¼‰ï¼Œå¦‚æœä¸å¤Ÿï¼Œç»™å‡ºè¡¥æ•‘æ–¹æ³•ã€‚</p>
<h3 id="åŠ¨æ€ç³»ç»Ÿå’Œä¿¡å·çš„æ¨¡å‹">2ã€åŠ¨æ€ç³»ç»Ÿå’Œä¿¡å·çš„æ¨¡å‹ï¼š</h3>
<h4
id="å•è¾“å…¥å•è¾“å‡ºè¿ç»­æ—¶é—´æ¨¡å‹siso-continuous-time-models">1ï¼‰å•è¾“å…¥å•è¾“å‡ºè¿ç»­æ—¶é—´æ¨¡å‹ï¼šSISO
Continuous-Time Models</h4>
<p>â€‹ æœ€å¸¸ç”¨çš„æ˜¯<strong>å¾®åˆ†æ–¹ç¨‹</strong>å’Œ<strong>ä¼ é€’å‡½æ•°</strong>ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927194052145.png" /></p>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927194102312.png" /></p>
<p>è¿˜å¯ä»¥ç”¨<strong>è„‰å†²å“åº”æ¨¡å‹</strong>è¿›è¡Œæè¿°ï¼š<strong>å¼•å…¥å»¶è¿Ÿç®—å­</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927194118895.png" /></p>
<h4 id="å•è¾“å…¥å•è¾“å‡ºç¦»æ•£æ—¶é—´æ¨¡å‹">2ï¼‰å•è¾“å…¥å•è¾“å‡ºç¦»æ•£æ—¶é—´æ¨¡å‹ï¼š</h4>
<p>ä¸€ä¸ªä½¿ç”¨ä¿æŒç”µè·¯çš„è®¡ç®—æœºæ§åˆ¶ç³»ç»Ÿé‡‡æ ·è¿‡ç¨‹</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927194329943.png" /></p>
<ul>
<li><p>Zero-Order Hold å³é›¶é˜¶ä¿æŒå™¨ï¼Œåªæœ‰ä¸€ä¸ªè®¾ç½®<a
href="https://so.csdn.net/so/search?q=é‡‡æ ·&amp;spm=1001.2101.3001.7020">é‡‡æ ·</a>æ—¶é—´çš„å‚æ•°ï¼Œè¡¨ç¤ºçš„æ˜¯ä»¥é‡‡æ ·æ—¶é—´é—´éš”è¿›è¡Œæ•°æ®çš„é‡‡é›†ï¼›</p></li>
<li><p>Unit Delayå³å•ä½å»¶è¿Ÿæ¨¡å—ï¼Œæœ‰ä¸¤ä¸ªè¾“å…¥å‚æ•°ï¼Œç±»ä¼¼äº<a
href="https://so.csdn.net/so/search?q=å¯„å­˜å™¨&amp;spm=1001.2101.3001.7020">å¯„å­˜å™¨</a>ï¼Œç¬¬ä¸€ä¸ªæ˜¯è®¾ç½®åˆå§‹å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯é‡‡æ ·æ—¶é—´ã€‚</p></li>
<li><p>Zero-Order Holdæ¨¡å—æ˜¯ä»¥å½“å‰æ—¶é—´ç‚¹ä»¥åçš„å€¼ä¸ºå‡†ï¼Œè€ŒUnit
Delayæ˜¯ä»¥å½“å‰æ—¶é—´ä¹‹å‰çš„å€¼ä¸ºå‡†ã€‚</p></li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927221208577.png" style="zoom:67%;" /></p>
<ul>
<li>åœ¨<strong>ç¦»æ•£æ—¶é—´æ¨¡å‹ä¸­</strong>å¼•å…¥å»¶è¿Ÿç®—å­å°±èƒ½å¾—åˆ°ç›¸åº”çš„ç¦»æ•£ä¼ é€’å‡½æ•°ï¼š</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927221358771.png" style="zoom:50%;" /></p>
<ul>
<li><p>å¯¹ä¸€ä¸ªné˜¶çš„å·®åˆ†æ–¹ç¨‹ä½¿ç”¨0é˜¶ä¿æŒå™¨ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927221507779.png" style="zoom:67%;" /></p></li>
</ul>
<h4 id="ä¿¡å·çš„å‡ ç§æ¨¡å‹æè¿°æ–¹å¼">3ï¼‰ä¿¡å·çš„å‡ ç§æ¨¡å‹æè¿°æ–¹å¼</h4>
<h5 id="é¢‘åŸŸæ¡†æ¶æœ‰é™åºåˆ—çš„ä¿¡å·çš„å‘¨æœŸå›¾">-
é¢‘åŸŸæ¡†æ¶ï¼šæœ‰é™åºåˆ—çš„ä¿¡å·çš„å‘¨æœŸå›¾ï¼š</h5>
<ul>
<li>é€šè¿‡å‚…é‡Œå¶å˜åŒ–ï¼šå¯ä»¥å¾—åˆ°ä¿¡å·çš„å‘¨æœŸå›¾</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927221626122.png" style="zoom:50%;" /></p>
<ul>
<li><p><strong>ä¿¡å·çš„å‘¨æœŸå›¾ï¼šperiodogram</strong> â€”â€”
åæ˜ äº†ä¿¡å·åœ¨å„ä¸ªé¢‘åŸŸç‚¹ä¸Šèƒ½é‡è´¡çŒ®çš„å¤§å°</p></li>
<li><p>Parsevalsæ’ç­‰å¼ï¼š å·¦ä¾§æ˜¯æ—¶é—´åŸŸï¼Œå³ä¾§æ˜¯é¢‘åŸŸ</p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927221815400.png" /></p>
<p>â€‹ ä¿¡å·åœ¨æ—¶é—´åŸŸå†…æ‹¥æœ‰çš„æ€»èƒ½é‡ç­‰äºå…¶åœ¨é¢‘åŸŸå†…å„ä¸ªé¢‘ç‡çš„èƒ½é‡çš„æ€»å’Œ</p>
<h5 id="æ¦‚ç‡æ¡†æ¶ä¿¡å·åŠŸç‡è°±-signal-spectra">- æ¦‚ç‡æ¡†æ¶ï¼šä¿¡å·åŠŸç‡è°± signal
spectra</h5>
<ul>
<li><p>éšæœºè¿‡ç¨‹ï¼šä¸€ç»„ä¿¡å·ï¼Œåœ¨æ¯ä¸ªæ—¶åˆ»éƒ½æ˜¯ä¸€ä¸ªéšæœºå˜é‡ã€‚</p></li>
<li><p>å¹³ç¨³éšæœºè¿‡ç¨‹ï¼šè¿™ä¸ªéšæœºè¿‡ç¨‹ï¼Œå…¶å‡å€¼å±æ€§ä¸éšæ—¶é—´å˜åŒ–</p></li>
<li><p>è‡ªç›¸å…³å‡½æ•°å’ŒåŠŸç‡è°±</p></li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927222142483.png" style="zoom:50%;" /></p>
<ul>
<li>ç»™å®šä¸¤ä¸ªå¹³ç¨³éšæœºè¿‡ç¨‹v(t)
s(t)ï¼šäº’ç›¸å…³å‡½æ•°ï¼Œå’Œäº’åŠŸç‡è°±ï¼ˆæ˜¯äº’ç›¸å…³å‡½æ•°çš„å‚…é‡Œå¶å˜æ¢ï¼‰ï¼š</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927222301599.png" style="zoom: 50%;" /></p>
<ul>
<li>å¦‚æœç»™å®šä¸€ä¸ªéšæœºè¿‡ç¨‹çš„å®ç°v(t),å¯ä»¥ç”¨æ—¶é—´ç®—å­ä»£æ›¿æ•°å­¦æœŸæœ›å¯ä»¥ä¼°è®¡è‡ªç›¸å…³å‡½æ•°ï¼Œä»è€Œä¼°è®¡åŠŸç‡è°±</li>
</ul>
<p>ä½†è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹æ˜¯æœ‰ä¸€ä¸ªå‡è®¾çš„ï¼Œè¿™ä¸ªå‡è®¾å°±æ˜¯ Ergodic
processï¼ˆä¸ªæ€éå†ï¼‰ä¹Ÿå°±æ˜¯ï¼šå½“Nè¶‹äºæ­£æ— ç©·ï¼Œæ—¶é—´å¹³å‡å€¼è¶‹äºæ•´ä½“å¹³å‡</p>
<h5 id="ç™½å™ªå£°ä¿¡å·white-noise-process">- ç™½å™ªå£°ä¿¡å·White noise
process:</h5>
<p>â€‹ é›¶å‡å€¼å’Œæ–¹å·® R çš„ç‹¬ç«‹åŒåˆ†å¸ƒéšæœºå˜é‡åºåˆ—ã€‚</p>
<p>â€‹
<strong>ç‰¹ç‚¹</strong>ï¼šç™½å™ªå£°æ²¡æœ‰è®°å¿†ï¼Œtæ—¶é—´çš„ä¿¡å·å€¼å’Œtæ—¶é—´å‰çš„å€¼å®Œå…¨æ— å…³ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥å¯¼å‡ºä¸‹å›¾ä¸­è¯´çš„é‡è¦è§„åˆ™ï¼š</p>
<p><strong>æ¯ä¸ªå¹³ç¨³éšæœºè¿‡ç¨‹ {v(t)}
éƒ½å¯ä»¥é€šè¿‡ç¨³å®šçš„æœ€å°ç›¸ä½æ»¤æ³¢å™¨å¯¹ç™½å™ªå£°æ»¤æ³¢æ¥ç”Ÿæˆ</strong></p>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927222909082.png" /></p>
<h3 id="æœ‰æ‰°åŠ¨æƒ…å†µä¸‹çš„çº¿æ€§è¿‡ç¨‹æè¿°">3ã€æœ‰æ‰°åŠ¨æƒ…å†µä¸‹çš„çº¿æ€§è¿‡ç¨‹æè¿°ï¼š</h3>
<p>â€‹
å‡è®¾v(t)æ˜¯ç¨³å®šéšå³è¿‡ç¨‹ï¼Œåˆ©ç”¨ä¸Šè¿°çš„ç»“è®ºï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹è¿°è¿™ä¸ªå½¢å¼æ¥è¡¨ç¤ºæœ‰æ‰°åŠ¨æƒ…å†µä¸‹çš„çº¿æ€§è¿‡ç¨‹çš„æè¿°ã€‚ä¹‹åå…³é”®å°±æ˜¯åœ¨è¿™ä¸ªæ¨¡å‹ä¸‹è¿›è¡Œåˆ©ç”¨å®éªŒæ•°æ®ä¼°è®¡G(q)å’ŒH(q)</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927223152305.png" style="zoom:50%;" /></p>
<h2 id="ä¸‰ç³»ç»Ÿè¾¨è¯†è¾¨è¯†å®éªŒè®¾è®¡">ä¸‰ã€ç³»ç»Ÿè¾¨è¯†â€”â€”è¾¨è¯†å®éªŒè®¾è®¡</h2>
<h3 id="è¾¨è¯†å®éªŒidentification-testçš„å¿…è¦æ€§">1ã€è¾¨è¯†å®éªŒIdentification
Testçš„å¿…è¦æ€§</h3>
<ul>
<li>è¾¨è¯†å®éªŒï¼ˆæ§åˆ¶ï¼‰çš„ç›®çš„æ˜¯æ¿€å‘å’Œæ”¶é›†ï¼ˆæ§åˆ¶ï¼‰ç›¸å…³ä¿¡æ¯ã€‚</li>
<li>æµ‹è¯•æœŸé—´ä½¿ç”¨æµ‹è¯•ä¿¡å·/æ¿€åŠ±ã€‚</li>
<li>è¾¨è¯†å®éªŒæ˜¯ä¸€ç§æˆæœ¬ï¼Œä½†ä¸è¦å¹²æ‰°æ­£å¸¸ç”Ÿäº§ã€‚</li>
<li>è‰¯å¥½çš„è¾¨è¯†å®éªŒæ˜¯æˆåŠŸè¯†åˆ«/æ§åˆ¶çš„å…³é”®ã€‚</li>
<li>æ²¡æœ‰è‰¯å¥½çš„è¾¨è¯†å®éªŒå°±æ˜¯æ•°æ®è¾“å…¥åƒåœ¾è¾“å‡ºã€‚</li>
</ul>
<p><strong>è¾¨è¯†å®éªŒæ˜¯æœ‰ä»£ä»·çš„</strong>ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927223723009.png" style="zoom:50%;" /></p>
<h3 id="preliminary-tests-é¢„æµ‹è¯•">2ã€Preliminary Tests é¢„æµ‹è¯•</h3>
<p>ç›®çš„æ˜¯ä¸ºäº†è·å¾—å…ˆéªŒçŸ¥è¯†</p>
<h4 id="æ”¶é›†å†å²æ•°æ®collect-historic-data-p3">1ï¼‰æ”¶é›†å†å²æ•°æ®Collect
historic data P3</h4>
<p><strong>ä¸€èˆ¬æ¥è¯´ï¼Œå†å²æ•°æ®å¯¹äºæ¨¡å‹æ¥è¯´ä¸å¤Ÿä¸°å¯Œï¼Œæˆ–è€…æ¢å¥è¯è¯´ï¼Œä¿¡å™ªæ¯”å¤ªä½ï¼ˆä¾‹å¦‚90ï¼…çš„å™ªå£°ï¼Œ10ï¼…çš„ä¿¡å·ï¼‰</strong></p>
<ul>
<li>è·å¾—è¿‡ç¨‹çš„ç¬¬ä¸€å°è±¡ã€‚</li>
<li>è¿‡ç¨‹çš„è¾“å‡º (CV) ä»£è¡¨æœªæµ‹é‡çš„å¹²æ‰°ã€‚</li>
<li>MV çš„åŠ¨ä½œä»£è¡¨æ“ä½œå‘˜çš„æ§åˆ¶ã€‚</li>
<li>ç®€å•åˆä¾¿å®œã€‚ æ•°æ®åº“å¯ç”¨äºå¤§å¤šæ•°æµç¨‹ã€‚</li>
<li>ä¸æ“ä½œè€…äº¤è°ˆå¹¶å‘ä»–ä»¬å­¦ä¹ ã€‚</li>
</ul>
<h4 id="é˜¶è·ƒå®éªŒshort-step-test-p4">2ï¼‰é˜¶è·ƒå®éªŒShort step test P4</h4>
<ul>
<li>å°†æ¯ä¸ªæ“ä½œå˜é‡ä¸Šä¸‹æ“ä½œä¸€äº›æ¬¡æ•°</li>
<li>æ£€æŸ¥ä¸»è¦æ—¶é—´å¸¸æ•°ã€å¢ç›Šå’Œå»¶è¿Ÿ</li>
<li>æ£€æŸ¥å¹¶è°ƒæ•´ MV PID å›è·¯ã€‚</li>
<li>æ§åˆ¶å·¥ç¨‹å¸ˆå¯ä»¥é€šè¿‡è§‚å¯Ÿè¿‡ç¨‹é˜¶è·ƒå“åº”ç›´è§‚åœ°äº†è§£è¿‡ç¨‹åŠ¨æ€ã€‚</li>
<li>ä½æˆæœ¬æµ‹è¯•ã€‚</li>
</ul>
<h4
id="é˜¶æ¢¯å®éªŒäº†è§£å¯¹è±¡çš„éçº¿æ€§ç¨‹åº¦">3ï¼‰é˜¶æ¢¯å®éªŒï¼šäº†è§£å¯¹è±¡çš„éçº¿æ€§ç¨‹åº¦</h4>
<ul>
<li>å°†é˜¶æ¢¯ä¿¡å·åº”ç”¨äºæŸäº› MVã€‚</li>
<li>ç›®çš„æ˜¯æ£€æŸ¥éçº¿æ€§ã€‚</li>
<li>é«˜æˆæœ¬æµ‹è¯•ï¼Œé€šå¸¸ä¸å…è®¸</li>
</ul>
<h3 id="ç³»ç»Ÿè¾¨è¯†ä¸­å¸¸è§çš„å®éªŒä¿¡å·">3ã€ç³»ç»Ÿè¾¨è¯†ä¸­å¸¸è§çš„å®éªŒä¿¡å·</h3>
<p>å®éªŒä¿¡å·æœ‰ä¸¤ä¸ªæ–¹é¢çš„å› ç´ éœ€è¦è€ƒè™‘ï¼šä¿¡å·æ³¢å½¢å’Œé¢‘è°±çš„è¦æ±‚ wave form and
frequency content</p>
<ul>
<li>ä¿¡å·æ³¢å½¢ï¼ˆæ—¶åŸŸï¼‰è¦æ±‚ï¼š -
<ul>
<li>åœ¨æ­£å¸¸æ“ä½œä¸­ä¸ä¼šå¼•èµ·å¹²æ‰°ï¼ˆæ¯”è¾ƒè„‰å†²å’Œé˜¶è·ƒï¼‰ã€‚</li>
<li>ä¸æ¿€å‘è¿‡ç¨‹éçº¿æ€§ï¼ˆæ¯”è¾ƒè„‰å†²å’Œæ­¥éª¤ï¼‰ã€‚</li>
<li>æ“ä½œå‘˜å‹å¥½ï¼ˆæ¯”è¾ƒè„‰å†²å’Œé˜¶è·ƒï¼‰ã€‚</li>
</ul></li>
<li>ä¿¡å·é¢‘ç‡æˆåˆ†ï¼ˆåŠŸç‡è°±ï¼‰è®¾è®¡ï¼š
<ul>
<li>æµ‹è¯•ä¿¡å·çš„åŠŸç‡è°±ä¼šå½±å“æ§åˆ¶æ€§èƒ½ã€‚</li>
<li>ç”¨äºæ§åˆ¶ç›®çš„çš„æœ€ä½³é¢‘è°±è®¾è®¡ã€‚</li>
</ul></li>
</ul>
<h4 id="prbs-äºŒè¿›åˆ¶ä¼ªéšæœºä¿¡å·">1ï¼‰PRBS äºŒè¿›åˆ¶ä¼ªéšæœºä¿¡å·ï¼š</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927224849434.png" /></p>
<ul>
<li><p>Clockæ˜¯æ—¶é’Ÿè„‰å†²</p></li>
<li><p>Stateæ˜¯ç§»ä½å¯„å­˜å™¨</p></li>
<li><p>ç§»ä½å¯„å­˜å™¨äº§ç”Ÿçš„åºåˆ—ï¼Œæœ€å¤§çš„å‘¨æœŸä¸º M å³ 2^n-1 ç§°ä¸ºMåºåˆ—</p></li>
<li><p>ç»Ÿè®¡ç‰¹æ€§ï¼šï¼ˆå‡å€¼ã€è‡ªç›¸å…³å‡½æ•°ã€é¢‘è°±å›¾ï¼‰</p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927225042867.png" /></p>
<p>â€‹
è¯¥å®éªŒä¿¡å·æ¨¡å‹å¯ä»¥å¾ˆå¥½çš„æ¨¡æ‹Ÿä¸€ä¸ªç™½å™ªå£°ä¿¡å·ï¼Œä½†æ˜¯è¿™ç§ä¿¡å·åˆ‡æ¢é¢‘ç‡å¤ªå¿«ï¼Œå¯¹å·¥ä¸šçš„è£…ç½®å½±å“å¤ªå¤§ã€‚åŒæ—¶å…¶å¯¹äºä¸­ä½é¢‘ä¿¡å·ä¸å‹å¥½ï¼Œæ¯”è¾ƒåé‡äºé«˜é¢‘ã€‚è€Œç³»ç»Ÿè¾¨è¯†éœ€è¦ä¸­ä½é¢‘ä¿¡å·</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927225345044.png" style="zoom:67%;" /></p>
<p>â€‹ æ‰€ä»¥éœ€è¦è°ƒæ•´æˆ‘ä»¬çš„PRBSæ¥äº§ç”Ÿä½é€šç‰¹æ€§çš„PRBSä¿¡å·ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927225321648.png" style="zoom:67%;" /></p>
<h4 id="gbngeneralized-binary-noise-å¹¿ä¹‰äºŒå€¼åŒ–ä¿¡å·">2ï¼‰GBN(generalized
binary noise) å¹¿ä¹‰äºŒå€¼åŒ–ä¿¡å·</h4>
<p>â€‹ ä¿¡å·ç¿»è½¬çš„æ¦‚ç‡ï¼ŒæŒ‰ç…§å¦‚ä¸‹å›¾ï¼šGeneration ruleè¿›è¡Œä¿¡å·çš„ç”Ÿæˆï¼š</p>
<p>â€‹ pswä¸ºåˆ‡æ¢æ¦‚ç‡</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927225457178.png" /></p>
<p>â€‹
<strong>é€šè¿‡é™ä½åˆ‡æ¢æ¦‚ç‡ï¼Œå¢åŠ åˆ‡æ¢æ—¶é—´æ¥è·å¾—ä½é€šçš„ä¿¡å·ï¼Œæ¥è¿›è¡Œè¾¨è¯†ä¿¡å·å®éªŒã€‚</strong></p>
<h4 id="pbrså’Œgbnå¯¹æ¯”">3ï¼‰PBRSå’ŒGBNå¯¹æ¯”ï¼š</h4>
<ul>
<li>ç›¸æ¯”äºPRBSæ¥è¯´ï¼ŒPRBSåœ¨ä¸€äº›ç‰¹æ®Šçš„2piçš„ç‚¹ç­‰äº0ï¼Œä¸æ¥è¿‘å®é™…ï¼Œè€ŒGBNä¸ä¼šã€‚åŒæ—¶ï¼ŒPRBSæœ‰æœ€é•¿å‘¨æœŸï¼Œè€ŒGBNæ²¡æœ‰ï¼Œå¯ä»¥éšæ„é€‰æ‹©</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927225706274.png" /></p>
<h4
id="æŒç»­æ¿€åŠ±çš„æµ‹è¯•ä¿¡å·persistent-excitation-of-a-test-signal">4ï¼‰æŒç»­æ¿€åŠ±çš„æµ‹è¯•ä¿¡å·ï¼šPersistent
excitation of a test signal</h4>
<ul>
<li>Né˜¶çš„æŒç»­æ¿€åŠ±ä¿¡å·ï¼šéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927225916291.png" style="zoom:50%;" /></p>
<ul>
<li>Né˜¶æŒç»­æ¿€åŠ±çš„é¢‘åŸŸè§£é‡Šï¼šné˜¶æŒç»­æ¿€åŠ±çš„é¢‘åŸŸè§£é‡Šæ˜¯ä¿¡å·çš„é¢‘è°±åœ¨åŒºé—´ï¼ˆ-pi,piï¼‰å†…è‡³å°‘nä¸ªé¢‘ç‡ä¸­ä¸ä¸ºé›¶</li>
<li>PRBSå’ŒGBNä¿¡å·çš„åŒºåˆ«ï¼š</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927230015132.png" /></p>
<h3 id="æ¨¡å‹è¾¨è¯†çš„æµ‹è¯•æœ€ç»ˆæµ‹è¯•">4ã€æ¨¡å‹è¾¨è¯†çš„æµ‹è¯•ï¼Œæœ€ç»ˆæµ‹è¯•</h3>
<h4 id="mpcæ§åˆ¶çš„æµ‹è¯•è®¾è®¡">1ï¼‰ MPCæ§åˆ¶çš„æµ‹è¯•è®¾è®¡</h4>
<ul>
<li>æµ‹è¯•æ—¶é—´ï¼š
<ul>
<li>å°ç³»ç»Ÿæˆ–ä½å™ªéŸ³ï¼šï¼ˆ6~10ï¼‰*ï¼ˆç¨³å®šæ—¶é—´ settling timeï¼‰</li>
<li>å¤§å‹ç³»ç»Ÿæˆ–é«˜å™ªéŸ³ï¼š(12 ~ 20) *(ç¨³å®šæ—¶é—´ settling time)</li>
</ul></li>
<li>ä¿¡å·ç±»å‹ï¼šGBN -</li>
<li>ä¿¡å·æ­¥é•¿ï¼šæ ¹æ®é¢„å…ˆæµ‹è¯•å’Œä¸æ“ä½œå‘˜çš„è®¨è®ºç¡®å®šã€‚
ä»å°å¼€å§‹ï¼Œå¯ä»¥åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­è¿›è¡Œè°ƒæ•´-</li>
<li>ä¿¡å·å¹³å‡åˆ‡æ¢æ—¶é—´ï¼ˆåŠŸç‡è°±ï¼‰ï¼š</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927230237868.png" style="zoom:50%;" /></p>
<ul>
<li><p>GBNä¿¡å·å¯ä»¥åŒæ—¶åšè‹¥å¹²ä¸ªå®éªŒï¼Œä¸åŒå®éªŒäº’ä¸ç›¸å…³ã€‚</p></li>
<li><p>æ¯ä¸ªæµ‹è¯•çš„MVä¸ªæ•°ï¼Œä»¥åŠæµ‹è¯•ä¿¡å·çš„ç›¸å…³æ€§ï¼š</p>
<ul>
<li>æ¯æ¬¡æµ‹è¯•çš„ MV æ•°é‡ï¼šå¼€ç¯æµ‹è¯•æœ€å¤š 10 ä¸ª MVï¼› åœ¨é—­ç¯æµ‹è¯•ä¸­æ‰€æœ‰
MVã€‚</li>
<li>æµ‹è¯•ä¿¡å·ä¹‹é—´çš„ç›¸å…³æ€§ï¼šé€šå¸¸ç‹¬ç«‹ï¼›
å¯¹äºæ¡ä»¶ä¸ä½³çš„è¿‡ç¨‹ï¼ˆä¾‹å¦‚é«˜çº¯åº¦è’¸é¦å¡”ï¼‰ï¼ŒæŸäº› MV
ä¹‹é—´çš„å¼ºç›¸å…³æ€§å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</li>
</ul></li>
</ul>
<h4 id="é—­ç¯å®éªŒæµ‹è¯•">2ï¼‰é—­ç¯å®éªŒæµ‹è¯•ï¼š</h4>
<ul>
<li>å¤§å¤šæ•°å·¥ä¸šåº”ç”¨ä½¿ç”¨å¼€ç¯æµ‹è¯•ã€‚</li>
<li>20å¹´å‰ï¼Œä¸šç•Œä¸ç›¸ä¿¡çš„è¿‡ç¨‹æ˜¯ å¯ä½¿ç”¨é—­ç¯æ•°æ®è¯†åˆ«ã€‚</li>
<li>å¯ä»¥åœ¨è®¾å®šç‚¹æˆ– MV å¤„åº”ç”¨æµ‹è¯•ä¿¡å·</li>
<li><strong>é—­ç¯æµ‹è¯•å¯¹è¿‡ç¨‹æ“ä½œçš„å¹²æ‰°è¾ƒå°</strong></li>
<li>é—­ç¯æµ‹è¯•æ˜“äºè¿›è¡Œã€‚</li>
<li>æ¥è‡ªé—­ç¯æµ‹è¯•æ•°æ®çš„æ¨¡å‹æ›´é€‚åˆæ§åˆ¶ã€‚</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927230553891.png" /></p>
<h2
id="å››ç³»ç»Ÿè¾¨è¯†æœ€å°äºŒä¹˜çš„ç³»ç»Ÿè¾¨è¯†æ–¹æ³•">å››ã€ç³»ç»Ÿè¾¨è¯†â€”â€”æœ€å°äºŒä¹˜çš„ç³»ç»Ÿè¾¨è¯†æ–¹æ³•</h2>
<h3 id="æœ€å°äºŒä¹˜çš„åŸåˆ™p20é¡µ-ç”±é«˜æ–¯æå‡º">1ã€æœ€å°äºŒä¹˜çš„åŸåˆ™ï¼šP20é¡µ
ç”±é«˜æ–¯æå‡º</h3>
<h3
id="åŸºäºæœ€å°äºŒä¹˜ä¼°è®¡çº¿æ€§è¿‡ç¨‹çš„æ¨¡å‹arxæ¨¡å‹">2ã€åŸºäºæœ€å°äºŒä¹˜ï¼Œä¼°è®¡çº¿æ€§è¿‡ç¨‹çš„æ¨¡å‹â€”â€”ARXæ¨¡å‹</h3>
<p>ç”¨né˜¶å·®åˆ†æ–¹ç¨‹æè¿°ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927230958268.png" /></p>
<p>å¼•å…¥è¯¯å·®é¡¹ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927231012557.png" /></p>
<p>é¦–å…ˆè¿›è¡Œç­‰å¼é‡ç»„ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927231103308.png" style="zoom: 50%;" /></p>
<p>åœ¨ç³»ç»Ÿè¾¨è¯†å®éªŒæµ‹è¯•åï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°æ•°æ®é›†ï¼Œå¹¶ä¸”ä½¿ç”¨æ•°æ®æ¥å¡«å……ç­‰å¼ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927231138550.png" style="zoom:50%;" /></p>
<p>æœ€åï¼Œé€šè¿‡æœ€å°åŒ–å¦‚ä¸‹çš„ç›®æ ‡å‡½æ•°æ¥ä¼°è®¡æ¨¡å‹å‚æ•°ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927231216488.png" style="zoom:50%;" /></p>
<p>å¦‚ä¸‹ä¸ºè§£ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927231234423.png" style="zoom:50%;" /></p>
<h3 id="å·¥ä¸šå®ä¾‹">3ã€å·¥ä¸šå®ä¾‹ï¼š</h3>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220927231336491.png"
alt="image-20220927231336491" />
<figcaption aria-hidden="true">image-20220927231336491</figcaption>
</figure>
<h3 id="æœ€å°äºŒä¹˜ä¼°è®¡çš„å±æ€§">4ã€æœ€å°äºŒä¹˜ä¼°è®¡çš„å±æ€§ï¼š</h3>
<p><strong>ä¼°è®¡å™¨çš„ç†æƒ³ï¼ˆè‰¯å¥½ï¼‰å±æ€§ï¼š</strong></p>
<ul>
<li>æ— åä¼°è®¡ Unbiased estimator</li>
<li>ä¸€è‡´çš„ä¼°è®¡å™¨ Consistent estimator</li>
<li>æœ‰æ•ˆæˆ–æœ€å°æ–¹å·®ä¼°è®¡å™¨ Efficient or minimum variance estimator:</li>
</ul>
<p><strong>åŸå§‹çš„æœ€å°äºŒä¹˜ä¼°è®¡å™¨æ˜¯æ— åçš„</strong></p>
<p><strong>ARXæ¨¡å‹æ˜¯æœ‰åçš„ï¼Œå› ä¸ºA2ä¸ä¿æŒ</strong></p>
<h2 id="äº”æœ€å°äºŒä¹˜æ¨¡å‹çš„æ‰©å±•">äº”ã€æœ€å°äºŒä¹˜æ¨¡å‹çš„æ‰©å±•ï¼š</h2>
<h3 id="è¾“å‡ºè¯¯å·®æ–¹æ³•-output-error-method">1ã€è¾“å‡ºè¯¯å·®æ–¹æ³• Output-error
method</h3>
<p>â€‹ å…¶å­˜åœ¨ä¸€ä¸ªå¤§çš„æ•°å€¼é—®é¢˜ï¼šè¾“å‡ºè¯¯å·®åœ¨ A(q) å‚æ•°ä¸­æ˜¯éçº¿æ€§çš„ã€‚
ä¸å­˜åœ¨è§£æï¼ˆå°é—­å½¢å¼ï¼‰è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿæ— æ³•ä¿è¯å…¨å±€æœ€å°å€¼ã€‚</p>
<h4 id="å…³äºä¸€è‡´æ€§çš„è¯æ˜">1ï¼‰å…³äºä¸€è‡´æ€§çš„è¯æ˜ï¼š</h4>
<ul>
<li>çœŸå®è¿‡ç¨‹ç”± (5.1.4) ç»™å‡ºï¼Œå…¶ä¸­ v(t) æ˜¯é›¶å‡å€¼çš„å¹³ç¨³éšæœºè¿‡ç¨‹ã€‚</li>
<li>æ¨¡å‹é˜¶æ•° n æ­£ç¡®ã€‚</li>
<li>è¾“å…¥æŒç»­å…´å¥‹ï¼Œé˜¶æ•°é«˜äº 2nã€‚</li>
<li><strong>æµ‹è¯•æ˜¯å¼€ç¯çš„ã€‚</strong></li>
<li>æœ€å°åŒ–æ”¶æ•›åˆ°æ‰€æœ‰ N çš„å…¨å±€æœ€å°å€¼ã€‚</li>
<li>A(q) å’Œ B(q) æ²¡æœ‰å…¬å› æ•°ã€‚</li>
</ul>
<h3 id="é¢„æµ‹è¯¯å·®æ–¹æ³•-prediction-error-methods">2ã€é¢„æµ‹è¯¯å·®æ–¹æ³•
Prediction error methods</h3>
<p>è¯¥æ–¹æ³•å®ç°ï¼š1ï¼‰é—­ç¯æµ‹è¯•çš„ä¸€è‡´æ€§ï¼ˆæ— åæ€§ï¼‰ 2)
å¼€ç¯å’Œé—­ç¯çš„æ•ˆç‡ï¼ˆæœ€å°æ–¹å·®ï¼‰ã€‚</p>
<p>ARMAX æ¨¡å‹ï¼š</p>
<ul>
<li>ä¸€äº›æ§åˆ¶è®¾è®¡æ–¹æ³•çš„è‰¯å¥½æ¨¡å‹ç»“æ„ã€‚ã€</li>
<li>æ•°å€¼ä¼˜åŒ–æ˜¯å¿…è¦çš„ï¼Œä¸èƒ½ä¿è¯å…¨å±€æœ€å°å€¼</li>
</ul>
<p>BOX-Jenkinsæ¨¡å‹ï¼š</p>
<h4 id="é¢„æµ‹è¯¯å·®æ–¹æ³•çš„å±æ€§">é¢„æµ‹è¯¯å·®æ–¹æ³•çš„å±æ€§ï¼š</h4>
<ul>
<li>å‡è®¾ï¼šï¼ˆ1ï¼‰è¿‡ç¨‹ç¨³å®šï¼› (2)æ¨¡å‹ç»“æ„æ­£ç¡®ï¼› (3) æµ‹è¯•ä¿¡å·æŒç»­æ¿€åŠ±ï¼› (4)
æœ€å°åŒ–æ”¶æ•›åˆ°å…¶å…¨å±€æœ€å°å€¼</li>
</ul>
<h3 id="é˜¶æ¬¡é€‰æ‹©-order-selection">3ã€é˜¶æ¬¡é€‰æ‹© Order Selection</h3>
<ul>
<li>ç›®çš„ï¼šæ‰¾åˆ°æ¨¡å‹é˜¶æ¬¡ï¼Œä»¥ä¾¿æ¨¡å‹å¯¹å…¶ä½¿ç”¨æœ€å‡†ç¡®ï¼ˆåœ¨æ§åˆ¶ä¸­ï¼‰ã€‚
<ul>
<li>ç²—é˜¶é€‰æ‹©æ–¹æ³•ï¼šæ£€æŸ¥åæ–¹å·®çŸ©é˜µçš„ç§©ï¼Œç»˜åˆ¶ Hankel çŸ©é˜µçš„å¥‡å¼‚å€¼ã€‚
å¯¹äºå˜ˆæ‚çš„æ•°æ®ä¸å‡†ç¡®ã€‚</li>
<li>å‡†ç¡®çš„æ–¹æ³•ï¼šé¦–å…ˆä¼°è®¡å…·æœ‰é€’å¢é˜¶æ•°çš„æ¨¡å‹ï¼Œç„¶åä½¿ç”¨é”™è¯¯å‡†åˆ™é€‰æ‹©æœ€ä½³é˜¶æ•°ã€‚</li>
</ul></li>
<li>ä¸»è¦è®®é¢˜ï¼šä»€ä¹ˆç­–ç•¥ï¼Ÿä»€ä¹ˆæ•°æ®é›†ï¼Ÿ
<ul>
<li>åœ¨è¯†åˆ«æ–‡çŒ®ä¸­ï¼Œé¢„æµ‹è¯¯å·®å‡†åˆ™å¸¸ç”¨äºæ¨¡å‹é˜¶æ•°é€‰æ‹©ã€‚ -</li>
<li>äº¤å‰éªŒè¯çš„ç¼ºç‚¹æ˜¯æˆæœ¬é«˜ã€‚ ä½¿ç”¨ä¼°è®¡æ•°æ®è¿›è¡Œæ¨¡å‹é˜¶æ•°é€‰æ‹©æ›´ç»æµã€‚</li>
<li>ä½¿ç”¨ä¼°è®¡æ•°æ®çš„é”™è¯¯æ ‡å‡†æ˜¯ä½¿ç”¨éªŒè¯æ•°æ®çš„é”™è¯¯æ ‡å‡†çš„æœ‰åä¼°è®¡ã€‚</li>
</ul></li>
</ul>
<p><strong>è¾“å‡ºè¯¯å·®å°å¹¶ä¸èƒ½ä¿è¯ä»¿çœŸè¯¯å·®å°</strong></p>
<ul>
<li><p>ä»ç„¶éœ€è¦è¯æ˜ FOE æ˜¯å¯¹éªŒè¯æ•°æ®çš„ OE æ ‡å‡†çš„æ— åä¼°è®¡ã€‚</p></li>
<li><p>æˆ‘ä»¬å¯ä»¥å°†è¿™ç§ä½¿ç”¨ä¸åŒæ ‡å‡†è¿›è¡Œæ¨¡å‹ä¼°è®¡å’Œè®¢å•é€‰æ‹©çš„äº¤å‰æ ‡å‡†æ–¹æ³•ç§°ä¸ºæ–¹æ³•ã€‚</p></li>
</ul>
<h3 id="æ¨¡å‹éªŒè¯-model-validation">4ã€æ¨¡å‹éªŒè¯ Model Validation</h3>
<p>æ£€æŸ¥è·å¾—çš„æ¨¡å‹æ˜¯å¦è¶³ä»¥ä½¿ç”¨ï¼ˆæ§åˆ¶ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæä¾›è¡¥æ•‘æªæ–½ï¼ˆåšä»€ä¹ˆ</p>
<p>å°†æ¨¡å‹å±æ€§ä¸è¿‡ç¨‹çŸ¥è¯†è¿›è¡Œæ¯”è¾ƒã€‚ ç²—ç•¥ä¼°è®¡è¿‡ç¨‹å¢ç›Šï¼Œä¸»è¦æ—¶é—´å¸¸æ•°ã€‚</p>
<p>ä½¿ç”¨æ¨¡å‹é˜¶è·ƒå“åº”å›¾ã€‚ æ£€æŸ¥ä¸åŒæ–¹æ³•çš„ä¸€è‡´æ€§ã€‚ ä¼°è®¡ FIRã€ARXã€ARMAX å’Œ
Box-Jenkins æ¨¡å‹å¹¶æ¯”è¾ƒå®ƒä»¬çš„é˜¶è·ƒå“åº”å’Œé¢‘ç‡å“åº”</p>
<h4 id="æ®‹å·®åˆ†æ">1) æ®‹å·®åˆ†æï¼š</h4>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220928090759861.png" style="zoom:50%;" /></p>
<ul>
<li>ä¸€ä¸ªæ‰¹è¯„æ„è§ï¼šæ§åˆ¶çš„è¯†åˆ«æ²¡æœ‰è§£å†³ã€‚ ï¼ˆè¿™ç±»æ¨¡å‹æ˜¯å¦é€‚ç”¨äºæ§åˆ¶ï¼‰
<ul>
<li>å‰ä¸‰ç§æ–¹æ³•æˆ–å¤šæˆ–å°‘æ˜¯å®šæ€§æµ‹è¯•ã€‚</li>
<li>æ®‹å·®åˆ†ææ˜¯æ£€æŸ¥æ¨¡å‹æ˜¯å¦ä¸æµ‹è¯•æ•°æ®å……åˆ†å»åˆã€‚</li>
<li>æ²¡æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥åˆ¤æ–­æ¨¡å‹æ˜¯å¦é€‚åˆæ§åˆ¶ã€‚</li>
<li>å¦‚æœä¸€ä¸ªæ¨¡å‹é€šè¿‡äº†æ®‹å·®åˆ†æï¼Œå®ƒåªå‘Šè¯‰ç»™å®šæ•°æ®è·å¾—äº†å¥½çš„æ¨¡å‹ã€‚
ä½†æ˜¯æ•°æ®æ˜¯å¦è¶³å¤Ÿå¥½ï¼ˆç”¨äºæ§åˆ¶ï¼‰ï¼Ÿ</li>
</ul></li>
</ul>
]]></content>
      <categories>
        <category>â“¾ è¯¾ç¨‹ç¬”è®°</category>
        <category>ç”µå­ä¿¡æ¯å·¥ç¨‹æ•°å­¦æ¨¡å‹ä¸æ–¹æ³•</category>
      </categories>
      <tags>
        <tag>course</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockeréƒ¨ç½²ä¸å®è·µç¬”è®°</title>
    <url>/2022/01/17/52faafcaa31c/</url>
    <content><![CDATA[<h3 id="ä¸€dockerä¼˜åŠ¿åŠŸèƒ½">ä¸€ã€Dockerä¼˜åŠ¿åŠŸèƒ½</h3>
<p>1ï¼šæŒç»­äº¤ä»˜å’Œéƒ¨ç½²</p>
<p>â€‹ å¯¹å¼€å‘å’Œè¿ç»´ï¼ˆ<a
href="https://zh.wikipedia.org/wiki/DevOps">DevOps</a>ï¼‰äººå‘˜æ¥è¯´ï¼Œæœ€å¸Œæœ›çš„å°±æ˜¯ä¸€æ¬¡åˆ›å»ºæˆ–é…ç½®ï¼Œå¯ä»¥åœ¨ä»»æ„åœ°æ–¹æ­£å¸¸è¿è¡Œã€‚</p>
<p>â€‹ ä½¿ç”¨ <code>Docker</code>
å¯ä»¥é€šè¿‡å®šåˆ¶åº”ç”¨é•œåƒæ¥å®ç°æŒç»­é›†æˆã€æŒç»­äº¤ä»˜ã€éƒ¨ç½²ã€‚å¼€å‘äººå‘˜å¯ä»¥é€šè¿‡ <a
href="https://yeasy.gitbook.io/docker_practice/image/dockerfile">Dockerfile</a>
æ¥è¿›è¡Œé•œåƒæ„å»ºï¼Œå¹¶ç»“åˆ <a
href="https://en.wikipedia.org/wiki/Continuous_integration">æŒç»­é›†æˆ(Continuous
Integration)</a>
ç³»ç»Ÿè¿›è¡Œé›†æˆæµ‹è¯•ï¼Œè€Œè¿ç»´äººå‘˜åˆ™å¯ä»¥ç›´æ¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¿«é€Ÿéƒ¨ç½²è¯¥é•œåƒï¼Œç”šè‡³ç»“åˆ
<a
href="https://en.wikipedia.org/wiki/Continuous_delivery">æŒç»­éƒ¨ç½²(Continuous
Delivery/Deployment)</a> ç³»ç»Ÿè¿›è¡Œè‡ªåŠ¨éƒ¨ç½²ã€‚</p>
<p>è€Œä¸”ä½¿ç”¨ <a
href="https://yeasy.gitbook.io/docker_practice/image/build"><code>Dockerfile</code></a>
ä½¿é•œåƒæ„å»ºé€æ˜åŒ–ï¼Œä¸ä»…ä»…å¼€å‘å›¢é˜Ÿå¯ä»¥ç†è§£åº”ç”¨è¿è¡Œç¯å¢ƒï¼Œä¹Ÿæ–¹ä¾¿è¿ç»´å›¢é˜Ÿç†è§£åº”ç”¨è¿è¡Œæ‰€éœ€æ¡ä»¶ï¼Œå¸®åŠ©æ›´å¥½çš„ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²è¯¥é•œåƒã€‚</p>
<p>2ã€
å¼€å‘è¿‡ç¨‹ä¸­ä¸€ä¸ªå¸¸è§çš„é—®é¢˜æ˜¯ç¯å¢ƒä¸€è‡´æ€§é—®é¢˜ã€‚ç”±äºå¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒä¸ä¸€è‡´ï¼Œå¯¼è‡´æœ‰äº›
bug å¹¶æœªåœ¨å¼€å‘è¿‡ç¨‹ä¸­è¢«å‘ç°ã€‚è€Œ <code>Docker</code>
çš„é•œåƒæä¾›äº†é™¤å†…æ ¸å¤–å®Œæ•´çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œç¡®ä¿äº†åº”ç”¨è¿è¡Œç¯å¢ƒä¸€è‡´æ€§ï¼Œä»è€Œä¸ä¼šå†å‡ºç°
<em>ã€Œè¿™æ®µä»£ç åœ¨æˆ‘æœºå™¨ä¸Šæ²¡é—®é¢˜å•Šã€</em> è¿™ç±»é—®é¢˜</p>
<h3 id="äºŒdocker-åŸºæœ¬æ¦‚å¿µ">äºŒã€Docker åŸºæœ¬æ¦‚å¿µ</h3>
<ul>
<li><strong>é•œåƒ</strong>ï¼ˆ<code>Image</code>ï¼‰</li>
<li><strong>å®¹å™¨</strong>ï¼ˆ<code>Container</code>ï¼‰</li>
<li><strong>ä»“åº“</strong>ï¼ˆ<code>Repository</code>ï¼‰</li>
</ul>
<p>1ã€é•œåƒï¼š<strong>Docker
é•œåƒ</strong>ï¼ˆ<code>Image</code>ï¼‰ï¼Œå°±ç›¸å½“äºæ˜¯ä¸€ä¸ª <code>root</code>
æ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚å®˜æ–¹é•œåƒ <code>ubuntu:18.04</code> å°±åŒ…å«äº†å®Œæ•´çš„ä¸€å¥—
Ubuntu 18.04 æœ€å°ç³»ç»Ÿçš„ <code>root</code> æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<p>â€‹ ä½¿ç”¨åˆ†å±‚å­˜å‚¨æŠ€æœ¯ï¼Œåœ¨ Docker è®¾è®¡æ—¶ï¼Œå°±å……åˆ†åˆ©ç”¨ <a
href="https://en.wikipedia.org/wiki/Union_mount">Union FS</a>
çš„æŠ€æœ¯ï¼Œå°†å…¶è®¾è®¡ä¸ºåˆ†å±‚å­˜å‚¨çš„æ¶æ„ã€‚æ‰€ä»¥ä¸¥æ ¼æ¥è¯´ï¼Œé•œåƒå¹¶éæ˜¯åƒä¸€ä¸ª
<code>ISO</code>
é‚£æ ·çš„æ‰“åŒ…æ–‡ä»¶ï¼Œé•œåƒåªæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„æ¦‚å¿µï¼Œå…¶å®é™…ä½“ç°å¹¶éç”±ä¸€ä¸ªæ–‡ä»¶ç»„æˆï¼Œè€Œæ˜¯ç”±ä¸€ç»„æ–‡ä»¶ç³»ç»Ÿç»„æˆï¼Œæˆ–è€…è¯´ï¼Œç”±å¤šå±‚æ–‡ä»¶ç³»ç»Ÿè”åˆç»„æˆã€‚</p>
<p>2ã€é•œåƒï¼ˆ<code>Image</code>ï¼‰å’Œå®¹å™¨ï¼ˆ<code>Container</code>ï¼‰çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„
<code>ç±»</code> å’Œ <code>å®ä¾‹</code>
ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚</p>
<p>â€‹
æ¯ä¸€ä¸ªå®¹å™¨è¿è¡Œæ—¶ï¼Œæ˜¯ä»¥é•œåƒä¸ºåŸºç¡€å±‚ï¼Œåœ¨å…¶ä¸Šåˆ›å»ºä¸€ä¸ªå½“å‰å®¹å™¨çš„å­˜å‚¨å±‚ï¼Œæˆ‘ä»¬å¯ä»¥ç§°è¿™ä¸ªä¸ºå®¹å™¨è¿è¡Œæ—¶è¯»å†™è€Œå‡†å¤‡çš„å­˜å‚¨å±‚ä¸º
<strong>å®¹å™¨å­˜å‚¨å±‚</strong>ã€‚</p>
<p>â€‹
å®¹å™¨å­˜å‚¨å±‚çš„ç”Ÿå­˜å‘¨æœŸå’Œå®¹å™¨ä¸€æ ·ï¼Œå®¹å™¨æ¶ˆäº¡æ—¶ï¼Œå®¹å™¨å­˜å‚¨å±‚ä¹Ÿéšä¹‹æ¶ˆäº¡ã€‚å› æ­¤ï¼Œä»»ä½•ä¿å­˜äºå®¹å™¨å­˜å‚¨å±‚çš„ä¿¡æ¯éƒ½ä¼šéšå®¹å™¨åˆ é™¤è€Œä¸¢å¤±ã€‚</p>
<p>â€‹ æŒ‰ç…§ Docker
æœ€ä½³å®è·µçš„è¦æ±‚ï¼Œå®¹å™¨ä¸åº”è¯¥å‘å…¶å­˜å‚¨å±‚å†…å†™å…¥ä»»ä½•æ•°æ®ï¼Œå®¹å™¨å­˜å‚¨å±‚è¦ä¿æŒæ— çŠ¶æ€åŒ–ã€‚æ‰€æœ‰çš„æ–‡ä»¶å†™å…¥æ“ä½œï¼Œéƒ½åº”è¯¥ä½¿ç”¨
<a href="">æ•°æ®å·ï¼ˆVolumeï¼‰</a>ã€æˆ–è€… <a
href="">ç»‘å®šå®¿ä¸»ç›®å½•</a>ï¼Œåœ¨è¿™äº›ä½ç½®çš„è¯»å†™ä¼šè·³è¿‡å®¹å™¨å­˜å‚¨å±‚ï¼Œç›´æ¥å¯¹å®¿ä¸»ï¼ˆæˆ–ç½‘ç»œå­˜å‚¨ï¼‰å‘ç”Ÿè¯»å†™ï¼Œå…¶æ€§èƒ½å’Œç¨³å®šæ€§æ›´é«˜ã€‚</p>
<p>â€‹
æ®å·çš„ç”Ÿå­˜å‘¨æœŸç‹¬ç«‹äºå®¹å™¨ï¼Œå®¹å™¨æ¶ˆäº¡ï¼Œæ•°æ®å·ä¸ä¼šæ¶ˆäº¡ã€‚å› æ­¤ï¼Œä½¿ç”¨æ•°æ®å·åï¼Œå®¹å™¨åˆ é™¤æˆ–è€…é‡æ–°è¿è¡Œä¹‹åï¼Œæ•°æ®å´ä¸ä¼šä¸¢å¤±ã€‚</p>
<p>3ã€ä»“åº“</p>
<p>â€‹
é•œåƒæ„å»ºå®Œæˆåï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„åœ¨å½“å‰å®¿ä¸»æœºä¸Šè¿è¡Œï¼Œä½†æ˜¯ï¼Œå¦‚æœéœ€è¦åœ¨å…¶å®ƒæœåŠ¡å™¨ä¸Šä½¿ç”¨è¿™ä¸ªé•œåƒï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªé›†ä¸­çš„å­˜å‚¨ã€åˆ†å‘é•œåƒçš„æœåŠ¡ï¼Œ<a
href="">Docker Registry</a> å°±æ˜¯è¿™æ ·çš„æœåŠ¡ã€‚</p>
<p>â€‹ ä¸€ä¸ª <strong>Docker Registry</strong> ä¸­å¯ä»¥åŒ…å«å¤šä¸ª
<strong>ä»“åº“</strong>ï¼ˆ<code>Repository</code>ï¼‰ï¼›æ¯ä¸ªä»“åº“å¯ä»¥åŒ…å«å¤šä¸ª
<strong>æ ‡ç­¾</strong>ï¼ˆ<code>Tag</code>ï¼‰ï¼›æ¯ä¸ªæ ‡ç­¾å¯¹åº”ä¸€ä¸ªé•œåƒã€‚</p>
<h3 id="ä¸‰ä½¿ç”¨é•œåƒ">ä¸‰ã€ä½¿ç”¨é•œåƒï¼š</h3>
<h4 id="è·å–é•œåƒ">1ã€ è·å–é•œåƒï¼š</h4>
<p>â€‹ ä» Docker é•œåƒä»“åº“è·å–é•œåƒçš„å‘½ä»¤æ˜¯
<code>docker pull</code>ã€‚å…¶å‘½ä»¤æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker pull [é€‰é¡¹] [Docker Registry åœ°å€[:ç«¯å£å·]/]ä»“åº“å[:æ ‡ç­¾]</span><br></pre></td></tr></table></figure>
<p>Docker é•œåƒä»“åº“åœ°å€ï¼šåœ°å€çš„æ ¼å¼ä¸€èˆ¬æ˜¯
<code>&lt;åŸŸå/IP&gt;[:ç«¯å£å·]</code>ã€‚é»˜è®¤åœ°å€æ˜¯ Docker
Hub(<code>docker.io</code>)ã€‚</p>
<p>ä»“åº“åï¼šå¦‚ä¹‹å‰æ‰€è¯´ï¼Œè¿™é‡Œçš„ä»“åº“åæ˜¯ä¸¤æ®µå¼åç§°ï¼Œå³
<code>&lt;ç”¨æˆ·å&gt;/&lt;è½¯ä»¶å&gt;</code>ã€‚å¯¹äº Docker
Hubï¼Œå¦‚æœä¸ç»™å‡ºç”¨æˆ·åï¼Œåˆ™é»˜è®¤ä¸º
<code>library</code>ï¼Œä¹Ÿå°±æ˜¯å®˜æ–¹é•œåƒã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç¤ºä¾‹ï¼š docker pull ubuntu:18.04</span><br></pre></td></tr></table></figure>
<p>â€‹ ä¸Šé¢çš„å‘½ä»¤ä¸­æ²¡æœ‰ç»™å‡º Docker é•œåƒä»“åº“åœ°å€ï¼Œå› æ­¤å°†ä¼šä» Docker Hub
ï¼ˆ<code>docker.io</code>ï¼‰è·å–é•œåƒã€‚è€Œé•œåƒåç§°æ˜¯
<code>ubuntu:18.04</code>ï¼Œå› æ­¤å°†ä¼šè·å–å®˜æ–¹é•œåƒ
<code>library/ubuntu</code> ä»“åº“ä¸­æ ‡ç­¾ä¸º <code>18.04</code>
çš„é•œåƒã€‚<code>docker pull</code>
å‘½ä»¤çš„è¾“å‡ºç»“æœæœ€åä¸€è¡Œç»™å‡ºäº†é•œåƒçš„å®Œæ•´åç§°ï¼Œå³ï¼š
<code>docker.io/library/ubuntu:18.04</code></p>
<h4 id="è¿è¡Œé•œåƒ">2ã€è¿è¡Œé•œåƒï¼š</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker run -it --rm ubuntu:18.04 bash</span><br></pre></td></tr></table></figure>
<p><code>docker run</code> å°±æ˜¯è¿è¡Œå®¹å™¨çš„å‘½ä»¤ï¼Œå…·ä½“æ ¼å¼æˆ‘ä»¬ä¼šåœ¨ <a
href="">å®¹å™¨</a>
ä¸€èŠ‚è¿›è¡Œè¯¦ç»†è®²è§£ï¼Œæˆ‘ä»¬è¿™é‡Œç®€è¦çš„è¯´æ˜ä¸€ä¸‹ä¸Šé¢ç”¨åˆ°çš„å‚æ•°ã€‚</p>
<ul>
<li><code>-it</code>ï¼šè¿™æ˜¯ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯
<code>-i</code>ï¼šäº¤äº’å¼æ“ä½œï¼Œä¸€ä¸ªæ˜¯ <code>-t</code>
ç»ˆç«¯ã€‚æˆ‘ä»¬è¿™é‡Œæ‰“ç®—è¿›å…¥ <code>bash</code>
æ‰§è¡Œä¸€äº›å‘½ä»¤å¹¶æŸ¥çœ‹è¿”å›ç»“æœï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦äº¤äº’å¼ç»ˆç«¯ã€‚</li>
<li><code>--rm</code>ï¼šè¿™ä¸ªå‚æ•°æ˜¯è¯´å®¹å™¨é€€å‡ºåéšä¹‹å°†å…¶åˆ é™¤ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ºäº†æ’éšœéœ€æ±‚ï¼Œé€€å‡ºçš„å®¹å™¨å¹¶ä¸ä¼šç«‹å³åˆ é™¤ï¼Œé™¤éæ‰‹åŠ¨
<code>docker rm</code>ã€‚æˆ‘ä»¬è¿™é‡Œåªæ˜¯éšä¾¿æ‰§è¡Œä¸ªå‘½ä»¤ï¼Œçœ‹çœ‹ç»“æœï¼Œä¸éœ€è¦æ’éšœå’Œä¿ç•™ç»“æœï¼Œå› æ­¤ä½¿ç”¨
<code>--rm</code> å¯ä»¥é¿å…æµªè´¹ç©ºé—´ã€‚</li>
<li><code>ubuntu:18.04</code>ï¼šè¿™æ˜¯æŒ‡ç”¨ <code>ubuntu:18.04</code>
é•œåƒä¸ºåŸºç¡€æ¥å¯åŠ¨å®¹å™¨ã€‚</li>
<li><code>bash</code>ï¼šæ”¾åœ¨é•œåƒååçš„æ˜¯
<strong>å‘½ä»¤</strong>ï¼Œè¿™é‡Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸ªäº¤äº’å¼ Shellï¼Œå› æ­¤ç”¨çš„æ˜¯
<code>bash</code>ã€‚</li>
</ul>
<h4 id="æƒ³è¦åˆ—å‡ºå·²ç»ä¸‹è½½çš„é•œåƒ">3ã€æƒ³è¦åˆ—å‡ºå·²ç»ä¸‹è½½çš„é•œåƒï¼š</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker image ls</span><br></pre></td></tr></table></figure>
<p>åˆ—è¡¨åŒ…å«äº†
<code>ä»“åº“å</code>ã€<code>æ ‡ç­¾</code>ã€<code>é•œåƒ ID</code>ã€<code>åˆ›å»ºæ—¶é—´</code>
ä»¥åŠ <code>æ‰€å ç”¨çš„ç©ºé—´</code>ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ <code>docker system df</code>
å‘½ä»¤æ¥ä¾¿æ·çš„æŸ¥çœ‹é•œåƒã€å®¹å™¨ã€æ•°æ®å·æ‰€å ç”¨çš„ç©ºé—´ã€‚</p>
<h5 id="è™šæ‚¬é•œåƒ-æŒ‡æ— æ ‡ç­¾é•œåƒ">!! è™šæ‚¬é•œåƒ : æŒ‡æ— æ ‡ç­¾é•œåƒ</h5>
<p>ä¸€èˆ¬æ¥è¯´å…¶å·²ç»å¤±å»äº†å­˜åœ¨çš„ä»·å€¼ï¼Œå¯ä»¥éšæ„åˆ é™¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker image prune</span><br></pre></td></tr></table></figure>
<h5
id="ä¸­é—´å±‚é•œåƒä¸ºäº†åŠ é€Ÿé•œåƒæ„å»ºé‡å¤åˆ©ç”¨èµ„æºdocker-ä¼šåˆ©ç”¨-ä¸­é—´å±‚é•œåƒæ‰€ä»¥åœ¨ä½¿ç”¨ä¸€æ®µæ—¶é—´åå¯èƒ½ä¼šçœ‹åˆ°ä¸€äº›ä¾èµ–çš„ä¸­é—´å±‚é•œåƒ">!!
ä¸­é—´å±‚é•œåƒï¼šä¸ºäº†åŠ é€Ÿé•œåƒæ„å»ºã€é‡å¤åˆ©ç”¨èµ„æºï¼ŒDocker ä¼šåˆ©ç”¨
<strong>ä¸­é—´å±‚é•œåƒ</strong>ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨ä¸€æ®µæ—¶é—´åï¼Œå¯èƒ½ä¼šçœ‹åˆ°ä¸€äº›ä¾èµ–çš„ä¸­é—´å±‚é•œåƒã€‚</h5>
<p>â€‹ é»˜è®¤çš„ <code>docker image ls</code>
åˆ—è¡¨ä¸­åªä¼šæ˜¾ç¤ºé¡¶å±‚é•œåƒï¼Œå¦‚æœå¸Œæœ›æ˜¾ç¤ºåŒ…æ‹¬ä¸­é—´å±‚é•œåƒåœ¨å†…çš„æ‰€æœ‰é•œåƒçš„è¯ï¼Œéœ€è¦åŠ 
<code>-a</code> å‚æ•°ã€‚</p>
<p>â€‹
è¿™æ ·ä¼šçœ‹åˆ°å¾ˆå¤šæ— æ ‡ç­¾çš„é•œåƒï¼Œä¸ä¹‹å‰çš„è™šæ‚¬é•œåƒä¸åŒï¼Œè¿™äº›æ— æ ‡ç­¾çš„é•œåƒå¾ˆå¤šéƒ½æ˜¯ä¸­é—´å±‚é•œåƒï¼Œæ˜¯å…¶å®ƒé•œåƒæ‰€ä¾èµ–çš„é•œåƒã€‚è¿™äº›æ— æ ‡ç­¾é•œåƒä¸åº”è¯¥åˆ é™¤ï¼Œå¦åˆ™ä¼šå¯¼è‡´ä¸Šå±‚é•œåƒå› ä¸ºä¾èµ–ä¸¢å¤±è€Œå‡ºé”™ã€‚å®é™…ä¸Šï¼Œè¿™äº›é•œåƒä¹Ÿæ²¡å¿…è¦åˆ é™¤ï¼Œå› ä¸ºä¹‹å‰è¯´è¿‡ï¼Œç›¸åŒçš„å±‚åªä¼šå­˜ä¸€éï¼Œè€Œè¿™äº›é•œåƒæ˜¯åˆ«çš„é•œåƒçš„ä¾èµ–ï¼Œå› æ­¤å¹¶ä¸ä¼šå› ä¸ºå®ƒä»¬è¢«åˆ—å‡ºæ¥è€Œå¤šå­˜äº†ä¸€ä»½ï¼Œæ— è®ºå¦‚ä½•ä½ ä¹Ÿä¼šéœ€è¦å®ƒä»¬ã€‚åªè¦åˆ é™¤é‚£äº›ä¾èµ–å®ƒä»¬çš„é•œåƒåï¼Œè¿™äº›ä¾èµ–çš„ä¸­é—´å±‚é•œåƒä¹Ÿä¼šè¢«è¿å¸¦åˆ é™¤ã€‚</p>
<h5
id="å…¶ä½™ä¸å¸¸ç”¨å‘½ä»¤è§-httpsyeasy.gitbook.iodocker_practiceimagelist">å…¶ä½™ä¸å¸¸ç”¨å‘½ä»¤è§ï¼š
https://yeasy.gitbook.io/docker_practice/image/list</h5>
<h4 id="åˆ é™¤æœ¬åœ°é•œåƒ">4ã€ åˆ é™¤æœ¬åœ°é•œåƒ</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image <span class="built_in">rm</span> [é€‰é¡¹] &lt;é•œåƒ1&gt; [&lt;é•œåƒ2&gt; ...]</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œ<code>&lt;é•œåƒ&gt;</code> å¯ä»¥æ˜¯
<code>é•œåƒçŸ­ ID</code>ã€<code>é•œåƒé•¿ ID</code>ã€<code>é•œåƒå</code> æˆ–è€…
<code>é•œåƒæ‘˜è¦</code>ã€‚</p>
<p>ä¾‹å­ï¼šä¾‹å¦‚æˆ‘ä»¬æœ‰ä»¥ä¸‹é•œåƒï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker image ls</span><br><span class="line">REPOSITORY                  TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">centos                      latest              0584b3d2cf6d        3 weeks ago         196.5 MB</span><br><span class="line">redis                       alpine              501ad78535f0        3 weeks ago         21.03 MB</span><br><span class="line">docker                      latest              cf693ec9b5c7        3 weeks ago         105.1 MB</span><br><span class="line">nginx                       latest              e43d811ce2f4        5 weeks ago     </span><br></pre></td></tr></table></figure>
<p>â€‹ æˆ‘ä»¬å¯ä»¥ç”¨é•œåƒçš„å®Œæ•´ IDï¼Œä¹Ÿç§°ä¸º
<code>é•¿ ID</code>ï¼Œæ¥åˆ é™¤é•œåƒã€‚ä½¿ç”¨è„šæœ¬çš„æ—¶å€™å¯èƒ½ä¼šç”¨é•¿
IDï¼Œä½†æ˜¯äººå·¥è¾“å…¥å°±å¤ªç´¯äº†ï¼Œæ‰€ä»¥æ›´å¤šçš„æ—¶å€™æ˜¯ç”¨ <code>çŸ­ ID</code>
æ¥åˆ é™¤é•œåƒã€‚<code>docker image ls</code> é»˜è®¤åˆ—å‡ºçš„å°±å·²ç»æ˜¯çŸ­ ID
äº†ï¼Œä¸€èˆ¬å–å‰3ä¸ªå­—ç¬¦ä»¥ä¸Šï¼Œåªè¦è¶³å¤ŸåŒºåˆ†äºåˆ«çš„é•œåƒå°±å¯ä»¥äº†ã€‚</p>
<p>æ¯”å¦‚è¿™é‡Œï¼Œå¦‚æœæˆ‘ä»¬è¦åˆ é™¤ <code>redis:alpine</code>
é•œåƒï¼Œå¯ä»¥æ‰§è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image <span class="built_in">rm</span> 501</span><br><span class="line">Untagged: redis:alpine</span><br><span class="line">Untagged: redis@sha256:f1ed3708f538b537eb9c2a7dd50dc90a706f7debd7e1196c9264edeea521a86d</span><br><span class="line">Deleted: sha256:501ad78535f015d88872e13fa87a828425117e3d28075d0c117932b05bf189b7</span><br><span class="line">Deleted: sha256:96167737e29ca8e9d74982ef2a0dda76ed7b430da55e321c071f0dbff8c2899b</span><br><span class="line">Deleted: sha256:32770d1dcf835f192cafd6b9263b7b597a1778a403a109e2cc2ee866f74adf23</span><br><span class="line">Deleted: sha256:127227698ad74a5846ff5153475e03439d96d4b1c7f2a449c7a826ef74a2d2fa</span><br><span class="line">Deleted: sha256:1333ecc582459bac54e1437335c0816bc17634e131ea0cc48daa27d32c75eab3</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨<code>é•œåƒå</code>ï¼Œä¹Ÿå°±æ˜¯
<code>&lt;ä»“åº“å&gt;:&lt;æ ‡ç­¾&gt;</code>ï¼Œæ¥åˆ é™¤é•œåƒã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image <span class="built_in">rm</span> centos</span><br><span class="line">Untagged: centos:latest</span><br><span class="line">Untagged: centos@sha256:b2f9d1c0ff5f87a4743104d099a3d561002ac500db1b9bfa02a783a46e0d366c</span><br><span class="line">Deleted: sha256:0584b3d2cf6d235ee310cf14b54667d889887b838d3f3d3033acd70fc3c48b8a</span><br></pre></td></tr></table></figure>
<h5 id="untagged-å’Œdeleted">Untagged å’ŒDeleted</h5>
<p>â€‹ åˆ é™¤è¡Œåˆ†ä¸¤ç±»ï¼Œé•œåƒçš„å”¯ä¸€æ ‡è¯†æ˜¯å…¶ ID
å’Œæ‘˜è¦ï¼Œè€Œä¸€ä¸ªé•œåƒå¯ä»¥æœ‰å¤šä¸ªæ ‡ç­¾ã€‚</p>
<p>â€‹
å› æ­¤å½“æˆ‘ä»¬ä½¿ç”¨ä¸Šé¢å‘½ä»¤åˆ é™¤é•œåƒçš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯åœ¨è¦æ±‚åˆ é™¤æŸä¸ªæ ‡ç­¾çš„é•œåƒã€‚</p>
<p>â€‹
æ‰€ä»¥é¦–å…ˆéœ€è¦åšçš„æ˜¯å°†æ»¡è¶³æˆ‘ä»¬è¦æ±‚çš„æ‰€æœ‰é•œåƒæ ‡ç­¾éƒ½å–æ¶ˆï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çœ‹åˆ°çš„
<code>Untagged</code> çš„ä¿¡æ¯ã€‚</p>
<p>â€‹
å› ä¸ºä¸€ä¸ªé•œåƒå¯ä»¥å¯¹åº”å¤šä¸ªæ ‡ç­¾ï¼Œå› æ­¤å½“æˆ‘ä»¬åˆ é™¤äº†æ‰€æŒ‡å®šçš„æ ‡ç­¾åï¼Œå¯èƒ½è¿˜æœ‰åˆ«çš„æ ‡ç­¾æŒ‡å‘äº†è¿™ä¸ªé•œåƒï¼Œå¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œé‚£ä¹ˆ
<code>Delete</code> è¡Œä¸ºå°±ä¸ä¼šå‘ç”Ÿã€‚æ‰€ä»¥å¹¶éæ‰€æœ‰çš„
<code>docker image rm</code>
éƒ½ä¼šäº§ç”Ÿåˆ é™¤é•œåƒçš„è¡Œä¸ºï¼Œæœ‰å¯èƒ½ä»…ä»…æ˜¯å–æ¶ˆäº†æŸä¸ªæ ‡ç­¾è€Œå·²ã€‚</p>
<h3 id="å››ä½¿ç”¨å®¹å™¨">å››ã€ä½¿ç”¨å®¹å™¨ï¼š</h3>
<h4 id="å¯åŠ¨å®¹å™¨">1ã€å¯åŠ¨å®¹å™¨ï¼š</h4>
<h4
id="åˆ†ä¸¤ç§1æ–°åˆ›å»ºä¸€ä¸ªå®¹å™¨å¹¶å¯åŠ¨-2å¯åŠ¨ä¸€ä¸ªå·²ç»åœæ­¢çš„å®¹å™¨">åˆ†ä¸¤ç§ï¼š1ã€æ–°åˆ›å»ºä¸€ä¸ªå®¹å™¨å¹¶å¯åŠ¨
2ã€å¯åŠ¨ä¸€ä¸ªå·²ç»åœæ­¢çš„å®¹å™¨</h4>
<p>â€‹
å®¹å™¨æ˜¯ç‹¬ç«‹è¿è¡Œçš„ä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨ï¼Œä»¥åŠå®ƒä»¬çš„è¿è¡Œæ€ç¯å¢ƒã€‚å¯¹åº”çš„ï¼Œè™šæ‹Ÿæœºå¯ä»¥ç†è§£ä¸ºæ¨¡æ‹Ÿè¿è¡Œçš„ä¸€æ•´å¥—æ“ä½œç³»ç»Ÿï¼ˆæä¾›äº†è¿è¡Œæ€ç¯å¢ƒå’Œå…¶ä»–ç³»ç»Ÿç¯å¢ƒï¼‰å’Œè·‘åœ¨ä¸Šé¢çš„åº”ç”¨</p>
<h4 id="æ–°åˆ›å»ºä¸€ä¸ªå®¹å™¨å¹¶å¯åŠ¨">1ï¼‰æ–°åˆ›å»ºä¸€ä¸ªå®¹å™¨å¹¶å¯åŠ¨</h4>
<p>â€‹ å½“åˆ©ç”¨ <code>docker run</code> æ¥åˆ›å»ºå®¹å™¨æ—¶ï¼ŒDocker
åœ¨åå°è¿è¡Œçš„æ ‡å‡†æ“ä½œåŒ…æ‹¬ï¼š</p>
<ul>
<li>æ£€æŸ¥æœ¬åœ°æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„é•œåƒï¼Œä¸å­˜åœ¨å°±ä» <a href="">registry</a>
ä¸‹è½½</li>
<li>åˆ©ç”¨é•œåƒåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå®¹å™¨</li>
<li>åˆ†é…ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶åœ¨åªè¯»çš„é•œåƒå±‚å¤–é¢æŒ‚è½½ä¸€å±‚å¯è¯»å†™å±‚</li>
<li>ä»å®¿ä¸»ä¸»æœºé…ç½®çš„ç½‘æ¡¥æ¥å£ä¸­æ¡¥æ¥ä¸€ä¸ªè™šæ‹Ÿæ¥å£åˆ°å®¹å™¨ä¸­å»</li>
<li>ä»åœ°å€æ± é…ç½®ä¸€ä¸ª ip åœ°å€ç»™å®¹å™¨</li>
<li>æ‰§è¡Œç”¨æˆ·æŒ‡å®šçš„åº”ç”¨ç¨‹åº</li>
<li>æ‰§è¡Œå®Œæ¯•åå®¹å™¨è¢«ç»ˆæ­¢</li>
</ul>
<h4 id="å¯åŠ¨ä¸€ä¸ªå·²ç»åœæ­¢çš„å®¹å™¨">2ï¼‰å¯åŠ¨ä¸€ä¸ªå·²ç»åœæ­¢çš„å®¹å™¨</h4>
<p>å¯ä»¥åˆ©ç”¨ <code>docker container start</code>
å‘½ä»¤ï¼Œç›´æ¥å°†ä¸€ä¸ªå·²ç»ç»ˆæ­¢ï¼ˆ<code>exited</code>ï¼‰çš„å®¹å™¨å¯åŠ¨è¿è¡Œã€‚</p>
<p>å®¹å™¨çš„æ ¸å¿ƒä¸ºæ‰€æ‰§è¡Œçš„åº”ç”¨ç¨‹åºï¼Œæ‰€éœ€è¦çš„èµ„æºéƒ½æ˜¯åº”ç”¨ç¨‹åºè¿è¡Œæ‰€å¿…éœ€çš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¹¶æ²¡æœ‰å…¶å®ƒçš„èµ„æºã€‚å¯ä»¥åœ¨ä¼ªç»ˆç«¯ä¸­åˆ©ç”¨
<code>ps</code> æˆ– <code>top</code> æ¥æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯ã€‚</p>
<h4 id="å®ˆæŠ¤æ€è¿è¡Œå®¹å™¨">2ã€å®ˆæŠ¤æ€è¿è¡Œå®¹å™¨ï¼š</h4>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d ubuntu:18.04</span><br></pre></td></tr></table></figure>
<p>ï¼ï¼åˆ©ç”¨-då‚æ•°åœ¨åå°è¿è¡Œå®¹å™¨ï¼ï¼ï¼</p>
<p>æ³¨æ„ï¼šå®¹å™¨æ˜¯å¦ä¼šé•¿ä¹…è¿è¡Œï¼Œæ˜¯å’Œ <code>docker run</code>
æŒ‡å®šçš„å‘½ä»¤æœ‰å…³ï¼Œå’Œ <code>-d</code> å‚æ•°æ— å…³ï¼ï¼ï¼</p>
<p>ä½¿ç”¨ <code>-d</code> å‚æ•°å¯åŠ¨åä¼šè¿”å›ä¸€ä¸ªå”¯ä¸€çš„ idï¼Œä¹Ÿå¯ä»¥é€šè¿‡
<code>docker container ls</code> å‘½ä»¤æ¥æŸ¥çœ‹å®¹å™¨ä¿¡æ¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker container ls</span><br><span class="line">CONTAINER ID  IMAGE         COMMAND               CREATED        STATUS       PORTS NAMES</span><br><span class="line">77b2dc01fe0f  ubuntu:18.04  /bin/sh -c &#x27;while tr  2 minutes ago  Up 1 minute        agitated_wright</span><br></pre></td></tr></table></figure>
<p>è¦è·å–å®¹å™¨çš„è¾“å‡ºä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ <code>docker container logs</code>
å‘½ä»¤ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker container logs [container ID or NAMES]</span><br><span class="line">hello world</span><br><span class="line">hello world</span><br><span class="line">hello world</span><br><span class="line">. . .</span><br></pre></td></tr></table></figure>
<h4 id="ç»ˆæ­¢å®¹å™¨">3ã€ç»ˆæ­¢å®¹å™¨</h4>
<p>å¯ä»¥ä½¿ç”¨ <code>docker container stop</code>
æ¥ç»ˆæ­¢ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ã€‚</p>
<p>æ­¤å¤–ï¼Œå½“ Docker å®¹å™¨ä¸­æŒ‡å®šçš„åº”ç”¨ç»ˆç»“æ—¶ï¼Œå®¹å™¨ä¹Ÿè‡ªåŠ¨ç»ˆæ­¢</p>
<p>å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ï¼Œå¯ä»¥é€šè¿‡ <code>docker container start</code>
å‘½ä»¤æ¥é‡æ–°å¯åŠ¨ã€‚</p>
<p>æ­¤å¤–ï¼Œ<code>docker container restart</code>
å‘½ä»¤ä¼šå°†ä¸€ä¸ªè¿è¡Œæ€çš„å®¹å™¨ç»ˆæ­¢ï¼Œç„¶åå†é‡æ–°å¯åŠ¨å®ƒã€‚</p>
<h4 id="è¿›å…¥å®¹å™¨">4ã€è¿›å…¥å®¹å™¨ï¼š</h4>
<p>docker exec å‘½ä»¤</p>
<p><code>docker exec</code> åè¾¹å¯ä»¥è·Ÿå¤šä¸ªå‚æ•°ï¼Œè¿™é‡Œä¸»è¦è¯´æ˜
<code>-i</code> <code>-t</code> å‚æ•°ã€‚</p>
<h4 id="å¯¼å‡ºå®¹å™¨">5ã€å¯¼å‡ºå®¹å™¨ï¼š</h4>
<p>å¦‚æœè¦å¯¼å‡ºæœ¬åœ°æŸä¸ªå®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>docker export</code>
å‘½ä»¤ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker container ls -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                    PORTS               NAMES</span><br><span class="line">7691a814370e        ubuntu:18.04        &quot;/bin/bash&quot;         36 hours ago        Exited (0) 21 hours ago                       test</span><br><span class="line">$ docker export 7691a814370e &gt; ubuntu.tar</span><br></pre></td></tr></table></figure>
<h4 id="å¯¼å…¥å®¹å™¨">6ã€å¯¼å…¥å®¹å™¨ï¼š</h4>
<p>å¯ä»¥ä½¿ç”¨ <code>docker import</code> ä»å®¹å™¨å¿«ç…§æ–‡ä»¶ä¸­å†å¯¼å…¥ä¸ºé•œåƒ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ cat ubuntu.tar | docker import - test/ubuntu:v1.0</span><br><span class="line">$ docker image ls</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED              VIRTUAL SIZE</span><br><span class="line">test/ubuntu         v1.0                9d37a6082e97        About a minute ago   171.3 MB</span><br></pre></td></tr></table></figure>
<p>â€‹ ç”¨æˆ·æ—¢å¯ä»¥ä½¿ç”¨
<code>docker load</code>æ¥å¯¼å…¥é•œåƒå­˜å‚¨æ–‡ä»¶åˆ°æœ¬åœ°é•œåƒåº“ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨
<em><code>docker import</code></em>
æ¥å¯¼å…¥ä¸€ä¸ªå®¹å™¨å¿«ç…§åˆ°æœ¬åœ°é•œåƒåº“ã€‚è¿™ä¸¤è€…çš„åŒºåˆ«åœ¨äºå®¹å™¨å¿«ç…§æ–‡ä»¶å°†ä¸¢å¼ƒæ‰€æœ‰çš„å†å²è®°å½•å’Œå…ƒæ•°æ®ä¿¡æ¯ï¼ˆå³ä»…ä¿å­˜å®¹å™¨å½“æ—¶çš„å¿«ç…§çŠ¶æ€ï¼‰ï¼Œè€Œé•œåƒå­˜å‚¨æ–‡ä»¶å°†ä¿å­˜å®Œæ•´è®°å½•ï¼Œä½“ç§¯ä¹Ÿè¦å¤§ã€‚æ­¤å¤–ï¼Œä»å®¹å™¨å¿«ç…§æ–‡ä»¶å¯¼å…¥æ—¶å¯ä»¥é‡æ–°æŒ‡å®šæ ‡ç­¾ç­‰å…ƒæ•°æ®ä¿¡æ¯ã€‚*</p>
<h4
id="åˆ é™¤å®¹å™¨æˆ–æ¸…ç†æ‰€æœ‰å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨">7ã€åˆ é™¤å®¹å™¨æˆ–æ¸…ç†æ‰€æœ‰å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ï¼š</h4>
<p>â€‹ å¯ä»¥ä½¿ç”¨ <code>docker container rm</code>
æ¥åˆ é™¤ä¸€ä¸ªå¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ã€‚ä¾‹å¦‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker container rm trusting_newton</span><br><span class="line">trusting_newton</span><br></pre></td></tr></table></figure>
<p>â€‹ ç”¨ <code>docker container ls -a</code>
å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å·²ç»åˆ›å»ºçš„åŒ…æ‹¬ç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ï¼Œå¦‚æœæ•°é‡å¤ªå¤šè¦ä¸€ä¸ªä¸ªåˆ é™¤å¯èƒ½ä¼šå¾ˆéº»çƒ¦ï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤å¯ä»¥æ¸…ç†æ‰æ‰€æœ‰å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker container prune</span><br></pre></td></tr></table></figure>
<h2 id="äº”è®¿é—®ä»“åº“">äº”ã€è®¿é—®ä»“åº“</h2>
<p>â€‹
ä¸€ä¸ªå®¹æ˜“æ··æ·†çš„æ¦‚å¿µæ˜¯æ³¨å†ŒæœåŠ¡å™¨ï¼ˆ<code>Registry</code>ï¼‰ã€‚å®é™…ä¸Šæ³¨å†ŒæœåŠ¡å™¨æ˜¯ç®¡ç†ä»“åº“çš„å…·ä½“æœåŠ¡å™¨ï¼Œæ¯ä¸ªæœåŠ¡å™¨ä¸Šå¯ä»¥æœ‰å¤šä¸ªä»“åº“ï¼Œè€Œæ¯ä¸ªä»“åº“ä¸‹é¢æœ‰å¤šä¸ªé•œåƒã€‚ä»è¿™æ–¹é¢æ¥è¯´ï¼Œä»“åº“å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå…·ä½“çš„é¡¹ç›®æˆ–ç›®å½•ã€‚ä¾‹å¦‚å¯¹äºä»“åº“åœ°å€
<code>docker.io/ubuntu</code> æ¥è¯´ï¼Œ<code>docker.io</code>
æ˜¯æ³¨å†ŒæœåŠ¡å™¨åœ°å€ï¼Œ<code>ubuntu</code> æ˜¯ä»“åº“åã€‚</p>
<h4 id="ç™»å½•ä»“åº“">ç™»å½•ä»“åº“</h4>
<p>ï¼ï¼å¯ä»¥é€šè¿‡æ‰§è¡Œ <code>docker login</code>
å‘½ä»¤äº¤äº’å¼çš„è¾“å…¥ç”¨æˆ·ååŠå¯†ç æ¥å®Œæˆåœ¨å‘½ä»¤è¡Œç•Œé¢ç™»å½• Docker Hubã€‚</p>
<p>ï¼ï¼ä½ å¯ä»¥é€šè¿‡ <code>docker logout</code> é€€å‡ºç™»å½•ã€‚</p>
<h4 id="é•œåƒæŸ¥æ‰¾">é•œåƒæŸ¥æ‰¾</h4>
<p>ä½ å¯ä»¥é€šè¿‡ <code>docker search</code>
å‘½ä»¤æ¥æŸ¥æ‰¾å®˜æ–¹ä»“åº“ä¸­çš„é•œåƒï¼Œå¹¶åˆ©ç”¨ <code>docker pull</code>
å‘½ä»¤æ¥å°†å®ƒä¸‹è½½åˆ°æœ¬åœ°ã€‚</p>
<p>ä¾‹å¦‚ä»¥ <code>centos</code> ä¸ºå…³é”®è¯è¿›è¡Œæœç´¢ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker search centos</span><br><span class="line">NAME                               DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br><span class="line">centos                             The official build of CentOS.                   6449      [OK]</span><br><span class="line">ansible/centos7-ansible            Ansible on Centos7                              132                  [OK]</span><br><span class="line">consol/centos-xfce-vnc             Centos container with &quot;headless&quot; VNC sessionâ€¦   126                  [OK]</span><br><span class="line">jdeathe/centos-ssh                 OpenSSH / Supervisor / EPEL/IUS/SCL Repos - â€¦   117                  [OK]</span><br><span class="line">centos/systemd                     systemd enabled base container.                 96                   [OK]</span><br></pre></td></tr></table></figure>
<p>â€‹
å¯ä»¥çœ‹åˆ°è¿”å›äº†å¾ˆå¤šåŒ…å«å…³é”®å­—çš„é•œåƒï¼Œå…¶ä¸­åŒ…æ‹¬é•œåƒåå­—ã€æè¿°ã€æ”¶è—æ•°ï¼ˆè¡¨ç¤ºè¯¥é•œåƒçš„å—å…³æ³¨ç¨‹åº¦ï¼‰ã€æ˜¯å¦å®˜æ–¹åˆ›å»ºï¼ˆ<code>OFFICIAL</code>ï¼‰ã€æ˜¯å¦è‡ªåŠ¨æ„å»º
ï¼ˆ<code>AUTOMATED</code>ï¼‰ã€‚</p>
<p>â€‹ æ ¹æ®æ˜¯å¦æ˜¯å®˜æ–¹æä¾›ï¼Œå¯å°†é•œåƒåˆ†ä¸ºä¸¤ç±»ã€‚</p>
<p>â€‹ ä¸€ç§æ˜¯ç±»ä¼¼ <code>centos</code>
è¿™æ ·çš„é•œåƒï¼Œè¢«ç§°ä¸ºåŸºç¡€é•œåƒæˆ–æ ¹é•œåƒã€‚è¿™äº›åŸºç¡€é•œåƒç”± Docker
å…¬å¸åˆ›å»ºã€éªŒè¯ã€æ”¯æŒã€æä¾›ã€‚è¿™æ ·çš„é•œåƒå¾€å¾€ä½¿ç”¨å•ä¸ªå•è¯ä½œä¸ºåå­—ã€‚</p>
<p>â€‹ è¿˜æœ‰ä¸€ç§ç±»å‹ï¼Œæ¯”å¦‚ <code>ansible/centos7-ansible</code> é•œåƒï¼Œå®ƒæ˜¯ç”±
Docker Hub çš„æ³¨å†Œç”¨æˆ·åˆ›å»ºå¹¶ç»´æŠ¤çš„ï¼Œå¾€å¾€å¸¦æœ‰ç”¨æˆ·åç§°å‰ç¼€ã€‚å¯ä»¥é€šè¿‡å‰ç¼€
<code>username/</code> æ¥æŒ‡å®šä½¿ç”¨æŸä¸ªç”¨æˆ·æä¾›çš„é•œåƒï¼Œæ¯”å¦‚ ansible
ç”¨æˆ·ã€‚</p>
<h4 id="æ¨é€é•œåƒ">æ¨é€é•œåƒ</h4>
<p>ç”¨æˆ·ä¹Ÿå¯ä»¥åœ¨ç™»å½•åé€šè¿‡ <code>docker push</code>
å‘½ä»¤æ¥å°†è‡ªå·±çš„é•œåƒæ¨é€åˆ° Docker Hubã€‚</p>
<p>ä»¥ä¸‹å‘½ä»¤ä¸­çš„ <code>username</code> è¯·æ›¿æ¢ä¸ºä½ çš„ Docker è´¦å·ç”¨æˆ·å</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker tag ubuntu:18.04 username/ubuntu:18.04</span><br><span class="line"></span><br><span class="line">$ docker image ls</span><br><span class="line"></span><br><span class="line">REPOSITORY                                               TAG                    IMAGE ID            CREATED             SIZE</span><br><span class="line">ubuntu                                                   18.04                  275d79972a86        6 days ago          94.6MB</span><br><span class="line">username/ubuntu                                          18.04                  275d79972a86        6 days ago          94.6MB</span><br><span class="line"></span><br><span class="line">$ docker push username/ubuntu:18.04</span><br></pre></td></tr></table></figure>
<h4 id="è‡ªåŠ¨æ„å»º">è‡ªåŠ¨æ„å»º</h4>
<p>è‡ªåŠ¨æ„å»ºï¼ˆ<code>Automated Builds</code>ï¼‰åŠŸèƒ½å¯¹äºéœ€è¦ç»å¸¸å‡çº§é•œåƒå†…ç¨‹åºæ¥è¯´ï¼Œååˆ†æ–¹ä¾¿ã€‚</p>
<p>æœ‰æ—¶å€™ï¼Œç”¨æˆ·æ„å»ºäº†é•œåƒï¼Œå®‰è£…äº†æŸä¸ªè½¯ä»¶ï¼Œå½“è½¯ä»¶å‘å¸ƒæ–°ç‰ˆæœ¬åˆ™éœ€è¦æ‰‹åŠ¨æ›´æ–°é•œåƒã€‚</p>
<p>è€Œè‡ªåŠ¨æ„å»ºå…è®¸ç”¨æˆ·é€šè¿‡ Docker Hub æŒ‡å®šè·Ÿè¸ªä¸€ä¸ªç›®æ ‡ç½‘ç«™ï¼ˆæ”¯æŒ <a
href="https://github.com/">GitHub</a> æˆ– <a
href="https://bitbucket.org/">BitBucket</a>ï¼‰ä¸Šçš„é¡¹ç›®ï¼Œä¸€æ—¦é¡¹ç›®å‘ç”Ÿæ–°çš„æäº¤
ï¼ˆ<code>commit</code>ï¼‰æˆ–è€…åˆ›å»ºäº†æ–°çš„æ ‡ç­¾ï¼ˆ<code>tag</code>ï¼‰ï¼ŒDocker
Hub ä¼šè‡ªåŠ¨æ„å»ºé•œåƒå¹¶æ¨é€åˆ° Docker Hub ä¸­ã€‚</p>
<p>è¦é…ç½®è‡ªåŠ¨æ„å»ºï¼ŒåŒ…æ‹¬å¦‚ä¸‹çš„æ­¥éª¤ï¼š</p>
<ul>
<li>ç™»å½• Docker Hubï¼›</li>
<li>åœ¨ Docker Hub
ç‚¹å‡»å³ä¸Šè§’å¤´åƒï¼Œåœ¨è´¦å·è®¾ç½®ï¼ˆ<code>Account Settings</code>ï¼‰ä¸­å…³è”ï¼ˆ<code>Linked Accounts</code>ï¼‰ç›®æ ‡ç½‘ç«™ï¼›</li>
<li>åœ¨ Docker Hub ä¸­æ–°å»ºæˆ–é€‰æ‹©å·²æœ‰çš„ä»“åº“ï¼Œåœ¨ <code>Builds</code>
é€‰é¡¹å¡ä¸­é€‰æ‹© <code>Configure Automated Builds</code>ï¼›</li>
<li>é€‰å–ä¸€ä¸ªç›®æ ‡ç½‘ç«™ä¸­çš„é¡¹ç›®ï¼ˆéœ€è¦å«
<code>Dockerfile</code>ï¼‰å’Œåˆ†æ”¯ï¼›</li>
<li>æŒ‡å®š <code>Dockerfile</code> çš„ä½ç½®ï¼Œå¹¶ä¿å­˜ã€‚</li>
</ul>
<p>ä¹‹åï¼Œå¯ä»¥åœ¨ Docker Hub çš„ä»“åº“é¡µé¢çš„ <code>Timeline</code>
é€‰é¡¹å¡ä¸­æŸ¥çœ‹æ¯æ¬¡æ„å»ºçš„çŠ¶æ€</p>
<h2 id="å…­æ•°æ®ç®¡ç†">å…­ã€æ•°æ®ç®¡ç†</h2>
<h3 id="å¦‚ä½•åœ¨-docker-å†…éƒ¨ä»¥åŠå®¹å™¨ä¹‹é—´ç®¡ç†æ•°æ®">ï¼ï¼å¦‚ä½•åœ¨ Docker
å†…éƒ¨ä»¥åŠå®¹å™¨ä¹‹é—´ç®¡ç†æ•°æ®ï¼Œ</h3>
<h3
id="åœ¨å®¹å™¨ä¸­ç®¡ç†æ•°æ®ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼">ï¼ï¼åœ¨å®¹å™¨ä¸­ç®¡ç†æ•°æ®ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š</h3>
<ul>
<li>æ•°æ®å·ï¼ˆVolumesï¼‰</li>
<li>æŒ‚è½½ä¸»æœºç›®å½• (Bind mounts)</li>
</ul>
<h4 id="æ•°æ®å·">æ•°æ®å·</h4>
<p><code>æ•°æ®å·</code> æ˜¯ä¸€ä¸ªå¯ä¾›ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä½¿ç”¨çš„ç‰¹æ®Šç›®å½•ï¼Œå®ƒç»•è¿‡
UFSï¼Œå¯ä»¥æä¾›å¾ˆå¤šæœ‰ç”¨çš„ç‰¹æ€§ï¼š</p>
<ul>
<li><code>æ•°æ®å·</code> å¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«å’Œé‡ç”¨</li>
<li>å¯¹ <code>æ•°æ®å·</code> çš„ä¿®æ”¹ä¼šç«‹é©¬ç”Ÿæ•ˆ</li>
<li>å¯¹ <code>æ•°æ®å·</code> çš„æ›´æ–°ï¼Œä¸ä¼šå½±å“é•œåƒ</li>
<li><code>æ•°æ®å·</code> é»˜è®¤ä¼šä¸€ç›´å­˜åœ¨ï¼Œå³ä½¿å®¹å™¨è¢«åˆ é™¤</li>
</ul>
<p>åˆ›å»ºä¸€ä¸ªæ•°æ®å·</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker volume create my-vol</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹æ‰€æœ‰çš„ <code>æ•°æ®å·</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker volume ls</span><br><span class="line"></span><br><span class="line">DRIVER              VOLUME NAME</span><br><span class="line">local               my-vol</span><br></pre></td></tr></table></figure>
<h4 id="å¯åŠ¨ä¸€ä¸ªæŒ‚è½½æ•°æ®å·çš„å®¹å™¨">å¯åŠ¨ä¸€ä¸ªæŒ‚è½½æ•°æ®å·çš„å®¹å™¨</h4>
<p>åœ¨ç”¨ <code>docker run</code> å‘½ä»¤çš„æ—¶å€™ï¼Œä½¿ç”¨ <code>--mount</code>
æ ‡è®°æ¥å°† <code>æ•°æ®å·</code> æŒ‚è½½åˆ°å®¹å™¨é‡Œã€‚åœ¨ä¸€æ¬¡
<code>docker run</code> ä¸­å¯ä»¥æŒ‚è½½å¤šä¸ª <code>æ•°æ®å·</code>ã€‚</p>
<p>ä¸‹é¢åˆ›å»ºä¸€ä¸ªåä¸º <code>web</code> çš„å®¹å™¨ï¼Œå¹¶åŠ è½½ä¸€ä¸ª
<code>æ•°æ®å·</code> åˆ°å®¹å™¨çš„ <code>/usr/share/nginx/html</code> ç›®å½•</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker run -d -P \</span><br><span class="line">    --name web \</span><br><span class="line">    # -v my-vol:/usr/share/nginx/html \</span><br><span class="line">    --mount source=my-vol,target=/usr/share/nginx/html \</span><br><span class="line">    nginx:alpine</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹æ•°æ®å·çš„å…·ä½“ä¿¡æ¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker inspect web</span><br></pre></td></tr></table></figure>
<p>!!!<code>æ•°æ®å·</code>
æ˜¯è¢«è®¾è®¡ç”¨æ¥æŒä¹…åŒ–æ•°æ®çš„ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸç‹¬ç«‹äºå®¹å™¨ï¼ŒDocker
ä¸ä¼šåœ¨å®¹å™¨è¢«åˆ é™¤åè‡ªåŠ¨åˆ é™¤
<code>æ•°æ®å·</code>ï¼Œå¹¶ä¸”ä¹Ÿä¸å­˜åœ¨åƒåœ¾å›æ”¶è¿™æ ·çš„æœºåˆ¶æ¥å¤„ç†æ²¡æœ‰ä»»ä½•å®¹å™¨å¼•ç”¨çš„
<code>æ•°æ®å·</code>ã€‚å¦‚æœéœ€è¦åœ¨åˆ é™¤å®¹å™¨çš„åŒæ—¶ç§»é™¤æ•°æ®å·ã€‚å¯ä»¥åœ¨åˆ é™¤å®¹å™¨çš„æ—¶å€™ä½¿ç”¨
<code>docker rm -v</code> è¿™ä¸ªå‘½ä»¤</p>
<p>åˆ é™¤æ•°æ®å·æ—¶è¯·é‡‡ç”¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker volume rm my-vol</span><br></pre></td></tr></table></figure>
<h4 id="æŒ‚è½½ä¸»æœºç›®å½•">æŒ‚è½½ä¸»æœºç›®å½•</h4>
<p>ä½¿ç”¨ <code>--mount</code>
æ ‡è®°å¯ä»¥æŒ‡å®šæŒ‚è½½ä¸€ä¸ªæœ¬åœ°ä¸»æœºçš„ç›®å½•åˆ°å®¹å™¨ä¸­å»ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker run -d -P \</span><br><span class="line">    --name web \</span><br><span class="line">    # -v /src/webapp:/usr/share/nginx/html \</span><br><span class="line">    --mount type=bind,source=/src/webapp,target=/usr/share/nginx/html \</span><br><span class="line">    nginx:alpine</span><br></pre></td></tr></table></figure>
<h2 id="ä¸ƒç½‘ç»œåº”ç”¨">ä¸ƒã€ç½‘ç»œåº”ç”¨</h2>
<p>â€‹ å®¹å™¨ä¸­å¯ä»¥è¿è¡Œä¸€äº›ç½‘ç»œåº”ç”¨ï¼Œè¦è®©å¤–éƒ¨ä¹Ÿå¯ä»¥è®¿é—®è¿™äº›åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡
<code>-P</code> æˆ– <code>-p</code> å‚æ•°æ¥æŒ‡å®šç«¯å£æ˜ å°„ã€‚</p>
<p>å½“ä½¿ç”¨ <code>-P</code> æ ‡è®°æ—¶ï¼ŒDocker
ä¼šéšæœºæ˜ å°„ä¸€ä¸ªç«¯å£åˆ°å†…éƒ¨å®¹å™¨å¼€æ”¾çš„ç½‘ç»œç«¯å£ã€‚</p>
<p>â€‹ ä½¿ç”¨ <code>docker container ls</code> å¯ä»¥çœ‹åˆ°ï¼Œæœ¬åœ°ä¸»æœºçš„ 32768
è¢«æ˜ å°„åˆ°äº†å®¹å™¨çš„ 80 ç«¯å£ã€‚æ­¤æ—¶è®¿é—®æœ¬æœºçš„ 32768 ç«¯å£å³å¯è®¿é—®å®¹å™¨å†… NGINX
é»˜è®¤é¡µé¢ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker run -d -P nginx:alpine</span><br><span class="line"></span><br><span class="line">$ docker container ls -l</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                   NAMES</span><br><span class="line"></span><br><span class="line">fae320d08268        nginx:alpine        &quot;/docker-entrypoint.â€¦&quot;   24 seconds ago      Up 20 seconds       0.0.0.0:32768-&gt;80/tcp   bold_mcnulty</span><br></pre></td></tr></table></figure>
<p>â€‹ <code>-p</code>
åˆ™å¯ä»¥æŒ‡å®šè¦æ˜ å°„çš„ç«¯å£ï¼Œå¹¶ä¸”ï¼Œåœ¨ä¸€ä¸ªæŒ‡å®šç«¯å£ä¸Šåªå¯ä»¥ç»‘å®šä¸€ä¸ªå®¹å™¨ã€‚æ”¯æŒçš„æ ¼å¼æœ‰
<code>ip:hostPort:containerPort | ip::containerPort | hostPort:containerPort</code>ã€‚</p>
<h4 id="æŸ¥çœ‹æ˜ å°„ç«¯å£é…ç½®">æŸ¥çœ‹æ˜ å°„ç«¯å£é…ç½®</h4>
<p>â€‹ ä½¿ç”¨ <code>docker port</code>
æ¥æŸ¥çœ‹å½“å‰æ˜ å°„çš„ç«¯å£é…ç½®ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹åˆ°ç»‘å®šçš„åœ°å€</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker port fa 80</span><br><span class="line">0.0.0.0:32768</span><br></pre></td></tr></table></figure>
<h3 id="æ³¨æ„">æ³¨æ„ï¼š</h3>
<ul>
<li>å®¹å™¨æœ‰è‡ªå·±çš„å†…éƒ¨ç½‘ç»œå’Œ ip åœ°å€ï¼ˆä½¿ç”¨ <code>docker inspect</code>
æŸ¥çœ‹ï¼ŒDocker è¿˜å¯ä»¥æœ‰ä¸€ä¸ªå¯å˜çš„ç½‘ç»œé…ç½®ã€‚ï¼‰</li>
<li><code>-p</code> æ ‡è®°å¯ä»¥å¤šæ¬¡ä½¿ç”¨æ¥ç»‘å®šå¤šä¸ªç«¯å£</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ docker run -d \</span><br><span class="line">    -p 80:80 \</span><br><span class="line">    -p 443:443 \</span><br><span class="line">    nginx:alpine</span><br></pre></td></tr></table></figure>
<h4 id="å…«ä½¿ç”¨dockerfileå®šåˆ¶é•œåƒ">å…«ã€ä½¿ç”¨DockerFIleå®šåˆ¶é•œåƒ</h4>
<p>â€‹ Dockerfile æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå…¶å†…åŒ…å«äº†ä¸€æ¡æ¡çš„
<strong>æŒ‡ä»¤(Instruction)</strong>ï¼Œæ¯ä¸€æ¡æŒ‡ä»¤æ„å»ºä¸€å±‚ï¼Œå› æ­¤æ¯ä¸€æ¡æŒ‡ä»¤çš„å†…å®¹ï¼Œå°±æ˜¯æè¿°è¯¥å±‚åº”å½“å¦‚ä½•æ„å»ºã€‚</p>
]]></content>
      <categories>
        <category>â“º å·¥å…·ä½¿ç”¨ç±»ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>GANç³»åˆ—ç¬”è®°1â€”â€”GANçš„åŸºæœ¬ç†å¿µä¸æ€æƒ³</title>
    <url>/2021/11/30/9fbfb5044884/</url>
    <content><![CDATA[<h3 id="å‰è¨€">å‰è¨€ï¼š</h3>
<p>â€‹
æœ¬ç¯‡ç¬”è®°ä¸ºè§‚çœ‹æå®æ¯…è€å¸ˆçš„GANç›¸å…³è¯¾ç¨‹åæ‰€è®°å½•ï¼Œæ–‡ä¸­æ‰€æœ‰å›¾ç‰‡åŠå†…å®¹å‡æ¥æºäºæå®æ¯…è€å¸ˆçš„è¯¾ç¨‹ï¼Œæ­¤å¤„åªæ˜¯æ¬è¿+ä»¥è‡ªå·±çš„ç†è§£è¿›è¡Œè®°å½•ã€‚å…¨æ–‡æŒ‰ç…§æå®æ¯…è€å¸ˆè®²è¯¾çš„é€»è¾‘è¿›è¡Œè®°å½•ï¼Œå…ˆä»GANçš„åŸºæœ¬ç†è®ºæ¦‚å¿µè®²èµ·ï¼Œä¸­é—´æåŠäº†Structure
Learningçš„é—®é¢˜ï¼Œç„¶åå›ç­”äº†GANä¸­çš„ä¸¤ä¸ªç»å…¸çš„é—®é¢˜ï¼Œç„¶åå¯¹VAEå’ŒGANçš„ç»“æœåšäº†ç®€å•çš„æ¯”è¾ƒï¼Œæœ€ååšäº†æ€»ç»“ï¼Œçœ‹å®Œä»¥ååº”è¯¥ä¼šå¯¹GANæœ‰ä¸€ä¸ªå®Œæ•´çš„æ¦‚å¿µä¸ç†è§£ã€‚å…¨æ–‡å…±4800å­—å·¦å³ã€‚</p>
<h3 id="ä¸€basic-idea-åŸºæœ¬æ¦‚å¿µ">ä¸€ã€Basic Idea åŸºæœ¬æ¦‚å¿µ</h3>
<p>â€‹
GANæ˜¯å®Œæˆäº†ä¸€ä¸ªGenerationçš„ä»»åŠ¡ï¼Œä»ç›®æ ‡ä¸Šè€Œè¨€ï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬è¦è®­ç»ƒä¸€ä¸ªNNçš„generatorï¼Œè¿™ä¸ªgeneratorå¯ä»¥å®Œæˆä¸‹è¿°ä»»åŠ¡ï¼šä½ ç»™æœºå™¨ä¸€ä¸ªéšæœºçš„å‘é‡ï¼Œæœºå™¨å°±å¯ä»¥ç»™ä½ è¾“å‡ºä½ æƒ³è¦çš„ç‰©ä½“ï¼ˆå¯ä»¥æ˜¯å›¾åƒä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ï¼‰ã€‚ï¼ˆå½“ç„¶ï¼Œè¿™ç§ç±»å‹çš„generatorçœ‹ä¸Šå»æ˜¯æ²¡ä»€ä¹ˆç”¨çš„ï¼Œå› ä¸ºä½ ä¸çŸ¥é“éšæœºå‘é‡åˆ°åº•ä¼šç”Ÿæˆä»€ä¹ˆæ ·å­çš„ä¸œè¥¿ï¼Œä½†é€šå¸¸å‘é‡çš„æ¯ä¸ªç»´åº¦å¯èƒ½å°±æ˜¯ç”¨äºæ§åˆ¶è¾“å‡ºå›¾åƒçš„ä¸€ä¸ªç‰¹å¾éƒ¨åˆ†ï¼Œç°åœ¨æš‚æ—¶æˆ‘ä»¬åªä¸“æ³¨äºå®Œæˆè¿™æ ·ä¸€ä¸ªéšæœºçš„ä»»åŠ¡éƒ¨åˆ†ï¼‰ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114214941737.png" /></p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114214945273.png"
alt="image-20220114214945273" />
<figcaption aria-hidden="true">image-20220114214945273</figcaption>
</figure>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114214948402.png"
alt="image-20220114214948402" />
<figcaption aria-hidden="true">image-20220114214948402</figcaption>
</figure>
<p>â€‹
GANæ¯”è¾ƒç¥å¥‡çš„ç‚¹åœ¨äºå…¶è¿˜ä¼šåŒæ—¶è®­ç»ƒä¸€ä¸ªDiscriminatorï¼Œå³åˆ¤åˆ«å™¨ã€‚ä»ç›®æ ‡ä¸Šè€Œè¨€ï¼Œå…¶è¦å®Œæˆå¦‚ä¸‹ä»»åŠ¡:è¾“å…¥ä¸€ä¸ªå›¾åƒï¼Œè¾“å‡ºä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼è¶Šå¤§ï¼Œä»£è¡¨å›¾åƒè¶ŠçœŸå®ã€‚å€¼è¶Šå°ï¼Œä»£è¡¨å›¾åƒè¶Šè™šå‡ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114214959500.png" /></p>
<p>â€‹
é‚£ä¹ˆåœ¨GANä¸­ï¼ŒGeneratorå’ŒDiscriminatorçš„å…³ç³»å…¶å®å°±æ˜¯å¯¹æŠ—ç«äº‰ï¼Œæˆ–è€…è¯´äº’ç›¸å¸®åŠ©äº’ç›¸è¿›æ­¥çš„å…³ç³»ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šç¬¬ä¸€ä»£çš„ç”Ÿæˆå™¨ç”Ÿæˆçš„ä¸œè¥¿ï¼Œäº¤ç»™ç¬¬ä¸€ä»£åˆ¤åˆ«å™¨ã€‚ç¬¬ä¸€ä»£ç”Ÿæˆå™¨åœ¨ç¬¬ä¸€ä»£åˆ¤åˆ«å™¨çš„åé¦ˆä¸‹ï¼Œè¿›åŒ–ä¸ºç¬¬äºŒä»£çš„ç”Ÿæˆå™¨ï¼Œç„¶ååˆ¤åˆ«å™¨ä¹Ÿéšä¹‹è¿›åŒ–ä¸ºç¬¬äºŒä»£ï¼Œå¾ªç¯å¾€å¤ä¸‹å»ï¼ˆæœ‰ä¸€ç§é“é«˜ä¸€å°ºï¼Œé­”é«˜ä¸€ä¸ˆçš„æ„Ÿè§‰ï¼‰</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215010569.png" /></p>
<p>â€‹
ä¸€ä¸ªæ›´å¥½çš„æ¯”æ–¹ï¼Œä¸‹å›¾ä¸­ï¼ŒGeneratorå’ŒDiscriminatorå°±åƒæ˜¯å­¦ç”Ÿå’Œè€å¸ˆåœ¨å¯¹è¯ä¸€æ ·ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå­¦ç”Ÿé€æ¸è¿›æ­¥ã€‚è€å¸ˆçš„è¦æ±‚æ ‡å‡†ä¹Ÿè¶Šæ¥è¶Šé«˜ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215031820.png" /></p>
<p>â€‹
åœ¨è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ä¸­ï¼Œç•™ä¸‹ä¸¤ä¸ªç–‘é—®ï¼šGeneratoråšç”Ÿæˆä¸ºä»€ä¹ˆä¸è‡ªå·±å­¦æé«˜æ°´å¹³å‘¢ï¼ŸDiscriminatorè¿™ä¹ˆä¼šæ‰¹è¯„ï¼Œä¸ºä»€ä¹ˆä¸è‡ªå·±åšç”Ÿæˆå‘¢ï¼Ÿã€è§£é‡Šä¸å›ç­”è§ç¬¬å››ç« ã€‘</p>
<p>â€‹ ç°åœ¨æˆ‘ä»¬å…ˆæ¥è®¨è®ºä¸€ä¸‹æ•´ä¸ªè®­ç»ƒçš„ç®—æ³•ä¼ªä»£ç è¿‡ç¨‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215049291.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215052840.png" /></p>
<p>â€‹
é¦–å…ˆæˆ‘ä»¬åˆå§‹åŒ–ç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨ï¼Œç„¶ååœ¨æ¯ä¸€ä¸ªè®­ç»ƒè¿­ä»£é˜¶æ®µï¼Œè¿›è¡Œä¸¤ä»¶äº‹ï¼š</p>
<p>â€‹
1ã€æˆ‘ä»¬å°†Generatorå›ºå®šä½ï¼Œè®­ç»ƒDiscriminatorçš„å‚æ•°ã€‚å…·ä½“è€Œè¨€ï¼Œæˆ‘ä»¬é¦–å…ˆéšæœºçš„è¾“å…¥ä¸€äº›å‘é‡ï¼Œé€šè¿‡Gç”Ÿæˆä¸€äº›éšæœºçš„generated
objectsï¼Œç„¶åå†ä»çœŸå®æ•°æ®åº“ä¸­å–å‡ºä¸€äº›objectsï¼Œå°†è¿™ä¸¤éƒ¨åˆ†å›¾ç‰‡ä½œä¸ºDçš„è¾“å…¥ï¼Œæ¥è®­ç»ƒDã€‚ç›®çš„æ˜¯è¦è®©Dçœ‹åˆ°generated
objects
å°±ç»™å‡ºå°½å¯èƒ½æ¥è¿‘0çš„åˆ†æ•°ï¼Œè®©Dçœ‹åˆ°çœŸå®çš„objectså°±ç»™å‡ºå°½å¯èƒ½æ¥è¿‘1çš„åˆ†æ•°ã€‚(å…¶å®å°±æ˜¯ç»™ä¸¤éƒ¨åˆ†å›¾ç‰‡æ‰“ä¸ªæ ‡ï¼Œç„¶åè®­ç»ƒä¸€ä¸ªåˆ†ç±»å™¨ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤º)</p>
<p>â€‹
2ã€å›ºå®šä½Discriminatorçš„å‚æ•°ï¼Œè°ƒæ•´ç”Ÿæˆå™¨çš„å‚æ•°ã€‚å…·ä½“è€Œè¨€å°±æ˜¯ï¼šå°†ä¸€ä¸ªéšæœºçš„vectorä¸¢å…¥ç”Ÿæˆå™¨é‡Œï¼Œç”Ÿæˆä¸€å¼ å›¾ç‰‡ï¼Œå°†å›¾ç‰‡æ”¾å…¥åˆ¤åˆ«å™¨ä¸­ï¼Œå¾—åˆ°ä¸€ä¸ªåˆ†æ•°ï¼Œæˆ‘ä»¬è®­ç»ƒæ­¤æ­¥çš„ç›®æ ‡æ˜¯è¦ä½¿æœ€åè¾“å‡ºçš„é‚£ä¸ªåˆ†æ•°è¶Šæ¥è¿‘1è¶Šå¥½ã€‚ä»ä»£ç ä¸Šï¼Œè¿™ä¸ªè¦æ€ä¹ˆè¿›è¡Œæ“ä½œå‘¢ï¼Ÿæˆ‘ä»¬å¾€å¾€ä¼šå°†ç”Ÿæˆå™¨çš„NNå’Œåˆ¤åˆ«å™¨çš„NNåˆå¹¶æˆä¸€ä¸ªå¤§çš„ç½‘ç»œï¼Œé”ä½åˆ¤åˆ«å™¨éƒ¨åˆ†å±‚çš„å‚æ•°ï¼Œè¿™ç›¸å½“äºè¿™ä¸ªå¤§çš„ç½‘ç»œä¸­é—´æœ‰ä¸€å±‚å¾ˆå®½çš„éšè—å±‚ï¼ˆå°±æ˜¯è¾“å‡ºå›¾ç‰‡é‚£ä¸€å±‚ï¼‰ï¼Œç„¶åæˆ‘ä»¬è¦ä½¿å¾—æœ€åç”Ÿæˆçš„ç»“æœè¶Šå¤§è¶Šå¥½ï¼Œå°±æ˜¯Gradient
Ascentï¼Œå…¶å®å°±æ˜¯åœ¨Objective
Functionä¸ŠåŠ ä¸€ä¸ªè´Ÿå·ï¼Œå°±å¯ä»¥å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚</p>
<p>â€‹ ä¸‹è¿°æ˜¯æ›´ä¸ºæ­£å¼çš„ç®—æ³•ä¼ªä»£ç ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215114053.png" /></p>
<p>è¦æ³¨æ„ï¼Œåœ¨è¿™ä¸ªç®—æ³•ä¸­ï¼Œæœ‰ä¸€äº›è¶…å‚æ•°æ˜¯éœ€è¦æ‰‹å·¥å»è°ƒæ•´ä»¥æ‰¾åˆ°æœ€ä½³æ•ˆæœçš„ï¼š</p>
<p>â€‹ 1ã€è¾“å…¥çš„å‘é‡çš„ç»´åº¦ï¼Œ5ç»´ã€10ç»´ã€â€¦â€¦</p>
<p>â€‹ 2ã€åœ¨æ¯ä¸€ä¸ªè¿­ä»£è¿‡ç¨‹ä¸­ï¼šæ›´æ–°åˆ¤åˆ«å™¨çš„æ¬¡æ•°ï¼Œå¯ä»¥æ˜¯1~næ¬¡ã€‚</p>
<p><strong>ç®—æ³•ä¸­çš„ä¸€äº›è§£é‡Šï¼š</strong></p>
<p>â€‹ 1ã€æ›´æ–°åˆ¤åˆ«å™¨å‚æ•°çš„æ—¶å€™çš„Objective Functionï¼š</p>
<p>â€‹ ç¬¬ä¸€é¡¹ï¼š<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215147446.png" />ä»£è¡¨çœŸå®æ•°æ®é›†çš„å›¾åƒè¿›åˆ°åˆ¤åˆ«å™¨ä¸­çš„åˆ†æ•°å‡å€¼ã€‚</p>
<p>â€‹ ç¬¬äºŒé¡¹ï¼š<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215201515.png" />ä»£è¡¨ç”Ÿæˆçš„å›¾åƒè¿›åˆ°åˆ¤åˆ«å™¨ä¸­çš„åˆ†æ•°è¢«1å‡å»åçš„å‡å€¼ã€‚</p>
<p>â€‹
æˆ‘ä»¬è¦è®©è¿™ä¸ªç›®æ ‡å‡½æ•°æœ€å¤§ï¼Œå…¶å®å°±æ˜¯å®Œæˆäº†æœ€å¼€å§‹è¯´çš„ï¼ŒçœŸå®æ•°æ®é›†å›¾åƒè¿›åˆ°åˆ¤åˆ«å™¨ä¸­ï¼Œåˆ†æ•°è¶Šæ¥è¿‘1è¶Šå¥½ï¼Œç”Ÿæˆå›¾åƒè¿›å…¥ï¼Œåˆ†æ•°è¶Šæ¥è¿‘0è¶Šå¥½ã€‚</p>
<p>â€‹ 2ã€æ›´æ–°ç”Ÿæˆå™¨å‚æ•°çš„æ—¶å€™çš„Objective Functionï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215238651.png" /></p>
<p>â€‹
å…¶å®å°±æ˜¯éšæœºå‘é‡é€šè¿‡ç”Ÿæˆå™¨ï¼Œå†é€šè¿‡åˆ¤åˆ«å™¨åï¼Œå¾—åˆ°çš„å‡å€¼è¶Šå¤§è¶Šå¥½ã€‚ç„¶åç”¨æ¢¯åº¦ä¸Šå‡æ–¹æ³•ï¼Œå»æœ€å¤§åŒ–è¿™ä¸ªç›®æ ‡å‡½æ•°ã€‚</p>
<h3 id="äºŒstructure-learning">äºŒã€Structure Learning</h3>
<p>â€‹ é¦–å…ˆï¼Œä»€ä¹ˆæ˜¯Structure
Learningï¼Ÿæœºå™¨å­¦ä¹ æœ¬èº«å…¶å®å°±æ˜¯æ‰¾åˆ°ä¸€ä¸ªå‡½æ•°fï¼Œå»å®ŒæˆX-&gt;Yè¿™æ ·ä¸€ä»¶äº‹æƒ…ã€‚å›å½’é—®é¢˜ï¼Œå…¶å®å°±æ˜¯è¾“å‡ºä¸€ä¸ªåˆ†æ•°ã€‚åˆ†ç±»é—®é¢˜å°±æ˜¯è¾“å‡ºä¸€ä¸ªç±»åˆ«ï¼Œç»“æ„åŒ–å­¦ä¹ å…¶å®å°±æ˜¯è¾“å‡ºä¸€ä¸ªæ›´å¤æ‚çš„æ¯”å¦‚è¯´ä¸€ä¸ªåºåˆ—ï¼Œä¸€ä¸ªçŸ©é˜µï¼Œä¸€ä¸ªå›¾ï¼Œä¸€ä¸ªæ ‘ç­‰ç­‰è¿™æ ·çš„é—®é¢˜ã€‚å¾€å¾€è¿™ç§å¤æ‚çš„ç»“æ„æ˜¯ç”±å¾ˆå¤šä¸ªç»„ä»¶ç»„æˆï¼Œå¹¶ä¸”è¿™äº›ç»„ä»¶ä¹‹é—´æ˜¯æœ‰å…³è”å…³ç³»çš„ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215309664.png" /></p>
<p>â€‹ ä¸ºä»€ä¹ˆStructure
Learningæ˜¯å¾ˆChallengingçš„å‘¢ï¼Ÿå…¶å®å°±æ˜¯å¦‚ä¸‹å›¾æ‰€è¯´çš„ï¼Œä¸€ä¸ªçš„è¯æ˜¯å®ƒå¯ä»¥è¢«è§†ä¸ºOne-shot
Learningæˆ–è€…æ˜¯Zero-shot Learningã€‚é‚£ä»€ä¹ˆæ˜¯One-Shot Learning
æˆ–è€…è¯´Zero-shot
Learningå‘¢ï¼Ÿä¾‹å¦‚ï¼Œåœ¨åˆ†ç±»ä½œä¸šä¸­ï¼Œæˆ‘ä»¬å¦‚æœéœ€è¦è®­ç»ƒï¼Œæ¯ä¸ªç±»åˆ«éƒ½éœ€è¦ç»™å‡ºä¸€ç³»åˆ—çš„æ•°æ®èŒƒä¾‹ã€‚è€ŒOne-Shot
Learning æˆ–è€…Zero-shot
Learningå°±æ˜¯æŒ‡ï¼Œå¯èƒ½æœ‰äº›ç±»åˆ«å®Œå…¨æ²¡æœ‰èŒƒä¾‹ï¼Œæˆ–è€…è¯´åªæœ‰å¾ˆå°‘çš„èŒƒä¾‹ã€‚</p>
<p>â€‹ Structure
Learningé‡Œé¢ï¼Œè¾“å‡ºçš„æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œä¹Ÿå°±æ˜¯è¯´å¾ˆæœ‰å¯èƒ½è®­ç»ƒçš„å¥å­é‡Œé¢æ˜¯å®Œå…¨ä¸ä¼šæœ‰é‡å¤çš„ä¸œè¥¿çš„ã€‚å¦‚æœæˆ‘ä»¬æŠŠæ‰€æœ‰çš„å¯èƒ½è¾“å‡ºéƒ½è§†ä¸ºä¸€ä¸ªç±»çš„è¯ï¼Œè¾“å‡ºçš„ç©ºé—´æ˜¯å¾ˆå·¨å¤§çš„ã€‚å¹¶ä¸”å¤§å¤šæ•°çš„ç±»éƒ½æ˜¯æ²¡æœ‰ä»»ä½•è®­ç»ƒæ•°æ®çš„ã€‚æ‰€ä»¥æœºå™¨éœ€è¦ä¸€å®šçš„åˆ›é€ æ€§ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215320786.png" /></p>
<p>â€‹ ç¬¬äºŒç‚¹çš„è¯ï¼Œåœ¨Structure
Learningä¸­ï¼Œæœºå™¨å¿…é¡»å­¦ä¼šè§„åˆ’ã€‚æœºå™¨å¯ä»¥ä¸€ä¸ªä¸ªç»„ä»¶çš„å»äº§ç”Ÿï¼Œä½†æ˜¯å®ƒä¸€å®šè¦å­¦ä¼šç»„ä»¶å’Œç»„ä»¶ä¹‹é—´çš„å…³ç³»ä¸é™åˆ¶ã€‚éœ€è¦å…¨å±€çš„å»è¿›è¡Œè€ƒè™‘ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215331213.png" /></p>
<h3 id="ä¸‰structure-learningçš„ä¸€äº›è§£å†³æ–¹æ¡ˆ">ä¸‰ã€Structure
Learningçš„ä¸€äº›è§£å†³æ–¹æ¡ˆ</h3>
<p>â€‹ åœ¨ä¼ ç»Ÿçš„æ–¹æ³•åˆ†ç±»ä¸­ï¼Œå…¶å®æœ‰ä¸¤ç±»ï¼šä¸€ç±»æ˜¯Bottom Upçš„æ–¹æ³•ï¼Œä¸€ç±»æ˜¯Top
Downçš„æ–¹æ³•ã€‚è‡ªåº•è€Œä¸Šçš„æ–¹æ³•ä¸»è¦æ˜¯å­¦ä¹ æ€ä¹ˆå»ç”ŸæˆComponentï¼Œç„¶åå†è¿›è¡Œåˆå¹¶ï¼Œè¿™ä¸ªå¾ˆåƒGeneratoråšçš„äº‹æƒ…ï¼Œä½†æ˜¯è¿™æ ·å¾ˆå®¹æ˜“å¤±å»å¤§å±€è§‚ã€‚è‡ªä¸Šè€Œä¸‹çš„æ–¹æ³•æ˜¯å­¦ä¼šè¯„ä¼°ä¸€ä¸ªç‰©ä½“ï¼Œç„¶åæ‰¾åˆ°æœ€å¥½çš„é‚£ä¸ªï¼Œè¿™ä¸ªå¾ˆåƒDiscriminatoråšçš„äº‹æƒ…ï¼Œä½†æ˜¯è¿™æ ·åšçš„é—®é¢˜æ˜¯å¾ˆéš¾åšç”Ÿæˆã€‚ã€ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´è§ç¬¬å››ç« ã€‘å…¶å®GANå°±æ˜¯è§£å†³Structure
Learningçš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œä»–å°±åƒæ˜¯æŠŠä¸¤ç§æ–¹æ³•åšäº†ç»“åˆã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215356504.png" /></p>
<h3
id="å››ä¸ºä»€ä¹ˆgeneratorä¸èƒ½è‡ªå·±å­¦ä¸ºä»€ä¹ˆdiscriminatorä¸èƒ½è‡ªå·±ç”Ÿæˆ">å››ã€ä¸ºä»€ä¹ˆGeneratorä¸èƒ½è‡ªå·±å­¦ï¼Ÿä¸ºä»€ä¹ˆDiscriminatorä¸èƒ½è‡ªå·±ç”Ÿæˆï¼Ÿ</h3>
<h4 id="generatorä¸ºä»€ä¹ˆä¸èƒ½è‡ªå·±å­¦">1ã€Generatorä¸ºä»€ä¹ˆä¸èƒ½è‡ªå·±å­¦ï¼Ÿ</h4>
<p>â€‹
åœ¨ä¼ ç»Ÿçš„æœ‰ç›‘ç£å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬åªè¦æœ‰å¤§é‡çš„çœŸå®å›¾ç‰‡æ•°æ®ï¼Œä»¥åŠä»–ä»¬å¯¹åº”çš„æ ‡ç­¾ï¼Œæˆ‘å°±å¯ä»¥å®Œæˆç”Ÿæˆå›¾ç‰‡è¿™æ ·ä¸€ä¸ªä»»åŠ¡ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215423815.png" /></p>
<p>â€‹
ä½†æ˜¯é—®é¢˜å°±æ¥äº†ï¼Œæˆ‘ä»¬æ€ä¹ˆç»™è¿™äº›çœŸå®å›¾ç‰‡æ•°æ®æ‰“æ ‡ç­¾å‘¢ï¼Ÿå¦‚æœæ˜¯éšæœºèµ‹ç»™ä»–ä»¬ä¸€äº›å‘é‡æ ‡ç­¾ï¼Œé‚£æœ€åçš„è®­ç»ƒæ˜¯ä¼šå¾ˆå›°éš¾çš„ã€‚å› ä¸ºæ¯”å¦‚è¯´æˆ‘ä»¬çœ‹ä¸¤ä¸ª1çš„å›¾ç‰‡æ¯”è¾ƒç›¸ä¼¼ï¼Œå½“ç„¶å¸Œæœ›å‘é‡ä¸­æœ‰ä¸€éƒ¨åˆ†çš„æ ‡ç­¾å†…å®¹æ˜¯ç±»ä¼¼çš„ï¼Œè€Œä¸æ˜¯è¯´è¿™ä¸¤ä¸ª1çš„å›¾ç‰‡å¯¹åº”çš„å‘é‡æ ‡ç­¾å®Œå…¨ä¸ä¸€è‡´ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215433669.png" /></p>
<p>â€‹
ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ€»æ˜¯å¸Œæœ›è¿™ä¸ªinputå’Œoutputçš„å†…å®¹æ˜¯å­˜åœ¨ä¸€äº›è”ç³»çš„ï¼Œè€Œä¸æ˜¯æ¯«æ— è”ç³»ã€‚è¯´åˆ°è¿™é‡Œï¼Œå…¶å®é—®é¢˜è¿˜æ˜¯å¯ä»¥è§£å†³çš„ï¼Œæ€ä¹ˆå»è§£å†³è¿™ä¸ªç¼–ç é—®é¢˜å‘¢ï¼Ÿ</p>
<p>â€‹
æ­£å·§ï¼Œæˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­è®²äº†å„ç§è‡ªåŠ¨ç¼–ç å™¨çš„ç›¸å…³çŸ¥è¯†ï¼Œè¿™ä¸ªç¼–ç é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è®­ç»ƒä¸€ä¸ªNNç¼–ç å™¨æ¥è¿›è¡Œè§£å†³ã€‚è¿™ä¸ªç¼–ç å™¨å®Œæˆä¸€ä»¶ä»€ä¹ˆäº‹å‘¢ï¼Ÿç»™å®ƒä¸€ä¸ªå›¾ç‰‡ï¼Œå®ƒè¾“å‡ºä¸€ä¸ªå‘é‡ï¼Œæ¥è¡¨ç¤ºè¿™ä¸ªå›¾ç‰‡çš„ç›¸å…³ç‰¹å¾ã€‚å…·ä½“è€Œè¨€ï¼Œè‡ªåŠ¨ç¼–ç å™¨æ€ä¹ˆè¿›è¡Œè®­ç»ƒï¼Œè¯¦è§è‡ªåŠ¨ç¼–ç å™¨çš„æ–‡ç« ï¼Œå¦‚ä¸‹ï¼šè¿™é‡Œçš„è¯ä¹Ÿç»™ä¸€å¼ æå®æ¯…è€å¸ˆè¯¾ç¨‹çš„æˆªå›¾ç¤ºæ„ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215447872.png" /></p>
<p>â€‹
ä»”ç»†æƒ³æ¥ï¼Œå…¶å®è¿™ä¸ªDecoderå¹²çš„æ˜¯ä¸æ˜¯å°±æ˜¯Generatorçš„äº‹æƒ…ï¼Ÿæ˜¯çš„ï¼å› ä¸ºå®ƒä¹Ÿæ˜¯æ¥æ”¶ä¸€ä¸ªVectorå‘é‡ï¼Œè¾“å‡ºä¸€å¼ å›¾ç‰‡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215456226.png" /></p>
<p>â€‹
è¿™æ ·çœ‹æ¥ï¼Œå…¶å®ç†è®ºä¸Šæ¥è®²ï¼Œåªè¦æˆ‘ä»¬è®­ç»ƒå¥½äº†ä¸€ä¸ªè‡ªåŠ¨ç¼–ç å™¨ï¼ŒæŠŠDecoderéƒ¨åˆ†æ‹¿å‡ºæ¥ï¼Œå°±æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ã€‚ç„¶åæˆ‘ä»¬éšä¾¿ç»™ä¸€ä¸ªå‘é‡ï¼Œä»–å°±ä¼šè¾“å‡ºä¸€ä¸ªå¯¹åº”çš„å›¾åƒã€‚</p>
<p>â€‹
ä½†æ˜¯Auto-Encoderå­˜åœ¨ä»€ä¹ˆæ ·çš„é—®é¢˜å‘¢ï¼Ÿå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šæ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å·²çŸ¥aå‘é‡å¯ä»¥äº§ç”Ÿä¸€ä¸ªå›¾ç‰‡ï¼Œbå‘é‡å¯ä»¥äº§ç”Ÿä¸€ä¸ªå›¾ç‰‡ï¼Œé‚£ä¹ˆ0.5<em>a+0.5</em>bä¼šäº§ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿå¾ˆæœ‰å¯èƒ½ä¼šäº§ç”ŸNoiseï¼Œå› ä¸ºè¿™æ ·çš„ç”Ÿæˆå™¨æœ¬èº«æ˜¯ä¸€ä¸ªç¥ç»ç½‘ç»œï¼Œä¸æ˜¯çº¿æ€§çš„ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215508501.png" /></p>
<p>â€‹
è¯´åˆ°è¿™é‡Œï¼Œå…¶å®è¿˜æ²¡æœ‰æ­£é¢å›ç­”Generatorä¸ºä»€ä¹ˆä¸èƒ½è‡ªå·±å­¦è¿™ä¸ªé—®é¢˜ï¼Œä½†å¤§å®¶ä¸è¦ç€æ€¥ã€‚æˆ‘ä»¬ç»§ç»­è¯´ï¼Œè¿™ä¸ªé—®é¢˜å…¶å®æˆ‘ä»¬å¯ä»¥ç”¨VAEæ¥è§£å†³ï¼Œä¹Ÿå°±æ˜¯ä¸Šç¯‡æ–‡ç« æœ«å°¾é‡ç‚¹è®²è¿‡çš„å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨ã€‚</p>
<p>â€‹
å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šæœ‰äº†å˜åˆ†ç¼–ç å™¨ï¼Œå› ä¸ºå˜åˆ†è‡ªåŠ¨ç¼–ç å™¨æ˜¯å¯¹ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒè¿›è¡Œäº†ç¼–ç ï¼Œè€Œä¸æ˜¯å›ºå®šçš„ã€‚æ‰€ä»¥æˆ‘ä»¬èƒ½å¤Ÿå°†è¿™ä¸ªdecoderè®­ç»ƒçš„æ›´ä¸ºç¨³å®šã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215517660.png" /></p>
<p>â€‹ é‚£ä¹ˆï¼Œç°åœ¨çœ‹æ¥ï¼Œå¥½åƒAuto-Encoderå°±èƒ½è§£å†³Structure
Learningè¿™æ ·ä¸€ä¸ªä»»åŠ¡äº†ï¼Œé‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜éœ€è¦GANè¿™ä¸ªæŠ€æœ¯å‘¢ï¼Ÿæ¥ä¸‹å»è¦è¯´çš„å°±æ˜¯Auto-Encoderè¿™å¥—æŠ€æœ¯æ‰€ç¼ºå°‘çš„å†…å®¹ã€‚</p>
<p>â€‹
åœ¨Auto-Encoderçš„æŠ€æœ¯ä¸­ï¼Œæˆ‘ä»¬å®ç°çš„ç›®æ ‡æ˜¯ï¼šè®©ç”Ÿæˆçš„å›¾ç‰‡å’Œç›®æ ‡å›¾åƒè¶Šåƒè¶Šå¥½ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä»€ä¹ˆå«è¶Šåƒè¶Šå¥½ï¼Ÿæ­£å¸¸æ¥è¯´ï¼Œæˆ‘ä»¬å°±æ˜¯æŠŠè¿™ä¸ªå›¾åƒå±•å¼€æˆä¸€ä¸ªvectorï¼Œç„¶åé€åƒç´ çš„è®¡ç®—è·ç¦»å·®ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215528542.png" /></p>
<p>â€‹
æˆ‘ä»¬å…ˆå‰è¯´è¿‡ï¼Œè‡ªåŠ¨ç¼–ç å™¨æ˜¯ä¸èƒ½è®©å®ƒå®Œæ•´çš„ä¿ç•™æ‰€æœ‰çš„ä¿¡æ¯çš„ï¼Œä¸ç„¶å°±å¤±å»äº†ç¼–ç çš„æ„ä¹‰ï¼Œæœºå™¨åªè¦å­¦ä¹ å¤åˆ¶å°±å¯ä»¥äº†ã€‚æ‰€ä»¥è‡ªåŠ¨ç¼–ç å™¨çš„ç”Ÿæˆå™¨éƒ¨åˆ†ï¼Œç”Ÿæˆçš„ç›®æ ‡æ€»æ˜¯å’Œæºå›¾åƒä¼šæœ‰ä¸€äº›å·®è·ï¼Œä¼šæœ‰ä¸€äº›å–èˆã€‚è¿™ä¸ªæ—¶å€™ï¼Œå–èˆåœ¨å“ªé‡Œå°±å¾ˆé‡è¦ï¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå³ä¸Šè§’æ˜¯ç›®æ ‡å›¾åƒï¼Œä¸‹é¢å››ä¸ªæ˜¯ç”Ÿæˆçš„å›¾åƒã€‚ç”Ÿæˆå›¾åƒç¬¬ä¸€æ’ï¼Œåªåå·®äº†1ä¸ªåƒç´ ï¼Œç¬¬äºŒæ’ï¼Œåå·®äº†6ä¸ªåƒç´ ã€‚ä»è®¡ç®—ç›¸ä¼¼åº¦è€Œè¨€ï¼Œç¬¬ä¸€æ’ä¼˜äºç¬¬äºŒæ’ï¼Œä½†æ˜¯ä»äººçš„æ„ŸçŸ¥è€Œè¨€ï¼Œç¬¬äºŒæ’ä¼˜äºç¬¬ä¸€æ’ã€‚æ‰€ä»¥æˆ‘ä»¬å¦‚æœåªæ˜¯å•çº¯çš„è®¡ç®—è·ç¦»å·®ï¼Œè®©ä¸¤è€…è¶Šåƒè¶Šå¥½ï¼Œå°±æœ‰å¯èƒ½ä¼šäº§ç”Ÿç¬¬ä¸€æ’çš„ç»“æœã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215538491.png" /></p>
<p>â€‹ åœ¨åšStructure
Learningçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¯´è¿‡ç»„ä»¶å’Œç»„ä»¶ä¹‹é—´çš„å…³ç³»æ˜¯å¾ˆé‡è¦çš„ï¼Œéœ€è¦è€ƒè™‘å…¨å±€è§‚å¿µã€‚è¿™ä¸ªåå·®å‡ºæ¥çš„å¤šçš„åƒç´ æœ¬èº«æ²¡æœ‰é”™è¯¯ï¼Œæœ‰é”™çš„æ˜¯å®ƒå¦‚æœæ˜¯æœ‰åƒç´ å€¼çš„ï¼Œé‚£ä¹ˆå®ƒå‘¨è¾¹çš„ç»„ä»¶ï¼Œä¹Ÿåº”å½“æ˜¯æœ‰å¡«å……çš„ï¼Œè€Œä¸æ˜¯ç©ºç™½çš„ã€‚è¿™ä¸ªåƒç´ è¦å’Œå‘¨å›´çš„åƒç´ ä¸€è‡´ï¼Œè¿™ä¸ªå…¶å®å°±æ˜¯ç»„ä»¶å’Œç»„ä»¶çš„ä¸€ç§å…³è”ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215546546.png" /></p>
<p>â€‹
ä½†æ˜¯æˆ‘ä»¬è®­ç»ƒä¸€ä¸ªç”Ÿæˆå™¨çš„æ—¶å€™ï¼Œå½“æˆ‘ä»¬è®­ç»ƒä¸€ä¸ªç½‘ç»œçš„æ—¶å€™ï¼Œæ˜¯å¾ˆéš¾æŠŠç»„ä»¶å’Œç»„ä»¶çš„å…³ç³»æ”¾è¿›å»çš„ã€‚å› ä¸ºåœ¨NNç½‘ç»œè¿™ä¸ªæ¶æ„é‡Œé¢ï¼Œå¦‚æœå‰ä¸€å±‚çš„æƒé‡éƒ½å·²ç»ç¡®å®šäº†ï¼Œæœ€åçš„è¾“å‡ºä¹‹é—´æ˜¯ç‹¬ç«‹çš„ã€‚æ¯ä¸ªè¾“å‡ºç¥ç»å…ƒä¹‹é—´æ²¡æ³•äº’ç›¸è¿›è¡Œé…åˆã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215603961.png" /></p>
<p>â€‹
å…¶å®åƒè¿™ç§ä¹Ÿå¯ä»¥è§£å†³ï¼Œåªä¸è¿‡éœ€è¦æ›´æ·±çš„ç½‘ç»œç»“æ„ã€‚æ›´æ·±çš„ç½‘ç»œç»“æ„èƒ½å¤Ÿå¸®åŠ©ä½ æŠŠè¿™ç§ç»„ä»¶ä¸ç»„ä»¶ä¹‹é—´çš„ç›¸å…³æ€§è€ƒè™‘è¿›å»ã€‚æ‰€ä»¥ï¼Œå¦‚æœæœ‰ä¸€ä¸ªGANç½‘ç»œï¼Œä¸€ä¸ªAuto-Encoderç½‘ç»œï¼Œè¦å®Œæˆä¸€ä¸ªç›®æ ‡ï¼Œå¾€å¾€Auto-Encoderçš„ç½‘ç»œéœ€è¦æ›´æ·±ï¼Œæ‰èƒ½è¾¾åˆ°å’ŒGANç±»ä¼¼çš„æ•ˆæœã€‚</p>
<p>â€‹
å…¶å®è®²åˆ°è¿™é‡Œï¼Œéƒ½æ²¡æœ‰æ˜ç¡®çš„å›ç­”Generatorä¸ºä»€ä¹ˆä¸èƒ½è‡ªå·±å­¦è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å…¶å®å·²ç»å›ç­”æ‰äº†ã€‚å› ä¸ºæˆ‘ä»¬åˆšæ‰è®²çš„ï¼ŒAuto-Encoderå°±æ˜¯è®­ç»ƒäº†ä¸€ä¸ªå•çš„Generatorï¼Œæ˜¯æŠ›å¼ƒäº†Discriminatorçš„ä¸€ä¸ªæ¶æ„ã€‚å¦‚æœè¿™æ ·å­è®©Generatorè‡ªå·±å­¦ï¼Œå½“ç„¶å¯ä»¥ï¼Œåªä¸è¿‡ä¼šå­˜åœ¨ä¸Šè¿°æ‰€è¯´çš„ç§ç§é—®é¢˜å’Œéš¾å¤„ã€‚</p>
<h4
id="discriminatorä¸ºä»€ä¹ˆä¸èƒ½è‡ªå·±äº§ç”Ÿimage">2ã€Discriminatorä¸ºä»€ä¹ˆä¸èƒ½è‡ªå·±äº§ç”ŸImageï¼Ÿ</h4>
<p>â€‹
Discriminatoræ€»çš„æ¥è¯´å¹²äº†ä¸€ä»¶ä»€ä¹ˆäº‹å‘¢ï¼Ÿå®ƒå…¶å®å°±æ˜¯è¾“å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œè¾“å‡ºä¸€ä¸ªåˆ†æ•°ï¼Œè¿™ä¸ªåˆ†æ•°è¡¨ç¤ºè¿™ä¸ªå¯¹è±¡å¤šå¥½æˆ–å¤šå·®ï¼Œè¿›è¡Œè¯„ä¼°ã€‚å¯¹äºDiscriminatoræ¥è¯´ï¼Œå®ƒè¦è€ƒè™‘ç»„ä»¶å’Œç»„ä»¶ä¹‹é—´çš„å…³ç³»å°±å¾ˆå®¹æ˜“äº†ï¼Œå› ä¸ºä»–æ˜¯çœ‹åˆ°æ•´ä¸ªå›¾ç‰‡çš„ã€‚</p>
<p>â€‹
é‚£ä¹ˆæˆ‘ä»¬å…¶å®æ˜¯å¯ä»¥ç”¨Discriminatoræ¥äº§ç”ŸImageçš„ï¼Œåªä¸è¿‡ä¼šéå¸¸çš„å¡ï¼Œéå¸¸çš„æ…¢ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Œæˆ‘ä»¬å…ˆçœ‹ï¼Œå¦‚æœç¡¬è¦ç”¨Discriminatoræ¥äº§ç”ŸImageï¼Œæ­¥éª¤åº”è¯¥æ˜¯æ€æ ·çš„ï¼š</p>
<p>â€‹
å‡è®¾æˆ‘ä»¬å·²ç»è®­ç»ƒå¥½äº†ä¸€ä¸ªå¥½çš„åˆ¤åˆ«å™¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æ‰§è¡Œå¦‚ä¸‹å…¬å¼å³å¯ï¼š</p>
<p>â€‹ ç©·ä¸¾æ‰€æœ‰çš„xï¼Œç„¶åä¸€ä¸ªä¸ªä¸¢åˆ°åˆ¤åˆ«å™¨é‡Œï¼Œè®©å®ƒçœ‹æ˜¯ä¸æ˜¯é«˜åˆ†ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215739478.png" /></p>
<p>â€‹
è™½ç„¶è¿™çœ‹ä¸Šå»ä¸æ˜¯å¾ˆåˆç†ï¼Œå¯¹äºç©·ä¸¾è€Œè¨€ã€‚ä½†æ˜¯è¿™å…¶å®å¹¶ä¸æ˜¯å…³é”®æ‰€åœ¨ã€‚æˆ‘ä»¬ç°åœ¨å…ˆå‡è®¾è¿™ä¸ªæ–¹æ³•ç¡®å®å¯è¡Œï¼Œé‚£éš¾é“å°±å¯ä»¥äº†å—ï¼Ÿåˆ«å¿˜äº†ï¼Œæˆ‘ä»¬å…ˆå‰çš„å‡è®¾ï¼šâ€œå‡è®¾æˆ‘ä»¬å·²ç»è®­ç»ƒå¥½äº†ä¸€ä¸ªå¥½çš„åˆ¤åˆ«å™¨â€ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆè®­ç»ƒè¿™ä¸ªåˆ¤åˆ«å™¨å‘¢ï¼Ÿè¿™æ‰æ˜¯é—®é¢˜çš„å…³é”®ï¼</p>
<p>â€‹
ç†è®ºä¸Šè®²å¾ˆç®€å•ï¼Œæˆ‘ç»™ä»–å¥½çš„æ ·ä¾‹ï¼Œè®©ä»–è¾“å‡ºé«˜åˆ†ï¼Œçƒ‚çš„æ ·ä¾‹ï¼Œè®©ä»–è¾“å‡ºä½åˆ†ã€‚ä½†æ˜¯å®é™…ä¸Šå‘¢ï¼Œæˆ‘ä»¬æ‰‹ä¸Šåªæœ‰å¥½çš„æ ·ä¾‹ã€‚å¦‚æœåªæœ‰è¿™æ ·çš„è®­ç»ƒå®ä¾‹ï¼Œä¼šå¯¼è‡´ç½‘ç»œçœ‹åˆ°å•¥éƒ½ç»™é«˜åˆ†ã€‚æ‰€ä»¥ï¼Œæ€ä¹ˆå»äº§ç”Ÿä¸å¥½çš„æ ·ä¾‹ï¼Œäº§ç”Ÿæ€æ ·ä¸å¥½çš„æ ·ä¾‹ï¼Œå°±æ˜¯ä¸€ä¸ªå¾ˆå…³é”®çš„é—®é¢˜ï¼š</p>
<p>â€‹
å¦‚æœä¸å¥½çš„æ ·ä¾‹å°±åªæ˜¯ä¸€äº›å™ªéŸ³ï¼Œé‚£å…¶å®æœºå™¨å¾ˆå®¹æ˜“ä¼šç»™ä¸€äº›å°šå¯çš„æ¨¡ç³Šçš„å›¾ç‰‡æ‰“é«˜åˆ†ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬å¸Œæœ›çœ‹åˆ°çš„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æ‰€ä»¥<strong>åªæœ‰å·®çš„æ ·ä¾‹è¶³å¤Ÿçš„å¥½ï¼Œæ‰èƒ½è®©æœºå™¨çœŸæ­£çš„å­¦ä¼šè¯„åˆ¤å¥½çš„å›¾ç‰‡å’Œåçš„å›¾ç‰‡</strong>ï¼Œ</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215749015.png" /></p>
<p>â€‹ æ‰€ä»¥ç°åœ¨å¦‚ä½•ç”Ÿæˆè¶³å¤Ÿå¥½çš„
å·®çš„æ ·ä¾‹å°±å¾ˆé‡è¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªç”Ÿæˆå·®çš„æ ·ä¾‹çš„è¿‡ç¨‹ï¼Œåœ¨æ²¡æœ‰Generatorçš„å‰æä¸‹ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªé¸¡ç”Ÿè›‹è›‹ç”Ÿé¸¡çš„å¾ªç¯é—®é¢˜äº†ã€‚æ‰€ä»¥å¦‚æœçœŸçš„æƒ³è¦å®Œæˆè¿™ä»¶äº‹æƒ…ï¼Œåªèƒ½é€šè¿‡ä¸€ä¸ªè¿­ä»£çš„å½¢å¼å»å®Œæˆï¼š</p>
<p>â€‹
æˆ‘å…ˆå­¦ä¸€ä¸ªæœ€å·®çš„Discriminatorå‡ºæ¥ï¼Œç„¶åç”¨è¿™ä¸ªå»åšç”Ÿæˆï¼Œç”Ÿæˆå‡ºæ¥çš„æ ·ä¾‹ç”¨æ¥è®­ç»ƒæ›´å¥½çš„Discriminatorï¼Œå¾ªç¯å¾€å¤ã€‚ä½ ä¼šå‘ç°è¿™ä¸ªè¿‡ç¨‹å¥½åƒè·ŸGANå·®ä¸å¤šï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰generatorï¼Œè¦æ¯”GANç´¯å¥½å¤šï¼Œæ…¢å¾ˆå¤šã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215808954.png" /></p>
<p>â€‹
è¿™æ—¶å€™å†æ¥çœ‹å¦‚æœæˆ‘ä»¬æŠŠGeneratoråŠ ä¸Šï¼ŒGANå°±æ˜¯åˆ©ç”¨Generatoræ¥æ±‚è§£è¿™ä¸ªargmaxçš„é—®é¢˜ï¼Œç”¨äºç”Ÿæˆä¸€äº›è´Ÿé¢çš„æ ·ä¾‹ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215815222.png" /></p>
<h3 id="äº”æ¯”è¾ƒvaeå’Œgançš„ç»“æœ">äº”ã€æ¯”è¾ƒVAEå’ŒGANçš„ç»“æœï¼š</h3>
<p>â€‹
ä¸‹å›¾æ˜¯å„ä¸ªGANå’ŒVAEåœ¨ä¸åŒå‚æ•°ä¸‹ï¼Œæ‰€è¡¨ç°å‡ºæ¥çš„æ€§èƒ½åˆ†æ•°çš„å€¼çš„åŒºé—´ã€‚è¿˜é™„å¸¦äº†ä¸€ä¸ªVAEå’ŒGANç”Ÿæˆäººç‰©å¤´åƒçš„ç›´è§‚ç»“æœã€‚</p>
<p>1ã€VAEæ¯”è¾ƒç¨³å®šï¼Œç»™å®ƒä¸åŒçš„å‚æ•°ï¼Œæ‰€è¡¨ç°å‡ºæ¥çš„æ€§èƒ½ç›¸å·®ä¸å¤§ã€‚</p>
<p>2ã€GANç›¸å¯¹è€Œè¨€æ¯”è¾ƒåƒå‚æ•°ï¼Œä½†æ˜¯åªè¦å‚æ•°æ­£ç¡®ï¼Œæ‰€ç”Ÿæˆçš„æœ€å¥½ç»“æœä¹Ÿæ˜¯è¿œè¿œä¼˜äºVAEäº§ç”Ÿçš„ç»“æœçš„ã€‚<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/2222sdsa.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114215842339.png" /></p>
<h3 id="å…­æ€»ç»“">å…­ã€æ€»ç»“</h3>
<p>1ï¼‰ç”Ÿæˆå™¨ï¼š</p>
<p>â€‹ ä¼˜åŠ¿ï¼šå¾ˆå¿«å°±èƒ½ç”Ÿæˆä¸€ä¸ªä¸œè¥¿</p>
<p>â€‹ åŠ£åŠ¿ï¼šå¾ˆéš¾å¯Ÿè§‰ç»„ä»¶å’Œç»„ä»¶ä¹‹é—´çš„å…³ç³»ï¼Œåªæ˜¯æ¨¡ä»¿ä¸€ä¸ªè¡¨è±¡</p>
<p>2ï¼‰åˆ¤åˆ«å™¨ï¼š</p>
<p>â€‹ ä¼˜åŠ¿ï¼šå¯ä»¥è€ƒè™‘å¤§å±€è§‚</p>
<p>â€‹ åŠ£åŠ¿ï¼šç”Ÿæˆä¸€ä¸ªä¸œè¥¿éå¸¸çš„å›°éš¾</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114222543440.png" /></p>
<p>3ï¼‰GANçš„ä¼˜åŠ¿ï¼š</p>
<p>1ã€ä»åˆ¤åˆ«å™¨çš„è§’åº¦è€Œè¨€ï¼Œä½¿ç”¨Generatoræ¥è¿›è¡Œnegative
exampleçš„ç”Ÿæˆï¼Œæ›´ä¸ºé«˜æ•ˆã€‚</p>
<p>2ã€ä»ç”Ÿæˆå™¨çš„è§’åº¦è€Œè¨€ï¼Œå®ƒè™½ç„¶ä»ç„¶æ˜¯ä¸€ä¸ªç»„ä»¶ä¸€ä¸ªç»„ä»¶çš„ç”Ÿæˆå¯¹è±¡ï¼Œä½†æ˜¯ç›¸æ¯”ä¼ ç»Ÿçš„è®¡ç®—L1,L2çš„æŸå¤±è€Œè¨€ï¼Œå®ƒä¼šä»Discriminatoré‚£è¾¹å¾—åˆ°å…¨å±€è§†é‡çš„åé¦ˆï¼Œæ›´èƒ½ç†è§£ç»„ä»¶ä¸ç»„ä»¶ä¹‹é—´çš„å…³ç³»ã€‚</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>GANç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>GAN</tag>
        <tag>Deep Learning</tag>
      </tags>
  </entry>
  <entry>
    <title>GANç³»åˆ—ç¬”è®°2â€”â€”å¸¸è§GANå˜ç§ï¼ˆConditionalGANï¼ŒPatchGANï¼ŒCycleGANç­‰ï¼‰</title>
    <url>/2021/12/01/85bccde5409d/</url>
    <content><![CDATA[<h3 id="å‰è¨€">å‰è¨€ï¼š</h3>
<p>â€‹
æœ¬ç¯‡ç¬”è®°ä¸ºè§‚çœ‹æå®æ¯…è€å¸ˆçš„GANç›¸å…³è¯¾ç¨‹åæ‰€è®°å½•ï¼Œæ–‡ä¸­æ‰€æœ‰å›¾ç‰‡åŠå†…å®¹å‡æ¥æºäºæå®æ¯…è€å¸ˆçš„è¯¾ç¨‹ï¼Œæ­¤å¤„åªæ˜¯æ¬è¿+ä»¥è‡ªå·±çš„ç†è§£è¿›è¡Œè®°å½•ã€‚å…¨æ–‡è®²è¿°äº†ä¸€äº›å¸¸è§çš„GANçš„å˜ç§ï¼Œä»¥åŠå®ƒä»¬çš„ä¸€äº›æ ¸å¿ƒçš„æ€æƒ³ï¼ŒåŒ…æ‹¬Conditional
GANç”¨äºText-To-Imageå’ŒImage-To-Imageçš„ä»»åŠ¡ï¼ŒæœŸé—´æœ‰æåŠä¸€äº›æ”¹è¿›è¯¸å¦‚Patch
GANã€‚ç„¶åç®€å•è®²è¿°äº†StackGANçš„æ€æƒ³ä»¥åŠåº”ç”¨åœºæ™¯ã€‚ä¹‹åï¼Œæ˜¯å¯¹éç›‘ç£å­¦ä¹ æ¡ä»¶ç”Ÿæˆé¢†åŸŸçš„ä¸€äº›æ¢è®¨ï¼Œè¿™ä¸€éƒ¨åˆ†æœ€å¸¸è§çš„å°±æ˜¯é£æ ¼è¿ç§»çš„åº”ç”¨ã€‚è®²è¿°äº†ä¸¤å¤§ç±»å®ç°éç›‘ç£å­¦ä¹ æ¡ä»¶ç”Ÿæˆçš„æ–¹æ³•æ€æƒ³ï¼Œç¬¬ä¸€ç±»æ˜¯ç›´æ¥ç”Ÿæˆï¼Œå…¶ä¸­ä»‹ç»äº†CycleGANå’Œå˜ä½“StarGANã€‚ç¬¬äºŒç±»æ˜¯æŠ•å°„è‡³ç›¸åŒå…¬å…±ç©ºé—´çš„æ–¹æ³•ï¼Œå…¶ä¸­åŒ…å«äº†è§£å†³æ­¤æ–¹æ³•ä¸­ä¸€ä¸ªå…³é”®é—®é¢˜çš„å„ç§æ€æƒ³æ–¹æ¡ˆã€‚çœ‹å®Œæœ¬ç¯‡ç¬”è®°ï¼Œä½ åº”å½“ä¼šå¯¹Conditinal
GANå’ŒUnsupervised Conditional
Generationé¢†åŸŸåŠè¯¥é¢†åŸŸä¸‹çš„CycleGANæ€æƒ³æœ‰ä¸€ä¸ªå¤§æ¦‚çš„äº†è§£ï¼Œéšåä½ å¯ä»¥é€‰æ‹©æ„Ÿå…´è¶£çš„GANç½‘ç»œï¼Œå†å»è¯¦ç»†çš„é˜…è¯»åŸè®ºæ–‡ï¼Œç ”ç©¶ç»†èŠ‚éƒ¨åˆ†ã€‚</p>
<h3 id="ä¸€conditional-gan">ä¸€ã€Conditional GAN</h3>
<p>â€‹
æ¡ä»¶GANæ‰€è¦å®Œæˆçš„ç›®æ ‡å°±æ˜¯ä½ å¯ä»¥é€šè¿‡ä¸€äº›é™åˆ¶æ¡ä»¶ï¼Œæ¥è®©GANç½‘ç»œç”Ÿæˆçš„å›¾åƒç¬¦åˆä½ çš„è¦æ±‚ã€‚æ¯”è¾ƒç»å…¸çš„å°±æ˜¯Text-To-Imageå’ŒImage-To-Imageä¸¤ç§ä»»åŠ¡ã€‚</p>
<h4 id="text-to-imageä»»åŠ¡">1ã€Text-To-Imageä»»åŠ¡</h4>
<p>â€‹
è¯¥ä»»åŠ¡ç›®æ ‡æ˜¯ï¼Œä½ è¾“å…¥ä¸€æ®µè¯ï¼Œç„¶åæ ¹æ®è¾“å…¥çš„è¯­ä¹‰æ¥ç”Ÿæˆä¸€å¼ å›¾ç‰‡ã€‚è¿™æ ·ä¸€ä¸ªä»»åŠ¡å…¶å®æˆ‘ä»¬å¯ä»¥ç”¨ä¼ ç»Ÿçš„ç›‘ç£å­¦ä¹ æ–¹æ³•æ¥å®Œæˆå®ƒï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114223140981.png" /></p>
<p>â€‹
ä½†æ˜¯ä½¿ç”¨è¿™ç§ä¼ ç»Ÿçš„æ–¹æ³•ï¼Œä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚è¯´ï¼Œè®­ç»ƒç½‘ç»œå®Œæˆä»¥åä½ è¾“å…¥æ–‡å­—"train"ï¼Œè€Œåœ¨æˆ‘ä»¬çš„è®­ç»ƒé›†é‡Œé¢ï¼Œå…³äº"train"çš„å›¾ç‰‡æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚è¯´ä¸€äº›æ­£é¢çš„ç«è½¦ç…§ç‰‡ï¼Œæˆ–è€…æ˜¯ä¸€äº›ä¾§é¢çš„ç«è½¦ç…§ç‰‡ã€‚æœ€åä¼šå¯¼è‡´çš„ç»“æœå°±æ˜¯ï¼Œè¿™ä¸ªç›‘ç£å­¦ä¹ ç”Ÿæˆçš„ç»“æœåˆè¦åƒæ­£é¢çš„ç«è½¦ï¼Œåˆè¦åƒä¾§é¢çš„ç«è½¦ï¼Œæœ€åå°±ä¼šå˜æˆä¸€ä¸ªå¾ˆå¤šå›¾ç‰‡çš„å¹³å‡ï¼Œä¹Ÿå°±æ˜¯ä¼šç”Ÿæˆä¸€ä¸ªéå¸¸æ¨¡ç³Šçš„å›¾åƒã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114223153376.png" /></p>
<p>â€‹ æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨åˆ°Conditional
GANçš„æŠ€æœ¯ã€‚åœ¨å‰ä¸€ç¯‡æ–‡ç« ä¸­è®²è¿‡ï¼ŒGANæœ¬èº«æœ€åå®ç°çš„ä¸€ä¸ªæ•ˆæœæ˜¯ï¼Œè¾“å…¥ä¸€ä¸ªéšæœºçš„åˆ†å¸ƒå‘é‡ï¼Œæˆ–è€…è¯´Noiseï¼Œç„¶åå…¶ä¼šç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼ˆå›¾ç‰‡æˆ–å…¶ä»–ï¼‰ã€‚é‚£ä¹ˆåœ¨Conditional
GANä¸­å‘¢ï¼Œä»æœ€ç»ˆå®ç°çš„æ•ˆæœè€Œè¨€ï¼Œå…¶å®å°±æ˜¯å¤šåƒäº†ä¸€ä¸ªå†…å®¹cï¼Œè¿™ä¸ªå†…å®¹cä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€æŒ‡å®šçš„æ¡ä»¶ã€‚åœ¨Text-To-Imageçš„ä»»åŠ¡ä¸­ï¼Œå†…å®¹cä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€æŒ‡å®šçš„æ–‡æœ¬ä¿¡æ¯ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114223205025.png" /></p>
<p>â€‹
é‚£ä¹ˆDiscriminatoræ–¹é¢ï¼Œè·Ÿæ™®é€šçš„GANåˆéœ€è¦æœ‰å•¥åŒºåˆ«å‘¢ï¼Ÿå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯¹äºåˆ¤åˆ«å™¨è€Œè¨€ï¼Œå…¶è¾“å…¥ä¹Ÿéœ€è¦æ–°å¢ä¸€ä¸ªå†…å®¹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æŒ‡å®šçš„æ¡ä»¶cã€‚</p>
<p>â€‹
æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¹ˆå¹²å‘¢ï¼Ÿå¦‚æœåˆ¤åˆ«å™¨ä»ç„¶å’ŒåŸæ¥ä¸€æ ·ï¼Œé‚£ä¹ˆå…¶å®ä½ ä¼šå‘ç°ï¼Œå› ä¸ºåˆ¤åˆ«å™¨åªä¼šçœ‹ç”Ÿæˆçš„å›¾ç‰‡xæ˜¯å¦å¤ŸçœŸå®ï¼Œè€Œä¸ä¼šçœ‹xå’Œå†…å®¹cåŒ¹ä¸åŒ¹é…ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ è¾“å…¥â€catâ€œä½œä¸ºå†…å®¹cï¼Œä½†æ˜¯ç”Ÿæˆå™¨ç”»äº†ä¸€ä¸ªå¾ˆå¥½å¾ˆçœŸå®çš„ç«è½¦å›¾ç‰‡ï¼Œåˆ¤åˆ«å™¨ä»ç„¶ä¼šç»™é«˜åˆ†ã€‚è¿™æ ·åˆ°æœ€åçš„ç»“æœå…¶å®å°±æ˜¯ï¼Œä½ ä¼šå‘ç°ä½ æŒ‡å®šçš„æ¡ä»¶cå’Œç”Ÿæˆå‡ºæ¥çš„å›¾ç‰‡å®Œå…¨ä¸åŒ¹é…ï¼Œè™½ç„¶è¿™äº›ç”Ÿæˆçš„å›¾ç‰‡éƒ½å¾ˆçœŸå®ã€‚</p>
<p>â€‹ Okï¼Œæ‰€ä»¥æˆ‘ä»¬å›åˆ°Conditional
GANåˆ¤åˆ«å™¨çš„æ¶æ„ï¼Œæœ€åè¾“å‡ºçš„å€¼é‡Œé¢ï¼Œå…¶å®å«æœ‰ä¸¤éƒ¨åˆ†ä¿¡æ¯çš„å«ä¹‰ã€‚ä¸€ä¸ªæ˜¯å›¾åƒxæ˜¯ä¸æ˜¯å¤ŸçœŸå®ï¼Œä¸€ä¸ªæ˜¯å†…å®¹æ¡ä»¶cå’Œå›¾åƒxæ˜¯å¦åŒ¹é…ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114223223659.png" /></p>
<p>â€‹
æ‰€ä»¥åœ¨è¿™ç§åˆ¤å®šæ¡ä»¶ä¸‹ï¼Œä»€ä¹ˆæ ·çš„æƒ…å†µè¦ç»™é«˜åˆ†å‘¢ï¼Ÿä»€ä¹ˆæ ·çš„æƒ…å†µè¦ç»™ä½åˆ†å‘¢ï¼Ÿ</p>
<p>â€‹ Case1 : xçœŸå® + c å’Œ x åŒ¹é… ã€é«˜åˆ†ã€‘</p>
<p>â€‹ Case2 : xè™šå‡ ã€ä½åˆ†ã€‘</p>
<p>â€‹ Case3 : xçœŸå® + c å’Œ x ä¸åŒ¹é… ã€ä½åˆ†ã€‘</p>
<p>â€‹
æ‰€ä»¥ä½ ä¼šå‘ç°ï¼Œç›¸æ¯”æ™®é€šGANä¸­çš„åˆ¤åˆ«å™¨ï¼Œå®ƒå¤šäº†ä¸€ç§è¦ç»™ä½åˆ†çš„æƒ…å†µï¼Œè¿™ä¸ªåœ¨ä¹‹åæ•´ä¸ªçš„ä¼ªä»£ç ä¸­ä¼šæœ‰æ‰€ä½“ä¼šã€‚ä¼ªä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220114223235243.png" /></p>
<p>â€‹
æ•´ä½“è€Œè¨€æ•´ä¸ªè¿‡ç¨‹è¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ï¼Œé¦–å…ˆä¹Ÿæ˜¯ä»æ•°æ®åº“é‡Œæ‹¿mä¸ªæ­£é¢çš„æ ·ä¾‹ï¼Œç„¶åé‡‡æ ·mä¸ªnoiseä¿¡å·ï¼Œå°†è¿™mä¸ªä¿¡å·å’Œç”Ÿæˆå™¨ç”Ÿæˆçš„æ•°æ®ç»„åˆæˆä¸€ç»„æ•°æ®ã€‚ç„¶åå†éšæœºçš„ä»æ•°æ®åº“ä¸­å–mä¸ªå›¾ç‰‡ã€‚æ³¨æ„ï¼Œè¿™ä¸€æ­¥ç›®çš„æ˜¯å–ä¸€ç»„çœŸå®çš„å›¾ç‰‡ï¼Œä½†æ˜¯ç»™è¿™äº›å›¾ç‰‡è´´ä¸Šä¸æ­£ç¡®çš„æ ‡ç­¾cï¼Œåé¢åœ¨ç›®æ ‡å‡½æ•°ä¸­ä¼šæœ‰æ‰€ä½“ç°ã€‚</p>
<p>â€‹
æ•´ä¸ªç›®æ ‡å‡½æ•°æœ‰3é¡¹ï¼Œç¬¬ä¸€é¡¹å’Œç¬¬äºŒé¡¹ä¸GANç±»ä¼¼ï¼Œä¹Ÿå°±æ˜¯åˆšæ‰ä¸Šé¢æåˆ°çš„Case1å’ŒCase2ã€‚ç¬¬ä¸‰é¡¹å…¶å®å°±æ˜¯å¯¹åº”ä¸Šé¢æåˆ°çš„Case3ï¼Œå¦‚æœå‘Discriminatorä¸­æŠ•å…¥ciå’Œéšæœºå–çš„ä¸ciå¹¶ä¸åŒ¹é…çš„å›¾åƒï¼Œé‚£ä¹ˆåˆ¤åˆ«å™¨ä¹Ÿåº”å½“ç»™å…¶ä½åˆ†ã€‚ç„¶åç”¨æ¢¯åº¦ä¸Šå‡ï¼Œæœ€å¤§åŒ–ç›®æ ‡å‡½æ•°å³å¯ï¼Œè¿™å°±å®Œæˆäº†è®­ç»ƒåˆ¤åˆ«å™¨çš„éƒ¨åˆ†ã€‚</p>
<p>â€‹ åœ¨è®­ç»ƒç”Ÿæˆå™¨çš„éƒ¨åˆ†ï¼Œå°±å’ŒGANå‡ ä¹ä¸€æ ·äº†ï¼Œæˆ‘ä»¬å°±æ­¤çœç•¥ä¸å†ç»†è°ˆã€‚</p>
<p>â€‹ è¯´å®ŒConditional GANçš„æ•´ä½“çš„è®­ç»ƒç®—æ³•ä¼ªä»£ç ï¼Œå†æ¥è®¨è®ºä¸€ä¸‹Conditinal
GAN çš„åˆ¤åˆ«å™¨éƒ¨åˆ†çš„ç½‘ç»œæ¶æ„åº”è¯¥å¦‚ä½•æ­å»ºï¼ŒConditinal
GANçš„åˆ¤åˆ«å™¨éƒ¨åˆ†æœ‰ä»¥ä¸‹ä¸¤ç§å¸¸è§çš„ç½‘ç»œæ¶æ„ï¼š</p>
<h5 id="æ¶æ„1æœ€ä¸ºå¸¸è§">1ã€æ¶æ„1ï¼šæœ€ä¸ºå¸¸è§</h5>
<p>â€‹
å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ¶æ„æ˜¯æœ€ä¸ºå¸¸è§çš„ä¸€ç§æ¶æ„ï¼Œå…ˆæœ‰ä¸¤ä¸ªç½‘ç»œï¼Œåˆ†åˆ«å°†xå’Œcåšembeddingç¼–ç ï¼Œç„¶åå°†ä¸¤ä¸ªç¼–ç è¾“å…¥åˆ¤åˆ«å™¨ç½‘ç»œä¸­ï¼Œå…¶ä¼šè¾“å‡ºä¸€ä¸ªåˆ†æ•°ï¼Œå°±ä»£è¡¨æˆ‘ä»¬å…ˆå‰è¯´çš„xæ˜¯å¦çœŸå®ï¼Œæˆ–è€…cå’Œxæ˜¯å¦åŒ¹é…ã€‚ä½†æ˜¯è¿™ç§æ¶æ„å…¶å®å¹¶ä¸èƒ½åˆ†æ¸…æ¥šï¼Œåˆ°åº•æ˜¯å› ä¸ºå“ªç§é—®é¢˜ï¼Œæ‰€ä»¥æ‰å¯¼è‡´äº†ä½åˆ†ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115002938439.png" /></p>
<h5
id="æ¶æ„2æœ‰éƒ¨åˆ†è®ºæ–‡é‡‡ç”¨ä½†æ˜¯ä¹Ÿæ˜¯è›®æœ‰é“ç†çš„ä¸€ä¸ªæ¶æ„">2ã€æ¶æ„2ï¼šæœ‰éƒ¨åˆ†è®ºæ–‡é‡‡ç”¨ï¼Œä½†æ˜¯ä¹Ÿæ˜¯è›®æœ‰é“ç†çš„ä¸€ä¸ªæ¶æ„</h5>
<p>â€‹
æ­¤ç§æ¶æ„ï¼Œå…ˆæŠŠå¯¹è±¡xè¾“å…¥ä¸€ä¸ªåˆ¤åˆ«å™¨ç½‘ç»œä¸­ï¼Œç„¶åç›´æ¥è¾“å‡ºä¸€ä¸ªåˆ†æ•°ï¼Œè¿™ä¸ªåˆ†æ•°ä»£è¡¨xæ˜¯å¦çœŸå®ã€‚ç„¶åå†å°†æ¡ä»¶cå’Œå¯¹è±¡xè¾“å…¥å¦ä¸€ä¸ªåˆ¤åˆ«å™¨ç½‘ç»œä¸­ï¼Œè¾“å‡ºä¸€ä¸ªåˆ†æ•°ï¼Œä»£è¡¨cå’Œxæ˜¯å¦åŒ¹é…ã€‚æœ€åå†å°†ä¸¤ä¸ªåˆ†æ•°ç»¼åˆèµ·æ¥ï¼Œå¾—åˆ°æœ€ç»ˆåˆ¤åˆ«å™¨çš„åˆ†æ•°ã€‚è¿™æ ·å­çš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥çŸ¥é“ï¼Œåˆ°åº•å¯¼è‡´ä½åˆ†æ˜¯ä»€ä¹ˆåŸå› ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115002950662.png" /></p>
<h4 id="image-to-image-ä»»åŠ¡">2ã€Image-To-Image ä»»åŠ¡</h4>
<p>â€‹ å’Œè¿™ä¸ªä»»åŠ¡ç›¸å…³çš„ä¸€ç¯‡è®ºæ–‡å…¶å®æ˜¯éå¸¸ç»å…¸çš„ä¸€ç¯‡è®ºæ–‡ï¼ŒCVPR
2017çš„ã€ŠImage-to-Image Translation with Conditional Adversarial
NetWorksã€‹ï¼Œæœ‰å…´è¶£ä¹Ÿå¯ä»¥å»é˜…è¯»åŸè®ºæ–‡ã€‚ä¸‹å›¾æ˜¯åŸè®ºæ–‡ä¸­çš„ä¸€äº›åº”ç”¨çš„æˆªå›¾ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003023803.png" /></p>
<p>â€‹
å’Œå…ˆå‰çš„Text-To-Imageçš„ä»»åŠ¡ä¸€æ ·ï¼Œå¦‚æœé‡‡ç”¨ä¼ ç»Ÿçš„ç›‘ç£å­¦ä¹ çš„æ–¹æ³•ï¼Œå¾ˆæœ‰å¯èƒ½äº§ç”Ÿçš„å›¾åƒä¼šéå¸¸æ¨¡ç³Šï¼Œæ‰€ä»¥å°±éœ€è¦Conditional
GANæ¥å®Œæˆã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003031956.png" /></p>
<p>â€‹ å¦‚ä¸‹æ‰€ç¤ºå°±æ˜¯ä½¿ç”¨Conditional
GANçš„ç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨çš„ä¸€ä¸ªç¤ºæ„ç»“æœå›¾ï¼Œå…¶å®è·ŸText-To-Imageæ˜¯ä¸€æ ·çš„ï¼Œæ­¤å¤„å°±ä¸å¤šèµ˜è¿°äº†ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003040918.png" /></p>
<p>â€‹
ä½†æ˜¯å…¶å®ä»¥è¿™ç§æ–¹æ³•ç”Ÿæˆå‡ºæ¥çš„å›¾ç‰‡ï¼Œä¹Ÿä¼šå­˜åœ¨ä¸€äº›å°çš„é—®é¢˜ï¼Œå‚è§ä¹‹åçš„ç¬¬äºŒå¹…å›¾ã€‚å°±æ˜¯æ¯”å¦‚è¯´å®ƒå¯èƒ½ä¼šåœ¨å›¾åƒçš„æŸäº›åœ°æ–¹äº§ç”Ÿå¥‡å¥‡æ€ªæ€ªçš„å†…å®¹ã€‚ä½ å¯ä»¥ä»”ç»†è§‚å¯ŸGANç”Ÿæˆå›¾åƒçš„å·¦ä¸Šè§’ï¼Œå‡ºç°äº†å¥‡æ€ªçš„å†…å®¹ã€‚è¿™æ˜¯ç”±äºä»€ä¹ˆäº§ç”Ÿçš„å‘¢ï¼Ÿå°±æ˜¯Generatorå…¶å®åªå…³å¿ƒä¸€ä¸ªæ˜¯æˆ‘äº§ç”Ÿå‡ºæ¥çš„å›¾åƒå¥½ä¸å¥½ï¼Œå¦ä¸€ä¸ªæ˜¯å’Œè¾“å…¥å›¾åƒæ˜¯ä¸æ˜¯åŒ¹é…ï¼Œä½†ä¸å¤ªä¼šå…³å¿ƒä¸€ä¸ªç‚¹ï¼šå°±æ˜¯è¯´å’Œäº§ç”Ÿçš„å›¾ç‰‡å’ŒåŸæ¥çš„æœ‰ç›‘ç£å­¦ä¹ ä¸­çš„ç›®æ ‡å›¾åƒæ˜¯ä¸æ˜¯ç›¸ä¼¼ã€‚</p>
<p>â€‹
æ‰€ä»¥ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šåŠ ä¸Šä¸€ä¸ªé¢å¤–çš„é™åˆ¶ï¼Œå°±æ˜¯æˆ‘ä»¬å¸Œæœ›Generatorç”Ÿæˆçš„å›¾ç‰‡å’ŒåŸæ¥çš„å›¾åƒè¶Šæ¥è¿‘è¶Šå¥½ï¼Œä¹Ÿå°±æ˜¯è¯´æ—¢è€ƒè™‘äº†åŸæ¥ç›‘ç£å­¦ä¹ ä¸­çš„as
close as possibleï¼Œä¹Ÿè€ƒè™‘äº†GANçš„è¯„åˆ†æœºåˆ¶ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003054587.png" /></p>
<p>â€‹ ä¸‹é¢è¿™ä¸ªå°±æ˜¯ä¸Šé¢æ‰€è®²çš„ä¸‰ç§æ–¹æ³•ä¸åŒçš„ç”Ÿæˆæ•ˆæœç¤ºæ„å›¾</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003103515.png" /></p>
<p>â€‹ åŒæ—¶ï¼Œåœ¨ã€ŠImage-to-Image Translation with Conditional Adversarial
NetWorksã€‹è¿™ç¯‡è®ºæ–‡ä¸­ï¼Œå®ƒçš„Discriminatorç»è¿‡äº†ä¸€äº›é¢å¤–çš„è®¾è®¡ã€‚è¿™å°±æ˜¯å…¶å¼•å…¥çš„Patch
GANã€‚Patch GANè§£å†³äº†ä¸€ä»¶ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿ</p>
<p>â€‹ å¦‚æœä½ è¦ç”¨Conditional
GANäº§ç”Ÿçš„å›¾ç‰‡éå¸¸çš„å¤§ï¼Œå¾ˆæœ‰å¯èƒ½äº§ç”Ÿçš„ç»“æœä¼šå¾ˆå·®ã€‚åŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¦‚æœå›¾ç‰‡å¾ˆå¤§ï¼Œä»£è¡¨å…¶å±•å¼€åç»´åº¦éå¸¸çš„é«˜ï¼Œé‚£å°±éœ€è¦æœ‰éå¸¸å¤šçš„å‚æ•°å»è®­ç»ƒå®ƒï¼Œå‚æ•°ä¸€æ—¦éå¸¸å¤šï¼Œè®­ç»ƒä»¥åå¾ˆå®¹æ˜“å¯¼è‡´è¿‡æ‹Ÿåˆçš„æƒ…å†µå‘ç”Ÿã€‚æ‰€ä»¥ï¼Œä½œè€…æå‡ºäº†PatchGANçš„æƒ³æ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå·¦è¾¹æ˜¯ä¼ ç»Ÿçš„Discriminatorï¼Œå³è¾¹æ˜¯PatchGANçš„ã€‚</p>
<p>â€‹
PatchGANçš„Discriminatorå¹¶ä¸æ˜¯ç›´æ¥æ£€æŸ¥æ•´å¼ å›¾åƒï¼Œè€Œæ˜¯åªæ£€æŸ¥ä¸€ä¸ªå°çª—å£å†…çš„å›¾åƒã€‚å¾—å‡ºä¸€ä¸ªåˆ†æ•°ã€‚ç„¶åå†ç»¼åˆæ‰€æœ‰çª—å£å¾—å‡ºçš„åˆ†æ•°ã€‚è‡³äºæ£€æŸ¥çš„å°çª—å£çš„å°ºå¯¸ä¸ºå¤šå¤§ï¼Œæ˜¯ä¸€ä¸ªéœ€è¦è°ƒæ•´çš„è¶…å‚æ•°ï¼ŒåŸè®ºæ–‡ä¸­ä¹Ÿå¯¹å…¶æœ‰ä¸€å®šçš„åˆ†æï¼Œæ­¤å¤„ä¸å¤šèµ˜è¿°ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003123825.png" /></p>
<h3 id="äºŒstack-gan">äºŒã€Stack GAN</h3>
<p>â€‹ StackGANæ¥æºäºè¿™ç¯‡è®ºæ–‡ï¼šICCV2017ã€ŠStackGAN: Text to Photo-Realistic
Image Synthesis with Stacked Generative Adversarial
Networksã€‹ã€‚ç®€å•è€Œè¨€ï¼Œå…¶åªæ˜¯å°†Conditional
GANçš„ç”Ÿæˆåˆ†æˆäº†å¥½å‡ ä¸ªé˜¶æ®µï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆåˆ†è¾¨ç‡æ›´é«˜çš„å›¾ç‰‡ã€‚è¿™æ˜¯åŸè®ºæ–‡ä¸­æ‰€æ˜¾ç¤ºçš„æµç¨‹å›¾</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003145750.png" /></p>
<p>â€‹
ç®€å•è€Œè¨€ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼Œé¦–å…ˆè¾“å…¥ä¸€æ®µæ–‡æœ¬æè¿°ï¼Œé€šè¿‡EmbeddingåµŒå…¥å±‚åï¼Œç»è¿‡ä¸€ç³»åˆ—çš„Conditioning
Augmentationçš„å¤„ç†ï¼Œå°†å„ç§ä¿¡æ¯è¿æ¥åœ¨ä¸€èµ·ï¼Œç„¶ååœ¨ç”Ÿæˆå™¨éƒ¨åˆ†ï¼Œé¦–å…ˆç”Ÿæˆç¬¬ä¸€é˜¶æ®µçš„ç»“æœå›¾ç‰‡ã€‚ç„¶ååœ¨è¾“å…¥åˆ°ç¬¬ä¸€é˜¶æ®µçš„åˆ¤åˆ«å™¨ä¸­ã€‚å½“ç¬¬ä¸€é˜¶æ®µçš„ç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨å®Œæˆè®­ç»ƒä»¥åï¼Œæˆ‘ä»¬å†å°†ç¬¬ä¸€é˜¶æ®µçš„ç”Ÿæˆç»“æœï¼Œä¸æè¿°æ–‡æœ¬ä½œä¸ºè¾“å…¥ï¼Œå¼€å§‹è®­ç»ƒç¬¬äºŒé˜¶æ®µçš„GANç½‘ç»œã€‚æ­¥éª¤ä¸ç¬¬ä¸€é˜¶æ®µçš„GANç½‘ç»œç±»ä¼¼ï¼Œæœ€ç»ˆå¯ä»¥å¾—åˆ°æ›´é«˜åˆ†è¾¨ç‡çš„ç¬¬äºŒé˜¶æ®µçš„ç»“æœå›¾åƒã€‚å…·ä½“ç»†èŠ‚éƒ¨åˆ†ï¼Œæˆ‘æš‚æ—¶ä¹Ÿæ²¡æœ‰å®Œæ•´çš„é˜…è¯»è¿‡åŸè®ºæ–‡ï¼Œæš‚ä¸”åªæ˜¯é¢†ä¼šä¸€ä¸‹è¿™ç§æ–¹æ³•çš„å¤§è‡´æ€è·¯ã€‚</p>
<h3 id="ä¸‰unsupervised-conditional-generation">ä¸‰ã€Unsupervised
Conditional Generation</h3>
<p>â€‹
éç›‘ç£çš„æ¡ä»¶ç”Ÿæˆï¼Œé€šå¸¸ç”¨äºé£æ ¼è¿ç§»ã€‚åœ¨é£æ ¼è¿ç§»çš„åº”ç”¨åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€èƒ½å¤Ÿæ”¶é›†åˆ°è®¸å¤šDomain
Xçš„ä¿¡æ¯ï¼Œä¹Ÿèƒ½æ”¶é›†åˆ°è®¸å¤šDomain Yçš„ä¿¡æ¯ï¼Œä½†æ˜¯ä¸ä¸€å®šèƒ½å¤Ÿæ‹¥æœ‰Domian
Xå’ŒDomain Yçš„ä¸€ä¸€å¯¹åº”çš„pair
æ•°æ®ã€‚åƒç±»ä¼¼è¿™æ ·å­çš„åœºæ™¯ä¸­ï¼Œéç›‘ç£çš„æ¡ä»¶ç”Ÿæˆå°±æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003209328.png" /></p>
<p>â€‹ éç›‘ç£çš„æ¡ä»¶ç”Ÿæˆï¼Œæˆ‘ä»¬å¾€å¾€ä¼šæœ‰ä¸¤ç§æ–¹æ³•æ€è·¯å»å®Œæˆï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>â€‹ æ–¹æ³•1æ˜¯Direct Transformation
ç›´æ¥è½¬æ¢ï¼Œæ­¤ç§ç›´æ¥é€šè¿‡ä¸€ä¸ªç”Ÿæˆå™¨è¿›è¡Œè½¬æ¢çš„æ–¹æ³•ï¼Œå¾€å¾€ä¸¤ä¸ªåŸŸå†…çš„å›¾åƒä¸èƒ½å¤Ÿæœ‰å¤ªè¿‡å·¨å¤§çš„å·®è·ï¼Œé€šå¸¸ç”¨äºåšçº¹ç†æˆ–è€…é¢œè‰²ä¸Šçš„ä¸€äº›æ”¹å˜ï¼Œä»¥è¾¾åˆ°é£æ ¼çš„å˜åŒ–ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003225024.png" /></p>
<p>â€‹ æ–¹æ³•2æ˜¯Projection to Common Space
æŠ•å°„åˆ°å…¬å…±ç©ºé—´ï¼Œæ­¤ç§æ–¹æ³•é€šè¿‡å°†ä¸¤ä¸ªDomainæŠ•å°„åˆ°ä¸€ä¸ªå…¬å…±ç©ºé—´ä¸­ï¼Œå®Œæˆè½¬æ¢ã€‚å…·ä½“è€Œè¨€ï¼Œå¯¹äºä¸‹è¿°çš„ä»»åŠ¡æ¥è¯´ï¼Œå…ˆå°†DomainXçœŸå®äººè„¸çš„ä¿¡æ¯é€šè¿‡ä¸€ä¸ªDomain
Xçš„ç¼–ç å™¨è½¬æ¢åˆ°å…¬å…±ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„è„¸éƒ¨å±æ€§ç©ºé—´ï¼Œç„¶åå†å°†è„¸éƒ¨å±æ€§ç©ºé—´ï¼Œé€šè¿‡ä¸€ä¸ªDomain
Yçš„è§£ç å™¨ï¼Œè§£ç å‡ºæˆ‘ä»¬çš„DomainYåŠ¨æ¼«äººè„¸çš„ä¿¡æ¯ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003237748.png" /></p>
<p>æ¥ä¸‹å»æˆ‘ä»¬ä¼šå¯¹ä¸¤ç§æ–¹æ³•è¿›è¡Œè¯¦ç»†çš„è®¨è®ºï¼š</p>
<h4 id="direct-transformationå†…å«cycleganç½‘ç»œè®²è§£"><strong>1ã€Direct
Transformationï¼ˆå†…å«CycleGANç½‘ç»œè®²è§£ï¼‰</strong></h4>
<p>â€‹
æˆ‘ä»¬è¦è®­ç»ƒä¸€ä¸ªç”Ÿæˆå™¨ï¼Œèƒ½å¤Ÿå®Œæˆå°†å›¾ç‰‡ä»DomainXç›´æ¥è½¬æ¢è‡³DomainYçš„ä»»åŠ¡ï¼Œä½†æ˜¯è¯¥ç”Ÿæˆå™¨äº§ç”Ÿçš„å›¾ç‰‡æˆ‘ä»¬æ€ä¹ˆå»è¯„ä»·å‘¢ï¼Ÿåœ¨æœ‰ç›‘ç£å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€å¯¹ä¸€çš„æ•°æ®ï¼Œä½†æ˜¯åœ¨æ— ç›‘ç£å­¦ä¹ ä¸­ï¼Œå¯¹äºè¿™ä¸ªè¾“å…¥è€Œè¨€ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰pairå¯ä»¥æä¾›ç»™å®ƒã€‚æ‰€ä»¥æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªDiscriminatorï¼Œè¿™ä¸ªåˆ¤åˆ«å™¨ç”¨äºåˆ¤æ–­ä¸€ä¸ªå›¾ç‰‡ï¼Œæ˜¯å¦å±äºDomainYï¼Œç„¶åè¾“å‡ºä¸€ä¸ªåˆ†æ•°ã€‚</p>
<p>â€‹
é‚£ä¹ˆè¿™æ ·ä¸€æ¥ï¼ŒGeneratorçš„ç›®æ ‡å°±æ˜¯å¦‚ä½•å°†DomainXçš„å›¾ç‰‡è½¬æ¢æˆä¸€ä¸ªæ–°çš„å›¾ç‰‡ï¼Œèƒ½å¤Ÿéª—è¿‡Discriminatorï¼Œè€ŒDiscriminatorä¹Ÿè¦åŠªåŠ›é‰´åˆ«è¿™ä¸ªå›¾åƒåˆ°åº•æ˜¯ä¸æ˜¯å±äºDomainYã€‚ä¸‹å›¾ï¼Œå°±æ˜¯æ•´ä¸ªè¿‡ç¨‹çš„ä¸€ä¸ªç›´è§‚çš„ç¤ºæ„å›¾ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003304210.png" /></p>
<p>â€‹
åœ¨è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¥½åƒé—®é¢˜å·²ç»è§£å†³äº†ï¼Œå®åˆ™ä¸ç„¶ã€‚ä½ ä¼šå‘ç°ï¼Œç”Ÿæˆå™¨åªå­¦ä¼šäº†æ€ä¹ˆç”Ÿæˆä¸€ä¸ªDomainYçš„å›¾ç‰‡å»éª—è¿‡åˆ¤åˆ«å™¨ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰ç»™å®ƒé™åˆ¶ï¼Œè¯´è¦è®©è¿™ä¸ªç”Ÿæˆå™¨ç”Ÿæˆçš„DomainYçš„å›¾ç‰‡å’ŒåŸæ¥çš„DomainXçš„å›¾ç‰‡è¦ç›¸ä¼¼å•Šã€‚é‚£ä¸‡ä¸€ï¼Œè¾“å…¥æ˜¯ä¸€å¼ DomainXçš„é£æ™¯å›¾ï¼Œç”Ÿæˆå™¨è¾“å‡ºäº†ä¸€å¼ DomainYçš„äººåƒå›¾ï¼Œä¸ç…§æ ·èƒ½å¤Ÿè·å¾—å¾ˆé«˜çš„åˆ†æ•°ï¼Œè¿™å½“ç„¶å°±ä¸å¯¹å•¦ã€‚</p>
<p>â€‹
æ‰€ä»¥ï¼Œæˆ‘ä»¬å°±å¸Œæœ›ç”Ÿæˆå™¨ç”Ÿæˆçš„DomainYçš„è¾“å‡ºï¼Œåº”è¯¥å’ŒDomainXçš„è¾“å…¥åº”å½“ä¼šå­˜åœ¨ä¸€å®šçš„å…³ç³»æ‰å¯¹ï¼Œè€Œä¸æ˜¯æ¯«æ— å…³ç³»å¯è¨€ã€‚é’ˆå¯¹äºè¿™ä¸ªé—®é¢˜è€Œè¨€ï¼Œæœ‰è®¸å¤šè§£å†³æ–¹æ¡ˆï¼Œå™è¿°å¦‚ä¸‹ï¼Œå…¶ä¸­æœ€è‘—åçš„å°±æ˜¯ç†ŸçŸ¥çš„cycleGANã€‚</p>
<h5 id="è§£å†³æ–¹æ¡ˆ1ä¸ç®¡è¿™ä¸ªé—®é¢˜">1ï¼‰è§£å†³æ–¹æ¡ˆ1ï¼šä¸ç®¡è¿™ä¸ªé—®é¢˜</h5>
<p>â€‹
å¬ä¸Šå»è¿™ä¸ªè§£å†³æ–¹æ¡ˆéå¸¸çš„æ‰¯æ·¡ï¼Œä½†å…¶å®åœ¨æŸç§æ¡ä»¶ä¸‹å®ƒç¡®å®workã€‚å…·ä½“è€Œè¨€æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå½“æˆ‘ä»¬çš„ç½‘ç»œå±‚æ•°ä¸æ˜¯å¾ˆæ·±çš„æ—¶å€™ï¼Œå…¶å®ç½‘ç»œæœ¬èº«ä¹Ÿå€¾å‘äºä¸å¯¹inputåšå¤ªå¤§çš„æ”¹å˜ï¼Œæœ‰äººä¹Ÿåšè¿‡å®éªŒï¼Œä¸å»ç®¡è¿™ä¸ªé—®é¢˜ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ä¹Ÿä¸ä¼šå¾—åˆ°å¤ªå·®çš„ç»“æœï¼Œå¾—åˆ°çš„ç»“æœå’Œinputå…¶å®ä¹Ÿç±»ä¼¼ã€‚</p>
<p>â€‹
ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„ç½‘ç»œæ¯”è¾ƒæ·±çš„è¯ï¼Œç»è¿‡éå¸¸å¤šçš„éçº¿æ€§å˜æ¢ä¸çº¿æ€§å˜æ¢ï¼Œå…¶å®å°±å¹¶ä¸å¥½è¯´ï¼Œæœ€åè¾“å‡ºçš„outputï¼Œä¼šå’Œinputç›¸å·®ä¸å¤§äº†ã€‚è¿™ä¸ªæ—¶å€™çš„è¯ï¼Œæˆ‘ä»¬å¯èƒ½å°±éœ€è¦å…¶ä»–çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h5
id="è§£å†³æ–¹æ¡ˆ2åˆ©ç”¨é¢„è®­ç»ƒçš„ç¼–ç å™¨ç½‘ç»œå¦‚ä¸‹å›¾æ‰€ç¤º">2ï¼‰è§£å†³æ–¹æ¡ˆ2ï¼šåˆ©ç”¨é¢„è®­ç»ƒçš„ç¼–ç å™¨ç½‘ç»œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</h5>
<p>â€‹
æˆ‘ä»¬åˆ©ç”¨ä¸¤ä¸ªé¢„è®­ç»ƒå¥½çš„DomainXå’ŒDomainYçš„ç¼–ç å™¨ç½‘ç»œï¼Œåœ¨GANè®­ç»ƒçš„æ—¶å€™å‘¢ï¼Œç”Ÿæˆå™¨è®­ç»ƒçš„ç›®æ ‡ä»»åŠ¡åˆå¤šäº†ä¸€é¡¹ã€‚ä¹‹å‰ç”Ÿæˆå™¨åªéœ€è¦ç”Ÿæˆå›¾ç‰‡ï¼ŒåŠªåŠ›çš„å»éª—è¿‡Discriminatorå°±å¯ä»¥ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦ç”Ÿæˆçš„å›¾ç‰‡è¶Šæ¥è¶ŠåƒDomainYçš„å›¾ç‰‡å°±å¯ä»¥ï¼Œä½†æ˜¯æˆ‘ç°åœ¨å¸Œæœ›ç”Ÿæˆå™¨ç”Ÿæˆçš„å›¾ç‰‡ï¼Œç»è¿‡DomainYé¢„è®­ç»ƒçš„ç¼–ç å™¨ç½‘ç»œåï¼Œç”Ÿæˆçš„ç‰¹å¾å‘é‡Aï¼Œå’ŒåŸå›¾ç»è¿‡DomainXé¢„è®­ç»ƒçš„ç¼–ç å™¨ç½‘ç»œåç”Ÿæˆçš„ç‰¹å¾å‘é‡Bï¼Œä¹Ÿå°½å¯èƒ½åœ°ç›¸ä¼¼ã€‚è¿™æ ·ä¸€æ¥ï¼Œä½ ä¼šå‘ç°ï¼Œå¦‚æœä¸¤ä¸ªç¼–ç åçš„å†…å®¹è¶Šæ¥è¿‘è¶Šå¥½çš„è¯ï¼ŒDomainXåœ¨è½¬æ¢è‡³DomainYçš„æ—¶å€™ï¼Œäº§ç”Ÿçš„å›¾ç‰‡ï¼Œåº”è¯¥æ˜¯ä¿ç•™äº†åŸæ¥DomainXå›¾ç‰‡çš„æŸäº›ç‰¹å¾çš„ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003341802.png" /></p>
<h5 id="è§£å†³æ–¹æ¡ˆ3cyclegan">3ï¼‰è§£å†³æ–¹æ¡ˆ3ï¼šCycleGAN</h5>
<p>â€‹ åŸè®ºæ–‡é¢˜ç›®ä¸ºã€ŠUnpaired Image-to-Image Translation using
Cycle-Consistent Adversarial
Networksã€‹ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥çœ‹åŸè®ºæ–‡ï¼Œå…¶ä¸»è¦å¤§è‡´æ€æƒ³å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p>â€‹
æˆ‘ä»¬ä¸ä»…è®­ç»ƒä¸€ä¸ªDomainXåˆ°DomainYçš„ç”Ÿæˆå™¨ï¼ŒåŒæ—¶ä¹Ÿè®­ç»ƒä¸€ä¸ªDomainYåˆ°DomainXçš„ç”Ÿæˆå™¨ï¼Œç”Ÿæˆå™¨X-&gt;Yåœ¨åŸæœ‰çš„éœ€è¦éª—è¿‡Dyçš„åŸºç¡€ä¸Šï¼Œè¿˜éœ€è¦ä½¿å¾—åŸå§‹è¾“å…¥å›¾åƒå’Œç»è¿‡ä¸¤ä¸ªç”Ÿæˆå™¨åäº§ç”Ÿçš„å›¾åƒè¶Šæ¥è¿‘è¶Šå¥½ï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„Cycle
consistencyï¼Œå¾ªç¯ä¸€è‡´æ€§ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003358128.png" /></p>
<p>â€‹ å¯¹äºCycleGANæ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥è®­ç»ƒåŒå‘çš„ä¸€ä¸ªç½‘ç»œï¼Œä¸¤ä¸ªä¸€èµ·å»åšè®­ç»ƒã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003406257.png" /></p>
<p>â€‹ å…¶å®CycleGANä¹Ÿå­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œåœ¨è®ºæ–‡ã€ŠCycleGAN, a Master of
Steganographyã€‹ä¸­ï¼Œå…¶ä½œè€…æåˆ°ï¼Œåœ¨DomianXçš„è¾“å…¥å›¾åƒç»è¿‡ä¸¤ä¸ªç”Ÿæˆå™¨çš„è¿‡ç¨‹ä¸­ï¼Œå‡ºç°é—®é¢˜ã€‚å…·ä½“è€Œè¨€ï¼Œè¾“å…¥çš„å›¾åƒçš„æœ‰äº›ä¿¡æ¯ä¼šåœ¨ç»è¿‡ç¬¬ä¸€ä¸ªç”Ÿæˆå™¨çš„æ—¶å€™è¢«éšè—èµ·æ¥ï¼Œæ­¤å¤„çš„è¢«éšè—èµ·æ¥ä¹Ÿå°±æ˜¯æŒ‡äººè‚‰çœ¼è§‚å¯Ÿä¸åˆ°ï¼Œè€Œå½“å…¶ç»è¿‡ç¬¬äºŒä¸ªç”Ÿæˆå™¨çš„æ—¶å€™ï¼Œåˆä¼šè¢«è¿˜åŸå‡ºæ¥ã€‚å¦‚ä¸‹å›¾çº¢è‰²æ–¹æ¡†ä¸­æ‰€ç¤ºã€‚è¿™å°±æ„å‘³ç€ï¼Œç”Ÿæˆå™¨ç½‘ç»œæœ‰éšè—ä¿¡æ¯çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å¦‚æœåªæ§åˆ¶inputå’Œç»è¿‡ä¸¤ä¸ªç”Ÿæˆå™¨çš„outputçš„ä¸€è‡´æ€§ï¼Œä¸­é—´äº§ç”Ÿçš„æˆ‘ä»¬çœŸæ­£è¦çš„å›¾åƒè¿˜æ˜¯æœ‰å¯èƒ½ä¸¢å¤±åŸå›¾çš„éƒ¨åˆ†ä¿¡æ¯ã€‚è¿™æ˜¯ä¸€ä¸ªå°šå¾…ç ”ç©¶çš„é—®é¢˜ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003414078.png" /></p>
<p>â€‹
æ­¤å¤„çš„è¯è¡¥å……ä¸€ä¸‹å¦å¤–ä¸€ä¸ªç½‘ç»œï¼Œæ˜¯åœ¨CycleGANçš„åŸºç¡€ä¸Šè¿›è¡Œçš„ä¸€ä¸ªå‡çº§ï¼Œå«åšStarGANã€‚å…¶åº”ç”¨é¢†åŸŸåœ¨äºï¼Œå½“ä½ éœ€è¦å¤šä¸ªDomainçš„ä¿¡æ¯é£æ ¼äº’ç›¸è½¬æ¢çš„æ—¶å€™ï¼Œæ€ä¹ˆè¿›è¡Œç½‘ç»œçš„å­¦ä¹ ä¸å¤„ç†ã€‚</p>
<p>â€‹
æŒ‰ç…§ä¹‹å‰CycleGANçš„æ€è·¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨4ä¸ªDomainå†…åšäº’ç›¸è½¬æ¢ï¼Œéœ€è¦åœ¨ä¸¤ä¸¤ä¹‹é—´è®­ç»ƒä¸€ç»„ç”Ÿæˆå™¨ã€‚StarGANå°±æ˜¯å¯ä»¥ä¹‹è®­ç»ƒä¸€ä¸ªç”Ÿæˆå™¨ï¼Œå°±å®Œæˆåœ¨å¤šä¸ªDomainä¹‹é—´çš„ä¿¡æ¯äº’ç›¸è½¬æ¢ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003422218.png" /></p>
<p>â€‹ åŸè®ºæ–‡ä¸ºã€ŠStarGAN: Unified Generative Adversarial Networks for
Multi-Domain Image-to-Image
Translationã€‹ï¼Œå…¶ä¸»è¦æ€æƒ³åŠè®­ç»ƒè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li><p>A)æ­¥éª¤ï¼Œé¦–å…ˆè®­ç»ƒåˆ¤åˆ«å™¨ï¼Œåˆ¤åˆ«å™¨ä¼šå®Œæˆä¸¤ä»¶äº‹ï¼Œä¸€æ˜¯è¦åˆ¤åˆ«è¿™ä¸ªå›¾åƒä»–æ˜¯çœŸå®çš„è¿˜æ˜¯è™šå‡çš„ï¼ŒäºŒæ˜¯è¦åšä¸€ä¸ªåˆ†ç±»çš„é—®é¢˜ï¼Œå®ƒæ˜¯å±äºå“ªä¸€ä¸ªDomainï¼Œç»™å‡ºä¸¤ä¸ªç»“æœã€‚</p></li>
<li><p>B)C)æ­¥éª¤,
åœ¨è®­ç»ƒç”Ÿæˆå™¨æ—¶ï¼Œè¦å®Œæˆè¿™æ ·ä¸€ä¸ªä»»åŠ¡ã€‚é¦–å…ˆè¾“å…¥æˆ‘ä»¬çš„è¾“å…¥å›¾ç‰‡ï¼Œä»¥åŠç›®æ ‡Domainï¼Œç„¶åç”Ÿæˆå™¨ä¼šç”Ÿæˆä¸€ä¸ªFake
Imageï¼Œæˆ‘ä»¬å°†è¿™ä¸ªFake
Imageå’ŒåŸæ¥çš„Domainä½œä¸ºè¾“å…¥ï¼Œå†æ¬¡é€å…¥ç”Ÿæˆå™¨ä¸­ï¼Œä¼šå¾—åˆ°ä¸€å¼ Reconstructed
Imageï¼Œæˆ‘ä»¬å¸Œæœ›è¿™å¼ é‡å»ºçš„å›¾åƒå’Œè¾“å…¥çš„å›¾åƒä¹‹é—´çš„å·®è·è¶Šå°è¶Šå¥½ï¼Œå…¶å®è¿™å°±æ˜¯Cycle
Consistencyç±»ä¼¼çš„æ€æƒ³ã€‚</p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003432585.png" /></p>
<ul>
<li><ol start="4" type="A">
<li>æ­¥éª¤ï¼ŒåŒæ—¶åœ¨è®­ç»ƒç”Ÿæˆå™¨çš„æ—¶å€™ï¼Œè¿˜æœ‰ä¸€ä¸ªç›®æ ‡ï¼Œå°±æ˜¯è¦è®©è¿™ä¸ªFake
Imageéª—è¿‡æˆ‘ä»¬ä¹‹å‰è®­ç»ƒå¥½çš„Discriminatorï¼Œä½¿å¾—Discriminatorçš„è¾“å‡ºè¶Šå¤§è¶Šå¥½ã€‚</li>
</ol></li>
</ul>
<p>â€‹
ä¸‹å›¾æ˜¯ä¸€ä¸ªè®­ç»ƒåº”ç”¨å®ä¾‹çš„ç¤ºæ„å›¾ï¼Œåœ¨StarGANçš„å®é™…è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå…¶å®åŸŸå¯ä»¥æ˜¯ç”±ä¸€ç»„ç¼–ç å†³å®šçš„ã€‚å°±æ¯”å¦‚è¯´00101ä»£è¡¨ä¸€ä¸ªåŸŸï¼Œ10011ä¹Ÿä»£è¡¨ä¸€ä¸ªåŸŸã€‚ç„¶å00101æœ‰ä¸€ä¸ªå‚ç…§è¡¨ï¼Œä¹Ÿå°±æ˜¯labelï¼Œä»£è¡¨ç›¸å¯¹çš„å«ä¹‰ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003446510.png" /></p>
<h4 id="projection-to-common-space">2ã€Projection to Common Space</h4>
<p>â€‹
åœ¨æ­¤ç±»æ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å®ŒæˆDomainXå’ŒDomainYä¸¤ç§é£æ ¼çš„äº’ç›¸è½¬æ¢ï¼Œæˆ‘ä»¬å…¶å®éœ€è¦çš„å°±æ˜¯å¦‚ä¸‹å›¾æ‰€ç¤ºçš„2ä¸ªEncoderå’Œ2ä¸ªDecoderã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¦ä»Xè½¬æ¢è‡³Yï¼Œé‚£ä¹ˆå›¾åƒåº”å½“å…ˆé€šè¿‡EncoderXï¼Œå¾—åˆ°ä¸€ä¸ªFace
Attributeï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªLatent
Vectorï¼Œç„¶åå†ç»è¿‡DecoderYï¼Œæœ€ç»ˆå¾—åˆ°DomainYçš„å›¾åƒã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003534380.png" /></p>
<p>â€‹
è¿™æ ·æ¥çœ‹ï¼Œå¦‚æœæˆ‘ä»¬æ‹¥æœ‰ä¸€å¯¹ä¸€çš„pairæ•°æ®ï¼Œé‚£ä¹ˆå…¶å®å®Œæˆè¿™ä¸ªä»»åŠ¡éå¸¸çš„å®¹æ˜“ï¼Œåªéœ€è¦æ­£å¸¸çš„ç›‘ç£å­¦ä¹ è®­ç»ƒå³å¯ã€‚ä½†æ˜¯æˆ‘ä»¬ç°åœ¨æ˜¯æ— ç›‘ç£åœºæ™¯ä¸‹çš„è®­ç»ƒï¼Œåº”å½“å¦‚ä½•å®Œæˆè®­ç»ƒå‘¢ï¼Ÿ</p>
<p>â€‹
æˆ‘ä»¬å¯ä»¥åƒä¸‹å›¾æ‰€ç¤ºè¿™æ ·è¿›è¡Œè®­ç»ƒï¼Œå…¶å®å°±æ˜¯è®­ç»ƒäº†ä¸¤ä¸ªè‡ªåŠ¨ç¼–ç å™¨ï¼Œé€šè¿‡æœ€å°åŒ–é‡å»ºè¯¯å·®æ¥è¿›è¡Œä¼˜åŒ–ã€‚ç„¶ååœ¨æ­¤åŸºç¡€ä¸Šæˆ‘ä»¬å¯ä»¥åŠ ä¸¤ä¸ªåˆ¤åˆ«å™¨ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003544456.png" /></p>
<p>â€‹
å¦‚æ­¤è€Œè¨€ï¼Œæˆ‘ä»¬ç¡®å®å¯ä»¥å¾—åˆ°2ä¸ªEncoderå’Œ2ä¸ªDecoderã€‚ä½†æ˜¯è¿™ä¸¤ç»„AutoEncoderï¼ˆVAEGANï¼‰æ˜¯å®Œå…¨æ²¡æœ‰å…³ç³»çš„ã€‚è¿™æ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿä½ çœ‹ä¸Šå›¾ä¸­ï¼Œä¸­é—´çš„è¿™ä¸ªLatent
vectorï¼Œä¸¤è¾¹å…±ç”¨ä¸€ä¸ªï¼Œå…¶å®æ¥è¯´ï¼Œä¸¤è¾¹è®­ç»ƒå‡ºæ¥ä»¥åï¼Œå¾—åˆ°çš„ä¸­é—´çš„è¿™ä¸ªç‰¹å¾å‘é‡ï¼Œæ¯ä¸€ä¸ªç»´åº¦æ‰€ä»£è¡¨çš„å«ä¹‰ä¼šæ˜¯å®Œå…¨ä¸åŒçš„ã€‚å…¶å®å°±å˜æˆäº†å¦‚ä¸‹å›¾æ‰€ç¤ºçš„è¿™æ ·å­ä¸€ä¸ªæ•ˆæœã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003552083.png" /></p>
<p>â€‹
æ‰€ä»¥æœ€ç»ˆå¯¼è‡´çš„ç»“æœå°±æ˜¯ï¼šä½ å°†ä¸€ä¸ªDomainXçš„å›¾ç‰‡ä¸¢å…¥Xç¼–ç å™¨ï¼Œå¾—åˆ°ä¸€ä¸ªå‘é‡ï¼Œç„¶åå°†å‘é‡ä¸¢å…¥Yè§£ç å™¨ï¼Œå¯èƒ½ç”Ÿæˆçš„æ˜¯ä¸€ä¸ªå®Œå…¨ä¸ç›¸å…³çš„DomainYçš„å›¾ç‰‡ã€‚</p>
<p>â€‹ æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ˜¯è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿä¼šæœ‰æ¯”è¾ƒå¤šçš„æ–‡çŒ®è§£å†³æ–¹æ¡ˆï¼š</p>
<h5
id="è§£å†³æ–¹æ¡ˆ1å…±ç”¨éƒ¨åˆ†éšè—å±‚å‚æ•°">1ï¼‰è§£å†³æ–¹æ¡ˆ1ï¼šå…±ç”¨éƒ¨åˆ†éšè—å±‚å‚æ•°</h5>
<p>â€‹
å…±ç”¨EncoderXå’ŒEncoderYçš„åé¢å‡ å±‚ï¼ŒåŒæ—¶ä¹Ÿå…±ç”¨DecoderXå’ŒDecoderYçš„å‰é¢å‡ å±‚ã€‚è¿™æ ·å­åšå…¶å®å°±æ˜¯å¸Œæœ›ï¼Œæ¥è¿‘ä¸­é—´è¿™ä¸ªç‰¹å¾å‘é‡çš„å±‚å…±ç”¨å‚æ•°ä»¥åï¼Œä¸¤è¾¹çš„ç¼–ç èƒ½å¤Ÿåœ¨ä¸­é—´çš„ç‰¹å¾å‘é‡çš„ç»´åº¦ä¸Šè¾¾æˆä¸€è‡´ã€‚</p>
<p>â€‹
è¿™ç§è§£å†³æ–¹æ¡ˆæ¯”è¾ƒæç«¯çš„æƒ…å†µæ—¶ï¼Œå¯ä»¥è®©EncoderXå’ŒEncoderYå…±ç”¨æ‰€æœ‰å‚æ•°ï¼ŒDecoderXå’ŒDecoderYå…±ç”¨æ‰€æœ‰å‚æ•°ï¼Œåªæ˜¯åœ¨è®­ç»ƒå’Œä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘è¾“å…¥ä¸€ä¸ªæ ‡ç­¾ï¼Œä»£è¡¨è¿™ä¸ªæ˜¯X
Domainè¿˜æ˜¯Y Domainã€‚è¿™ä¸ªæ–¹æ³•ç”¨äºCoupleGANå’ŒUNIT</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003616483.png" /></p>
<h5 id="è§£å†³æ–¹æ¡ˆ2domain-discriminator">2ï¼‰è§£å†³æ–¹æ¡ˆ2ï¼šDomain
Discriminator</h5>
<p>â€‹ æˆ‘ä»¬åœ¨ç½‘ç»œæ¶æ„ä¸­ï¼Œæ–°å¢ä¸€ä¸ªDomain
Discriminatorã€‚åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼ŒEncoderXå’ŒEncoderYè¿˜æœ‰ä¸€ä¸ªä»»åŠ¡ï¼Œå°±æ˜¯è¯´ä»–ä»¬æ‰€ç”Ÿæˆçš„ä¸­é—´çš„ç‰¹å¾å‘é‡ï¼Œè¿˜è¦èƒ½éª—è¿‡Domain
Discriminatorï¼Œè®©è¿™ä¸ªåˆ¤åˆ«å™¨æ— æ³•é‰´åˆ«ï¼Œè¿™ä¸ªç‰¹å¾å‘é‡åˆ°åº•æ˜¯ä»EncoderXæ¥çš„ï¼Œè¿˜æ˜¯ä»EncoderYæ¥çš„ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œå®Œæˆè®­ç»ƒåï¼Œç›¸å½“äºè¯´æ˜¯ä¸¤ä¸ªç¼–ç å™¨äº§ç”Ÿçš„ä¸­é—´çš„ç‰¹å¾å‘é‡åº”è¯¥éµå¾ªç€ç±»ä¼¼çš„åˆ†å¸ƒï¼Œèƒ½å¤Ÿåœ¨ä¸­é—´çš„ç‰¹å¾å‘é‡çš„ç»´åº¦è¡¨ç¤ºä¸Šè¾¾æˆä¸€è‡´ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003651260.png" /></p>
<h5
id="è§£å†³æ–¹æ¡ˆ3åˆ©ç”¨cycle-consistencyçš„ç±»ä¼¼æ€æƒ³">3ï¼‰è§£å†³æ–¹æ¡ˆ3ï¼šåˆ©ç”¨Cycle
Consistencyçš„ç±»ä¼¼æ€æƒ³</h5>
<p>â€‹
å¦‚å›¾çº¢çº¿è·¯å¾„æ‰€ç¤ºï¼Œå›¾åƒç»è¿‡EncoderXï¼Œäº§ç”Ÿç‰¹å¾å‘é‡ï¼Œç»è¿‡DecoderYäº§ç”ŸImageï¼Œå†å°†è¿™ä¸ªImageä½œä¸ºè¾“å…¥è¿›å…¥EncoderYï¼Œäº§ç”Ÿç‰¹å¾å‘é‡ï¼Œç»è¿‡DecoderXäº§ç”Ÿoutputï¼Œç„¶åæœ€å°åŒ–inputå’Œoutputçš„é‡å»ºè¯¯å·®å³å¯ã€‚è¯¥æ–¹æ³•è¢«ç”¨äºComboGANã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003717264.png" /></p>
<h5
id="è§£å†³æ–¹æ¡ˆ4åˆ©ç”¨semantic-consistencyçš„ç±»ä¼¼æ€æƒ³">4ï¼‰è§£å†³æ–¹æ¡ˆ4ï¼šåˆ©ç”¨Semantic
Consistencyçš„ç±»ä¼¼æ€æƒ³</h5>
<p>â€‹
æŒ‰ç…§å›¾ä¸­çº¢çº¿è·¯å¾„ï¼Œinputè¾“å…¥ç»è¿‡EncoderXï¼Œäº§ç”Ÿç‰¹å¾å‘é‡Aï¼Œç»è¿‡DecoderYäº§ç”ŸImageï¼Œå†å°†è¿™ä¸ªImageä½œä¸ºè¾“å…¥è¿›å…¥EncoderYï¼Œäº§ç”Ÿç‰¹å¾å‘é‡Bã€‚ç„¶åæœ€å°åŒ–Aå’ŒBçš„å·®åˆ«å³å¯ã€‚ç›¸æ¯”äºCycleConsistencyï¼Œæ­¤ç§æ€æƒ³ç›´æ¥åœ¨ç‰¹å¾å‘é‡çš„ç©ºé—´ä¸­å»è€ƒè™‘ç›¸ä¼¼åº¦ï¼Œé¿å…äº†æ¯”å¦‚è¯´å¯èƒ½inputå’Œoutputè¡¨è±¡ä¸Šå¾ˆåƒï¼Œä½†å…¶å®ä¸­é—´ç‰¹å¾å‘é‡ä»£è¡¨ç»´åº¦ä»ç„¶ä¸åŒè¿™ç§é—®é¢˜ã€‚è¯¥ç§æ€æƒ³åœ¨DTNå’ŒXGANç½‘ç»œä¸­ä½¿ç”¨ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115003743216.png" /></p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>GANç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>GAN</tag>
        <tag>ConditionalGAN</tag>
        <tag>PatchGAN</tag>
        <tag>CycleGAN</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonæ­å»ºæ·±åº¦å­¦ä¹ æ¡†æ¶ç³»åˆ—ç¬”è®°1â€”â€”è®¡ç®—å›¾ã€æ¢¯åº¦ä¸‹é™ã€åå‘ä¼ æ’­ã€è‡ªåŠ¨å¾®åˆ†çš„ç†è®ºéƒ¨åˆ†</title>
    <url>/2022/02/10/f5cccb7aefe2/</url>
    <content><![CDATA[<h3 id="ä¸€æ·±åº¦å­¦ä¹ è®­ç»ƒé€»è¾‘æ¡†æ¶æ¢³ç†">ä¸€ã€æ·±åº¦å­¦ä¹ è®­ç»ƒé€»è¾‘æ¡†æ¶æ¢³ç†ï¼š</h3>
<p>â€‹
æˆ‘ä»¬ä»¥è§£å†³ä¸€ä¸ªç®€å•çš„é—®é¢˜çš„æ·±åº¦å­¦ä¹ è®­ç»ƒé€»è¾‘ä¸ºä¾‹ï¼Œæ¢³ç†ä¸€ä¸‹åœ¨æ¡†æ¶å†…éƒ¨å‘ç”Ÿçš„æ•´ä½“æ­¥éª¤ï¼š</p>
<ul>
<li>1ã€æ„å»ºæ¨¡å‹å‡½æ•°
Fï¼ˆæ­¤æ­¥å…¶å®å°±æ˜¯å¯¹åº”ç€ç”¨æˆ·ä¼ å…¥çš„<strong>æ„å»ºçš„æ·±åº¦å­¦ä¹ æ¨¡å‹modelï¼Œæ·±åº¦å­¦ä¹ æ¨¡å‹modelä¸­åˆå¯èƒ½å«æœ‰è®¸å¤šå±‚layer</strong>ï¼‰</li>
<li>2ã€ç¡®å®šæŸå¤±å‡½æ•° L
ï¼ˆç”¨æˆ·ä¼ å…¥çš„æŸå¤±å‡½æ•°ï¼Œå¸¸è§çš„æœ‰äº¤å‰ç†µã€L1ã€L2ç­‰æŸå¤±å‡½æ•°ï¼Œè¿˜å¯èƒ½æ˜¯æ··åˆæŸå¤±å‡½æ•°ï¼‰</li>
<li>3ã€ä¾æ® F å’Œ L æ„å»º<strong>è®¡ç®—å›¾ Graph</strong>ï¼ˆ æ¡†æ¶å†…éƒ¨å®Œæˆ
ï¼‰</li>
<li>4ã€åœ¨each updateä¸­ï¼Œå¹²å¦‚ä¸‹ä¸¤ä»¶äº‹æƒ…
<ul>
<li>å°†è¾“å…¥çš„æ•°æ®ï¼Œ<strong>æ ¹æ®è®¡ç®—å›¾</strong>è¿›è¡Œå‰å‘ä¼ æ’­è®¡ç®—ï¼Œå¾—åˆ°Losså€¼</li>
<li><strong>æ ¹æ®è®¡ç®—å›¾</strong>ï¼Œè¿›è¡Œåå‘ä¼ æ’­è®¡ç®—ï¼Œè·å¾— æŸå¤±å‡½æ•°L å¯¹
æ¨¡å‹å‚æ•° w çš„
æ¢¯åº¦å‘é‡ï¼ˆå…·ä½“é‡‡ç”¨çš„æŠ€æœ¯å°±æ˜¯<strong>è‡ªåŠ¨å¾®åˆ†</strong>ï¼‰</li>
</ul></li>
<li>5ã€å°† æ¢¯åº¦å‘é‡ä¿¡æ¯ä¸ æ¯ä¸ªæ¨¡å‹å‚æ•°w ä¿¡æ¯
ä¼ å…¥<strong>ä¼˜åŒ–å™¨</strong>ä¸­ï¼Œæ›´æ–°å‚æ•°ï¼Œç„¶åå›åˆ°æ­¥éª¤4ï¼Œå¾ªç¯å¾€å¤ã€‚ï¼ˆä¼˜åŒ–å™¨å¾€å¾€ä¹Ÿæ˜¯æ¡†æ¶åœ¨å†…éƒ¨æå‰å†™å¥½çš„ï¼Œå‡ ä¸ªæ¯”è¾ƒé€šç”¨çš„ä¼˜åŒ–å™¨ï¼šAdamï¼ŒAdagradç­‰ï¼‰</li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼šå®é™…ä¸Šï¼Œå¦‚æœå¯¹äºä¸€äº›ç®€å•çš„æ¨¡å‹å‡½æ•°ï¼Œæ¯”å¦‚ wx +
b ,
æˆ‘ä»¬æ˜¯å¯ä»¥ä¸å®šä¹‰è®¡ç®—å›¾çš„ï¼Œåªè¦æˆ‘ä»¬äººå·¥çš„å®ç°äº†è¯¥æ¨¡å‹çš„forwardå‡½æ•°ï¼Œä»¥åŠè¯¥æ¨¡å‹çš„backwardå‡½æ•°ï¼Œæ¡†æ¶åº”å½“å°±ä¼šåœ¨å‰å‘ä¼ æ’­å’Œåå‘ä¼ æ’­çš„è¿‡ç¨‹ä¸­ï¼Œè°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°æ¥è¿›è¡Œè®¡ç®—ã€‚</p>
<p>â€‹
é‚£ä¹ˆï¼Œè®¡ç®—å›¾å’Œè‡ªåŠ¨å¾®åˆ†çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨pytorchä¸­ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªæ¨¡å‹ä¸­åªéœ€è¦å®šä¹‰forwardå‡½æ•°å³å¯ï¼Œæ˜¯ä¸éœ€è¦å®šä¹‰backwardå‡½æ•°çš„ï¼Œé‚£ä¹ˆæ¨¡å‹åˆåº”å½“æ€ä¹ˆå»å®šä¹‰åå‘ä¼ æ’­çš„è¿‡ç¨‹å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™å°±æ˜¯è®¡ç®—å›¾å’Œè‡ªåŠ¨å¾®åˆ†èµ·ä½œç”¨äº†ã€‚å› ä¸ºç°åœ¨çš„æ¨¡å‹å‡½æ•°Féƒ½éå¸¸å¤æ‚ï¼Œäººå·¥æ±‚å¯¼æ˜¯ä¸ç°å®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦ä¾æ®å‰å‘ä¼ æ’­è¿‡ç¨‹å’ŒæŸå¤±å‡½æ•°ï¼Œæ„å»ºè®¡ç®—å›¾ï¼Œç„¶åä¾æ®è‡ªåŠ¨å¾®åˆ†æŠ€æœ¯ï¼Œç”¨åå‘ä¼ æ’­çš„å½¢å¼ï¼Œè®¡ç®—æŸå¤±å‡½æ•°L
å¯¹ æ¨¡å‹å‚æ•° wï¼Œæœ€ç»ˆå®ç°æ¢¯åº¦ä¸‹é™ä¼˜åŒ–ã€‚</p>
<h3
id="äºŒè®¡ç®—å›¾åå‘ä¼ æ’­è‡ªåŠ¨å¾®åˆ†è¯¦è§£">äºŒã€è®¡ç®—å›¾ã€åå‘ä¼ æ’­ã€è‡ªåŠ¨å¾®åˆ†è¯¦è§£ï¼š</h3>
<h4 id="æœ€åŸºæœ¬çš„è®¡ç®—å›¾">1ã€æœ€åŸºæœ¬çš„è®¡ç®—å›¾ï¼š</h4>
<p>â€‹ è®¡ç®—å›¾æ˜¯ç”¨æ¥æè¿°è¿ç®—çš„æœ‰å‘æ— ç¯å›¾ï¼Œæœ‰ä¸¤ä¸ªä¸»è¦å…ƒç´ ï¼šèŠ‚ç‚¹ (Node) å’Œè¾¹
(Edge)ã€‚èŠ‚ç‚¹è¡¨ç¤ºæ•°æ®ï¼Œå¦‚å‘é‡ã€çŸ©é˜µã€å¼ é‡ã€‚è¾¹è¡¨ç¤ºè¿ç®—ï¼Œå¦‚åŠ å‡ä¹˜é™¤å·ç§¯ç­‰ã€‚è®¡ç®—å›¾ä¸­èŠ‚ç‚¹æœ‰ä¸åŒçš„ç±»å‹ï¼Œä¸åŒç±»å‹çš„èŠ‚ç‚¹æ‰§è¡Œä¸åŒçš„è®¡ç®—ã€‚</p>
<p><img src="https://pic2.zhimg.com/80/v2-464ea7ee4475f3c7f08c389f65fd3e89_1440w.jpg" alt="img" style="zoom:50%;" /></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">w = torch.tensor([<span class="number">1.</span>], requires_grad=<span class="literal">True</span>)</span><br><span class="line">x = torch.tensor([<span class="number">2.</span>], requires_grad=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># y=(x+w)*(w+1)</span></span><br><span class="line">a = torch.add(w, x)     <span class="comment"># retain_grad()</span></span><br><span class="line">b = torch.add(w, <span class="number">1</span>)</span><br><span class="line">y = torch.mul(a, b)</span><br><span class="line"><span class="comment"># y æ±‚å¯¼</span></span><br><span class="line">y.backward()</span><br><span class="line"><span class="comment"># æ‰“å° w çš„æ¢¯åº¦ï¼Œå°±æ˜¯ y å¯¹ w çš„å¯¼æ•°</span></span><br><span class="line"><span class="built_in">print</span>(w.grad)</span><br></pre></td></tr></table></figure>
<p>â€‹ åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œx å’Œ w
æ˜¯å¶å­èŠ‚ç‚¹ï¼Œå…¶ä»–æ‰€æœ‰èŠ‚ç‚¹éƒ½ä¾èµ–äºå¶å­èŠ‚ç‚¹ã€‚å¶å­èŠ‚ç‚¹çš„æ¦‚å¿µä¸»è¦æ˜¯ä¸ºäº†èŠ‚çœå†…å­˜ï¼Œ<strong>åœ¨è®¡ç®—å›¾ä¸­çš„ä¸€è½®åå‘ä¼ æ’­ç»“æŸä¹‹åï¼Œéå¶å­èŠ‚ç‚¹çš„æ¢¯åº¦æ˜¯ä¼šè¢«é‡Šæ”¾çš„ã€‚</strong></p>
<p>ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å¶å­ç»“ç‚¹</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;is_leaf:\n&quot;</span>, w.is_leaf, x.is_leaf, a.is_leaf, b.is_leaf, y.is_leaf)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ¢¯åº¦</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;gradient:\n&quot;</span>, w.grad, x.grad, a.grad, b.grad, y.grad)</span><br></pre></td></tr></table></figure>
<p>ç»“æœä¸ºï¼š</p>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">is_leaf:</span><br><span class="line"> True True False False False</span><br><span class="line">gradient:</span><br><span class="line"> tensor([5.]) tensor([2.]) None None None</span><br></pre></td></tr></table></figure>
<h4 id="è®¡ç®—å›¾ä¸­çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µ">2ã€è®¡ç®—å›¾ä¸­çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µï¼š</h4>
<h5 id="å˜é‡èŠ‚ç‚¹">1ï¼‰å˜é‡èŠ‚ç‚¹ï¼š</h5>
<p>â€‹
è¿™äº›èŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œå®ƒä»¬çš„å€¼ä¸æ˜¯è®¡ç®—å‡ºæ¥çš„ï¼Œè€Œæ˜¯è¢«èµ‹äºˆçš„ã€‚å…·ä½“åˆ°æ¨¡å‹ä¸­ï¼Œä¸€èˆ¬ä¼šæ˜¯æ¨¡å‹çš„è¾“å…¥ã€å‚æ•°æˆ–è€…æ ‡ç­¾ã€‚</p>
<h5 id="å†…ç§¯èŠ‚ç‚¹">2ï¼‰å†…ç§¯èŠ‚ç‚¹ï¼š</h5>
<p>â€‹
ç”±äºèŠ‚ç‚¹çš„å€¼æ—¢å¯ä»¥æ˜¯ä¸€ä¸ªæ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‘é‡ã€‚å†…ç§¯èŠ‚ç‚¹å°±æ˜¯å°†ä¸¤ä¸ªçˆ¶èŠ‚ç‚¹è§†ä¸ºå‘é‡ï¼Œç„¶åè®¡ç®—ä¸¤ä¸ªçˆ¶èŠ‚ç‚¹çš„å†…ç§¯ã€‚</p>
<h5 id="å‰å‘ä¼ æ’­">3ï¼‰å‰å‘ä¼ æ’­ï¼š</h5>
<p>â€‹
è¾“å…¥ä¿¡æ¯è¢«èµ‹äºˆå˜é‡èŠ‚ç‚¹ï¼Œæ²¿ç€ç½‘ç»œå‘å‰æµåŠ¨ï¼Œæœ€ç»ˆæµåŠ¨åˆ°æ‰€è¦è®¡ç®—çš„ç»“æœèŠ‚ç‚¹ï¼Œè¿™å°±æ˜¯è®¡ç®—å›¾çš„å‰å‘ä¼ æ’­è¿‡ç¨‹ã€‚</p>
<h4 id="åŒºåˆ†é™æ€å›¾å’ŒåŠ¨æ€å›¾">3ã€åŒºåˆ†é™æ€å›¾å’ŒåŠ¨æ€å›¾ï¼š</h4>
<p>â€‹ PyTorch é‡‡ç”¨çš„æ˜¯åŠ¨æ€å›¾æœºåˆ¶ (Dynamic Computational Graph)ï¼Œè€Œ
Tensorflow é‡‡ç”¨çš„æ˜¯é™æ€å›¾æœºåˆ¶ (Static Computational Graph)ã€‚</p>
<ul>
<li><p><strong>åŠ¨æ€å›¾</strong>æ˜¯è¿ç®—å’Œæ­å»ºåŒæ—¶è¿›è¡Œï¼Œä¹Ÿå°±æ˜¯å¯ä»¥å…ˆè®¡ç®—å‰é¢çš„èŠ‚ç‚¹çš„å€¼ï¼Œå†æ ¹æ®è¿™äº›å€¼æ­å»ºåé¢çš„è®¡ç®—å›¾ã€‚ä¼˜ç‚¹æ˜¯çµæ´»ï¼Œæ˜“è°ƒèŠ‚ï¼Œæ˜“è°ƒè¯•</p></li>
<li><p><strong>é™æ€å›¾</strong>æ˜¯å…ˆæ­å»ºå›¾ï¼Œç„¶åå†è¾“å…¥æ•°æ®è¿›è¡Œè¿ç®—ã€‚ä¼˜ç‚¹æ˜¯é«˜æ•ˆï¼Œå› ä¸ºé™æ€è®¡ç®—æ˜¯é€šè¿‡å…ˆå®šä¹‰åè¿è¡Œçš„æ–¹å¼ï¼Œä¹‹åå†æ¬¡è¿è¡Œçš„æ—¶å€™å°±ä¸å†éœ€è¦é‡æ–°æ„å»ºè®¡ç®—å›¾ï¼Œæ‰€ä»¥é€Ÿåº¦ä¼šæ¯”åŠ¨æ€å›¾æ›´å¿«ã€‚ä½†æ˜¯ä¸çµæ´»ã€‚TensorFlow
æ¯æ¬¡è¿è¡Œçš„æ—¶å€™å›¾éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ˜¯ä¸èƒ½å¤Ÿæ”¹å˜çš„</p></li>
</ul>
<p>â€‹
æ‰€ä»¥ï¼Œå…¶å®åœ¨pytorchä¸­ï¼Œæ¯”å¦‚ä½ å®šä¹‰çš„ä¸€ä¸ªç»§æ‰¿è‡ªnn.Moduleçš„ç½‘ç»œç±»ä¸­ï¼Œä½ ä¼šé‡è½½è¿™ä¸ªç±»çš„forwardå‡½æ•°ï¼Œç„¶ååœ¨ç½‘ç»œè®­ç»ƒè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå…¶å°±ä¼šæ ¹æ®ä½ çš„forwardé‡Œé¢å¼ é‡çš„è®¡ç®—è¿‡ç¨‹æ¥æ­å»ºåŠ¨æ€çš„è®¡ç®—å›¾ï¼Œå¹¶ä¸”ä¾æ®æ­¤è®¡ç®—å›¾ï¼Œåœ¨åå‘ä¼ æ’­çš„æ—¶å€™ä½¿ç”¨è‡ªåŠ¨å¾®åˆ†è®¡ç®—æ¢¯åº¦ã€‚</p>
<h4 id="æ–¹å‘å¯¼æ•°å’Œæ¢¯åº¦">4ã€æ–¹å‘å¯¼æ•°å’Œæ¢¯åº¦</h4>
<h5 id="æ–¹å‘å¯¼æ•°">1ï¼‰æ–¹å‘å¯¼æ•°ï¼š</h5>
<p>â€‹
æ–¹å‘å¯¼æ•°çš„æœ¬è´¨æ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œç®€å•æ¥è¯´å…¶å®šä¹‰ä¸ºï¼š<strong>ä¸€ä¸ªå‡½æ•°æ²¿æŒ‡å®šæ–¹å‘çš„å˜åŒ–ç‡ã€‚</strong>å…¶æœ€æ ¸å¿ƒçš„ä¸¤ä¸ªè¦ç‚¹æ˜¯ï¼š</p>
<ul>
<li>å‡½æ•°</li>
<li>æŒ‡å®šæ–¹å‘</li>
</ul>
<p>â€‹
å½“æˆ‘ä»¬æ‹¥æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”ç¡®å®šå¥½ä¸€ä¸ªæ–¹å‘ä»¥åï¼Œå°±å¯ä»¥è®¡ç®—å¾—åˆ°è¯¥æ–¹å‘çš„æ–¹å‘å¯¼æ•°ï¼Œæ˜¯ä¸€ä¸ªæ•°å€¼ã€‚ä»ä¸‹å›¾ä¸­ä¸€ä¸ªæœ€ç®€å•çš„ä¸€ç»´å‡½æ•°æ¥çœ‹ï¼š</p>
<p><img src="C:\Users\14012\Desktop\å±å¹•æ•è·_2022_02_26_21_49_36_307.png" style="zoom:50%;" /></p>
<p>â€‹
æˆ‘ä»¬æŒ‡å®šEç‚¹ï¼Œç°åœ¨æŒ‡å®šECã€EBã€EAã€EDå››ä¸ªæ–¹å‘ï¼Œ<strong>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å„è‡ªæ–¹å‘çš„æ–¹å‘å¯¼æ•°ï¼ŒEDæ–¹å‘çš„æ–¹å‘å¯¼æ•°æœ€å°ï¼Œå› ä¸ºå®ƒæ˜¯åˆ‡çº¿æ–¹å‘ï¼Œä¸”æ˜¯æœä¸‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å‡½æ•°åœ¨è¯¥ç‚¹å¾€EDæ–¹å‘çš„å˜åŒ–ç‡è´Ÿæ–¹å‘æœ€å¤§ï¼Œä¹Ÿå°±æ˜¯å€¼æœ€å°ã€‚ä¹‹åä¾æ¬¡æ˜¯EAã€EBã€ECã€‚EDçš„åæ–¹å‘DEï¼Œå°±æ˜¯è¯¥ç‚¹å„ä¸ªæ–¹å‘å¯¼æ•°ä¸­ï¼Œæœ€å¤§çš„é‚£ä¸€ä¸ªã€‚</strong></p>
<h5 id="æ¢¯åº¦">2) æ¢¯åº¦ï¼š</h5>
<p>â€‹
æ¢¯åº¦ä¸æ–¹å‘å¯¼æ•°æ˜¯æœ‰æœ¬è´¨åŒºåˆ«çš„ï¼Œæ¢¯åº¦å…¶å®æ˜¯ä¸€ä¸ªå‘é‡ï¼Œå…¶å®šä¹‰ä¸ºï¼šä¸€ä¸ªå‡½æ•°å¯¹äºå…¶è‡ªå˜é‡åˆ†åˆ«æ±‚åå¯¼æ•°ï¼Œè¿™äº›åå¯¼æ•°æ‰€ç»„æˆçš„å‘é‡å°±æ˜¯å‡½æ•°çš„æ¢¯åº¦ã€‚</p>
<h5 id="æ¢¯åº¦ä¸æ–¹å‘å¯¼æ•°çš„å…³ç³»">3ï¼‰æ¢¯åº¦ä¸æ–¹å‘å¯¼æ•°çš„å…³ç³»ï¼š</h5>
<p>â€‹
<strong>å‡½æ•°åœ¨æŸç‚¹çš„æ¢¯åº¦æ˜¯è¿™æ ·ä¸€ä¸ªå‘é‡ï¼Œå®ƒçš„æ–¹å‘ä¸å–å¾—æœ€å¤§æ–¹å‘å¯¼æ•°çš„æ–¹å‘ä¸€è‡´ï¼Œè€Œå®ƒçš„æ¨¡ä¸ºæ–¹å‘å¯¼æ•°çš„æœ€å¤§å€¼ã€‚</strong>
è¿™ä¸ªå…¶å®æ˜¯æ¯”è¾ƒç›´è§‚èƒ½å¤Ÿå»ç†è§£çš„ä¸€ä¸ªç»´åº¦ï¼šå…·ä½“è¯æ˜æ­¤å¤„ä¸æ¶‰åŠã€‚</p>
<h4 id="æ¢¯åº¦ä¸‹é™">5ã€æ¢¯åº¦ä¸‹é™ï¼š</h4>
<p>â€‹ å¯¹äºä¸€ä¸ªå…·æœ‰å‚æ•° <strong>w </strong>=ï¼ˆw1,w2,w3ï¼‰å’Œ b
çš„è®¡ç®—å›¾ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰å‚æ•°çœ‹ä½œä¸€ä¸ªå¤§å‘é‡ï¼ˆ<strong>w</strong>,bï¼‰ï¼Œç„¶åä»¥ï¼ˆ<strong>w</strong>,bï¼‰ä¸ºè‡ªå˜é‡ï¼Œä»¥æŸå¤±å€¼ä¸ºå‡½æ•°å€¼ã€‚æ±‚æ¢¯åº¦å°±æ˜¯æ±‚æŸå¤±ä¹‹å¯¹æ¯ä¸ªå‚æ•°çš„åå¯¼æ•°ï¼Œä¸ºäº†æ±‚è¿™äº›åå¯¼æ•°ï¼Œæˆ‘ä»¬å¯ä»¥<strong>å•ç‹¬æŠŠæ¯ä¸ªå‚æ•°èŠ‚ç‚¹è§†ä¸ºè‡ªå˜é‡ï¼Œæ±‚æŸå¤±å€¼å¯¹è¯¥èŠ‚ç‚¹çš„æ¢¯åº¦</strong>ï¼ˆå…·ä½“æ€ä¹ˆæ±‚ï¼Œè§åå‘ä¼ æ’­å’Œè‡ªåŠ¨å¾®åˆ†æ–¹æ³•ï¼‰ã€‚</p>
<h4 id="ä»€ä¹ˆæ˜¯åå‘ä¼ æ’­å’Œè‡ªåŠ¨å¾®åˆ†">6ã€ä»€ä¹ˆæ˜¯åå‘ä¼ æ’­å’Œè‡ªåŠ¨å¾®åˆ†ï¼Ÿ</h4>
<h5 id="è®­ç»ƒæ—¶è‡ªåŠ¨å¾®åˆ†åœ¨å“ªé‡Œåº”ç”¨">1ï¼‰è®­ç»ƒæ—¶è‡ªåŠ¨å¾®åˆ†åœ¨å“ªé‡Œåº”ç”¨ï¼Ÿ</h5>
<p>â€‹
è‡ªåŠ¨å¾®åˆ†ç”¨äºåå‘ä¼ æ’­çš„è¿‡ç¨‹ä¸­ï¼Œä¾æ®è®¡ç®—å›¾è®¡ç®—<strong>æŸå¤±å‡½æ•°å¯¹å‚æ•°çš„æ¢¯åº¦</strong>ã€‚åœ¨Pytorchå¸¸è§çš„è®­ç»ƒæ­¥éª¤ä¸­ï¼Œåº”å½“å°±æ˜¯å°è£…åœ¨
.backward() å‡½æ•°ä¸­çš„ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">batch_loss = criterion(outputs, labels) <span class="comment"># é€šè¿‡æŸå¤±å‡½æ•°ï¼Œè®¡ç®—æœ¬æ¬¡æŸå¤±å€¼</span></span><br><span class="line">batch_loss.backward()  <span class="comment"># æŸå¤±åå‘ä¼ æ’­ï¼Œè®¡ç®—æ¢¯åº¦</span></span><br></pre></td></tr></table></figure>
<p>â€‹ ä¸¾ä¸€ä¸ªæ›´ç®€å•æ˜äº†çš„ä¾‹å­ï¼šè€ƒè™‘æœ€ç®€å•çš„ä¸€å±‚ç¥ç»ç½‘ç»œï¼Œè¾“å…¥ xï¼Œå‚æ•° w å’Œ
bï¼Œä»¥åŠä¸€äº›æŸå¤±å‡½æ•°ã€‚ å®ƒå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼åœ¨ PyTorch ä¸­å®šä¹‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">x = torch.ones(<span class="number">5</span>)  <span class="comment"># input tensor</span></span><br><span class="line">y = torch.zeros(<span class="number">3</span>)  <span class="comment"># expected output</span></span><br><span class="line">w = torch.randn(<span class="number">5</span>, <span class="number">3</span>, requires_grad=<span class="literal">True</span>)</span><br><span class="line">z = torch.matmul(x, w)+b</span><br><span class="line">loss = torch.nn.functional.binary_cross_entropy_with_logits(z, y)</span><br></pre></td></tr></table></figure>
<p>pytorchåœ¨ä¸Šè¿°è¿ç®—è¿›è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå°±ä¼šæ­å»ºå¥½å¦‚ä¸‹çš„è®¡ç®—å›¾ã€‚</p>
<figure>
<img src="https://pytorch.org/tutorials/_images/comp-graph.png"
alt="avatar" />
<figcaption aria-hidden="true">avatar</figcaption>
</figure>
<p>â€‹ ç„¶åï¼Œè°ƒç”¨å¦‚ä¸‹å‡½æ•°,å³å¯è®¡ç®—æ¢¯åº¦ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">loss.backward() // è®¡ç®—æ¢¯åº¦</span><br><span class="line"><span class="built_in">print</span>(w.grad)</span><br><span class="line"><span class="built_in">print</span>(b.grad)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">tensor([[0.2175, 0.0032, 0.1359],</span></span><br><span class="line"><span class="string">        [0.2175, 0.0032, 0.1359],</span></span><br><span class="line"><span class="string">        [0.2175, 0.0032, 0.1359],</span></span><br><span class="line"><span class="string">        [0.2175, 0.0032, 0.1359],</span></span><br><span class="line"><span class="string">        [0.2175, 0.0032, 0.1359]])</span></span><br><span class="line"><span class="string">tensor([0.2175, 0.0032, 0.1359])</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<p>â€‹ Pytorch
è¿™è¾¹å…¶å®å®é™…ä¸Šéšè—äº†éå¸¸å¤šçš„å†…éƒ¨ç»†èŠ‚ï¼Œä»å¤–è¡¨å‡½æ•°è°ƒç”¨æ¥çœ‹ï¼Œæ ¹æœ¬çœ‹ä¸åˆ°è®¡ç®—å›¾ã€è‡ªåŠ¨å¾®åˆ†çš„é€»è¾‘ï¼Œè¿™æ˜¯å› ä¸ºPytorchéƒ½å·²ç»å°†å…¶å°è£…åœ¨äº†åº•å±‚ä¸­ã€‚å®é™…ä¸Šï¼ŒPytorchçš„è®¡ç®—å›¾æ˜¯ä»€ä¹ˆæ—¶å€™æ­å»ºçš„å‘¢ï¼Ÿå…¶å°±æ˜¯åœ¨æ¯ä¸€ä¸ªTensorå¼ é‡å‚ä¸è®¡ç®—çš„æ—¶å€™è¿›è¡Œæ­å»ºçš„ï¼š</p>
<p>ä¾‹å¦‚ï¼Œæ‰§è¡Œå¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">z = torch.matmul(x, w)+b</span><br></pre></td></tr></table></figure>
<p>è®¡ç®—å›¾ä¸­ï¼Œå…³äºxã€wã€bã€zèŠ‚ç‚¹ä¹‹é—´çš„DAGå°±å·²ç»æ­å»ºå¥½äº†</p>
<p>å†å½“æ‰§è¡Œå¦‚ä¸‹ä»£ç çš„æ—¶å€™ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">loss = torch.nn.functional.binary_cross_entropy_with_logits(z, y)</span><br></pre></td></tr></table></figure>
<p>â€‹ Pytorchåˆå°†losså’Œzã€yçš„èŠ‚ç‚¹å…³ç³»åŠ å…¥è®¡ç®—å›¾ä¸­äº†ã€‚</p>
<p>â€‹ åŒæ—¶ï¼Œæˆªè‡³æ­¤æ—¶ï¼Œx,y,w,z,loss
çš„å€¼éƒ½å·²ç»è®¡ç®—å‡ºæ¥äº†ï¼Œä¹Ÿå°±æ˜¯è¯´å·²ç»å®Œæˆäº†ä¸€éå‰å‘ä¼ æ’­ï¼Œè¿™æ—¶å€™è¿™äº›å€¼éƒ½è¢«è®°å½•åœ¨è¿™ä¸€ä¸ªä¸ªTensorä¸­ã€‚ï¼ˆä¸‹å›¾æ˜¯torch.Tensorå†…éƒ¨çš„æˆå‘˜å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå…¶å†…éƒ¨æ˜¯è®°å½•äº†éå¸¸å¤šä¸œè¥¿çš„ï¼Œå‰å‘ä¼ æ’­çš„å€¼å°±æ˜¯è®°å½•åœ¨Tensor.dataä¸­ï¼Œä¹Ÿå°±æ˜¯å…¶è¡¨ç°å‡ºæ¥çš„å€¼ï¼‰</p>
<p><img
src="https://pic2.zhimg.com/80/v2-3bc1ff0ab920582a3491111b81a32fe5_1440w.jpg" /></p>
<p>ç„¶åå½“æˆ‘ä»¬åœ¨å¤–å±‚è°ƒç”¨å¦‚ä¸‹å‡½æ•°çš„æ—¶å€™:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">loss.backward()</span><br></pre></td></tr></table></figure>
<p>â€‹ Pytorch
å†…éƒ¨å®é™…ä¸Šå°±æ˜¯å¼€å§‹åå‘ä¼ æ’­ï¼Œåˆ©ç”¨è‡ªåŠ¨å¾®åˆ†å¼•æ“ï¼Œé“¾å¼æ³•åˆ™è®¡ç®—losså¯¹å‚æ•°wçš„æ¢¯åº¦å€¼ã€‚å¯¹äºæˆ‘ä»¬äººè€Œè¨€ï¼Œæ˜¯å¦‚ä¸‹çš„ä¸€ä¸ªè¿‡ç¨‹ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/dsa98uyc89dsahkj.jpg" style="zoom:33%;" /></p>
<p>â€‹
é‚£ä¹ˆï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦æ€è€ƒäº†ï¼Œå¯¹äºç”µè„‘æ¥è¯´æˆ‘ä»¬æ ¹æœ¬æ²¡æœ‰å‘Šè¯‰å®ƒï¼Œlosså¯¹å‚æ•°wçš„å¯¼æ•°æ€ä¹ˆæ±‚å•Šï¼Ÿå³ä½¿æ˜¯æŒ‰ç…§ä¸Šè¿°é é“¾å¼æ³•åˆ™å»æ±‚ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿæ²¡å‘Šè¯‰å®ƒé“¾å¼æ³•åˆ™ä¸­çš„æ¯ä¸€é¡¹çš„å¯¼æ•°æ˜¯ä»€ä¹ˆï¼ˆæ¯”å¦‚è¯´losså¯¹zçš„å¯¼æ•°ï¼Œzå¯¹wçš„å¯¼æ•°ï¼‰ï¼Œé‚£æ€ä¹ˆæ±‚å‘¢ï¼Ÿå…¶å®ï¼Œè¿™ä¸ªæ—¶å€™Pytorchå†…éƒ¨å°±æ˜¯åˆ©ç”¨å…¶å¸¦çš„è‡ªåŠ¨å¾®åˆ†å¼•æ“ï¼Œå»è§£æå‡½æ•°ï¼Œç„¶åè¿›è¡Œè®¡ç®—çš„ã€‚ä»å¤–å±‚çœ‹æ¥ï¼Œæˆ‘ä»¬åªçŸ¥é“åªè¦è®¾å®šä¸€äº›å‚æ•°ï¼Œè°ƒç”¨backward()å‡½æ•°ï¼Œå°±èƒ½å¤Ÿè·å¾—losså¯¹æŸä¸ªå‚æ•°wçš„æ¢¯åº¦ï¼Œå¤–å±‚å®Œå…¨ä¸ç”¨å…³å¿ƒå†…éƒ¨çš„äº‹æƒ…ã€‚æˆ‘ä»¬å†è¯¦ç»†çš„å…ˆæ‹“å±•ä¸€ä¸‹åå‘ä¼ æ’­çš„å…·ä½“æ•°å­¦åŸç†ï¼Œéšåä¼šè®°å½•è‡ªåŠ¨å¾®åˆ†ã€‚</p>
<h5 id="åå‘ä¼ æ’­çš„æ•°å­¦åŸç†æ‰©å±•">2ï¼‰åå‘ä¼ æ’­çš„æ•°å­¦åŸç†æ‰©å±•ï¼š</h5>
<p>â€‹
åå‘ä¼ æ’­å†™æˆä¸Šé¢çš„é“¾å¼ä¼ æ’­å¯¼æ•°çš„å½¢å¼ååˆ†å¥½ç†è§£ï¼Œä½†æ˜¯ä¸ä»…ä»…æ˜¯ä¸Šè¿°è¿™æ ·å­ã€‚æˆ‘ä»¬åº”è¯¥éœ€è¦çŸ¥é“ï¼Œä¸Šé¢æˆ‘ä»¬éƒ½é»˜è®¤æ‰€æœ‰çš„å­—æ¯éƒ½åªæ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå°±æ¯”å¦‚è¯´
w æ˜¯ä¸€ä¸ªå€¼ï¼Œ x
ä¹Ÿä»…æ˜¯ä¸€ä¸ªå€¼ï¼Œè¿™äº›èŠ‚ç‚¹ï¼Œæˆ‘ä»¬é€šå¸¸ç§°ä¹‹ä¸ºå˜é‡èŠ‚ç‚¹ï¼Œå®ƒä»¬æ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œå®ƒä»¬çš„å€¼ä¸æ˜¯è¢«è®¡ç®—å‡ºæ¥çš„ï¼Œè€Œæ˜¯è¢«èµ‹äºˆçš„ã€‚ä½†å…¶å®ï¼ŒèŠ‚ç‚¹çš„å€¼å¯ä»¥æ˜¯ä¸€ä¸ªæ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‘é‡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªèŠ‚ç‚¹ä¿å­˜è¾“å…¥å‘é‡(x1,x2,x3)ï¼Œå†ç”¨ä¸€ä¸ªèŠ‚ç‚¹ä¿å­˜æƒå€¼å‘é‡(w1,w2,w3)ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_02_10_15_03_30_21.png" /></p>
<p>é‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå…¶å®<strong>è®¡ç®—å›¾ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å¤šä¸ªå€¼åˆ°å¤šä¸ªå€¼çš„æ˜ å°„ï¼Œä¹Ÿå°±æ˜¯å‘é‡
åˆ°å‘é‡çš„æ˜ å°„ï¼Œè‡ªå˜é‡æ˜¯çˆ¶èŠ‚ç‚¹ï¼Œå› å˜é‡æ˜¯å­èŠ‚ç‚¹ã€‚</strong>è™½ç„¶ä¸€ä¸ªå­èŠ‚ç‚¹å¯èƒ½æ‹¥æœ‰å¤šä¸ªçˆ¶èŠ‚ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨è®¡ç®—å­èŠ‚ç‚¹å¯¹æŸä¸€ä¸ªçˆ¶èŠ‚ç‚¹çš„æ¢¯åº¦çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå…¶ä»–çš„çˆ¶èŠ‚ç‚¹è§†ä¸ºå¸¸é‡ã€‚</p>
<p>â€‹ ä¸¾ä¾‹å¦‚ä¸‹ï¼šæ¯”å¦‚æˆ‘ä»¬ä»<strong>nç»´å‘é‡( w
)ï¼Œè®¡ç®—å‡ºmç»´å‘é‡çš„æ˜ å°„å°±å¯ä»¥è§†ä¸ºmä¸ªæ ‡é‡å‡½æ•°</strong>ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/3FFA54BF58ADB73E2AB2959E12132F27.jpg" alt="img" style="zoom:33%;" /></p>
<p>â€‹ æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œæ¯ä¸€ä¸ª<span class="math inline">\(f_i(w)\)</span>å¯¹
<span class="math inline">\(w\)</span>æ¥è¯´ï¼Œåº”è¯¥éƒ½æœ‰ä¸€ä¸ªæ¢¯åº¦ <span
class="math inline">\(\nabla f_i(w)\)</span>
,è€Œæ¯ä¸€ä¸ªæ¢¯åº¦éƒ½æ˜¯ä¸€ä¸ªnç»´å‘é‡ï¼ˆå› ä¸ºè‡ªå˜é‡æ˜¯nç»´å‘é‡ï¼‰ã€‚</p>
<p>â€‹ ä»¥mä¸ªæ¢¯åº¦ä½œä¸ºè¡Œï¼Œæ¯ä¸ªæ¢¯åº¦éƒ½æ˜¯ä¸€ä¸ªnç»´å‘é‡ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/C3DB7AD3158C70B1352C05AB2B03B655.jpg" style="zoom:33%;" /></p>
<p>â€‹ è¿™ä¸ª<span class="math inline">\(J_f(w)\)</span> å«åšæ˜ å°„ <span
class="math inline">\(f(w)\)</span>åœ¨ w å¤„çš„é›…å¯æ¯”çŸ©é˜µã€‚å› ä¸º<span
class="math inline">\(f(w)\)</span>æ˜¯ä»nç»´åˆ°mç»´çš„æ˜ å°„ï¼Œæ‰€ä»¥<strong>é›…å¯æ¯”çŸ©é˜µæ˜¯ä¸€ä¸ª$
m n<span
class="math inline">\(çš„çŸ©é˜µï¼Œå®ƒçš„æ¯ä¸€è¡Œåˆ†åˆ«æ˜¯\)</span>f(w)<span
class="math inline">\(çš„æ¯ä¸€ä¸ªåˆ†é‡\)</span>f_{i}(w)<span
class="math inline">\(åœ¨\)</span>w$å¤„çš„æ¢¯åº¦å‘é‡çš„è½¬ç½®ã€‚</strong></p>
<p>â€‹
æ•…è€Œï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œ<strong>å¯¹äºè®¡ç®—å›¾ä¸­çš„æ¯ä¸€å¯¹çˆ¶å­èŠ‚ç‚¹ï¼Œéƒ½å¯ä»¥è®¡ç®—å‡ºå­èŠ‚ç‚¹å¯¹çˆ¶èŠ‚ç‚¹çš„æ˜ å°„çš„é›…å¯æ¯”çŸ©é˜µã€‚
é›…å…‹æ¯”çŸ©é˜µå…¶å®ä¹Ÿå°±æ˜¯æ˜ å°„çš„æ¯ä¸ªåˆ†é‡å¯¹è¾“å…¥å‘é‡çš„æ¯ä¸ªåˆ†é‡çš„åå¯¼æ•°ã€‚</strong></p>
<p>â€‹ åœ¨ä¸Šè¿°å›¾2-1ä¸­çš„å†…ç§¯èŠ‚ç‚¹x = (x1,x2,x3) ï¼Œ w =
(w1,w2,w3)ï¼Œå®ƒä»¬çš„å­èŠ‚ç‚¹ å¯¹ ä»–ä»¬çš„æ˜ å°„ï¼Œå°±æ˜¯ä¸€ä¸ª
nç»´(n=3)åˆ°1ç»´çš„æ˜ å°„ï¼Œæ•…è€Œï¼Œå­èŠ‚ç‚¹åˆ°çˆ¶èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µåº”å½“æ˜¯ $ 1
n$çŸ©é˜µã€‚</p>
<p>â€‹
<strong>è‡³æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»èƒ½å¤ŸçŸ¥æ™“è®¡ç®—å›¾ä¸­æ¯ä¸€å¯¹çˆ¶å­èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µæ€ä¹ˆæ±‚è§£äº†ï¼Œå¯æ˜¯ï¼Œæˆ‘ä»¬æœ€ç»ˆè¦æ±‚çš„æ˜¯æŸå¤±å‡½æ•°å¯¹å‚æ•°wçš„é›…å¯æ¯”çŸ©é˜µ</strong>ã€‚ä»ç„¶å¦‚2-1æ‰€ç¤ºï¼ŒwèŠ‚ç‚¹æ˜¯hèŠ‚ç‚¹çš„ç¥–å…ˆï¼Œå®ƒå¿…é¡»è¦ç»è¿‡
å†…ç§¯èŠ‚ç‚¹ã€+èŠ‚ç‚¹ã€*èŠ‚ç‚¹åï¼Œæ‰ä¼šæœ€ç»ˆåˆ°è¾¾hèŠ‚ç‚¹ã€‚
è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨é“¾å¼æ³•åˆ™ï¼š
å¤åˆæ˜ å°„çš„é›…å¯æ¯”çŸ©é˜µå¼ç»„æˆå¤åˆæ˜ å°„çš„å¤šä¸ªæ˜ å°„çš„é›…å¯æ¯”çŸ©é˜µçš„ä¹˜ç§¯ã€‚</p>
<p>â€‹ å³å¤åˆæ˜ å°„<span class="math inline">\(f(g(h(w))\)</span>
åœ¨wå¤„çš„é›…å¯æ¯”çŸ©é˜µæ˜¯ <span class="math inline">\(J_f\)</span> ã€<span
class="math inline">\(J_g\)</span> ã€<span
class="math inline">\(J_h\)</span>ä¸‰ä¸ªé›…å¯æ¯”çŸ©é˜µçš„ä¹˜ç§¯ã€‚</p>
<p>â€‹
ï¼ˆæˆ‘ä»¬å…ˆå‡è®¾ä¸€ä¸ªçˆ¶èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼‰<strong>é‚£ä¹ˆæ‰€è°“åå‘ä¼ æ’­ï¼šå°±æ˜¯ä»è®¡ç®—å›¾ä¸­ä½œä¸ºç»“æœçš„èŠ‚ç‚¹å¼€å§‹ï¼Œä¾æ¬¡ä»åå‘å‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å°†
â€œç»“æœå¯¹è‡ªå·±çš„é›…å¯æ¯”çŸ©é˜µâ€ å’Œ â€œè‡ªå·±å¯¹çˆ¶èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µâ€
ä¼ ç»™è‡ªå·±çš„çˆ¶èŠ‚ç‚¹ï¼Œç„¶åè¿™ä¸ªçˆ¶èŠ‚ç‚¹å†å°† â€œç»“æœèŠ‚ç‚¹å¯¹è‡ªå·±çš„é›…å¯æ¯”çŸ©é˜µâ€ å’Œ
â€œè‡ªå·±å¯¹çˆ¶èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µâ€
ä¼ ç»™çˆ¶èŠ‚ç‚¹ï¼Œå†å‰é¢çš„çˆ¶èŠ‚ç‚¹ä¼šå°†ä¸¤çŸ©é˜µç›¸ä¹˜ï¼Œå¾—åˆ° â€œç»“æœå¯¹è‡ªå·±çš„é›…å¯æ¯”çŸ©é˜µâ€
ï¼Œä¸€ç›´è¿™æ ·å­åˆ°æˆ‘ä»¬çš„ å˜é‡èŠ‚ç‚¹</strong>ã€‚</p>
<p>â€‹
æ‰€ä»¥â€œåå‘ä¼ æ’­â€ä¼ æ’­çš„æ˜¯ç»“æœèŠ‚ç‚¹å¯¹è‡ªå·±çš„é›…å¯æ¯”çŸ©é˜µï¼ŒåŒæ—¶ä¹Ÿå°†è‡ªå·±å¯¹çˆ¶èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µä¼ ç»™çˆ¶èŠ‚ç‚¹ã€‚çˆ¶èŠ‚ç‚¹å°†è¿™ä¸¤ä¸ªçŸ©é˜µç›¸ä¹˜ï¼Œå°±å¾—åˆ°æœ€ç»ˆç»“æœå¯¹è‡ªå·±çš„é›…å¯æ¯”çŸ©é˜µã€‚</p>
<p>â€‹
æ¥ä¸‹æ¥å°±å‰©æœ€åä¸€ä¸ªé—®é¢˜äº†ï¼Œ<strong>å¦‚æœä¸€ä¸ªçˆ¶èŠ‚ç‚¹æœ‰å¤šä¸ªå­èŠ‚ç‚¹ï¼Œå®ƒåº”è¯¥å¦‚ä½•å¾—åˆ°ç»“æœå¯¹è‡ªå·±çš„é›…å¯æ¯”çŸ©é˜µå‘¢ï¼Ÿ</strong>åœ¨æ•°å­¦ä¸Šèƒ½å¤Ÿè¯æ˜ï¼Œå…¶å®å°±æ˜¯å…ˆæŒ‰ç…§ä¸Šè¿°æ–¹æ³•ï¼Œå°†<strong>ç»“æœèŠ‚ç‚¹
å¯¹ å„ä¸ªå­ç»“ç‚¹çš„é›…å¯æ¯”çŸ©é˜µ å’Œ
å„ä¸ªå­èŠ‚ç‚¹å¯¹çˆ¶èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µåˆ†åˆ«ç›¸ä¹˜ï¼Œç„¶åå†ç›¸åŠ å³å¯ å¾—åˆ°
ç»“æœèŠ‚ç‚¹å¯¹çˆ¶èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µ</strong>ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><span class="math display">\[
J_f = \Sigma_s J_{rs}J_{sf}
\]</span> â€‹ <span
class="math inline">\(J_f\)</span>æ˜¯æœ€ç»ˆç»“æœèŠ‚ç‚¹å¯¹çˆ¶èŠ‚ç‚¹f
çš„é›…å¯æ¯”çŸ©é˜µã€‚</p>
<p>â€‹ <span
class="math inline">\(J_{rs}\)</span>æ˜¯æœ€ç»ˆç»“æœèŠ‚ç‚¹å¯¹æŸä¸ªå­èŠ‚ç‚¹sçš„é›…å¯æ¯”çŸ©é˜µã€‚</p>
<p>â€‹ <span
class="math inline">\(J_{sf}\)</span>æ˜¯æŸä¸ªå­èŠ‚ç‚¹å¯¹çˆ¶èŠ‚ç‚¹fçš„é›…å¯æ¯”çŸ©é˜µã€‚</p>
<p>ã€é™„ï¼š<strong>æœ€å¼€å§‹çš„æ—¶å€™ï¼Œç»“æœèŠ‚ç‚¹å¯¹è‡ªå·±çš„é›…å¯æ¯”çŸ©é˜µæ˜¯å•¥ï¼Ÿ
å›ç­”ï¼šæ˜¯ä¸€ä¸ªå•ä½çŸ©é˜µï¼Œå³å¯¹è§’çº¿å…ƒç´ ä¸º1ï¼Œå…¶ä½™å…ƒç´ éƒ½ä¸º0</strong>ã€‘</p>
<p>â€‹ å…·ä½“çš„ä»£ç å®ç°ï¼Œè§ä¸‹ä¸€èŠ‚ä¸­çš„Nodeç±»çš„backwardæ–¹æ³•çš„å®ç°ã€‚</p>
<h5 id="è‡ªåŠ¨å¾®åˆ†çš„å·¥ä½œåŸç†è§£æ">3ï¼‰è‡ªåŠ¨å¾®åˆ†çš„å·¥ä½œåŸç†è§£æï¼š</h5>
<p>â€‹
åœ¨ä¸Šè¿°æè¿°çš„åå‘ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ ¸å¿ƒçš„åœ°æ–¹è¿˜æ²¡æœ‰ç»†è¯´ï¼Œé‚£å°±æ˜¯å¦‚ä½•è®©è®¡ç®—æœºè®¡ç®—
ä¸€å¯¹å­èŠ‚ç‚¹å’Œçˆ¶èŠ‚ç‚¹
å®ƒä»¬ä¹‹é—´çš„é›…å¯æ¯”çŸ©é˜µï¼Œä¹Ÿå°±æ˜¯å®ƒä»¬ä¹‹é—´çš„å¯¼æ•°å…³ç³»ï¼Œå¦‚ä½•è®¡ç®—ï¼Ÿã€æ­¤å¤„ç•™æœ‰é™·é˜±ï¼Œè¯·ç»§ç»­å¾€ä¸‹çœ‹ã€‘</p>
<p>â€‹ è®©è®¡ç®—æœºå®ç°å¾®åˆ†åŠŸèƒ½æœ‰ä»¥ä¸‹å‡ ç§å¾®åˆ†æ–¹å¼ï¼Œ</p>
<ul>
<li>æ‰‹å·¥è®¡ç®—å‡ºå¾®åˆ†ï¼Œç„¶åç¼–ç è¿›ä»£ç ä¸­</li>
<li>æ•°å€¼å¾®åˆ† (numerical differentiation)</li>
<li>ç¬¦å·å¾®åˆ† (symbolic differentiation)</li>
<li>è‡ªåŠ¨å¾®åˆ†</li>
</ul>
<figure>
<img
src="https://pic4.zhimg.com/80/v2-4c305dc170d7a165aec1b5d7017828c7_1440w.jpg"
alt="å››ç§å¾®åˆ†æ–¹å¼çš„å¯¹æ¯”ã€‚ æ‰‹å·¥å¾®åˆ†ã€ç¬¦å·å¾®åˆ†ã€ è‡ªåŠ¨å¾®åˆ†å¾—å‡ºçš„éƒ½æ˜¯ç²¾ç¡®è§£ï¼Œ è€Œæ•°å€¼å¾®åˆ†å¾—å‡ºçš„åªæ˜¯è¿‘ä¼¼è§£ã€‚" />
<figcaption aria-hidden="true">å››ç§å¾®åˆ†æ–¹å¼çš„å¯¹æ¯”ã€‚ æ‰‹å·¥å¾®åˆ†ã€ç¬¦å·å¾®åˆ†ã€
è‡ªåŠ¨å¾®åˆ†å¾—å‡ºçš„éƒ½æ˜¯ç²¾ç¡®è§£ï¼Œ è€Œæ•°å€¼å¾®åˆ†å¾—å‡ºçš„åªæ˜¯è¿‘ä¼¼è§£ã€‚</figcaption>
</figure>
<p>æˆ‘ä»¬ç®€å•çš„å…ˆä»‹ç»ä»¥ä¸‹å‰ä¸‰ç§æ–¹å¼ï¼Œç„¶åå†ç€é‡ä»‹ç»è‡ªåŠ¨å¾®åˆ†ï¼š</p>
<ul>
<li><p><strong>æ‰‹å·¥ç¼–ç </strong>ï¼šæ•…åæ€æ„ï¼Œè‡ªå·±è®¡ç®—å‡½æ•°çš„å¯¼æ•°ç„¶åç¼–ç å…¥è®¡ç®—æœºä»£ç ä¸­ã€‚</p></li>
<li><p><strong>æ•°å€¼å·®åˆ†</strong>ï¼Œå…¶åˆ†ä¸ºä¸¤ç§æ–¹å¼â€”å‰å‘å·®åˆ†ã€ä¸­å¿ƒå·®åˆ†</p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_02_10_17_31_03_38.png" /></p>
<p>â€‹ ä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨ä¸­å¿ƒå·®åˆ†æ¥å¯¹ç¥ç»ç½‘ç»œçš„åå‘ä¼ æ’­è¿›è¡Œ
<strong>æ¢¯åº¦æ£€éªŒ</strong>ï¼Œ å‰å‘å·®åˆ†å¾ˆå°‘ä½¿ç”¨ï¼Œ å› ä¸ºå‰å‘å·®åˆ†çš„è¯¯å·®æ˜¯
<span class="math inline">\(O(h)\)</span> , è€Œä¸­å¿ƒå·®åˆ†çš„è¯¯å·®æ˜¯ <span
class="math inline">\(O(h^2)\)</span> , ä½¿ç”¨æ³°å‹’å…¬å¼å°†ä¸Šé¢çš„ <span
class="math inline">\(f(x+h)\)</span> å’Œ<span
class="math inline">\(f(x-h)\)</span>å±•å¼€ï¼Œå°±èƒ½å¾—å‡ºå‰å‘å·®åˆ†å’Œä¸­å¿ƒå·®åˆ†çš„è¯¯å·®</p>
<ul>
<li><p><strong>ç¬¦å·å¾®åˆ†ï¼š</strong></p>
<p>â€‹
ç±»ä¼¼äºæˆ‘ä»¬äººçš„æ‰‹å·¥è®¡ç®—ï¼Œå®ƒæ˜¯è®¡ç®—æœºæ ¹æ®è§„åˆ™è¿›è¡Œå¾®åˆ†çš„æ–¹å¼ã€‚ç¬¦å·å¾®åˆ†çš„æ˜æ˜¾çš„ç¼ºé™·æ˜¯å®¹æ˜“äº§ç”Ÿ
<strong>è¡¨è¾¾å¼è†¨èƒ€</strong> (expression swell)ã€‚</p>
<figure>
<img
src="https://pic3.zhimg.com/80/v2-fb2923b77c6a8cbed2716e58e44f191e_1440w.jpg"
alt="ç¬¦å·å¾®åˆ†çš„å¾®åˆ†ç»“æœä¸ä¸€å®šæ˜¯æœ€ç®€çš„å½¢å¼" />
<figcaption
aria-hidden="true">ç¬¦å·å¾®åˆ†çš„å¾®åˆ†ç»“æœä¸ä¸€å®šæ˜¯æœ€ç®€çš„å½¢å¼</figcaption>
</figure></li>
<li><p><strong>è‡ªåŠ¨å¾®åˆ†ï¼š</strong></p>
<p>â€‹
è‡ªåŠ¨å¾®åˆ†å°†ç¬¦å·å¾®åˆ†æ³•åº”ç”¨äºæœ€åŸºæœ¬çš„ç®—å­ï¼Œæ¯”å¦‚å¸¸æ•°ï¼Œå¹‚å‡½æ•°ï¼ŒæŒ‡æ•°å‡½æ•°ï¼Œå¯¹æ•°å‡½æ•°ï¼Œä¸‰è§’å‡½æ•°ç­‰ï¼Œç„¶åä»£å…¥æ•°å€¼ï¼Œä¿ç•™ä¸­é—´ç»“æœï¼Œæœ€åå†åº”ç”¨äºæ•´ä¸ªå‡½æ•°ã€‚å› æ­¤å®ƒåº”ç”¨ç›¸å½“çµæ´»ï¼Œå¯ä»¥åšåˆ°å®Œå…¨å‘ç”¨æˆ·éšè—å¾®åˆ†æ±‚è§£è¿‡ç¨‹ï¼Œç”±äºå®ƒåªå¯¹åŸºæœ¬å‡½æ•°æˆ–å¸¸æ•°è¿ç”¨ç¬¦å·å¾®åˆ†æ³•åˆ™ã€‚</p>
<p>â€‹
è‡ªåŠ¨å¾®åˆ†æœ‰å‰å‘æ¨¡å¼å’Œåå‘æ¨¡å¼ä¸¤ç§ï¼Œ<strong>å½“è¾“å‡ºçš„ç»´åº¦å¤§äºè¾“å…¥çš„æ—¶å€™ï¼Œé€‚å®œä½¿ç”¨å‰å‘æ¨¡å¼å¾®åˆ†ï¼›å½“è¾“å‡ºç»´åº¦è¿œè¿œå°äºè¾“å…¥çš„æ—¶å€™ï¼Œé€‚å®œä½¿ç”¨åå‘æ¨¡å¼å¾®åˆ†ã€‚</strong>ä¸€èˆ¬åœ¨ç¥ç»ç½‘ç»œä¸­ä½¿ç”¨çš„éƒ½æ˜¯åå‘æ¨¡å¼ã€‚å› ä¸ºç¥ç»ç½‘è·¯çš„è¾“å…¥é€šå¸¸
&gt;&gt; è¾“å‡ºï¼Œ</p>
<p>â€‹
ç»†èŠ‚ä¸Šæ¥è¯´ï¼Œè‡ªåŠ¨å¾®åˆ†æ˜¯å°†å¤åˆå‡½æ•°åˆ†è§£ä¸ºè¾“å‡ºé‡ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰å’Œä¸€ç³»åˆ—çš„è¾“å…¥é‡ï¼ˆå¶å­èŠ‚ç‚¹ï¼‰åŠåŸºæœ¬å‡½æ•°ï¼ˆä¸­é—´èŠ‚ç‚¹ï¼‰ï¼Œæ„æˆä¸€ä¸ªè®¡ç®—å›¾ï¼ˆComputational
Graphï¼‰ï¼Œå¹¶ä»¥æ­¤è®¡ç®—ä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹é—´çš„æ¢¯åº¦ï¼š</p>
<ul>
<li>åŠ æ³•æ³•åˆ™ï¼šä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹é—´çš„æ¢¯åº¦ä¸ºå®ƒä»¬ä¸¤èŠ‚ç‚¹ä¹‹é—´æ‰€æœ‰è·¯å¾„çš„åå¾®åˆ†ä¹‹å’Œï¼›</li>
<li>é“¾å¼æ³•åˆ™ï¼šä¸€æ¡è·¯å¾„çš„åå¾®åˆ†ä¸ºè·¯å¾„ä¸Šå„ç›¸é‚»èŠ‚ç‚¹é—´åå¾®åˆ†çš„è¿ä¹˜ã€‚</li>
</ul></li>
</ul>
<p>â€‹
<strong>çœ‹åˆ°è¿™é‡Œï¼Œä¼šè§‰å¾—å¾ˆç†Ÿæ‚‰ï¼Œè¯¶ç­‰ç­‰ï¼è¿™ä¸å°±æ˜¯åå‘ä¼ æ’­å¹²çš„äº‹æƒ…å—ï¼Œä¸€æ‘¸ä¸€æ ·ï¼</strong>ç„¶åæˆ‘å°±å‘ç°è‡ªå·±ä¸€å¼€å§‹ç†è§£é”™æ¦‚å¿µäº†ï¼Œæˆ‘ä¸€å¼€å§‹ä»¥ä¸ºåå‘ä¼ æ’­è¿‡ç¨‹ä¸­è®¡ç®—ä¸€å¯¹çˆ¶èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µ
è¿™è¾¹çš„è¿‡ç¨‹ç”¨çš„æ˜¯è‡ªåŠ¨å¾®åˆ†ï¼Œå…¶ä»–éƒ½æ˜¯åå‘ä¼ æ’­çš„è¿‡ç¨‹ï¼Œå…¶å®ä»æŸç§æ„ä¹‰ä¸Šæ¥è¯´ï¼Œåå‘ä¼ æ’­å°±æ˜¯åœ¨è®¡ç®—è‡ªåŠ¨å¾®åˆ†çš„è¿‡ç¨‹ï¼Œè€Œè®¡ç®—ä¸€å¯¹å­èŠ‚ç‚¹å’Œçˆ¶èŠ‚ç‚¹å®ƒä»¬ä¹‹é—´çš„é›…å¯æ¯”çŸ©é˜µï¼Œå…¶å®å°±å·²ç»æ˜¯åˆ†è§£åˆ°æœ€åŸºæœ¬çš„ç®—å­äº†ã€‚åœ¨åé¢çš„ä»£ç å®ç°ç¯èŠ‚ï¼Œä¼šæ›´æ¸…æ¥šæ˜äº†ä¸€äº›ã€‚</p>
<p>â€‹
æ€»ç»“ä¸€ä¸‹ï¼Œè®¡ç®—å›¾çš„å˜é‡èŠ‚ç‚¹è¢«èµ‹å€¼æˆ–åˆå§‹åŒ–åï¼Œåœ¨ç»“æœèŠ‚ç‚¹ï¼ˆæ¯”å¦‚æŸå¤±å€¼èŠ‚ç‚¹ï¼‰ä¸Šè°ƒç”¨
å‰å‘ä¼ æ’­
ï¼Œé€’å½’è®¡ç®—è·¯å¾„ä¸Šå„ä¸ªèŠ‚ç‚¹çš„å€¼ï¼Œä¿¡æ¯æ²¿ç€è®¡ç®—å›¾å‘å‰ä¼ æ’­ï¼Œæœ€ç»ˆå¾—åˆ°ç»“æœèŠ‚ç‚¹çš„å€¼ã€‚ä¹‹åï¼Œåœ¨éœ€è¦æ›´æ–°çš„èŠ‚ç‚¹ä¸Šè°ƒç”¨
åå‘ä¼ æ’­
æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šé€’å½’è®¡ç®—<strong>ç»“æœèŠ‚ç‚¹å¯¹è·¯å¾„ä¸Šå„ä¸ªèŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µï¼Œä¿¡æ¯åå‘ä¼ æ’­</strong>ã€‚å¦‚æœæœ‰å¤šä¸ªèŠ‚ç‚¹éœ€è¦æ›´æ–°ï¼Œæ¯”å¦‚æƒå€¼å‘é‡èŠ‚ç‚¹å’Œåç½®èŠ‚ç‚¹ï¼Œå°±åœ¨è¿™äº›èŠ‚ç‚¹ä¸Šåˆ†åˆ«è°ƒç”¨
åå‘ä¼ æ’­
æ–¹æ³•ã€‚<strong>ç”±äºä¸­é—´èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µï¼ˆå¦‚æœå·²ç»è¢«è®¡ç®—ï¼‰å·²ç»ä¿å­˜åœ¨äº†
èŠ‚ç‚¹çš„ jacobi å±æ€§ä¸­ï¼Œæ‰€ä»¥åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šå¤šæ¬¡è°ƒç”¨å…¶ åå‘ä¼ æ’­
æ–¹æ³•æ—¶å¹¶ä¸ä¼šå¢åŠ é¢å¤–çš„è®¡ç®—è´Ÿæ‹…ã€‚</strong>è¿™å…¶å®å°±æ˜¯â€œåå‘ä¼ æ’­â€çš„ç²¾é«“ï¼Œå®ƒæ‰§è¡Œçš„æ— éå°±æ˜¯å¤æ‚å¤åˆæ˜ å°„çš„æ±‚å¯¼é“¾å¼æ³•åˆ™ï¼Œä¿å­˜ä¸­é—´ç»“æœï¼Œä»è€Œä»¥ç©ºé—´æ¢æ—¶é—´ã€‚å…·ä½“çš„å†…å®¹ä¼šåœ¨ä¸‹ä¸€èŠ‚çš„å®ç°ä¸­è¯¦è§£</p>
<p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p>
<p>ä»£ç å®ç°å‚è€ƒï¼šhttps://github.com/zc911/MatrixSlow</p>
<p>1ã€ã€Šç”¨pythonå®ç°æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‹å¼ è§‰éã€é™ˆéœ‡</p>
<p>2ã€https://zhuanlan.zhihu.com/p/191648279</p>
<p>3ã€https://zhuanlan.zhihu.com/p/61103504</p>
<p>4ã€https://blog.csdn.net/aws3217150/article/details/70214422</p>
<p>5ã€https://zhuanlan.zhihu.com/p/53506221</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
        <category>Pythonæ­å»ºç®€æ˜“æ¡†æ¶ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Framework</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”¨Pythonæ­å»ºæ·±åº¦å­¦ä¹ æ¡†æ¶ç³»åˆ—ç¬”è®°2â€”â€”è®¡ç®—å›¾ã€å‰å‘ä¼ æ’­ã€åå‘ä¼ æ’­ä¸è‡ªåŠ¨å¾®åˆ†çš„ä»£ç å®ç°</title>
    <url>/2022/02/22/6bfa5496ebc4/</url>
    <content><![CDATA[<p>â€‹
é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹å®Œä¸Šä¸€èŠ‚çš„ç†è®ºä»¥åï¼Œåº”è¯¥éœ€è¦çŸ¥æ™“åœ¨ä¸Šè¿°è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä»£ç ä¸­å®ç°çš„æœ€æ ¸å¿ƒçš„èŠ‚ç‚¹ç›¸å…³çš„ç±»å¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬ä»¥ä»¥ä¸‹è¿™å¼ ç»å…¸çš„è®¡ç®—å›¾æ¥åˆ†æï¼š</p>
<p>â€‹
å…¶ä¸­ï¼Œå­˜å‚¨æ•´ä¸ªå›¾æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç±»ï¼Œ<strong>ä¹Ÿå°±æ˜¯è®¡ç®—å›¾ç±»</strong>ï¼Œç„¶åå›¾ä¸­åˆæœ‰è®¸å¤šç±»å‹çš„èŠ‚ç‚¹ï¼Œç¬¬ä¸€ç§ç±»å‹çš„èŠ‚ç‚¹æ˜¯<strong>å˜é‡èŠ‚ç‚¹</strong>ï¼Œä¹Ÿå°±æ˜¯xã€wè¿™ç§ï¼Œæ˜¯æ— çˆ¶èŠ‚ç‚¹çš„ï¼Œç¬¬äºŒç§ç±»å‹æ˜¯<strong>Opæ“ä½œç¬¦èŠ‚ç‚¹</strong>ï¼Œä¹Ÿå°±æ˜¯+ã€xè¿™ç§èŠ‚ç‚¹ï¼Œå‰©ä¸‹çš„å°±æ˜¯æ™®é€šçš„ä¸­é—´èŠ‚ç‚¹ã€‚æ•…è€Œæˆ‘ä»¬éœ€è¦å®ç°çš„ç±»å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_02_10_15_03_30_21.png" /></p>
<p>â€‹</p>
<ul>
<li><strong>Nodeç±»ï¼ˆåŸºç±»-éæŠ½è±¡ç±»ï¼‰</strong>
<ul>
<li>æ™®é€šä¸­é—´èŠ‚ç‚¹ï¼ˆç›´æ¥ä½¿ç”¨Nodeç±»å³å¯ï¼‰</li>
<li>å˜é‡èŠ‚ç‚¹ï¼ˆç»§æ‰¿Nodeç±»ï¼Œæ— çˆ¶èŠ‚ç‚¹ï¼Œæ„é€ å‡½æ•°æ¥å—å˜é‡çš„å½¢çŠ¶ï¼Œæ˜¯å¦åˆå§‹åŒ–ä»¥åŠæ˜¯å¦å‚ä¸è®­ç»ƒçš„æ ‡è¯†ï¼‰</li>
<li><strong>Opæ“ä½œç¬¦èŠ‚ç‚¹ï¼ˆç»§æ‰¿Nodeç±»ï¼ŒæŠ½è±¡ç±»ï¼Œç„¶åæ ¹æ®ä¸åŒçš„è¿ç®—ç¬¦å®šä¹‰ç±»æ¥ç»§æ‰¿å®ƒï¼Œå…¶ä»–è¿ç®—ç¬¦ç±»éœ€è¦å®ç°ä¸¤ä¸ªæ–¹æ³•ï¼šcompute
å’Œ
get_jacobiï¼Œ</strong>åˆ†åˆ«ç”¨äº<strong>æ ¹æ®çˆ¶èŠ‚ç‚¹çš„å€¼è®¡ç®—æœ¬èŠ‚ç‚¹çš„å€¼</strong>ï¼Œä»¥åŠ<strong>è®¡ç®—æœ¬èŠ‚ç‚¹å¯¹æŸä¸ªçˆ¶èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µ</strong>ï¼‰ã€‚</li>
</ul></li>
<li><strong>Graphè®¡ç®—å›¾ç±»</strong></li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥ä¸€ä¸€çœ‹å®ƒä»¬çš„å®ç°ä»£ç ï¼š</p>
<h3 id="graphè®¡ç®—å›¾ç±»-ä¸€äº›åŸºæœ¬å‡½æ•°">1ã€Graphè®¡ç®—å›¾ç±»
ï¼ˆä¸€äº›åŸºæœ¬å‡½æ•°ï¼‰</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Graph</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è®¡ç®—å›¾ç±»</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.nodes = []  <span class="comment"># è®¡ç®—å›¾å†…çš„èŠ‚ç‚¹çš„åˆ—è¡¨</span></span><br><span class="line">        self.name_scope = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_node</span>(<span class="params">self, node</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        æ·»åŠ èŠ‚ç‚¹</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.nodes.append(node)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">clear_jacobi</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        æ¸…é™¤å›¾ä¸­å…¨éƒ¨èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µ</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> node <span class="keyword">in</span> self.nodes:</span><br><span class="line">            node.clear_jacobi()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">reset_value</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        é‡ç½®å›¾ä¸­å…¨éƒ¨èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> node <span class="keyword">in</span> self.nodes:</span><br><span class="line">            node.reset_value(<span class="literal">False</span>)  <span class="comment"># æ¯ä¸ªèŠ‚ç‚¹ä¸é€’å½’æ¸…é™¤è‡ªå·±çš„å­èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">node_count</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.nodes)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># å…¨å±€é»˜è®¤è®¡ç®—å›¾</span></span><br><span class="line">default_graph = Graph()</span><br></pre></td></tr></table></figure>
<h3 id="nodeç±»åŸºç±»---éæŠ½è±¡ç±»">2ã€Nodeç±»ï¼ˆåŸºç±» - éæŠ½è±¡ç±»ï¼‰</h3>
<ul>
<li><strong>Part1ï¼šæ„é€ å‡½æ•°</strong>
<ul>
<li>æ­¤éƒ¨åˆ†è¾ƒå¥½ç†è§£ï¼Œåšä¸€äº›åˆå§‹åŒ–ï¼Œå°†èŠ‚ç‚¹æ·»åŠ åˆ°è®¡ç®—å›¾çš„listé‡Œï¼Œç„¶åå°†è¯¥èŠ‚ç‚¹æ·»åŠ åˆ°çˆ¶èŠ‚ç‚¹çš„å­èŠ‚ç‚¹åˆ—è¡¨ä¸­ã€‚</li>
<li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šæ„é€ å‡½æ•°éœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯çˆ¶èŠ‚ç‚¹åˆ—è¡¨ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€äº›å‚æ•°åˆ—è¡¨</li>
</ul></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è®¡ç®—å›¾èŠ‚ç‚¹ç±»åŸºç±»</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, *parents, **kargs</span>):</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è®¡ç®—å›¾å¯¹è±¡ï¼Œé»˜è®¤ä¸ºå…¨å±€å¯¹è±¡default_graph</span></span><br><span class="line">        self.kargs = kargs</span><br><span class="line">        self.graph = kargs.get(<span class="string">&#x27;graph&#x27;</span>, default_graph) <span class="comment"># èŠ‚ç‚¹æ‰€å±çš„è®¡ç®—å›¾ï¼Œé»˜è®¤ä¸º å…¨å±€è®¡ç®—å›¾default_graph</span></span><br><span class="line">        self.need_save = kargs.get(<span class="string">&#x27;need_save&#x27;</span>, <span class="literal">True</span>)  <span class="comment"># æ˜¯å¦éœ€è¦è¢«ä¿å­˜</span></span><br><span class="line">        self.gen_node_name(**kargs)     <span class="comment"># ä¾æ®å‚æ•°ç”ŸæˆèŠ‚ç‚¹åç§°ï¼ŒèŠ‚ç‚¹åç§°åœ¨æ¨¡å‹ä¿å­˜å’Œå¯¼å…¥æ—¶ä¼šç”¨åˆ°</span></span><br><span class="line"></span><br><span class="line">        self.parents = <span class="built_in">list</span>(parents)  <span class="comment"># çˆ¶èŠ‚ç‚¹åˆ—è¡¨</span></span><br><span class="line">        self.children = []  <span class="comment"># å­èŠ‚ç‚¹åˆ—è¡¨</span></span><br><span class="line">        self.value = <span class="literal">None</span>  <span class="comment"># æœ¬èŠ‚ç‚¹çš„å€¼ï¼ŒNumpyçš„Matrixç±»</span></span><br><span class="line">        self.jacobi = <span class="literal">None</span>  <span class="comment"># ç»“æœèŠ‚ç‚¹å¯¹æœ¬èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µ</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># å°†æœ¬èŠ‚ç‚¹æ·»åŠ åˆ°çˆ¶èŠ‚ç‚¹çš„å­èŠ‚ç‚¹åˆ—è¡¨ä¸­</span></span><br><span class="line">        <span class="keyword">for</span> parent <span class="keyword">in</span> self.parents:</span><br><span class="line">            parent.children.append(self)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å°†æœ¬èŠ‚ç‚¹æ·»åŠ åˆ°è®¡ç®—å›¾ä¸­</span></span><br><span class="line">        self.graph.add_node(self)</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Part2: å¸¸è§å‡½æ•°</strong>:
<ul>
<li>æ­¤éƒ¨åˆ†ä¹Ÿæ˜¯Nodeç±»ä¸­ä¸€äº›åŸºæœ¬çš„å·¥å…·å‹å‡½æ•°ï¼Œå…¶ä¸­gen_node_nameå°±æ˜¯åœ¨æ„é€ å‡½æ•°ä¸­ç”ŸæˆèŠ‚ç‚¹åç§°ç”¨çš„ã€‚</li>
<li>dimension å’Œ shape å‡½æ•°æ˜¯ç”¨æ¥è¿”å›èŠ‚ç‚¹å€¼çš„ç»´åº¦çš„</li>
<li>reset_value é€’å½’é‡ç½®è¯¥èŠ‚ç‚¹ + è¯¥èŠ‚ç‚¹ä¸‹æ¸¸çš„èŠ‚ç‚¹çš„å€¼</li>
</ul></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_parents</span>(<span class="params">self</span>):</span><br><span class="line">       <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">       è·å–æœ¬èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</span></span><br><span class="line"><span class="string">       &quot;&quot;&quot;</span></span><br><span class="line">       <span class="keyword">return</span> self.parents</span><br><span class="line"></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">get_children</span>(<span class="params">self</span>):</span><br><span class="line">       <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">       è·å–æœ¬èŠ‚ç‚¹çš„å­èŠ‚ç‚¹</span></span><br><span class="line"><span class="string">       &quot;&quot;&quot;</span></span><br><span class="line">       <span class="keyword">return</span> self.children</span><br><span class="line"></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">gen_node_name</span>(<span class="params">self, **kargs</span>):</span><br><span class="line">       <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">       ç”ŸæˆèŠ‚ç‚¹åç§°ï¼Œå¦‚æœç”¨æˆ·ä¸æŒ‡å®šï¼Œåˆ™æ ¹æ®èŠ‚ç‚¹ç±»å‹ç”Ÿæˆç±»ä¼¼äº&quot;MatMul:3&quot;çš„èŠ‚ç‚¹åï¼Œ</span></span><br><span class="line"><span class="string">       å¦‚æœæŒ‡å®šäº†name_scopeï¼Œåˆ™ç”Ÿæˆç±»ä¼¼&quot;Hidden/MatMul:3&quot;çš„èŠ‚ç‚¹å</span></span><br><span class="line"><span class="string">       &quot;&quot;&quot;</span></span><br><span class="line">       self.name = kargs.get(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;&#123;&#125;:&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">           self.__class__.__name__, self.graph.node_count()))</span><br><span class="line">       <span class="keyword">if</span> self.graph.name_scope:</span><br><span class="line">           self.name = <span class="string">&#x27;&#123;&#125;/&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(self.graph.name_scope, self.name)</span><br><span class="line">       <span class="keyword">def</span> <span class="title function_">clear_jacobi</span>(<span class="params">self</span>):</span><br><span class="line">       <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">       æ¸…ç©ºç»“æœèŠ‚ç‚¹å¯¹æœ¬èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µ</span></span><br><span class="line"><span class="string">       &quot;&quot;&quot;</span></span><br><span class="line">       self.jacobi = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">dimension</span>(<span class="params">self</span>):</span><br><span class="line">       <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">       è¿”å›æœ¬èŠ‚ç‚¹çš„å€¼å±•å¹³æˆå‘é‡åçš„ç»´æ•°</span></span><br><span class="line"><span class="string">       &quot;&quot;&quot;</span></span><br><span class="line">       <span class="keyword">return</span> self.value.shape[<span class="number">0</span>] * self.value.shape[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">shape</span>(<span class="params">self</span>):</span><br><span class="line">       <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">       è¿”å›æœ¬èŠ‚ç‚¹çš„å€¼ä½œä¸ºçŸ©é˜µçš„å½¢çŠ¶ï¼šï¼ˆè¡Œæ•°ï¼Œåˆ—æ•°ï¼‰</span></span><br><span class="line"><span class="string">       &quot;&quot;&quot;</span></span><br><span class="line">       <span class="keyword">return</span> self.value.shape</span><br><span class="line"></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">reset_value</span>(<span class="params">self, recursive=<span class="literal">True</span></span>):</span><br><span class="line">       <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">       é‡ç½®æœ¬èŠ‚ç‚¹çš„å€¼ï¼Œå¹¶é€’å½’é‡ç½®æœ¬èŠ‚ç‚¹çš„ä¸‹æ¸¸èŠ‚ç‚¹çš„å€¼ã€‚ï¼ˆå› ä¸ºå¦‚æœæœ¬èŠ‚ç‚¹çš„å€¼è¢«é‡ç½®äº†ï¼Œæ‰€æœ‰ä¸‹æ¸¸å­èŠ‚ç‚¹çš„å€¼ä¹Ÿå°±éƒ½å¤±å»äº†æ„ä¹‰ï¼Œä¸‹æ¸¸å­èŠ‚ç‚¹çš„å€¼æ˜¯ä¾èµ–äºè¯¥èŠ‚ç‚¹è¿›è¡Œè®¡ç®—çš„ï¼‰</span></span><br><span class="line"><span class="string">       &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">       self.value = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> recursive:</span><br><span class="line">           <span class="keyword">for</span> child <span class="keyword">in</span> self.children:</span><br><span class="line">               child.reset_value()</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Part3ï¼šè™šå‡½æ•°</strong>ï¼š
<ul>
<li>è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œæ˜¯ç­‰ä¼šå„¿
æ“ä½œç¬¦èŠ‚ç‚¹éœ€è¦é‡è½½çš„å‡½æ•°å†…å®¹ï¼Œåœ¨forwardå’Œbackwordä¸­æœ‰ç”¨åˆ°ã€‚</li>
</ul></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@abc.abstractmethod</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">compute</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æŠ½è±¡æ–¹æ³•ï¼Œæ ¹æ®çˆ¶èŠ‚ç‚¹çš„å€¼è®¡ç®—æœ¬èŠ‚ç‚¹çš„å€¼ï¼Œç”¨äºå‰å‘ä¼ æ’­ä¸­è®¡ç®—è¯¥èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@abc.abstractmethod</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_jacobi</span>(<span class="params">self, parent</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æŠ½è±¡æ–¹æ³•ï¼Œè®¡ç®—æœ¬èŠ‚ç‚¹å¯¹æŸä¸ªçˆ¶èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µçš„è®¡ç®—ï¼Œå› ä¸ºè®¡ç®—çˆ¶èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µå¯èƒ½éœ€è¦è¯¥çˆ¶èŠ‚ç‚¹ä»¥åŠå…¶ä»–çˆ¶èŠ‚ç‚¹çš„å€¼ï¼Œæ‰€ä»¥åªèƒ½å¤Ÿåœ¨å­èŠ‚ç‚¹ä¸­å®Œæˆã€‚çˆ¶èŠ‚ç‚¹è°ƒç”¨å­èŠ‚ç‚¹çš„getjacobiæ–¹æ³•ï¼Œå°±å¯ä»¥å¾—åˆ°å­èŠ‚ç‚¹å¯¹è‡ªå·±çš„é›…å¯æ¯”çŸ©é˜µã€‚</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Part4ï¼šæ ¸å¿ƒå‡½æ•°</strong>ï¼š
<ul>
<li>forward() å’Œ backward() å‡½æ•°,
éƒ½æ˜¯ä»¥é€’å½’çš„å½¢å¼è¿›è¡Œè®¡ç®—ï¼Œè¯·æ³¨æ„è¿™è¾¹çš„ä¸¤ä¸ªå‡½æ•°çš„å«ä¹‰å’Œpytorchåº“ä¸­çš„åŒåå‡½æ•°å«ä¹‰ç›¸å·®è¾ƒå¤§ï¼Œä¸è¦ææ··ã€‚</li>
</ul></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">  <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self</span>):</span><br><span class="line">      <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">      å‰å‘ä¼ æ’­è®¡ç®—æœ¬èŠ‚ç‚¹çš„å€¼ï¼Œè‹¥çˆ¶èŠ‚ç‚¹çš„å€¼æœªè¢«è®¡ç®—ï¼Œåˆ™é€’å½’è°ƒç”¨çˆ¶èŠ‚ç‚¹çš„forwardæ–¹æ³•</span></span><br><span class="line"><span class="string">      &quot;&quot;&quot;</span></span><br><span class="line">      <span class="keyword">for</span> node <span class="keyword">in</span> self.parents:</span><br><span class="line">          <span class="keyword">if</span> node.value <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">              node.forward()</span><br><span class="line"><span class="comment"># é€’å½’å®Œæˆï¼Œæ‰€æœ‰çˆ¶èŠ‚ç‚¹çš„å€¼éƒ½å°±ä½äº†ï¼Œè°ƒç”¨å­ç±»å·²ç»è¦†å†™å¥½çš„computeå‡½æ•°ï¼Œæ ¹æ®çˆ¶èŠ‚ç‚¹çš„å€¼è®¡ç®—è¯¥èŠ‚ç‚¹å€¼ï¼Œä¾‹å¦‚å¦‚æœè¯¥èŠ‚ç‚¹æ˜¯ + å· ç±»èŠ‚ç‚¹ï¼Œcomputeå‡½æ•°ä¸­ï¼Œå°±ä¼šä¹¦å†™å°†æ‰€æœ‰çš„çˆ¶èŠ‚ç‚¹çš„å€¼ç›¸åŠ çš„è¿‡ç¨‹ã€‚</span></span><br><span class="line">      self.compute()</span><br><span class="line">	</span><br><span class="line">  <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">  å±æ€§jacobiç”¨äºä¿å­˜æœ€ç»ˆç»“æœå¯¹è‡ªå·±çš„é›…å¯æ¯”çŸ©é˜µï¼Œåœ¨ä»£ç ä¸€å¼€å§‹å…ˆåˆ¤æ–­è‡ªå·±çš„jacobiå±æ€§æ˜¯å¦ä¸ºNone,å¦‚æœä¸æ˜¯è¯´æ˜æœ€ç»ˆç»“æœå¯¹è‡ªå·±çš„é›…å¯æ¯”çŸ©é˜µå·²ç»è®¡ç®—è¿‡äº†ï¼ˆå› ä¸ºä¸€æ¬¡åå‘ä¼ æ’­ä¸­ï¼ŒæŸä¸ªèŠ‚ç‚¹å¯èƒ½è¢«å¤šæ¬¡è®¿é—®ï¼‰ã€‚</span></span><br><span class="line"><span class="string">  resultå‚æ•°ä¼ è¿›æ¥çš„æ˜¯æœ€ç»ˆçš„ç»“æœèŠ‚ç‚¹ã€‚</span></span><br><span class="line"><span class="string">  &quot;&quot;&quot;</span></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">backward</span>(<span class="params">self, result</span>):</span><br><span class="line">      <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">      åå‘ä¼ æ’­ï¼Œè®¡ç®—ç»“æœèŠ‚ç‚¹å¯¹æœ¬èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µ</span></span><br><span class="line"><span class="string">      &quot;&quot;&quot;</span></span><br><span class="line">      <span class="keyword">if</span> self.jacobi <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">          <span class="keyword">if</span> self <span class="keyword">is</span> result:  <span class="comment"># å¦‚æœæœ¬èŠ‚ç‚¹è‡ªèº«å°±æ˜¯æœ€ç»ˆçš„ç»“æœèŠ‚ç‚¹</span></span><br><span class="line">              self.jacobi = np.mat(np.eye(self.dimension()))  <span class="comment">#æ„é€ ä¸€ä¸ªç»´åº¦æ­£ç¡®çš„å•ä½çŸ©é˜µå³å¯</span></span><br><span class="line">          <span class="keyword">else</span>:   <span class="comment"># å¦‚æœæœ¬èŠ‚ç‚¹ä¸æ˜¯æœ€ç»ˆçš„ç»“æœèŠ‚ç‚¹ï¼Œè€Œæ˜¯æ­£å¸¸çš„ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">              self.jacobi = np.mat(  <span class="comment"># å…ˆæ„é€ ä¸€ä¸ªç»´åº¦æ­£ç¡®çš„å…¨ä¸º0çš„çŸ©é˜µï¼Œä½œä¸ºä¹‹åçš„ç´¯åŠ å™¨</span></span><br><span class="line">                  np.zeros((result.dimension(), self.dimension())))</span><br><span class="line">		<span class="comment"># ç„¶åéå†æ‰€æœ‰å­èŠ‚ç‚¹</span></span><br><span class="line">              <span class="keyword">for</span> child <span class="keyword">in</span> self.get_children():</span><br><span class="line">                   <span class="comment"># å¦‚æœå­èŠ‚ç‚¹çš„å€¼ä¸ä¸ºç©ºï¼Œè¯´æ˜å®ƒåœ¨æœ¬æ¬¡çš„è®¡ç®—è·¯å¾„ä¸Šï¼Œå› ä¸ºå¯¹äºæŸäº›å¤æ‚çš„è®¡ç®—å›¾è€Œè¨€ï¼Œæœ‰äº›èŠ‚ç‚¹å¯èƒ½ä¸åœ¨æŸæ¬¡å‰å‘ä¼ æ’­çš„è®¡ç®—è·¯å¾„ä¸Šï¼Œå®ƒä»¬æ˜¯æ— å…³çš„èŠ‚ç‚¹ã€‚</span></span><br><span class="line">                  <span class="keyword">if</span> child.value <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                      <span class="comment"># é€’å½’è°ƒç”¨childçš„backward()æ–¹æ³•ï¼Œå¾—åˆ°æœ€ç»ˆç»“æœå¯¹å­èŠ‚ç‚¹çš„é›…å¯æ¯”ï¼Œå†ä¹˜ä¸Š å­èŠ‚ç‚¹å¯¹è¯¥èŠ‚ç‚¹çš„é›…å¯æ¯”ï¼Œå°±å¾—åˆ°äº†æœ€ç»ˆç»“æœå¯¹è¯¥èŠ‚ç‚¹çš„é›…å¯æ¯”ï¼Œå°†å…¶ç´¯åŠ åˆ°ä¹‹å‰åˆå§‹åŒ–å¥½çš„å…¨ä¸º0çš„çŸ©é˜µä¸­ã€‚</span></span><br><span class="line">                      self.jacobi += child.backward(result) * child.get_jacobi(self)</span><br><span class="line"><span class="comment"># è¿”å›é›…å¯æ¯”çŸ©é˜µå³å¯</span></span><br><span class="line">      <span class="keyword">return</span> self.jacobi</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="å˜é‡èŠ‚ç‚¹ç»§æ‰¿è‡ªnodeç±»">3ã€å˜é‡èŠ‚ç‚¹ï¼ˆç»§æ‰¿è‡ªNodeç±»ï¼‰ï¼š</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Variable</span>(<span class="title class_ inherited__">Node</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    å˜é‡èŠ‚ç‚¹</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, dim, init=<span class="literal">False</span>, trainable=<span class="literal">True</span>, **kargs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        å˜é‡èŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œæ„é€ å‡½æ•°æ¥å—å˜é‡çš„å½¢çŠ¶ï¼Œæ˜¯å¦åˆå§‹åŒ–ä»¥åŠæ˜¯å¦å‚ä¸è®­ç»ƒçš„æ ‡è¯†</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        Node.__init__(self,  **kargs)</span><br><span class="line">        self.dim = dim</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># å¦‚æœéœ€è¦åˆå§‹åŒ–ï¼Œåˆ™ä»¥æ­£æ€åˆ†å¸ƒéšæœºåˆå§‹åŒ–å˜é‡çš„å€¼</span></span><br><span class="line">        <span class="comment"># åƒä¿å­˜æ ·æœ¬å’Œæ ‡ç­¾çš„èŠ‚ç‚¹ä¸ç”¨åˆå§‹åŒ–ï¼Œè€Œä¿å­˜å‚æ•°çš„èŠ‚ç‚¹éœ€è¦åˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">if</span> init:</span><br><span class="line">            self.value = np.mat(np.random.normal(<span class="number">0</span>, <span class="number">0.001</span>, self.dim))</span><br><span class="line">            </span><br><span class="line">        <span class="comment"># å˜é‡èŠ‚ç‚¹æ˜¯å¦å‚ä¸è®­ç»ƒï¼Œæ¯”å¦‚æ ·æœ¬å’Œæ ‡ç­¾ä¸å‚ä¸è®­ç»ƒï¼Œå¯ä»¥ä¸è®¡ç®—å®ƒä»¬çš„é›…å¯æ¯”çŸ©é˜µï¼Œè€Œå‚æ•°å‚ä¸è®­ç»ƒï¼Œå°±éœ€è¦è®¡ç®—é›…å¯æ¯”çŸ©é˜µã€‚</span></span><br><span class="line">        self.trainable = trainable</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">set_value</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        ä¸ºå˜é‡èµ‹å€¼</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># åˆ¤å®šèµ‹å€¼çš„å€¼matrix æ˜¯ä¸æ˜¯å’Œdimä¸€è‡´</span></span><br><span class="line">        <span class="keyword">assert</span> <span class="built_in">isinstance</span>(value, np.matrix) <span class="keyword">and</span> value.shape == self.dim</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å…ˆé‡ç½®è¯¥èŠ‚ç‚¹åŠæ‰€æœ‰ä¸‹æ¸¸èŠ‚ç‚¹çš„å€¼ï¼Œç„¶åå†å¯¹è¯¥èŠ‚ç‚¹è¿›è¡Œèµ‹å€¼</span></span><br><span class="line">        self.reset_value()</span><br><span class="line">        self.value = value</span><br></pre></td></tr></table></figure>
<h3
id="è¿ç®—ç¬¦æ“ä½œå­èŠ‚ç‚¹ç»§æ‰¿è‡ªnodeç±»éœ€è¦è¦†å†™computeå’Œget_jacobiä¸¤ä¸ªå‡½æ•°">4ã€è¿ç®—ç¬¦æ“ä½œå­èŠ‚ç‚¹ï¼ˆç»§æ‰¿è‡ªNodeç±»ï¼Œéœ€è¦è¦†å†™computeå’Œget_jacobiä¸¤ä¸ªå‡½æ•°ï¼‰</h3>
<p>æŠ½è±¡ç±»å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Operator</span>(<span class="title class_ inherited__">Node</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    å®šä¹‰æ“ä½œç¬¦æŠ½è±¡ç±»</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h5 id="å®šä¹‰-add-æ“ä½œç¬¦">1ï¼‰ å®šä¹‰ Add æ“ä½œç¬¦ï¼š</h5>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Add</span>(<span class="title class_ inherited__">Operator</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    ï¼ˆå¤šä¸ªï¼‰çŸ©é˜µåŠ æ³•</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">	<span class="comment">## æ ¹æ®çˆ¶èŠ‚ç‚¹çš„å€¼è®¡ç®—æœ¬èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">compute</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># assert len(self.parents) == 2 and self.parents[0].shape() == self.parents[1].shape()</span></span><br><span class="line">        self.value = np.mat(np.zeros(self.parents[<span class="number">0</span>].shape()))</span><br><span class="line">		<span class="comment"># æŠŠæ‰€æœ‰çš„çˆ¶èŠ‚ç‚¹çš„å€¼ç›¸åŠ ï¼Œå°±æ˜¯æ­£å‘ä¼ æ’­è®¡ç®—çš„å€¼</span></span><br><span class="line">        <span class="keyword">for</span> parent <span class="keyword">in</span> self.parents:</span><br><span class="line">            self.value += parent.value</span><br><span class="line">            </span><br><span class="line">	<span class="comment">## è®¡ç®—æœ¬èŠ‚ç‚¹å¯¹æŸä¸ªçˆ¶èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µçš„è®¡ç®—</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_jacobi</span>(<span class="params">self, parent</span>):</span><br><span class="line">        <span class="keyword">return</span> np.mat(np.eye(self.dimension()))  <span class="comment"># çŸ©é˜µä¹‹å’Œå¯¹å…¶ä¸­ä»»ä¸€ä¸ªçŸ©é˜µçš„é›…å¯æ¯”çŸ©é˜µæ˜¯å•ä½çŸ©é˜µ</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">## æ¯”å¦‚è¯´ï¼š çˆ¶èŠ‚ç‚¹ä¸ºçŸ©é˜µ Aï¼ŒB(ç»´åº¦ä¸º 3 * 2)ï¼Œå­èŠ‚ç‚¹ä¸ºçŸ©é˜µ A + Bï¼ˆç»´åº¦ä¸º3 * 2ï¼‰</span></span><br><span class="line"><span class="comment">## å­èŠ‚ç‚¹ä¸º Addæ“ä½œç¬¦èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">## é‚£ä¹ˆè¿™æ ·ä¸€ä¸ªæ˜ å°„å‡½æ•°å°±æ˜¯ 6ç»´å‘é‡ -ã€‹æ˜ å°„åˆ°-ã€‹ 6ç»´å‘é‡ çš„æ˜ å°„å‡½æ•°</span></span><br><span class="line"><span class="comment">## A å±•å¹³ [ a1 a2 a3 a4 a5 a6 ] B å±•å¹³ [ b1 b2 b3 b4 b5 b6]  å‡ä¸º6ç»´å‘é‡</span></span><br><span class="line"><span class="comment">## A+B å±•å¹³ [a1+b1 a2+b2 a3+b3 a4+b4 a5+b5 a6+b6] 6ç»´å‘é‡</span></span><br><span class="line"><span class="comment">## æœ€ç»ˆå¾—åˆ°çš„é›…å¯æ¯”çŸ©é˜µæ˜¯ 6 * 6 çš„å•ä½é˜µ</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">   [d(a1+b1)/d(a1) d(a1+b1)/d(a2) d(a1+b1)/d(a3) d(a1+b1)/d(a4) d(a1+b1)/d(a5) d(a1+b1)/d(a6)  ]</span></span><br><span class="line"><span class="string">   [d(a2+b2)/d(a1) d(a2+b2)/d(a2) d(a2+b2)/d(a3) d(a2+b2)/d(a4) d(a2+b2)/d(a5) d(a2+b2)/d(a6)  ]</span></span><br><span class="line"><span class="string">    	â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦</span></span><br><span class="line"><span class="string">        â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦</span></span><br><span class="line"><span class="string">        â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦</span></span><br><span class="line"><span class="string">   [d(a6+b6)/d(a1) d(a6+b6)/d(a2) d(a6+b6)/d(a3) d(a6+b6)/d(a4) d(a6+b6)/d(a5) d(a6+b6)/d(a6)  ]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">   [1 0 0 0 0 0]</span></span><br><span class="line"><span class="string">   [0 1 0 0 0 0]</span></span><br><span class="line"><span class="string">   [0 0 1 0 0 0]</span></span><br><span class="line"><span class="string">   [0 0 0 1 0 0]</span></span><br><span class="line"><span class="string">   [0 0 0 0 1 0]</span></span><br><span class="line"><span class="string">   [0 0 0 0 0 1]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<h5 id="å®šä¹‰-matmul-æ“ä½œç¬¦">2ï¼‰ å®šä¹‰ Matmul æ“ä½œç¬¦ï¼š</h5>
<p>æ¨å¯¼å¦‚ä¸‹ï¼š</p>
<ul>
<li><p>å®šä¹‰çŸ©é˜µAï¼š å½¢çŠ¶ä¸º M x N</p></li>
<li><p>å®šä¹‰çŸ©é˜µBï¼š å½¢çŠ¶ä¸º N x K</p></li>
<li><p>çŸ©é˜µä¹˜æ³•å¾—åˆ°çš„ç»“æœCï¼š å½¢çŠ¶ä¸º M X K</p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/92352E558AF386F3CEFAE57985019633.jpg" /></p>
<p>â€‹ æˆ‘ä»¬å…ˆæ±‚è§£<strong>çŸ©é˜µCå¯¹çŸ©é˜µAçš„é›…å¯æ¯”çŸ©é˜µ</strong>ï¼š</p>
<p>â€‹
æˆ‘ä»¬å°†çŸ©é˜µä¹˜æ³•è§†ä¸ºå¤šåˆ°å¤šæ˜ å°„ï¼Œå¦‚ä¸‹ï¼šä»¥å·¦çŸ©é˜µAä¸ºè‡ªå˜é‡ï¼Œä»¥å³çŸ©é˜µBä¸ºå¸¸é‡ï¼Œå°†çŸ©é˜µAè§†ä¸º
<span class="math inline">\(M \times N\)</span>
ç»´çš„å‘é‡ï¼Œå°†æ˜ å°„çš„ç»“æœçŸ©é˜µCè§†ä¸º <span class="math inline">\(M \times
K\)</span> ç»´çš„å‘é‡ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/202202271a.png" style="zoom: 50%;" /></p>
<p>â€‹ æœ€ç»ˆè·å¾—çš„é›…å¯æ¯”çŸ©é˜µçš„ç¬¬ä¸€è¡Œï¼Œå°±æ˜¯CçŸ©é˜µçš„ç¬¬1ä¸ªå…ƒç´ ï¼Œåˆ†åˆ«å¯¹A çš„ MN
ä¸ªå…ƒç´ æ±‚å¯¼ï¼šå¾—åˆ°çš„å¦‚ä¸‹æ‰€ç¤ºï¼šCçš„ç¬¬ä¸€ä¸ªåˆ†é‡å¯¹Açš„ç¬¬ä¸€è¡Œå…ƒç´ çš„åå¯¼æ•°å°±æ˜¯Bçš„ç¬¬ä¸€åˆ—ï¼Œå¯¹Aå…¶ä½™å…ƒç´ çš„åå¯¼æ•°æ˜¯0ï¼Œæ‰€ä»¥é›…å¯æ¯”çŸ©é˜µçš„ç¬¬ä¸€è¡Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/F9061B9E26F869EA36F4575B07A65B27.jpg" style="zoom: 25%;" /></p>
<p>â€‹ ç¬¬äºŒè¡ŒåŒç†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/BD69F402E360C2A1B6CCD85DF5881C28.jpg" style="zoom:25%;" /></p>
<p>â€‹
ä¸€ç›´åˆ°é›…å¯æ¯”çŸ©é˜µçš„ç¬¬Kè¡Œï¼Œéƒ½æ˜¯è¿™æ ·çš„è§„å¾‹ã€‚ç„¶åæ¥ä¸‹å»é›…å¯æ¯”çŸ©é˜µçš„K+1è¡Œæ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/7FFCABE5A3D35DAAD995E76633F94DDE.jpg" style="zoom:25%;" /></p>
<p>â€‹
æˆ‘ä»¬ä¼šå‘ç°ä¸€ä¸ªè§„å¾‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œä¹Ÿå°±æ˜¯æœ€ç»ˆçš„ç»“è®ºï¼šCå¯¹Açš„é›…å¯æ¯”çŸ©é˜µå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/15BB5E4AF6FBE51D7701F361B7BE64FE.jpg" /></p>
<p>â€‹ <span class="math inline">\(B^T æ˜¯ Bçš„è½¬ç½®\)</span>ï¼Œæˆ‘ä»¬æŠŠ m ä¸ª
å½¢çŠ¶ä¸º <span class="math inline">\(K \times N\)</span> çš„<span
class="math inline">\(B^T\)</span>çŸ©é˜µæ”¾åœ¨å¯¹è§’çº¿ä¸Šï¼Œå¾—åˆ°ä¸€ä¸ª <span
class="math inline">\(MK \times MN\)</span> çš„çŸ©é˜µã€‚</p>
<p>â€‹</p>
<p>â€‹ ç„¶åæ¥çœ‹<strong>çŸ©é˜µCå¯¹çŸ©é˜µBçš„é›…å¯æ¯”çŸ©é˜µ</strong>ï¼š</p>
<p>â€‹
åŒæ ·æˆ‘ä»¬å°†çŸ©é˜µä¹˜æ³•è§†ä¸ºå¤šåˆ°å¤šæ˜ å°„ï¼Œå¦‚ä¸‹ï¼šä»¥å·¦çŸ©é˜µAä¸ºå¸¸é‡ï¼Œä»¥å³çŸ©é˜µBä¸ºè‡ªå˜é‡ï¼Œå°†çŸ©é˜µBè§†ä¸º
<span class="math inline">\(N \times K\)</span>
ç»´çš„å‘é‡ï¼Œå°†æ˜ å°„çš„ç»“æœçŸ©é˜µCè§†ä¸º <span class="math inline">\(M \times
K\)</span> ç»´çš„å‘é‡ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/2022020272258.png" style="zoom:33%;" /></p>
<p>â€‹ è¿™æ˜¯ä¸€ä¸ªNKç»´å‘é‡ï¼ŒCå¯¹Bçš„é›…å¯æ¯”çŸ©é˜µæ˜¯<span class="math inline">\(MK
\times NK\)</span>
çš„çŸ©é˜µã€‚Cçš„ç¬¬ä¸€ä¸ªåˆ†é‡å¯¹Bçš„ç¬¬1åˆ—å…ƒç´ çš„åå¯¼æ•°å°±æ˜¯Açš„ç¬¬ä¸€è¡Œï¼Œæ‰€ä»¥é›…å¯æ¯”çŸ©é˜µçš„ç¬¬1è¡Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/C165EA4E4C9DE67CF1EE6AF9551DB327.jpg" style="zoom: 33%;" /></p>
<p>â€‹ é›…å¯æ¯”çŸ©é˜µçš„ç¬¬2è¡Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/B504A835005C3AAF0BA61984E976F3F9.jpg" style="zoom: 33%;" /></p>
<p>â€‹
è¿™ä¸€è¡Œä¸­æ¯ä¸ªé•¿åº¦ç»´kçš„æ®µçš„ç¬¬2ä¸ªå…ƒç´ æ˜¯Açš„ç¬¬1è¡Œçš„å¯¹åº”å…ƒç´ ï¼Œå…¶ä½™å…ƒç´ ç»´0.ä»¥æ­¤ç±»æ¨ï¼Œé›…å¯æ¯”çŸ©é˜µçš„å‰kè¡Œæ˜¯ä¸€ä¸ª<span
class="math inline">\(k \times
NK\)</span>çš„çŸ©é˜µï¼ŒåŒ…å«æ¨ªç€æ’åˆ—çš„Nä¸ªå¯¹è§’é˜µã€‚æ•´ä¸ªé›…å¯æ¯”çŸ©é˜µç”±Mä¸ªè¿™æ ·çš„çŸ©é˜µç«–ç€æ‘åœ¨ä¸€èµ·æ„æˆã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/64F57EE82EDE412BA304CD345F290E57.jpg" style="zoom:50%;" /></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MatMul</span>(<span class="title class_ inherited__">Operator</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    çŸ©é˜µä¹˜æ³•</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">compute</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">assert</span> <span class="built_in">len</span>(self.parents) == <span class="number">2</span> <span class="keyword">and</span> self.parents[<span class="number">0</span>].shape()[</span><br><span class="line">            <span class="number">1</span>] == self.parents[<span class="number">1</span>].shape()[<span class="number">0</span>]</span><br><span class="line">        self.value = self.parents[<span class="number">0</span>].value * self.parents[<span class="number">1</span>].value</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_jacobi</span>(<span class="params">self, parent</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        å°†çŸ©é˜µä¹˜æ³•è§†ä½œæ˜ å°„ï¼Œæ±‚æ˜ å°„å¯¹å‚ä¸è®¡ç®—çš„çŸ©é˜µçš„é›…å…‹æ¯”çŸ©é˜µã€‚</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        zeros = np.mat(np.zeros((self.dimension(), parent.dimension())))</span><br><span class="line">        <span class="keyword">if</span> parent <span class="keyword">is</span> self.parents[<span class="number">0</span>]:  <span class="comment"># Cå¯¹Açš„é›…å¯æ¯”çŸ©é˜µ</span></span><br><span class="line">            <span class="keyword">return</span> fill_diagonal(zeros, self.parents[<span class="number">1</span>].value.T)</span><br><span class="line">        <span class="keyword">else</span>:	<span class="comment"># Cå¯¹Bçš„é›…å¯æ¯”çŸ©é˜µ</span></span><br><span class="line">            jacobi = fill_diagonal(zeros, self.parents[<span class="number">0</span>].value)</span><br><span class="line">            row_sort = np.arange(self.dimension()).reshape(</span><br><span class="line">                self.shape()[::-<span class="number">1</span>]).T.ravel()</span><br><span class="line">            col_sort = np.arange(parent.dimension()).reshape(</span><br><span class="line">                parent.shape()[::-<span class="number">1</span>]).T.ravel()</span><br><span class="line">            <span class="keyword">return</span> jacobi[row_sort, :][:, col_sort]</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="å®šä¹‰-relu-æ“ä½œç¬¦">3ï¼‰ <strong>å®šä¹‰ ReLU æ“ä½œç¬¦ï¼š</strong></h5>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ReLU</span>(<span class="title class_ inherited__">Operator</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    å¯¹çŸ©é˜µçš„å…ƒç´ æ–½åŠ ReLUå‡½æ•°</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    nslope = <span class="number">0.1</span>  <span class="comment"># è´ŸåŠè½´çš„æ–œç‡</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">compute</span>(<span class="params">self</span>):</span><br><span class="line">        self.value = np.mat(np.where(</span><br><span class="line">            self.parents[<span class="number">0</span>].value &gt; <span class="number">0.0</span>,</span><br><span class="line">            self.parents[<span class="number">0</span>].value,</span><br><span class="line">            self.nslope * self.parents[<span class="number">0</span>].value)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_jacobi</span>(<span class="params">self, parent</span>):</span><br><span class="line">        <span class="keyword">return</span> np.diag(np.where(self.parents[<span class="number">0</span>].value.A1 &gt; <span class="number">0.0</span>, <span class="number">1.0</span>, self.nslope))</span><br></pre></td></tr></table></figure>
<p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p>
<p>ä»£ç å®ç°å‚è€ƒï¼šhttps://github.com/zc911/MatrixSlow</p>
<p>1ã€ã€Šç”¨pythonå®ç°æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‹å¼ è§‰éã€é™ˆéœ‡</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
        <category>Pythonæ­å»ºç®€æ˜“æ¡†æ¶ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Framework</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”¨Pythonæ­å»ºæ·±åº¦å­¦ä¹ æ¡†æ¶ç³»åˆ—ç¬”è®°3â€”â€”ä¼˜åŒ–å™¨ç±»çš„ä»£ç å®ç°ï¼ˆä¸Šï¼‰</title>
    <url>/2022/02/23/c051c3782dfb/</url>
    <content><![CDATA[<p><strong>å‰è¨€</strong>ï¼š
ä¼˜åŒ–å™¨çš„ç†è®ºéƒ¨åˆ†ä»¥åŠå„ç§å¸¸è§çš„ä¼˜åŒ–å™¨å¯ä»¥å‚è§å¦‚ä¸‹åšå®¢ï¼š<a
href="https://blog.fantast.top/2022/02/11/ced858ce48dc/">æœºå™¨å­¦ä¹ åŸºç¡€ç³»åˆ—ç¬”è®°16â€”â€”å¸¸è§çš„æ¢¯åº¦ä¸‹é™ä¼˜åŒ–å™¨æ•´ç†</a></p>
<p>æœ¬æ–‡æ‰€è®²çš„æ˜¯å¦‚ä½•ä½¿ç”¨Pythonæ­å»ºä¼˜åŒ–å™¨ç±»ï¼Œä»è€Œå¸®åŠ©å®ç°æ•´ä¸ªæœºå™¨å­¦ä¹ çš„è®­ç»ƒè¿‡ç¨‹ã€‚</p>
<h4
id="ä¸€åœ¨ä¸å°è£…ä¼˜åŒ–å™¨çš„æ—¶å€™å¦‚ä½•åœ¨è®¡ç®—å›¾ä¸Šæ‰§è¡Œæ¢¯åº¦ä¸‹é™æ³•">ä¸€ã€åœ¨ä¸å°è£…ä¼˜åŒ–å™¨çš„æ—¶å€™ï¼Œå¦‚ä½•åœ¨è®¡ç®—å›¾ä¸Šæ‰§è¡Œæ¢¯åº¦ä¸‹é™æ³•ï¼Ÿ</h4>
<p>å½“æˆ‘ä»¬è¿˜æ²¡æœ‰æ˜ç¡®æå‡ºä¼˜åŒ–å™¨è¿™ä¸ªæ¦‚å¿µçš„æ—¶å€™ï¼Œæˆ‘ä»¬éµå¾ªå¦‚ä¸‹è¿‡ç¨‹å»åœ¨è®¡ç®—å›¾ä¸Šæ‰§è¡Œæ¢¯åº¦ä¸‹é™æ¥ä¼˜åŒ–æŸå¤±å‡½æ•°ï¼š</p>
<ul>
<li>1ï¼‰å¯¹ç»“æœèŠ‚ç‚¹çš„ä¸Šæ¸¸å˜é‡èŠ‚ç‚¹(Variable)èµ‹å€¼æˆ–åˆå§‹åŒ–ã€åŒ…æ‹¬è¾“å…¥å‘é‡èŠ‚ç‚¹å’Œè®­ç»ƒå‚æ•°èŠ‚ç‚¹ã€‘</li>
<li>2ï¼‰åœ¨ç»“æœèŠ‚ç‚¹ä¸Šè°ƒç”¨forwardï¼Œè®¡ç®—å‡ºå®ƒçš„å€¼ï¼Œæ•°æ®å‰å‘ä¼ æ’­</li>
<li>3ï¼‰åœ¨æ‰€æœ‰éœ€è¦è®­ç»ƒçš„å˜é‡èŠ‚ç‚¹( Variable, trainable = True
)ä¸Šè°ƒç”¨backwardæ–¹æ³•ï¼Œæ¢¯åº¦åå‘ä¼ æ’­ï¼Œè®¡ç®—å‡ºç»“æœèŠ‚ç‚¹å¯¹è¯¥èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µã€‚ã€ä»…åŒ…æ‹¬è®­ç»ƒå‚æ•°èŠ‚ç‚¹ã€‘</li>
<li>4ï¼‰æ ¹æ®å˜é‡èŠ‚ç‚¹çš„jacobiå±æ€§ä¸­çš„å€¼ï¼Œä»å˜é‡èŠ‚ç‚¹çš„å½“å‰å€¼ä¸­å‡å» ç”¨å­¦ä¹ ç‡
* æ¢¯åº¦çš„å€¼å³ä¸ºæ›´æ–°åçš„å€¼ã€‚</li>
<li>5ï¼‰æ¸…é™¤æ‰€æœ‰èŠ‚ç‚¹çš„valueå’Œjacobiå±æ€§ï¼Œå›åˆ°ç¬¬2æ­¥</li>
</ul>
<h4 id="äºŒä¼˜åŒ–å™¨çš„å°è£…">äºŒã€ä¼˜åŒ–å™¨çš„å°è£…</h4>
<p>â€‹
å…¶å®ï¼Œä¼˜åŒ–å™¨æ‰€å®ç°çš„åŠŸèƒ½å°±æ˜¯ä¸Šè¿°è®­ç»ƒè¿‡ç¨‹ä¸­å¯¹å¯è®­ç»ƒçš„å˜é‡èŠ‚ç‚¹çš„å€¼è¿›è¡Œä¼˜åŒ–çš„è¿‡ç¨‹ã€‚ä½†æ˜¯ç”±äºï¼Œå¯èƒ½å­˜åœ¨å„ç§å¤šç§å¤šæ ·çš„ä¼˜åŒ–å™¨ï¼Œä¸ºäº†ä¾¿äºå¤–å±‚ç”¨æˆ·ä½¿ç”¨ï¼Œä»£ç çš„æ•´æ´ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¼˜åŒ–å™¨çš„åŠŸèƒ½å°è£…èµ·æ¥ï¼Œç„¶åè¿›è¡Œä½¿ç”¨ã€‚</p>
<p>â€‹ æŠ½è±¡è€Œè¨€ï¼Œæ•´ä¸ªæ›´æ–°è®¡ç®—å›¾ä¸­å˜é‡çš„æ™®é€‚æµç¨‹å¯ä»¥æŠ½è±¡ä¸º3æ­¥ï¼š</p>
<ul>
<li>è°ƒç”¨LossèŠ‚ç‚¹çš„Forwardæ–¹æ³•ï¼Œè¿™ä¼šé€’å½’è°ƒç”¨æ‰€æœ‰ä¸Šæ¸¸èŠ‚ç‚¹çš„forwardæ–¹æ³•è¿›è¡Œå‰å‘ä¼ æ’­</li>
<li>å¯¹äºè®¡ç®—å›¾ä¸­éœ€è¦æ›´æ–°çš„å˜é‡èŠ‚ç‚¹ï¼Œåˆ©ç”¨Backwardæ–¹æ³•ï¼Œè®¡ç®—å‡ºLossèŠ‚ç‚¹å¯¹ä»–ä»¬çš„é›…å¯æ¯”çŸ©é˜µ</li>
<li>ä½¿ç”¨é›…å¯æ¯”çŸ©é˜µï¼Œæ ¹æ®æ¢¯åº¦ä¸‹é™æ³•æ›´æ–°å‚æ•°èŠ‚ç‚¹ã€‚</li>
</ul>
<p>â€‹
å½“ç„¶ï¼Œåœ¨ç†è®ºéƒ¨åˆ†å·²ç»çŸ¥é“äº†ï¼Œä¼šæœ‰ä¸åŒå½¢å¼çš„æ¢¯åº¦ä¸‹é™æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨å®ç°ä¸­ï¼Œè‡ªç„¶è€Œç„¶çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ï¼š**å°†ä¸Šè¿°æµç¨‹å°è£…è¿›å…¥ä¸€ä¸ªæŠ½è±¡ç±»ï¼šOptimizerä¸­ï¼Œç„¶åå°†ä¸åŒçš„ç®—æ³•å°è£…è¿›ä¸åŒçš„å­ç±»é‡Œé¢ï¼Œå®ç°å„è‡ªä¸ªæ€§åŒ–çš„éƒ¨åˆ†ã€‚</p>
<h4 id="ä¸‰ä¼˜åŒ–å™¨åŸºç±»optimizerç±»">ä¸‰ã€ä¼˜åŒ–å™¨åŸºç±»ï¼ˆOptimizerç±»ï¼‰ï¼š</h4>
<h5 id="part1æ„é€ å‡½æ•°">Part1ï¼šæ„é€ å‡½æ•°</h5>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Optimizer</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    ä¼˜åŒ–å™¨åŸºç±»</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, graph, target, learning_rate=<span class="number">0.01</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        ä¼˜åŒ–å™¨çš„æ„é€ å‡½æ•°æ¥å—è®¡ç®—å›¾å¯¹è±¡ï¼Œç›®æ ‡èŠ‚ç‚¹å¯¹è±¡(å¾€å¾€å°±æ˜¯Losså‡½æ•°æŸå¤±å€¼èŠ‚ç‚¹ï¼Œä¸ºäº†æ–¹ä¾¿æœŸé—´ï¼Œè¯¥æ¡†æ¶åªæ”¯æŒä¼˜åŒ–ä¸€ä¸ªç›®æ ‡èŠ‚ç‚¹ï¼Œä¸”æˆ‘ä»¬æš‚æ—¶å‡è®¾è¯¥ç›®æ ‡èŠ‚ç‚¹æœ€ç»ˆç»“æœä¸ºæ ‡é‡)ä»¥åŠå­¦ä¹ ç‡</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">assert</span> <span class="built_in">isinstance</span>(target, Node) <span class="keyword">and</span> <span class="built_in">isinstance</span>(graph, Graph)</span><br><span class="line">        self.graph = graph</span><br><span class="line">        self.target = target</span><br><span class="line">        self.learning_rate = learning_rate</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ä¸ºæ¯ä¸ªå‚ä¸è®­ç»ƒçš„èŠ‚ç‚¹ç´¯åŠ ä¸€ä¸ªMini Batchçš„å…¨éƒ¨æ ·æœ¬çš„æ¢¯åº¦ï¼ˆå…·ä½“ä½œç”¨è§åï¼‰</span></span><br><span class="line">        self.acc_gradient = <span class="built_in">dict</span>()</span><br><span class="line">        self.acc_no = <span class="number">0</span></span><br></pre></td></tr></table></figure>
<h5 id="part2æ ¸å¿ƒå‡½æ•°">Part2ï¼šæ ¸å¿ƒå‡½æ•°</h5>
<h6 id="æ ¸å¿ƒå‡½æ•°1forward_backward">æ ¸å¿ƒå‡½æ•°1ï¼šforward_backward()</h6>
<p>â€‹
è¯¥å‡½æ•°æŠ½è±¡äº†å…ˆå‰æˆ‘ä»¬æ‰€è¯´çš„ä¼˜åŒ–å™¨æ™®é€‚æµç¨‹ä¸­çš„å‰ä¸¤æ­¥ï¼Œå®Œæˆå‰å‘ä¼ æ’­è®¡ç®—ç»“æœèŠ‚ç‚¹targetçš„å€¼ï¼Œç„¶åéå†æ‰€æœ‰çš„è®¡ç®—å›¾ä¸­çš„èŠ‚ç‚¹ï¼Œæ‰¾åˆ°é‚£äº›<strong>éœ€è¦è®­ç»ƒçš„å˜é‡èŠ‚ç‚¹</strong>ï¼Œç„¶åå¯¹å®ƒä»¬æ‰§è¡Œbackwardï¼Œæ±‚å‡ºç»“æœèŠ‚ç‚¹å¯¹è¿™äº›å˜é‡èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">forward_backward</span>(<span class="params">self</span>):</span><br><span class="line">       <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">       å‰å‘ä¼ æ’­è®¡ç®—ç»“æœèŠ‚ç‚¹çš„å€¼å¹¶åå‘ä¼ æ’­è®¡ç®—ç»“æœèŠ‚ç‚¹å¯¹å„ä¸ªèŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µ</span></span><br><span class="line"><span class="string">       &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">       <span class="comment"># æ¸…é™¤è®¡ç®—å›¾ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µ</span></span><br><span class="line">       self.graph.clear_jacobi()</span><br><span class="line"></span><br><span class="line">       <span class="comment"># å‰å‘ä¼ æ’­è®¡ç®—ç»“æœèŠ‚ç‚¹</span></span><br><span class="line">       self.target.forward()</span><br><span class="line"></span><br><span class="line">       <span class="comment"># åå‘ä¼ æ’­è®¡ç®—é›…å¯æ¯”çŸ©é˜µ</span></span><br><span class="line">       <span class="keyword">for</span> node <span class="keyword">in</span> self.graph.nodes:</span><br><span class="line">           <span class="keyword">if</span> <span class="built_in">isinstance</span>(node, Variable) <span class="keyword">and</span> node.trainable:</span><br><span class="line">               node.backward(self.target)</span><br><span class="line"></span><br><span class="line">               <span class="comment"># æˆ‘ä»¬ä¼šå¾—åˆ° ç›®æ ‡èŠ‚ç‚¹å¯¹å‚æ•°èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µï¼Œå°†å…¶è½¬ç½®ä»¥åå³ä¸ºç›®æ ‡èŠ‚ç‚¹å¯¹æŸå˜é‡èŠ‚ç‚¹çš„æ¢¯åº¦</span></span><br><span class="line">               <span class="comment"># ç›®æ ‡èŠ‚ç‚¹ï¼ˆå¦‚æœæ˜¯æ ‡é‡çš„è¯ï¼‰å¯¹èŠ‚ç‚¹å€¼çš„é›…å¯æ¯”æ˜¯ä¸€ä¸ªè¡Œå‘é‡ï¼Œå…¶è½¬ç½®æ˜¯æ¢¯åº¦ï¼ˆåˆ—å‘é‡ï¼‰</span></span><br><span class="line">               <span class="comment"># è¿™é‡Œå°†æ¢¯åº¦reshapeæˆä¸èŠ‚ç‚¹å€¼ç›¸åŒçš„å½¢çŠ¶ï¼Œå¥½å¯¹èŠ‚ç‚¹å€¼è¿›è¡Œæ›´æ–°ã€‚</span></span><br><span class="line">               <span class="comment"># node èŠ‚ç‚¹çš„ shape åº”å½“æ˜¯ä¸€ä¸ªçŸ©é˜µï¼ŒçŸ©é˜µä¸­å…ƒç´ ä¸º N ä¸ªã€‚</span></span><br><span class="line">               <span class="comment"># ä» ç›®æ ‡èŠ‚ç‚¹ å¯¹ node èŠ‚ç‚¹çš„é›…å¯æ¯”çŸ©é˜µç›¸å½“äºæ˜¯ Nç»´ -ã€‹ 1ç»´çš„å˜æ¢</span></span><br><span class="line">               <span class="comment"># æ•…è€Œ jacobi çš„ shape åº”è¯¥æ˜¯ 1 * N ç»´ï¼Œæ‰€ä»¥è¦å°†å…¶ReshapeæˆNodeèŠ‚ç‚¹å½¢çŠ¶ï¼Œæ‰æ–¹ä¾¿å¯¹NodeèŠ‚ç‚¹ä¸­çš„å„ä¸ªå€¼è¿›è¡Œæ¢¯åº¦çš„ç´¯åŠ ã€‚</span></span><br><span class="line">               gradient = node.jacobi.T.reshape(node.shape())</span><br><span class="line">               <span class="comment"># å¦‚æœè¯¥èŠ‚ç‚¹ä¸åœ¨acc_gradienté‡Œé¢ï¼Œå°±æ–°å»ºä¸€ä¸ªkey-value</span></span><br><span class="line">               <span class="keyword">if</span> node <span class="keyword">not</span> <span class="keyword">in</span> self.acc_gradient:</span><br><span class="line">                   self.acc_gradient[node] = gradient</span><br><span class="line">               <span class="keyword">else</span>: <span class="comment"># å¦‚æœè¯¥èŠ‚ç‚¹å·²ç»åœ¨acc_gradienté‡Œé¢ï¼Œå°±å°†æ¢¯åº¦è¿›è¡Œä¸€ä¸ªç´¯åŠ </span></span><br><span class="line">                   self.acc_gradient[node] += gradient</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h6 id="æ ¸å¿ƒå‡½æ•°2update">æ ¸å¿ƒå‡½æ•°2ï¼šupdate()ï¼š</h6>
<p>â€‹
è¯¥å‡½æ•°å°è£…äº†ä¼˜åŒ–è¿‡ç¨‹çš„ç¬¬ä¸‰æ­¥ï¼Œå‚æ•°æ›´æ–°ã€‚åœ¨Optimizerç±»ä¸­ï¼Œupdateæ–¹æ³•è°ƒç”¨_updateè¿™ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå…¶å…·ä½“çš„æ–¹æ³•ç”±å…·ä½“çš„å­ç±»è¦†å†™ã€‚æ‰§è¡Œå®Œå‚æ•°çš„æ›´æ–°ä»¥åï¼Œæˆ‘ä»¬éœ€è¦å°†å…ˆå‰ç´¯ç§¯çš„æ¢¯åº¦ç»™æ¸…é›¶ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">  <span class="keyword">def</span> <span class="title function_">update</span>(<span class="params">self, var_gradients=<span class="literal">None</span></span>):</span><br><span class="line"><span class="comment"># è¯¥éƒ¨åˆ†ä½œç”¨æš‚æ—¶è¿˜æœªè§£é‡Šï¼Œç”¨äºåˆ†å¸ƒå¼è®­ç»ƒï¼Œè¯¥å¤„æš‚æ—¶æ— ç”¨ï¼Œå¯ä»¥å¿½ç•¥</span></span><br><span class="line">      <span class="keyword">if</span> var_gradients <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">          self.apply_gradients(var_gradients)</span><br><span class="line"></span><br><span class="line">      <span class="comment"># æ‰§è¡Œæ›´æ–°</span></span><br><span class="line">      self._update()</span><br><span class="line"></span><br><span class="line">      <span class="comment"># æ¸…é™¤ç´¯åŠ æ¢¯åº¦</span></span><br><span class="line">      self.acc_gradient.clear()</span><br><span class="line">      self.acc_no = <span class="number">0</span></span><br><span class="line">  </span><br><span class="line"><span class="meta">  @abc.abstractmethod</span></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">_update</span>(<span class="params">self</span>):</span><br><span class="line">      <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">      æŠ½è±¡æ–¹æ³•ï¼Œæ‰§è¡Œå…·ä½“çš„æ¢¯åº¦æ›´æ–°ç®—æ³•ï¼Œç”±å­ç±»å®ç°</span></span><br><span class="line"><span class="string">      &quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<h5 id="part3å…¥å£å‡½æ•°">Part3ï¼šå…¥å£å‡½æ•°ï¼š</h5>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">one_step</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è®¡ç®—å¹¶ç´¯åŠ æ ·æœ¬çš„æ¢¯åº¦</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    self.forward_backward()</span><br><span class="line">    self.acc_no += <span class="number">1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="part4-å…¶ä»–è¾…åŠ©å‡½æ•°">Part4: å…¶ä»–è¾…åŠ©å‡½æ•°ï¼š</h5>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">apply_gradients</span>(<span class="params">self, node_gradients_dict, summarize=<span class="literal">False</span>, acc_no=<span class="literal">None</span></span>):</span><br><span class="line">	<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">	æ­¤å¤„æš‚æ—¶å…ˆä¸æè¿™ä¸ªå‡½æ•°ï¼Œç”¨äºåˆ†å¸ƒå¼è®­ç»ƒ</span></span><br><span class="line"><span class="string">	&quot;&quot;&quot;</span></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">get_gradient</span>(<span class="params">self, node</span>):</span><br><span class="line">       <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">       è¿”å›æ ·æœ¬çš„å¹³å‡æ¢¯åº¦</span></span><br><span class="line"><span class="string">       &quot;&quot;&quot;</span></span><br><span class="line">       <span class="keyword">assert</span> node <span class="keyword">in</span> self.acc_gradient</span><br><span class="line">       <span class="keyword">return</span> self.acc_gradient[node] / self.acc_no</span><br></pre></td></tr></table></figure>
<h4 id="å››bgdå’Œsgdå’Œmbgdçš„æ•°å­¦è¡¨è¾¾">å››ã€BGDå’ŒSGDå’ŒMBGDçš„æ•°å­¦è¡¨è¾¾ï¼š</h4>
<h5 id="bgd">1ã€BGD</h5>
<p>â€‹
è®¡ç®—æ‰€æœ‰æ ·æœ¬çš„å¹³å‡æŸå¤±å€¼å¯¹å‚æ•°çš„æ¢¯åº¦ï¼Œç”±äºæ±‚æ¢¯åº¦çš„è¿‡ç¨‹æ˜¯çº¿æ€§è¿ç®—ï¼Œæ‰€ä»¥<strong>æ‰€æœ‰æ ·æœ¬çš„å¹³å‡æŸå¤±å€¼å¯¹å‚æ•°çš„æ¢¯åº¦å°±ç­‰äºæ¯ä¸ªæ ·æœ¬çš„æŸå¤±å€¼å¯¹å‚æ•°çš„æ¢¯åº¦çš„å¹³å‡ï¼šå¦‚ä¸‹å…¬å¼æ‰€ç¤º</strong>
<span class="math display">\[
\grad(\frac{1}{N}\sum_{i=1}^Nloss{(w|x_i)} ) = \frac{1}{N}\sum_{i=1}^N
\grad(loss{(w|x_i)} )
\]</span> â€‹
æ‰€ä»¥ï¼Œåœ¨å®ç°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥æ­¤è®¡ç®—å‡ºè®­ç»ƒé›†ä¸­æ¯ä¸ªæ ·æœ¬çš„æŸå¤±å€¼å¯¹å‚æ•°çš„æ¢¯åº¦ï¼Œç„¶åå†æ±‚è¿™äº›æ¢¯åº¦çš„å¹³å‡å€¼ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨Optimizerçš„åŸºç±»ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®<code>self.acc_gradient</code>ç”¨äºç´¯åŠ æ¯ä¸ªæ ·æœ¬çš„æ¢¯åº¦ï¼Œç„¶åè®¾ç½®<code>self.acc_no</code>è®°å½•ç´¯åŠ çš„æ ·æœ¬çš„æ•°é‡ã€‚</p>
<h5 id="sgd">2ã€ SGD</h5>
<p>â€‹ æ¯è®¡ç®—ä¸€ä¸ªæ ·æœ¬çš„æŸå¤±å€¼ï¼Œç„¶åå°±è¿›è¡Œå‚æ•°çš„æ›´æ–°ã€‚</p>
<h5 id="mbgd">3ã€MBGD</h5>
<p>â€‹ ä»¥ä¸€éƒ¨åˆ†æ ·æœ¬çš„æŸå¤±ä¹‹è¿›è¡Œè®¡ç®—ã€‚</p>
<h5 id="æ€»ç»“">æ€»ç»“ï¼š</h5>
<p>â€‹
æ‰€ä»¥ï¼Œå…¶å®é’ˆå¯¹äºä»¥ä¸Šä¸‰ç§ï¼Œåœ¨ä»£ç å®ç°æ³›åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ‰¹å¤§å°æ¥è¿›è¡Œæ³›åŒ–ã€‚batch
size = 1å³ä¸ºSGDï¼Œåä¹‹æç«¯ä¸ºBDGã€‚åœ¨ä»£ç ä¸­ï¼Œå…¶å®å°±æ˜¯ è°ƒç”¨
<code>batch_size</code> æ¬¡
<code>one_step()</code>å‡½æ•°ï¼Œç„¶åç­‰åˆ°ä¸€ä¸ªBatchçš„æ ·æœ¬æ¢¯åº¦ç´¯åŠ ç»“æŸåï¼Œå†è°ƒç”¨<code>update</code>å‡½æ•°å³å¯ï¼Œ<code>update</code>å‡½æ•°ä¼šè°ƒç”¨å­ç±»çš„<code>_update</code>å‡½æ•°ï¼Œå­ç±»çš„<code>_update</code>å‡½æ•°ä¸­ï¼Œä¼šè°ƒç”¨<code>get_gradient</code>å‡½æ•°ï¼Œæ¥å¾—åˆ°æ ·æœ¬çš„å¹³å‡æ¢¯åº¦ç„¶åè¿›è¡Œå¤„ç†ã€‚</p>
<h4
id="äº”matrixslowä¼˜åŒ–å™¨mbgdå®ç°-å…¶ä»–æ¡†æ¶å®ç°æ–¹å¼">äº”ã€MatrixSlowä¼˜åŒ–å™¨MBGDå®ç°
&amp; å…¶ä»–æ¡†æ¶å®ç°æ–¹å¼ï¼š</h4>
<h5 id="ä¼˜åŒ–å™¨mbgdå®ç°">1ã€ ä¼˜åŒ–å™¨MBGDå®ç°</h5>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">GradientDescent</span>(<span class="title class_ inherited__">Optimizer</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    æ¢¯åº¦ä¸‹é™ä¼˜åŒ–å™¨</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, graph, target, learning_rate=<span class="number">0.01</span></span>):</span><br><span class="line"></span><br><span class="line">        Optimizer.__init__(self, graph, target)</span><br><span class="line">        self.learning_rate = learning_rate</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_update</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        æœ´ç´ æ¢¯åº¦ä¸‹é™æ³•</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> node <span class="keyword">in</span> self.graph.nodes:</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">isinstance</span>(node, Variable) <span class="keyword">and</span> node.trainable:</span><br><span class="line">                <span class="comment"># å–å¾—è¯¥èŠ‚ç‚¹åœ¨å½“å‰æ‰¹çš„å¹³å‡æ¢¯åº¦</span></span><br><span class="line">                gradient = self.get_gradient(node)</span><br><span class="line">                <span class="comment"># ç”¨æœ´ç´ æ¢¯åº¦ä¸‹é™æ³•æ›´æ–°å˜é‡èŠ‚ç‚¹çš„å€¼</span></span><br><span class="line">                node.set_value(node.value - self.learning_rate * gradient)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>â€‹
æŒ‰ç…§ä¸Šè¿°éå¸¸ç®€å•å¥½ç†è§£çš„ä»£ç å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•´ä¸€ä¸ªä¼˜åŒ–è®­ç»ƒä»£ç çš„è¿‡ç¨‹ç®€åŒ–å¦‚ä¸‹ï¼šå°±æ˜¯åƒä¸Šä¸€æ®µä¸­æè¿°çš„é‚£æ ·ï¼Œè°ƒç”¨
<code>batch_size</code> æ¬¡
<code>one_step()</code>å‡½æ•°ï¼Œç„¶åç­‰åˆ°ä¸€ä¸ªBatchçš„æ ·æœ¬æ¢¯åº¦ç´¯åŠ ç»“æŸåï¼Œå†è°ƒç”¨<code>update</code>å‡½æ•°å³å¯ï¼Œ<code>update</code>å‡½æ•°ä¼šè°ƒç”¨å­ç±»çš„<code>_update</code>å‡½æ•°ï¼Œå­ç±»çš„<code>_update</code>å‡½æ•°ä¸­ï¼Œä¼šè°ƒç”¨<code>get_gradient</code>å‡½æ•°ï¼Œæ¥å¾—åˆ°æ ·æœ¬çš„å¹³å‡æ¢¯åº¦ç„¶åè¿›è¡Œå¤„ç†ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">optimizer = ms.optimizer.Adam(ms.default_graph, loss, learning_rate)</span><br><span class="line"></span><br><span class="line">mini_batch_size = <span class="number">8</span></span><br><span class="line">cur_batch_size = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®­ç»ƒæ‰§è¡Œ50ä¸ªepoch</span></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">50</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># éå†è®­ç»ƒé›†ä¸­çš„æ ·æœ¬</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(train_set)):</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å–ç¬¬iä¸ªæ ·æœ¬çš„å‰4åˆ—ï¼ˆé™¤æœ€åä¸€åˆ—çš„æ‰€æœ‰åˆ—ï¼‰ï¼Œæ„é€ 3x1çŸ©é˜µå¯¹è±¡</span></span><br><span class="line">        features = np.mat(train_set[i, :-<span class="number">1</span>]).T</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å–ç¬¬iä¸ªæ ·æœ¬çš„æœ€åä¸€åˆ—ï¼Œæ˜¯è¯¥æ ·æœ¬çš„æ€§åˆ«æ ‡ç­¾ï¼ˆ1ç”·ï¼Œ-1å¥³ï¼‰ï¼Œæ„é€ 1x1çŸ©é˜µå¯¹è±¡</span></span><br><span class="line">        l = np.mat(train_set[i, -<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å°†ç‰¹å¾èµ‹ç»™xèŠ‚ç‚¹ï¼Œå°†æ ‡ç­¾èµ‹ç»™labelèŠ‚ç‚¹</span></span><br><span class="line">        x.set_value(features)</span><br><span class="line">        label.set_value(l)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ä¼˜åŒ–å™¨æ‰§è¡Œä¸€æ¬¡å‰å‘ä¼ æ’­å’Œä¸€æ¬¡åå‘ä¼ æ’­</span></span><br><span class="line">        optimizer.one_step()</span><br><span class="line">        cur_batch_size += <span class="number">1</span></span><br><span class="line">        <span class="comment"># å½“ç§¯ç´¯åˆ°ä¸€ä¸ªmini batchçš„æ—¶å€™ï¼Œå®Œæˆä¸€æ¬¡å‚æ•°æ›´æ–°</span></span><br><span class="line">        <span class="keyword">if</span> (cur_batch_size == mini_batch_size):</span><br><span class="line">            optimizer.update()</span><br><span class="line">            cur_batch_size = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ¯ä¸ªepochç»“æŸåè¯„ä»·æ¨¡å‹çš„æ­£ç¡®ç‡</span></span><br><span class="line">    pred = []</span><br><span class="line"></span><br><span class="line">    <span class="comment"># éå†è®­ç»ƒé›†ï¼Œè®¡ç®—å½“å‰æ¨¡å‹å¯¹æ¯ä¸ªæ ·æœ¬çš„é¢„æµ‹å€¼</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(train_set)):</span><br><span class="line"></span><br><span class="line">        features = np.mat(train_set[i, :-<span class="number">1</span>]).T</span><br><span class="line">        x.set_value(features)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åœ¨æ¨¡å‹çš„predictèŠ‚ç‚¹ä¸Šæ‰§è¡Œå‰å‘ä¼ æ’­</span></span><br><span class="line">        predict.forward()</span><br><span class="line">        pred.append(predict.value[<span class="number">0</span>, <span class="number">0</span>])  <span class="comment"># æ¨¡å‹çš„é¢„æµ‹ç»“æœï¼š1ç”·ï¼Œ0å¥³</span></span><br><span class="line"></span><br><span class="line">    pred = np.array(pred) * <span class="number">2</span> - <span class="number">1</span>  <span class="comment"># å°†1/0ç»“æœè½¬åŒ–æˆ1/-1ç»“æœï¼Œå¥½ä¸è®­ç»ƒæ ‡ç­¾çš„çº¦å®šä¸€è‡´</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ¤æ–­é¢„æµ‹ç»“æœä¸æ ·æœ¬æ ‡ç­¾ç›¸åŒçš„æ•°é‡ä¸è®­ç»ƒé›†æ€»æ•°é‡ä¹‹æ¯”ï¼Œå³æ¨¡å‹é¢„æµ‹çš„æ­£ç¡®ç‡</span></span><br><span class="line">    accuracy = (train_set[:, -<span class="number">1</span>] == pred).astype(np.<span class="built_in">int</span>).<span class="built_in">sum</span>() / <span class="built_in">len</span>(train_set)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ‰“å°å½“å‰epochæ•°å’Œæ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šçš„æ­£ç¡®ç‡</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;epoch: &#123;:d&#125;, accuracy: &#123;:.3f&#125;&quot;</span>.<span class="built_in">format</span>(epoch + <span class="number">1</span>, accuracy))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="å…¶ä»–æ¡†æ¶å¯¹äºminibatchçš„å®ç°æ–¹å¼">2ã€
å…¶ä»–æ¡†æ¶å¯¹äºMiniBatchçš„å®ç°æ–¹å¼ï¼š</h5>
<p>â€‹
å…¶å®ï¼Œä¸Šè¿°MatrixSlowå®ç°MiniBatchæ¢¯åº¦è®¡ç®—çš„æ–¹å¼ï¼Œå¹¶ä¸æ˜¯å·¥ä¸šä¸Šæœ€ä½³çš„ã€‚ä½†æ˜¯æˆ‘è®¤ä¸ºæ˜¯åœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­æ¯”è¾ƒå¥½çš„æ–¹å¼ã€‚å…¶æŠŠ
MiniBatchæ ·æœ¬å’Œè®¡ç®—å›¾å®Œå…¨åˆ†éš”å¼€ï¼Œæ¦‚å¿µå¾ˆæ¸…æ™°ã€‚<strong>é‚£ä¹ˆåœ¨ä¸€äº›å·¥ä¸šçº§çš„æ¡†æ¶ä¸­ï¼Œä¸€èˆ¬æ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿ</strong></p>
<p>â€‹
åœ¨å…¶ä»–ä¸€äº›æ¡†æ¶ä¸­ï¼ˆæ¯”å¦‚<strong>Pytorch</strong>ï¼‰ï¼Œå¯èƒ½ä¼šç”¨ä¸€ä¸ªå˜é‡èŠ‚ç‚¹æ¥å­˜å‚¨æ•´æ‰¹æ ·æœ¬ï¼Œ<strong>æ¯”å¦‚æ ·æœ¬ä¸ºnç»´å‘é‡ï¼Œæ‰¹å¤§å°ç»´mï¼Œé‚£ä¹ˆå°±ç”¨ä¸€ä¸ª<span
class="math inline">\(m \times
n\)</span>çš„çŸ©é˜µæ¥å­˜å‚¨ã€‚</strong>åç»­è®¡ç®—èŠ‚ç‚¹çš„è®¡ç®—éƒ½æ˜¯å¯¹å­˜å‚¨æ•°æ®çŸ©é˜µçš„æ¯ä¸€è¡Œè¿›è¡Œçš„ï¼Œ<strong>ç„¶åè¿™ä¸€æ•´æ‰¹çš„æ•°æ®éƒ½ä¼šåœ¨è®¡ç®—å›¾é‡Œåƒå‰é¢æµåŠ¨ï¼Œç›´åˆ°æŸå¤±å€¼èŠ‚ç‚¹</strong></p>
<p>â€‹ æ€»ç»“æ¥è¯´ï¼Œå°±æ˜¯ä»¥ä¸‹å‡ æ­¥ï¼š</p>
<ul>
<li>æ·»åŠ ä¸€ä¸ªç»´åº¦ï¼Œç”¨ä¸€ä¸ªå˜é‡èŠ‚ç‚¹å­˜å‚¨æ•´ä¸ªminibatchçš„æ ·æœ¬</li>
<li>å‰å‘ä¼ æ’­å¯¹æ•´ä¸ªbatchçš„æ ·æœ¬è®¡ç®—</li>
<li>ä»¥å¹³å‡æŸå¤±å€¼èŠ‚ç‚¹ä¸ºç›®æ ‡èŠ‚ç‚¹</li>
<li>ä»¥å¹³å‡æŸå¤±ä¹‹èŠ‚ç‚¹å¯¹å‚æ•°çš„æ¢¯åº¦æ›´æ–°å‚æ•°ã€‚</li>
</ul>
<p>â€‹
è¿™æ ·å­çš„å¥½å¤„åœ¨äºä»€ä¹ˆå‘¢ï¼Ÿ<strong>è¿™ç§æ–¹æ³•æ‰€è¿›è¡Œè®¡ç®—çš„æ€§èƒ½æ›´å¥½ï¼Œå¯ä»¥åœ¨é«˜æ•ˆç‡çš„åˆ©ç”¨GPUçš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ”¯æŒé«˜é˜¶çš„å¼ é‡ã€‚</strong></p>
<p>â€‹
ä»¥ä¸‹ä»£ç æ˜¯ä¹¦ä¸­ï¼Œå¯¹äºå…ˆå‰çš„AdaLineçš„å¯»é˜¿è”ä¾‹å­ï¼Œå¦‚æœä½¿ç”¨å·¥ä¸šæ¡†æ¶çš„æ–¹æ³•ï¼Œåº”å½“æ˜¯å¦‚ä½•è®­ç»ƒçš„ï¼Œç»™å‡ºäº†ä¸€ä¸ªç¤ºä¾‹ï¼ˆæ²¡æœ‰è¿›è¡Œå°è£…ï¼‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path.append(<span class="string">&#x27;../..&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matrixslow <span class="keyword">as</span> ms</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„é€ è®­ç»ƒé›†</span></span><br><span class="line">male_heights = np.random.normal(<span class="number">171</span>, <span class="number">6</span>, <span class="number">500</span>)</span><br><span class="line">female_heights = np.random.normal(<span class="number">158</span>, <span class="number">5</span>, <span class="number">500</span>)</span><br><span class="line"></span><br><span class="line">male_weights = np.random.normal(<span class="number">70</span>, <span class="number">10</span>, <span class="number">500</span>)</span><br><span class="line">female_weights = np.random.normal(<span class="number">57</span>, <span class="number">8</span>, <span class="number">500</span>)</span><br><span class="line"></span><br><span class="line">male_bfrs = np.random.normal(<span class="number">16</span>, <span class="number">2</span>, <span class="number">500</span>)</span><br><span class="line">female_bfrs = np.random.normal(<span class="number">22</span>, <span class="number">2</span>, <span class="number">500</span>)</span><br><span class="line"></span><br><span class="line">male_labels = [<span class="number">1</span>] * <span class="number">500</span></span><br><span class="line">female_labels = [-<span class="number">1</span>] * <span class="number">500</span></span><br><span class="line"></span><br><span class="line">train_set = np.array([np.concatenate((male_heights, female_heights)),</span><br><span class="line">                      np.concatenate((male_weights, female_weights)),</span><br><span class="line">                      np.concatenate((male_bfrs, female_bfrs)),</span><br><span class="line">                      np.concatenate((male_labels, female_labels))]).T</span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœºæ‰“ä¹±æ ·æœ¬é¡ºåº</span></span><br><span class="line">np.random.shuffle(train_set)</span><br><span class="line"><span class="comment"># æ‰¹å¤§å°</span></span><br><span class="line">batch_size = <span class="number">10</span></span><br><span class="line"><span class="comment"># batch_size x 3çŸ©é˜µï¼Œæ¯è¡Œä¿å­˜ä¸€ä¸ªæ ·æœ¬ï¼Œæ•´ä¸ªèŠ‚ç‚¹ä¿å­˜ä¸€ä¸ªmini batchçš„æ ·æœ¬</span></span><br><span class="line">X = ms.core.Variable(dim=(batch_size, <span class="number">3</span>), init=<span class="literal">False</span>, trainable=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># ä¿å­˜ä¸€ä¸ªmini batchçš„æ ·æœ¬çš„ç±»åˆ«æ ‡ç­¾</span></span><br><span class="line">label = ms.core.Variable(dim=(batch_size, <span class="number">1</span>), init=<span class="literal">False</span>, trainable=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># æƒå€¼å‘é‡ï¼Œ3x1çŸ©é˜µ</span></span><br><span class="line">w = ms.core.Variable(dim=(<span class="number">3</span>, <span class="number">1</span>), init=<span class="literal">True</span>, trainable=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># é˜ˆå€¼</span></span><br><span class="line">b = ms.core.Variable(dim=(<span class="number">1</span>, <span class="number">1</span>), init=<span class="literal">True</span>, trainable=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># å…¨1å‘é‡ï¼Œç»´æ•°æ˜¯batch_sizeï¼Œä¸å¯è®­ç»ƒ</span></span><br><span class="line">ones = ms.core.Variable(dim=(batch_size, <span class="number">1</span>), init=<span class="literal">False</span>, trainable=<span class="literal">False</span>)</span><br><span class="line">ones.set_value(np.mat(np.ones(batch_size)).T)</span><br><span class="line"><span class="comment"># ç”¨é˜ˆå€¼ï¼ˆæ ‡é‡ï¼‰ä¹˜ä»¥å…¨1å‘é‡</span></span><br><span class="line">bias = ms.ops.ScalarMultiply(b, ones)</span><br><span class="line"><span class="comment"># å¯¹ä¸€ä¸ªmini batchçš„æ ·æœ¬è®¡ç®—è¾“å‡º</span></span><br><span class="line">output = ms.ops.Add(ms.ops.MatMul(X, w), bias)</span><br><span class="line">predict = ms.ops.Step(output)</span><br><span class="line"><span class="comment"># ä¸€ä¸ªmini batchçš„æ ·æœ¬çš„æŸå¤±å‡½æ•°</span></span><br><span class="line">loss = ms.ops.loss.PerceptionLoss(ms.ops.Multiply(label, output))</span><br><span class="line"><span class="comment"># ä¸€ä¸ªmini batchçš„å¹³å‡æŸå¤±</span></span><br><span class="line">B =  ms.core.Variable(dim=(<span class="number">1</span>, batch_size), init=<span class="literal">False</span>, trainable=<span class="literal">False</span>)</span><br><span class="line">B.set_value(<span class="number">1</span> / batch_size * np.mat(np.ones(batch_size)))</span><br><span class="line">mean_loss = ms.ops.MatMul(B, loss)</span><br><span class="line"><span class="comment"># å­¦ä¹ ç‡</span></span><br><span class="line">learning_rate = <span class="number">0.0001</span></span><br><span class="line"><span class="comment"># è®­ç»ƒï¼Œè¿™ä¸ªæ­¥éª¤ä¹‹åæ²¡å•¥åŒºåˆ«</span></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">50</span>):</span><br><span class="line">    <span class="comment"># éå†è®­ç»ƒé›†ä¸­çš„æ ·æœ¬</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> np.arange(<span class="number">0</span>, <span class="built_in">len</span>(train_set), batch_size):</span><br><span class="line">        <span class="comment"># å–ä¸€ä¸ªmini batchçš„æ ·æœ¬çš„ç‰¹å¾</span></span><br><span class="line">        features = np.mat(train_set[i:i + batch_size, :-<span class="number">1</span>])</span><br><span class="line">        <span class="comment"># å–ä¸€ä¸ªmini batchçš„æ ·æœ¬çš„æ ‡ç­¾</span></span><br><span class="line">        l = np.mat(train_set[i:i + batch_size, -<span class="number">1</span>]).T</span><br><span class="line">        <span class="comment"># å°†ç‰¹å¾èµ‹ç»™XèŠ‚ç‚¹ï¼Œå°†æ ‡ç­¾èµ‹ç»™labelèŠ‚ç‚¹</span></span><br><span class="line">        X.set_value(features)</span><br><span class="line">        label.set_value(l)</span><br><span class="line">        <span class="comment"># åœ¨å¹³å‡æŸå¤±èŠ‚ç‚¹ä¸Šæ‰§è¡Œå‰å‘ä¼ æ’­</span></span><br><span class="line">        mean_loss.forward()</span><br><span class="line">        <span class="comment"># åœ¨å‚æ•°èŠ‚ç‚¹ä¸Šæ‰§è¡Œåå‘ä¼ æ’­</span></span><br><span class="line">        w.backward(mean_loss)</span><br><span class="line">        b.backward(mean_loss)</span><br><span class="line">        <span class="comment"># æ›´æ–°å‚æ•°</span></span><br><span class="line">        w.set_value(w.value - learning_rate * w.jacobi.T.reshape(w.shape()))</span><br><span class="line">        b.set_value(b.value - learning_rate * b.jacobi.T.reshape(b.shape()))</span><br><span class="line">        ms.default_graph.clear_jacobi()</span><br><span class="line">    <span class="comment"># æ¯ä¸ªepochç»“æŸåè¯„ä»·æ¨¡å‹çš„æ­£ç¡®ç‡</span></span><br><span class="line">    pred = []</span><br><span class="line">    <span class="comment"># éå†è®­ç»ƒé›†ï¼Œè®¡ç®—å½“å‰æ¨¡å‹å¯¹æ¯ä¸ªæ ·æœ¬çš„é¢„æµ‹å€¼</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> np.arange(<span class="number">0</span>, <span class="built_in">len</span>(train_set), batch_size):</span><br><span class="line">        features = np.mat(train_set[i:i + batch_size, :-<span class="number">1</span>])</span><br><span class="line">        X.set_value(features)</span><br><span class="line">        <span class="comment"># åœ¨æ¨¡å‹çš„predictèŠ‚ç‚¹ä¸Šæ‰§è¡Œå‰å‘ä¼ æ’­</span></span><br><span class="line">        predict.forward()</span><br><span class="line">        <span class="comment"># å½“å‰æ¨¡å‹å¯¹ä¸€ä¸ªmini batchçš„æ ·æœ¬çš„é¢„æµ‹ç»“æœ</span></span><br><span class="line">        pred.extend(predict.value.A.ravel())</span><br><span class="line">    pred = np.array(pred) * <span class="number">2</span> - <span class="number">1</span></span><br><span class="line">    accuracy = (train_set[:, -<span class="number">1</span>] == pred).astype(np.<span class="built_in">int</span>).<span class="built_in">sum</span>() / <span class="built_in">len</span>(train_set)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;epoch: &#123;:d&#125;, accuracy: &#123;:.3f&#125;&quot;</span>.<span class="built_in">format</span>(epoch + <span class="number">1</span>, accuracy))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Basicç³»åˆ—ç¬”è®°</category>
        <category>Pythonæ­å»ºç®€æ˜“æ¡†æ¶ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Framework</tag>
      </tags>
  </entry>
  <entry>
    <title>Transformerç³»åˆ—ç¬”è®°2â€”â€”åŸå§‹Transformeræ¶æ„ä¸Seq2Seqé—®é¢˜</title>
    <url>/2021/12/07/84769e08d06a/</url>
    <content><![CDATA[<h3 id="ä¸€ç›¸å…³èƒŒæ™¯ä»‹ç»">ä¸€ã€ç›¸å…³èƒŒæ™¯ä»‹ç»</h3>
<p>â€‹
Transformeræ¶æ„æœ€å¹¿æ³›ç”¨åœ¨Seq2Seqé—®é¢˜ä¸Šï¼Œä¹Ÿå°±æ˜¯Sequence-to-Sequenceã€‚åŒºåˆ«äºGANæ‰€å¯¹åº”çš„Pix2Pixçš„é—®é¢˜ï¼ŒSeq2Seqçš„é—®é¢˜ä¹Ÿä¼šæœ‰éå¸¸å¤šçš„åº”ç”¨å’Œå˜å¼ï¼Œå…¶åº”ç”¨åœºæ™¯ä¹Ÿæ˜¯éå¸¸çš„å¹¿ã€‚</p>
<p>â€‹
Seq2Seqé—®é¢˜æ˜¯æŒ‡è¾“å…¥ä¸€ä¸ªåºåˆ—ï¼Œè¾“å‡ºä¸€ä¸ªåºåˆ—ï¼ŒåŒæ—¶è¾“å‡ºåºåˆ—çš„é•¿åº¦ç”±è®­ç»ƒå¥½çš„æ¨¡å‹è¿›è¡Œå†³å®šã€‚æ¯”è¾ƒç»å…¸çš„é—®é¢˜å°±æ˜¯è¯­éŸ³è¯†åˆ«ã€æœºå™¨ç¿»è¯‘ã€è¯­éŸ³ç¿»è¯‘ç­‰é¢†åŸŸã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112932803.png" /></p>
<p>â€‹
åŒæ—¶ï¼ŒSeq2Seqä¹Ÿå¯ä»¥ç”¨äºChatbotèŠå¤©æœºå™¨äººï¼Œæ¯”å¦‚è¯´å¦‚ä¸‹æ‰€ç¤ºï¼šæˆ‘ä»¬å¯ä»¥å°†Person1å’ŒPerson2çš„ä¸€ç»„å¯¹è¯è§†ä¸ºä¸€ä¸ªinputå’Œä¸€ä¸ªå¯¹åº”çš„responseï¼Œä¸¤è€…éƒ½æ˜¯åºåˆ—ã€‚æˆ–è€…ä¸€äº›å…¶ä»–çš„Question&amp;Answeringé—®é¢˜éƒ½å¯ä»¥å¹¿æ³›çš„åº”ç”¨Seq2Seqçš„æ¨¡å‹è§£å†³æ€æƒ³ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112939154.png" /></p>
<p>â€‹ å…·ä½“çš„ä¸€äº›ç›¸å…³è®ºæ–‡å¯ä»¥å‚ç…§ä¸‹å›¾æ‰€ç¤ºçš„ç½‘å€è¿›ä¸€æ­¥äº†è§£ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112946229.png" /></p>
<p>â€‹ åŒæ—¶ï¼Œè¿˜æœ‰æ›´å¤šçš„å¯ä»¥åº”ç”¨Seq2Seqçš„ä¾‹å­ï¼Œæ¯”å¦‚è¯´å¯¹äºä¸€ä¸ªSyntactic
Parsingé—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯­æ³•è§£æï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å…¶è§†ä¸ºSeq2Seqçš„å½¢å¼ï¼Œæ¥å¯¹å…¶è¿›è¡Œæ€è€ƒã€‚è¾“å…¥æ˜¯ä¸€å¥è¯ï¼Œæ¯«æ— ç–‘é—®æ˜¯ä¸€ä¸ªSeqåºåˆ—ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬æ‰€éœ€è¦çš„è¾“å‡ºç»“æœçœ‹ä¸Šå»åƒæ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„ã€deep
learningç»„æˆåè¯çŸ­è¯­ï¼Œvery powerful ç»„æˆå½¢å®¹è¯çŸ­è¯­ï¼Œis å’Œ very
powerfulåˆç»„æˆåŠ¨è¯çŸ­è¯­ï¼Œæœ€ådeep learningå’Œ is very
powerfulç»„æˆä¸€ä¸ªå¥å­ã€‘ï¼Œä½†å…¶å®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥å°†å›¾æœ€ä¸Šæ–¹çš„è¿™ä¸ªå¥å­ä½œä¸ºè¾“å‡ºç»“æœï¼Œè¿™æ ·å°±å°†ä¸€ä¸ªç±»ä¼¼å›¾ç»“æ„çš„å†…å®¹è½¬æ¢æˆäº†Seqçš„å½¢å¼ï¼ŒåŒæ—¶ä¹ŸåŒ…å«äº†æ‰€æœ‰æˆ‘ä»¬éœ€è¦çš„ç»“æœä¿¡æ¯ï¼Œç„¶åç”¨Seq2Seqçš„æ€æƒ³å»è®­ç»ƒæ¨¡å‹å³å¯ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115112954818.png" /></p>
<p>â€‹
å†æ¯”å¦‚ï¼ŒSeq2Seqåº”ç”¨äºå›¾åƒé¢†åŸŸçš„ç›®æ ‡æ£€æµ‹ï¼Œæ„Ÿå…´è¶£å¯ä»¥æŸ¥çœ‹ä»¥ä¸‹è¿™ç¯‡è®ºæ–‡ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113003795.png" /></p>
<h3
id="äºŒseq2seq2ç»“å±€æ–¹æ¡ˆorigin-transformer">äºŒã€Seq2Seq2ç»“å±€æ–¹æ¡ˆâ€”â€”Origin
Transformer</h3>
<p>â€‹
å¯¹äºä¸€èˆ¬çš„Seq2Seqé—®é¢˜ï¼Œç¬¼ç»Ÿè€Œè¨€ï¼Œæˆ‘ä»¬ä¸€èˆ¬å°±æ˜¯å°†è¾“å…¥åºåˆ—ç»è¿‡ä¸€ä¸ªEncoderç„¶åå†é€šè¿‡ä¸€ä¸ªDecoderå°±å¾—åˆ°æˆ‘ä»¬çš„è¾“å‡ºåºåˆ—ã€‚ä½†æ˜¯è¿™ä¸ªEncoderå’ŒDecoderå†…éƒ¨çš„ç»“æ„å°±å¤§æœ‰è®²ç©¶ï¼Œæœ€ç»å…¸çš„æ¶æ„å°±æ˜¯Transformerã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113028194.png" /></p>
<h4 id="encoder">1ã€Encoder</h4>
<p>â€‹
é¦–å…ˆæˆ‘ä»¬å…³æ³¨Transformerçš„Encoderéƒ¨åˆ†ã€‚ä¸‹é¢æ˜¯ä»è¾“å…¥è¾“å‡ºçš„ç»“æœæ¥çœ‹ï¼ŒEncoderçš„è¾“å…¥æ˜¯ä¸€ä¸ªåºåˆ—ï¼Œè¾“å‡ºæ˜¯ä¸€ä¸ªç¼–ç è¿‡åçš„åºåˆ—ã€‚ï¼ˆå…¶å®åªä»è¾“å…¥è¾“å‡ºæ¥çœ‹ï¼ŒåƒRNNã€CNNéƒ½å¯ä»¥åšåˆ°è¾“å…¥ä¸€ä¸ªåºåˆ—ï¼Œè¾“å‡ºä¸€ä¸ªåºåˆ—ï¼Œä½†æ˜¯æ­¤ç¯‡è®²çš„æ˜¯Transformerï¼‰</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113035456.png" /></p>
<p>â€‹
Transfomerä¸­çš„Encoderç°åœ¨ä¸€èˆ¬éƒ½ç”±è¿™æ ·çš„æ¶æ„ç»„æˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç”±éå¸¸å¤šçš„Blockç»„æˆï¼Œæ¯ä¸€ä¸ªBlockå¹¶ä¸æ˜¯æŒ‡ä¸€å±‚ç½‘ç»œï¼Œå¯èƒ½æ˜¯æœ‰è®¸å¤šæ›¾ç½‘ç»œç»„æˆã€‚é‚£ä¹ˆè¾“å…¥ç»è¿‡è®¸å¤šä¸ªBlockçš„å¤„ç†ï¼Œç„¶åè¾“å‡ºã€‚é‚£ä¹ˆåœ¨Transformerä¸­ï¼Œæ¯ä¸€ä¸ªBlockå†…éƒ¨çš„æ¶æ„å¦‚å³ä¾§æ‰€ç¤ºï¼šè¾“å…¥ä¸€æ’å‘é‡ï¼Œå…ˆç»è¿‡Self-attentionçš„æœºåˆ¶ï¼Œè¾“å‡ºä¸€æ’å‘é‡ï¼Œç„¶åè¿™ä¸€æ’å‘é‡å†ç»è¿‡å…¨è¿æ¥å±‚ï¼Œè¾“å‡ºä¸€æ’å‘é‡ï¼Œè¿™ä¸€æ’å¸¦çº¢è‰²æ¡†çš„å‘é‡å°±æ˜¯Blockçš„è¾“å‡ºã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113045808.png" /></p>
<p>â€‹
ä½†å®é™…ä¸Šï¼Œåœ¨åŸæ¥çš„Transformerä¸­ï¼ŒBlockå†…çš„ç»“æ„ç¨å¾®æ›´å¤æ‚ä¸€äº›ï¼Œå…¶è¿˜å¢åŠ äº†ä¸€ä¸ªresidualçš„è¿‡ç¨‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>â€‹
è¾“å…¥çš„æŸä¸ªå‘é‡bç»è¿‡Self-attentionä»¥åï¼Œå¾—åˆ°å‘é‡a,æ­¤å‘é‡aè¿˜è¦ä¸å‘é‡bç›¸åŠ ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„å‘é‡a+bï¼Œç„¶åå†åšLayer
Norm,å¾—åˆ°ä¸€ä¸ªæ·±è“è‰²çš„å‘é‡cã€‚ï¼ˆå·¦ä¸Šè§’çš„é‚£ä¸ªæ¡†æ¡†ä»£è¡¨çš„å°±æ˜¯ï¼Œæ¥ä¸‹å»æ¥å³ä¾§çš„è¿‡ç¨‹ï¼‰</p>
<p>â€‹
ç„¶åè¿™ä¸ªNormè¾“å‡ºçš„æ·±è“è‰²çš„å‘é‡cï¼Œç»è¿‡FCå±‚ï¼Œå¾—åˆ°æ–°çš„å‘é‡dï¼Œæ­¤å¤„è¿˜æœ‰ä¸€ä¸ªresidualçš„æ¶æ„ï¼Œcå’Œdç›¸åŠ ï¼Œå¾—åˆ°æ–°çš„å‘é‡eï¼Œç„¶åeå†åšä¸€æ¬¡Layer
Normæ‰ä¼šå¾—åˆ°æœ€ç»ˆè¿™ä¸ªBlockè¾“å‡ºçš„ç»“æœå‘é‡ã€‚</p>
<p>ï¼ˆLayerNormæœ¬èº«çš„è¿‡ç¨‹å¦‚å›¾ä¸­å¤®æ‰€ç¤ºï¼Œå…ˆè®¡ç®—å‘é‡æ•°æ®çš„å‡å€¼å’Œæ ‡å‡†å·®ï¼Œç„¶åä¾æ®å…¬å¼xiâ€™
= (xi-m)/Ïƒå³å¯å®Œæˆå½’ä¸€åŒ–ã€‚ï¼‰</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113058827.png" /></p>
<p>â€‹
è®²å®Œæ¯ä¸€ä¸ªBlockå†…å®Œæˆçš„äº‹æƒ…ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹Transfomerä¸­ç»™å‡ºçš„è¿™ä¸ªå®Œæ•´çš„å¸¦ç»†èŠ‚çš„æ¶æ„ç¤ºæ„å›¾ï¼Œå…¶å®ä¸¤è€…ä¸­æœ‰éƒ¨åˆ†è¿‡ç¨‹æ˜¯é‡å çš„ï¼Œåªæ˜¯è¡¨ç¤ºå½¢å¼ä¸ä¸€æ ·ã€‚</p>
<p>â€‹
é¦–å…ˆå°†è¾“å…¥ç»è¿‡åµŒå…¥å±‚ï¼Œå®Œæˆç¼–ç ã€‚å¦‚æœå¯¹åµŒå…¥å±‚æ²¡æœ‰å°è±¡ï¼Œå¯ä»¥æŸ¥çœ‹å¦‚ä¸‹çš„æ–‡ç« ã€‚ç„¶åé€šè¿‡Positional
Encodingå‘è¾“å…¥ä¸­å¢åŠ åºåˆ—ä¸åŒåœ°æ–¹çš„ä½ç½®ä¿¡æ¯ã€‚ç„¶åç»è¿‡å¤šæ¬¡ç»“æ„çš„æ ¸å¿ƒéƒ¨åˆ†Nxã€‚è¿™ä¸ªNxå…¶å®å°±æ˜¯æˆ‘ä»¬åˆšæ‰æåˆ°çš„ä¸€ä¸ªBlockã€‚å…¶ä¸­ï¼ŒMulti-Head
Attentionå°±æ˜¯Self-Attentionçš„ä¸€ç§æ‰©å±•çš„æ¶æ„ï¼Œç„¶åAdd&amp;Normå°±æ˜¯ä¸Šè¿°çš„Residual
+ LayerNormçš„è¿‡ç¨‹ã€‚Feed
Forwardå°±æ˜¯ä¸Šå›¾ä¸­é€šè¿‡FCå±‚çš„è¿‡ç¨‹ã€‚æ‰€ä»¥è¿™å¼ å›¾ä¸­Nxå†…éƒ¨çš„è¿™ä¸ªæ¡†æ¡†å°±æ˜¯ä¸€ä¸ªBlockçš„è¿‡ç¨‹ï¼Œç„¶åæ•´ä¸ªTransformer
Encoderå°±ç”±è®¸å¤šä¸ªè¿™æ ·çš„Blockç»„æˆã€‚ã€åƒå…ˆå‰æ‰€è®²çš„ã€‘</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113109977.png" /></p>
<p>â€‹ å…¶å®Transformer
Encoderçš„æ¶æ„ä¹Ÿæ˜¯å¯ä»¥çµæ´»æ”¹å˜çš„ï¼Œæ­¤å¤„åªæ˜¯è®²äº†æœ€åˆæå‡ºçš„Transformeræ—¶å€™æ–‡ç« ä¸­Encoderçš„æ¶æ„ã€‚</p>
<h4 id="decoder">2ã€Decoder</h4>
<p>â€‹
ç„¶åçš„è¯æˆ‘ä»¬å…³æ³¨Transformerçš„Decoderéƒ¨åˆ†ã€‚Decoderåˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯Autoregressiveï¼ˆATï¼‰çš„Decoder,è¿˜æœ‰ä¸€ç§æ˜¯Non-Autoregressiveï¼ˆNATï¼‰çš„Decoderã€‚é¦–å…ˆæ˜¯Autoregressiveçš„Decoderçš„ä»‹ç»ï¼š</p>
<p>â€‹
Decoderçš„è¾“å…¥ï¼Œæœ‰ä¸¤ä¸ªå†…å®¹ï¼Œä¸€ä¸ªæ˜¯Encoderè¾“å‡ºçš„åºåˆ—ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯STARTæ ‡è¯†ç¬¦å·æ‰€å¯¹åº”çš„One-hotç¼–ç ï¼Œè¿™ä¸¤æ ·ä¸œè¥¿ç»è¿‡Decoderåï¼Œè¾“å‡ºä¸€ä¸ªå„ç§å­—çš„æ¦‚ç‡åˆ†å¸ƒï¼Œå…¶ä¸­æ¦‚ç‡æœ€å¤§çš„é‚£ä¸ªå­—å°±ä¼šè¢«ä½œä¸ºæœ€åçš„è¾“å‡ºå­—ç¬¦ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113200035.png" /></p>
<p>â€‹ ç„¶åæˆ‘ä»¬å°†START å’Œ æœº
ç»„æˆçš„one-hotå‘é‡çš„åºåˆ—è¾“å…¥ï¼Œå†ç»è¿‡Decoderï¼Œå¾—åˆ°ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒï¼Œç„¶åé€‰å‡ºæ¦‚ç‡åˆ†å¸ƒä¸­æœ€é«˜çš„é‚£ä¸ªå­—â€œæœºâ€ã€‚ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°å®Œæˆæ‰€æœ‰çš„è¾“å‡ºã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113209026.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113211451.png" /></p>
<p>â€‹ åœ¨æ­¤å¤„å…¶å®å­˜åœ¨ä¸¤ä¸ªé—®é¢˜
ï¼Œä¸€ä¸ªé—®é¢˜æ˜¯æŒ‰ç…§ä¸Šè¿°çš„è¿‡ç¨‹ï¼Œå…¶å®Decoderåé¢æ¯ä¸€æ­¥çš„è¾“å…¥éƒ½æ¥è‡ªäºè‡ªå·±å‰ä¸€æ­¥çš„è¾“å‡ºï¼Œå°±æ¯”å¦‚è¯´ï¼Œä¸­é—´æŸä¸€æ­¥è¾“å…¥æ˜¯â€œæœºå™¨â€ï¼Œè¾“å‡ºäº†â€œå­¦â€ï¼Œç„¶åä¸‹ä¸€æ­¥è¾“å…¥æ˜¯â€œæœºå™¨å­¦â€ï¼Œè¾“å‡ºæ˜¯â€œä¹ â€ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬è¦å¦‚ä½•é¿å…ä¸€æ­¥é”™æ­¥æ­¥é”™çš„æƒ…å†µå‘ç”Ÿå‘¢ï¼Ÿä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå…¶ä¸­æœ‰ä¸€æ­¥å‘ç”Ÿäº†é—®é¢˜ï¼Œæˆ‘ä»¬åº”å½“æ€ä¹ˆè®©æœºå™¨åœ¨åé¢çš„æ­¥éª¤ä¸­ä»ç„¶è¾“å‡ºæ­£ç¡®çš„ç»“æœã€‚ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚æœæŒ‰ç…§ä¸Šè¿°çš„æ­¥éª¤ç”Ÿæˆä¸‹å»ï¼Œç”Ÿæˆå‡ºæ¥çš„åºåˆ—æ˜¯æ— ç©·æ— å°½çš„ï¼Œå®ƒæ°¸è¿œä¸ä¼šåœæ­¢ï¼Œé‚£ä¹ˆæœºå™¨æ€ä¹ˆå»å†³å®šè¾“å‡ºåºåˆ—çš„é•¿åº¦å‘¢ï¼Ÿè¿™ä¸¤ä¸ªé—®é¢˜ï¼Œåæ–‡ä¼šæœ‰æåŠï¼Œæˆ‘ä»¬å…ˆç»§ç»­è®²è¿°Decoderå†…éƒ¨åˆ°åº•ç»å†äº†ä»€ä¹ˆã€‚</p>
<p>â€‹
æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€å¼ Encoderå’ŒDecoderçš„å¯¹æ¯”å›¾ï¼šä»æ­¤å›¾è€Œè¨€ï¼Œæˆ‘ä»¬å‘ç°Decoderé™¤äº†ä¸­é—´é‚£ä¸€å—è¢«ç›–ä½çš„ï¼Œä»¥åŠæœ€åè¾“å‡ºå±‚çš„ä¸€äº›å†…å®¹ä»¥å¤–ï¼ŒBlockå†…éƒ¨çš„å†…å®¹å…¶å®å’ŒEncoderæ˜¯ç±»ä¼¼çš„ã€‚ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„å·®åˆ«ç‚¹å°±æ˜¯å…¶ä½¿ç”¨çš„æ˜¯Masked
Multi-Head Attentionã€‚</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113222282.png"
alt="image-20220115113222282" />
<figcaption aria-hidden="true">image-20220115113222282</figcaption>
</figure>
<p>â€‹ æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ï¼Œè¿™ä¸ªMasked Multi-Head
Attentionæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå›¾1æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„Self-Attentionï¼Œæ¯ä¸€ä¸ªè¾“å‡ºçš„å‘é‡éƒ½æ˜¯å«æœ‰è¾“å…¥çš„æ‰€æœ‰å‘é‡çš„å’¨è¯¢çš„ï¼Œå³å›¾æ˜¯Masked
Self
Attentionæœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯åœ¨ç”Ÿæˆb1çš„æ—¶å€™ï¼Œæ˜¯ä¸èƒ½ä½¿ç”¨a1ä¹‹åçš„è¾“å…¥å‘é‡çš„ï¼Œåªèƒ½ä½¿ç”¨a1çš„èµ„è®¯ï¼Œç”Ÿæˆb2çš„æ—¶å€™ï¼Œä¸èƒ½ä½¿ç”¨a2ä¹‹åçš„è¾“å…¥å‘é‡ï¼Œåªèƒ½ä½¿ç”¨a1,a2çš„èµ„è®¯ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113244478.png"
alt="image-20220115113244478" />
<figcaption aria-hidden="true">image-20220115113244478</figcaption>
</figure>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´ä¸ºå…·ä½“çš„ç¤ºæ„å›¾ï¼š</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113256453.png"
alt="image-20220115113256453" />
<figcaption aria-hidden="true">image-20220115113256453</figcaption>
</figure>
<p>â€‹
é‚£ä¹ˆä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿™æ ·çš„æ¶æ„å‘¢ï¼ŸåŸå› å…¶å®å¾ˆç®€å•ï¼Œå› ä¸ºå¦‚æœä¸è¿™æ ·å­çš„è¯ï¼ŒATå½¢å¼çš„Decoderæ˜¯æ²¡æ³•çš„è¿ä½œçš„ã€‚å› ä¸ºå…ˆå‰è®²çš„ATçš„Decoderè¿ä½œæ–¹å¼ï¼Œè¾“å‡ºçš„å­—æ˜¯ä¸€ä¸ªä¸€ä¸ªäº§ç”Ÿçš„ã€‚ç¬¬ä¸€æ­¥åªæœ‰ä¸€ä¸ªè¾“å…¥çš„â€œSTARTâ€æ ‡è¯†ç¬¦å¯¹åº”çš„One-Hotå‘é‡ï¼Œç”Ÿæˆä¸€ä¸ªå­—ä»¥åï¼Œå†å°†STARTæ ‡è¯†ç¬¦å’Œç¬¬ä¸€ä¸ªå­—è¾“å…¥ï¼Œå¾—åˆ°ç¬¬äºŒä¸ªå­—ï¼Œä¾æ¬¡ç±»æ¨ã€‚æ‰€ä»¥åœ¨ç”Ÿæˆçš„æ—¶å€™ï¼Œå®ƒåªèƒ½å‚è€ƒå®ƒå‰é¢çš„è¾“å…¥çš„åºåˆ—çš„èµ„è®¯ï¼Œæ²¡æ³•è·å¾—å®ƒä¹‹åçš„èµ„è®¯ã€‚</p>
<p>â€‹
ç„¶åæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹Encoderé—´å’ŒDecoderé—´æ˜¯å¦‚ä½•ä¼ é€’èµ„è®¯çš„å‘¢ï¼Ÿä¹Ÿå°±æ˜¯åˆšæ‰é‚£å¼ å›¾ä¸­ï¼Œæš‚æ—¶è¢«ç°è‰²é®ä½çš„éƒ¨åˆ†ï¼šæˆ‘ä»¬ä¼šå‘ç°ï¼Œåœ¨è¿™ä¸ªçº¢è‰²æ¡†æ¡†æ¡†èµ·æ¥çš„æ¨¡ç»„ä¸­ï¼Œæœ‰ä¸¤ä¸ªè¾“å…¥çš„ç®­å¤´æ¥è‡ªäºEncoderï¼Œä¸€ä¸ªè¾“å…¥çš„ç®­å¤´æ¥è‡ªäºDecoderçš„å‰ä¸€æ­¥çš„è¾“å‡ºã€‚</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113305054.png"
alt="image-20220115113305054" />
<figcaption aria-hidden="true">image-20220115113305054</figcaption>
</figure>
<p>â€‹ é‚£ä¹ˆå…·ä½“æ¥è¯´ï¼Œæ˜¯æ€ä¹ˆå·¥ä½œçš„å‘¢ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼šæ­¤æ­¥ä¸­çš„Multi-Head
AttentionæŒ‡çš„æ˜¯ä¸€ä¸ªCross-Attentionçš„è¿‡ç¨‹ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼šåœ¨Decoderè§£æçš„ç¬¬ä¸€æ­¥æ—¶ï¼Œè¾“å…¥æ˜¯æ¥è‡ªEncoderçš„ä¸€ä¸ªåºåˆ—ï¼Œä»¥åŠDecoderä¸Šä¸€æ­¥çš„è¾“å‡ºï¼ˆå› ä¸ºDecoderä¸Šä¸€æ­¥æ— è¾“å‡ºï¼Œæ­¤æ­¥ä¸ºç¬¬ä¸€æ­¥ï¼Œæ‰€ä»¥è¿™ä¸ªåº”è¯¥æ˜¯ä¸€ä¸ªSTARTæ ‡è¯†ç¬¦ï¼Œè¡¨ç¤ºå¥å­çš„å¼€å§‹ï¼‰ã€‚</p>
<p>â€‹
ç„¶åEncoderè¿™è¾¹è¾“å‡ºçš„åºåˆ—ï¼Œa1,a2,a3å‘é‡åˆ†åˆ«ä¹˜ä»¥ä¸€ä¸ªæƒé‡çŸ©é˜µï¼Œå½¢æˆk1,v1,k2,v2,k3,v3ï¼ŒDeocderè¿™ä¾§çš„STARTæ ‡è¯†ç¬¦å¯¹åº”çš„One-hotç¼–ç ç»è¿‡Masked-Self-Attentionå¾—åˆ°ä¸€ä¸ªå‘é‡ï¼Œç„¶åè¯¥å‘é‡ä¹˜ä¸Šä¸€ä¸ªæƒé‡çŸ©é˜µï¼Œå¾—åˆ°å‘é‡q,è®¡ç®—qå’Œk1,k2,k3çš„ç›¸å…³æ€§å¹¶ä¸”å½’ä¸€åŒ–ï¼Œå¾—åˆ°ç³»æ•°Î±1â€™ï¼ŒÎ±2â€™ï¼ŒÎ±3â€™.</p>
<p>â€‹
å¾—åˆ°ç³»æ•°Î±1â€™ï¼ŒÎ±2â€™ï¼ŒÎ±3â€™åï¼Œåˆ†åˆ«å’Œv1,v2,v3ç›¸ä¹˜ç›¸åŠ ï¼Œå¾—åˆ°å‘é‡vï¼Œç„¶åå†ç»è¿‡FCå°±æ˜¯è¯¥æ­¥éª¤Cross
attentionçš„è¾“å‡ºï¼Œè‡³äºåé¢å°±æ˜¯éœ€è¦å†ç»è¿‡ä¸Šè¿°ç½‘ç»œä¸­æè¿°çš„Add&amp;Normï¼Œä¹Ÿå°±æ˜¯Residualå’ŒLayer
Normçš„è¿‡ç¨‹ï¼Œæ‰å®ŒæˆDecoderä¸­ä¸€ä¸ªBlockçš„è¿‡ç¨‹ã€‚</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113324988.png"
alt="image-20220115113324988" />
<figcaption aria-hidden="true">image-20220115113324988</figcaption>
</figure>
<p>â€‹ ç„¶åç¬¬äºŒæ­¥ä»¥æ­¤ç±»æ¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ­¤å¤„å°±ä¸å†èµ˜è¿°ã€‚</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113331325.png"
alt="image-20220115113331325" />
<figcaption aria-hidden="true">image-20220115113331325</figcaption>
</figure>
<p>â€‹
è®²åˆ°è¿™é‡Œçš„è¯ï¼ŒDecoderçš„åŸºæœ¬æ¶æ„ä¹Ÿéƒ½å·²ç»æ¸…æ™°äº†ï¼Œæˆ‘ä»¬æ¥è§£å†³ä¸€ä¸‹å…ˆå‰çš„ä¸¤ä¸ªé—ç•™é—®é¢˜ä¹‹ä¸€ï¼Œä¹Ÿå°±æ˜¯æœºå™¨æ€ä¹ˆå†³å®šè¾“å‡ºçš„åºåˆ—çš„é•¿åº¦çš„ï¼Ÿ</p>
<p>â€‹
åœ¨ATçš„Decoderä¸­ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥åœ¨è¾“å‡ºçš„å­—ç¬¦é›†ä¸­å¢åŠ ä¸€ä¸ªå«åšENDçš„å­—ç¬¦ï¼Œå®ƒå°±ä»£è¡¨ä¸€ä¸ªå¥å­çš„ç»“æŸï¼Œå¦‚æœæŸæ¬¡Decoderè¾“å‡ºçš„æ¦‚ç‡åˆ†å¸ƒä¸­ï¼ŒENDå­—ç¬¦çš„æ¦‚ç‡è¾ƒé«˜ï¼Œå°±è¯´æ˜è¯¥å¥å­ç»“æŸäº†ã€‚</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113340249.png"
alt="image-20220115113340249" />
<figcaption aria-hidden="true">image-20220115113340249</figcaption>
</figure>
<p>â€‹
é‚£ä¹ˆä»€ä¹ˆåˆæ˜¯NATçš„Decoderå‘¢ï¼Ÿæˆ‘ä»¬å…ˆå‰çœ‹åˆ°ATçš„Decoderæ˜¯ä¸€ä¸ªä¸ªè¾“å‡ºå­—ç¬¦çš„ï¼ŒNATçš„Decoderåˆ™æ˜¯ä¸€æ¬¡æ€§çš„è¾“å…¥å…¨æ˜¯STARTçš„åºåˆ—ï¼Œç„¶åä¸€æ¬¡æ€§å¾—åˆ°è¾“å‡ºçš„å­—ç¬¦åºåˆ—ã€‚é‚£ä¹ˆNATçš„Decoderåˆæ˜¯å¦‚ä½•å†³å®šè¾“å‡ºåºåˆ—çš„é•¿åº¦çš„å‘¢ï¼Ÿæœ‰ä¸¤ç§åŠæ³•ï¼Œä¸€ä¸ªæ˜¯ä¸“é—¨è®­ç»ƒä¸€ä¸ªåˆ†ç±»å™¨æˆ–è€…é¢„æµ‹å™¨ï¼Œå»é¢„æµ‹è¾“å‡ºåºåˆ—çš„é•¿åº¦ï¼Œå¦ä¸€ä¸ªå°±æ˜¯æˆ‘ä»¬å…ˆå‡è®¾è¿™ä¸ªè¾“å‡ºçš„åºåˆ—ä¸ä¼šè¶…è¿‡æ¯ä¸ªå®šå€¼ï¼Œæ¯”å¦‚è¯´300ä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¾“å…¥ä¸€ä¸ª300ä¸ªSTARTç»„æˆçš„åºåˆ—ï¼Œç„¶ååœ¨è¾“å‡ºçš„å­—ç¬¦åºåˆ—ä¸­ï¼Œå¿½ç•¥ENDå­—ç¬¦åé¢çš„å­—ç¬¦å³å¯ã€‚</p>
<p>â€‹
ç›¸æ¯”ATæ¥è¯´ï¼ŒNATæœ‰ç€å¹¶è¡ŒåŒ–ï¼Œæ›´ç¨³å®šçš„ä¼˜åŠ¿ï¼Œä½†æ˜¯NATçš„æ•ˆæœå¾€å¾€æ¯”ATè¦å·®ä¸€äº›ã€‚</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113351438.png"
alt="image-20220115113351438" />
<figcaption aria-hidden="true">image-20220115113351438</figcaption>
</figure>
<h3 id="ä¸‰å¦‚ä½•è®­ç»ƒtransformer">ä¸‰ã€å¦‚ä½•è®­ç»ƒTransformer</h3>
<p>â€‹
é¦–å…ˆï¼Œå½“æˆ‘ä»¬ä¸¢å…¥ç¬¬ä¸€ä¸ªSTARTå­—ç¬¦çš„æ—¶å€™ï¼Œå¸Œæœ›Decoderè¾“å‡ºçš„Distributionåˆ†å¸ƒï¼Œå’Œæˆ‘ä»¬çš„Ground
Truthçš„ç»“æœï¼Œèƒ½å¤Ÿè¶Šæ¥è¿‘è¶Šå¥½ï¼Œä¹Ÿå°±æ˜¯è¦æœ€å°åŒ–cross entropyçš„å€¼ã€‚</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113410387.png"
alt="image-20220115113410387" />
<figcaption aria-hidden="true">image-20220115113410387</figcaption>
</figure>
<p>â€‹
ç”±äºæˆ‘ä»¬ä¼šè¾“å‡ºå¥½å¤šæ¬¡å­—ç¬¦ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€ç»ˆæ˜¯å¸Œæœ›ï¼Œèƒ½å¤Ÿæœ€å°åŒ–æ¯æ¬¡è¾“å‡ºçš„Distributionå’ŒGround
Truthçš„cross
entropyã€‚ä¸è¦å¿˜è®°ï¼Œæœ€åä¸€æ­¥è¾“å‡ºæ®µè½çš„ç»“å°¾ç¬¦å·ï¼Œä¹Ÿè¦è€ƒè™‘åœ¨å†…ã€‚ã€æ­¤å¤„æœ‰ä¸€ä¸ªé¢˜å¤–è¯ï¼Œåœ¨å®ç°çš„æ—¶å€™ï¼Œå…¶å®æœ‰äº›æ—¶å€™å¯ä»¥å°†STARTçš„æ ‡è¯†ç¬¦å’ŒENDæ ‡è¯†ç¬¦è¡¨ç¤ºä¸ºåŒä¸€ä¸ªOne-Hotç¼–ç ï¼Œå› ä¸ºåæ­£STARTæ ‡è¯†ç¬¦åªä¼šå‡ºç°åœ¨å¥å­çš„å¤´éƒ¨ï¼Œä»ç„¶æ˜¯å¯ä»¥åˆ†è¾¨çš„ï¼Œä¸éœ€è¦åŒºåˆ†STARTå’ŒENDè¿™ä¸¤ä¸ªå­—ç¬¦ã€‘</p>
<p>â€‹
åŒæ—¶ï¼Œæ­¤å¤„æˆ‘ä»¬åœ¨è®­ç»ƒçš„æ—¶å€™ï¼ŒDecoderçš„Inputä¸æ˜¯ä¸Šä¸€æ­¥è¾“å‡ºçš„å†…å®¹ï¼Œè€Œæ˜¯ç»™å®ƒæ­£ç¡®çš„ç­”æ¡ˆã€‚è¿™ä»¶äº‹æƒ…å°±è¢«æˆ‘ä»¬å«åšTeacher
Focingã€‚ä½†æ˜¯è¿™æ ·å­å’Œåœ¨å®é™…ç”Ÿäº§ä½¿ç”¨çš„æ—¶å€™å­˜åœ¨ä¸€ä¸ªä¸åŒ¹é…çš„é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜æˆ‘ä»¬ä¹‹åä¼šæœ‰æ‰€è®¨è®ºã€‚</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113420273.png"
alt="image-20220115113420273" />
<figcaption aria-hidden="true">image-20220115113420273</figcaption>
</figure>
<h3
id="å››å…³äºè®­ç»ƒseq2seqç±»ä¼¼æ¨¡å‹çš„tips">å››ã€å…³äºè®­ç»ƒSeq2Seqç±»ä¼¼æ¨¡å‹çš„Tipsï¼š</h3>
<h4 id="copy-mechanism">1ã€Copy Mechanism</h4>
<p>â€‹
è¿™ä¸€ä¸ªæœºåˆ¶åœ¨èŠå¤©æœºå™¨äººæˆ–æ–‡æ¡£æ‘˜è¦ç­‰é¢†åŸŸåº”ç”¨çš„æ¯”è¾ƒå¹¿æ³›ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œæœ‰çš„æ—¶å€™è¾“å‡ºçš„æŸäº›å†…å®¹å¯ä»¥ä»è¾“å…¥ä¸­Copyè¿›è¡Œå®Œæˆï¼Œè¿™æ ·å°±é¿å…æœºå™¨å»å­¦ä¹ ä¸€äº›å¥‡æ€ªçš„è¯æ±‡ï¼Œæ¯”å¦‚è¯´åœ¨èŠå¤©æœºå™¨äººä¸­åº“æ´›æ´›è¿™æ ·ä¸€ä¸ªäººåä¿¡æ¯ã€‚æ„Ÿå…´è¶£å¯ä»¥ç»§ç»­æŸ¥çœ‹ç›¸å…³çš„è®ºæ–‡</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113453661.png"
alt="image-20220115113453661" />
<figcaption aria-hidden="true">image-20220115113453661</figcaption>
</figure>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113456022.png"
alt="image-20220115113456022" />
<figcaption aria-hidden="true">image-20220115113456022</figcaption>
</figure>
<h4 id="guided-attention">2ã€Guided Attention</h4>
<p>â€‹
ç”±äºæœ‰çš„æ—¶å€™æœºå™¨å¯èƒ½ä¼šå¿½ç•¥è¾“å…¥çš„æŸä¸€äº›éƒ¨åˆ†ï¼Œæ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨è¯¥ç§æ‰‹æ®µï¼Œè¯¥æ‰‹æ®µé€šå¸¸åº”ç”¨äºè¯­éŸ³åˆæˆã€è¯­éŸ³è¾¨è¯†é¢†åŸŸã€‚</p>
<p>å…¶å°±æ˜¯è¦æ±‚æœºå™¨åœ¨åšAttentionçš„æ—¶å€™ä»¥ä¸€ä¸ªå›ºå®šçš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ å¯¹äºæŸä¸€ä¸ªä»»åŠ¡å·²ç»æœ‰äº†ä¸€äº›æ—¢å®šçš„å‘ç°ï¼Œå°±å¯ä»¥å°†è¿™ç§é™åˆ¶åŠ å…¥åˆ°è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œå¼•å¯¼æœºå™¨å®ŒæˆAttentionçš„è®¡ç®—è¿‡ç¨‹ã€‚</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113509972.png"
alt="image-20220115113509972" />
<figcaption aria-hidden="true">image-20220115113509972</figcaption>
</figure>
<h4 id="beam-search">3ã€Beam Search</h4>
<p>â€‹
BeamSearchæ˜¯ä¸ºäº†è§£å†³å¦‚ä¸‹çš„ä¸€ä¸ªé—®é¢˜ï¼šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸¾ä¾‹è€Œè¨€ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬è¾“å‡ºçš„å­—ç¬¦åªæœ‰Aå’ŒBä¸¤ç§ï¼Œé‚£ä¹ˆDecoderçš„è¾“å‡ºåºåˆ—ï¼Œå°±å¯ä»¥è¡¨ç¤ºä¸ºå¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä¸€é¢—æ•°çŠ¶ç»“æ„ã€‚çº¢è‰²çš„è·¯å¾„æ˜¯DecoderæŒ‰ç…§å…ˆå‰çš„è´ªå©ªè§„åˆ™å¾—åˆ°çš„è¾“å‡ºã€‚ä½†å…¶å®ï¼Œæœ‰ä¸€æ¡æ¯”çº¢è‰²è·¯å¾„æ›´å¥½çš„è¾“å‡ºï¼Œå°±æ˜¯ç»¿è‰²çš„è·¯å¾„ã€‚</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113522389.png"
alt="image-20220115113522389" />
<figcaption aria-hidden="true">image-20220115113522389</figcaption>
</figure>
<p>â€‹
å¯æ˜¯ï¼Œæˆ‘ä»¬å¦‚æœæƒ³è¦æ‰¾åˆ°ä¸€ä¸ªè®­ç»ƒè¿‡ç¨‹ä¸­è¿™æ ·ä¸€æ¡ç»¿è‰²çš„æœ€ä¼˜è·¯å¾„æ˜¯æ¯”è¾ƒéš¾çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä¸å¯èƒ½å»ç©·ä¸¾æœç´¢æ¯ä¸€æ¡è·¯å¾„ï¼Œå› ä¸ºåœ¨å­—ç¬¦é›†æ¯”è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼Œå‡ å±‚å åŠ çš„å¯èƒ½å°±å·²ç»éå¸¸ä¹‹å¤šã€‚è¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨Beam
Searchè¿™æ ·ä¸€ç§æŠ€æœ¯ã€‚å…·ä½“å¦‚ä½•è¿›è¡Œå¯ä»¥Googleæœç´¢è¯¦æƒ…</p>
<h4 id="optimizing-evaluation-metric">4ã€Optimizing Evaluation
Metric</h4>
<p>â€‹
æˆ‘ä»¬åœ¨è®­ç»ƒçš„æ—¶å€™ï¼Œç›®æ ‡æ˜¯æœ€å°åŒ–æ¯ä¸ªä¸€ä¸€å¯¹åº”çš„ä¸­æ–‡å­—çš„è¾“å‡ºçš„åˆ†å¸ƒå’ŒGround
Truthï¼Œè€Œåœ¨è¯„ä¼°ä¸€ä¸ªæ¨¡å‹å¥½åçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šä½¿ç”¨è¾“å‡ºçš„æ•´å¥å’ŒGroundTruthä¹‹é—´çš„BLEU
scoreæ¥è¿›è¡Œè¯„ä¼°ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„éªŒè¯é›†åº”å½“ä½¿ç”¨BLEU
scoreã€‚é‚£ä¹ˆæˆ‘ä»¬çš„è®­ç»ƒè¿‡ç¨‹ä¸­ä¸ºä»€ä¹ˆä¸ä½¿ç”¨BLEU
scoreå‘¢ï¼Ÿç®€å•æ¥è¯´å°±æ˜¯å¦‚æœåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æˆ‘ä»¬è¦åšä¸¤ä¸ªå¥å­ä¹‹é—´çš„BLEU
scoreï¼Œæ˜¯æ ¹æœ¬æ²¡æœ‰åŠæ³•åšå¾®åˆ†çš„ä¹Ÿå°±æ²¡æœ‰åŠæ³•åšæ¢¯åº¦ä¸‹é™å»æœ€ä¼˜åŒ–æ±‚è§£ã€‚</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113543303.png"
alt="image-20220115113543303" />
<figcaption aria-hidden="true">image-20220115113543303</figcaption>
</figure>
<h4 id="scheduled-sampling">5ã€Scheduled Sampling</h4>
<p>â€‹
è¿™ä¸ªæ–¹æ³•æ˜¯ä¸ºäº†è§£å†³æˆ‘ä»¬å…ˆå‰æå‡ºçš„ä¸¤ä¸ªé—®é¢˜ä¸­çš„ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œä»¥åŠåœ¨é‚£ä¹‹åæå‡ºçš„ä¸€ä¸ªè®­ç»ƒä¸å®é™…åº”ç”¨è¿‡ç¨‹ä¸­çš„é‚£ä¸ªMismatch(ä¹Ÿå°±æ˜¯è®­ç»ƒçš„æ—¶å€™Decoderçš„è¾“å…¥ä½¿ç”¨çš„æ˜¯Ground
Truth,å¯æ˜¯è¾“å‡ºçš„æ—¶å€™ä¸è¡Œ)ã€‚ç®€å•ç›´æ¥çš„æƒ³æ³•ï¼Œå°±æ˜¯è®­ç»ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾€è¾“å…¥ä¸­åŠ å…¥ä¸€äº›å™ªå£°ï¼Œå°±å¯ä»¥äº†ã€‚å…·ä½“è€Œè¨€çš„è¯ï¼Œä¹Ÿæœ‰è®¸å¤šè®ºæ–‡æ˜¯åšè¿™ä¸ªæ–¹å‘çš„ï¼Œå¦‚æœæœ‰å…´è¶£çš„è¯å¯ä»¥è‡ªè¡ŒæŸ¥é˜…ã€‚</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220115113600427.png"
alt="image-20220115113600427" />
<figcaption aria-hidden="true">image-20220115113600427</figcaption>
</figure>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Transformerç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Transformer</tag>
        <tag>Self Attention</tag>
        <tag>Seq2Seq</tag>
      </tags>
  </entry>
  <entry>
    <title>Pytorchå­¦ä¹ ç¬”è®°6â€”â€”ä¼˜åŒ–æ¨¡å‹å‚æ•°</title>
    <url>/2021/12/14/81d5ccd11a24/</url>
    <content><![CDATA[<h1 id="å…­ä¼˜åŒ–æ¨¡å‹å‚æ•°">å…­ã€ä¼˜åŒ–æ¨¡å‹å‚æ•°</h1>
<p>ç°åœ¨æˆ‘ä»¬æœ‰äº†æ¨¡å‹å’Œæ•°æ®ï¼Œæ¥ä¸‹å»éœ€è¦é€šè¿‡ä¼˜åŒ–æ•°æ®å‚æ•°æ¥è®­ç»ƒã€éªŒè¯å’Œæµ‹è¯•æˆ‘ä»¬çš„æ¨¡å‹äº†ã€‚</p>
<p>è®­ç»ƒæ¨¡å‹æ˜¯ä¸€ä¸ªè¿­ä»£è¿‡ç¨‹ï¼› åœ¨æ¯æ¬¡è¿­ä»£ï¼ˆç§°ä¸º
epochï¼‰ä¸­ï¼Œæ¨¡å‹å¯¹è¾“å‡ºè¿›è¡ŒçŒœæµ‹ï¼Œè®¡ç®—å…¶çŒœæµ‹ä¸­çš„è¯¯å·®ï¼ˆæŸå¤±ï¼‰ï¼Œæ”¶é›†è¯¯å·®å¯¹å…¶å‚æ•°çš„å¯¼æ•°ï¼Œå¹¶ä½¿ç”¨æ¢¯åº¦ä¸‹é™ä¼˜åŒ–è¿™äº›å‚æ•°ã€‚
ä¸‹é¢çš„ä»£ç æ˜¯å…ˆé¢„å®šä¹‰äº†ä¸€äº›ä¹‹å‰è®°å½•è¿‡çš„å†…å®¹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> DataLoader</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> datasets</span><br><span class="line"><span class="keyword">from</span> torchvision.transforms <span class="keyword">import</span> ToTensor, Lambda</span><br><span class="line"></span><br><span class="line">training_data = datasets.FashionMNIST(</span><br><span class="line">    root=<span class="string">&quot;data&quot;</span>,</span><br><span class="line">    train=<span class="literal">True</span>,</span><br><span class="line">    download=<span class="literal">True</span>,</span><br><span class="line">    transform=ToTensor()</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">test_data = datasets.FashionMNIST(</span><br><span class="line">    root=<span class="string">&quot;data&quot;</span>,</span><br><span class="line">    train=<span class="literal">False</span>,</span><br><span class="line">    download=<span class="literal">True</span>,</span><br><span class="line">    transform=ToTensor()</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">train_dataloader = DataLoader(training_data, batch_size=<span class="number">64</span>)</span><br><span class="line">test_dataloader = DataLoader(test_data, batch_size=<span class="number">64</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NeuralNetwork</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>(NeuralNetwork, self).__init__()</span><br><span class="line">        self.flatten = nn.Flatten()</span><br><span class="line">        self.linear_relu_stack = nn.Sequential(</span><br><span class="line">            nn.Linear(<span class="number">28</span>*<span class="number">28</span>, <span class="number">512</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(<span class="number">512</span>, <span class="number">512</span>),</span><br><span class="line">            nn.ReLU(),</span><br><span class="line">            nn.Linear(<span class="number">512</span>, <span class="number">10</span>),</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        x = self.flatten(x)</span><br><span class="line">        logits = self.linear_relu_stack(x)</span><br><span class="line">        <span class="keyword">return</span> logits</span><br><span class="line"></span><br><span class="line">model = NeuralNetwork()</span><br></pre></td></tr></table></figure>
<h3 id="è¶…å‚æ•°">1ã€è¶…å‚æ•°ï¼š</h3>
<p>è¶…å‚æ•°æ˜¯å¯è°ƒèŠ‚çš„å‚æ•°ï¼Œå¯æ§åˆ¶æ¨¡å‹ä¼˜åŒ–è¿‡ç¨‹ã€‚ä¸åŒçš„è¶…å‚æ•°å€¼ä¼šå½±å“æ¨¡å‹è®­ç»ƒå’Œæ”¶æ•›é€Ÿåº¦</p>
<p>æˆ‘ä»¬ä¸ºè®­ç»ƒå®šä¹‰äº†ä»¥ä¸‹è¶…å‚æ•°ï¼š - Number of Epochs è¿­ä»£æ•°æ®é›†çš„æ¬¡æ•° -
Batch Size
åœ¨æ›´æ–°å‚æ•°ä¹‹å‰é€šè¿‡ç½‘ç»œä¼ æ’­çš„æ•°æ®æ ·æœ¬æ•°é‡(å•æ¬¡ä¼ å…¥ç½‘ç»œè¿›è¡Œè®­ç»ƒçš„æ ·æœ¬æ•°é‡)
- Learning Rate åœ¨æ¯ä¸ªæ‰¹æ¬¡/æ—¶æœŸæ›´æ–°æ¨¡å‹å‚æ•°çš„ç¨‹åº¦ã€‚
è¾ƒå°çš„å€¼ä¼šå¯¼è‡´å­¦ä¹ é€Ÿåº¦å˜æ…¢ï¼Œè€Œè¾ƒå¤§çš„å€¼å¯èƒ½ä¼šå¯¼è‡´è®­ç»ƒè¿‡ç¨‹ä¸­å‡ºç°ä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚</p>
<p>æ­¤å¤„æ³¨æ„åŒºåˆ†ä¸€äº›æ¦‚å¿µï¼š - Batch
Sizeï¼šæ‰¹å¤§å°ã€‚åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œä¸€èˆ¬é‡‡ç”¨SGDè®­ç»ƒï¼Œå³æ¯æ¬¡è®­ç»ƒåœ¨è®­ç»ƒé›†ä¸­å–batchsizeä¸ªæ ·æœ¬è®­ç»ƒï¼›
- iterationï¼š1ä¸ªiterationç­‰äºä½¿ç”¨batchsizeä¸ªæ ·æœ¬è®­ç»ƒä¸€æ¬¡ï¼› -
Epochï¼š1ä¸ªepochç­‰äºä½¿ç”¨è®­ç»ƒé›†ä¸­çš„å…¨éƒ¨æ ·æœ¬è®­ç»ƒä¸€æ¬¡ï¼Œé€šä¿—çš„è®²epochçš„å€¼å°±æ˜¯æ•´ä¸ªæ•°æ®é›†è¢«è½®å‡ æ¬¡ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ª5000ä¸ªæ•°æ®çš„æ•°æ®é›†ï¼ŒBatch Size = 100,
æˆ‘ä»¬éœ€è¦è¿­ä»£è®­ç»ƒ50æ¬¡ï¼Œé‚£ä¹ˆæœ€ç»ˆNumber of Epoches = 10,Interation =
50.</p>
<h3 id="ä¼˜åŒ–å¾ªç¯">2ã€ä¼˜åŒ–å¾ªç¯ï¼š</h3>
<p>æ¯ä¸ªEpochç”±ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆï¼š - Train Loop -
è¿­ä»£è®­ç»ƒæ•°æ®é›†å¹¶å°è¯•æ”¶æ•›åˆ°æœ€ä½³å‚æ•°ã€‚(ç”±å¾ˆå¤šæ¬¡Interationç»„æˆ) -
Validation/Test Loop - è¿­ä»£æµ‹è¯•æ•°æ®é›†ä»¥æ£€æŸ¥æ¨¡å‹æ€§èƒ½æ˜¯å¦æ­£åœ¨æé«˜ã€‚</p>
<h3 id="æŸå¤±å‡½æ•°">3ã€æŸå¤±å‡½æ•°</h3>
<ul>
<li><p>å½“æä¾›ä¸€äº›è®­ç»ƒæ•°æ®æ—¶ï¼Œæˆ‘ä»¬æœªç»è®­ç»ƒçš„ç½‘ç»œå¯èƒ½æ²¡æ³•ç»™å‡ºæ­£ç¡®çš„ç­”æ¡ˆã€‚</p></li>
<li><p>æŸå¤±å‡½æ•°è¡¡é‡å¾—åˆ°çš„ç»“æœä¸ç›®æ ‡å€¼çš„ä¸ç›¸ä¼¼ç¨‹åº¦ï¼Œæ˜¯æˆ‘ä»¬åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æƒ³è¦æœ€å°åŒ–çš„æŸå¤±å‡½æ•°ã€‚</p></li>
<li><p>ä¸ºäº†è®¡ç®—æŸå¤±ï¼Œæˆ‘ä»¬ä½¿ç”¨ç»™å®šæ•°æ®æ ·æœ¬çš„è¾“å…¥è¿›è¡Œé¢„æµ‹ï¼Œå¹¶å°†å…¶ä¸çœŸå®æ•°æ®æ ‡ç­¾å€¼è¿›è¡Œæ¯”è¾ƒã€‚</p></li>
</ul>
<p>å¸¸è§çš„æŸå¤±å‡½æ•°åŒ…æ‹¬ç”¨äºå›å½’ä»»åŠ¡çš„ nn.MSELossï¼ˆå‡æ–¹è¯¯å·®ï¼‰å’Œç”¨äºåˆ†ç±»çš„
nn.NLLLossï¼ˆè´Ÿå¯¹æ•°ä¼¼ç„¶ï¼‰ã€‚ nn.CrossEntropyLoss ç»“åˆäº† nn.LogSoftmax å’Œ
nn.NLLLossã€‚</p>
<h3 id="ä¼˜åŒ–å™¨">4ã€ä¼˜åŒ–å™¨</h3>
<ul>
<li><p>ä¼˜åŒ–æ˜¯åœ¨æ¯ä¸ªè®­ç»ƒæ­¥éª¤ä¸­è°ƒæ•´æ¨¡å‹å‚æ•°ä»¥å‡å°‘æ¨¡å‹è¯¯å·®çš„è¿‡ç¨‹ã€‚</p></li>
<li><p>ä¼˜åŒ–ç®—æ³•å®šä¹‰äº†è¿™ä¸ªè¿‡ç¨‹æ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬ä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™ï¼‰ã€‚</p></li>
<li><p>æ‰€æœ‰ä¼˜åŒ–é€»è¾‘éƒ½å°è£…åœ¨ä¼˜åŒ–å™¨å¯¹è±¡ä¸­ã€‚</p></li>
<li><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ SGD ä¼˜åŒ–å™¨ï¼› æ­¤å¤–ï¼ŒPyTorch
ä¸­æœ‰è®¸å¤šä¸åŒçš„ä¼˜åŒ–å™¨å¯ç”¨ï¼Œä¾‹å¦‚ ADAM å’Œ
RMSPropï¼Œå®ƒä»¬æ›´é€‚ç”¨äºä¸åŒç±»å‹çš„æ¨¡å‹å’Œæ•°æ®ã€‚ <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">optimizer = torch.optim.SGD(model.parameters(), lr=learning_rate)</span><br></pre></td></tr></table></figure></p></li>
<li><p>æˆ‘ä»¬é€šè¿‡æ³¨å†Œæ¨¡å‹éœ€è¦è®­ç»ƒçš„å‚æ•°å¹¶ä¼ å…¥å­¦ä¹ ç‡è¶…å‚æ•°æ¥åˆå§‹åŒ–ä¼˜åŒ–å™¨ã€‚</p></li>
</ul>
<h4 id="è®­ç»ƒå¾ªç¯ä¸­ä¼˜åŒ–çš„ä¸‰ä¸ªæ­¥éª¤">è®­ç»ƒå¾ªç¯ä¸­ä¼˜åŒ–çš„ä¸‰ä¸ªæ­¥éª¤ï¼š</h4>
<ul>
<li><p>è°ƒç”¨ optimizer.zero_grad() æ¥é‡ç½®æ¨¡å‹å‚æ•°çš„æ¢¯åº¦ã€‚
æ¢¯åº¦é»˜è®¤æƒ…å†µä¸‹ä¼šç›¸åŠ ï¼›
ä¸ºäº†é˜²æ­¢é‡å¤è®¡ç®—ï¼Œæˆ‘ä»¬åœ¨æ¯æ¬¡è¿­ä»£æ—¶æ˜ç¡®åœ°å°†å®ƒä»¬å½’é›¶ã€‚</p></li>
<li><p>é€šè¿‡è°ƒç”¨ loss.backwards() æ¥åå‘ä¼ æ’­é¢„æµ‹æŸå¤±ã€‚PyTorch
å°†æŸå¤±çš„æ¢¯åº¦å­˜å…¥ w.r.t. æ¯ä¸ªå‚æ•°ã€‚</p></li>
<li><p>ä¸€æ—¦æˆ‘ä»¬æœ‰äº†æ¢¯åº¦ï¼Œæˆ‘ä»¬å°±è°ƒç”¨ optimizer.step()
é€šè¿‡backward()ä¸­æ”¶é›†çš„æ¢¯åº¦æ¥è°ƒæ•´å‚æ•°ã€‚</p></li>
</ul>
<h3 id="train-loop-å’Œ-test-loopçš„æ•´ä½“å®ç°">5ã€Train Loop å’Œ Test
Loopçš„æ•´ä½“å®ç°</h3>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">train_loop</span>(<span class="params">dataloader, model, loss_fn, optimizer</span>):</span><br><span class="line">    size = <span class="built_in">len</span>(dataloader.dataset)</span><br><span class="line">    <span class="keyword">for</span> batch, (X, y) <span class="keyword">in</span> <span class="built_in">enumerate</span>(dataloader):</span><br><span class="line">        <span class="comment"># Compute prediction and loss</span></span><br><span class="line">        pred = model(X)</span><br><span class="line">        loss = loss_fn(pred, y)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Backpropagation</span></span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        loss.backward()</span><br><span class="line">        optimizer.step()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> batch % <span class="number">100</span> == <span class="number">0</span>:</span><br><span class="line">            loss, current = loss.item(), batch * <span class="built_in">len</span>(X)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;loss: <span class="subst">&#123;loss:&gt;7f&#125;</span>  [<span class="subst">&#123;current:&gt;5d&#125;</span>/<span class="subst">&#123;size:&gt;5d&#125;</span>]&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_loop</span>(<span class="params">dataloader, model, loss_fn</span>):</span><br><span class="line">    size = <span class="built_in">len</span>(dataloader.dataset)</span><br><span class="line">    num_batches = <span class="built_in">len</span>(dataloader)</span><br><span class="line">    test_loss, correct = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> torch.no_grad():</span><br><span class="line">        <span class="keyword">for</span> X, y <span class="keyword">in</span> dataloader:</span><br><span class="line">            pred = model(X)</span><br><span class="line">            test_loss += loss_fn(pred, y).item()</span><br><span class="line">            correct += (pred.argmax(<span class="number">1</span>) == y).<span class="built_in">type</span>(torch.<span class="built_in">float</span>).<span class="built_in">sum</span>().item()</span><br><span class="line"></span><br><span class="line">    test_loss /= num_batches</span><br><span class="line">    correct /= size</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Test Error: \n Accuracy: <span class="subst">&#123;(<span class="number">100</span>*correct):&gt;<span class="number">0.1</span>f&#125;</span>%, Avg loss: <span class="subst">&#123;test_loss:&gt;8f&#125;</span> \n&quot;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">learning_rate = <span class="number">1e-3</span></span><br><span class="line"></span><br><span class="line">loss_fn = nn.CrossEntropyLoss()</span><br><span class="line">optimizer = torch.optim.SGD(model.parameters(), lr=learning_rate)</span><br><span class="line"></span><br><span class="line">epochs = <span class="number">10</span></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> <span class="built_in">range</span>(epochs):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Epoch <span class="subst">&#123;t+<span class="number">1</span>&#125;</span>\n-------------------------------&quot;</span>)</span><br><span class="line">    train_loop(train_dataloader, model, loss_fn, optimizer)</span><br><span class="line">    test_loop(test_dataloader, model, loss_fn)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Done!&quot;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>Epoch 1
-------------------------------
loss: 2.305831  [    0/60000]
loss: 2.286264  [ 6400/60000]
loss: 2.275372  [12800/60000]
loss: 2.270570  [19200/60000]
loss: 2.243541  [25600/60000]
loss: 2.228191  [32000/60000]
loss: 2.224830  [38400/60000]
loss: 2.197911  [44800/60000]
loss: 2.188963  [51200/60000]
loss: 2.156472  [57600/60000]
Test Error: 
 Accuracy: 44.4%, Avg loss: 2.153718 

Epoch 2
-------------------------------
loss: 2.164675  [    0/60000]
loss: 2.149587  [ 6400/60000]
loss: 2.099088  [12800/60000]
loss: 2.116142  [19200/60000]
loss: 2.057026  [25600/60000]
loss: 2.006994  [32000/60000]
loss: 2.027068  [38400/60000]
loss: 1.953798  [44800/60000]
loss: 1.955666  [51200/60000]
loss: 1.876484  [57600/60000]
Test Error: 
 Accuracy: 54.6%, Avg loss: 1.882143 

Epoch 3
-------------------------------
loss: 1.914309  [    0/60000]
loss: 1.881881  [ 6400/60000]
loss: 1.770059  [12800/60000]
loss: 1.812282  [19200/60000]
loss: 1.696313  [25600/60000]
loss: 1.650967  [32000/60000]
loss: 1.665257  [38400/60000]
loss: 1.568552  [44800/60000]
loss: 1.594818  [51200/60000]
loss: 1.484761  [57600/60000]
Test Error: 
 Accuracy: 61.4%, Avg loss: 1.509315 

Epoch 4
-------------------------------
loss: 1.575193  [    0/60000]
loss: 1.537402  [ 6400/60000]
loss: 1.389850  [12800/60000]
loss: 1.466425  [19200/60000]
loss: 1.346153  [25600/60000]
loss: 1.345708  [32000/60000]
loss: 1.351373  [38400/60000]
loss: 1.272530  [44800/60000]
loss: 1.314754  [51200/60000]
loss: 1.217384  [57600/60000]
Test Error: 
 Accuracy: 63.7%, Avg loss: 1.243355 

Epoch 5
-------------------------------
loss: 1.322318  [    0/60000]
loss: 1.297594  [ 6400/60000]
loss: 1.132705  [12800/60000]
loss: 1.242817  [19200/60000]
loss: 1.121882  [25600/60000]
loss: 1.150953  [32000/60000]
loss: 1.163450  [38400/60000]
loss: 1.091253  [44800/60000]
loss: 1.141570  [51200/60000]
loss: 1.064053  [57600/60000]
Test Error: 
 Accuracy: 65.1%, Avg loss: 1.080539 

Epoch 6
-------------------------------
loss: 1.154191  [    0/60000]
loss: 1.148584  [ 6400/60000]
loss: 0.965631  [12800/60000]
loss: 1.104692  [19200/60000]
loss: 0.985084  [25600/60000]
loss: 1.020977  [32000/60000]
loss: 1.047947  [38400/60000]
loss: 0.976197  [44800/60000]
loss: 1.029986  [51200/60000]
loss: 0.968344  [57600/60000]
Test Error: 
 Accuracy: 66.1%, Avg loss: 0.976119 

Epoch 7
-------------------------------
loss: 1.037672  [    0/60000]
loss: 1.052149  [ 6400/60000]
loss: 0.852071  [12800/60000]
loss: 1.013271  [19200/60000]
loss: 0.898881  [25600/60000]
loss: 0.930241  [32000/60000]
loss: 0.972335  [38400/60000]
loss: 0.901890  [44800/60000]
loss: 0.953780  [51200/60000]
loss: 0.904363  [57600/60000]
Test Error: 
 Accuracy: 67.0%, Avg loss: 0.905581 

Epoch 8
-------------------------------
loss: 0.952564  [    0/60000]
loss: 0.985621  [ 6400/60000]
loss: 0.771567  [12800/60000]
loss: 0.949356  [19200/60000]
loss: 0.841446  [25600/60000]
loss: 0.864854  [32000/60000]
loss: 0.919260  [38400/60000]
loss: 0.852853  [44800/60000]
loss: 0.899662  [51200/60000]
loss: 0.858536  [57600/60000]
Test Error: 
 Accuracy: 68.2%, Avg loss: 0.855451 

Epoch 9
-------------------------------
loss: 0.887674  [    0/60000]
loss: 0.936516  [ 6400/60000]
loss: 0.712008  [12800/60000]
loss: 0.902735  [19200/60000]
loss: 0.800700  [25600/60000]
loss: 0.816214  [32000/60000]
loss: 0.879292  [38400/60000]
loss: 0.819085  [44800/60000]
loss: 0.859679  [51200/60000]
loss: 0.823750  [57600/60000]
Test Error: 
 Accuracy: 69.5%, Avg loss: 0.817833 

Epoch 10
-------------------------------
loss: 0.836203  [    0/60000]
loss: 0.897646  [ 6400/60000]
loss: 0.666050  [12800/60000]
loss: 0.867214  [19200/60000]
loss: 0.769769  [25600/60000]
loss: 0.778995  [32000/60000]
loss: 0.846987  [38400/60000]
loss: 0.794176  [44800/60000]
loss: 0.828553  [51200/60000]
loss: 0.795993  [57600/60000]
Test Error: 
 Accuracy: 70.8%, Avg loss: 0.788062 

Done!</code></pre>
<h3 id="ä¸ƒä¿å­˜ä¸åŠ è½½æ¨¡å‹">ä¸ƒã€ä¿å­˜ä¸åŠ è½½æ¨¡å‹</h3>
<p>PyTorch æ¨¡å‹å°†å­¦ä¹ åˆ°çš„å‚æ•°å­˜å‚¨åœ¨ç§°ä¸º state_dict çš„å†…éƒ¨çŠ¶æ€å­—å…¸ä¸­ã€‚
è¿™äº›å¯ä»¥é€šè¿‡ torch.save æ–¹æ³•æŒä¹…åŒ–ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torchvision.models <span class="keyword">as</span> models</span><br><span class="line"></span><br><span class="line">model = models.vgg16(pretrained=<span class="literal">True</span>)</span><br><span class="line">torch.save(model.state_dict(), <span class="string">&#x27;model_weights.pth&#x27;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>Downloading: &quot;https://download.pytorch.org/models/vgg16-397923af.pth&quot; to C:\Users\14012/.cache\torch\hub\checkpoints\vgg16-397923af.pth
4.4%IOPub message rate exceeded.
The notebook server will temporarily stop sending output
to the client in order to avoid crashing it.
To change this limit, set the config variable
`--NotebookApp.iopub_msg_rate_limit`.

Current values:
NotebookApp.iopub_msg_rate_limit=1000.0 (msgs/sec)
NotebookApp.rate_limit_window=3.0 (secs)

11.4%IOPub message rate exceeded.
The notebook server will temporarily stop sending output
to the client in order to avoid crashing it.
To change this limit, set the config variable
`--NotebookApp.iopub_msg_rate_limit`.

Current values:
NotebookApp.iopub_msg_rate_limit=1000.0 (msgs/sec)
NotebookApp.rate_limit_window=3.0 (secs)

18.5%IOPub message rate exceeded.
The notebook server will temporarily stop sending output
to the client in order to avoid crashing it.
To change this limit, set the config variable
`--NotebookApp.iopub_msg_rate_limit`.

Current values:
NotebookApp.iopub_msg_rate_limit=1000.0 (msgs/sec)
NotebookApp.rate_limit_window=3.0 (secs)

25.5%IOPub message rate exceeded.
The notebook server will temporarily stop sending output
to the client in order to avoid crashing it.
To change this limit, set the config variable
`--NotebookApp.iopub_msg_rate_limit`.

Current values:
NotebookApp.iopub_msg_rate_limit=1000.0 (msgs/sec)
NotebookApp.rate_limit_window=3.0 (secs)

35.0%IOPub message rate exceeded.
The notebook server will temporarily stop sending output
to the client in order to avoid crashing it.
To change this limit, set the config variable
`--NotebookApp.iopub_msg_rate_limit`.

Current values:
NotebookApp.iopub_msg_rate_limit=1000.0 (msgs/sec)
NotebookApp.rate_limit_window=3.0 (secs)

45.9%IOPub message rate exceeded.
The notebook server will temporarily stop sending output
to the client in order to avoid crashing it.
To change this limit, set the config variable
`--NotebookApp.iopub_msg_rate_limit`.

Current values:
NotebookApp.iopub_msg_rate_limit=1000.0 (msgs/sec)
NotebookApp.rate_limit_window=3.0 (secs)

54.3%IOPub message rate exceeded.
The notebook server will temporarily stop sending output
to the client in order to avoid crashing it.
To change this limit, set the config variable
`--NotebookApp.iopub_msg_rate_limit`.

Current values:
NotebookApp.iopub_msg_rate_limit=1000.0 (msgs/sec)
NotebookApp.rate_limit_window=3.0 (secs)

61.2%IOPub message rate exceeded.
The notebook server will temporarily stop sending output
to the client in order to avoid crashing it.
To change this limit, set the config variable
`--NotebookApp.iopub_msg_rate_limit`.

Current values:
NotebookApp.iopub_msg_rate_limit=1000.0 (msgs/sec)
NotebookApp.rate_limit_window=3.0 (secs)

69.2%IOPub message rate exceeded.
The notebook server will temporarily stop sending output
to the client in order to avoid crashing it.
To change this limit, set the config variable
`--NotebookApp.iopub_msg_rate_limit`.

Current values:
NotebookApp.iopub_msg_rate_limit=1000.0 (msgs/sec)
NotebookApp.rate_limit_window=3.0 (secs)

76.2%IOPub message rate exceeded.
The notebook server will temporarily stop sending output
to the client in order to avoid crashing it.
To change this limit, set the config variable
`--NotebookApp.iopub_msg_rate_limit`.

Current values:
NotebookApp.iopub_msg_rate_limit=1000.0 (msgs/sec)
NotebookApp.rate_limit_window=3.0 (secs)

86.6%IOPub message rate exceeded.
The notebook server will temporarily stop sending output
to the client in order to avoid crashing it.
To change this limit, set the config variable
`--NotebookApp.iopub_msg_rate_limit`.

Current values:
NotebookApp.iopub_msg_rate_limit=1000.0 (msgs/sec)
NotebookApp.rate_limit_window=3.0 (secs)

98.3%IOPub message rate exceeded.
The notebook server will temporarily stop sending output
to the client in order to avoid crashing it.
To change this limit, set the config variable
`--NotebookApp.iopub_msg_rate_limit`.

Current values:
NotebookApp.iopub_msg_rate_limit=1000.0 (msgs/sec)
NotebookApp.rate_limit_window=3.0 (secs)</code></pre>
<p>è¦åŠ è½½æ¨¡å‹æƒé‡ï¼Œæ‚¨éœ€è¦å…ˆåˆ›å»ºç›¸åŒæ¨¡å‹çš„å®ä¾‹ï¼Œç„¶åä½¿ç”¨
load_state_dict() æ–¹æ³•åŠ è½½å‚æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = models.vgg16() <span class="comment"># we do not specify pretrained=True, i.e. do not load default weights</span></span><br><span class="line">model.load_state_dict(torch.load(<span class="string">&#x27;model_weights.pth&#x27;</span>))</span><br><span class="line">model.<span class="built_in">eval</span>()</span><br></pre></td></tr></table></figure>
<pre><code>VGG(
  (features): Sequential(
    (0): Conv2d(3, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))
    (1): ReLU(inplace=True)
    (2): Conv2d(64, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))
    (3): ReLU(inplace=True)
    (4): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)
    (5): Conv2d(64, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))
    (6): ReLU(inplace=True)
    (7): Conv2d(128, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))
    (8): ReLU(inplace=True)
    (9): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)
    (10): Conv2d(128, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))
    (11): ReLU(inplace=True)
    (12): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))
    (13): ReLU(inplace=True)
    (14): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))
    (15): ReLU(inplace=True)
    (16): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)
    (17): Conv2d(256, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))
    (18): ReLU(inplace=True)
    (19): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))
    (20): ReLU(inplace=True)
    (21): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))
    (22): ReLU(inplace=True)
    (23): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)
    (24): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))
    (25): ReLU(inplace=True)
    (26): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))
    (27): ReLU(inplace=True)
    (28): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1))
    (29): ReLU(inplace=True)
    (30): MaxPool2d(kernel_size=2, stride=2, padding=0, dilation=1, ceil_mode=False)
  )
  (avgpool): AdaptiveAvgPool2d(output_size=(7, 7))
  (classifier): Sequential(
    (0): Linear(in_features=25088, out_features=4096, bias=True)
    (1): ReLU(inplace=True)
    (2): Dropout(p=0.5, inplace=False)
    (3): Linear(in_features=4096, out_features=4096, bias=True)
    (4): ReLU(inplace=True)
    (5): Dropout(p=0.5, inplace=False)
    (6): Linear(in_features=4096, out_features=1000, bias=True)
  )
)</code></pre>
<h4
id="æ³¨æ„ä¸€å®šè¦åœ¨é¢„æµ‹ä¹‹å‰è°ƒç”¨-model.eval-æ–¹æ³•ä»¥å°†-dropout-å’Œæ‰¹é‡å½’ä¸€åŒ–å±‚è®¾ç½®ä¸ºè¯„ä¼°æ¨¡å¼-ä¸è¿™æ ·åšä¼šäº§ç”Ÿä¸ä¸€è‡´çš„æ¨ç†ç»“æœ">æ³¨æ„ï¼šä¸€å®šè¦åœ¨é¢„æµ‹ä¹‹å‰è°ƒç”¨
model.eval() æ–¹æ³•ï¼Œä»¥å°† dropout å’Œæ‰¹é‡å½’ä¸€åŒ–å±‚è®¾ç½®ä¸ºè¯„ä¼°æ¨¡å¼ã€‚
ä¸è¿™æ ·åšä¼šäº§ç”Ÿä¸ä¸€è‡´çš„æ¨ç†ç»“æœã€‚</h4>
<p>åœ¨åŠ è½½æ¨¡å‹æƒé‡æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®ä¾‹åŒ–æ¨¡å‹ç±»ï¼Œå› ä¸ºè¯¥ç±»å®šä¹‰äº†ç½‘ç»œçš„ç»“æ„ã€‚
æˆ‘ä»¬å¯èƒ½å¸Œæœ›å°†æ­¤ç±»çš„ç»“æ„ä¸æ¨¡å‹ä¸€èµ·ä¿å­˜ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¨¡å‹ï¼ˆè€Œä¸æ˜¯
model.state_dict()ï¼‰ä¼ é€’ç»™ä¿å­˜å‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">torch.save(model, <span class="string">&#x27;model.pth&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = torch.load(<span class="string">&#x27;model.pth&#x27;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>Pytorchç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Pytorch</tag>
      </tags>
  </entry>
  <entry>
    <title>ã€ŠDG-Font Deformable Generative Networks for Unsupervised Font Generationã€‹</title>
    <url>/2022/01/20/4c71dd4cca5d/</url>
    <content><![CDATA[<h4
id="è®ºæ–‡åç§°dg-font-deformable-generative-networks-for-unsupervised-font-generationcvpr2021">è®ºæ–‡åç§°ï¼šã€ŠDG-Font:
Deformable Generative Networks for Unsupervised Font
Generationã€‹CVPR2021</h4>
<h4
id="è®ºæ–‡åœ°å€-httpsopenaccess.thecvf.comcontentcvpr2021htmlxie_dg-font_deformable_generative_networks_for_unsupervised_font_generation_cvpr_2021_paper.html">è®ºæ–‡åœ°å€ï¼š
https://openaccess.thecvf.com/content/CVPR2021/html/Xie_DG-Font_Deformable_Generative_Networks_for_Unsupervised_Font_Generation_CVPR_2021_paper.html</h4>
<h2 id="å…³é”®è¯">1ã€å…³é”®è¯ï¼š</h2>
<p>â€‹ Font-Generationã€Deformable Convolution Skip
Connectionã€Unsupervised Learning</p>
<h2 id="é¢†åŸŸèƒŒæ™¯">2ã€é¢†åŸŸèƒŒæ™¯ï¼š</h2>
<p>â€‹
å­—ä½“ç”Ÿæˆæ˜¯ä¸€ä¸ªå…·æœ‰æŒ‘æˆ˜çš„ä»»åŠ¡ï¼Œç°å­˜çš„å¤§éƒ¨åˆ†æ–¹æ³•éƒ½æ˜¯é€šè¿‡<strong>æœ‰ç›‘ç£å­¦ä¹ </strong>çš„æ–¹æ³•è¿›è¡Œå­—ä½“çš„ç”Ÿæˆï¼Œä»–ä»¬éœ€è¦å¤§é‡çš„<strong>paired
data</strong>ï¼ˆä¾‹å¦‚å¯¹åº”é£æ ¼çš„å­—ç¬¦å›¾åƒï¼‰ï¼Œç„¶è€Œå¤§é‡çš„è¿™äº›æ•°æ®éœ€è¦èŠ±è´¹éå¸¸æ˜‚è´µçš„ä»£ä»·å»è¿›è¡Œæ”¶é›†ã€‚</p>
<p>â€‹
å­—ä½“ç”Ÿæˆç›®æ ‡æ˜¯è‡ªåŠ¨çš„èƒ½å¤Ÿç”ŸæˆæŸç§ç‰¹å®šå­—ä½“çš„å­—ç¬¦ï¼Œå¹¶ä¸”åˆ›é€ ä¸€ä¸ªå­—ä½“å­—ç¬¦é›†ã€‚</p>
<p>â€‹
åœ¨ä¼ ç»Ÿçš„å­—ç¬¦é›†çš„åˆ›é€ æ–¹å¼ä¸­ï¼Œä¸¥é‡ä¾èµ–äºä¸“å®¶è®¾è®¡è€…ï¼Œç‹¬ç«‹çš„å»ç»˜åˆ¶æ¯ä¸€ä¸ªå­—ä½“çš„å›¾åƒï¼Œè¿™å¯¹äºä¸€äº›åŸºäºè¯­æ ‡çš„è¯­è¨€ï¼ˆæ¯”å¦‚ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ï¼‰å¾ˆä¸å‹å¥½ã€‚ä¸“å®¶ä»¬éœ€è¦æœ‰å¤§é‡çš„å·¥ä½œé‡å»è¿›è¡Œè®¾è®¡ï¼Œå­—ä½“ç”Ÿæˆé¢†åŸŸå°±æ˜¯ä¸ºäº†è§£å†³è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œä½¿ç”¨ç¥ç»ç½‘ç»œå»å­¦ä¹ ä»ä¸€ç§é£æ ¼åˆ°å¦ä¸€ç§é£æ ¼çš„æ˜ å°„å…³ç³»ï¼Œä»è€Œç”Ÿæˆç‰¹å®šè¯­è¨€çš„æŸç§é£æ ¼çš„ä¸€ä¸ªå­—ç¬¦é›†ã€‚</p>
<p>â€‹ ä¸å­—ä½“ç”Ÿæˆæœ€ç›¸å…³çš„<strong>å›¾åƒç”Ÿæˆé¢†åŸŸ ï¼ˆImage-To-Image
Translationï¼‰</strong>ï¼Œåœ¨é€šå¸¸çš„image-to-imageçš„è½¬æ¢æ¨¡å‹ä¸­é€šå¸¸å°†<strong>style</strong>å®šä¹‰ä¸º<strong>çº¹ç†å’Œé¢œè‰²</strong>ï¼Œè€Œå­—ä½“çš„<strong>style</strong>å¾€å¾€æ˜¯æŒ‡<strong>å­—ä½“çš„æ ¼å¼å‡ ä½•å½¢çŠ¶ã€ç¬”ç”»ç²—ç»†ã€ç¬”å°–å’Œè¿ç¬”ä¹¦å†™çš„æ¨¡å¼ç­‰å†…å®¹ã€‚ï¼ˆgeometric
transformation, stroke thickness, tips, and joined-up writing
patternï¼‰</strong>ï¼Œæ•…è€Œæ²¡æ³•ç›´æ¥åº”ç”¨åˆ°å­—ä½“çš„ç”Ÿæˆä¸Šã€‚åŒæ—¶åœ¨å›¾åƒä¸­å¾€å¾€é‡‡ç”¨çš„<strong>AdaIN-based</strong>æ–¹æ³•ï¼ˆè¿™ç§æ–¹æ³•æ˜¯åœ¨ç»Ÿè®¡å­¦ä¸Šå¯¹é½ç‰¹å¾æ¥è¿ç§»å›¾åƒçš„çº¹ç†å’Œé¢œè‰²ç‰¹å¾ï¼‰å¯¹äºå­—ä½“è¿™ç§å˜æ¢å±€éƒ¨çš„ç‰¹å¾æ¨¡å¼çš„ä»»åŠ¡æ˜¯ä¸åˆé€‚çš„ã€‚</p>
<p>â€‹
åŒæ—¶ï¼Œå¯¹äºimage-to-imageçš„ç”Ÿæˆä»»åŠ¡è€Œè¨€ï¼Œä¸€ç³»åˆ—çš„<strong>æ— ç›‘ç£</strong>çš„æ–¹æ³•ï¼Œéƒ½æ˜¯ä½¿ç”¨å¯¹æŠ—<strong>è®­ç»ƒç»“åˆConsistent
Contrains</strong>æ¥è¿›è¡Œçš„ã€‚å¦‚æœä½¿ç”¨image-to-imageçš„æ–¹æ³•ç›´æ¥åº”ç”¨åˆ°å­—ä½“ç”Ÿæˆä»»åŠ¡ä¸­çš„è¯ï¼Œå³ä½¿Consistent
Constraintsä¼šå¸®åŠ©æˆ‘ä»¬<strong>ä¿ç•™ä¸€ä¸ªå­—ç¬¦å›¾ç‰‡å†…å®¹çš„ç»“æ„</strong>ï¼Œä½†æ˜¯ä»–ä»¬ä»ç„¶ä¼šå¯¼è‡´<strong>è¯¸å¦‚æ¨¡ç³Šã€ä¸¢å¤±ç¬”ç”»</strong>ç­‰é—®é¢˜ã€‚</p>
<h2 id="å…ˆå‰å·¥ä½œæè¿°ä¸æ¯”è¾ƒ">3ã€å…ˆå‰å·¥ä½œæè¿°ä¸æ¯”è¾ƒï¼š</h2>
<h4 id="image-to-image-translation">1) Image-To-Image Translation</h4>
<p>â€‹ <strong>image-to-imageè¿ç§»çš„ä»»åŠ¡ï¼Œå°±æ˜¯å­¦ä¹ ä¸€ä¸ªä»source
domainåˆ°target
domainçš„æ˜ å°„å…³ç³»ã€‚å…¶å¯ä»¥ç”¨äºè‰ºæœ¯é£æ ¼è¿ç§»ã€è¯­ä¹‰åˆ†å‰²ã€å›¾åƒåŠ¨ç”»ç­‰ç­‰ã€‚</strong></p>
<ul>
<li>Pix2Pixæ˜¯åŸºäºConditional
GANçš„ç¬¬ä¸€ä¸ªåšImage-to-Imageçš„è¿ç§»ä»»åŠ¡ã€‚</li>
<li>Cycle-GANé€šè¿‡Cycle Consistency åšåˆ°äº†æ— ç›‘ç£å­¦ä¹ ã€‚</li>
</ul>
<p>â€‹
<strong>è¿™ç±»å·¥ä½œæ— æ³•ç›´æ¥åº”ç”¨è‡³Font-Generationä¸­ï¼ŒåŸå› åœ¨Part2çš„é¢†åŸŸèƒŒæ™¯æœ€åå·²ç»åšäº†ç®€ç•¥çš„æè¿°</strong></p>
<h4 id="font-generation">2) Font-Generation</h4>
<p>â€‹
<strong>å­—ä½“ç”Ÿæˆç›®æ ‡æ˜¯è‡ªåŠ¨çš„èƒ½å¤Ÿç”ŸæˆæŸç§ç‰¹å®šå­—ä½“çš„å­—ç¬¦ï¼Œå¹¶ä¸”åˆ›é€ ä¸€ä¸ªå­—ä½“å­—ç¬¦é›†ã€‚</strong></p>
<p>â€‹ <strong>ä¸€èˆ¬è€Œè¨€ï¼Œä»å‰çš„æ–¹æ³•æœ‰ä¸¤å¤§æ¡è·¯å¾„ï¼š</strong></p>
<ul>
<li><strong>åŸºäºpaired dataè¿›è¡Œè®­ç»ƒ</strong>
<ul>
<li>EMDå’ŒSAVAEè®¾è®¡çš„ç¥ç»ç½‘ç»œï¼Œåˆ†å‰²å¼€äº†å­—ä½“çš„å†…å®¹å’Œé£æ ¼ï¼ˆcontent &amp;
styleï¼‰çš„è¡¨ç¤ºï¼Œå¯ä»¥ç”Ÿæˆæ–°çš„é£æ ¼çš„å­—ç¬¦å†…å®¹ã€‚</li>
<li>zi2ziå’Œrewriteè¿™ä¸¤ç¯‡è®ºæ–‡ï¼Œé€šè¿‡ä¸Šåƒå¯¹åŒ¹é…çš„å­—ç¬¦ï¼ŒåŸºäºGANè¿›è¡Œäº†æœ‰ç›‘ç£å­¦ä¹ ã€‚å…¶ä¹‹åï¼Œå¾ˆå¤šæ–‡ç« åŸºäºzi2ziè¿›è¡Œäº†ç”Ÿæˆè´¨é‡çš„æ”¹è¿›ã€‚</li>
</ul></li>
<li><strong>åŸºäºè¾…åŠ©æ ‡è¯†ï¼ˆä¾‹å¦‚ç¬”ç”»ã€éƒ¨é¦–ç­‰å†…å®¹ï¼‰</strong>
<ul>
<li><strong>è¿™ç±»æ–¹æ³•å¾€å¾€éƒ½ä¾èµ–äºå…ˆéªŒçŸ¥è¯†ï¼Œå¹¶ä¸”åªèƒ½åº”ç”¨åˆ°ç‰¹å®šçš„ä¹¦å†™ç³»ç»Ÿä¸­å»ã€‚
å¹¶ä¸”è¿™äº›æ–¹æ³•ä»æ—§éœ€è¦æ•°åƒåŒ¹é…çš„æ•°æ®ä»¥åŠè¾…åŠ©æ³¨é‡Š</strong></li>
<li>ã€ŠScfont: Structure-guided chinese font generation via deep stacked
networks.ã€‹ç»™æ¯ä¸ªç¬”ç”»æ‰“ä¸Šæ ‡ç­¾ï¼Œæ¥é€šè¿‡ä¹¦å†™è½¨è¿¹çš„åˆæˆï¼Œç”Ÿæˆå­—çš„å›¾åƒ</li>
<li>DM-FONT
æå‡ºè§£çº ç¼ ç­–ç•¥æ¥è§£çº ç¼ å¤æ‚çš„å­—å½¢ç»“æ„ï¼Œè¿™æœ‰åŠ©äºåœ¨å¯Œæ–‡æœ¬è®¾è®¡ä¸­æ•è·å±€éƒ¨ç»†èŠ‚</li>
<li>CalliGAN
è¿›ä¸€æ­¥å°†å­—ç¬¦åˆ†è§£ä¸ºç»„ä»¶ï¼Œå¹¶æä¾›åŒ…æ‹¬ç¬”ç”»é¡ºåºåœ¨å†…çš„ä½çº§ç»“æ„ä¿¡æ¯æ¥æŒ‡å¯¼ç”Ÿæˆè¿‡ç¨‹ã€‚</li>
<li>ã€ŠRD-GAN: few/zero-shot chinese character styletransfer via radical
decomposition and renderingã€‹
ä½¿ç”¨å¯¹å­—ç¬¦åæ—éƒ¨é¦–çš„åˆ†è§£ï¼Œæ¥è¾¾åˆ°å­—ä½“çš„ç”Ÿæˆ</li>
<li>å…¶ä»–ä¸€äº›çš„æ–¹æ³•ä¹Ÿé€šè¿‡æå–å­—ç¬¦çš„éª¨æ¶å’Œç¬”ç”»çš„ç®—æ³•æ¥è¿›è¡Œç”Ÿæˆ</li>
</ul></li>
</ul>
<p>â€‹
<strong>ç›¸æ¯”ä¹‹ä¸‹ï¼Œè¯¥ç¯‡è®ºæ–‡æå‡ºçš„DG-FONTä¸éœ€è¦å…¶ä»–çš„è¾…åŠ©æ ‡è¯†ï¼Œå¹¶ä¸”æ˜¯æ— ç›‘ç£çš„å½¢å¼è¿›è¡Œçš„</strong></p>
<h4 id="deformable-convolution">3) Deformable Convolution</h4>
<p>â€‹
<strong>ä»‹ç»é“¾æ¥ï¼šhttps://blog.fantast.top/2022/01/07/basic5/</strong></p>
<p>â€‹ <strong>å¯å˜å½¢å·ç§¯Deformable
Convolution</strong>ï¼Œ<strong>å…¶åŠ å¼ºäº†CNNçš„å˜æ¢å»ºæ¨¡èƒ½åŠ›</strong>ï¼Œå®ƒé€šè¿‡é¢å¤–çš„åç§»é‡å¢åŠ äº†æ¨¡å—ä¸­çš„ç©ºé—´é‡‡æ ·ä½ç½®ã€‚
å¯å˜å½¢å·ç§¯å·²è¢«åº”ç”¨äºè§£å†³å‡ ä¸ªé«˜çº§è§†è§‰ä»»åŠ¡ï¼Œä¾‹å¦‚å¯¹è±¡æ£€æµ‹ã€è§†é¢‘å¯¹è±¡æ£€æµ‹é‡‡æ ·ã€è¯­ä¹‰åˆ†å‰²å’Œäººä½“å§¿æ€ä¼°è®¡ã€‚</p>
<p>â€‹ æœ€è¿‘ï¼Œä¸€äº›æ–¹æ³•å°è¯•åœ¨å›¾åƒç”Ÿæˆä»»åŠ¡ä¸­åº”ç”¨å¯å˜å½¢å·ç§¯ã€‚ TDAN[48]
é€šè¿‡ä½¿ç”¨å¯å˜å½¢å·ç§¯å¯¹é½ä¸¤ä¸ªè¿ç»­å¸§å¹¶è¾“å‡ºé«˜åˆ†è¾¨ç‡å¸§æ¥è§£å†³è§†é¢‘è¶…åˆ†è¾¨ç‡ä»»åŠ¡ã€‚</p>
<p>â€‹ <strong>åœ¨æˆ‘ä»¬æå‡ºçš„ DG-Font ä¸­ï¼Œå¯å˜å½¢å·ç§¯çš„åç§»é‡æ˜¯é€šè¿‡ learned
latent style codeæ¥è¿›è¡Œä¼°è®¡çš„ã€‚</strong>ï¼ˆå…·ä½“å†…å®¹è§åç»†èŠ‚ï¼‰</p>
<h2 id="ä¸»è¦è®¾è®¡æ€æƒ³">4ã€ä¸»è¦è®¾è®¡æ€æƒ³ï¼š</h2>
<p>â€‹ ä½œè€…æå‡ºäº†å¯å˜å½¢ç”Ÿæˆç½‘ç»œï¼ˆDeformable Generative
Networksï¼‰æ¥åš<strong>éç›‘ç£çš„å­—ä½“ç”Ÿæˆ</strong>ã€‚å…¶åˆ©ç”¨æä¾›çš„ç›®æ ‡å­—ä½“å›¾åƒï¼ˆ<strong>style
image input</strong>ï¼‰æ¥å°†ä¸€ç§å­—ä½“çš„å­—ç¬¦å˜å½¢å’Œè½¬æ¢ä¸ºå¦ä¸€ç§å­—ä½“ã€‚</p>
<p>â€‹ DG-FONT
åˆ†ç¦»äº†å­—ä½“çš„styleå’Œcontentï¼Œç„¶åå†å°†ä¸¤ä¸ªdomainçš„è¡¨ç¤ºè¿›è¡Œèåˆï¼Œç”Ÿæˆæ–°çš„å­—ä½“çš„å­—ç¬¦ã€‚</p>
<p>â€‹ å…¶æ ¸å¿ƒæ¨¡å—ä¸ºä¸€ä¸ªå«åš<strong>FDSCï¼ˆfeature deformation skip
connectionï¼‰çš„ä¸œè¥¿</strong>ï¼Œå¯ä»¥ç”¨æ¥é¢„æµ‹ä¸€ä¸ªä½ç§»æ˜ å°„mapç„¶åä½¿ç”¨ä½ç§»æ˜ å°„mapå»å¯¹low-levelçš„ç‰¹å¾å›¾åšå˜å½¢å·ç§¯ã€‚ç„¶åFDSCçš„è¾“å‡ºè¢«é€å…¥ä¸€ä¸ªæ··åˆå™¨ï¼Œç„¶åç”Ÿæˆæœ€ç»ˆçš„ç»“æœã€‚</p>
<p>â€‹
FDSCæ¨¡å—å°†ä¼š<strong>å¯¹å†…å®¹å›¾åƒçš„ä½å±‚çº§ç‰¹å¾è¿›è¡Œå˜æ¢ï¼Œå…¶èƒ½å¤Ÿä¿ç•™æ–‡å­—æœ¬èº«çš„æ¨¡å¼</strong>ï¼Œæ¯”å¦‚ç¬”ç”»å’Œåæ—éƒ¨é¦–ä¿¡æ¯ã€‚å› ä¸ºå¯¹äºå†…å®¹ç›¸åŒçš„ä¸¤ç§ä¸åŒé£æ ¼çš„å­—ä½“ï¼Œ<strong>å®ƒä»¬çš„æ¯ä¸€ç¬”ç”»é€šå¸¸éƒ½æ˜¯å¯¹åº”çš„</strong>ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ã€‚åˆ©ç”¨å­—ä½“çš„ç©ºé—´å…³ç³»ï¼Œåˆ©ç”¨FDSCè¿›è¡Œç©ºé—´å˜å½¢ï¼Œ<strong>æœ‰æ•ˆåœ°ä¿è¯äº†ç”Ÿæˆçš„å­—ç¬¦å…·æœ‰å®Œæ•´çš„ç»“æ„</strong>ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220116172624229.png" /></p>
<p>â€‹</p>
<p>â€‹
åŒæ—¶ï¼Œä¸ºäº†åŒºåˆ†ä¸åŒçš„é£æ ¼ï¼Œæ¨¡å‹è¿˜ä½¿ç”¨äº†ä¸€ä¸ªå¤šä»»åŠ¡æ ‡è¯†ç¬¦åˆ¤åˆ«å™¨Multi-Task
Discriminatorï¼Œä»¥ä¿è¯æ¯ä¸ªé£æ ¼éƒ½å¯ä»¥è¢«ç‹¬ç«‹åˆ¤å®šã€‚</p>
<h2 id="å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„">5ã€å…·ä½“æ–¹æ³•ä¸ç½‘ç»œæ¶æ„ï¼š</h2>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220116160758876.png" /></p>
<h3 id="æ•´ä½“æ¶æ„overall-pipeline">1) æ•´ä½“æ¶æ„ï¼ˆOverall Pipelineï¼‰</h3>
<ul>
<li><p><strong>æ¦‚è¿°</strong>ï¼šå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ•´ä¸ªç½‘ç»œåŒ…å«ä¸€ä¸ª Style
Encoderã€ä¸€ä¸ªContent Encoderã€ä¸€ä¸ªMixerã€å’Œä¸¤ä¸ªFDSCæ¨¡å—ã€‚</p>
<ul>
<li><p><strong>Style Encoder</strong> ä»è¾“å…¥å›¾åƒä¸­å­¦ä¹ Style
Representationã€‚å…·ä½“è€Œè¨€ï¼Œå…¶å°†ä¸€ä¸ªStyle
Imageä½œä¸ºè¾“å…¥ï¼Œå°†å…¶æ˜ å°„è‡³ä¸€ä¸ªStyle Latent Vector <span
class="math inline">\(Z_S\)</span>ã€‚</p></li>
<li><p><strong>Content Encoder</strong> æå–Content
Imagesçš„ç»“æ„ç‰¹å¾ï¼Œå°†å…¶ æ˜ å°„åˆ°ä¸€ä¸ªç©ºé—´ç‰¹å¾å›¾ <span
class="math inline">\(Z_C\)</span></p></li>
<li><p><strong>Deformable Convolution</strong>èƒ½å¤Ÿä½¿å¾—<em>Content
Encoder</em>å»è¯†åˆ«åˆ°ç›¸åŒå†…å®¹çš„å­—ä¸­Style-Invariantçš„ç‰¹å¾</p></li>
<li><p><strong>Mixer</strong> é€šè¿‡æ··åˆ<span
class="math inline">\(Z_C\)</span>å’Œ<span
class="math inline">\(Z_S\)</span>æ¥ç”Ÿæˆè¾“å‡ºå­—ç¬¦ã€‚å…¶ä½¿ç”¨<strong>AdaIN</strong>æ–¹æ³•å°†styleç‰¹å¾æ³¨å…¥Mixerä¸­ã€‚</p></li>
<li><p><strong>FDSC</strong>
æ¨¡å—èƒ½å¤Ÿå°†å˜å½¢çš„<em>Low-Level</em>ç‰¹å¾ä»<em>Content
Encoder</em>ä¸­ä¼ è¾“åˆ°Mixerä¸­</p></li>
<li><p><strong>Multi-Task Discriminator</strong>
ï¼šå½“å­—ç¬¦å›¾åƒä»ç”Ÿæˆç½‘ç»œç”Ÿæˆåï¼Œè¯¥åˆ¤åˆ«å™¨ç”¨æ¥å¯¹æ¯ä¸ªå•ç‹¬çš„ Style
åŒæ—¶æ‰§è¡Œåˆ¤æ–­ä»»åŠ¡ã€‚å¯¹äºæ¯ä¸€ä¸ªstyleæ¥è¯´ï¼Œ
Discriminatorçš„è¾“å‡ºæ˜¯ä¸€ä¸ªäºŒå…ƒåˆ†ç±»å™¨ï¼Œ
åˆ¤æ–­å…¶æ˜¯çœŸå®å›¾ç‰‡è¿˜æ˜¯ç”Ÿæˆå›¾ç‰‡ã€‚åŒæ—¶ï¼Œå› ä¸ºåœ¨è®­ç»ƒé›†ä¸­ï¼Œæœ‰å¤šç§ä¸åŒçš„å­—ä½“é£æ ¼ï¼Œæ‰€ä»¥åˆ¤åˆ«å™¨çš„è¾“å‡ºæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„é•¿åº¦æ˜¯æ‰€æœ‰é£æ ¼çš„æ•°é‡ï¼Œæ•°ç»„é‡Œçš„æ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªäºŒå…ƒå‘é‡ã€ä¾‹å¦‚ï¼Œå‡è®¾æ€»å…±æœ‰5ä¸ªé£æ ¼ï¼Œæœ€ç»ˆåˆ¤åˆ«å™¨è¾“å‡ºçš„åº”å½“æ˜¯å¦‚ä¸‹çš„ä¸€ä¸ªå‘é‡ï¼š</p>
<p>â€‹ [ [ 1 0 ] , [ 0 0 ] , [ 0 0 ] , [ 0 0 ] , [ 0 0 ] ]</p>
<p>ã€‘</p></li>
</ul></li>
<li><p><strong>è¾“å…¥</strong>ï¼š<strong>Style
Image</strong>ã€é£æ ¼Aï¼Œæ±‰å­—1ã€‘ã€<strong>Content
Image</strong>ã€é£æ ¼Bï¼Œæ±‰å­—2ã€‘</p></li>
<li><p><strong>è¾“å‡º</strong>ï¼š<strong>Output
Image</strong>ã€é£æ ¼Aï¼Œæ±‰å­—2ã€‘</p></li>
</ul>
<h3 id="style-encoder">2) Style Encoder</h3>
<ul>
<li><strong>æ¦‚è¿°</strong>ï¼šä»è¾“å…¥å›¾åƒä¸­å­¦ä¹  Style
Representationã€‚å…·ä½“è€Œè¨€ï¼Œå…¶å°†ä¸€ä¸ªStyle
Imageä½œä¸ºè¾“å…¥ï¼Œå°†å…¶æ˜ å°„è‡³ä¸€ä¸ªStyle Latent Vector <span
class="math inline">\(Z_S\)</span>ã€‚</li>
<li><strong>è¾“å…¥</strong>ï¼šStyle Image <span class="math inline">\(I_s
\in R^{H*W}\)</span></li>
<li><strong>è¾“å‡º</strong>ï¼šStyle Latent Vector <span
class="math inline">\(Z_s \in R\)</span></li>
<li><strong>ç½‘ç»œç»“æ„</strong>ï¼šå¦‚ä¸‹æ‰€ç¤º
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220119151744473.png" /></li>
</ul></li>
<li><strong>å…¬å¼è¡¨è¾¾</strong>ï¼š</li>
<li><strong>å®ç°ç»†èŠ‚ï¼ˆå®˜æ–¹ä»£ç ï¼‰</strong>
<ul>
<li>å…¶åœ¨æºä»£ç ä¸­ï¼Œå…¶ä¸ºGuidingNetæ–‡ä»¶éƒ¨åˆ†ï¼Œå¯ä¾›é€‰æ‹©çš„é¡¹æœ‰Vgg11ï¼ŒVgg13ï¼ŒVgg16ï¼ŒVgg19ç­‰ã€‚è¿™ä¸ªStyleEncoderç½‘ç»œå°†è¾“å…¥çš„StyleImageè¿›è¡Œç‰¹å¾çš„æå–ä»¥åï¼Œå¾—åˆ°ç‰¹å¾å‘é‡ï¼Œåœ¨Decoderä¸­ä½¿ç”¨AdaInèåˆä¹‹å‰ï¼Œæºä»£ç ä¸­è¿˜ç»è¿‡äº†ä¸€ä¸ªMLPæ¨¡å—ã€‚ç„¶åï¼Œåˆ©ç”¨MLPæ¨¡å—è¾“å‡ºçš„å†…å®¹ï¼Œå¯¹AdaIN2dé‡Œé¢çš„weightå’Œbiasè¿›è¡Œåˆå§‹åŒ–ï¼Œæœ€ç»ˆè¾¾åˆ°</li>
</ul></li>
</ul>
<h3 id="content-encoder">3) Content Encoder</h3>
<ul>
<li><p><strong>æ¦‚è¿°</strong>ï¼šæå–Content Imagesçš„ç»“æ„ç‰¹å¾ï¼Œå°†å…¶
æ˜ å°„åˆ°ä¸€ä¸ªç©ºé—´ç‰¹å¾å›¾ <span class="math inline">\(Z_C\)</span></p></li>
<li><p><strong>è¾“å…¥</strong>ï¼šContent Image <span
class="math inline">\(I_c \in R^{H*W}\)</span></p></li>
<li><p><strong>è¾“å‡º</strong>ï¼šContent Latent Vector <span
class="math inline">\(Z_c \in R\)</span></p></li>
<li><p><strong>ç½‘ç»œç»“æ„ç»†èŠ‚</strong>ï¼š</p>
<ul>
<li><p>in_channel = 3,out_channel=64,kernel_size=7 x 7,stride =
1,padding = 3 çš„å˜å½¢å·ç§¯å±‚ + IN(64) å½’ä¸€åŒ– + Activation(ReLu)</p></li>
<li><p>å¾—åˆ°FDSC-1æ¨¡å—çš„è¾“å…¥ skip1 [32, 64, 80, 80]</p></li>
<li><p>in_channel = 64,out_channel=128,kernel_size =4 x
4,stride=2,padding=1 çš„å˜å½¢å·ç§¯å±‚ + IN(128) å½’ä¸€åŒ– +
Activation(ReLu)</p></li>
<li><p>å¾—åˆ°FDSC-2æ¨¡å—çš„è¾“å…¥ skip2 [30,128,40,40]</p></li>
<li><p>in_channel =128,out_channel=256,kernel_size =4 x
4,stride=2,padding=1 çš„å˜å½¢å·ç§¯å±‚ + IN(256) å½’ä¸€åŒ– +
Activation(ReLu)</p></li>
<li><p>Nä¸ªResBlock</p>
<ul>
<li><p>æ¯ä¸ªResBlockå¦‚ä¸‹ï¼š</p></li>
<li><p>Input---&gt;Conv2D---&gt;Conv2D---&gt; + ---&gt; output</p>
<p><span
class="math inline">\(\downarrow\)</span>-------------------------------------------<span
class="math inline">\(\uparrow\)</span></p></li>
<li><p>Conv2D,in_dim=256,out_dim=256,kernel_size=3x3,stride=1,padding=1
æ™®é€šå·ç§¯å±‚</p></li>
</ul></li>
</ul></li>
<li><p><strong>ä¸¾ä¾‹</strong>ï¼š</p>
<ul>
<li>å‡è®¾è¾“å…¥å›¾åƒä¸º 80 * 80 ï¼ŒBatch_Size = 32 ,
é‚£ä¹ˆï¼šskip1,skip2å’Œæœ€ç»ˆçš„output <span
class="math inline">\(Z_c\)</span>çš„å¤§å°åˆ†åˆ«å¦‚ä¸‹ï¼š</li>
<li>skip1.shape: torch.Size([32, 64, 80, 80])</li>
<li>skip2.shape: torch.Size([32, 128, 40, 40])</li>
<li>ouput.shape: torch.Size([32, 256, 20, 20])</li>
</ul></li>
<li><p><strong>æ„ä¹‰</strong>ï¼šæå–Content
Imagesçš„ç»“æ„ç‰¹å¾ï¼Œåº”ç”¨å˜å½¢å·ç§¯å±‚èƒ½å¤Ÿä¿æŒå­—ä½“ç¬”ç”»ç»“æ„</p></li>
</ul>
<h3 id="feature-deformation-skip-connection-fdsc-module">4) Feature
Deformation Skip Connection ( FDSC Module)</h3>
<ul>
<li><p><strong>æ¦‚è¿°</strong>ï¼šå…¶ç”±ä¸€ä¸ªå˜å½¢å·ç§¯å±‚ç»„æˆï¼Œå…·ä½“çš„ä½œç”¨ä½œè€…åœ¨ä¹¦å†™æ—¶å†™åœ¨äº†Mixerçš„å·ç§¯å±‚åçš„å†…å®¹é‡Œ</p></li>
<li><p><strong>å®ç°ç»†èŠ‚</strong></p>
<ul>
<li><p>é¦–å…ˆï¼Œå…¶è¾“å…¥æ¥è‡ªäºContent
Encoderï¼Œä¹Ÿå°±æ˜¯æ–‡ä¸­æåŠçš„skip1å’Œskip2ï¼Œæˆ‘ä»¬ä»¥skip1ä¸ºä¾‹ç»§ç»­è®²è§£ï¼š</p></li>
<li><p>å…¶æ¬¡ï¼Œå®ƒä¼šå°†Skip1å’ŒMixerä¸­ç»è¿‡äº†Convä»¥åçš„å†…å®¹Aï¼ŒConcatä¸€èµ·ï¼Œç„¶åå°†è¿™ä¸ªConcatå®Œçš„ä¸œè¥¿æ”¾å…¥å˜å½¢å·ç§¯æ¨¡å—ä¸­ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°è®¡ç®—çš„Concat_Pre,æœ€åå°†è¿™ä¸ªConcat_Preå’ŒAå†Concatåˆ°ä¸€èµ·ï¼Œå¾—åˆ°æœ€ç»ˆçš„è¾“å‡ºã€‚</p></li>
<li><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨è®ºæ–‡çš„ç¤ºæ„å›¾ä¸­ï¼šè¿™ä¸ªFDSCæ¨¡å—æœ‰æ¥å›çš„ç®­å¤´è¡¨ç¤ºï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/å±å¹•æ•è·_2022_01_19_15_31_59_728.png" /></p></li>
</ul></li>
</ul>
<h3 id="mixer">5) Mixer</h3>
<ul>
<li><p><strong>æ¦‚è¿°</strong>ï¼šé€šè¿‡æ··åˆ<span
class="math inline">\(Z_C\)</span>å’Œ<span
class="math inline">\(Z_S\)</span>æ¥ç”Ÿæˆè¾“å‡ºå­—ç¬¦ã€‚å…¶ä½¿ç”¨<strong>AdaIN</strong>æ–¹æ³•å°†styleç‰¹å¾æ³¨å…¥Mixerä¸­ã€‚</p></li>
<li><p><strong>è¾“å…¥</strong>ï¼š <span class="math inline">\(Z_c \in
R\)</span>å³ContentEncoderçš„è¾“å‡ºï¼Œ256é€šé“çš„ç‰¹å¾å›¾
[32,256,20,20]</p></li>
<li><p><strong>è¾“å‡º</strong>ï¼š</p></li>
<li><p><strong>ç½‘ç»œç»“æ„åŠç»†èŠ‚</strong>ï¼š</p>
<ul>
<li>2ä¸ªResBlockï¼Œè¾“å‡ºä»ç„¶ä¸º256é€šé“çš„ç‰¹å¾å›¾ [32,256,20,20]</li>
<li>Upsampleä¸Šé‡‡æ · ï¼Œç‰¹å¾å›¾å¤§å°å˜ä¸º 40 x 40</li>
<li>Conv2dBlockï¼Œin_channel = 256,out_channel=128,kernel_size =5 x
5,stride=1,padding=2 çš„å·ç§¯å±‚ + AdIN(128) å½’ä¸€åŒ– + Activation(ReLu),
ç»è¿‡è¯¥å±‚åï¼Œè®¡ç®—å¾—åˆ°çš„å¤§å°åº”å½“ä¸º [32,128,40,40]
<ul>
<li>ç„¶åï¼Œéœ€è¦å°†æ­¤å±‚è¾“å‡ºçš„outputå’Œskip2åœ¨Channelé€šé“Concatèµ·æ¥ï¼Œå¾—åˆ°deformable_concat
[32,256,40,40]</li>
<li>ç„¶åå°†deformable_concatä¸skip2 è¾“å…¥ FDSCçš„å˜å½¢å·ç§¯æ¨¡å—ä¸­ï¼Œå¾—åˆ°
concat_pre [32,128,40,40] å’Œ offset2 [32,18,40,40]</li>
<li>æœ€åå°†cancat_preå’Œæœ€å¼€å§‹çš„output
Concatèµ·æ¥ï¼Œå¾—åˆ°è¯¥æ­¥çš„æœ€ç»ˆè¾“å‡ºï¼Œå¤§å°ä¸º [32ï¼Œ256ï¼Œ40ï¼Œ40]</li>
</ul></li>
<li>Upsampleä¸Šé‡‡æ ·ï¼Œç‰¹å¾å›¾å¤§å°å˜ä¸º80 x 80</li>
<li>Conv2dBlockï¼Œin_channel = 256,out_channel=64,kernel_size =5 x
5,stride=1,padding=2 çš„å·ç§¯å±‚ + AdIN(64) å½’ä¸€åŒ– + Activation(ReLu),
ç»è¿‡è¯¥å±‚åï¼Œè®¡ç®—å¾—åˆ°çš„å¤§å°åº”å½“ä¸º [32,64,80,80]
<ul>
<li>ç„¶åï¼Œéœ€è¦å°†æ­¤å±‚è¾“å‡ºçš„outputå’Œskip1åœ¨Channelé€šé“Concatèµ·æ¥ï¼Œå¾—åˆ°deformable_concat
[32,128,80,80]</li>
<li>ç„¶åå°†deformable_concatä¸skip1 è¾“å…¥ å˜å½¢å·ç§¯æ¨¡å—ä¸­ï¼Œå¾—åˆ° Concat_pre
[32,128,40,40] å’Œ offset2 [32,18,40,40]</li>
<li>æœ€åå°†cancat_preå’Œæœ€å¼€å§‹çš„outputConcatèµ·æ¥ï¼Œå¾—åˆ°è¯¥æ­¥çš„æœ€ç»ˆè¾“å‡ºï¼Œå¤§å°ä¸º
[32ï¼Œ256ï¼Œ40ï¼Œ40]</li>
</ul></li>
<li>Conv2dBlockï¼Œin_channel = 128,out_channel=3,kernel_size =7 x
7,stride=1,padding=3 çš„å·ç§¯å±‚ + Activation(Tanh),
ç»è¿‡è¯¥å±‚åï¼Œè®¡ç®—å¾—åˆ°çš„å¤§å°åº”å½“ä¸º [32,3,80,80]</li>
</ul></li>
</ul>
<h3 id="multi-task-discriminator">6) Multi-Task Discriminator</h3>
<ul>
<li><p><strong>æ¦‚è¿°</strong>ï¼šå½“å­—ç¬¦å›¾åƒä»ç”Ÿæˆç½‘ç»œç”Ÿæˆåï¼Œè¯¥åˆ¤åˆ«å™¨ç”¨æ¥å¯¹æ¯ä¸ªå•ç‹¬çš„
Style åŒæ—¶æ‰§è¡Œåˆ¤æ–­ä»»åŠ¡ã€‚å¯¹äºæ¯ä¸€ä¸ªstyleæ¥è¯´ï¼Œ
Discriminatorçš„è¾“å‡ºæ˜¯ä¸€ä¸ªäºŒå…ƒåˆ†ç±»å™¨ï¼Œ
åˆ¤æ–­å…¶æ˜¯çœŸå®å›¾ç‰‡è¿˜æ˜¯ç”Ÿæˆå›¾ç‰‡ã€‚</p></li>
<li><p><strong>è¾“å…¥</strong>ï¼š</p>
<ul>
<li>- x: images of shape (batch, 3, image_size, image_size).ï¼Œä¾‹å¦‚ä¸º 4ä¸ª
3 * 64 * 64çš„å›¾åƒ</li>
<li>- y: domain indices of shape (batch). ä¾‹å¦‚ y_in ä¸º 4ä¸ªéœ€è¦å…¶åˆ¤æ–­çš„
domainçš„æ ‡å·</li>
</ul></li>
<li><p><strong>è¾“å‡º</strong>ï¼šå„ä¸ªéœ€è¦åˆ¤æ–­çš„å¾—åˆ†æƒ…å†µ</p></li>
<li><p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">D = Discriminator(<span class="number">64</span>, <span class="number">4</span>)  <span class="comment"># åˆå§‹åŒ–åˆ¤åˆ«å™¨å‚æ•° 64 ä¸ºå›¾åƒå¤§å°ï¼Œ4ä¸ºè¯¥åˆ¤åˆ«å™¨éœ€è¦åˆ¤åˆ«åŒºåˆ†çš„domainçš„æ•°é‡</span></span><br><span class="line">x_in = torch.randn(<span class="number">2</span>, <span class="number">3</span>, <span class="number">64</span>, <span class="number">64</span>)  <span class="comment"># x_in ä¸º 2ä¸ª 3*64*64çš„å›¾åƒ  y_in ä¸º 2ä¸ªéœ€è¦å…¶åˆ¤æ–­çš„ domainçš„æ ‡å·</span></span><br><span class="line">y_in = torch.randint(<span class="number">0</span>, <span class="number">10</span>, size=(<span class="number">2</span>, )) <span class="comment"># å‡è®¾ä¸º[1,3] å°±æ˜¯è¦è®©Då»åˆ¤æ–­ï¼Œç¬¬ä¸€ä¸ªå›¾æ˜¯å¦å±äºdomain1ï¼Œç¬¬äºŒä¸ªå›¾æ˜¯å¦å±äºdomain3â€¦â€¦</span></span><br><span class="line">out, feat = D(x_in, y_in)</span><br><span class="line"><span class="built_in">print</span>(out, feat)    </span><br><span class="line"><span class="built_in">print</span>(out.shape, feat.shape)  <span class="comment"># outä¸ºDiscriminatoræ‰“çš„åˆ†æ•°ï¼ˆå†…éƒ¨ç®€åŒ–è¿‡ï¼‰,featä¸ºæ²¡å¤„ç†è¿‡çš„åŸå§‹è¾“å‡ºï¼Œå·®åˆ«è§ä¸‹ç¤ºä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">outã€‚shape = 1 * 2 ,outçš„ç¬¬ä¸€ä¸ªå€¼ç›¸å½“äºå–äº†featä¸­[1,1,1,1]å› ä¸ºæ˜¯ç¬¬ä¸€ä¸ªå›¾ç‰‡ï¼Œå¹¶ä¸”æ˜¯åˆ¤æ–­æ˜¯å¦å±äºdomain1çš„å€¼ï¼Œå³ä¸º1.7796</span></span><br><span class="line"><span class="string">outçš„ç¬¬äºŒä¸ªå€¼ç›¸å½“äºå–äº†featä¸­[2,3,1,1]å› ä¸ºæ˜¯ç¬¬äºŒä¸ªå›¾ç‰‡ï¼Œå¹¶ä¸”æ˜¯åˆ¤æ–­æ˜¯å¦å±äºdomain3çš„å€¼ï¼Œå³ä¸º0.9986</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">out: [1.7796, 0.9986]    </span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">featã€‚shape = 2 * 4 * 1 * 1 ï¼Œå…¶æœ‰2å¼ éœ€è¦åˆ¤æ–­çš„å›¾åƒï¼Œç¬¬ä¸€å¼ å›¾åƒæœ‰4ä¸ªå€¼ï¼Œåˆ†åˆ«æ˜¯æ ¹æ®domain0-domain3æ‰“çš„åˆ†æ•°</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">feat:tensor([[[[-0.8181]],  </span></span><br><span class="line"><span class="string">         [[ 1.7796]],</span></span><br><span class="line"><span class="string">         [[ 3.0122]],</span></span><br><span class="line"><span class="string">         [[ 0.9614]]],</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        [[[-0.5011]],</span></span><br><span class="line"><span class="string">         [[ 0.5076]],</span></span><br><span class="line"><span class="string">         [[ 3.4774]],</span></span><br><span class="line"><span class="string">         [[ 0.9986]]]]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>ç½‘ç»œç»†èŠ‚ï¼ˆå®˜æ–¹ä»£ç ï¼‰</strong></p>
<ul>
<li>ä¸è®ºæ–‡é™„å½•ä¸€è‡´ï¼š</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220119155654674.png" /></li>
</ul></li>
</ul>
<h2 id="æŸå¤±å‡½æ•°">6ã€æŸå¤±å‡½æ•°</h2>
<p>â€‹
è¯¥è®ºæ–‡çš„æ¨¡å‹æ—¨åœ¨é€šè¿‡æ— ç›‘ç£æ–¹æ³•å®ç°å­—ä½“çš„è‡ªåŠ¨ç”Ÿæˆã€‚ä¸ºæ­¤ï¼Œå…¶é‡‡ç”¨å››ç§æŸå¤±ã€‚</p>
<ul>
<li>ä½¿ç”¨ Adversarial loss æ¥äº§ç”Ÿé€¼çœŸçš„å›¾åƒã€‚</li>
<li>å¼•å…¥Content
ConsistencyæŸå¤±ï¼Œé¼“åŠ±ç”Ÿæˆçš„å›¾åƒå†…å®¹ä¸å‚è€ƒçš„å†…å®¹å›¾åƒä¸€è‡´;</li>
<li>åˆ©ç”¨å›¾åƒé‡å»ºæŸå¤±æ¥ä¿æŒå›¾åƒçš„åŸŸä¸å˜ç‰¹å¾</li>
<li>Deformation offset å½’ä¸€åŒ–ï¼Œé˜²æ­¢FDSCæ¨¡å—åç§»é‡è¿‡å¤§ã€‚</li>
</ul>
<h4 id="adversarial-loss">1ï¼‰ Adversarial loss</h4>
<p>â€‹
è¯¥ç½‘ç»œæ—¨åœ¨é€šè¿‡æ±‚è§£ä¸€ä¸ªæå°æå¤§ä¼˜åŒ–é—®é¢˜æ¥ç”Ÿæˆå¯ä¿¡çš„å›¾åƒã€‚å°±æ˜¯GANå¸¸ç”¨çš„æŸå¤±å‡½æ•°ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220322105213541.png" style="zoom: 80%;" /></p>
<p>â€‹ å…¶ä¸­<span
class="math inline">\(D_s\)</span>è¡¨ç¤ºå¯¹åº”ç±»å‹<strong>åˆ¤åˆ«å™¨</strong>è¾“å‡ºçš„<span
class="math inline">\(logit\)</span>åˆ†æ•°ã€‚</p>
<h4 id="content-consistency">2ï¼‰Content Consistency</h4>
<p>â€‹
åœ¨å¿½ç•¥å†…å®¹æ­£ç¡®æ€§çš„æƒ…å†µä¸‹ï¼Œé‡‡ç”¨å¯¹æŠ—æ€§æŸå¤±æ¥å¸®åŠ©æ¨¡å‹ç”Ÿæˆé€¼çœŸçš„é£æ ¼ã€‚ä¸ºäº†é˜²æ­¢æ¨¡å¼å´©æºƒï¼Œå¹¶ç¡®ä¿ä»ç›¸åŒå†…å®¹ä¸­æå–çš„ç‰¹å¾åœ¨ç»è¿‡å†…å®¹ç¼–ç å™¨åå¾—åˆ°çš„ç‰¹å¾åºåˆ—ä¸€è‡´ï¼Œè®ºæ–‡è®¾ç½®äº†å†…å®¹ä¸€è‡´æŸå¤±</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220322105408955.png" style="zoom:80%;" /></p>
<p>â€‹ ç¡®ä¿ç»™å®šçš„å†…å®¹å›¾åƒ<span
class="math inline">\(I_c\)</span>å’Œç”Ÿæˆå™¨ç”Ÿæˆçš„å›¾åƒï¼Œç»è¿‡å†…å®¹ç¼–ç å™¨<span
class="math inline">\(f_c\)</span>åæ˜¯ä¸€è‡´çš„ã€‚</p>
<h4 id="reconstruction-loss">3ï¼‰Reconstruction Loss</h4>
<p>â€‹ ä¸ºäº†ç¡®ä¿åœ¨ç»™å®šå‚è€ƒå†…å®¹å›¾åƒ<span
class="math inline">\(I_c\)</span>å’Œå‚è€ƒé£æ ¼å›¾åƒä¹Ÿæ˜¯<span
class="math inline">\(I_c\)</span>æ—¶ï¼Œç”Ÿæˆå™¨èƒ½å¤Ÿé‡æ„å‡ºæºå›¾åƒ<span
class="math inline">\(I_c\)</span>ï¼Œæˆ‘ä»¬æ–½åŠ äº†ä¸€ä¸ªé‡æ„æŸå¤±:</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220322105551098.png"
alt="image-20220322105551098" />
<figcaption aria-hidden="true">image-20220322105551098</figcaption>
</figure>
<p>â€‹ è¯¥æŸå¤±æœ‰åŠ©äºä¿æŒå…¶è¾“å…¥å›¾åƒ<span
class="math inline">\(I_c\)</span>çš„åŸŸä¸å˜ç‰¹å¾(ä¾‹å¦‚ï¼Œå†…å®¹)ã€‚</p>
<h4 id="deformation-offset-normalization">4ï¼‰Deformation offset
normalization</h4>
<p>â€‹
å¯å˜å½¢çš„åç§»ä½¿å¾—å·ç§¯æ—¶å€™çš„é‡‡æ ·ç½‘æ ¼å¯ä»¥è‡ªç”±å˜å½¢ã€‚ç”±äºè¾“å…¥å›¾åƒå’Œç”Ÿæˆå›¾åƒä¹‹é—´å­˜åœ¨å¤§é‡ç›¸åŒé¢œè‰²çš„åŒºåŸŸ(å¦‚èƒŒæ™¯è‰²å’Œå­—ç¬¦è‰²)ï¼Œè¿™ä½¿å¾—é—®é¢˜éš¾ä»¥ä¼˜åŒ–ï¼Œä¸”åç§»æ–¹æ¡ˆä¸å”¯ä¸€ã€‚
â€‹
åŒæ—¶ï¼Œå­—ä½“ç”Ÿæˆä¸»è¦å…³æ³¨å†…å®¹å­—ç¬¦å›¾åƒä¸ç›®æ ‡å­—ç¬¦å›¾åƒä¹‹é—´çš„ç¬”ç”»å…³ç³»ï¼Œå¦‚ç¬”ç”»çš„ç²—ç»†ã€ç¬”å°–ç­‰ã€‚ä½†æ˜¯ï¼Œå¯¹äºå†…å®¹ç›¸åŒä½†é£æ ¼ä¸åŒçš„å›¾åƒï¼ŒåŒä¸€ç¬”ç”»åœ¨è¿™ä¸¤å¹…å›¾åƒä¸­çš„ä½ç½®æ˜¯ç›¸è¿‘çš„ã€‚ä¸ºäº†æœ‰æ•ˆåœ°ä½¿ç”¨è¿™ä¸ªå¯å˜å½¢çš„å·ç§¯ç½‘ç»œï¼Œæˆ‘ä»¬å¯¹åç§»é‡æ–½åŠ äº†ä¸€ä¸ªçº¦æŸ<span
class="math inline">\(\delta_p\)</span>:</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220322105756227.png" /></p>
<p>å…¶ä¸­<span
class="math inline">\(\delta_p\)</span>ä¸ºå¯å˜å½¢å·ç§¯æ ¸çš„åç§»é‡ï¼Œ<span
class="math inline">\(R\)</span>ä¸ºå·ç§¯æ ¸çš„ä¸ªæ•°ã€‚</p>
<h4 id="æœ€ç»ˆlossåŠ æƒç›¸åŠ ">5ï¼‰æœ€ç»ˆLossï¼šåŠ æƒç›¸åŠ </h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220322105847411.png" /></p>
]]></content>
      <categories>
        <category>â“¶ è®ºæ–‡é˜…è¯»ç¬”è®°</category>
        <category>CVç›¸å…³è®ºæ–‡</category>
      </categories>
      <tags>
        <tag>Font Generation</tag>
        <tag>Deformable Convolution Skip Connection</tag>
        <tag>Unsupervised Learning</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç²¾ç®€ç³»åˆ—ç¬”è®°7â€”â€”å¹¶å‘</title>
    <url>/2022/08/05/b77a426aa9cd/</url>
    <content><![CDATA[<p><strong>çŸ¥è¯†æ¥æºï¼šã€ŠJavaæ ¸å¿ƒæŠ€æœ¯å·Iã€‹ç¬¬12ç« èŠ‚</strong></p>
<h4 id="å¤šè¿›ç¨‹ä¸å¤šçº¿ç¨‹çš„åŒºåˆ«">1ã€å¤šè¿›ç¨‹ä¸å¤šçº¿ç¨‹çš„åŒºåˆ«ï¼š</h4>
<ul>
<li>æ¯ä¸ªè¿›ç¨‹éƒ½æ‹¥æœ‰è‡ªå·±çš„ä¸€æ•´å¥—å˜é‡ï¼Œè€Œçº¿ç¨‹åˆ™å…±äº«æ•°æ®</li>
<li>çº¿ç¨‹æ›´è½»é‡çº§ï¼Œåˆ›å»ºã€æ’¤é”€ä¸€ä¸ªçº¿ç¨‹æ¯”å¯åŠ¨æ–°è¿›ç¨‹çš„å¼€é”€è¦å°å¾—å¤šã€‚</li>
</ul>
<h4 id="å¤šçº¿ç¨‹åŸºç¡€">2ã€å¤šçº¿ç¨‹åŸºç¡€</h4>
<ul>
<li><p>å¦‚ä½•å¼€å¯ä¸€ä¸ªæ–°çº¿ç¨‹ï¼Ÿ</p>
<ul>
<li><p>å°†ä»£ç æ”¾åœ¨ä¸€ä¸ªç±»çš„runæ–¹æ³•ä¸­ï¼Œè¿™ä¸ªç±»éœ€è¦å®ç°Runnableæ¥å£</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class T2 implements Runnable&#123;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ä»è¿™ä¸ªç±»æ„é€ ä¸€ä¸ªThreadå¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var r = new T2();</span><br><span class="line">var t = new Thread(r)</span><br></pre></td></tr></table></figure></li>
<li><p>å¯åŠ¨çº¿ç¨‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">t.start()</span><br></pre></td></tr></table></figure></li>
<li><p>æ³¨æ„ï¼šä¸è¦ç›´æ¥è°ƒç”¨Threadç±»æˆ–è€…Runnableå¯¹è±¡çš„runæ–¹æ³•ã€‚ç›´æ¥è°ƒç”¨runæ–¹æ³•åªä¼šåœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œè¿™ä¸ªä»»åŠ¡è€Œéå¯åŠ¨äº†æ–°çš„çº¿ç¨‹</p></li>
</ul></li>
<li><p>Threadå’ŒRunnableå…³ç³»ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220809180159239.png" style="zoom:50%;" /></p></li>
<li><p>é™¤å»ä¸Šè¿°æ–¹æ³•ï¼Œè¿˜æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥åˆ›å»ºçº¿ç¨‹ï¼š</p>
<ul>
<li><p>æ–¹æ³•1ï¼šç»§æ‰¿Threadç±»ï¼Œè¯¥ç±»å°±å¯ä»¥å½“ä½œçº¿ç¨‹ä½¿ç”¨ï¼Œé‡å†™runæ–¹æ³•å³å¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> Cat <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">		<span class="comment">//é‡å†™</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Cat</span> <span class="variable">cat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">cat.start();</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li><p>ä¸ºä»€ä¹ˆè°ƒç”¨start()æ–¹æ³•ï¼Œè€Œä¸æ˜¯è°ƒç”¨run()æ–¹æ³•</p>
<ul>
<li>å¦‚æœè°ƒç”¨runæ–¹æ³•ï¼Œç›¸å½“äºæ˜¯ä¸»çº¿ç¨‹ç›´æ¥æ‰§è¡Œäº†runæ–¹æ³•ï¼Œè€Œä¸æ˜¯æ–°å¼€äº†ä¸€ä¸ªçº¿ç¨‹å»è°ƒç”¨ã€‚</li>
</ul></li>
<li><p>startæ–¹æ³•å¹²äº†ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>startæ–¹æ³•ä¸­æœ‰ä¸€ä¸ªå…³é”®çš„æ–¹æ³•å«åšstart0æ–¹æ³•</li>
<li>start0æ–¹æ³•æ˜¯ä¸€ä¸ªnativeæ–¹æ³•ï¼Œç”±JVMæœºæ¥è°ƒç”¨çš„ï¼Œåº•å±‚æ˜¯Cæˆ–è€…C++å®ç°çš„ã€‚</li>
<li>startæ–¹æ³•è°ƒç”¨äº†start0æ–¹æ³•åï¼Œè¯¥çº¿ç¨‹ä¸ä¸€å®šä¼šé©¬ä¸Šæ‰§è¡Œï¼Œè€Œæ˜¯åªæ˜¯å°†çº¿ç¨‹å˜æˆäº†å¯è¿è¡ŒçŠ¶æ€ï¼Œå…·ä½“ä»€ä¹ˆæ—¶å€™æ‰§è¡Œå–å†³äºCPUç»Ÿä¸€è°ƒåº¦ã€‚</li>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220809222307189.png" style="zoom:67%;" /></li>
</ul></li>
</ul>
<h4 id="å¤šçº¿ç¨‹æœºåˆ¶">3ã€å¤šçº¿ç¨‹æœºåˆ¶</h4>
<p>â€‹
å½“å¼€å§‹è¿è¡ŒMainçš„æ—¶å€™ï¼Œå¼€å¯äº†ä¸€ä¸ªè¿›ç¨‹ã€‚è¯¥è¿›ç¨‹ä¼šå¼€å¯ä¸€ä¸ªMainçº¿ç¨‹ã€‚å½“åœ¨Mainçº¿ç¨‹ä¸­å¼€å¯æ–°çš„çº¿ç¨‹æ—¶ï¼ŒMainçº¿ç¨‹ä¸ä¼šé˜»å¡ã€‚å½“æ‰€æœ‰çº¿ç¨‹éƒ½ç»“æŸåï¼Œè¿›ç¨‹å°±ä¼šé€€å‡ºã€‚</p>
<p>â€‹ ä»¥ä¸‹æœ‰ä¸€ä¸ªå¤šçº¿ç¨‹å”®ç¥¨çš„é—®é¢˜ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SellTicket</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">SellTicket01</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SellTicket01</span>();</span><br><span class="line">        <span class="type">SellTicket01</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SellTicket01</span>();</span><br><span class="line">        <span class="type">SellTicket01</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SellTicket01</span>();</span><br><span class="line">        s1.start();</span><br><span class="line">        s2.start();</span><br><span class="line">        s3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SellTicket01</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">ticketNum</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(ticketNum &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Sells Finished&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                Thread.sleep(<span class="number">50</span>);</span><br><span class="line">            &#125;<span class="keyword">catch</span> (InterruptedException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; Sells One,Left:&quot;</span> + --ticketNum);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚ä½•é€šçŸ¥çº¿ç¨‹é€€å‡ºï¼Ÿ
<ul>
<li>å¯ä»¥é€šè¿‡åœ¨ä¸»çº¿ç¨‹å†…è°ƒç”¨å­çº¿ç¨‹çš„ä¸€ä¸ªæ–¹æ³•ï¼Œæ¥äººä¸ºæ§åˆ¶å­çº¿ç¨‹çš„é€€å‡º.</li>
</ul></li>
</ul>
<h4 id="çº¿ç¨‹çš„å…­ç§çŠ¶æ€thread.state">4ã€çº¿ç¨‹çš„å…­ç§çŠ¶æ€ï¼šThread.State</h4>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/Javaçº¿ç¨‹.png"
alt="Javaçº¿ç¨‹" />
<figcaption aria-hidden="true">Javaçº¿ç¨‹</figcaption>
</figure>
<ul>
<li>New æ–°å»ºçŠ¶æ€
<ul>
<li>çº¿ç¨‹è¿˜æ²¡æœ‰å¼€å§‹è¿è¡Œ</li>
</ul></li>
<li>Runnable å¯è¿è¡Œ
<ul>
<li>ä¸€æ—¦è°ƒç”¨startæ–¹æ³•ï¼Œå¿åŸå°±å¤„äºå¯è¿è¡ŒçŠ¶æ€ã€‚å°†ç”±æ“ä½œç³»ç»Ÿä¸ºå…¶åˆ†é…å…·ä½“çš„è¿è¡Œæ—¶é—´ã€‚å¤„äºè¯¥çŠ¶æ€ä¸‹çš„çº¿ç¨‹å¯èƒ½åœ¨è¿è¡Œï¼Œä¹Ÿå¯èƒ½ä¸åœ¨è¿è¡Œã€‚</li>
</ul></li>
<li>Blocked é˜»å¡</li>
<li>Waiting ç­‰å¾…
<ul>
<li>å½“çº¿ç¨‹å¤„äºé˜»å¡æˆ–ç­‰å¾…çŠ¶æ€ï¼Œæ˜¯æš‚æ—¶ä¸æ´»åŠ¨çš„ã€‚éœ€è¦ç”±çº¿ç¨‹è°ƒåº¦å™¨é‡æ–°æ¿€æ´»è¿™ä¸ªçº¿ç¨‹ã€‚</li>
<li>å½“ä¸€ä¸ªçº¿ç¨‹è¯•å›¾è·å–ä¸€ä¸ªå†…éƒ¨çš„å¯¹è±¡é”ï¼Œè€Œè¿™ä¸ªé”è¢«å…¶ä»–çº¿ç¨‹æ‰€å ç”¨ï¼Œå°±ä¼šå¤„äºé˜»å¡çŠ¶æ€ã€‚å½“å…¶ä»–æ‰€æœ‰è¿›ç¨‹éƒ½é‡Šæ”¾äº†è¿™ä¸ªé”å¹¶ä¸”çº¿ç¨‹è°ƒåº¦å™¨å…è®¸è¯¥çº¿ç¨‹æŒæœ‰è¿™ä¸ªé”ï¼Œå°†å˜æˆéé˜»å¡çŠ¶æ€</li>
<li>å½“çº¿ç¨‹ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹é€šçŸ¥è°ƒåº¦å™¨å‡ºç°ä¸€ä¸ªæ¡ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸ªçº¿ç¨‹ä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€
<ul>
<li>ä¾‹å¦‚è°ƒç”¨ Object.waitæˆ– Thread.joinæ–¹æ³•</li>
</ul></li>
</ul></li>
<li>Timed waiting
<ul>
<li>Thread.sleep
ç­‰å¸¦æœ‰è¶…æ—¶å‚æ•°çš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œä¼šä½¿å¾—çº¿ç¨‹è¿›å…¥è®¡æ—¶ç­‰å¾…çŠ¶æ€ï¼Œè¿™ä¸€çŠ¶æ€ä¸€ç›´ä¿æŒåˆ°è¶…æ—¶æœŸæ»¡æˆ–è€…æ¥æ”¶åˆ°é€‚å½“çš„é€šçŸ¥ã€‚</li>
</ul></li>
<li>Terminated
<ul>
<li>runæ–¹æ³•æ­£å¸¸é€€å‡ºï¼Œçº¿ç¨‹ç»ˆæ­¢</li>
<li>å› ä¸ºä¸€ä¸ªæ²¡æœ‰æ•è·çš„å¼‚å¸¸ï¼Œçº¿ç¨‹æ„å¤–ç»ˆæ­¢ã€‚</li>
</ul></li>
</ul>
<h4 id="çº¿ç¨‹çš„å±æ€§ä¸å¸¸ç”¨æ–¹æ³•">5ã€çº¿ç¨‹çš„å±æ€§ä¸å¸¸ç”¨æ–¹æ³•ï¼š</h4>
<ul>
<li><p>ä¸­æ–­çº¿ç¨‹</p>
<ul>
<li><p>æ¯ä¸ªçº¿ç¨‹æœ‰ä¸€ä¸ªå¸ƒå°”æ ‡å¿—ï¼Œå«åšä¸­æ–­çŠ¶æ€ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥ä¸æ—¶åœ°æ£€æŸ¥è¯¥æ ‡å¿—ï¼Œä»¥åˆ¤æ–­çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ã€‚å¯¹ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨<code>interrupt</code>æ–¹æ³•æ—¶ï¼Œä¼šè®¾ç½®è¿™ä¸ªæ ‡å¿—</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span>(!Thread.currentThread().isInterrupted())&#123;  <span class="comment">//æ£€æµ‹ä¸­æ–­æ ‡å¿—</span></span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>å¦‚æœçº¿ç¨‹è¢«é˜»å¡ï¼Œå°±æ— æ³•æ£€æŸ¥ä¸­æ–­çŠ¶æ€ã€‚å½“åœ¨ä¸€ä¸ªè¢«é˜»å¡çš„çº¿ç¨‹ä¸Šè°ƒç”¨interruptæ–¹æ³•æ—¶ï¼Œé˜»å¡è°ƒç”¨å°†è¢«ä¸€ä¸ªInterruptedExceptionå¼‚å¸¸ä¸­æ–­ã€‚</p></li>
<li><p>è¢«ä¸­æ–­åœ°çº¿ç¨‹å¯ä»¥ä¸éœ€è¦ç»ˆæ­¢ã€‚ä¸­æ–­ä¸€ä¸ªçº¿ç¨‹åªæ˜¯è¦å¼•èµ·å®ƒçš„æ³¨æ„ï¼Œè¢«ä¸­æ–­çš„çº¿ç¨‹å¯ä»¥å†³å®šå¦‚ä½•æ¥å“åº”ä¸­æ–­ã€‚</p></li>
</ul></li>
<li><p>å®ˆæŠ¤è¿›ç¨‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">t.setDaemon(true)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>å®ˆæŠ¤çº¿ç¨‹çš„å”¯ä¸€ç”¨é€”æ˜¯ç»™å…¶ä»–çº¿ç¨‹æä¾›æœåŠ¡ã€‚æ¯”å¦‚è¯´è®¡æ—¶å™¨çº¿ç¨‹ã€‚å½“åªå‰©ä¸‹å®ˆæŠ¤çº¿ç¨‹æ—¶ï¼Œè™šæ‹Ÿæœºå°±ä¼šé€€å‡ºã€‚</p></li>
<li><p>å¸¸è§çš„å®ˆæŠ¤çº¿ç¨‹ï¼šåƒåœ¾å›æ”¶æœºåˆ¶</p></li>
</ul></li>
<li><p>å¯ä»¥åˆ©ç”¨<code>setName</code>æ–¹æ³•ä¸ºçº¿ç¨‹è®¾ç½®åå­—</p></li>
<li><p>æœªæ•è·å¼‚å¸¸çš„å¤„ç†å™¨ï¼š</p>
<ul>
<li>çº¿ç¨‹çš„runæ–¹æ³•ä¸èƒ½æŠ›å‡ºä»»ä½•æ£€æŸ¥å‹å¼‚å¸¸ã€‚çº¿ç¨‹æ­»äº¡å‰ï¼Œä¸€åœºä¼šä¼ é€’åˆ°ä¸€ä¸ªç”¨äºå¤„ç†æœªæ•è·å¼‚å¸¸çš„å¤„ç†å™¨ã€‚è¿™ä¸ªå¤„ç†å™¨å¿…é¡»å±äºä¸€ä¸ªå®ç°äº†Thread.UncaughtExceptionHandlerçš„ç±»ã€‚</li>
<li>å¯ä»¥ä½¿ç”¨setUncaughtExceptionHandleræ–¹æ³•ä¸ºä»»ä½•çº¿ç¨‹å®‰è£…ä¸€ä¸ªå¤„ç†å™¨ã€‚å¦‚æœæ²¡æœ‰ä¸ºå•ä¸ªçº¿ç¨‹å®‰è£…å¤„ç†å™¨ï¼Œåˆ™å¤„ç†å™¨æ˜¯è¯¥çº¿ç¨‹çš„ThreadGroupå¯¹è±¡ï¼Œå®ƒçš„uncaughtExceptionæ–¹æ³•æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
<ul>
<li>å¦‚æœè¯¥çº¿ç¨‹ç»„æœ‰çˆ¶çº¿ç¨‹ç»„ï¼Œè°ƒç”¨çˆ¶çº¿ç¨‹ç»„çš„uncaughtExceptionæ–¹æ³•</li>
<li>å¦åˆ™ï¼Œå¦‚æœThread.getDefaultExceptionHandlerè¿”å›ä¸€ä¸ªénullçš„å¤„ç†å™¨ï¼Œè°ƒç”¨è¿™ä¸ªå¤„ç†å™¨</li>
<li>å¦åˆ™å¦‚æœThrowableæ˜¯ThreadDeathçš„ä¸€ä¸ªå®ä¾‹ï¼Œä»€ä¹ˆéƒ½ä¸åš</li>
<li>å¦åˆ™å°†çº¿ç¨‹çš„åå­—ä»¥åŠThrowableçš„å±•æŸœåŠè¾“å‡ºåˆ°Sytem.err</li>
</ul></li>
</ul></li>
<li><p>çº¿ç¨‹ä¼˜å…ˆçº§ï¼š</p>
<ul>
<li>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œé»˜è®¤æƒ…å†µä¸‹ç»§æ‰¿æ„é€ å®ƒçš„é‚£ä¸ªçº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚</li>
<li>ç”¨setPriorityæ–¹æ³•è®¾å®šä¼˜å…ˆçº§
<ul>
<li>MIN_PRIORITY 1</li>
<li>MAX_PRIORITY 10</li>
</ul></li>
<li>æ¯å½“çº¿ç¨‹è°ƒåº¦å™¨æœ‰æœºä¼šé€‰æ‹©æ–°çš„çº¿ç¨‹æ—¶ï¼Œå®ƒé¦–å…ˆé€‰æ‹©å…·æœ‰è¾ƒé«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹ã€‚ä½†æ˜¯çº¿ç¨‹çš„ä¼˜å…ˆçº§æåº¦ä¾èµ–äºå®¿ä¸»æœºå¹³å°çš„çº¿ç¨‹å®ç°ã€‚</li>
</ul></li>
<li><p>å¸¸ç”¨æ–¹æ³•</p>
<ul>
<li><p>setName</p></li>
<li><p>getName</p></li>
<li><p>start</p></li>
<li><p>run</p></li>
<li><p>setPriority æ›´æ”¹çº¿ç¨‹çš„ä¼˜å…ˆçº§</p></li>
<li><p>getPriority è·å–çº¿ç¨‹ä¼˜å…ˆçº§</p></li>
<li><p>sleep çº¿ç¨‹ä¼‘çœ </p></li>
<li><p>interrupt ä¸­æ–­çº¿ç¨‹</p></li>
</ul></li>
<li><p>çº¿ç¨‹ç¤¼è®©ä¸æ’é˜Ÿï¼š</p>
<ul>
<li>yieldæ–¹æ³•ï¼šçº¿ç¨‹è®©å‡ºCPUï¼Œè®©å…¶ä»–çº¿ç¨‹æ‰§è¡Œï¼Œä½†ç¤¼è®©çš„æ—¶é—´ä¸ç¡®å®šï¼Œæ‰€ä»¥ä¹Ÿä¸ä¸€å®šç¤¼è®©æˆåŠŸã€‚å…·ä½“ç”±ç³»ç»Ÿåº•å±‚æ¥å†³å®š.</li>
<li>joinæ–¹æ³•ï¼šçº¿ç¨‹æ’é˜Ÿï¼Œæ’é˜Ÿçš„çº¿ç¨‹æ’é˜Ÿåï¼Œåˆ™è‚¯å®šå…ˆæ‰§è¡Œå®Œæ’å…¥çš„çº¿ç¨‹æ‰€æœ‰çš„ä»»åŠ¡ã€‚</li>
</ul></li>
</ul>
<h4 id="çº¿ç¨‹åŒæ­¥é—®é¢˜">6ã€çº¿ç¨‹åŒæ­¥é—®é¢˜</h4>
<p>â€‹
å¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å­˜å–åŒä¸€ä¸ªå¯¹è±¡ï¼Œå–å†³äºçº¿ç¨‹è®¿é—®æ•°æ®çš„é¡ºåºï¼Œå¯èƒ½ä¼šå¯¼è‡´å¯¹è±¡è¢«ç ´åï¼Œè¿™ç§æƒ…å†µè¢«ç§°ä¸º<strong>ç«æ€æ¡ä»¶</strong>ã€‚</p>
<p>â€‹ è€ƒè™‘å¦‚ä¸‹é“¶è¡Œè½¬è´¦ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bank</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">double</span>[] accounts;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Bank</span><span class="params">(<span class="type">int</span> n,<span class="type">double</span> initialBalance)</span>&#123;</span><br><span class="line">        accounts = <span class="keyword">new</span> <span class="title class_">double</span>[n];</span><br><span class="line">        Arrays.fill(accounts,initialBalance);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(<span class="type">int</span> from,<span class="type">int</span> to,<span class="type">double</span> amount)</span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread());</span><br><span class="line">        accounts[from] -= amount;</span><br><span class="line">        System.out.printf(<span class="string">&quot; %10.2f from %d to %d&quot;</span>,amount,from,to);</span><br><span class="line">        accounts[to] += amount;</span><br><span class="line">        System.out.printf(<span class="string">&quot; TotalBalance: %10.2f\n&quot;</span>,getTotalBalance());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getTotalBalance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">double</span> a:accounts)&#123;</span><br><span class="line">            sum += a;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> accounts.length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">NACCOUNTS</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">double</span> <span class="variable">INITIAL_BALANCE</span> <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">double</span> <span class="variable">MAX_AMOUT</span> <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DELAY</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Bank</span> <span class="variable">bank</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bank</span>(NACCOUNTS,INITIAL_BALANCE);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;NACCOUNTS;i++)&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">fromAccount</span> <span class="operator">=</span> i;</span><br><span class="line">            <span class="type">Runnable</span> <span class="variable">r</span> <span class="operator">=</span> ()-&gt;&#123;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line">                    <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">                        <span class="type">int</span> <span class="variable">toAccount</span> <span class="operator">=</span> (<span class="type">int</span>)(bank.size() * Math.random());</span><br><span class="line">                        <span class="type">double</span> <span class="variable">amount</span> <span class="operator">=</span> MAX_AMOUT * Math.random();</span><br><span class="line">                        bank.transfer(fromAccount,toAccount,amount);</span><br><span class="line">                        Thread.sleep((<span class="type">int</span>)(DELAY*Math.random()));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">catch</span> (InterruptedException e)&#123;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="type">var</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(r);</span><br><span class="line">            t.start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç å…¶ä¸­æœ‰å‡ ä¸ªçº¿ç¨‹ä¼šæ›´æ–°é“¶è¡Œè´¦æˆ·è¶Šï¼Œè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œå¾ˆæœ‰å¯èƒ½æœ‰äº›é’±ä¼šä¸¢å¤±ï¼Œå¯¼è‡´æ€»é‡‘é¢å‡ºç°é—®é¢˜ã€‚é—®é¢˜åœ¨äºaccounts[to]
+= amount è¿™ä¸€æ“ä½œä¸æ˜¯åŸå­æ“ä½œã€‚</p>
<p><code>accounts[to] += amount</code> æŒ‡ä»¤å¯èƒ½éœ€è¦å¦‚ä¸‹æ­¥éª¤æ¥æ‰§è¡Œï¼š</p>
<ul>
<li>å°†accounts[to]åŠ è½½åˆ°å¯„å­˜å™¨</li>
<li>å¢åŠ amount</li>
<li>å°†ç»“æœå†™å›accounts[to]</li>
</ul>
<p>çº¿ç¨‹åœ¨ä»»ä½•ä¸€ä¸ªæ­¥éª¤çš„æ—¶å€™éƒ½æœ‰å¯èƒ½å¤±å»è¿è¡Œæƒã€‚å‡è®¾çº¿ç¨‹1æ‰§è¡Œäº†æ­¥éª¤1å’Œ2ï¼Œè¿è¡Œæƒè¢«æŠ¢å ã€‚æ­¤æ—¶çº¿ç¨‹2æ‰§è¡Œæ­¥éª¤1ã€2ã€3ï¼Œå®Œæˆåçº¿ç¨‹1å†æ‰§è¡Œæ­¥éª¤3.é‚£ä¹ˆçº¿ç¨‹2æ‰€ä½œçš„æ“ä½œç›¸å½“äºè¢«æŠ¹å»äº†ã€‚</p>
<p><strong>çº¿ç¨‹åŒæ­¥ï¼Œå³å½“æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å¯¹å†…å­˜è¿›è¡Œæ“ä½œæ—¶ï¼Œå…¶ä»–çº¿ç¨‹éƒ½ä¸å¯ä»¥å¯¹è¿™ä¸ªå†…å­˜åœ°å€è¿›è¡Œæ“ä½œï¼Œç›´åˆ°è¯¥çº¿ç¨‹å®Œæˆæ“ä½œï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½å¯¹è¯¥å†…å­˜åœ°å€è¿›è¡Œæ“ä½œã€‚</strong></p>
<h5 id="åˆ©ç”¨é”å¯¹è±¡å®ŒæˆåŒæ­¥">1ï¼‰åˆ©ç”¨é”å¯¹è±¡å®ŒæˆåŒæ­¥ï¼š</h5>
<p>â€‹ åˆ©ç”¨ReentrantLockä¿æŠ¤ä»£ç å—ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">bankLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"></span><br><span class="line">bankLock.lock();</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">	<span class="comment">// éœ€è¦è¢«ä¿æŠ¤çš„æ–¹æ³•</span></span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">	bankLock.unlock();  <span class="comment">//è§£é”æ–¹æ³•å¿…é¡»è¢«æ”¾åœ¨finallyæ–¹æ³•ä¸­</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
å‡è®¾ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨äº†å†…éƒ¨çš„æ–¹æ³•ï¼Œä½†åœ¨æ‰§è¡Œç»“æŸå‰è¢«æŠ¢å ã€‚å‡è®¾æ­¤æ—¶ç¬¬äºŒä¸ªçº¿ç¨‹è°ƒç”¨äº†æ–¹æ³•ï¼Œç”±äºç¬¬äºŒä¸ªçº¿ç¨‹ä¸èƒ½è·å¾—é”ï¼Œå°†åœ¨è°ƒç”¨lockæ–¹æ³•æ—¶è¢«é˜»å¡ã€‚ç›´åˆ°é”è¢«é‡Šæ”¾ã€‚</p>
<p>â€‹ è¿™ä¸ªé”ç§°ä¸ºé‡å…¥é”ï¼Œçº¿ç¨‹å¯ä»¥åå¤è·å¾—å·²ç»æ‹¥æœ‰çš„é”ã€‚</p>
<p>â€‹ æ‰€æœ‰ä¸€ä¸ªæŒæœ‰è®¡æ•°ï¼Œæ¥è·Ÿè¸ªå¯¹lockæ–¹æ³•çš„åµŒå¥—è°ƒç”¨ã€‚</p>
<ul>
<li>æ³¨æ„ï¼šä¸´ç•ŒåŒºçš„ä»£ç ä¸è¦å› ä¸ºæŠ›å‡ºå¼‚å¸¸è€Œè·³å‡ºä¸´ç•ŒåŒºï¼Œå› ä¸ºå¦‚æ­¤å¯èƒ½é”è¢«é‡Šæ”¾çš„æ—¶å€™ï¼Œå¯¹è±¡å¤„äºè¢«ç ´åçš„çŠ¶æ€ã€‚</li>
</ul>
<h5 id="æ¡ä»¶å¯¹è±¡">2ï¼‰æ¡ä»¶å¯¹è±¡</h5>
<p>â€‹
å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ¡ä»¶å¯¹è±¡æ¥ç®¡ç†é‚£äº›å·²ç»è·å¾—äº†ä¸€ä¸ªé”å´ä¸èƒ½åšæœ‰ç”¨å·¥ä½œçš„çº¿ç¨‹ã€‚</p>
<p>â€‹
å…·ä½“ä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼šå¦‚æœä¸€ä¸ªè´¦æˆ·æ²¡æœ‰è¶³å¤Ÿçš„èµ„é‡‘ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ä»è¿™ä¸ªè´¦æˆ·æœ‰é’±è½¬å‡ºã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(bank.getBalance(from) &gt;= amount)</span><br><span class="line">    <span class="comment">//ä½¿ç”¨è¿™æ ·çš„åˆ¤æ–­ï¼Œæ‰§è¡Œè¯¥ä»£ç å—çš„çº¿ç¨‹å¯èƒ½åœ¨æ­¤å¤„è¢«æ‰“æ–­</span></span><br><span class="line">	bank.transfer(fromAccount,toAccount,amount);</span><br><span class="line"><span class="comment">//æ‰€ä»¥çº¿ç¨‹å†æ¬¡è¿è¡Œå‰ï¼Œæœ‰å¯èƒ½è´¦æˆ·ä½™é¢å·²ç»ä½äºææ¬¾é‡‘é¢ã€‚å¿…é¡»ç¡®ä¿åœ¨æ£€æŸ¥ä½™é¢å’Œè½¬è´¦æ´»åŠ¨ä¹‹é—´ï¼Œæ²¡æœ‰å…¶ä»–çº¿ç¨‹ä¿®æ”¹ä½™é¢ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ä¸ªé”æ¥ä¿æŠ¤è¿™ä¸ªæµ‹è¯•å’Œè½¬è´¦æ“ä½œã€‚</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(<span class="type">int</span> from,<span class="type">int</span> to,<span class="type">double</span> amount)</span>&#123;</span><br><span class="line">    bankLock.lock();</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(accounts[from] &lt; amount)&#123;</span><br><span class="line">        	<span class="comment">//ç­‰å¾…</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">        bankLock.unlock();  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“è´¦æˆ·ä¸­æ²¡æœ‰è¶³å¤Ÿèµ„é‡‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ç­‰å¾…ï¼Œç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹å¾€è´¦æˆ·ä¸­å¢åŠ äº†èµ„é‡‘ã€‚ä½†æ˜¯è¯¥çº¿ç¨‹åˆè·å¾—äº†å¯¹bankLockçš„æ’ä»–æ€§è®¿é—®æƒï¼Œå› æ­¤åˆ«çš„çº¿ç¨‹æ²¡æœ‰å­˜æ¬¾çš„æœºä¼šï¼Œæ‰€ä»¥æ­¤å¤„è¦å¼•å…¥æ¡ä»¶å¯¹è±¡ã€‚</p>
<p>â€‹ ä¸€ä¸ªé”å¯¹è±¡å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå…³è”çš„æ¡ä»¶å¯¹è±¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> Condition sufficientFunds;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Bank</span><span class="params">()</span>&#123;</span><br><span class="line">    sufficientFunds = bankLock.newCondition();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœtransferæ–¹æ³•å‘ç°èµ„é‡‘ä¸è¶³åˆ™è°ƒç”¨<code>sufficientFunds.await()</code>ï¼Œå½“å‰çº¿ç¨‹æš‚åœï¼Œå¹¶æ”¾å¼ƒé”ã€‚è¿™å…è®¸å…¶ä»–çº¿ç¨‹æ‰§è¡Œã€‚</p>
<p>â€‹
ä¸€æ—¦è¯¥çº¿ç¨‹è°ƒç”¨awaitæ–¹æ³•ï¼Œå®ƒè¿›å…¥äº†è¿™ä¸ªæ¡ä»¶çš„ç­‰å¾…é›†ã€‚å³ä½¿é”é‡æ–°å¯ç”¨ï¼Œå®ƒä¹Ÿä¸ä¼šå›åˆ°æ´»åŠ¨çŠ¶æ€ã€‚åªæœ‰å¦ä¸€ä¸ªçº¿ç¨‹åœ¨åŒä¸€ä¸ªæ¡ä»¶ä¸Šè°ƒç”¨signalAllæ–¹æ³•çš„æ—¶å€™ï¼Œæ‰ä¼šå›åˆ°æ´»åŠ¨çŠ¶æ€ã€‚</p>
<p>â€‹
æ‰€ä»¥ï¼Œå½“å¦ä¸€ä¸ªçº¿ç¨‹å®Œæˆè½¬è´¦çš„æ—¶å€™ï¼Œåº”è¯¥è°ƒç”¨<code>sufficientFunds.signalAll()</code></p>
<p>â€‹
è¿™ä¸ªè°ƒç”¨é‡æ–°æ¿€æ´»ç­‰å¾…è¿™ä¸ªæ¡ä»¶çš„æ‰€æœ‰çº¿ç¨‹ã€‚è°ƒåº¦å™¨ä¼šå†æ¬¡å°†ä»–ä»¬æ¿€æ´»ï¼Œä¸€æ—¦é”å¯ç”¨ï¼Œå®ƒä»¬ä¸­çš„æŸä¸ªçº¿ç¨‹å°†ä»awaitè°ƒç”¨è¿”å›å¾—åˆ°è¿™ä¸ªé”ï¼Œå¹¶ä¸”ä»ä¹‹å‰æš‚åœçš„åœ°æ–¹ç»§ç»­æ‰§è¡Œã€‚</p>
<p>â€‹
<strong>æ³¨æ„ï¼šæ­¤æ—¶åº”å½“é‡æ–°å†æ¬¡æµ‹è¯•æ¡ä»¶ï¼Œå› ä¸ºä¸èƒ½ä¿è¯ç°åœ¨ä¸€å®šæ»¡è¶³æ¡ä»¶ã€‚signalAllæ–¹æ³•ä»…ä»…èµ·åˆ°é€šçŸ¥ä½œç”¨ã€‚</strong></p>
<p><strong>éå¸¸é‡è¦çš„æ˜¯ï¼šå½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨.await()çš„æ—¶å€™ï¼Œå®ƒæ²¡æœ‰åŠæ³•é‡æ–°è‡ªå·±æ¿€æ´»</strong></p>
<p><strong>ä»ç»éªŒä¸Šè®²ï¼Œåªè¦ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€æœ‰å˜åŒ–ï¼Œè€Œä¸”æœ‰å¯èƒ½åˆ©äºç­‰å¾…çš„çº¿ç¨‹ï¼Œå°±å¯ä»¥è°ƒç”¨signalAll</strong></p>
<p><strong>signalAllè°ƒç”¨å¹¶ä¸ä¼šç«‹å³æ¿€æ´»ä¸€ä¸ªç­‰å¾…çš„çº¿ç¨‹ï¼Œåªæ˜¯è§£é™¤ç­‰å¾…çº¿ç¨‹çš„é˜»å¡ï¼Œä½¿å¾—è¿™äº›çº¿ç¨‹å¯ä»¥åœ¨å½“å‰çº¿ç¨‹é‡Šæ”¾é”ä»¥åç«äº‰è®¿é—®å¯¹è±¡ã€‚</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.company;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bank</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">double</span>[] accounts;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">ReentrantLock</span> <span class="variable">bankLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line">	<span class="keyword">private</span> Condition sufficientFunds;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Bank</span><span class="params">(<span class="type">int</span> n,<span class="type">double</span> initialBalance)</span>&#123;</span><br><span class="line">        accounts = <span class="keyword">new</span> <span class="title class_">double</span>[n];</span><br><span class="line">        Arrays.fill(accounts,initialBalance);</span><br><span class="line">        sufficientFunds = bankLock.newCondition();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(<span class="type">int</span> from,<span class="type">int</span> to,<span class="type">double</span> amount)</span>&#123;</span><br><span class="line">        bankLock.lock();</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">while</span>(accounts[from] &lt; amount)</span><br><span class="line">                sufficientFunds.await();</span><br><span class="line">            System.out.println(Thread.currentThread());</span><br><span class="line">            accounts[from] -= amount;</span><br><span class="line">            System.out.printf(<span class="string">&quot; %10.2f from %d to %d&quot;</span>,amount,from,to);</span><br><span class="line">            accounts[to] += amount;</span><br><span class="line">            System.out.printf(<span class="string">&quot; TotalBalance: %10.2f\n&quot;</span>,getTotalBalance());</span><br><span class="line">            sufficientFunds.signalAll();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            bankLock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getTotalBalance</span><span class="params">()</span>&#123;</span><br><span class="line">        bankLock.lock();</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="type">double</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">double</span> a:accounts)&#123;</span><br><span class="line">                sum += a;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            bankLock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> accounts.length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">	</span><br></pre></td></tr></table></figure>
<h5
id="åŒæ­¥å…·ä½“æ–¹æ³•1synchronizedå…³é”®å­—">3ï¼‰åŒæ­¥å…·ä½“æ–¹æ³•1â€”â€”synchronizedå…³é”®å­—ï¼š</h5>
<p>â€‹
Lockå’ŒConditionå¯¹è±¡å¯ä»¥å……åˆ†æ§åˆ¶é”å®šï¼Œä½†å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨synchronizedå…³é”®å­—ã€‚å¦‚æœä¸€ä¸ªæ–¹æ³•å£°æ˜æ—¶æœ‰synchronizedå…³é”®å­—ï¼Œé‚£ä¹ˆå¯¹è±¡çš„é”å°†ä¿æŠ¤æ•´ä¸ªæ–¹æ³•ã€‚</p>
<p>â€‹ <strong>å†…éƒ¨å¯¹è±¡é”åªæœ‰ä¸€ä¸ªå…³è”æ¡ä»¶</strong>
<code>wait</code>æ–¹æ³•å¯ä»¥å°†çº¿ç¨‹å¢åŠ åˆ°ç­‰å¾…é›†ä¸­,<code>notifyAll</code>å¯ä»¥æ¥è§¦ç­‰å¾…çº¿ç¨‹çš„é˜»å¡.ä»¥ä¸‹ä»£ç ç­‰ä»·äºä¸Šè¿°ä»£ç ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(<span class="type">int</span> from,<span class="type">int</span> to,<span class="type">double</span> amount)</span>&#123;</span><br><span class="line">    <span class="comment">//éœ€è¦è¢«åŒæ­¥çš„ä»£ç ï¼Œå³åŒä¸€æ—¶åˆ»æ— è®ºå¤šå°‘çº¿ç¨‹è®¿é—®ï¼Œåªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå¦‚ä¸‹ä»£ç ã€‚</span></span><br><span class="line">    <span class="keyword">while</span>(accounts[from] &lt; amount)</span><br><span class="line">        wait();</span><br><span class="line">    accounts[from] -= amount;</span><br><span class="line">    accounts[to] += amount;</span><br><span class="line">    notifyAll();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„</strong>ï¼šå¦‚æœåŠ synchronizedçš„æ–¹æ³•æ˜¯éé™æ€æ–¹æ³•ï¼Œé”æ˜¯åŠ åœ¨thisæˆ–è€…å…¶ä»–å¯¹è±¡ä¸Šçš„</p>
<p>å¦‚æœåŠ synchronizedçš„æ–¹æ³•æ˜¯é™æ€æ–¹æ³•ï¼Œé”æ˜¯åŠ è½½å½“å‰ç±»æœ¬èº«ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">m2</span><span class="params">()</span>&#123; </span><br><span class="line">	<span class="keyword">synchronized</span>(SellTicket03.class)&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;m2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="åŒæ­¥å…·ä½“æ–¹æ³•2åŒæ­¥ä»£ç å—">4ï¼‰åŒæ­¥å…·ä½“æ–¹æ³•2â€”â€”åŒæ­¥ä»£ç å—ï¼š</h5>
<p>æ¯ä¸€ä¸ªJavaå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªé”ï¼Œå½“çº¿ç¨‹è¿›å…¥å¦‚ä¸‹å½¢å¼çš„å—æ—¶ï¼Œä¹Ÿå¯ä»¥è·å¾—é”ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(obj)&#123; <span class="comment">//è·å¾—å¯¹è±¡objçš„é”</span></span><br><span class="line">  <span class="comment">//éœ€è¦è¢«åŒæ­¥çš„ä»£ç </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="å…³äºä¸€äº›å»ºè®®">5ï¼‰å…³äºä¸€äº›å»ºè®®ï¼š</h5>
<ul>
<li><p>åœ¨ä»£ç ä¸­æœ€å¥½æ—¢ä¸ä½¿ç”¨Lock/Conditionä¹Ÿä¸é€‚ç”¨synchronizedå…³é”®å­—ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œåº”å½“ä½¿ç”¨java.util.concurrentåŒ…ä¸­çš„ä¸€äº›æœºåˆ¶ã€‚</p></li>
<li><p>å¦‚æœsynchronizedé€‚åˆï¼Œå°½å¯èƒ½ä½¿ç”¨æ­¤å…³é”®å­—</p></li>
<li><p>å¦‚æœéœ€è¦Lock/Conditionç‹¬æœ‰çš„èƒ½åŠ›ï¼Œå†ä½¿ç”¨æ­¤ç§æ–¹å¼</p></li>
</ul>
<h5 id="é”ä»€ä¹ˆæ—¶å€™ä¼šé‡Šæ”¾">6ï¼‰é”ä»€ä¹ˆæ—¶å€™ä¼šé‡Šæ”¾ï¼Ÿ</h5>
<ul>
<li>å½“å‰çº¿ç¨‹çš„åŒæ­¥æ–¹æ³•ã€åŒæ­¥ä»£ç å—æ‰§è¡Œç»“æŸ</li>
<li>å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­é‡åˆ°breakã€returnã€‚</li>
<li>å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­å‡ºç°äº†æœªå¤„ç†çš„Erroræˆ–Exceptionï¼Œå¯¼è‡´å¼‚å¸¸ç»“æŸ</li>
<li>å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­æ‰§è¡Œäº†çº¿ç¨‹å¯¹è±¡çš„waitï¼ˆï¼‰æ–¹æ³•ï¼Œå½“å‰çº¿ç¨‹æš‚åœï¼Œå¹¶é‡Šæ”¾é”ã€‚</li>
</ul>
<p>æ³¨æ„ï¼Œä»¥ä¸‹æ“ä½œä¸ä¼šé‡Šæ”¾é”ï¼š</p>
<ul>
<li>çº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•æ—¶ï¼Œç¨‹åºè°ƒç”¨Thread.sleepã€Thread.yield0æ–¹æ³•æš‚åœå½“å‰çº¿ç¨‹çš„æ‰§è¡Œï¼Œä¸ä¼šé‡Šæ”¾é”</li>
<li>çº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æ—¶ï¼Œå…¶ä»–çº¿ç¨‹è°ƒç”¨äº†è¯¥çº¿ç¨‹çš„suspend()æ–¹æ³•å°†è¯¥çº¿ç¨‹æŒ‚èµ·ï¼Œè¯¥çº¿ç¨‹ä¸ä¼šé‡Šæ”¾é”ã€‚</li>
</ul>
<h4 id="ä¸€äº›çº¿ç¨‹å®‰å…¨çš„é›†åˆ">7ã€ä¸€äº›çº¿ç¨‹å®‰å…¨çš„é›†åˆ</h4>
<p>å¦‚æœå¤šä¸ªçº¿ç¨‹å¹¶å‘çš„ä¿®æ”¹ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œå¾ˆå®¹æ˜“ç ´åã€‚æˆ‘ä»¬éœ€è¦çº¿ç¨‹å®‰å…¨çš„é›†åˆ</p>
<h5 id="é˜»å¡é˜Ÿåˆ—">1ï¼‰é˜»å¡é˜Ÿåˆ—</h5>
<p>è®¸å¤šçº¿ç¨‹é—®é¢˜å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªé˜Ÿåˆ—çš„æ–¹å¼æ¥æè¿°ã€‚</p>
<p>â€‹
æ¯”å¦‚é“¶è¡Œè½¬è´¦ï¼Œè½¬è´¦çº¿ç¨‹å¯ä»¥å°†è½¬è´¦æŒ‡ä»¤æ’å…¥é˜Ÿåˆ—ä¸­ï¼Œè€Œä¸æ˜¯ç›´æ¥è®¿é—®é“¶è¡Œå¯¹è±¡ã€‚åŒæ—¶å¦ä¸€ä¸ªçº¿ç¨‹ä¸“é—¨è´Ÿè´£ä»é˜Ÿåˆ—ä¸­å–å‡ºæŒ‡ä»¤ï¼Œè®¿é—®ä¿®æ”¹é“¶è¡Œå¯¹è±¡ã€‚</p>
<p>â€‹
è¯•å›¾å°†é˜Ÿåˆ—æ·»åŠ å…ƒç´ è€Œé˜Ÿåˆ—å·²æ»¡æˆ–è€…è¯•å›¾å–å…ƒç´ è€Œé˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œé˜»å¡é˜Ÿåˆ—å°†å¯¼è‡´çº¿ç¨‹é˜»å¡ã€‚</p>
<p>â€‹ LinkedBlockingQueue PriorityBlockingQueue
ç­‰è®¸å¤šjava.util.concurentåŒ…å†…çš„é›†åˆ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> blockingQueue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.nio.charset.*;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.*;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BlockQueueTest</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">FILE_QUEUE_SIZE</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span>  <span class="type">int</span> <span class="variable">SEARCH_THREADS</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Path</span> <span class="variable">DUMMY</span> <span class="operator">=</span> Path.of(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> BlockingQueue&lt;Path&gt; queue = <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(FILE_QUEUE_SIZE);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>(<span class="type">var</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in))&#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;Enter base directory&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">directory</span> <span class="operator">=</span> in.nextLine();</span><br><span class="line">            System.out.print(<span class="string">&quot;Enter keyword&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">keyWord</span> <span class="operator">=</span> in.nextLine();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//ç”Ÿäº§è€…çº¿ç¨‹</span></span><br><span class="line">            <span class="type">Runnable</span> <span class="variable">enumerator</span> <span class="operator">=</span> () -&gt;&#123;</span><br><span class="line">              <span class="keyword">try</span>&#123;</span><br><span class="line">                  enumerate(Path.of(directory));</span><br><span class="line">                  queue.put(DUMMY);  <span class="comment">//åœ¨ç½—åˆ—å®Œçš„æœ€åï¼Œæ·»åŠ ä¸€ä¸ªç©ºçš„è™šæ‹Ÿå…ƒç´ </span></span><br><span class="line">              &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">                  e.printStackTrace();</span><br><span class="line">              &#125;<span class="keyword">catch</span>(InterruptedException e)&#123;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(enumerator).start();</span><br><span class="line">            <span class="comment">//æœç´¢çº¿ç¨‹</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=SEARCH_THREADS;i++)&#123;</span><br><span class="line">                <span class="type">Runnable</span> <span class="variable">searcher</span> <span class="operator">=</span> () -&gt;&#123;</span><br><span class="line">                    <span class="keyword">try</span>&#123;</span><br><span class="line">                        <span class="type">var</span> <span class="variable">start</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>().getTime();</span><br><span class="line">                        <span class="type">var</span> <span class="variable">done</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">                        <span class="keyword">while</span>(!done)&#123;</span><br><span class="line">                            <span class="type">Path</span> <span class="variable">file</span> <span class="operator">=</span> queue.take();</span><br><span class="line">                            <span class="keyword">if</span>(file == DUMMY)&#123;   <span class="comment">//å½“æœç´¢çº¿ç¨‹æ‹¿åˆ°è¿™ä¸ªç©ºçš„è™šæ‹Ÿè·¯å¾„çš„æ—¶å€™ï¼Œè¯¥çº¿ç¨‹ç»ˆæ­¢ï¼Œå¹¶ä¸”æˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸ªç©ºçš„è™šæ‹Ÿè·¯å¾„é‡æ–°æ”¾å›é˜Ÿåˆ—ä¸­ï¼Œè®©åˆ«çš„æœç´¢çº¿ç¨‹ä¹ŸçŸ¥æ™“</span></span><br><span class="line">                                queue.put(file);</span><br><span class="line">                                done = <span class="literal">true</span>;</span><br><span class="line">                            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                                search(file,keyWord);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="type">var</span> <span class="variable">end</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>().getTime();</span><br><span class="line">                        System.out.printf(<span class="string">&quot;Thread %s Finished! Totally Cost:%dms\n&quot;</span>,Thread.currentThread(),end-start);</span><br><span class="line">                    &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;<span class="keyword">catch</span>(InterruptedException e)&#123;</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Thread</span>(searcher).start();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">enumerate</span><span class="params">(Path directory)</span> <span class="keyword">throws</span> IOException,InterruptedException&#123;</span><br><span class="line">        <span class="keyword">try</span>(Stream&lt;Path&gt; children = Files.list(directory))&#123;</span><br><span class="line">            <span class="keyword">for</span>(Path child:children.collect(Collectors.toList()))&#123;</span><br><span class="line">                <span class="keyword">if</span>(Files.isDirectory(child)) enumerate(child);</span><br><span class="line">                <span class="keyword">else</span> queue.put(child);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">search</span><span class="params">(Path file,String keyWord)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="keyword">try</span>(<span class="type">var</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(file,StandardCharsets.UTF_8))&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">lineNumber</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(in.hasNextLine())&#123;</span><br><span class="line">                lineNumber++;</span><br><span class="line">                <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> in.nextLine();</span><br><span class="line">                <span class="keyword">if</span>(line.contains(keyWord)) &#123;</span><br><span class="line">                    System.out.printf(<span class="string">&quot;%s,%s:%d:%s\n&quot;</span>,Thread.currentThread(),file,lineNumber,line);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>â€‹
ä¸Šè¿°ä»£ç ï¼Œç”Ÿäº§è€…çº¿ç¨‹æšä¸¾æ‰€æœ‰å­ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶æŠŠä»–ä»¬æ”¾åˆ°ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—ä¸­ã€‚</p>
<p>â€‹
åŒæ—¶å¯ç”¨å¤§é‡çš„æœç´¢çº¿ç¨‹ï¼Œæ¯ä¸ªæœç´¢çº¿ç¨‹ä»é˜Ÿåˆ—ä¸­å»é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰“å¼€å®ƒåæ‰“å°æ‰€æœ‰åŒ…å«è¯¥å…³é”®å­—çš„è¡Œã€‚</p>
<h5
id="é«˜æ•ˆçš„æ˜ å°„é›†å’Œé˜Ÿåˆ—å¹¶å‘æ•£åˆ—æ˜ å°„">2ï¼‰é«˜æ•ˆçš„æ˜ å°„ã€é›†å’Œé˜Ÿåˆ—â€”â€”å¹¶å‘æ•£åˆ—æ˜ å°„</h5>
<p>è¯¦è§ä¹¦</p>
<h4 id="ä»»åŠ¡å’Œçº¿ç¨‹æ± ">8ã€ä»»åŠ¡å’Œçº¿ç¨‹æ± ï¼š</h4>
<p>â€‹
æ„é€ ä¸€ä¸ªæ–°çš„çº¿ç¨‹å¼€é”€å¾ˆå¤§ï¼Œå› ä¸ºè¿™æ¶‰åŠä¸æ“ä½œç³»ç»Ÿçš„äº¤äº’ã€‚å¦‚æœä½ çš„ç¨‹åºä¸­åˆ›å»ºäº†å¤§é‡çš„ç”Ÿå‘½æœŸå¾ˆçŸ­çš„çº¿ç¨‹ï¼Œé‚£ä¹ˆä¸åº”è¯¥æŠŠæ¯ä¸ªä»»åŠ¡æ˜ å°„åˆ°ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ï¼Œè€Œåº”è¯¥ä½¿ç”¨çº¿ç¨‹æ± ã€‚</p>
<p>â€‹
çº¿ç¨‹æ± ä¸­æœ‰è®¸å¤šå‡†å¤‡è¿è¡Œçš„çº¿ç¨‹ï¼Œä¸ºçº¿ç¨‹æ± æä¾›ä¸€ä¸ªRunableå¯¹è±¡ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨runæ–¹æ³•ã€‚å½“runæ–¹æ³•é€€å‡ºæ—¶ï¼Œè¯¥çº¿ç¨‹ä¹Ÿä¸ä¼šæ­»äº¡ï¼Œè€Œæ˜¯ç•™åœ¨æ± ä¸­å‡†å¤‡ä¸ºä¸‹ä¸€ä¸ªè°ƒç”¨æä¾›æœåŠ¡ã€‚</p>
<h5 id="callableå’Œrunnable">1ï¼‰Callableå’ŒRunnable</h5>
<p>Runnableå°è£…äº†å¼‚æ­¥ä»»åŠ¡ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚Callableç±»ä¼¼ä½†æœ‰è¿”å›å€¼ã€‚</p>
<p>Futureæ¥å£ç”¨äºä¿å­˜å¼‚æ­¥è®¡ç®—çš„ç»“æœã€‚</p>
<p>FutureTaskå®ç°äº†Futureå’ŒRunnableæ¥å£ï¼Œæ‰€ä»¥å¯ä»¥æ„é€ ä¸€ä¸ªçº¿ç¨‹æ¥è¿è¡Œè¿™ä¸ªä»»åŠ¡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Callable&lt;Integer&gt; task = ...;</span><br><span class="line"><span class="type">var</span> <span class="variable">futureTask</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;Integer&gt;(task);</span><br><span class="line"><span class="type">var</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(futureTask);</span><br><span class="line">t.start();</span><br><span class="line"></span><br><span class="line"><span class="type">Integer</span> <span class="variable">result</span> <span class="operator">=</span> task.get();</span><br></pre></td></tr></table></figure>
<h5 id="æ‰§è¡Œå™¨">2ï¼‰æ‰§è¡Œå™¨ï¼š</h5>
<p>â€‹ Executorsç±»æœ‰è®¸å¤šæ–¹æ³•ç”¨äºæ„é€ çº¿ç¨‹æ± ã€‚</p>
<ul>
<li><p>newCachedThreadPool
ç¼“å­˜çº¿ç¨‹æ± ï¼Œå¦‚æœæœ‰ç©ºé—²çº¿ç¨‹å¯ç”¨å°±ä½¿ç”¨ï¼Œæ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚ç©ºé—²çº¿ç¨‹ä¼šä¿ç•™60sã€‚ï¼ˆå¦‚æœçº¿ç¨‹ç”Ÿå­˜æœŸçŸ­ï¼Œå¯ä»¥ä½¿ç”¨è¯¥çº¿ç¨‹ï¼‰</p></li>
<li><p>newFixedThreadPool
æ± ä¸­åŒ…å«å›ºå®šæ•°ç›®çš„çº¿ç¨‹ã€‚ç©ºé—²çº¿ç¨‹ä¼šä¸€ç›´ä¿ç•™ã€‚ä¸ºäº†è¾¾åˆ°æœ€ä¼˜çš„è¿è¡Œé€Ÿåº¦ï¼Œå¹¶å‘çº¿ç¨‹æ•°ç­‰äºå¤„ç†å™¨å†…æ ¸æ•°ï¼Œåº”å½“ä½¿ç”¨è¯¥ç§å›ºå®šçº¿ç¨‹æ± ã€‚</p></li>
<li><p>newSingleThreadExecutor
åªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œç”¨äºæ€§èƒ½åˆ†æ</p></li>
</ul>
<h5 id="å¦‚ä½•ä½¿ç”¨">3ï¼‰å¦‚ä½•ä½¿ç”¨ï¼Ÿ</h5>
<ul>
<li>è°ƒç”¨æ‰§è¡Œå™¨çš„é™æ€æ–¹æ³•åˆ›å»ºçº¿ç¨‹æ± </li>
<li>è°ƒç”¨submitæäº¤Runnableæˆ–Callableå¯¹è±¡</li>
<li>ä¿å­˜å¥½è¿”å›çš„Futureå¯¹è±¡ï¼Œä»¥ä¾¿å¾—åˆ°ç»“æœæˆ–è€…å–æ¶ˆä»»åŠ¡</li>
<li>å½“ä¸æƒ³å†æäº¤ä»»ä½•ä»»åŠ¡çš„æ—¶å€™ï¼Œè°ƒç”¨shutdownã€‚</li>
</ul>
<h5
id="ä½¿ç”¨æ‰§è¡Œå™¨æ¥æ§åˆ¶ä¸€ç»„ç›¸å…³çš„ä»»åŠ¡">4ï¼‰ä½¿ç”¨æ‰§è¡Œå™¨æ¥æ§åˆ¶ä¸€ç»„ç›¸å…³çš„ä»»åŠ¡</h5>
<ul>
<li><p>invokeAnyæ–¹æ³•æäº¤ä¸€ä¸ªCallableå¯¹è±¡é›†åˆä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œå¹¶è¿”å›æŸä¸ªå·²ç»å®Œæˆä»»åŠ¡çš„ç»“æœã€‚ï¼ˆå¾€å¾€ç”¨äºæœç´¢ç»“æœï¼‰åªè¦å…¶ä¸­ä¸€ä¸ªä»»åŠ¡å¾—åˆ°äº†ç­”æ¡ˆï¼Œè®¡ç®—å°±å¯ä»¥åœæ­¢äº†ã€‚</p></li>
<li><p>invokeAllæ–¹æ³•æäº¤ä¸€ä¸ªCallableå¯¹è±¡é›†åˆä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œè¯¥æ–¹æ³•ä¼šé˜»å¡ç›´åˆ°æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆï¼Œå¹¶è¿”å›ä¸€ä¸ªè¡¨ç¤ºæ‰€æœ‰ä»»åŠ¡ç­”æ¡ˆçš„ä¸€ä¸ªFutureå¯¹è±¡åˆ—è¡¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;Callable&lt;T&gt;&gt; tasks = ...</span><br><span class="line">List&lt;Future&lt;T&gt;&gt; results = executor.invokeAll(tasks);</span><br><span class="line"><span class="keyword">for</span>(Future&lt;T&gt; result:results)</span><br><span class="line">	processFurther(result.get());</span><br></pre></td></tr></table></figure></li>
<li><p>åˆ©ç”¨ExecutorCompletionServiceæ¥ç®¡ç†ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">service</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ExecutorCompletionService</span>&lt;T&gt;(executor);</span><br><span class="line"><span class="keyword">for</span>(Callable&lt;T&gt; task:tasks) service.submit(task);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;tasks.size();i++)&#123;</span><br><span class="line">	processFurther(service.take().get());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="ç¤ºä¾‹ç¨‹åº">5) ç¤ºä¾‹ç¨‹åºï¼š</h5>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExecutorDemo</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">occurrences</span><span class="params">(String word, Path path)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span> (<span class="type">var</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(path))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (in.hasNext())</span><br><span class="line">                <span class="keyword">if</span> (in.next().equals(word)) count++;</span><br><span class="line">            <span class="keyword">return</span> count;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException ex)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Set&lt;Path&gt; <span class="title function_">descendants</span><span class="params">(Path rootDir)</span> <span class="keyword">throws</span> IOException</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span> (Stream&lt;Path&gt; entries = Files.walk(rootDir))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> entries.filter(Files::isRegularFile)</span><br><span class="line">                    .collect(Collectors.toSet());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Callable&lt;Path&gt; <span class="title function_">searchForTask</span><span class="params">(String word, Path path)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> () -&gt; &#123;</span><br><span class="line">            <span class="keyword">try</span> (<span class="type">var</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(path))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">while</span> (in.hasNext())</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (in.next().equals(word)) <span class="keyword">return</span> path;</span><br><span class="line">                    <span class="keyword">if</span> (Thread.currentThread().isInterrupted())</span><br><span class="line">                    &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;Search in &quot;</span> + path + <span class="string">&quot; canceled.&quot;</span>);</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoSuchElementException</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">            <span class="keyword">throws</span> InterruptedException, ExecutionException, IOException</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span> (<span class="type">var</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in))</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;Enter base directory (e.g. /opt/jdk-9-src): &quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">start</span> <span class="operator">=</span> in.nextLine();</span><br><span class="line">            System.out.print(<span class="string">&quot;Enter keyword (e.g. volatile): &quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">word</span> <span class="operator">=</span> in.nextLine();</span><br><span class="line"></span><br><span class="line">            Set&lt;Path&gt; files = descendants(Path.of(start));</span><br><span class="line">            <span class="type">var</span> <span class="variable">tasks</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Callable&lt;Long&gt;&gt;();</span><br><span class="line">            <span class="keyword">for</span> (Path file : files)</span><br><span class="line">            &#123;</span><br><span class="line">                Callable&lt;Long&gt; task = () -&gt; occurrences(word, file);</span><br><span class="line">                tasks.add(task);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newCachedThreadPool();</span><br><span class="line">            <span class="comment">// use a single thread executor instead to see if multiple threads</span></span><br><span class="line">            <span class="comment">// speed up the search</span></span><br><span class="line">            <span class="comment">// ExecutorService executor = Executors.newSingleThreadExecutor();</span></span><br><span class="line"></span><br><span class="line">            <span class="type">Instant</span> <span class="variable">startTime</span> <span class="operator">=</span> Instant.now();</span><br><span class="line">            List&lt;Future&lt;Long&gt;&gt; results = executor.invokeAll(tasks);</span><br><span class="line">            <span class="type">long</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (Future&lt;Long&gt; result : results)</span><br><span class="line">                total += result.get();</span><br><span class="line">            <span class="type">Instant</span> <span class="variable">endTime</span> <span class="operator">=</span> Instant.now();</span><br><span class="line">            System.out.println(<span class="string">&quot;Occurrences of &quot;</span> + word + <span class="string">&quot;: &quot;</span> + total);</span><br><span class="line">            System.out.println(<span class="string">&quot;Time elapsed: &quot;</span></span><br><span class="line">                    + Duration.between(startTime, endTime).toMillis() + <span class="string">&quot; ms&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">var</span> <span class="variable">searchTasks</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Callable&lt;Path&gt;&gt;();</span><br><span class="line">            <span class="keyword">for</span> (Path file : files)</span><br><span class="line">                searchTasks.add(searchForTask(word, file));</span><br><span class="line">            <span class="type">Path</span> <span class="variable">found</span> <span class="operator">=</span> executor.invokeAny(searchTasks);</span><br><span class="line">            System.out.println(word + <span class="string">&quot; occurs in: &quot;</span> + found);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (executor <span class="keyword">instanceof</span> ThreadPoolExecutor) <span class="comment">// the single thread executor isn&#x27;t</span></span><br><span class="line">                System.out.println(<span class="string">&quot;Largest pool size: &quot;</span></span><br><span class="line">                        + ((ThreadPoolExecutor) executor).getLargestPoolSize());</span><br><span class="line">            executor.shutdown();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="fork-joinæ¡†æ¶">6ï¼‰fork-joinæ¡†æ¶</h5>
<p>â€‹
è¯¥æ¡†æ¶ç”¨äºæ”¯æŒè®¡ç®—å¯†é›†å‹ä»»åŠ¡ï¼Œä¸ºæ¯ä¸€ä¸ªå¤„ç†å™¨å†…æ ¸åˆ†åˆ«ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹ï¼Œå¦‚å›¾åƒæˆ–è§†é¢‘å¤„ç†ã€‚</p>
<h4 id="è¿›ç¨‹">8ã€è¿›ç¨‹</h4>
<ul>
<li><p>å»ºç«‹ä¸€ä¸ªè¿›ç¨‹ï¼ŒæŒ‡å®šæƒ³è¦æ‰§è¡Œçš„å‘½ä»¤</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var builder = new ProcessBuilder(&quot;gcc&quot;,&quot;myapp.c&quot;);</span><br></pre></td></tr></table></figure></li>
<li><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿›ç¨‹çš„å·¥ä½œç›®å½•ä¸è™šæ‹Ÿæœºç›¸åŒï¼Œå³ä¸ºå¯åŠ¨javaç¨‹åºçš„é‚£ä¸ªç›®å½•</p></li>
</ul>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaç²¾ç®€ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç²¾ç®€ç³»åˆ—ç¬”è®°6â€”â€”é›†åˆ</title>
    <url>/2022/08/02/66adf86c9b3f/</url>
    <content><![CDATA[<p><strong>çŸ¥è¯†æ¥æºï¼šã€ŠJavaæ ¸å¿ƒæŠ€æœ¯å·Iã€‹ç¬¬9ç« èŠ‚</strong></p>
<h3 id="ä¸€é›†åˆç®€ä»‹">ä¸€ã€é›†åˆç®€ä»‹</h3>
<h4 id="è®¾è®¡ç‰¹ç‚¹">1ã€è®¾è®¡ç‰¹ç‚¹ï¼š</h4>
<h5
id="åœ¨javaçš„é›†åˆæ¡†æ¶ä¸­é‡‡ç”¨äº†é›†åˆæ¥å£å’Œå®ç°åˆ†ç¦»çš„å½¢å¼">1ï¼‰åœ¨javaçš„é›†åˆæ¡†æ¶ä¸­ï¼Œé‡‡ç”¨äº†é›†åˆæ¥å£å’Œå®ç°åˆ†ç¦»çš„å½¢å¼</h5>
<p>ä»¥é˜Ÿåˆ—ä¸ºä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Queue</span>&lt;E&gt;&#123;</span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">add</span><span class="params">(E element)</span>;</span><br><span class="line">	E <span class="title function_">remove</span><span class="params">()</span>;</span><br><span class="line">	<span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸Šè¿°æ¥å£å¹¶ä¸å…³å¿ƒé˜Ÿåˆ—æ˜¯å¦‚ä½•å®ç°çš„ï¼Œæ¯ä¸€ä¸ªå®ç°éƒ½å¯ä»¥ç”¨ä¸€ä¸ªå®ç°äº†Queueæ¥å£çš„ç±»è¡¨ç¤ºã€‚è¿™æ ·å­å½“æƒ³è¦æ›´æ¢é˜Ÿåˆ—çš„å®ç°æ–¹å¼çš„æ—¶å€™ï¼Œç»´æŠ¤å°±å˜å¾—ååˆ†æ–¹ä¾¿ã€‚</li>
</ul>
<h5 id="æ”¯æŒæ³›å‹">2ï¼‰æ”¯æŒæ³›å‹</h5>
<p>æˆ‘ä»¬å¯ä»¥é™åˆ¶åœ¨ä¸€ä¸ªé›†åˆä¸­åªèƒ½æ”¾å…¥åŒä¸€ç§æ•°æ®ç±»å‹çš„å…ƒç´ ã€‚</p>
<h4 id="å¦‚ä½•è®¿é—®é›†åˆ">2ã€å¦‚ä½•è®¿é—®é›†åˆï¼š</h4>
<p>â€‹
é€šè¿‡ç»Ÿä¸€çš„æ–¹å¼â€”è¿­ä»£å™¨Iteratorï¼Œå®ƒæœ€æ˜æ˜¾çš„å¥½å¤„åœ¨äºæ— éœ€çŸ¥é“é›†åˆå†…éƒ¨å…ƒç´ æ˜¯æŒ‰ä»€ä¹ˆæ–¹å¼å­˜å‚¨çš„ã€‚</p>
<ul>
<li>Iteratoræ¥å£å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Iterator</span>&lt;E&gt;&#123;</span><br><span class="line">	E <span class="title function_">next</span><span class="params">()</span>;</span><br><span class="line">	<span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span>;</span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">remove</span><span class="params">()</span>;</span><br><span class="line">	<span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">forEachRemaining</span><span class="params">(Consumer&lt;? <span class="built_in">super</span> E&gt; action)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å¯¹äºæ ‡å‡†ç±»åº“ä¸­çš„ä»»ä½•é›†åˆéƒ½å¯ä»¥ä½¿ç”¨for eachå¾ªç¯</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(String element : c)&#123;</span><br><span class="line">	<span class="comment">//do something with element</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>æ³¨æ„ï¼šIteratoræ¥å£çš„nextæ–¹æ³•å’Œremoveæ–¹æ³•ä¹‹é—´å­˜åœ¨ä¾èµ–æ€§ã€‚</p>
<ul>
<li><p>removeæ–¹æ³•å°†ä¼šåˆ é™¤ä¸Šæ¬¡è°ƒç”¨nextæ–¹æ³•æ—¶è¿”å›çš„å…ƒç´ </p></li>
<li><p>åœ¨è°ƒç”¨removeæ–¹æ³•å‰ï¼Œå¿…é¡»è°ƒç”¨nextæ–¹æ³•</p></li>
</ul></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">it.next();</span><br><span class="line">it.remove();</span><br></pre></td></tr></table></figure>
<h4 id="é›†åˆçš„åŸºæœ¬æ¥å£collection">3ã€é›†åˆçš„åŸºæœ¬æ¥å£ï¼šCollection</h4>
<p>Javaç±»åº“ä¸­ï¼Œ<strong>é›†åˆç±»çš„åŸºæœ¬æ¥å£æ˜¯Collectionæ¥å£ï¼Œå®ƒæ˜¯é™¤<code>Map</code>å¤–æ‰€æœ‰å…¶ä»–é›†åˆç±»çš„æ ¹æ¥å£</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Collection</span>&lt;E&gt;&#123;</span><br><span class="line">	<span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E element)</span>;</span><br><span class="line">	Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span>;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸»è¦æä¾›äº†ä»¥ä¸‹ä¸‰ç§ç±»å‹çš„é›†åˆï¼š
<ul>
<li><code>List</code>ï¼šä¸€ç§æœ‰åºåˆ—è¡¨çš„é›†åˆ</li>
<li><code>Set</code>ï¼šä¸€ç§ä¿è¯æ²¡æœ‰é‡å¤å…ƒç´ çš„é›†åˆ</li>
<li><code>Map</code>ï¼šä¸€ç§é€šè¿‡é”®å€¼ï¼ˆkey-valueï¼‰æŸ¥æ‰¾çš„æ˜ å°„è¡¨é›†åˆ</li>
</ul></li>
</ul>
<h4 id="javaé›†åˆç±»çš„æ¥å£ç¤ºæ„å›¾">4ã€Javaé›†åˆç±»çš„æ¥å£ç¤ºæ„å›¾ï¼š</h4>
<ul>
<li><p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/QQå›¾ç‰‡20220803104614.jpg" style="zoom: 33%;" /></p></li>
<li><p>javaé›†åˆå…·ä½“çš„ç±»ï¼š</p>
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/63EB72806CBE9A7185533D84D249B482.jpg" /></li>
</ul></li>
</ul>
<h3 id="äºŒlist">äºŒã€List:</h3>
<h4 id="listæ¥å£">1ã€List<E>æ¥å£</h4>
<ul>
<li>åœ¨æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼š<code>boolean add(E e)</code></li>
<li>åœ¨æŒ‡å®šç´¢å¼•æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼š<code>boolean add(int index, E e)</code></li>
<li>åˆ é™¤æŒ‡å®šç´¢å¼•çš„å…ƒç´ ï¼š<code>E remove(int index)</code></li>
<li>åˆ é™¤æŸä¸ªå…ƒç´ ï¼š<code>boolean remove(Object e)</code></li>
<li>è·å–æŒ‡å®šç´¢å¼•çš„å…ƒç´ ï¼š<code>E get(int index)</code></li>
<li>è·å–é“¾è¡¨å¤§å°ï¼ˆåŒ…å«å…ƒç´ çš„ä¸ªæ•°ï¼‰ï¼š<code>int size()</code></li>
<li>æ˜¯å¦åŒ…å«æŸä¸ªæŒ‡å®šå…ƒç´ ï¼š<code>boolean contains(Object o)</code></li>
<li>è¿”å›æŸä¸ªå…ƒç´ çš„ç´¢å¼•,å¦‚æœä¸å­˜åœ¨è¿”å›-1ï¼š<code>int indexOf(Object o)</code></li>
</ul>
<h5 id="ç‰¹ç‚¹">1ï¼‰ç‰¹ç‚¹ï¼š</h5>
<ul>
<li>å…è®¸æ·»åŠ null</li>
<li>å…è®¸æ·»åŠ é‡å¤å…ƒç´ </li>
</ul>
<h5 id="å…¶ä»–æ“ä½œ">2ï¼‰å…¶ä»–æ“ä½œï¼š</h5>
<ul>
<li>ä½¿ç”¨List.of(1,2,3)æ ¹æ®ç»™å®šå…ƒç´ å¿«é€Ÿåˆ›å»ºList</li>
<li>å¦‚ä½•è½¬æ¢Listè‡³Array</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; list = List.of(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;pear&quot;</span>, <span class="string">&quot;banana&quot;</span>);</span><br><span class="line">String[] array = list.toArray(<span class="keyword">new</span> <span class="title class_">String</span>[list.size()]);</span><br></pre></td></tr></table></figure>
<h4 id="é“¾è¡¨-linkedlist">2ã€é“¾è¡¨ LinkedList:</h4>
<p>â€‹ Javaä¸­ï¼Œæ‰€æœ‰é“¾è¡¨çš„å®ç°éƒ½æ˜¯åŒå‘çš„ï¼Œå³Doubly LinkedList.</p>
<p>â€‹
æˆ‘ä»¬å¯ä»¥ç”¨è¿­ä»£å™¨æ¥ä¿®æ”¹æˆ–éå†è¿™ä¸ªé›†åˆï¼Œå¦‚æœä¸¤ä¸ªè¿­ä»£å™¨åŒæ—¶å¯¹æŸä¸ªé›†åˆæ“ä½œï¼Œåˆ™ä¼šé€ æˆæ··ä¹±ã€‚æ‰€ä»¥é“¾è¡¨è¿­ä»£å™¨è®¾è®¡ä¸ºå¯ä»¥æ£€æµ‹åˆ°è¿™ç§ä¿®æ”¹ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªConcurrentModificationExceptionå¼‚å¸¸ã€‚</p>
<p>â€‹
<strong>éµå¾ªè§„åˆ™</strong>ï¼šå¯ä»¥ä¸ºä¸€ä¸ªé›†åˆå…³è”å¤šä¸ªè¿­ä»£å™¨ï¼Œä½†éƒ½æ˜¯åªèƒ½è¯»å–é›†åˆã€‚æˆ–è€…å¯ä»¥å…³è”ä¸€ä¸ªèƒ½å¤ŸåŒæ—¶è¯»å†™çš„è¿­ä»£å™¨ã€‚</p>
<h4 id="æ•°ç»„åˆ—è¡¨-arraylist">3ã€æ•°ç»„åˆ—è¡¨ ArrayList:</h4>
<p>â€‹
è®¿é—®é›†åˆä¸­çš„å…ƒç´ å¯ä»¥é€šè¿‡è¿­ä»£å™¨ï¼Œæˆ–getå’Œsetéšæœºè®¿é—®ã€‚getä¸é€‚ç”¨äºé“¾è¡¨ï¼Œä½†å¾ˆé€‚ç”¨äºæ•°ç»„ã€‚æ‰€ä»¥å®ç°äº†ArrayListç±»ï¼Œå…¶å®ç°äº†Listæ¥å£ã€‚å°è£…äº†ä¸€ä¸ªå¯ä»¥åŠ¨æ€å†åˆ†é…çš„å¯¹è±¡æ•°ç»„ã€‚</p>
<h3 id="ä¸‰map">ä¸‰ã€Mapï¼š</h3>
<h4 id="mapkvæ¥å£">1ã€Map&lt;K,V&gt;æ¥å£</h4>
<ul>
<li>è·å¾—ä¸€ä¸ªå…ƒç´ çš„å€¼ï¼š<code>V get(K key)</code></li>
<li>åˆ é™¤ä¸€ä¸ªé”®å€¼å¯¹ï¼š<code>V remove(K key)</code></li>
<li>æ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹ï¼š<code>V put(K key, V value)</code></li>
<li>æ˜¯å¦åŒ…å«æŸä¸ªé”®ï¼š<code>boolean containsKey(K key)</code></li>
<li>è·å¾—é”®é›†(è¯¦è§æ˜ å°„)ï¼š<code>Set&lt;K&gt; keySet()</code></li>
<li>è·å¾—å€¼é›†(è¯¦è§æ˜ å°„)ï¼š<code>Collection&lt;V&gt; values()</code></li>
<li>è·å¾—é”®å€¼å¯¹é›†åˆ(è¯¦è§æ˜ å°„)ï¼š<code>Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet()</code></li>
</ul>
<h4 id="æ³¨æ„">2ã€æ³¨æ„ï¼š</h4>
<p>â€‹ ä½¿ç”¨<code>Map</code>æ—¶ï¼Œä»»ä½•ä¾èµ–é¡ºåºçš„é€»è¾‘éƒ½æ˜¯ä¸å¯é çš„ã€‚</p>
<h4 id="éå†map">3ã€éå†Mapï¼š</h4>
<p>â€‹
å¯¹<code>Map</code>æ¥è¯´ï¼Œè¦éå†<code>key</code>å¯ä»¥ä½¿ç”¨<code>for each</code>å¾ªç¯éå†<code>Map</code>å®ä¾‹çš„<code>keySet()</code>æ–¹æ³•è¿”å›çš„<code>Set</code>é›†åˆï¼Œå®ƒåŒ…å«ä¸é‡å¤çš„<code>key</code>çš„é›†åˆï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (String key : map.keySet()) &#123;</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">value</span> <span class="operator">=</span> map.get(key);</span><br><span class="line">    System.out.println(key + <span class="string">&quot; = &quot;</span> + value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å››equalsæ–¹æ³•å’Œhashcode">å››ã€equalsæ–¹æ³•å’ŒHashCode</h3>
<p>â€‹
è¦æ­£ç¡®ä½¿ç”¨<code>List</code>çš„<code>contains()</code>ã€<code>indexOf()</code>è¿™äº›æ–¹æ³•ï¼Œæ”¾å…¥çš„å®ä¾‹å¿…é¡»æ­£ç¡®è¦†å†™<code>equals()</code>æ–¹æ³•ï¼Œå¦åˆ™ï¼Œæ”¾è¿›å»çš„å®ä¾‹ï¼ŒæŸ¥æ‰¾ä¸åˆ°ã€‚åŒæ—¶ï¼Œåœ¨<code>Map</code>çš„å†…éƒ¨ï¼Œå¯¹<code>key</code>åšæ¯”è¾ƒä¹Ÿæ˜¯é€šè¿‡<code>equals()</code>å®ç°çš„ï¼Œè¿™ä¸€ç‚¹å’Œ<code>List</code>æŸ¥æ‰¾å…ƒç´ éœ€è¦æ­£ç¡®è¦†å†™<code>equals()</code>æ˜¯ä¸€æ ·çš„ï¼Œå³æ­£ç¡®ä½¿ç”¨<code>Map</code>å¿…é¡»ä¿è¯ï¼šä½œä¸º<code>key</code>çš„å¯¹è±¡å¿…é¡»æ­£ç¡®è¦†å†™<code>equals()</code>æ–¹æ³•ã€‚</p>
<p>â€‹
<code>List</code>å†…éƒ¨å¹¶ä¸æ˜¯é€šè¿‡<code>==</code>åˆ¤æ–­ä¸¤ä¸ªå…ƒç´ æ˜¯å¦ç›¸ç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨<code>equals()</code>æ–¹æ³•åˆ¤æ–­ä¸¤ä¸ªå…ƒç´ æ˜¯å¦ç›¸ç­‰ã€‚å› æ­¤ï¼Œè¦æ­£ç¡®ä½¿ç”¨<code>List</code>çš„<code>contains()</code>ã€<code>indexOf()</code>è¿™äº›æ–¹æ³•ï¼Œæ”¾å…¥çš„å®ä¾‹å¿…é¡»æ­£ç¡®è¦†å†™<code>equals()</code>æ–¹æ³•ã€‚</p>
<h4 id="equalsæ–¹æ³•éœ€è¦æ»¡è¶³çš„æ¡ä»¶-rstc">1ã€Equalsæ–¹æ³•éœ€è¦æ»¡è¶³çš„æ¡ä»¶ï¼š
RSTC</h4>
<ul>
<li>è‡ªåæ€§ï¼ˆReflexiveï¼‰ï¼šå¯¹äºé<code>null</code>çš„<code>x</code>æ¥è¯´ï¼Œ<code>x.equals(x)</code>å¿…é¡»è¿”å›<code>true</code>ï¼›</li>
<li>å¯¹ç§°æ€§ï¼ˆSymmetricï¼‰ï¼šå¯¹äºé<code>null</code>çš„<code>x</code>å’Œ<code>y</code>æ¥è¯´ï¼Œå¦‚æœ<code>x.equals(y)</code>ä¸º<code>true</code>ï¼Œåˆ™<code>y.equals(x)</code>ä¹Ÿå¿…é¡»ä¸º<code>true</code>ï¼›</li>
<li>ä¼ é€’æ€§ï¼ˆTransitiveï¼‰ï¼šå¯¹äºé<code>null</code>çš„<code>x</code>ã€<code>y</code>å’Œ<code>z</code>æ¥è¯´ï¼Œå¦‚æœ<code>x.equals(y)</code>ä¸º<code>true</code>ï¼Œ<code>y.equals(z)</code>ä¹Ÿä¸º<code>true</code>ï¼Œé‚£ä¹ˆ<code>x.equals(z)</code>ä¹Ÿå¿…é¡»ä¸º<code>true</code>ï¼›</li>
<li>ä¸€è‡´æ€§ï¼ˆConsistentï¼‰ï¼šå¯¹äºé<code>null</code>çš„<code>x</code>å’Œ<code>y</code>æ¥è¯´ï¼Œåªè¦<code>x</code>å’Œ<code>y</code>çŠ¶æ€ä¸å˜ï¼Œåˆ™<code>x.equals(y)</code>æ€»æ˜¯ä¸€è‡´åœ°è¿”å›<code>true</code>æˆ–è€…<code>false</code>ï¼›</li>
<li>å¯¹<code>null</code>çš„æ¯”è¾ƒï¼šå³<code>x.equals(null)</code>æ°¸è¿œè¿”å›<code>false</code>ã€‚</li>
</ul>
<h4 id="equalsç¼–å†™çš„æ–¹æ³•">2ã€Equalsç¼–å†™çš„æ–¹æ³•</h4>
<p>å› æ­¤ï¼Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹<code>equals()</code>æ–¹æ³•çš„æ­£ç¡®ç¼–å†™æ–¹æ³•ï¼š</p>
<ol type="1">
<li>å…ˆç¡®å®šå®ä¾‹â€œç›¸ç­‰â€çš„é€»è¾‘ï¼Œå³å“ªäº›å­—æ®µç›¸ç­‰ï¼Œå°±è®¤ä¸ºå®ä¾‹ç›¸ç­‰ï¼›</li>
<li>ç”¨<code>instanceof</code>åˆ¤æ–­ä¼ å…¥çš„å¾…æ¯”è¾ƒçš„<code>Object</code>æ˜¯ä¸æ˜¯å½“å‰ç±»å‹ï¼Œå¦‚æœæ˜¯ï¼Œç»§ç»­æ¯”è¾ƒï¼Œå¦åˆ™ï¼Œè¿”å›<code>false</code>ï¼›</li>
<li>å¯¹å¼•ç”¨ç±»å‹ç”¨<code>Objects.equals()</code>æ¯”è¾ƒï¼Œå¯¹åŸºæœ¬ç±»å‹ç›´æ¥ç”¨<code>==</code>æ¯”è¾ƒã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (o <span class="keyword">instanceof</span> Person) &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> (Person) o;</span><br><span class="line">        <span class="keyword">return</span> Objects.equals(<span class="built_in">this</span>.name, p.name) &amp;&amp; <span class="built_in">this</span>.age == p.age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="hashcodeæ–¹æ³•çš„ç¼–å†™è§„èŒƒ">3ã€HashCodeæ–¹æ³•çš„ç¼–å†™è§„èŒƒï¼š</h4>
<p>â€‹
é€šè¿‡<code>key</code>è®¡ç®—ç´¢å¼•çš„æ–¹å¼å°±æ˜¯è°ƒç”¨<code>key</code>å¯¹è±¡çš„<code>hashCode()</code>æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ª<code>int</code>æ•´æ•°ã€‚<code>HashMap</code>æ­£æ˜¯é€šè¿‡è¿™ä¸ªæ–¹æ³•ç›´æ¥å®šä½<code>key</code>å¯¹åº”çš„<code>value</code>çš„ç´¢å¼•ï¼Œç»§è€Œç›´æ¥è¿”å›<code>value</code>ã€‚</p>
<p>å› æ­¤ï¼Œæ­£ç¡®ä½¿ç”¨<code>Map</code>å¿…é¡»ä¿è¯ï¼š</p>
<ol type="1">
<li>ä½œä¸º<code>key</code>çš„å¯¹è±¡å¿…é¡»æ­£ç¡®è¦†å†™<code>equals()</code>æ–¹æ³•ï¼Œç›¸ç­‰çš„ä¸¤ä¸ª<code>key</code>å®ä¾‹è°ƒç”¨<code>equals()</code>å¿…é¡»è¿”å›<code>true</code>ï¼›</li>
<li>ä½œä¸º<code>key</code>çš„å¯¹è±¡è¿˜å¿…é¡»æ­£ç¡®è¦†å†™<code>hashCode()</code>æ–¹æ³•ï¼Œä¸”<code>hashCode()</code>æ–¹æ³•è¦ä¸¥æ ¼éµå¾ªä»¥ä¸‹è§„èŒƒï¼š</li>
</ol>
<ul>
<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œåˆ™ä¸¤ä¸ªå¯¹è±¡çš„<code>hashCode()</code>å¿…é¡»ç›¸ç­‰ï¼›</li>
<li>å¦‚æœä¸¤ä¸ªå¯¹è±¡ä¸ç›¸ç­‰ï¼Œåˆ™ä¸¤ä¸ªå¯¹è±¡çš„<code>hashCode()</code>å°½é‡ä¸è¦ç›¸ç­‰ã€‚</li>
</ul>
<p>ï¼ˆç¬¬äºŒæ¡å¦‚æœå°½é‡æ»¡è¶³ï¼Œåˆ™å¯ä»¥ä¿è¯æŸ¥è¯¢æ•ˆç‡ï¼Œå› ä¸ºä¸åŒçš„å¯¹è±¡ï¼Œå¦‚æœè¿”å›ç›¸åŒçš„<code>hashCode()</code>ï¼Œä¼šé€ æˆ<code>Map</code>å†…éƒ¨å­˜å‚¨å†²çªï¼Œä½¿å­˜å–çš„æ•ˆç‡ä¸‹é™ï¼‰</p>
<h4 id="hashcodeç¼–å†™çš„æ–¹æ³•">4ã€HashCodeç¼–å†™çš„æ–¹æ³•ï¼š</h4>
<p>â€‹
<code>equals()</code>ç”¨åˆ°çš„ç”¨äºæ¯”è¾ƒçš„æ¯ä¸€ä¸ªå­—æ®µï¼Œéƒ½å¿…é¡»åœ¨<code>hashCode()</code>ä¸­ç”¨äºè®¡ç®—ï¼›<code>equals()</code>ä¸­æ²¡æœ‰ä½¿ç”¨åˆ°çš„å­—æ®µï¼Œç»ä¸å¯æ”¾åœ¨<code>hashCode()</code>ä¸­è®¡ç®—ã€‚</p>
<p>â€‹
å®ç°<code>hashCode()</code>æ–¹æ³•å¯ä»¥é€šè¿‡<code>Objects.hashCode()</code>è¾…åŠ©æ–¹æ³•å®ç°ã€‚</p>
<h3 id="äº”mapå…·ä½“ç±»çš„ä½¿ç”¨">äº”ã€Mapå…·ä½“ç±»çš„ä½¿ç”¨</h3>
<h4 id="enummap">1ã€EnumMap</h4>
<p>â€‹
å¦‚æœä½œä¸ºkeyçš„å¯¹è±¡æ˜¯<code>enum</code>ç±»å‹ï¼Œé‚£ä¹ˆï¼Œè¿˜å¯ä»¥ä½¿ç”¨Javaé›†åˆåº“æä¾›çš„ä¸€ç§<code>EnumMap</code>ï¼Œå®ƒåœ¨å†…éƒ¨ä»¥ä¸€ä¸ªéå¸¸ç´§å‡‘çš„æ•°ç»„å­˜å‚¨valueï¼Œå¹¶ä¸”æ ¹æ®<code>enum</code>ç±»å‹çš„keyç›´æ¥å®šä½åˆ°å†…éƒ¨æ•°ç»„çš„ç´¢å¼•ï¼Œå¹¶ä¸éœ€è¦è®¡ç®—<code>hashCode()</code>.</p>
<h4 id="sortedmaptreemap">2ã€SortedMapâ€”â€”TreeMap</h4>
<p>â€‹
è¿˜æœ‰ä¸€ç§<code>Map</code>ï¼Œå®ƒåœ¨å†…éƒ¨ä¼šå¯¹Keyè¿›è¡Œæ’åºï¼Œè¿™ç§<code>Map</code>å°±æ˜¯<code>SortedMap</code>ã€‚æ³¨æ„åˆ°<code>SortedMap</code>æ˜¯æ¥å£ï¼Œå®ƒçš„å®ç°ç±»æ˜¯<code>TreeMap</code>ã€‚<strong><code>SortedMap</code>
ä¿è¯éå†æ—¶ä»¥Keyçš„é¡ºåºæ¥è¿›è¡Œæ’åºã€‚</strong></p>
<p>â€‹
ä½¿ç”¨<code>TreeMap</code>æ—¶ï¼Œæ”¾å…¥çš„Keyå¿…é¡»å®ç°<code>Comparable</code>æ¥å£ã€‚<code>Comparator</code>æ¥å£è¦æ±‚å®ç°ä¸€ä¸ªæ¯”è¾ƒæ–¹æ³•ï¼Œ<strong>å®ƒè´Ÿè´£æ¯”è¾ƒä¼ å…¥çš„ä¸¤ä¸ªå…ƒç´ <code>a</code>å’Œ<code>b</code>ï¼Œå¦‚æœ<code>a&lt;b</code>ï¼Œåˆ™è¿”å›è´Ÿæ•°ï¼Œé€šå¸¸æ˜¯<code>-1</code>ï¼Œå¦‚æœ<code>a==b</code>ï¼Œåˆ™è¿”å›<code>0</code>ï¼Œå¦‚æœ<code>a&gt;b</code>ï¼Œåˆ™è¿”å›æ­£æ•°ï¼Œé€šå¸¸æ˜¯<code>1</code>ã€‚<code>TreeMap</code>å†…éƒ¨æ ¹æ®æ¯”è¾ƒç»“æœå¯¹Keyè¿›è¡Œæ’åºã€‚</strong></p>
<p>â€‹ ä¹Ÿå¯ä»¥é€šè¿‡ç›´æ¥å®šä¹‰Comparatorçš„æ–¹å¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Map&lt;Student, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Student&gt;() &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Student p1, Student p2)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (p1.score == p2.score) &#123;</span><br><span class="line">        	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">return</span> p1.score &gt; p2.score ? -<span class="number">1</span> : <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="å…­ä½¿ç”¨propertiesç±»">å…­ã€ä½¿ç”¨Propertiesç±»ï¼š</h3>
<h4 id="è¯»å–é…ç½®æ–‡ä»¶">1ã€è¯»å–é…ç½®æ–‡ä»¶</h4>
<p>â€‹
Javaé»˜è®¤é…ç½®æ–‡ä»¶ä»¥<code>.properties</code>ä¸ºæ‰©å±•åï¼Œæ¯è¡Œä»¥<code>key=value</code>è¡¨ç¤ºï¼Œä»¥<code>#</code>è¯¾å¼€å¤´çš„æ˜¯æ³¨é‡Šã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå…¸å‹çš„é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># setting.properties</span><br><span class="line"></span><br><span class="line">last_open_file=/data/hello.txt</span><br><span class="line">auto_save_interval=60</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">f</span> <span class="operator">=</span> <span class="string">&quot;setting.properties&quot;</span>;</span><br><span class="line"><span class="type">Properties</span> <span class="variable">props</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">props.load(<span class="keyword">new</span> <span class="title class_">java</span>.io.FileInputStream(f));</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">filepath</span> <span class="operator">=</span> props.getProperty(<span class="string">&quot;last_open_file&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">interval</span> <span class="operator">=</span> props.getProperty(<span class="string">&quot;auto_save_interval&quot;</span>, <span class="string">&quot;120&quot;</span>);</span><br></pre></td></tr></table></figure>
<h4 id="å†™å…¥é…ç½®æ–‡ä»¶">2ã€å†™å…¥é…ç½®æ–‡ä»¶</h4>
<p>â€‹
å¦‚æœé€šè¿‡<code>setProperty()</code>ä¿®æ”¹äº†<code>Properties</code>å®ä¾‹ï¼Œå¯ä»¥æŠŠé…ç½®å†™å…¥æ–‡ä»¶ï¼Œä»¥ä¾¿ä¸‹æ¬¡å¯åŠ¨æ—¶è·å¾—æœ€æ–°é…ç½®ã€‚å†™å…¥é…ç½®æ–‡ä»¶ä½¿ç”¨<code>store()</code>æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Properties</span> <span class="variable">props</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">props.setProperty(<span class="string">&quot;url&quot;</span>, <span class="string">&quot;http://www.liaoxuefeng.com&quot;</span>);</span><br><span class="line">props.setProperty(<span class="string">&quot;language&quot;</span>, <span class="string">&quot;Java&quot;</span>);</span><br><span class="line">props.store(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;C:\\conf\\setting.properties&quot;</span>), <span class="string">&quot;è¿™æ˜¯å†™å…¥çš„propertiesæ³¨é‡Š&quot;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="ä¸ƒset">ä¸ƒã€Setï¼š</h3>
<ul>
<li>å°†å…ƒç´ æ·»åŠ è¿›<code>Set&lt;E&gt;</code>ï¼š<code>boolean add(E e)</code></li>
<li>å°†å…ƒç´ ä»<code>Set&lt;E&gt;</code>åˆ é™¤ï¼š<code>boolean remove(Object e)</code></li>
<li>åˆ¤æ–­æ˜¯å¦åŒ…å«å…ƒç´ ï¼š<code>boolean contains(Object e)</code></li>
</ul>
<p>â€‹
æ”¾å…¥<code>Set</code>çš„å…ƒç´ éœ€è¦æ­£ç¡®å®ç°<code>equals()</code>å’Œ<code>hashCode()</code>æ–¹æ³•ï¼Œ<code>Set</code>æ¥å£å¹¶ä¸ä¿è¯æœ‰åºï¼Œè€Œ<code>SortedSet</code>æ¥å£åˆ™ä¿è¯å…ƒç´ æ˜¯æœ‰åºçš„ï¼š</p>
<ul>
<li><code>HashSet</code>æ˜¯æ— åºçš„ï¼Œå› ä¸ºå®ƒå®ç°äº†<code>Set</code>æ¥å£ï¼Œå¹¶æ²¡æœ‰å®ç°<code>SortedSet</code>æ¥å£ï¼›</li>
<li><code>TreeSet</code>æ˜¯æœ‰åºçš„ï¼Œå› ä¸ºå®ƒå®ç°äº†<code>SortedSet</code>æ¥å£ã€‚</li>
</ul>
<h4 id="æ•£åˆ—é›†-hashset">1ã€æ•£åˆ—é›† HashSet:</h4>
<p>â€‹
èƒ½å¤Ÿå¿«é€ŸæŸ¥æ‰¾å…ƒç´ çš„æ•°æ®ç»“æ„ã€‚åœ¨Javaä¸­ï¼Œæ•£åˆ—è¡¨ç”¨é“¾è¡¨æ•°ç»„å®ç°ï¼Œæ¯ä¸ªåˆ—è¡¨è¢«ç§°ä¸ºæ¡¶ã€‚é€šå¸¸æˆ‘ä»¬å°†æ¡¶æ•°è®¾ç½®ä¸ºé¢„è®¡å…ƒç´ ä¸ªæ•°çš„75%~150%ã€‚è£…å¡«å› å­å¯ä»¥ç¡®å®šä½•æ—¶å¯¹æ•£åˆ—è¡¨è¿›è¡Œå†æ•£åˆ—ï¼Œä¸€èˆ¬ä¸º0.75ã€‚</p>
<p>â€‹
åœ¨æ•£åˆ—è¡¨ä¸­æ’å…¥æŸå…ƒç´ ï¼Œéœ€è¦å…ˆè®¡ç®—è¯¥å…ƒç´ çš„hashå€¼ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ¡¶ï¼Œå†å°†å…¶ä¸æ¡¶å†…çš„å…ƒç´ æ¯”è¾ƒæ˜¯å¦æœ‰é‡å¤å³å¯ï¼Œæ— éœ€å’Œæ•£åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ æ¯”è¾ƒ.</p>
<h4 id="æ ‘é›†-treeset">2ã€æ ‘é›† TreeSet:</h4>
<p>â€‹
æœ‰åºé›†åˆ,<strong>ç”±çº¢é»‘æ ‘å®ç°.å€¼å°†è‡ªåŠ¨çš„æŒ‰ç…§æ’åºå‰åçš„é¡ºåºå®ç°.è¦ä½¿ç”¨æ ‘é›†</strong>,å¿…é¡»èƒ½å¤Ÿæ¯”è¾ƒå…ƒç´ ,æ‰€ä»¥è¿™äº›å…ƒç´ å¿…é¡»å®ç°Comparableæ¥å£,æˆ–è€…æ„é€ é›†åˆçš„æ—¶å€™æä¾›ä¸€ä¸ªComparator.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var parts = new TreeSet&lt;Item&gt;();   //ä¼šæŒ‰ç…§Itemçš„é»˜è®¤æ’åº</span><br><span class="line">parts.add(new Item(&quot;a&quot;,1));</span><br><span class="line">parts.add(new Item(&quot;b&quot;,2));</span><br><span class="line">parts.add(new Item(&quot;c&quot;,3));</span><br><span class="line"></span><br><span class="line">var sortByDescription = new TreeSet&lt;Item&gt;   (Comparator.comparing(Item::getDescription));  //æä¾›ä¸€ä¸ªComparator,é€šè¿‡Itemçš„æè¿°æ’åº</span><br><span class="line"> </span><br><span class="line">sortByDescription.addAll(parts);</span><br></pre></td></tr></table></figure>
<h3 id="å…«queue">å…«ã€Queueï¼š</h3>
<ul>
<li><code>int size()</code>ï¼šè·å–é˜Ÿåˆ—é•¿åº¦ï¼›</li>
<li><code>boolean add(E)</code>/<code>boolean offer(E)</code>ï¼šæ·»åŠ å…ƒç´ åˆ°é˜Ÿå°¾ï¼›</li>
<li><code>E remove()</code>/<code>E poll()</code>ï¼šè·å–é˜Ÿé¦–å…ƒç´ å¹¶ä»é˜Ÿåˆ—ä¸­åˆ é™¤ï¼›</li>
<li><code>E element()</code>/<code>E peek()</code>ï¼šè·å–é˜Ÿé¦–å…ƒç´ ä½†å¹¶ä¸ä»é˜Ÿåˆ—ä¸­åˆ é™¤ã€‚</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221103102520030.png" /></p>
<h4 id="åŒç«¯é˜Ÿåˆ—deque">1ã€åŒç«¯é˜Ÿåˆ—Deque:</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221103103318611.png" /></p>
<p>â€‹ ArrayDequeå’ŒLinkedListéƒ½å¯ä»¥å®ç°åŒç«¯é˜Ÿåˆ—</p>
<h4 id="ä¼˜å…ˆé˜Ÿåˆ—-priorityqueueå¸¦ä¼˜å…ˆçº§çš„é˜Ÿåˆ—">2ã€ä¼˜å…ˆé˜Ÿåˆ—
PriorityQueueã€å¸¦ä¼˜å…ˆçº§çš„é˜Ÿåˆ—ã€‘</h4>
<p>â€‹ ä½¿ç”¨å †æ¥æ­å»º.å…¸å‹ç”¨æ³•æ˜¯ä»»åŠ¡è°ƒåº¦.</p>
<p>â€‹
æ”¾å…¥<code>PriorityQueue</code>çš„å…ƒç´ ï¼Œå¿…é¡»å®ç°<code>Comparable</code>æ¥å£ï¼Œ<code>PriorityQueue</code>ä¼šæ ¹æ®å…ƒç´ çš„æ’åºé¡ºåºå†³å®šå‡ºé˜Ÿçš„ä¼˜å…ˆçº§ã€‚</p>
<ul>
<li>æ€»æ˜¯è°ƒç”¨<code>xxxFirst()</code>/<code>xxxLast()</code>ä»¥ä¾¿ä¸<code>Queue</code>çš„æ–¹æ³•åŒºåˆ†å¼€ï¼›</li>
<li>é¿å…æŠŠ<code>null</code>æ·»åŠ åˆ°é˜Ÿåˆ—ã€‚</li>
</ul>
<h3 id="ä¹stack">ä¹ã€Stack</h3>
<ul>
<li>æŠŠå…ƒç´ å‹æ ˆï¼š<code>push(E)</code>ï¼›</li>
<li>æŠŠæ ˆé¡¶çš„å…ƒç´ â€œå¼¹å‡ºâ€ï¼š<code>pop()</code>ï¼›</li>
<li>å–æ ˆé¡¶å…ƒç´ ä½†ä¸å¼¹å‡ºï¼š<code>peek()</code>ã€‚</li>
</ul>
<p>åœ¨Javaä¸­ï¼Œæˆ‘ä»¬ç”¨<code>Deque</code>å¯ä»¥å®ç°<code>Stack</code>çš„åŠŸèƒ½ï¼š</p>
<ul>
<li>æŠŠå…ƒç´ å‹æ ˆï¼š<code>push(E)</code>/<code>addFirst(E)</code>ï¼›</li>
<li>æŠŠæ ˆé¡¶çš„å…ƒç´ â€œå¼¹å‡ºâ€ï¼š<code>pop()</code>/<code>removeFirst()</code>ï¼›</li>
<li>å–æ ˆé¡¶å…ƒç´ ä½†ä¸å¼¹å‡ºï¼š<code>peek()</code>/<code>peekFirst()</code>ã€‚</li>
</ul>
<h3 id="åiterator-éå†é›†åˆ">åã€Iterator éå†é›†åˆï¼š</h3>
<p>â€‹
Javaçš„é›†åˆç±»éƒ½å¯ä»¥ä½¿ç”¨<code>for each</code>å¾ªç¯ï¼Œ<code>List</code>ã€<code>Set</code>å’Œ<code>Queue</code>ä¼šè¿­ä»£æ¯ä¸ªå…ƒç´ ï¼Œ<code>Map</code>ä¼šè¿­ä»£æ¯ä¸ªkeyã€‚è°ƒç”¨æ–¹æ€»æ˜¯ä»¥ç»Ÿä¸€çš„æ–¹å¼éå†å„ç§é›†åˆç±»å‹ï¼Œè€Œä¸å¿…å…³å¿ƒå®ƒä»¬å†…éƒ¨çš„å­˜å‚¨ç»“æ„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; list = List.of(<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Pear&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (String s : list) &#123;</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬è‡ªå·±ç¼–å†™äº†ä¸€ä¸ªé›†åˆç±»ï¼Œæƒ³è¦ä½¿ç”¨<code>for each</code>å¾ªç¯ï¼Œåªéœ€æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ul>
<li>é›†åˆç±»å®ç°<code>Iterable</code>æ¥å£ï¼Œè¯¥æ¥å£è¦æ±‚è¿”å›ä¸€ä¸ª<code>Iterator</code>å¯¹è±¡ï¼›</li>
<li>ç”¨<code>Iterator</code>å¯¹è±¡è¿­ä»£é›†åˆå†…éƒ¨æ•°æ®ã€‚</li>
</ul>
<p>è¿™é‡Œçš„å…³é”®åœ¨äºï¼Œé›†åˆç±»é€šè¿‡è°ƒç”¨<code>iterator()</code>æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ª<code>Iterator</code>å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å¿…é¡»è‡ªå·±çŸ¥é“å¦‚ä½•éå†è¯¥é›†åˆã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ReverseList&lt;String&gt; rlist = <span class="keyword">new</span> <span class="title class_">ReverseList</span>&lt;&gt;();</span><br><span class="line">        rlist.add(<span class="string">&quot;Apple&quot;</span>);</span><br><span class="line">        rlist.add(<span class="string">&quot;Orange&quot;</span>);</span><br><span class="line">        rlist.add(<span class="string">&quot;Pear&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String s : rlist) &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ReverseList</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Iterable</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;T&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(T t)</span> &#123;</span><br><span class="line">        list.add(t);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;T&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ReverseIterator</span>(list.size());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">ReverseIterator</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&lt;T&gt; &#123;</span><br><span class="line">        <span class="type">int</span> index;</span><br><span class="line"></span><br><span class="line">        ReverseIterator(<span class="type">int</span> index) &#123;</span><br><span class="line">            <span class="built_in">this</span>.index = index;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> index &gt; <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> T <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">            index--;</span><br><span class="line">            <span class="keyword">return</span> ReverseList.<span class="built_in">this</span>.list.get(index);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åä¸€æ˜ å°„ä¸è§†å›¾">åä¸€ã€æ˜ å°„ä¸è§†å›¾:</h3>
<h4 id="æ˜ å°„">1ã€æ˜ å°„</h4>
<ul>
<li><p>HashMapå’ŒTreeMapéƒ½å®ç°äº†Mapæ¥å£.
æ•£åˆ—æˆ–æ¯”è¾ƒå‡½æ•°éƒ½åªåº”ç”¨äºKey,è€ŒValueå€¼ä¸è¿›è¡Œæ¯”è¾ƒ.</p></li>
<li><p>å¦‚ä½•è¿­ä»£å¤„ç†æ˜ å°„çš„é”®å’Œå€¼?</p></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">scores.forEach((k,v)-&gt;System.out.println(&quot;k&quot;+k+&quot;v&quot;+v));</span><br></pre></td></tr></table></figure>
<ul>
<li><p>æ›´æ–°æ˜ å°„æ¡ç›®:</p>
<ul>
<li>å½“æ¡ç›®ä¸å­˜åœ¨æ—¶ï¼Œcounts.get(word)ä¼šè¿”å›ä¸€ä¸ªNullPointerExceptionå¼‚å¸¸ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨getOrDefaultæ–¹æ³•æ¥è¡¥æ•‘ã€‚counts.getOrDefault(word,0)</li>
</ul></li>
<li><p>æ˜ å°„çš„è§†å›¾ï¼š</p>
<ul>
<li><p>å¯¹äºä¸€ä¸ªæ˜ å°„é›†åˆè€Œè¨€ï¼Œå¯ä»¥å¾—åˆ°3ç§ä¸åŒçš„æ˜ å°„çš„è§†å›¾</p>
<ul>
<li>é”®é›†</li>
<li>å€¼é›†</li>
<li>é”®å€¼å¯¹é›†åˆ</li>
</ul></li>
</ul></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">map.keySet()</span><br><span class="line">map.values()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(Map.Entry&lt;String,Employee&gt; entry : staff.entrySet() )&#123;</span><br><span class="line">	<span class="type">String</span> <span class="variable">k</span> <span class="operator">=</span> entry.getKey()</span><br><span class="line">	<span class="type">Employee</span> <span class="variable">v</span> <span class="operator">=</span> entry.getValue()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨é”®é›†è§†å›¾ä¸Šè°ƒç”¨removeæ–¹æ³•ï¼Œä¼šç§»é™¤é”®å’Œå…³è”çš„å€¼ã€‚ä¸èƒ½å‘é”®é›†è§†å›¾ä¸­æ·»åŠ å…ƒç´ </p>
<ul>
<li><p>å¼±æ•£åˆ—æ˜ å°„</p>
<ul>
<li>å¦‚æœå¯¹æŸä¸ªé”®çš„æœ€åä¸€ä¸ªå¼•ç”¨å·²ç»æ¶ˆå¤±äº†ï¼Œé‚£ä¹ˆä¸ä¼šæœ‰ä»»ä½•é€”å¾„å¼•ç”¨è¿™ä¸ªå€¼çš„å¯¹è±¡äº†ã€‚åœ¨WeakHashMapä¸­ä¼šå°†å…¶è‡ªåŠ¨å›æ”¶ã€‚</li>
</ul></li>
<li><p>é“¾æ¥æ•£åˆ—é›†å’Œæ˜ å°„</p>
<ul>
<li>LinkedHashSetå’ŒLinkedHashMapä¼šè®°å½•æ’å…¥å…ƒç´ é¡¹çš„é¡ºåºã€‚å³åœ¨è¡¨ä¸­æ’å…¥å…ƒç´ é¡¹æ—¶ï¼Œå°±ä¼šå¹¶å…¥åˆ°åŒå‘é“¾è¡¨ä¸­ï¼Œä»¥ä¿æŒæ’å…¥é¡ºåºã€‚</li>
<li>å…¶ä¹Ÿå¯ä»¥ä½¿ç”¨è®¿é—®é¡ºåºè€Œä¸æ˜¯æ’å…¥é¡ºåºæ¥è®¿é—®ï¼Œå…·ä½“è§P401</li>
</ul></li>
<li><p>æšä¸¾é›†å’Œæ˜ å°„</p>
<ul>
<li>EnumSetæ˜¯æšä¸¾ç±»å‹å…ƒç´ é›†çš„é«˜æ•ˆå®ç°ã€‚å…¶å†…éƒ¨ç”¨ä½åºåˆ—å®ç°ï¼Œå¯¹åº”çš„å€¼åœ¨å…¶ä¸­ï¼Œåˆ™ç›¸åº”çš„ä½è¢«ç½®1.</li>
</ul></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Weekday</span> &#123; MONDAY,TUESDAY,WEDNESDAY &#125;</span><br><span class="line">EnumSet&lt;Weekday&gt; always = EnumSet.allOf(Weekday.class)</span><br></pre></td></tr></table></figure>
<h4 id="è§†å›¾ä¸åŒ…è£…å™¨">2ã€è§†å›¾ä¸åŒ…è£…å™¨ï¼š</h4>
<p>â€‹
ä¾‹å¦‚ä¸Šè¿°çš„keySet()æ–¹æ³•ï¼Œä¼šè¿”å›ä¸€ä¸ªå®ç°äº†Setæ¥å£çš„ç±»å¯¹è±¡ï¼Œæœ‰è¿™ä¸ªç±»çš„æ–¹æ³•æ“çºµåŸæ˜ å°„ã€‚è¿™ç§é›†åˆå°±å«åšè§†å›¾ã€‚</p>
<ul>
<li><p>åº”ç”¨1ï¼šå°é›†åˆï¼š</p></li>
<li><p>åº”ç”¨2ï¼šå­èŒƒå›´</p></li>
<li><p>åº”ç”¨3ï¼šä¸å¯ä¿®æ”¹è§†å›¾</p></li>
<li><p>åº”ç”¨4ï¼šåŒæ­¥è§†å›¾</p></li>
<li><p>åº”ç”¨5ï¼šæ£€æŸ¥å‹è§†å›¾ï¼š</p></li>
</ul>
<h3 id="åäºŒcollectionså·¥å…·ç±»">åäºŒã€Collectionså·¥å…·ç±»</h3>
<h4 id="æ’åºä¸æ··æ’">1ã€æ’åºä¸æ··æ’ï¼š</h4>
<ul>
<li>Collectionsç±»ä¸­çš„sortæ–¹æ³•å¯ä»¥å¯¹å®ç°äº†Listæ¥å£çš„é›†åˆè¿›è¡Œæ’åº</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">staff</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">Collections.sort(staff);  <span class="comment">//ä½¿ç”¨ç¨³å®šçš„æ’åºç®—æ³•è¿›è¡Œæ’åºï¼ˆå¦‚å½’å¹¶ï¼Œæ‰€è°“ç¨³å®šï¼ŒæŒ‡çš„æ˜¯ä¸ä¼šæ”¹è¾¹å€¼ç›¸åŒçš„å…ƒç´ çš„å‰åä½ç½®ã€‚ï¼‰</span></span><br><span class="line"></span><br><span class="line">staff.sort(Comparator.comparingDouble(Employee::getSalary));</span><br><span class="line"></span><br><span class="line">staff.sort(Comparator.reverseOrder())</span><br><span class="line"></span><br><span class="line">staff.sort(Comparator.comparingDouble(Employee::getSalary).reversed())</span><br></pre></td></tr></table></figure>
<ul>
<li>Collectionsç±»ä¸­çš„shuffleæ–¹æ³•å¯ä»¥éšæœºæ‰“ä¹±ã€‚</li>
</ul>
<h4 id="äºŒåˆ†æŸ¥æ‰¾">2ã€äºŒåˆ†æŸ¥æ‰¾ï¼š</h4>
<ul>
<li><p>Collections.binarySearch()
ä»æœ‰åºåˆ—è¡¨ä¸­æœç´¢ä¸€ä¸ªé”®ï¼Œå¦‚æœå…ƒç´ ç±»å‹å®ç°äº†RandomAccessæ¥å£ï¼Œåˆ™æ˜¯äºŒåˆ†æŸ¥æ‰¾ï¼Œå¦åˆ™ä¼šé‡‡ç”¨çº¿æ€§æŸ¥æ‰¾ã€‚
å¯¹ä¸€ä¸ªé“¾è¡¨åº”ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå°†è‡ªåŠ¨é€€åŒ–ä¸ºçº¿æ€§æŸ¥æ‰¾ã€‚</p></li>
<li><p>ç®€å•ç®—æ³•ï¼š</p>
<ul>
<li>è§P416é¡µã€‚</li>
</ul></li>
<li><p>é›†åˆä¸æ•°ç»„çš„è½¬æ¢ï¼š</p></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String[] values = ...</span><br><span class="line"><span class="type">var</span> <span class="variable">staff</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(List.of(values));</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Object[] values = staff.toArray();</span><br><span class="line"><span class="comment">//toArrayè¿”å›çš„æ˜¯Objectå¯¹è±¡æ•°ç»„ï¼Œä¸”ä¸èƒ½æ”¹å˜é‡Œé¢çš„ç±»å‹ï¼Œæ‰€ä»¥åº”å½“ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š</span></span><br><span class="line">String[] values = staff.toArray(<span class="keyword">new</span> <span class="title class_">String</span>[staff.size()]);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaç²¾ç®€ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç³»åˆ—ç¬”è®°11â€”â€”javaæ­£åˆ™è¡¨è¾¾å¼</title>
    <url>/2022/02/02/dc49710223cc/</url>
    <content><![CDATA[<p>å‚è€ƒæ•™ç¨‹ç½‘å€ï¼šhttps://www.liaoxuefeng.com/wiki/1252599548343744/1304066130968610</p>
<h3 id="ä¸€ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼">ä¸€ã€ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼š</h3>
<p>â€‹
æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥ç”¨å­—ç¬¦ä¸²æ¥æè¿°è§„åˆ™ï¼Œå¹¶ç”¨æ¥åŒ¹é…å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œåˆ¤æ–­æ‰‹æœºå·ï¼Œæˆ‘ä»¬ç”¨æ­£åˆ™è¡¨è¾¾å¼<code>\d&#123;11&#125;</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="title function_">isValidMobileNumber</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> s.matches(<span class="string">&quot;\\d&#123;11&#125;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„å¥½å¤„æœ‰å“ªäº›ï¼Ÿä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯ä¸€ä¸ªæè¿°è§„åˆ™çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ï¼Œåªéœ€è¦ç¼–å†™æ­£ç¡®çš„è§„åˆ™ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®©æ­£åˆ™è¡¨è¾¾å¼å¼•æ“å»åˆ¤æ–­ç›®æ ‡å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆè§„åˆ™ã€‚</p>
<p>â€‹
æ­£åˆ™è¡¨è¾¾å¼æ˜¯ç”¨å­—ç¬¦ä¸²æè¿°çš„ä¸€ä¸ªåŒ¹é…è§„åˆ™ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥å¿«é€Ÿåˆ¤æ–­ç»™å®šçš„å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆåŒ¹é…è§„åˆ™ã€‚<strong>Javaæ ‡å‡†åº“<code>java.util.regex</code>å†…å»ºäº†æ­£åˆ™è¡¨è¾¾å¼å¼•æ“ã€‚</strong></p>
<h3 id="äºŒåŒ¹é…è§„åˆ™">äºŒã€åŒ¹é…è§„åˆ™ï¼š</h3>
<p>æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…è§„åˆ™æ˜¯ä»å·¦åˆ°å³æŒ‰è§„åˆ™åŒ¹é…ã€‚</p>
<h4 id="ç²¾ç¡®åŒ¹é…">1ã€ç²¾ç¡®åŒ¹é…ï¼š</h4>
<p>â€‹
å¯¹äºæ­£åˆ™è¡¨è¾¾å¼<code>abc</code>æ¥è¯´ï¼Œå®ƒåªèƒ½ç²¾ç¡®åœ°åŒ¹é…å­—ç¬¦ä¸²<code>"abc"</code>ï¼Œä¸èƒ½åŒ¹é…<code>"ab"</code>ï¼Œ<code>"Abc"</code>ï¼Œ<code>"abcd"</code>ç­‰å…¶ä»–ä»»ä½•å­—ç¬¦ä¸²ã€‚</p>
<p>â€‹
å¦‚æœæ­£åˆ™è¡¨è¾¾å¼æœ‰ç‰¹æ®Šå­—ç¬¦ï¼Œé‚£å°±éœ€è¦ç”¨<code>\</code>è½¬ä¹‰ã€‚ä¾‹å¦‚ï¼Œæ­£åˆ™è¡¨è¾¾å¼<code>a\&amp;c</code>ï¼Œå…¶ä¸­<code>\&amp;</code>æ˜¯ç”¨æ¥åŒ¹é…ç‰¹æ®Šå­—ç¬¦<code>&amp;</code>çš„ï¼Œå®ƒèƒ½ç²¾ç¡®åŒ¹é…å­—ç¬¦ä¸²<code>"a&amp;c"</code>ï¼Œä½†ä¸èƒ½åŒ¹é…<code>"ac"</code>ã€<code>"a-c"</code>ã€<code>"a&amp;&amp;c"</code>ç­‰ã€‚</p>
<p>â€‹
å¦‚æœæƒ³åŒ¹é…éASCIIå­—ç¬¦ï¼Œä¾‹å¦‚ä¸­æ–‡ï¼Œé‚£å°±ç”¨<code>\u####</code>çš„åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š<code>a\u548cc</code>åŒ¹é…å­—ç¬¦ä¸²<code>"aå’Œc"</code>ï¼Œä¸­æ–‡å­—ç¬¦<code>å’Œ</code>çš„Unicodeç¼–ç æ˜¯<code>548c</code>ã€‚</p>
<h4 id="æ¨¡ç³ŠåŒ¹é….">2ã€æ¨¡ç³ŠåŒ¹é…ï¼š(.)</h4>
<p>â€‹
æ­£åˆ™è¡¨è¾¾å¼<code>a.c</code>ä¸­é—´çš„<code>.</code>å¯ä»¥åŒ¹é…ä¸€ä¸ªä»»æ„å­—ç¬¦</p>
<p>â€‹ <code>.</code>åŒ¹é…ä¸€ä¸ªå­—ç¬¦ä¸”ä»…é™ä¸€ä¸ªå­—ç¬¦</p>
<h4 id="åŒ¹é…æ•°å­—">3ã€åŒ¹é…æ•°å­—ï¼šï¼ˆ</h4>
<p>â€‹
å¦‚æœæˆ‘ä»¬åªæƒ³åŒ¹é…<code>0</code>~<code>9</code>è¿™æ ·çš„æ•°å­—ï¼Œå¯ä»¥ç”¨<code>\d</code>åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œæ­£åˆ™è¡¨è¾¾å¼<code>00\d</code>å¯ä»¥åŒ¹é…ï¼š</p>
<ul>
<li><code>"007"</code>ï¼Œå› ä¸º<code>\d</code>å¯ä»¥åŒ¹é…å­—ç¬¦<code>7</code>ï¼›</li>
<li><code>"008"</code>ï¼Œå› ä¸º<code>\d</code>å¯ä»¥åŒ¹é…å­—ç¬¦<code>8</code>ã€‚</li>
</ul>
<p>â€‹
å®ƒä¸èƒ½åŒ¹é…<code>"00A"</code>ï¼Œ<code>"0077"</code>ï¼Œå› ä¸º<code>\d</code>ä»…é™å•ä¸ªæ•°å­—å­—ç¬¦ã€‚</p>
<h4 id="åŒ¹é…å¸¸ç”¨å­—ç¬¦">4ã€åŒ¹é…å¸¸ç”¨å­—ç¬¦ï¼š()</h4>
<p>ç”¨<code>\w</code>å¯ä»¥åŒ¹é…ä¸€ä¸ªå­—æ¯ã€æ•°å­—æˆ–ä¸‹åˆ’çº¿ï¼Œwçš„æ„æ€æ˜¯wordã€‚ä¾‹å¦‚ï¼Œ<code>java\w</code>å¯ä»¥åŒ¹é…ï¼š</p>
<ul>
<li><code>"javac"</code>ï¼Œå› ä¸º<code>\w</code>å¯ä»¥åŒ¹é…è‹±æ–‡å­—ç¬¦<code>c</code>ï¼›</li>
<li><code>"java9"</code>ï¼Œå› ä¸º<code>\w</code>å¯ä»¥åŒ¹é…æ•°å­—å­—ç¬¦<code>9</code>ï¼›ã€‚</li>
<li><code>"java_"</code>ï¼Œå› ä¸º<code>\w</code>å¯ä»¥åŒ¹é…ä¸‹åˆ’çº¿<code>_</code>ã€‚</li>
</ul>
<p>å› ä¸º<code>\w</code>ä¸èƒ½åŒ¹é…<code>#</code>ã€ç©ºæ ¼ç­‰å­—ç¬¦ã€‚</p>
<h4 id="åŒ¹é…ç©ºæ ¼å­—ç¬¦">5ã€ åŒ¹é…ç©ºæ ¼å­—ç¬¦()</h4>
<p>ç”¨<code>\s</code>å¯ä»¥åŒ¹é…ä¸€ä¸ªç©ºæ ¼å­—ç¬¦ï¼Œæ³¨æ„ç©ºæ ¼å­—ç¬¦ä¸ä½†åŒ…æ‹¬ç©ºæ ¼`<code>ï¼Œè¿˜åŒ…æ‹¬tabå­—ç¬¦ï¼ˆåœ¨Javaä¸­ç”¨</code>è¡¨ç¤ºï¼‰ã€‚ä¾‹å¦‚ï¼Œ<code>a\sc</code>å¯ä»¥åŒ¹é…ï¼š</p>
<ul>
<li><code>"a c"</code>ï¼Œå› ä¸º<code>\s</code>å¯ä»¥åŒ¹é…ç©ºæ ¼å­—ç¬¦``ï¼›</li>
<li><code>"a c"</code>ï¼Œå› ä¸º<code>\s</code>å¯ä»¥åŒ¹é…tabå­—ç¬¦<code>\t</code>ã€‚</li>
</ul>
<p>å®ƒä¸èƒ½åŒ¹é…<code>"ac"</code>ï¼Œ<code>"abc"</code>ç­‰ã€‚</p>
<h4 id="åŒ¹é…éæ•°å­—">6ã€åŒ¹é…éæ•°å­—ï¼šï¼ˆï¼‰</h4>
<p>â€‹ <code>\D</code>åŒ¹é…ä¸€ä¸ªéæ•°å­—</p>
<p>â€‹
ç±»ä¼¼çš„ï¼Œ<code>\W</code>å¯ä»¥åŒ¹é…<code>\w</code>ä¸èƒ½åŒ¹é…çš„å­—ç¬¦ï¼Œ<code>\S</code>å¯ä»¥åŒ¹é…<code>\s</code>ä¸èƒ½åŒ¹é…çš„å­—ç¬¦ï¼Œè¿™å‡ ä¸ªæ­£å¥½æ˜¯åç€æ¥çš„ã€‚</p>
<h4 id="é‡å¤åŒ¹é…">7ã€é‡å¤åŒ¹é…ï¼š</h4>
<ul>
<li><p>ä¿®é¥°ç¬¦<code>*</code>å¯ä»¥åŒ¹é…ä»»æ„ä¸ªå­—ç¬¦ï¼ŒåŒ…æ‹¬0ä¸ªå­—ç¬¦ã€‚æˆ‘ä»¬ç”¨<code>A\d*</code>å¯ä»¥åŒ¹é…ï¼š</p>
<ul>
<li><p><code>A</code>ï¼šå› ä¸º<code>\d*</code>å¯ä»¥åŒ¹é…0ä¸ªæ•°å­—ï¼›</p></li>
<li><p><code>A0</code>ï¼šå› ä¸º<code>\d*</code>å¯ä»¥åŒ¹é…1ä¸ªæ•°å­—<code>0</code>ï¼›</p></li>
<li><p><code>A380</code>ï¼šå› ä¸º<code>\d*</code>å¯ä»¥åŒ¹é…å¤šä¸ªæ•°å­—<code>380</code>ã€‚</p></li>
</ul></li>
<li><p>ä¿®é¥°ç¬¦<code>+</code>å¯ä»¥åŒ¹é…è‡³å°‘ä¸€ä¸ªå­—ç¬¦ã€‚æˆ‘ä»¬ç”¨<code>A\d+</code>å¯ä»¥åŒ¹é…ï¼š</p>
<ul>
<li><code>A0</code>ï¼šå› ä¸º<code>\d+</code>å¯ä»¥åŒ¹é…1ä¸ªæ•°å­—<code>0</code>ï¼›</li>
<li><code>A380</code>ï¼šå› ä¸º<code>\d+</code>å¯ä»¥åŒ¹é…å¤šä¸ªæ•°å­—<code>380</code>ã€‚</li>
</ul></li>
<li><p>ä¿®é¥°ç¬¦<code>?</code>å¯ä»¥åŒ¹é…0ä¸ªæˆ–ä¸€ä¸ªå­—ç¬¦ã€‚æˆ‘ä»¬ç”¨<code>A\d?</code>å¯ä»¥åŒ¹é…ï¼š</p>
<ul>
<li><code>A</code>ï¼šå› ä¸º<code>\d?</code>å¯ä»¥åŒ¹é…0ä¸ªæ•°å­—ï¼›</li>
<li><code>A0</code>ï¼šå› ä¸º<code>\d?</code>å¯ä»¥åŒ¹é…1ä¸ªæ•°å­—<code>0</code>ã€‚</li>
</ul></li>
<li><p>ç”¨ä¿®é¥°ç¬¦<code>&#123;n&#125;</code>ç²¾ç¡®æŒ‡å®šnä¸ªå­—ç¬¦,<code>A\d&#123;3&#125;</code>å¯ä»¥ç²¾ç¡®åŒ¹é…ï¼š</p>
<ul>
<li><code>A380</code>ï¼šå› ä¸º<code>\d&#123;3&#125;</code>å¯ä»¥åŒ¹é…3ä¸ªæ•°å­—<code>380</code>ã€‚</li>
</ul></li>
<li><p>ç”¨ä¿®é¥°ç¬¦<code>&#123;n,m&#125;</code>æŒ‡å®šåŒ¹é…n~mä¸ªå­—ç¬¦,
<code>A\d&#123;3,5&#125;</code>å¯ä»¥ç²¾ç¡®åŒ¹é…ï¼š</p>
<ul>
<li><code>A380</code>ï¼šå› ä¸º<code>\d&#123;3,5&#125;</code>å¯ä»¥åŒ¹é…3ä¸ªæ•°å­—<code>380</code>ï¼›</li>
<li><code>A3800</code>ï¼šå› ä¸º<code>\d&#123;3,5&#125;</code>å¯ä»¥åŒ¹é…4ä¸ªæ•°å­—<code>3800</code>ï¼›</li>
<li><code>A38000</code>ï¼šå› ä¸º<code>\d&#123;3,5&#125;</code>å¯ä»¥åŒ¹é…5ä¸ªæ•°å­—<code>38000</code>ã€‚</li>
</ul></li>
<li><p>å¦‚æœæ²¡æœ‰ä¸Šé™ï¼Œé‚£ä¹ˆä¿®é¥°ç¬¦<code>&#123;n,&#125;</code>å°±å¯ä»¥åŒ¹é…è‡³å°‘nä¸ªå­—ç¬¦ã€‚</p></li>
</ul>
<h4 id="åŒ¹é…è§„åˆ™å¿«é€ŸæŸ¥æ‰¾">8ã€åŒ¹é…è§„åˆ™å¿«é€ŸæŸ¥æ‰¾ï¼š</h4>
<p>å•ä¸ªå­—ç¬¦çš„åŒ¹é…è§„åˆ™å¦‚ä¸‹ï¼š</p>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 37%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr class="header">
<th>æ­£åˆ™è¡¨è¾¾å¼</th>
<th>è§„åˆ™</th>
<th>å¯ä»¥åŒ¹é…</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>A</code></td>
<td>æŒ‡å®šå­—ç¬¦</td>
<td><code>A</code></td>
</tr>
<tr class="even">
<td><code>\u548c</code></td>
<td>æŒ‡å®šUnicodeå­—ç¬¦</td>
<td><code>å’Œ</code></td>
</tr>
<tr class="odd">
<td><code>.</code></td>
<td>ä»»æ„å­—ç¬¦</td>
<td><code>a</code>ï¼Œ<code>b</code>ï¼Œ<code>&amp;</code>ï¼Œ<code>0</code></td>
</tr>
<tr class="even">
<td><code>\d</code></td>
<td>æ•°å­—0~9</td>
<td><code>0</code>~<code>9</code></td>
</tr>
<tr class="odd">
<td><code>\w</code></td>
<td>å¤§å°å†™å­—æ¯ï¼Œæ•°å­—å’Œä¸‹åˆ’çº¿</td>
<td><code>a</code><sub><code>z</code>ï¼Œ<code>A</code></sub><code>Z</code>ï¼Œ<code>0</code>~<code>9</code>ï¼Œ<code>_</code></td>
</tr>
<tr class="even">
<td><code>\s</code></td>
<td>ç©ºæ ¼ã€Tabé”®</td>
<td>ç©ºæ ¼ï¼ŒTab</td>
</tr>
<tr class="odd">
<td><code>\D</code></td>
<td>éæ•°å­—</td>
<td><code>a</code>ï¼Œ<code>A</code>ï¼Œ<code>&amp;</code>ï¼Œ<code>_</code>ï¼Œâ€¦â€¦</td>
</tr>
<tr class="even">
<td><code>\W</code></td>
<td>é</td>
<td><code>&amp;</code>ï¼Œ<code>@</code>ï¼Œ<code>ä¸­</code>ï¼Œâ€¦â€¦</td>
</tr>
<tr class="odd">
<td><code>\S</code></td>
<td>é</td>
<td><code>a</code>ï¼Œ<code>A</code>ï¼Œ<code>&amp;</code>ï¼Œ<code>_</code>ï¼Œâ€¦â€¦</td>
</tr>
</tbody>
</table>
<p>å¤šä¸ªå­—ç¬¦çš„åŒ¹é…è§„åˆ™å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr class="header">
<th>æ­£åˆ™è¡¨è¾¾å¼</th>
<th>è§„åˆ™</th>
<th>å¯ä»¥åŒ¹é…</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>A*</code></td>
<td>ä»»æ„ä¸ªæ•°å­—ç¬¦</td>
<td>ç©ºï¼Œ<code>A</code>ï¼Œ<code>AA</code>ï¼Œ<code>AAA</code>ï¼Œâ€¦â€¦</td>
</tr>
<tr class="even">
<td><code>A+</code></td>
<td>è‡³å°‘1ä¸ªå­—ç¬¦</td>
<td><code>A</code>ï¼Œ<code>AA</code>ï¼Œ<code>AAA</code>ï¼Œâ€¦â€¦</td>
</tr>
<tr class="odd">
<td><code>A?</code></td>
<td>0ä¸ªæˆ–1ä¸ªå­—ç¬¦</td>
<td>ç©ºï¼Œ<code>A</code></td>
</tr>
<tr class="even">
<td><code>A&#123;3&#125;</code></td>
<td>æŒ‡å®šä¸ªæ•°å­—ç¬¦</td>
<td><code>AAA</code></td>
</tr>
<tr class="odd">
<td><code>A&#123;2,3&#125;</code></td>
<td>æŒ‡å®šèŒƒå›´ä¸ªæ•°å­—ç¬¦</td>
<td><code>AA</code>ï¼Œ<code>AAA</code></td>
</tr>
<tr class="even">
<td><code>A&#123;2,&#125;</code></td>
<td>è‡³å°‘nä¸ªå­—ç¬¦</td>
<td><code>AA</code>ï¼Œ<code>AAA</code>ï¼Œ<code>AAAA</code>ï¼Œâ€¦â€¦</td>
</tr>
<tr class="odd">
<td><code>A&#123;0,3&#125;</code></td>
<td>æœ€å¤šnä¸ªå­—ç¬¦</td>
<td>ç©ºï¼Œ<code>A</code>ï¼Œ<code>AA</code>ï¼Œ<code>AAA</code></td>
</tr>
</tbody>
</table>
<h3 id="ä¸‰å¤æ‚åŒ¹é…è§„åˆ™">ä¸‰ã€å¤æ‚åŒ¹é…è§„åˆ™ï¼š</h3>
<h4 id="åŒ¹é…å¼€å¤´ç»“å°¾">1ã€åŒ¹é…å¼€å¤´ç»“å°¾ï¼š</h4>
<p>â€‹
è¿›è¡Œå¤šè¡ŒåŒ¹é…æ—¶ï¼Œç”¨<code>^</code>è¡¨ç¤ºå¼€å¤´ï¼Œ<code>$</code>è¡¨ç¤ºç»“å°¾ã€‚ä¾‹å¦‚ï¼Œ<code>^A\d&#123;3&#125;$</code>ï¼Œå¯ä»¥åŒ¹é…<code>"A001"</code>ã€<code>"A380"</code>ã€‚</p>
<h4 id="åŒ¹é…æŒ‡å®šèŒƒå›´">2ã€åŒ¹é…æŒ‡å®šèŒƒå›´ï¼š</h4>
<p>â€‹
<strong>ä½¿ç”¨<code>[...]</code>å¯ä»¥åŒ¹é…èŒƒå›´å†…çš„å­—ç¬¦</strong>ï¼Œä¾‹å¦‚ï¼Œ<code>[123456789]</code>å¯ä»¥åŒ¹é…<code>1</code>~<code>9</code>ï¼Œè¿™æ ·å°±å¯ä»¥å†™å‡ºä¸Šè¿°ç”µè¯å·ç çš„è§„åˆ™ï¼š<code>[123456789]\d&#123;6,7&#125;</code>ã€‚</p>
<p>â€‹
æŠŠæ‰€æœ‰å­—ç¬¦å…¨åˆ—å‡ºæ¥å¤ªéº»çƒ¦ï¼Œ<code>[...]</code>è¿˜æœ‰ä¸€ç§å†™æ³•ï¼Œç›´æ¥å†™<code>[1-9]</code>å°±å¯ä»¥ã€‚</p>
<p>â€‹
<strong>è¦åŒ¹é…å¤§å°å†™ä¸é™çš„åå…­è¿›åˆ¶æ•°ï¼Œæ¯”å¦‚<code>1A2b3c</code>ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š<code>[0-9a-fA-F]</code>ï¼Œå®ƒè¡¨ç¤ºä¸€å…±å¯ä»¥åŒ¹é…ä»¥ä¸‹ä»»æ„èŒƒå›´çš„å­—ç¬¦ï¼š</strong></p>
<ul>
<li><code>0-9</code>ï¼šå­—ç¬¦<code>0</code>~<code>9</code>ï¼›</li>
<li><code>a-f</code>ï¼šå­—ç¬¦<code>a</code>~<code>f</code>ï¼›</li>
<li><code>A-F</code>ï¼šå­—ç¬¦<code>A</code>~<code>F</code>ã€‚</li>
</ul>
<p>â€‹
<strong><code>[...]</code>è¿˜æœ‰ä¸€ç§æ’é™¤æ³•ï¼Œå³ä¸åŒ…å«æŒ‡å®šèŒƒå›´çš„å­—ç¬¦ã€‚å‡è®¾æˆ‘ä»¬è¦åŒ¹é…ä»»æ„å­—ç¬¦ï¼Œä½†ä¸åŒ…æ‹¬æ•°å­—ï¼Œå¯ä»¥å†™<code>[^1-9]&#123;3&#125;</code>ï¼š</strong></p>
<ul>
<li>å¯ä»¥åŒ¹é…<code>"ABC"</code>ï¼Œå› ä¸ºä¸åŒ…å«å­—ç¬¦<code>1</code>~<code>9</code>ï¼›</li>
<li>å¯ä»¥åŒ¹é…<code>"A00"</code>ï¼Œå› ä¸ºä¸åŒ…å«å­—ç¬¦<code>1</code>~<code>9</code>ï¼›</li>
<li>ä¸èƒ½åŒ¹é…<code>"A01"</code>ï¼Œå› ä¸ºåŒ…å«å­—ç¬¦<code>1</code>ï¼›</li>
<li>ä¸èƒ½åŒ¹é…<code>"A05"</code>ï¼Œå› ä¸ºåŒ…å«å­—ç¬¦<code>5</code>ã€‚</li>
</ul>
<h4 id="æˆ–è§„åˆ™åŒ¹é…">3ã€æˆ–è§„åˆ™åŒ¹é…ï¼š</h4>
<p>â€‹
ç”¨<code>|</code>è¿æ¥çš„ä¸¤ä¸ªæ­£åˆ™è§„åˆ™æ˜¯<em>æˆ–</em>è§„åˆ™ï¼Œä¾‹å¦‚ï¼Œ<code>AB|CD</code>è¡¨ç¤ºå¯ä»¥åŒ¹é…<code>AB</code>æˆ–<code>CD</code>ã€‚</p>
<h4 id="ä½¿ç”¨æ‹¬å·">4ã€ä½¿ç”¨æ‹¬å·:</h4>
<p>â€‹
ç°åœ¨æˆ‘ä»¬æƒ³è¦åŒ¹é…å­—ç¬¦ä¸²<code>learn java</code>ã€<code>learn php</code>å’Œ<code>learn go</code>æ€ä¹ˆåŠï¼Ÿä¸€ä¸ªæœ€ç®€å•çš„è§„åˆ™æ˜¯<code>learn\sjava|learn\sphp|learn\sgo</code>ï¼Œä½†æ˜¯è¿™ä¸ªè§„åˆ™å¤ªå¤æ‚äº†ï¼Œå¯ä»¥æŠŠå…¬å…±éƒ¨åˆ†æå‡ºæ¥ï¼Œç„¶åç”¨<code>(...)</code>æŠŠå­è§„åˆ™æ‹¬èµ·æ¥è¡¨ç¤ºæˆ<code>learn\\s(java|php|go)</code>ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">re</span> <span class="operator">=</span> <span class="string">&quot;learn\\s(java|php|go)&quot;</span>;</span><br></pre></td></tr></table></figure>
<h4 id="è§„åˆ™æ€»ç»“">5ã€è§„åˆ™æ€»ç»“ï¼š</h4>
<p>å¤æ‚åŒ¹é…è§„åˆ™ä¸»è¦æœ‰ï¼š</p>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 30%" />
<col style="width: 54%" />
</colgroup>
<thead>
<tr class="header">
<th>æ­£åˆ™è¡¨è¾¾å¼</th>
<th>è§„åˆ™</th>
<th>å¯ä»¥åŒ¹é…</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>^</td>
<td>å¼€å¤´</td>
<td>å­—ç¬¦ä¸²å¼€å¤´</td>
</tr>
<tr class="even">
<td>$</td>
<td>ç»“å°¾</td>
<td>å­—ç¬¦ä¸²ç»“æŸ</td>
</tr>
<tr class="odd">
<td>[ABC]</td>
<td>[â€¦]å†…ä»»æ„å­—ç¬¦</td>
<td>Aï¼ŒBï¼ŒC</td>
</tr>
<tr class="even">
<td>[A-F0-9xy]</td>
<td>æŒ‡å®šèŒƒå›´çš„å­—ç¬¦</td>
<td><code>A</code>ï¼Œâ€¦â€¦ï¼Œ<code>F</code>ï¼Œ<code>0</code>ï¼Œâ€¦â€¦ï¼Œ<code>9</code>ï¼Œ<code>x</code>ï¼Œ<code>y</code></td>
</tr>
<tr class="odd">
<td>[^A-F]</td>
<td>æŒ‡å®šèŒƒå›´å¤–çš„ä»»æ„å­—ç¬¦</td>
<td>é<code>A</code>~<code>F</code></td>
</tr>
<tr class="even">
<td>AB|CD|EF</td>
<td>ABæˆ–CDæˆ–EF</td>
<td><code>AB</code>ï¼Œ<code>CD</code>ï¼Œ<code>EF</code></td>
</tr>
</tbody>
</table>
<h3 id="å››åˆ†ç»„åŒ¹é…-æå–å­ä¸²">å››ã€åˆ†ç»„åŒ¹é… + æå–å­ä¸²ï¼š</h3>
<p>â€‹ <code>(...)</code>è¿˜æœ‰ä¸€ä¸ªé‡è¦ä½œç”¨ï¼Œå°±æ˜¯åˆ†ç»„åŒ¹é…ã€‚</p>
<p>â€‹
æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•ç”¨æ­£åˆ™åŒ¹é…<code>åŒºå·-ç”µè¯å·</code>ç è¿™ä¸ªè§„åˆ™ã€‚åˆ©ç”¨å‰é¢è®²åˆ°çš„åŒ¹é…è§„åˆ™ï¼Œå†™å‡ºæ¥å¾ˆå®¹æ˜“ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">\d&#123;3,4&#125;\-\d&#123;6,8&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
è™½ç„¶è¿™ä¸ªæ­£åˆ™åŒ¹é…è§„åˆ™å¾ˆç®€å•ï¼Œä½†æ˜¯å¾€å¾€åŒ¹é…æˆåŠŸåï¼Œä¸‹ä¸€æ­¥æ˜¯æå–åŒºå·å’Œç”µè¯å·ç ï¼Œåˆ†åˆ«å­˜å…¥æ•°æ®åº“ã€‚äºæ˜¯é—®é¢˜æ¥äº†ï¼š<strong>å¦‚ä½•æå–åŒ¹é…çš„å­ä¸²</strong>ï¼Ÿ</p>
<p>â€‹
å½“ç„¶å¯ä»¥ç”¨<code>String</code>æä¾›çš„<code>indexOf()</code>å’Œ<code>substring()</code>è¿™äº›æ–¹æ³•ï¼Œä½†å®ƒä»¬ä»æ­£åˆ™åŒ¹é…çš„å­—ç¬¦ä¸²ä¸­æå–å­ä¸²æ²¡æœ‰é€šç”¨æ€§ï¼Œä¸‹ä¸€æ¬¡è¦æå–<code>learn\s(java|php)</code>è¿˜å¾—æ”¹ä»£ç ã€‚</p>
<p>â€‹
<strong>æ­£ç¡®çš„æ–¹æ³•æ˜¯ç”¨<code>(...)</code>å…ˆæŠŠè¦æå–çš„è§„åˆ™åˆ†ç»„ï¼ŒæŠŠä¸Šè¿°æ­£åˆ™è¡¨è¾¾å¼å˜ä¸º<code>(\d&#123;3,4&#125;)\-(\d&#123;6,8&#125;)</code></strong>ã€‚ç„¶åå¼•å…¥<code>java.util.regex</code>åŒ…ï¼Œç”¨<code>Pattern</code>å¯¹è±¡åŒ¹é…ï¼ŒåŒ¹é…åè·å¾—ä¸€ä¸ª<code>Matcher</code>å¯¹è±¡ï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œå°±å¯ä»¥ç›´æ¥ä»<code>Matcher.group(index)</code>è¿”å›å­ä¸²ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;(\\d&#123;3,4&#125;)\\-(\\d&#123;7,8&#125;)&quot;</span>);</span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(<span class="string">&quot;010-12345678&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (m.matches()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">g1</span> <span class="operator">=</span> m.group(<span class="number">1</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">g2</span> <span class="operator">=</span> m.group(<span class="number">2</span>);</span><br><span class="line">            System.out.println(g1);</span><br><span class="line">            System.out.println(g2);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;åŒ¹é…å¤±è´¥!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸Šè¿°ä»£ç ï¼Œä¼šå¾—åˆ°ä¸¤ä¸ªåŒ¹é…ä¸Šçš„å­ä¸²<code>010</code>å’Œ<code>12345678</code>ã€‚</p>
<p>â€‹
è¦ç‰¹åˆ«æ³¨æ„ï¼Œ<code>Matcher.group(index)</code>æ–¹æ³•çš„å‚æ•°ç”¨1è¡¨ç¤ºç¬¬ä¸€ä¸ªå­ä¸²ï¼Œ2è¡¨ç¤ºç¬¬äºŒä¸ªå­ä¸²ã€‚å¦‚æœæˆ‘ä»¬ä¼ å…¥0ä¼šå¾—åˆ°ä»€ä¹ˆå‘¢ï¼Ÿç­”æ¡ˆæ˜¯<code>010-12345678</code>ï¼Œå³æ•´ä¸ªæ­£åˆ™åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ã€‚</p>
<p>â€‹
æˆ‘ä»¬åœ¨å‰é¢çš„ä»£ç ä¸­ç”¨åˆ°çš„æ­£åˆ™è¡¨è¾¾å¼ä»£ç æ˜¯<code>String.matches()</code>æ–¹æ³•ï¼Œè€Œæˆ‘ä»¬åœ¨åˆ†ç»„æå–çš„ä»£ç ä¸­ç”¨çš„æ˜¯<code>java.util.regex</code>åŒ…é‡Œé¢çš„<code>Pattern</code>ç±»å’Œ<code>Matcher</code>ç±»ã€‚å®é™…ä¸Šè¿™ä¸¤ç§ä»£ç æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œå› ä¸º<code>String.matches()</code>æ–¹æ³•å†…éƒ¨è°ƒç”¨çš„å°±æ˜¯<code>Pattern</code>å’Œ<code>Matcher</code>ç±»çš„æ–¹æ³•ã€‚</p>
<p>â€‹
ä½†æ˜¯åå¤ä½¿ç”¨<code>String.matches()</code>å¯¹åŒä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œå¤šæ¬¡åŒ¹é…æ•ˆç‡è¾ƒä½ï¼Œå› ä¸ºæ¯æ¬¡éƒ½ä¼šåˆ›å»ºå‡ºä¸€æ ·çš„<code>Pattern</code>å¯¹è±¡ã€‚å®Œå…¨å¯ä»¥å…ˆåˆ›å»ºå‡ºä¸€ä¸ª<code>Pattern</code>å¯¹è±¡ï¼Œç„¶ååå¤ä½¿ç”¨ï¼Œå°±å¯ä»¥å®ç°ç¼–è¯‘ä¸€æ¬¡ï¼Œå¤šæ¬¡åŒ¹é…ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;(\\d&#123;3,4&#125;)\\-(\\d&#123;7,8&#125;)&quot;</span>);</span><br><span class="line">        pattern.matcher(<span class="string">&quot;010-12345678&quot;</span>).matches(); <span class="comment">// true</span></span><br><span class="line">        pattern.matcher(<span class="string">&quot;021-123456&quot;</span>).matches(); <span class="comment">// false</span></span><br><span class="line">        pattern.matcher(<span class="string">&quot;022#1234567&quot;</span>).matches(); <span class="comment">// false</span></span><br><span class="line">        <span class="comment">// è·å¾—Matcherå¯¹è±¡:</span></span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(<span class="string">&quot;010-12345678&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (matcher.matches()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">whole</span> <span class="operator">=</span> matcher.group(<span class="number">0</span>); <span class="comment">// &quot;010-12345678&quot;, 0è¡¨ç¤ºåŒ¹é…çš„æ•´ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">area</span> <span class="operator">=</span> matcher.group(<span class="number">1</span>); <span class="comment">// &quot;010&quot;, 1è¡¨ç¤ºåŒ¹é…çš„ç¬¬1ä¸ªå­ä¸²</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">tel</span> <span class="operator">=</span> matcher.group(<span class="number">2</span>); <span class="comment">// &quot;12345678&quot;, 2è¡¨ç¤ºåŒ¹é…çš„ç¬¬2ä¸ªå­ä¸²</span></span><br><span class="line">            System.out.println(area);</span><br><span class="line">            System.out.println(tel);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
ä½¿ç”¨<code>Matcher</code>æ—¶ï¼Œå¿…é¡»é¦–å…ˆè°ƒç”¨<code>matches()</code>åˆ¤æ–­æ˜¯å¦åŒ¹é…æˆåŠŸï¼ŒåŒ¹é…æˆåŠŸåï¼Œæ‰èƒ½è°ƒç”¨<code>group()</code>æå–å­ä¸²ã€‚</p>
<p>â€‹ åˆ©ç”¨æå–å­ä¸²çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬è½»æ¾è·å¾—äº†åŒºå·å’Œå·ç ä¸¤éƒ¨åˆ†ã€‚</p>
<h3 id="äº”éè´ªå©ªåŒ¹é…">äº”ã€éè´ªå©ªåŒ¹é…ï¼š</h3>
<p>å…ˆçœ‹ä¸€ä¸ªç®€å•çš„é—®é¢˜ï¼š</p>
<p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºçš„æ•°å­—ï¼Œåˆ¤æ–­è¯¥æ•°å­—æœ«å°¾<code>0</code>çš„ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>"123000"</code>ï¼š3ä¸ª<code>0</code></li>
<li><code>"10100"</code>ï¼š2ä¸ª<code>0</code></li>
<li><code>"1001"</code>ï¼š0ä¸ª<code>0</code></li>
</ul>
<p>å¯ä»¥å¾ˆå®¹æ˜“åœ°å†™å‡ºè¯¥æ­£åˆ™è¡¨è¾¾å¼ï¼š<code>(\d+)(0*)</code>ï¼ŒJavaä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;(\\d+)(0*)&quot;</span>);</span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(<span class="string">&quot;1230000&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (matcher.matches()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;group1=&quot;</span> + matcher.group(<span class="number">1</span>)); <span class="comment">// &quot;1230000&quot;</span></span><br><span class="line">            System.out.println(<span class="string">&quot;group2=&quot;</span> + matcher.group(<span class="number">2</span>)); <span class="comment">// &quot;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ç„¶è€Œæ‰“å°çš„ç¬¬äºŒä¸ªå­ä¸²æ˜¯ç©ºå­—ç¬¦ä¸²<code>""</code>ã€‚</p>
<p>å®é™…ä¸Šï¼Œæˆ‘ä»¬æœŸæœ›åˆ†ç»„åŒ¹é…ç»“æœæ˜¯ï¼š</p>
<table>
<thead>
<tr class="header">
<th>input</th>
<th><code>\d+</code></th>
<th><code>0*</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>123000</td>
<td>"123"</td>
<td>"000"</td>
</tr>
<tr class="even">
<td>10100</td>
<td>"101"</td>
<td>"00"</td>
</tr>
<tr class="odd">
<td>1001</td>
<td>"1001"</td>
<td>""</td>
</tr>
</tbody>
</table>
<p>ä½†å®é™…çš„åˆ†ç»„åŒ¹é…ç»“æœæ˜¯è¿™æ ·çš„ï¼š</p>
<table>
<thead>
<tr class="header">
<th>input</th>
<th><code>\d+</code></th>
<th><code>0*</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>123000</td>
<td>"123000"</td>
<td>""</td>
</tr>
<tr class="even">
<td>10100</td>
<td>"10100"</td>
<td>""</td>
</tr>
<tr class="odd">
<td>1001</td>
<td>"1001"</td>
<td>""</td>
</tr>
</tbody>
</table>
<p>â€‹
ä»”ç»†è§‚å¯Ÿä¸Šè¿°å®é™…åŒ¹é…ç»“æœï¼Œå®é™…ä¸Šå®ƒæ˜¯å®Œå…¨åˆç†çš„ï¼Œå› ä¸º<code>\d+</code>ç¡®å®å¯ä»¥åŒ¹é…åé¢ä»»æ„ä¸ª<code>0</code>ã€‚</p>
<p>â€‹
<strong>è¿™æ˜¯å› ä¸ºæ­£åˆ™è¡¨è¾¾å¼é»˜è®¤ä½¿ç”¨è´ªå©ªåŒ¹é…ï¼šä»»ä½•ä¸€ä¸ªè§„åˆ™ï¼Œå®ƒæ€»æ˜¯å°½å¯èƒ½å¤šåœ°å‘ååŒ¹é…ï¼Œå› æ­¤ï¼Œ<code>\d+</code>æ€»æ˜¯ä¼šæŠŠåé¢çš„<code>0</code>åŒ…å«è¿›æ¥ã€‚</strong></p>
<p>â€‹
<strong>è¦è®©<code>\d+</code>å°½é‡å°‘åŒ¹é…ï¼Œè®©<code>0*</code>å°½é‡å¤šåŒ¹é…ï¼Œæˆ‘ä»¬å°±å¿…é¡»è®©<code>\d+</code>ä½¿ç”¨éè´ªå©ªåŒ¹é…ã€‚åœ¨è§„åˆ™<code>\d+</code>åé¢åŠ ä¸ª<code>?</code>å³å¯è¡¨ç¤ºéè´ªå©ªåŒ¹é…ã€‚æˆ‘ä»¬æ”¹å†™æ­£åˆ™è¡¨è¾¾å¼å¦‚ä¸‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">pattern</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;(\\d+?)(0*)&quot;</span>);</span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">matcher</span> <span class="operator">=</span> pattern.matcher(<span class="string">&quot;1230000&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (matcher.matches()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;group1=&quot;</span> + matcher.group(<span class="number">1</span>)); <span class="comment">// &quot;123&quot;</span></span><br><span class="line">            System.out.println(<span class="string">&quot;group2=&quot;</span> + matcher.group(<span class="number">2</span>)); <span class="comment">// &quot;0000&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
<strong>å› æ­¤ï¼Œç»™å®šä¸€ä¸ªåŒ¹é…è§„åˆ™ï¼ŒåŠ ä¸Š<code>?</code>åå°±å˜æˆäº†éè´ªå©ªåŒ¹é…ã€‚</strong></p>
<p>â€‹
<strong>æˆ‘ä»¬å†æ¥çœ‹è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼<code>(\d??)(9*)</code>ï¼Œæ³¨æ„<code>\d?</code>è¡¨ç¤ºåŒ¹é…0ä¸ªæˆ–1ä¸ªæ•°å­—ï¼Œåé¢ç¬¬äºŒä¸ª<code>?</code>è¡¨ç¤ºéè´ªå©ªåŒ¹é…ï¼Œå› æ­¤ï¼Œç»™å®šå­—ç¬¦ä¸²<code>"9999"</code>ï¼ŒåŒ¹é…åˆ°çš„ä¸¤ä¸ªå­ä¸²åˆ†åˆ«æ˜¯<code>""</code>å’Œ<code>"9999"</code>ï¼Œå› ä¸ºå¯¹äº<code>\d?</code>æ¥è¯´ï¼Œå¯ä»¥åŒ¹é…1ä¸ª<code>9</code>ï¼Œä¹Ÿå¯ä»¥åŒ¹é…0ä¸ª<code>9</code>ï¼Œä½†æ˜¯å› ä¸ºåé¢çš„<code>?</code>è¡¨ç¤ºéè´ªå©ªåŒ¹é…ï¼Œå®ƒå°±ä¼šå°½å¯èƒ½å°‘çš„åŒ¹é…ï¼Œç»“æœæ˜¯åŒ¹é…äº†0ä¸ª<code>9</code>ã€‚</strong></p>
<h3 id="å…­æœç´¢å’Œæ›¿æ¢">å…­ã€æœç´¢å’Œæ›¿æ¢ï¼š</h3>
<h4 id="åˆ†å‰²å­—ç¬¦ä¸²">1ã€åˆ†å‰²å­—ç¬¦ä¸²ï¼š</h4>
<p>â€‹
ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åˆ†å‰²å­—ç¬¦ä¸²å¯ä»¥å®ç°æ›´åŠ çµæ´»çš„åŠŸèƒ½ã€‚<code>String.split()</code>æ–¹æ³•ä¼ å…¥çš„æ­£æ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;a b c&quot;.split(&quot;\\s&quot;); // &#123; &quot;a&quot;, &quot;b&quot;, &quot;c&quot; &#125;</span><br><span class="line">&quot;a b  c&quot;.split(&quot;\\s&quot;); // &#123; &quot;a&quot;, &quot;b&quot;, &quot;&quot;, &quot;c&quot; &#125;</span><br><span class="line">&quot;a, b ;; c&quot;.split(&quot;[\\,\\;\\s]+&quot;); // &#123; &quot;a&quot;, &quot;b&quot;, &quot;c&quot; &#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
å¦‚æœæˆ‘ä»¬æƒ³è®©ç”¨æˆ·è¾“å…¥ä¸€ç»„æ ‡ç­¾ï¼Œç„¶åæŠŠæ ‡ç­¾æå–å‡ºæ¥ï¼Œå› ä¸ºç”¨æˆ·çš„è¾“å…¥å¾€å¾€æ˜¯ä¸è§„èŒƒçš„ï¼Œè¿™æ—¶ï¼Œä½¿ç”¨åˆé€‚çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå°±å¯ä»¥æ¶ˆé™¤å¤šä¸ªç©ºæ ¼ã€æ··åˆ<code>,</code>å’Œ<code>;</code>è¿™äº›ä¸è§„èŒƒçš„è¾“å…¥ï¼Œç›´æ¥æå–å‡ºè§„èŒƒçš„å­—ç¬¦ä¸²ã€‚</p>
<h4 id="æœç´¢å­—ç¬¦ä¸²">2ã€æœç´¢å­—ç¬¦ä¸²ï¼š</h4>
<p>â€‹ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿˜å¯ä»¥æœç´¢å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬æ¥çœ‹ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;the quick brown fox jumps over the lazy dog.&quot;</span>;</span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">p</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;\\wo\\w&quot;</span>);</span><br><span class="line">        <span class="type">Matcher</span> <span class="variable">m</span> <span class="operator">=</span> p.matcher(s);</span><br><span class="line">        <span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sub</span> <span class="operator">=</span> s.substring(m.start(), m.end());</span><br><span class="line">            System.out.println(sub);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
æˆ‘ä»¬è·å–åˆ°<code>Matcher</code>å¯¹è±¡åï¼Œä¸éœ€è¦è°ƒç”¨<code>matches()</code>æ–¹æ³•ï¼ˆå› ä¸ºåŒ¹é…æ•´ä¸ªä¸²è‚¯å®šè¿”å›falseï¼‰ï¼Œè€Œæ˜¯åå¤è°ƒç”¨<code>find()</code>æ–¹æ³•ï¼Œåœ¨æ•´ä¸ªä¸²ä¸­æœç´¢èƒ½åŒ¹é…ä¸Š<code>\\wo\\w</code>è§„åˆ™çš„å­ä¸²ï¼Œå¹¶æ‰“å°å‡ºæ¥ã€‚<strong>è¿™ç§æ–¹å¼æ¯”<code>String.indexOf()</code>è¦çµæ´»å¾—å¤šï¼Œå› ä¸ºæˆ‘ä»¬æœç´¢çš„è§„åˆ™æ˜¯3ä¸ªå­—ç¬¦ï¼šä¸­é—´å¿…é¡»æ˜¯<code>o</code>ï¼Œå‰åä¸¤ä¸ªå¿…é¡»æ˜¯å­—ç¬¦<code>[A-Za-z0-9_]</code>ã€‚</strong></p>
<h4 id="æ›¿æ¢å­—ç¬¦ä¸²">3ã€æ›¿æ¢å­—ç¬¦ä¸²ï¼š</h4>
<p>â€‹
ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢å­—ç¬¦ä¸²å¯ä»¥ç›´æ¥è°ƒç”¨<code>String.replaceAll()</code>ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¾…æ›¿æ¢çš„å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬è¿˜æ˜¯æ¥çœ‹ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;The     quick\t\t brown   fox  jumps   over the  lazy dog.&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">r</span> <span class="operator">=</span> s.replaceAll(<span class="string">&quot;\\s+&quot;</span>, <span class="string">&quot; &quot;</span>);</span><br><span class="line">        System.out.println(r); <span class="comment">// &quot;The quick brown fox jumps over the lazy dog.&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaå…¥é—¨ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç³»åˆ—ç¬”è®°4â€”â€”javaå¼‚å¸¸å¤„ç†</title>
    <url>/2022/01/30/2e7ebd82e85d/</url>
    <content><![CDATA[<p>å‚è€ƒæ•™ç¨‹ç½‘å€ï¼šhttps://www.liaoxuefeng.com/wiki/1252599548343744/1264734349295520</p>
<h3 id="ä¸€javaå¼‚å¸¸ç®€ä»‹">ä¸€ã€Javaå¼‚å¸¸ç®€ä»‹ï¼š</h3>
<h4 id="å¼‚å¸¸ä»‹ç»ä¸åˆ†ç±»">1ã€å¼‚å¸¸ä»‹ç»ä¸åˆ†ç±»</h4>
<p>æ‰€ä»¥ï¼Œä¸€ä¸ªå¥å£®çš„ç¨‹åºå¿…é¡»å¤„ç†å„ç§å„æ ·çš„é”™è¯¯ã€‚</p>
<p>è°ƒç”¨æ–¹å¦‚ä½•è·çŸ¥è°ƒç”¨å¤±è´¥çš„ä¿¡æ¯ï¼Ÿæœ‰ä¸¤ç§æ–¹æ³•ï¼š</p>
<ul>
<li>æ–¹æ³•1ï¼šçº¦å®šè¿”å›é”™è¯¯ç ï¼Œå¸¸è§äºC</li>
<li>æ–¹æ³•2ï¼šåœ¨è¯­è¨€å±‚é¢ä¸Šæä¾›å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼šï¼ˆè¾ƒä¸ºå¸¸ç”¨ï¼‰</li>
</ul>
<p><strong>å¼‚å¸¸æ˜¯ä¸€ç§<code>class</code>ï¼Œå› æ­¤å®ƒæœ¬èº«å¸¦æœ‰ç±»å‹ä¿¡æ¯ã€‚å¼‚å¸¸å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹æŠ›å‡ºï¼Œä½†åªéœ€è¦åœ¨ä¸Šå±‚æ•è·ï¼Œè¿™æ ·å°±å’Œæ–¹æ³•è°ƒç”¨åˆ†ç¦»äº†</strong></p>
<p>Javaçš„å¼‚å¸¸æ˜¯<code>class</code>ï¼Œå®ƒçš„ç»§æ‰¿å…³ç³»å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">                     â”‚  Object   â”‚</span><br><span class="line">                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">                           â–²</span><br><span class="line">                           â”‚</span><br><span class="line">                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">                     â”‚ Throwable â”‚</span><br><span class="line">                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">                           â–²</span><br><span class="line">                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">                 â”‚                   â”‚</span><br><span class="line">           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">           â”‚   Error   â”‚       â”‚ Exception â”‚</span><br><span class="line">           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">                 â–²                   â–²</span><br><span class="line">         â”Œâ”€â”€â”€â”€â”€â”€â”€â”˜              â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">         â”‚                      â”‚               â”‚</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚OutOfMemoryError â”‚... â”‚RuntimeException â”‚â”‚IOExceptionâ”‚...</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">                                â–²</span><br><span class="line">                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">                    â”‚                         â”‚</span><br><span class="line">         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">         â”‚NullPointerException â”‚ â”‚IllegalArgumentException â”‚...</span><br><span class="line">         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šå›¾ç»§æ‰¿å…³ç³»å¯çŸ¥ï¼š<code>Throwable</code>æ˜¯å¼‚å¸¸ä½“ç³»çš„æ ¹ï¼Œå®ƒç»§æ‰¿è‡ª<code>Object</code>ã€‚<code>Throwable</code>æœ‰ä¸¤ä¸ªä½“ç³»ï¼š<code>Error</code>å’Œ<code>Exception</code>ï¼Œ<code>Error</code>è¡¨ç¤ºä¸¥é‡çš„é”™è¯¯ï¼Œç¨‹åºå¯¹æ­¤ä¸€èˆ¬æ— èƒ½ä¸ºåŠ›ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><code>OutOfMemoryError</code>ï¼šå†…å­˜è€—å°½</li>
<li><code>NoClassDefFoundError</code>ï¼šæ— æ³•åŠ è½½æŸä¸ªClass</li>
<li><code>StackOverflowError</code>ï¼šæ ˆæº¢å‡º</li>
</ul>
<p>è€Œ<code>Exception</code>åˆ™æ˜¯è¿è¡Œæ—¶çš„é”™è¯¯ï¼Œå®ƒå¯ä»¥è¢«æ•è·å¹¶å¤„ç†ã€‚</p>
<ul>
<li><p>æŸäº›å¼‚å¸¸æ˜¯åº”ç”¨ç¨‹åºé€»è¾‘å¤„ç†çš„ä¸€éƒ¨åˆ†ï¼Œåº”è¯¥æ•è·å¹¶å¤„ç†ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><p><code>NumberFormatException</code>ï¼šæ•°å€¼ç±»å‹çš„æ ¼å¼é”™è¯¯</p></li>
<li><p><code>FileNotFoundException</code>ï¼šæœªæ‰¾åˆ°æ–‡ä»¶</p></li>
<li><p><code>SocketException</code>ï¼šè¯»å–ç½‘ç»œå¤±è´¥</p></li>
</ul></li>
<li><p>è¿˜æœ‰ä¸€äº›å¼‚å¸¸æ˜¯ç¨‹åºé€»è¾‘ç¼–å†™ä¸å¯¹é€ æˆçš„ï¼Œåº”è¯¥ä¿®å¤ç¨‹åºæœ¬èº«ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><p><code>NullPointerException</code>ï¼šå¯¹æŸä¸ª<code>null</code>çš„å¯¹è±¡è°ƒç”¨æ–¹æ³•æˆ–å­—æ®µ</p></li>
<li><p><code>IndexOutOfBoundsException</code>ï¼šæ•°ç»„ç´¢å¼•è¶Šç•Œ</p></li>
</ul></li>
</ul>
<p><code>Exception</code>åˆåˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p>
<ol type="1">
<li><code>RuntimeException</code>ä»¥åŠå®ƒçš„å­ç±»ï¼›</li>
<li>é<code>RuntimeException</code>ï¼ˆåŒ…æ‹¬<code>IOException</code>ã€<code>ReflectiveOperationException</code>ç­‰ç­‰ï¼‰</li>
</ol>
<p><strong>Javaè§„å®š</strong>ï¼š</p>
<ul>
<li>å¿…é¡»æ•è·çš„å¼‚å¸¸ï¼ŒåŒ…æ‹¬<code>Exception</code>åŠå…¶å­ç±»ï¼Œä½†ä¸åŒ…æ‹¬<code>RuntimeException</code>åŠå…¶å­ç±»ï¼Œè¿™ç§ç±»å‹çš„å¼‚å¸¸ç§°ä¸º<strong>Checked
Exception</strong>ã€‚</li>
<li>ä¸éœ€è¦æ•è·çš„å¼‚å¸¸ï¼ŒåŒ…æ‹¬<code>Error</code>åŠå…¶å­ç±»ï¼Œ<code>RuntimeException</code>åŠå…¶å­ç±»ã€‚</li>
</ul>
<h3 id="äºŒæ•è·å¼‚å¸¸">äºŒã€æ•è·å¼‚å¸¸ï¼š</h3>
<h4 id="æ™®é€šçš„æ•è·å¼‚å¸¸">1ã€æ™®é€šçš„æ•è·å¼‚å¸¸ï¼š</h4>
<p>â€‹
æ•è·å¼‚å¸¸ä½¿ç”¨<code>try...catch</code>è¯­å¥ï¼ŒæŠŠå¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä»£ç æ”¾åˆ°<code>try &#123;...&#125;</code>ä¸­ï¼Œç„¶åä½¿ç”¨<code>catch</code>æ•è·å¯¹åº”çš„<code>Exception</code>åŠå…¶å­ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">byte</span>[] bs = toGBK(<span class="string">&quot;ä¸­æ–‡&quot;</span>);</span><br><span class="line">        System.out.println(Arrays.toString(bs));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">byte</span>[] toGBK(String s) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// ç”¨æŒ‡å®šç¼–ç è½¬æ¢Stringä¸ºbyte[]:</span></span><br><span class="line">            <span class="keyword">return</span> s.getBytes(<span class="string">&quot;GBK&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœç³»ç»Ÿä¸æ”¯æŒGBKç¼–ç ï¼Œä¼šæ•è·åˆ°UnsupportedEncodingException:</span></span><br><span class="line">            System.out.println(e); <span class="comment">// æ‰“å°å¼‚å¸¸ä¿¡æ¯</span></span><br><span class="line">            <span class="keyword">return</span> s.getBytes(); <span class="comment">// å°è¯•ä½¿ç”¨ç”¨é»˜è®¤ç¼–ç </span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>â€‹
å¦‚æœæˆ‘ä»¬ä¸æ•è·<code>UnsupportedEncodingException</code>ï¼Œä¼šå‡ºç°ç¼–è¯‘å¤±è´¥çš„é—®é¢˜ï¼šç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œé”™è¯¯ä¿¡æ¯ç±»ä¼¼ï¼šunreported
exception UnsupportedEncodingException; must be caught or declared to be
thrownï¼Œå¹¶ä¸”å‡†ç¡®åœ°æŒ‡å‡ºéœ€è¦æ•è·çš„è¯­å¥æ˜¯<code>return s.getBytes("GBK");</code>ã€‚æ„æ€æ˜¯è¯´ï¼Œåƒ<code>UnsupportedEncodingException</code>è¿™æ ·çš„Checked
Exceptionï¼Œå¿…é¡»è¢«æ•è·ã€‚</p>
<p>â€‹
<strong>è¿™æ˜¯å› ä¸º<code>String.getBytes(String)</code>æ–¹æ³•å®šä¹‰æ˜¯ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">byte</span>[] getBytes(String charsetName) <span class="keyword">throws</span> UnsupportedEncodingException &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
<strong>åœ¨æ–¹æ³•å®šä¹‰çš„æ—¶å€™ï¼Œä½¿ç”¨<code>throws Xxx</code>è¡¨ç¤ºè¯¥æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹</strong>ã€‚è°ƒç”¨æ–¹åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œå¿…é¡»å¼ºåˆ¶æ•è·è¿™äº›å¼‚å¸¸ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚</p>
<p>â€‹ <strong>æ³¨æ„</strong>ï¼šåªè¦æ˜¯æ–¹æ³•å£°æ˜çš„Checked
Exceptionï¼Œä¸åœ¨è°ƒç”¨å±‚æ•è·ï¼Œä¹Ÿå¿…é¡»åœ¨æ›´é«˜çš„è°ƒç”¨å±‚æ•è·ã€‚æ‰€æœ‰æœªæ•è·çš„å¼‚å¸¸ï¼Œæœ€ç»ˆä¹Ÿå¿…é¡»åœ¨<code>main()</code>æ–¹æ³•ä¸­æ•è·ï¼Œä¸ä¼šå‡ºç°æ¼å†™<code>try</code>çš„æƒ…å†µã€‚è¿™æ˜¯ç”±ç¼–è¯‘å™¨ä¿è¯çš„ã€‚<code>main()</code>æ–¹æ³•ä¹Ÿæ˜¯æœ€åæ•è·<code>Exception</code>çš„æœºä¼šã€‚</p>
<p>â€‹
<strong>æ³¨æ„</strong>ï¼šæ‰€æœ‰å¼‚å¸¸éƒ½å¯ä»¥è°ƒç”¨<code>printStackTrace()</code>æ–¹æ³•æ‰“å°å¼‚å¸¸æ ˆï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•æœ‰ç”¨çš„å¿«é€Ÿæ‰“å°å¼‚å¸¸çš„æ–¹æ³•ã€‚</p>
<h4 id="å¤šä¸ªcatchè¯­å¥">2ã€å¤šä¸ªcatchè¯­å¥ï¼š</h4>
<p>â€‹
å¯ä»¥ä½¿ç”¨å¤šä¸ª<code>catch</code>è¯­å¥ï¼Œæ¯ä¸ª<code>catch</code>åˆ†åˆ«æ•è·å¯¹åº”çš„<code>Exception</code>åŠå…¶å­ç±»ã€‚JVMåœ¨æ•è·åˆ°å¼‚å¸¸åï¼Œä¼šä»ä¸Šåˆ°ä¸‹åŒ¹é…<code>catch</code>è¯­å¥ï¼ŒåŒ¹é…åˆ°æŸä¸ª<code>catch</code>åï¼Œæ‰§è¡Œ<code>catch</code>ä»£ç å—ï¼Œç„¶åä¸å†ç»§ç»­åŒ¹é…ã€‚</p>
<p>â€‹
<strong>å­˜åœ¨å¤šä¸ª<code>catch</code>çš„æ—¶å€™ï¼Œ<code>catch</code>çš„é¡ºåºéå¸¸é‡è¦ï¼š</strong>å­ç±»å¿…é¡»å†™åœ¨å‰é¢ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        process1();</span><br><span class="line">        process2();</span><br><span class="line">        process3();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;IO error&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123; <span class="comment">// æ°¸è¿œæ•è·ä¸åˆ°</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Bad encoding&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
<strong>å¯¹äºä¸Šé¢çš„ä»£ç ï¼Œ<code>UnsupportedEncodingException</code>å¼‚å¸¸æ˜¯æ°¸è¿œæ•è·ä¸åˆ°çš„</strong>ï¼Œå› ä¸ºå®ƒæ˜¯<code>IOException</code>çš„å­ç±»ã€‚å½“æŠ›å‡º<code>UnsupportedEncodingException</code>å¼‚å¸¸æ—¶ï¼Œä¼šè¢«<code>catch (IOException e) &#123; ... &#125;</code>æ•è·å¹¶æ‰§è¡Œã€‚</p>
<h4 id="finallyè¯­å¥">3ã€finallyè¯­å¥ï¼š</h4>
<p>æ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸å‘ç”Ÿï¼Œå¦‚æœæˆ‘ä»¬éƒ½å¸Œæœ›æ‰§è¡Œä¸€äº›è¯­å¥</p>
<p>Javaçš„<code>try ... catch</code>æœºåˆ¶è¿˜æä¾›äº†<code>finally</code>è¯­å¥ï¼Œ<code>finally</code>è¯­å¥å—ä¿è¯æœ‰æ— é”™è¯¯éƒ½ä¼šæ‰§è¡Œã€‚ä¸Šè¿°ä»£ç å¯ä»¥æ”¹å†™å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        process1();</span><br><span class="line">        process2();</span><br><span class="line">        process3();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Bad encoding&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;IO error&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;END&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„<code>finally</code>æœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ol type="1">
<li><code>finally</code>è¯­å¥ä¸æ˜¯å¿…é¡»çš„ï¼Œå¯å†™å¯ä¸å†™ï¼›</li>
<li><code>finally</code>æ€»æ˜¯æœ€åæ‰§è¡Œã€‚</li>
</ol>
<p>â€‹
å¦‚æœæ²¡æœ‰å‘ç”Ÿå¼‚å¸¸ï¼Œå°±æ­£å¸¸æ‰§è¡Œ<code>try &#123; ... &#125;</code>è¯­å¥å—ï¼Œç„¶åæ‰§è¡Œ<code>finally</code>ã€‚å¦‚æœå‘ç”Ÿäº†å¼‚å¸¸ï¼Œå°±ä¸­æ–­æ‰§è¡Œ<code>try &#123; ... &#125;</code>è¯­å¥å—ï¼Œç„¶åè·³è½¬æ‰§è¡ŒåŒ¹é…çš„<code>catch</code>è¯­å¥å—ï¼Œæœ€åæ‰§è¡Œ<code>finally</code>ã€‚</p>
<h4 id="æ•è·å¤šç§å¼‚å¸¸">4ã€æ•è·å¤šç§å¼‚å¸¸ï¼š</h4>
<p>å¯ä»¥æŠŠä¸¤ä¸ªå¤„ç†é€»è¾‘ä¸€æ ·çš„å¼‚å¸¸ç”¨<code>|</code>åˆå¹¶åˆ°ä¸€èµ·</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        process1();</span><br><span class="line">        process2();</span><br><span class="line">        process3();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException | NumberFormatException e) &#123; <span class="comment">// IOExceptionæˆ–NumberFormatException</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Bad input&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Unknown error&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸‰æŠ›å‡ºå¼‚å¸¸">ä¸‰ã€æŠ›å‡ºå¼‚å¸¸ï¼š</h3>
<h4 id="æŠ›å‡ºå¼‚å¸¸é“¾æ¡">1ã€æŠ›å‡ºå¼‚å¸¸é“¾æ¡ï¼š</h4>
<p>â€‹
å½“æŸä¸ªæ–¹æ³•æŠ›å‡ºäº†å¼‚å¸¸æ—¶ï¼Œå¦‚æœå½“å‰æ–¹æ³•æ²¡æœ‰æ•è·å¼‚å¸¸ï¼Œå¼‚å¸¸å°±ä¼šè¢«æŠ›åˆ°ä¸Šå±‚è°ƒç”¨æ–¹æ³•ï¼Œç›´åˆ°é‡åˆ°æŸä¸ª<code>try ... catch</code>è¢«æ•è·ä¸ºæ­¢</p>
<p>â€‹ é€šè¿‡<code>printStackTrace()</code>å¯ä»¥æ‰“å°å‡ºæ–¹æ³•çš„è°ƒç”¨æ ˆï¼Œç±»ä¼¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">java.lang.NumberFormatException: <span class="literal">null</span></span><br><span class="line">    at java.base/java.lang.Integer.parseInt(Integer.java:<span class="number">614</span>)</span><br><span class="line">    at java.base/java.lang.Integer.parseInt(Integer.java:<span class="number">770</span>)</span><br><span class="line">    at Main.process2(Main.java:<span class="number">16</span>)</span><br><span class="line">    at Main.process1(Main.java:<span class="number">12</span>)</span><br><span class="line">    at Main.main(Main.java:<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<p><code>printStackTrace()</code>å¯¹äºè°ƒè¯•é”™è¯¯éå¸¸æœ‰ç”¨ï¼Œä¸Šè¿°ä¿¡æ¯è¡¨ç¤ºï¼š<code>NumberFormatException</code>æ˜¯åœ¨<code>java.lang.Integer.parseInt</code>æ–¹æ³•ä¸­è¢«æŠ›å‡ºçš„ï¼Œä»ä¸‹å¾€ä¸Šçœ‹ï¼Œè°ƒç”¨å±‚æ¬¡ä¾æ¬¡æ˜¯ï¼š</p>
<ol type="1">
<li><code>main()</code>è°ƒç”¨<code>process1()</code>ï¼›</li>
<li><code>process1()</code>è°ƒç”¨<code>process2()</code>ï¼›</li>
<li><code>process2()</code>è°ƒç”¨<code>Integer.parseInt(String)</code>ï¼›</li>
<li><code>Integer.parseInt(String)</code>è°ƒç”¨<code>Integer.parseInt(String, int)</code>ã€‚</li>
</ol>
<h4 id="å¦‚ä½•æŠ›å‡ºå¼‚å¸¸">2ã€å¦‚ä½•æŠ›å‡ºå¼‚å¸¸ï¼š</h4>
<p>æŠ›å‡ºå¼‚å¸¸åˆ†ä¸¤æ­¥ï¼š</p>
<ol type="1">
<li>åˆ›å»ºæŸä¸ª<code>Exception</code>çš„å®ä¾‹ï¼›</li>
<li>ç”¨<code>throw</code>è¯­å¥æŠ›å‡ºã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">process2</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s==<span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">NullPointerException</span> <span class="variable">e</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NullPointerException</span>();</span><br><span class="line">        <span class="keyword">throw</span> e;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ–å†™æˆä¸€è¡Œï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">process2</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s==<span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NullPointerException</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¼‚å¸¸æ•è·åå†æ¬¡æŠ›å‡º">3ã€å¼‚å¸¸æ•è·åå†æ¬¡æŠ›å‡ºï¼š</h4>
<p>â€‹
å¦‚æœä¸€ä¸ªæ–¹æ³•æ•è·äº†æŸä¸ªå¼‚å¸¸åï¼Œåˆåœ¨<code>catch</code>å­å¥ä¸­æŠ›å‡ºæ–°çš„å¼‚å¸¸ï¼Œå°±ç›¸å½“äºæŠŠæŠ›å‡ºçš„å¼‚å¸¸ç±»å‹â€œè½¬æ¢â€äº†ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">process1</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        process2();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (NullPointerException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">process2</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s==<span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NullPointerException</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰“å°å‡ºçš„å¼‚å¸¸æ ˆç±»ä¼¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">java.lang.IllegalArgumentException</span><br><span class="line">    at Main.process1(Main.java:15)</span><br><span class="line">    at Main.main(Main.java:5)</span><br></pre></td></tr></table></figure>
<p>â€‹
è¿™è¯´æ˜<strong>æ–°çš„å¼‚å¸¸ä¸¢å¤±äº†åŸå§‹å¼‚å¸¸ä¿¡æ¯</strong>ï¼Œæˆ‘ä»¬å·²ç»çœ‹ä¸åˆ°åŸå§‹å¼‚å¸¸<code>NullPointerException</code>çš„ä¿¡æ¯äº†ã€‚</p>
<p>â€‹
<strong>ä¸ºäº†èƒ½è¿½è¸ªåˆ°å®Œæ•´çš„å¼‚å¸¸æ ˆï¼Œåœ¨æ„é€ å¼‚å¸¸çš„æ—¶å€™ï¼ŒæŠŠåŸå§‹çš„<code>Exception</code>å®ä¾‹ä¼ è¿›å»ï¼Œæ–°çš„<code>Exception</code>å°±å¯ä»¥æŒæœ‰åŸå§‹<code>Exception</code>ä¿¡æ¯ã€‚</strong>å¯¹ä¸Šè¿°ä»£ç æ”¹è¿›å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            process1();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">process1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            process2();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NullPointerException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">process2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NullPointerException</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸Šè¿°ä»£ç ï¼Œæ‰“å°å‡ºçš„å¼‚å¸¸æ ˆç±»ä¼¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">java.lang.IllegalArgumentException: java.lang.NullPointerException</span><br><span class="line">    at Main.process1(Main.java:15)</span><br><span class="line">    at Main.main(Main.java:5)</span><br><span class="line">Caused by: java.lang.NullPointerException</span><br><span class="line">    at Main.process2(Main.java:20)</span><br><span class="line">    at Main.process1(Main.java:13)</span><br></pre></td></tr></table></figure>
<p>â€‹
æ³¨æ„åˆ°<code>Caused by: Xxx</code>ï¼Œè¯´æ˜æ•è·çš„<code>IllegalArgumentException</code>å¹¶ä¸æ˜¯é€ æˆé—®é¢˜çš„æ ¹æºï¼Œæ ¹æºåœ¨äº<code>NullPointerException</code>ï¼Œæ˜¯åœ¨<code>Main.process2()</code>æ–¹æ³•æŠ›å‡ºçš„ã€‚</p>
<p>â€‹
åœ¨ä»£ç ä¸­<strong>è·å–åŸå§‹å¼‚å¸¸å¯ä»¥ä½¿ç”¨<code>Throwable.getCause()</code>æ–¹æ³•ã€‚å¦‚æœè¿”å›<code>null</code>ï¼Œè¯´æ˜å·²ç»æ˜¯â€œæ ¹å¼‚å¸¸â€äº†ã€‚</strong></p>
<h4
id="åœ¨tryæˆ–catchç§æŠ›å‡ºå¼‚å¸¸finallyè¯­å¥ä¼šå…ˆæ‰§è¡Œç„¶åå†æŠ›å‡ºå¼‚å¸¸">4ã€åœ¨tryæˆ–catchç§æŠ›å‡ºå¼‚å¸¸ï¼Œfinallyè¯­å¥ä¼šå…ˆæ‰§è¡Œï¼Œç„¶åå†æŠ›å‡ºå¼‚å¸¸</h4>
<h4 id="å¼‚å¸¸å±è”½">5ã€å¼‚å¸¸å±è”½ï¼š</h4>
<p>â€‹
å¦‚æœåœ¨æ‰§è¡Œ<code>finally</code>è¯­å¥æ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆï¼Œ<code>catch</code>è¯­å¥çš„å¼‚å¸¸è¿˜èƒ½å¦ç»§ç»­æŠ›å‡ºï¼Ÿä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Integer.parseInt(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;catched&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;finally&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œä¸Šè¿°ä»£ç ï¼Œå‘ç°å¼‚å¸¸ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">catched</span><br><span class="line">finally</span><br><span class="line">Exception in thread &quot;main&quot; java.lang.IllegalArgumentException</span><br><span class="line">    at Main.main(Main.java:11)</span><br></pre></td></tr></table></figure>
<p>â€‹
è¿™è¯´æ˜<strong><code>finally</code>æŠ›å‡ºå¼‚å¸¸åï¼ŒåŸæ¥åœ¨<code>catch</code>ä¸­å‡†å¤‡æŠ›å‡ºçš„å¼‚å¸¸å°±â€œæ¶ˆå¤±â€äº†ï¼Œå› ä¸ºåªèƒ½æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚æ²¡æœ‰è¢«æŠ›å‡ºçš„å¼‚å¸¸ç§°ä¸ºâ€œè¢«å±è”½â€çš„å¼‚å¸¸</strong>ï¼ˆSuppressed
Exceptionï¼‰ã€‚</p>
<p>â€‹
<strong>ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåœ¨<code>finally</code>ä¸­ä¸è¦æŠ›å‡ºå¼‚å¸¸</strong>ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€šå¸¸ä¸éœ€è¦å…³å¿ƒ<code>Suppressed Exception</code>ã€‚</p>
<h3 id="å››è‡ªå®šä¹‰å¼‚å¸¸">å››ã€è‡ªå®šä¹‰å¼‚å¸¸</h3>
<p>Javaæ ‡å‡†åº“å®šä¹‰çš„å¸¸ç”¨å¼‚å¸¸åŒ…æ‹¬ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Exception</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€ RuntimeException</span><br><span class="line">â”‚  â”‚</span><br><span class="line">â”‚  â”œâ”€ NullPointerException</span><br><span class="line">â”‚  â”‚</span><br><span class="line">â”‚  â”œâ”€ IndexOutOfBoundsException</span><br><span class="line">â”‚  â”‚</span><br><span class="line">â”‚  â”œâ”€ SecurityException</span><br><span class="line">â”‚  â”‚</span><br><span class="line">â”‚  â””â”€ IllegalArgumentException å‚æ•°æ£€æŸ¥ä¸åˆæ³•</span><br><span class="line">â”‚     â”‚</span><br><span class="line">â”‚     â””â”€ NumberFormatException</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€ IOException</span><br><span class="line">â”‚  â”‚</span><br><span class="line">â”‚  â”œâ”€ UnsupportedCharsetException</span><br><span class="line">â”‚  â”‚</span><br><span class="line">â”‚  â”œâ”€ FileNotFoundException</span><br><span class="line">â”‚  â”‚</span><br><span class="line">â”‚  â””â”€ SocketException</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€ ParseException</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€ GeneralSecurityException</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€ SQLException</span><br><span class="line">â”‚</span><br><span class="line">â””â”€ TimeoutException</span><br></pre></td></tr></table></figure>
<p><strong>å½“æˆ‘ä»¬åœ¨ä»£ç ä¸­éœ€è¦æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œå°½é‡ä½¿ç”¨JDKå·²å®šä¹‰çš„å¼‚å¸¸ç±»å‹</strong></p>
<p>åœ¨ä¸€ä¸ªå¤§å‹é¡¹ç›®ä¸­ï¼Œå¯ä»¥è‡ªå®šä¹‰æ–°çš„å¼‚å¸¸ç±»å‹ï¼Œä½†æ˜¯ï¼Œä¿æŒä¸€ä¸ªåˆç†çš„å¼‚å¸¸ç»§æ‰¿ä½“ç³»æ˜¯éå¸¸é‡è¦çš„ã€‚</p>
<p><strong>ä¸€ä¸ªå¸¸è§çš„åšæ³•æ˜¯è‡ªå®šä¹‰ä¸€ä¸ª<code>BaseException</code>ä½œä¸ºâ€œæ ¹å¼‚å¸¸â€ï¼Œç„¶åï¼Œæ´¾ç”Ÿå‡ºå„ç§ä¸šåŠ¡ç±»å‹çš„å¼‚å¸¸ã€‚</strong></p>
<p><code>BaseException</code>éœ€è¦ä»ä¸€ä¸ªé€‚åˆçš„<code>Exception</code>æ´¾ç”Ÿï¼Œé€šå¸¸å»ºè®®ä»<code>RuntimeException</code>æ´¾ç”Ÿï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä»–ä¸šåŠ¡ç±»å‹çš„å¼‚å¸¸å°±å¯ä»¥ä»<code>BaseException</code>æ´¾ç”Ÿï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserNotFoundException</span> <span class="keyword">extends</span> <span class="title class_">BaseException</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginFailedException</span> <span class="keyword">extends</span> <span class="title class_">BaseException</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>è‡ªå®šä¹‰çš„<code>BaseException</code>åº”è¯¥æä¾›å¤šä¸ªæ„é€ æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseException</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseException</span><span class="params">(String message, Throwable cause)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message, cause);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseException</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseException</span><span class="params">(Throwable cause)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(cause);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
ä¸Šè¿°æ„é€ æ–¹æ³•å®é™…ä¸Šéƒ½æ˜¯åŸæ ·ç…§æŠ„<code>RuntimeException</code>ã€‚è¿™æ ·ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„æ—¶å€™ï¼Œå°±å¯ä»¥é€‰æ‹©åˆé€‚çš„æ„é€ æ–¹æ³•ã€‚é€šè¿‡IDEå¯ä»¥æ ¹æ®çˆ¶ç±»å¿«é€Ÿç”Ÿæˆå­ç±»çš„æ„é€ æ–¹æ³•ã€‚</p>
<h3 id="äº”nullpointerexception">äº”ã€NullPointerException</h3>
<p>â€‹
<code>NullPointerException</code>å³ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œä¿—ç§°NPEã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ä¸º<code>null</code>ï¼Œè°ƒç”¨å…¶æ–¹æ³•æˆ–è®¿é—®å…¶å­—æ®µå°±ä¼šäº§ç”Ÿ`NullPointerException</p>
<h4
id="å¦‚ä½•å¤„ç†nullpointerexception">1ã€å¦‚ä½•å¤„ç†NullPointerException</h4>
<p>â€‹
é‡åˆ°<code>NullPointerException</code>ï¼Œéµå¾ªåŸåˆ™æ˜¯æ—©æš´éœ²ï¼Œæ—©ä¿®å¤ï¼Œä¸¥ç¦ä½¿ç”¨<code>catch</code>æ¥éšè—è¿™ç§ç¼–ç é”™è¯¯ï¼Œä¸€äº›å¥½çš„ç¼–ç ä¹ æƒ¯ï¼šå¦‚ä¸‹</p>
<ul>
<li>æˆå‘˜å˜é‡åœ¨å®šä¹‰æ—¶åˆå§‹åŒ–ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>ä½¿ç”¨ç©ºå­—ç¬¦ä¸²<code>""</code>è€Œä¸æ˜¯é»˜è®¤çš„<code>null</code>å¯é¿å…å¾ˆå¤š<code>NullPointerException</code>ï¼Œç¼–å†™ä¸šåŠ¡é€»è¾‘æ—¶ï¼Œç”¨ç©ºå­—ç¬¦ä¸²<code>""</code>è¡¨ç¤ºæœªå¡«å†™æ¯”<code>null</code>å®‰å…¨å¾—å¤šã€‚</p></li>
<li><p>è¿”å›ç©ºå­—ç¬¦ä¸²<code>""</code>ã€ç©ºæ•°ç»„è€Œä¸æ˜¯<code>null</code>,è¿™æ ·å¯ä»¥ä½¿å¾—è°ƒç”¨æ–¹æ— éœ€æ£€æŸ¥ç»“æœæ˜¯å¦ä¸º<code>null</code>ã€‚</p></li>
<li><p>å¦‚æœè°ƒç”¨æ–¹ä¸€å®šè¦æ ¹æ®<code>null</code>åˆ¤æ–­ï¼Œæ¯”å¦‚è¿”å›<code>null</code>è¡¨ç¤ºæ–‡ä»¶ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆè€ƒè™‘è¿”å›<code>Optional&lt;T&gt;</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> Optional&lt;String&gt; <span class="title function_">readFromFile</span><span class="params">(String file)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!fileExist(file)) &#123;</span><br><span class="line">        <span class="keyword">return</span> Optional.empty();</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·è°ƒç”¨æ–¹å¿…é¡»é€šè¿‡<code>Optional.isPresent()</code>åˆ¤æ–­æ˜¯å¦æœ‰ç»“æœã€‚</p></li>
</ul>
<h4
id="å¦‚ä½•å®šä½nullpointerexception">2ã€å¦‚ä½•å®šä½NullPointerException</h4>
<p>â€‹
å¦‚æœäº§ç”Ÿäº†<code>NullPointerException</code>ï¼Œä¾‹å¦‚ï¼Œè°ƒç”¨<code>a.b.c.x()</code>æ—¶äº§ç”Ÿäº†<code>NullPointerException</code>ï¼ŒåŸå› å¯èƒ½æ˜¯ï¼š</p>
<ul>
<li><code>a</code>æ˜¯<code>null</code>ï¼›</li>
<li><code>a.b</code>æ˜¯<code>null</code>ï¼›</li>
<li><code>a.b.c</code>æ˜¯<code>null</code>ï¼›</li>
</ul>
<p>â€‹ ä»Java
14å¼€å§‹ï¼Œå¦‚æœäº§ç”Ÿäº†<code>NullPointerException</code>ï¼ŒJVMå¯ä»¥ç»™å‡ºè¯¦ç»†çš„ä¿¡æ¯å‘Šè¯‰æˆ‘ä»¬<code>null</code>å¯¹è±¡åˆ°åº•æ˜¯è°ã€‚æˆ‘ä»¬æ¥çœ‹ä¾‹å­ï¼š</p>
<p>â€‹
å¯ä»¥åœ¨<code>NullPointerException</code>çš„è¯¦ç»†ä¿¡æ¯ä¸­çœ‹åˆ°ç±»ä¼¼<code>... because "&lt;local1&gt;.address.city" is null</code>ï¼Œæ„æ€æ˜¯<code>city</code>å­—æ®µä¸º<code>null</code>ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å¿«é€Ÿå®šä½é—®é¢˜æ‰€åœ¨ã€‚</p>
<p>â€‹ è¿™ç§å¢å¼ºçš„<code>NullPointerException</code>è¯¦ç»†ä¿¡æ¯æ˜¯Java
14æ–°å¢çš„åŠŸèƒ½ï¼Œä½†é»˜è®¤æ˜¯å…³é—­çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç»™JVMæ·»åŠ ä¸€ä¸ª<code>-XX:+ShowCodeDetailsInExceptionMessages</code>å‚æ•°å¯ç”¨å®ƒï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">java -XX:+ShowCodeDetailsInExceptionMessages Main.java</span><br></pre></td></tr></table></figure>
<h3 id="å…­ä½¿ç”¨æ–­è¨€">å…­ã€ä½¿ç”¨æ–­è¨€</h3>
<p>â€‹
æ–­è¨€ï¼ˆAssertionï¼‰æ˜¯ä¸€ç§<strong>è°ƒè¯•ç¨‹åºçš„æ–¹å¼</strong>ã€‚åœ¨Javaä¸­ï¼Œä½¿ç”¨<code>assert</code>å…³é”®å­—æ¥å®ç°æ–­è¨€ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">double</span> <span class="variable">x</span> <span class="operator">=</span> Math.abs(-<span class="number">123.45</span>);</span><br><span class="line">    <span class="keyword">assert</span> x &gt;= <span class="number">0</span> : <span class="string">&quot;x must &gt;= 0&quot;</span>;</span><br><span class="line">    System.out.println(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
è¯­å¥<code>assert x &gt;= 0;</code>å³ä¸ºæ–­è¨€ï¼Œæ–­è¨€æ¡ä»¶<code>x &gt;= 0</code>é¢„æœŸä¸º<code>true</code>ã€‚å¦‚æœè®¡ç®—ç»“æœä¸º<code>false</code>ï¼Œåˆ™æ–­è¨€å¤±è´¥ï¼ŒæŠ›å‡º<code>AssertionError</code>ã€‚":
"x must &gt;= 0" " ä¸ºå¯é€‰çš„æ–­è¨€æ¶ˆæ¯ï¼š</p>
<p>â€‹
è¿™æ ·ï¼Œæ–­è¨€å¤±è´¥çš„æ—¶å€™ï¼Œ<code>AssertionError</code>ä¼šå¸¦ä¸Šæ¶ˆæ¯<code>x must &gt;= 0</code>ï¼Œæ›´åŠ ä¾¿äºè°ƒè¯•ã€‚</p>
<p>â€‹
<strong>Javaæ–­è¨€çš„ç‰¹ç‚¹æ˜¯ï¼šæ–­è¨€å¤±è´¥æ—¶ä¼šæŠ›å‡º<code>AssertionError</code>ï¼Œå¯¼è‡´ç¨‹åºç»“æŸé€€å‡ºã€‚å› æ­¤ï¼Œæ–­è¨€ä¸èƒ½ç”¨äºå¯æ¢å¤çš„ç¨‹åºé”™è¯¯ï¼Œåªåº”è¯¥ç”¨äºå¼€å‘å’Œæµ‹è¯•é˜¶æ®µã€‚</strong></p>
<p><strong>æ³¨æ„</strong>ï¼šè¿™JVMé»˜è®¤å…³é—­æ–­è¨€æŒ‡ä»¤ï¼Œå³é‡åˆ°<code>assert</code>è¯­å¥å°±è‡ªåŠ¨å¿½ç•¥äº†ï¼Œä¸æ‰§è¡Œã€‚è¦æ‰§è¡Œ<code>assert</code>è¯­å¥ï¼Œå¿…é¡»ç»™Javaè™šæ‹Ÿæœºä¼ é€’<code>-enableassertions</code>ï¼ˆå¯ç®€å†™ä¸º<code>-ea</code>ï¼‰å‚æ•°å¯ç”¨æ–­è¨€ã€‚æ‰€ä»¥ï¼Œä¸Šè¿°ç¨‹åºå¿…é¡»åœ¨å‘½ä»¤è¡Œä¸‹è¿è¡Œæ‰æœ‰æ•ˆæœï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ java -ea Main.java</span><br><span class="line">Exception <span class="keyword">in</span> thread <span class="string">&quot;main&quot;</span> java.lang.AssertionError</span><br><span class="line">	at Main.main(Main.java:5)</span><br></pre></td></tr></table></figure>
<p>â€‹ æ–­è¨€å¾ˆå°‘è¢«ä½¿ç”¨ï¼Œæ›´å¥½çš„æ–¹æ³•æ˜¯ç¼–å†™å•å…ƒæµ‹è¯•ã€‚</p>
<h3 id="ä¸ƒä½¿ç”¨jdk-logging">ä¸ƒã€ä½¿ç”¨JDK Logging</h3>
<h4 id="ä½¿ç”¨æ—¥å¿—çš„ç›®çš„">1ã€ä½¿ç”¨æ—¥å¿—çš„ç›®çš„ï¼Ÿ</h4>
<p>æ—¥å¿—å°±æ˜¯Loggingï¼Œå®ƒçš„ç›®çš„æ˜¯ä¸ºäº†å–ä»£<code>System.out.println()</code>ã€‚</p>
<p>è¾“å‡ºæ—¥å¿—ï¼Œè€Œä¸æ˜¯ç”¨<code>System.out.println()</code>ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªå¥½å¤„ï¼š</p>
<ol type="1">
<li>å¯ä»¥è®¾ç½®è¾“å‡ºæ ·å¼ï¼Œé¿å…è‡ªå·±æ¯æ¬¡éƒ½å†™<code>"ERROR: " + var</code>ï¼›</li>
<li>å¯ä»¥è®¾ç½®è¾“å‡ºçº§åˆ«ï¼Œç¦æ­¢æŸäº›çº§åˆ«è¾“å‡ºã€‚ä¾‹å¦‚ï¼Œåªè¾“å‡ºé”™è¯¯æ—¥å¿—ï¼›</li>
<li>å¯ä»¥è¢«é‡å®šå‘åˆ°æ–‡ä»¶ï¼Œè¿™æ ·å¯ä»¥åœ¨ç¨‹åºè¿è¡Œç»“æŸåæŸ¥çœ‹æ—¥å¿—ï¼›</li>
<li>å¯ä»¥æŒ‰åŒ…åæ§åˆ¶æ—¥å¿—çº§åˆ«ï¼Œåªè¾“å‡ºæŸäº›åŒ…æ‰“çš„æ—¥å¿—ï¼›</li>
</ol>
<h4 id="å¦‚ä½•ä½¿ç”¨æ—¥å¿—">2ã€å¦‚ä½•ä½¿ç”¨æ—¥å¿—ï¼Ÿ</h4>
<p>Javaæ ‡å‡†åº“å†…ç½®äº†æ—¥å¿—åŒ…<code>java.util.logging</code>ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.logging.Level;</span><br><span class="line"><span class="keyword">import</span> java.util.logging.Logger;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> Logger.getGlobal();</span><br><span class="line">        logger.info(<span class="string">&quot;start process...&quot;</span>);</span><br><span class="line">        logger.warning(<span class="string">&quot;memory is running out...&quot;</span>);</span><br><span class="line">        logger.fine(<span class="string">&quot;ignored.&quot;</span>);</span><br><span class="line">        logger.severe(<span class="string">&quot;process will be terminated...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸Šè¿°ä»£ç ï¼Œå¾—åˆ°ç±»ä¼¼å¦‚ä¸‹çš„è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Mar 02, 2019 6:32:13 PM Hello main</span><br><span class="line">INFO: start process...</span><br><span class="line">Mar 02, 2019 6:32:13 PM Hello main</span><br><span class="line">WARNING: memory is running out...</span><br><span class="line">Mar 02, 2019 6:32:13 PM Hello main</span><br><span class="line">SEVERE: process will be terminated...</span><br></pre></td></tr></table></figure>
<p>å¯¹æ¯”å¯è§ï¼Œä½¿ç”¨æ—¥å¿—æœ€å¤§çš„å¥½å¤„æ˜¯ï¼Œå®ƒè‡ªåŠ¨æ‰“å°äº†æ—¶é—´ã€è°ƒç”¨ç±»ã€è°ƒç”¨æ–¹æ³•ç­‰å¾ˆå¤šæœ‰ç”¨çš„ä¿¡æ¯ã€‚</p>
<h4 id="æ—¥å¿—çš„è¾“å‡ºçº§åˆ«">3ã€æ—¥å¿—çš„è¾“å‡ºçº§åˆ«ï¼š</h4>
<p>å†ä»”ç»†è§‚å¯Ÿå‘ç°ä¸Šè¿°è¾“å‡ºï¼Œ4æ¡æ—¥å¿—ï¼Œåªæ‰“å°äº†3æ¡ï¼Œ<code>logger.fine()</code>æ²¡æœ‰æ‰“å°ã€‚è¿™æ˜¯å› ä¸ºï¼Œæ—¥å¿—çš„è¾“å‡ºå¯ä»¥è®¾å®šçº§åˆ«ã€‚JDKçš„Loggingå®šä¹‰äº†7ä¸ªæ—¥å¿—çº§åˆ«ï¼Œä»ä¸¥é‡åˆ°æ™®é€šï¼š</p>
<ul>
<li>SEVERE</li>
<li>WARNING</li>
<li>INFO</li>
<li>CONFIG</li>
<li>FINE</li>
<li>FINER</li>
<li>FINEST</li>
</ul>
<p>â€‹
å› ä¸º<strong>é»˜è®¤çº§åˆ«æ˜¯INFOï¼Œå› æ­¤ï¼ŒINFOçº§åˆ«ä»¥ä¸‹çš„æ—¥å¿—ï¼Œä¸ä¼šè¢«æ‰“å°å‡ºæ¥ã€‚</strong>ä½¿ç”¨æ—¥å¿—çº§åˆ«çš„å¥½å¤„åœ¨äºï¼Œ<strong>è°ƒæ•´çº§åˆ«ï¼Œå°±å¯ä»¥å±è”½æ‰å¾ˆå¤šè°ƒè¯•ç›¸å…³çš„æ—¥å¿—è¾“å‡ºã€‚</strong></p>
<p>ä½¿ç”¨Javaæ ‡å‡†åº“å†…ç½®çš„Loggingæœ‰ä»¥ä¸‹å±€é™ï¼š</p>
<ul>
<li><p>Loggingç³»ç»Ÿåœ¨JVMå¯åŠ¨æ—¶è¯»å–é…ç½®æ–‡ä»¶å¹¶å®Œæˆåˆå§‹åŒ–ï¼Œä¸€æ—¦å¼€å§‹è¿è¡Œ<code>main()</code>æ–¹æ³•ï¼Œå°±æ— æ³•ä¿®æ”¹é…ç½®ï¼›</p></li>
<li><p>é…ç½®ä¸å¤ªæ–¹ä¾¿ï¼Œéœ€è¦åœ¨JVMå¯åŠ¨æ—¶ä¼ é€’å‚æ•°<code>-Djava.util.logging.config.file=&lt;config-file-name&gt;</code>ã€‚</p></li>
</ul>
<p>â€‹
<strong>å› æ­¤ï¼ŒJavaæ ‡å‡†åº“å†…ç½®çš„Loggingä½¿ç”¨å¹¶ä¸æ˜¯éå¸¸å¹¿æ³›ï¼Œæ›´å¹¿æ³›çš„æ˜¯ä¸‹ä¸€ä¸ªæ¨¡å—ä¸­æ‰€è¯´çš„Commons
Logging æˆ– Log4j æˆ–</strong></p>
<h3 id="å…«ä½¿ç”¨commons-logging">å…«ã€ä½¿ç”¨Commons Logging</h3>
<h4 id="ç®€å•ä»‹ç»">1ã€ç®€å•ä»‹ç»</h4>
<p>â€‹ <strong>Commons
Loggingæ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹æ—¥å¿—åº“ï¼Œå®ƒæ˜¯ç”±Apacheåˆ›å»ºçš„æ—¥å¿—æ¨¡å—</strong></p>
<p>â€‹ Commons
Loggingçš„ç‰¹è‰²æ˜¯ï¼Œ<strong>å®ƒå¯ä»¥æŒ‚æ¥ä¸åŒçš„æ—¥å¿—ç³»ç»Ÿï¼Œå¹¶é€šè¿‡é…ç½®æ–‡ä»¶æŒ‡å®šæŒ‚æ¥çš„æ—¥å¿—ç³»ç»Ÿã€‚</strong>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<strong>Commons
Loggingè‡ªåŠ¨æœç´¢å¹¶ä½¿ç”¨Log4j</strong>ï¼ˆLog4jæ˜¯å¦ä¸€ä¸ªæµè¡Œçš„æ—¥å¿—ç³»ç»Ÿï¼‰ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°Log4jï¼Œå†ä½¿ç”¨JDK
Loggingã€‚</p>
<h4 id="å¦‚ä½•ä½¿ç”¨">2ã€å¦‚ä½•ä½¿ç”¨ï¼š</h4>
<p>ç¬¬ä¸€æ­¥ï¼Œé€šè¿‡<code>LogFactory</code>è·å–<code>Log</code>ç±»çš„å®ä¾‹ï¼›</p>
<p>ç¬¬äºŒæ­¥ï¼Œä½¿ç”¨<code>Log</code>å®ä¾‹çš„æ–¹æ³•æ‰“æ—¥å¿—ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.logging.Log;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.LogFactory;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Log</span> <span class="variable">log</span> <span class="operator">=</span> LogFactory.getLog(Main.class);</span><br><span class="line">        log.info(<span class="string">&quot;start...&quot;</span>);</span><br><span class="line">        log.warn(<span class="string">&quot;end.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ—¥å¿—çº§åˆ«">3ã€æ—¥å¿—çº§åˆ«ï¼š</h4>
<p>Commons Loggingå®šä¹‰äº†6ä¸ªæ—¥å¿—çº§åˆ«ï¼š</p>
<ul>
<li>FATAL</li>
<li>ERROR</li>
<li>WARNING</li>
<li>INFO</li>
<li>DEBUG</li>
<li>TRACE</li>
</ul>
<p>é»˜è®¤çº§åˆ«æ˜¯<code>INFO</code>ã€‚</p>
<h4 id="é€šå¸¸ä½¿ç”¨æŒ‡å—">4ã€é€šå¸¸ä½¿ç”¨æŒ‡å—</h4>
<ul>
<li>ä½¿ç”¨Commons
Loggingæ—¶ï¼Œå¦‚æœåœ¨é™æ€æ–¹æ³•ä¸­å¼•ç”¨<code>Log</code>ï¼Œé€šå¸¸ç›´æ¥å®šä¹‰ä¸€ä¸ªé™æ€ç±»å‹å˜é‡ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åœ¨é™æ€æ–¹æ³•ä¸­å¼•ç”¨Log:</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Log</span> <span class="variable">log</span> <span class="operator">=</span> LogFactory.getLog(Main.class);</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨å®ä¾‹æ–¹æ³•ä¸­å¼•ç”¨<code>Log</code>ï¼Œé€šå¸¸å®šä¹‰ä¸€ä¸ªå®ä¾‹å˜é‡ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åœ¨å®ä¾‹æ–¹æ³•ä¸­å¼•ç”¨Log:</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">final</span> <span class="type">Log</span> <span class="variable">log</span> <span class="operator">=</span> LogFactory.getLog(getClass());</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
<strong>æ³¨æ„åˆ°å®ä¾‹å˜é‡logçš„è·å–æ–¹å¼æ˜¯<code>LogFactory.getLog(getClass())</code>ï¼Œè™½ç„¶ä¹Ÿå¯ä»¥ç”¨<code>LogFactory.getLog(Person.class)</code>ï¼Œä½†æ˜¯å‰ä¸€ç§æ–¹å¼æœ‰ä¸ªéå¸¸å¤§çš„å¥½å¤„ï¼Œå°±æ˜¯å­ç±»å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥<code>log</code>å®ä¾‹ã€‚ä¾‹å¦‚ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åœ¨å­ç±»ä¸­ä½¿ç”¨çˆ¶ç±»å®ä¾‹åŒ–çš„log:</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">bar</span><span class="params">()</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;bar&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
ç”±äºJavaç±»çš„åŠ¨æ€ç‰¹æ€§ï¼Œå­ç±»è·å–çš„<code>log</code>å­—æ®µå®é™…ä¸Šç›¸å½“äº<code>LogFactory.getLog(Student.class)</code>ï¼Œä½†å´æ˜¯ä»çˆ¶ç±»ç»§æ‰¿è€Œæ¥ï¼Œå¹¶ä¸”æ— éœ€æ”¹åŠ¨ä»£ç ã€‚</p>
<h4 id="è®°å½•å¼‚å¸¸">5ã€è®°å½•å¼‚å¸¸ï¼š</h4>
<p>â€‹ æ­¤å¤–ï¼ŒCommons
Loggingçš„æ—¥å¿—æ–¹æ³•ï¼Œä¾‹å¦‚<code>info()</code>ï¼Œé™¤äº†æ ‡å‡†çš„<code>info(String)</code>å¤–ï¼Œè¿˜æä¾›äº†ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„é‡è½½æ–¹æ³•ï¼š<code>info(String, Throwable)</code>ï¼Œè¿™ä½¿å¾—è®°å½•å¼‚å¸¸æ›´åŠ ç®€å•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    log.error(<span class="string">&quot;got exception!&quot;</span>, e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¹ä½¿ç”¨log4j">ä¹ã€ä½¿ç”¨Log4j</h3>
<h4 id="æ¡†æ¶ç®€ä»‹">1ã€æ¡†æ¶ç®€ä»‹ï¼š</h4>
<p>â€‹ ä¸Šè¿°ä»‹ç»äº†Commons
Loggingï¼Œå¯ä»¥ä½œä¸ºâ€œæ—¥å¿—æ¥å£â€æ¥ä½¿ç”¨ã€‚è€ŒçœŸæ­£çš„â€œæ—¥å¿—å®ç°â€å¯ä»¥ä½¿ç”¨Log4jã€‚</p>
<p>â€‹ Log4jæ˜¯ä¸€ç§éå¸¸æµè¡Œçš„æ—¥å¿—æ¡†æ¶ï¼Œæœ€æ–°ç‰ˆæœ¬æ˜¯2.xã€‚</p>
<p>â€‹ Log4jæ˜¯ä¸€ä¸ªç»„ä»¶åŒ–è®¾è®¡çš„æ—¥å¿—ç³»ç»Ÿï¼Œå®ƒçš„æ¶æ„å¤§è‡´å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">log.info(&quot;User signed in.&quot;);</span><br><span class="line"> â”‚</span><br><span class="line"> â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line"> â”œâ”€â”€&gt;â”‚ Appender â”‚â”€â”€â”€&gt;â”‚  Filter  â”‚â”€â”€â”€&gt;â”‚  Layout  â”‚â”€â”€â”€&gt;â”‚ Console  â”‚</span><br><span class="line"> â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line"> â”‚</span><br><span class="line"> â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line"> â”œâ”€â”€&gt;â”‚ Appender â”‚â”€â”€â”€&gt;â”‚  Filter  â”‚â”€â”€â”€&gt;â”‚  Layout  â”‚â”€â”€â”€&gt;â”‚   File   â”‚</span><br><span class="line"> â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line"> â”‚</span><br><span class="line"> â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line"> â””â”€â”€&gt;â”‚ Appender â”‚â”€â”€â”€&gt;â”‚  Filter  â”‚â”€â”€â”€&gt;â”‚  Layout  â”‚â”€â”€â”€&gt;â”‚  Socket  â”‚</span><br><span class="line">     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure>
<p>â€‹
å½“æˆ‘ä»¬ä½¿ç”¨Log4jè¾“å‡ºä¸€æ¡æ—¥å¿—æ—¶ï¼ŒLog4jè‡ªåŠ¨é€šè¿‡ä¸åŒçš„AppenderæŠŠåŒä¸€æ¡æ—¥å¿—è¾“å‡ºåˆ°ä¸åŒçš„ç›®çš„åœ°ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>consoleï¼šè¾“å‡ºåˆ°å±å¹•ï¼›</li>
<li>fileï¼šè¾“å‡ºåˆ°æ–‡ä»¶ï¼›</li>
<li>socketï¼šé€šè¿‡ç½‘ç»œè¾“å‡ºåˆ°è¿œç¨‹è®¡ç®—æœºï¼›</li>
<li>jdbcï¼šè¾“å‡ºåˆ°æ•°æ®åº“</li>
</ul>
<p>â€‹
<strong>åœ¨è¾“å‡ºæ—¥å¿—çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡Filteræ¥è¿‡æ»¤å“ªäº›logéœ€è¦è¢«è¾“å‡ºï¼Œå“ªäº›logä¸éœ€è¦è¢«è¾“å‡ºã€‚ä¾‹å¦‚ï¼Œä»…è¾“å‡º<code>ERROR</code>çº§åˆ«çš„æ—¥å¿—ã€‚</strong></p>
<p>æœ€åï¼Œé€šè¿‡Layoutæ¥æ ¼å¼åŒ–æ—¥å¿—ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼Œè‡ªåŠ¨æ·»åŠ æ—¥æœŸã€æ—¶é—´ã€æ–¹æ³•åç§°ç­‰ä¿¡æ¯ã€‚</p>
<p><strong>ä¸Šè¿°ç»“æ„è™½ç„¶å¤æ‚ï¼Œä½†æˆ‘ä»¬åœ¨å®é™…ä½¿ç”¨çš„æ—¶å€™ï¼Œå¹¶ä¸éœ€è¦å…³å¿ƒLog4jçš„APIï¼Œè€Œæ˜¯é€šè¿‡é…ç½®æ–‡ä»¶æ¥é…ç½®å®ƒã€‚</strong></p>
<h4 id="å¦‚ä½•ä½¿ç”¨-1">2ã€å¦‚ä½•ä½¿ç”¨ï¼š</h4>
<p>ä»¥XMLé…ç½®ä¸ºä¾‹ï¼Œä½¿ç”¨Log4jçš„æ—¶å€™ï¼Œæˆ‘ä»¬æŠŠä¸€ä¸ª<code>log4j2.xml</code>çš„æ–‡ä»¶æ”¾åˆ°<code>classpath</code>ä¸‹å°±å¯ä»¥è®©Log4jè¯»å–é…ç½®æ–‡ä»¶å¹¶æŒ‰ç…§æˆ‘ä»¬çš„é…ç½®æ¥è¾“å‡ºæ—¥å¿—ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶çš„ä¾‹å­ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">Properties</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å®šä¹‰æ—¥å¿—æ ¼å¼ --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">Property</span> <span class="attr">name</span>=<span class="string">&quot;log.pattern&quot;</span>&gt;</span>%d&#123;MM-dd HH:mm:ss.SSS&#125; [%t] %-5level %logger&#123;36&#125;%n%msg%n%n<span class="tag">&lt;/<span class="name">Property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å®šä¹‰æ–‡ä»¶åå˜é‡ --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">Property</span> <span class="attr">name</span>=<span class="string">&quot;file.err.filename&quot;</span>&gt;</span>log/err.log<span class="tag">&lt;/<span class="name">Property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">Property</span> <span class="attr">name</span>=<span class="string">&quot;file.err.pattern&quot;</span>&gt;</span>log/err.%i.log.gz<span class="tag">&lt;/<span class="name">Property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">Properties</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å®šä¹‰Appenderï¼Œå³ç›®çš„åœ° --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">Appenders</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å®šä¹‰è¾“å‡ºåˆ°å±å¹• --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">Console</span> <span class="attr">name</span>=<span class="string">&quot;console&quot;</span> <span class="attr">target</span>=<span class="string">&quot;SYSTEM_OUT&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æ—¥å¿—æ ¼å¼å¼•ç”¨ä¸Šé¢å®šä¹‰çš„log.pattern --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">&quot;$&#123;log.pattern&#125;&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">Console</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å®šä¹‰è¾“å‡ºåˆ°æ–‡ä»¶,æ–‡ä»¶åå¼•ç”¨ä¸Šé¢å®šä¹‰çš„file.err.filename --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">RollingFile</span> <span class="attr">name</span>=<span class="string">&quot;err&quot;</span> <span class="attr">bufferedIO</span>=<span class="string">&quot;true&quot;</span> <span class="attr">fileName</span>=<span class="string">&quot;$&#123;file.err.filename&#125;&quot;</span> <span class="attr">filePattern</span>=<span class="string">&quot;$&#123;file.err.pattern&#125;&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">&quot;$&#123;log.pattern&#125;&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">Policies</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- æ ¹æ®æ–‡ä»¶å¤§å°è‡ªåŠ¨åˆ‡å‰²æ—¥å¿— --&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">SizeBasedTriggeringPolicy</span> <span class="attr">size</span>=<span class="string">&quot;1 MB&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">Policies</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- ä¿ç•™æœ€è¿‘10ä»½ --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">DefaultRolloverStrategy</span> <span class="attr">max</span>=<span class="string">&quot;10&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">RollingFile</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">Appenders</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">Loggers</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">Root</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å¯¹infoçº§åˆ«çš„æ—¥å¿—ï¼Œè¾“å‡ºåˆ°console --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">&quot;console&quot;</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span> /&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å¯¹errorçº§åˆ«çš„æ—¥å¿—ï¼Œè¾“å‡ºåˆ°errï¼Œå³ä¸Šé¢å®šä¹‰çš„RollingFile --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">&quot;err&quot;</span> <span class="attr">level</span>=<span class="string">&quot;error&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">Root</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">Loggers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>â€‹
è™½ç„¶é…ç½®Log4jæ¯”è¾ƒç¹çï¼Œä½†ä¸€æ—¦é…ç½®å®Œæˆï¼Œä½¿ç”¨èµ·æ¥å°±éå¸¸æ–¹ä¾¿ã€‚å¯¹ä¸Šé¢çš„é…ç½®æ–‡ä»¶ï¼Œå‡¡æ˜¯<code>INFO</code>çº§åˆ«çš„æ—¥å¿—ï¼Œä¼šè‡ªåŠ¨è¾“å‡ºåˆ°å±å¹•ï¼Œè€Œ<code>ERROR</code>çº§åˆ«çš„æ—¥å¿—ï¼Œä¸ä½†ä¼šè¾“å‡ºåˆ°å±å¹•ï¼Œè¿˜ä¼šåŒæ—¶è¾“å‡ºåˆ°æ–‡ä»¶ã€‚å¹¶ä¸”ï¼Œä¸€æ—¦æ—¥å¿—æ–‡ä»¶è¾¾åˆ°æŒ‡å®šå¤§å°ï¼ˆ1MBï¼‰ï¼ŒLog4jå°±ä¼šè‡ªåŠ¨åˆ‡å‰²æ–°çš„æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶æœ€å¤šä¿ç•™10ä»½ã€‚</p>
<p>â€‹ æœ‰äº†é…ç½®æ–‡ä»¶è¿˜ä¸å¤Ÿï¼Œå› ä¸ºLog4jä¹Ÿæ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œæˆ‘ä»¬éœ€è¦ä»<a
href="https://logging.apache.org/log4j/2.x/download.html">è¿™é‡Œ</a>ä¸‹è½½Log4jï¼Œè§£å‹åï¼ŒæŠŠä»¥ä¸‹3ä¸ªjaråŒ…æ”¾åˆ°<code>classpath</code>ä¸­ï¼š</p>
<ul>
<li>log4j-api-2.x.jar</li>
<li>log4j-core-2.x.jar</li>
<li>log4j-jcl-2.x.jar</li>
</ul>
<p>â€‹ å› ä¸ºCommons
Loggingä¼šè‡ªåŠ¨å‘ç°å¹¶ä½¿ç”¨Log4jï¼Œæ‰€ä»¥ï¼ŒæŠŠä¸Šä¸€èŠ‚ä¸‹è½½çš„<code>commons-logging-1.2.jar</code>ä¹Ÿæ”¾åˆ°<code>classpath</code>ä¸­ã€‚</p>
<p>â€‹ è¦æ‰“å°æ—¥å¿—ï¼Œåªéœ€è¦æŒ‰Commons
Loggingçš„å†™æ³•å†™ï¼Œä¸éœ€è¦æ”¹åŠ¨ä»»ä½•ä»£ç ï¼Œå°±å¯ä»¥å¾—åˆ°Log4jçš„æ—¥å¿—è¾“å‡ºï¼Œç±»ä¼¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">03-03 12:09:45.880 [main] INFO  com.itranswarp.learnjava.Main</span><br><span class="line">Start process...</span><br></pre></td></tr></table></figure>
<h4 id="æœ€ä½³å®è·µ">3ã€æœ€ä½³å®è·µï¼š</h4>
<p>â€‹ åœ¨å¼€å‘é˜¶æ®µï¼Œå§‹ç»ˆä½¿ç”¨Commons
Loggingæ¥å£æ¥å†™å…¥æ—¥å¿—ï¼Œå¹¶ä¸”å¼€å‘é˜¶æ®µæ— éœ€å¼•å…¥Log4jã€‚å¦‚æœéœ€è¦æŠŠæ—¥å¿—å†™å…¥æ–‡ä»¶ï¼Œ
åªéœ€è¦æŠŠæ­£ç¡®çš„é…ç½®æ–‡ä»¶å’ŒLog4jç›¸å…³çš„jaråŒ…æ”¾å…¥<code>classpath</code>ï¼Œå°±å¯ä»¥è‡ªåŠ¨æŠŠæ—¥å¿—åˆ‡æ¢æˆä½¿ç”¨Log4jå†™å…¥ï¼Œæ— éœ€ä¿®æ”¹ä»»ä½•ä»£ç ã€‚</p>
<h3 id="åä½¿ç”¨slf4jå’Œlogback">åã€ä½¿ç”¨SLF4Jå’ŒLogback</h3>
<p>â€‹ SLF4Jç±»ä¼¼äºCommons
Loggingï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ—¥å¿—æ¥å£ï¼Œè€ŒLogbackç±»ä¼¼äºLog4jï¼Œæ˜¯ä¸€ä¸ªæ—¥å¿—çš„å®ç°ã€‚</p>
<p>â€‹ SLF4Jå¯¹Commons Loggingçš„æ¥å£æœ‰ä½•æ”¹è¿›ï¼Ÿåœ¨Commons
Loggingä¸­ï¼Œæˆ‘ä»¬è¦æ‰“å°æ—¥å¿—ï¼Œæœ‰æ—¶å€™å¾—è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">score</span> <span class="operator">=</span> <span class="number">99</span>;</span><br><span class="line">p.setScore(score);</span><br><span class="line">log.info(<span class="string">&quot;Set score &quot;</span> + score + <span class="string">&quot; for Person &quot;</span> + p.getName() + <span class="string">&quot; ok.&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>æ‹¼å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªéå¸¸éº»çƒ¦çš„äº‹æƒ…ï¼Œæ‰€ä»¥SLF4Jçš„æ—¥å¿—æ¥å£æ”¹è¿›æˆè¿™æ ·äº†ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">score</span> <span class="operator">=</span> <span class="number">99</span>;</span><br><span class="line">p.setScore(score);</span><br><span class="line">logger.info(<span class="string">&quot;Set score &#123;&#125; for Person &#123;&#125; ok.&quot;</span>, score, p.getName());</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬é çŒœä¹Ÿèƒ½çŒœå‡ºæ¥ï¼ŒSLF4Jçš„æ—¥å¿—æ¥å£ä¼ å…¥çš„æ˜¯ä¸€ä¸ªå¸¦å ä½ç¬¦çš„å­—ç¬¦ä¸²ï¼Œç”¨åé¢çš„å˜é‡è‡ªåŠ¨æ›¿æ¢å ä½ç¬¦ï¼Œæ‰€ä»¥çœ‹èµ·æ¥æ›´åŠ è‡ªç„¶ã€‚</p>
<p>å…·ä½“å¯ä»¥å‚ç…§æ›´è¯¦ç»†çš„å®˜æ–¹ç½‘ç«™çš„æ•™ç¨‹</p>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaå…¥é—¨ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>exception</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç³»åˆ—ç¬”è®°5â€”â€”javaåå°„æœºåˆ¶</title>
    <url>/2022/01/30/c2b593051f4f/</url>
    <content><![CDATA[<p>å‚è€ƒæ•™ç¨‹ç½‘å€ï¼šhttps://www.liaoxuefeng.com/wiki/1252599548343744/1255945147512512</p>
<h3 id="ä¸€åå°„ç®€ä»‹ä¸æœºåˆ¶">ä¸€ã€åå°„ç®€ä»‹ä¸æœºåˆ¶</h3>
<p>â€‹ Javaçš„åå°„æ˜¯æŒ‡ç¨‹åºåœ¨è¿è¡ŒæœŸå¯ä»¥æ‹¿åˆ°ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰ä¿¡æ¯ã€‚</p>
<p>â€‹
<strong>æ‰€ä»¥ï¼Œåå°„æ˜¯ä¸ºäº†è§£å†³åœ¨è¿è¡ŒæœŸï¼Œå¯¹æŸä¸ªå®ä¾‹ä¸€æ— æ‰€çŸ¥çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•è°ƒç”¨å…¶æ–¹æ³•ã€‚</strong></p>
<p>â€‹ æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®é…ç½®æ–‡ä»¶ re.propertiesi
æŒ‡å®šä¿¡æ¯ï¼Œåˆ›å»ºCatå¯¹è±¡å¹¶è°ƒç”¨methodæŒ‡å®šçš„æ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">classfullpath=com.hspedu.Cat</span><br><span class="line">method=hi</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬è¯»å–è¿™äº›ä¿¡æ¯åï¼Œæ˜¯æ²¡æ³•åœ¨æºç ä¸­ç›´æ¥è¿›è¡ŒCatå¯¹è±¡çš„åˆ›å»ºçš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Properties properties=<span class="keyword">new</span> <span class="title class_">Properties</span>(); </span><br><span class="line">properties. Load(<span class="keyword">new</span> <span class="title class_">FileInputstream</span>(<span class="string">&quot;src\\ re. properties&quot;</span>));</span><br><span class="line"><span class="type">String</span> <span class="variable">classfullpath</span> <span class="operator">=</span>properties.get(<span class="string">&quot;classfulLpath&quot;</span>).tostring(); <span class="comment">//&quot;com.hspedu.Cat&quot;</span></span><br><span class="line">String method=properties.get(<span class="string">&quot;method&quot;</span>).tostring();  <span class="comment">//&quot;hi&quot;</span></span><br><span class="line">System.out.println(<span class="string">&quot;cLassfullpath=&quot;</span>+classfullpath); </span><br><span class="line">System.out.printin(<span class="string">&quot;method=&quot;</span>+method);</span><br><span class="line"></span><br><span class="line"><span class="comment">// new classfullpath() è¿™æ ·å­æ˜¯æ²¡æ³•åˆ›å»ºå¯¹è±¡çš„</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½¿ç”¨åå°„æœºåˆ¶æ¥è§£å†³ï¼Œå¿«é€Ÿå…¥é—¨å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1) åŠ è½½ç±»ï¼Œè¿”å›Classç±»å‹çš„å¯¹è±¡cls</span></span><br><span class="line"><span class="type">Class</span> <span class="variable">cls</span> <span class="operator">=</span> Class.forName(classfullpath);</span><br><span class="line"><span class="comment">// 2) é€šè¿‡clså¾—åˆ°ä½ åŠ è½½çš„ç±» com.hspedu.Cat çš„å¯¹è±¡å®ä¾‹</span></span><br><span class="line"><span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> cls.newInstance(); <span class="comment">//æ­¤æ—¶oçš„è¿è¡Œç±»å‹ï¼Œå°±æ˜¯com.hspedu.Cat</span></span><br><span class="line"><span class="comment">// 3) é€šè¿‡clså¾—åˆ°ä½ åŠ è½½çš„ç±» com.hspedu.Cat ä¸­çš„ methodæŒ‡å®šçš„(hi) Methodå¯¹è±¡</span></span><br><span class="line"><span class="comment">// åœ¨åå°„ä¸­ï¼Œå¯ä»¥æŠŠæ–¹æ³•è§†ä¸ºå¯¹è±¡</span></span><br><span class="line"><span class="type">Method</span> <span class="variable">method1</span> <span class="operator">=</span> cls.getMethod(method)</span><br><span class="line"><span class="comment">// 4) é€šè¿‡method1å¯¹è±¡æ¥è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">method1.invoke(o);</span><br></pre></td></tr></table></figure>
<p>å®ƒå®ç°äº†é€šè¿‡å¤–éƒ¨æ–‡ä»¶é…ç½®ï¼Œåœ¨ä¸ä¿®æ”¹æºç çš„æƒ…å†µä¸‹ï¼Œæ¥æ§åˆ¶ç¨‹åºã€‚<strong>ç¬¦åˆè®¾è®¡æ¨¡å¼çš„ocpåŸåˆ™</strong>ï¼Œæ˜¯æ¡†æ¶çš„çµé­‚</p>
<h3 id="äºŒåå°„æœºåˆ¶åŸç†">äºŒã€åå°„æœºåˆ¶åŸç†ï¼š</h3>
<p>1.åå°„æœºåˆ¶å…è®¸ç¨‹åºåœ¨æ‰§è¡ŒæœŸå€ŸåŠ©äºReflection
APIå–å¾—ä»»ä½•ç±»çš„å†…éƒ¨ä¿¡æ¯ï¼ˆæ¯”å¦‚æˆå‘˜å˜é‡ï¼Œæ„é€ å™¨ï¼Œæˆå‘˜æ–¹æ³•ç­‰ç­‰ï¼‰ï¼Œå¹¶èƒ½æ“ä½œå¯¹è±¡çš„å±æ€§ä¸æ–¹æ³•ã€‚åå°„åœ¨è®¾è®¡æ¨¡å¼å’Œæ¡†æ¶åº•å±‚éƒ½ä¼šç”¨åˆ°</p>
<p>2.åŠ è½½å®Œç±»ä¹‹åï¼Œåœ¨å †ä¸­å°±äº§ç”Ÿäº†ä¸€ä¸ªClassç±»å‹çš„å¯¹è±¡ï¼ˆ<strong>ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªClasså¯¹è±¡</strong>ï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«äº†ç±»çš„å®Œæ•´ç»“æ„ä¿¡æ¯ã€‚é€šè¿‡è¿™ä¸ªå¯¹è±¡å¾—åˆ°ç±»çš„ç»“æ„ã€‚è¿™ä¸ªå¯¹è±¡å°±åƒä¸€é¢é•œå­ï¼Œé€è¿‡è¿™ä¸ªé•œå­çœ‹åˆ°ç±»çš„ç»“æ„ï¼Œæ‰€ä»¥ï¼Œå½¢è±¡çš„ç§°ä¹‹ä¸ºï¼šåå°„ã€‚</p>
<p><strong>JAVAç¨‹åºåœ¨è®¡ç®—æœºå†…æ‰§è¡Œçš„ä¸‰ä¸ªé˜¶æ®µ</strong>ï¼š</p>
<p>â€‹
æˆ‘ä»¬å¹³å¸¸å®šä¹‰çš„å„ä¸ªç±»éƒ½æ˜¯<strong>ç”±JVMåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€åŠ è½½çš„ï¼ˆClassLoaderï¼‰</strong>ã€‚JVMåœ¨ç¬¬ä¸€æ¬¡è¯»å–åˆ°ä¸€ä¸ªä¸åŒçš„ç±»æ—¶ï¼Œå°±ä¼šå°†å…¶åŠ è½½å…¥å†…å­˜ã€‚æ¯åŠ è½½ä¸€ç§ç±»ï¼ŒJVMå°±ä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ª<strong>"Class"</strong>ç±»å‹çš„ç±»çš„å®ä¾‹ï¼Œå¹¶è¿›è¡Œå…³è”ã€‚</p>
<p>â€‹ æˆ‘ä»¬å¯ä»¥é€šè¿‡Catç±»çš„å¯¹è±¡æ‹¿åˆ°å±äºCatç±»çš„Classç±»å¯¹è±¡</p>
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220828112205093.png" /></li>
</ul>
<h3 id="ä¸‰åå°„ç›¸å…³çš„ç±»">ä¸‰ã€åå°„ç›¸å…³çš„ç±»ï¼š</h3>
<figure class="highlight text"><table><tr><td class="code"><pre><span class="line">java.lang.Classï¼šä»£è¡¨ä¸€ä¸ªç±»ï¼ŒClasså¯¹è±¡è¡¨ç¤ºæŸä¸ªç±»åŠ è½½ååœ¨å †ä¸­çš„å¯¹è±¡</span><br><span class="line">java.lang.reflect.Methodï¼šä»£è¡¨ç±»çš„æ–¹æ³•</span><br><span class="line">java.lang.reflect.Fieldï¼šä»£è¡¨ç±»çš„æˆå‘˜å˜é‡</span><br><span class="line">java.lang.reflect.Constructorï¼šä»£è¡¨ç±»çš„æ„é€ æ–¹æ³•</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Class</span> <span class="variable">cls</span> <span class="operator">=</span> Class.forName(classfullpath);</span><br><span class="line"><span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> cls.newInstance(); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 1) æˆå‘˜æ–¹æ³•çš„åº”ç”¨</span></span><br><span class="line"><span class="type">Method</span> <span class="variable">method1</span> <span class="operator">=</span> cls.getMethod(method)</span><br><span class="line">method1.invoke(o);</span><br><span class="line"><span class="comment">// 2) æˆå‘˜å˜é‡çš„åº”ç”¨</span></span><br><span class="line">Field field= cls.getField(<span class="string">&quot;age&quot;</span>)</span><br><span class="line">field.get(o);</span><br><span class="line"><span class="comment">// 3) æ„é€ å™¨çš„åº”ç”¨</span></span><br><span class="line"><span class="type">Constructor</span> <span class="variable">constructor</span> <span class="operator">=</span> cls.getConstructor();</span><br><span class="line"><span class="type">Constructor</span> <span class="variable">constructor2</span> <span class="operator">=</span> cls.getConstructor(String.Class);  <span class="comment">//å¯ä»¥æŒ‡å®šæ„é€ å™¨å‚æ•°ç±»å‹</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>åå°„å¯ä»¥åŠ¨æ€çš„åˆ›å»ºå’Œé€‚ç”¨å¯¹è±¡ï¼Œä½¿ç”¨çµæ´»ã€‚ä½†æ˜¯ä½¿ç”¨åå°„çš„åŸºæœ¬æ˜¯è§£é‡Šæ‰§è¡Œï¼Œå¯¹æ‰§è¡Œé€Ÿåº¦æœ‰å½±å“ã€‚</strong></li>
<li>æ‰€ä»¥å¯ä»¥å¯¹åå°„è¿›è¡Œä¸€äº›ä¼˜åŒ–ï¼š
<ul>
<li>å…³é—­è®¿é—®æ£€æŸ¥
<ul>
<li>1.Methodå’ŒFieldã€Constructorå¯¹è±¡éƒ½æœ‰setAccessible()æ–¹æ³•</li>
<li>2.setAccessible()ä½œç”¨æ˜¯å¯åŠ¨å’Œç¦ç”¨è®¿é—®å®‰å…¨æ£€æŸ¥çš„å¼€å…³</li>
<li>3.å‚æ•°å€¼ä¸ºtrueè¡¨ç¤ºåå°„çš„å¯¹è±¡åœ¨ä½¿ç”¨æ—¶å–æ¶ˆè®¿é—®æ£€æŸ¥ï¼Œæé«˜åå°„çš„æ•ˆç‡ã€‚å‚æ•°å€¼ä¸ºfalseåˆ™è¡¨ç¤ºåå°„çš„å¯¹è±¡æ‰§è¡Œè®¿é—®æ£€æŸ¥</li>
</ul></li>
</ul></li>
</ul>
<h3 id="å››classç±»ç®€ä»‹">å››ã€Classç±»ç®€ä»‹</h3>
<p>â€‹
<strong>Class</strong>ç±»çš„å®ä¾‹æ˜¯JVMå†…éƒ¨åˆ›å»ºçš„ï¼Œå¦‚æœæˆ‘ä»¬æŸ¥çœ‹JDKæºç ï¼Œå¯ä»¥å‘ç°<strong>"Class"</strong>ç±»çš„æ„é€ æ–¹æ³•æ˜¯<code>private</code>ï¼Œåªæœ‰JVMèƒ½åˆ›å»º<strong>"Class"</strong>ç±»çš„å®ä¾‹ï¼Œæˆ‘ä»¬è‡ªå·±çš„Javaç¨‹åºæ˜¯æ— æ³•åˆ›å»º<strong>"Class"</strong>å®ä¾‹çš„ã€‚æ˜¯é€šè¿‡ä¸€ä¸ªClassLoaderç±»æ¥å®ç°çš„ç±»çš„åŠ è½½ã€‚</p>
<p>â€‹
æ‰€ä»¥ï¼ŒJVMæŒæœ‰çš„æ¯ä¸ª<strong>"Class"</strong>å®ä¾‹éƒ½æŒ‡å‘ä¸€ä¸ªæ•°æ®ç±»å‹ï¼ˆ<code>class</code>æˆ–<code>interface</code>ï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚      Class Instance       â”‚â”€â”€â”€â”€â”€â”€&gt; String</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚name = &quot;java.lang.String&quot;  â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚      Class Instance       â”‚â”€â”€â”€â”€â”€â”€&gt; Random</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚name = &quot;java.util.Random&quot;  â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ª<strong>"Class"</strong>å®ä¾‹åŒ…å«äº†å…¶å¯¹åº”çš„ç±»çš„æ‰€æœ‰å®Œæ•´ä¿¡æ¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚      Class Instance       â”‚â”€â”€â”€â”€â”€â”€&gt; String</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚name = &quot;java.lang.String&quot;  â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚package = &quot;java.lang&quot;      â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚super = &quot;java.lang.Object&quot; â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚interface = CharSequence...â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚field = value[],hash,...   â”‚</span><br><span class="line">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br><span class="line">â”‚method = indexOf()...      â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure>
<p>â€‹
ç”±äºJVMä¸ºæ¯ä¸ªåŠ è½½çš„ç±»åˆ›å»ºäº†å¯¹åº”çš„<strong>"Class"</strong>å®ä¾‹ï¼Œå¹¶åœ¨å®ä¾‹ä¸­ä¿å­˜äº†è¯¥ç±»çš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»åã€åŒ…åã€çˆ¶ç±»ã€å®ç°çš„æ¥å£ã€æ‰€æœ‰æ–¹æ³•ã€å­—æ®µç­‰ï¼Œå› æ­¤ï¼Œå¦‚æœè·å–äº†æŸä¸ª<strong>"Class"</strong>å®ä¾‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿™ä¸ª<strong>"Class"</strong>å®ä¾‹è·å–åˆ°è¯¥å®ä¾‹å¯¹åº”çš„ç±»çš„æ‰€æœ‰ä¿¡æ¯ã€‚</p>
<p>â€‹
<strong>å¯¹äºæŸä¸ªç±»çš„Classç±»çš„å®ä¾‹ï¼Œåœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½ï¼Œå› ä¸ºJVMä»…åŠ è½½ä¸€æ¬¡ã€‚</strong></p>
<p>â€‹ <strong>Classç±»çš„å®ä¾‹ï¼Œæ˜¯å­˜æ”¾åœ¨å †ä¸­çš„</strong></p>
<p>â€‹
<strong>JVMä¸­.ç±»çš„å­—èŠ‚ç äºŒè¿›åˆ¶æ•°æ®ï¼Œæ˜¯æ”¾åœ¨æ–¹æ³•åŒºçš„ï¼Œæœ‰çš„åœ°æ–¹ç§°ä¸ºç±»çš„å…ƒæ•°æ®ï¼ˆåŒ…æ‹¬æ–¹æ³•ä»£ç ï¼Œå˜é‡åï¼Œæ–¹æ³•åï¼Œè®¿é—®æƒé™ç­‰ç­‰ï¼‰</strong></p>
<h4 id="classå¸¸ç”¨æ–¹æ³•">1ã€Classå¸¸ç”¨æ–¹æ³•ï¼š</h4>
<ul>
<li>è·å–åˆ°Carç±» å¯¹åº”çš„Classå¯¹è±¡</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Class</span> <span class="variable">cls</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.slks.car&quot;</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>è¾“å‡ºclsçš„ç±»å‹ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.out.println(cls);  <span class="comment">//æ˜¾ç¤ºclså¯¹è±¡</span></span><br><span class="line">System.out.println(cls.getClass());  <span class="comment">//è¾“å‡ºè¿è¡Œæ—¶ç±»å‹</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å¾—åˆ°åŒ…åã€ç±»åï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">cls.getPackage().getName()</span><br><span class="line">cls.getName()</span><br></pre></td></tr></table></figure>
<ul>
<li>é€šè¿‡clsåˆ›å»ºå¯¹è±¡å®ä¾‹</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> (Car)cls.newInstance();</span><br></pre></td></tr></table></figure>
<ul>
<li>é€šè¿‡åå°„è·å–å±æ€§brand</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Field</span> <span class="variable">brand</span> <span class="operator">=</span> cls.getField(<span class="string">&quot;brand&quot;</span>)</span><br><span class="line">brand.get(car)</span><br></pre></td></tr></table></figure>
<ul>
<li>é€šè¿‡åå°„ç»™å±æ€§èµ‹å€¼</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">brand.set(car,<span class="string">&quot;å¥”é©°&quot;</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>æ‹¿åˆ°æ‰€æœ‰çš„å­—æ®µå±æ€§</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Fields[] fields = cls.getFields();</span><br></pre></td></tr></table></figure>
<h4
id="å¦‚ä½•è·å–ä¸€ä¸ªç±»çš„classå®ä¾‹">2ã€å¦‚ä½•è·å–ä¸€ä¸ªç±»çš„<strong>"Class"</strong>å®ä¾‹</h4>
<ul>
<li>æ–¹æ³•1ï¼šåœ¨ç±»åŠ è½½é˜¶æ®µï¼šç›´æ¥é€šè¿‡ä¸€ä¸ªç±»çš„é™æ€å˜é‡<code>class</code>è·å–ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¤šç”¨äºå‚æ•°çš„ä¼ é€’</span></span><br><span class="line"><span class="type">Class</span> <span class="variable">cls</span> <span class="operator">=</span> String.class;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ–¹æ³•2ï¼šåœ¨Runtimeè¿è¡Œé˜¶æ®µï¼šå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå®ä¾‹å˜é‡ï¼Œå¯ä»¥é€šè¿‡è¯¥å®ä¾‹å˜é‡æä¾›çš„<code>getClass()</code>æ–¹æ³•è·å–ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åœ¨å·²ç»çŸ¥é“æœ‰å¯¹è±¡å®ä¾‹çš„åŸºç¡€ä¸Šï¼Œè·å–</span></span><br><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="type">Class</span> <span class="variable">cls</span> <span class="operator">=</span> s.getClass();</span><br></pre></td></tr></table></figure>
<ul>
<li>æ–¹æ³•3ï¼šåœ¨ä»£ç /ç¼–è¯‘é˜¶æ®µï¼šå¦‚æœçŸ¥é“ä¸€ä¸ªç±»çš„å®Œæ•´ç±»åï¼Œå¯ä»¥é€šè¿‡é™æ€æ–¹æ³•<code>Class.forName()</code>è·å–ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¤šç”¨äºé…ç½®æ–‡ä»¶ã€</span></span><br><span class="line"><span class="type">Class</span> <span class="variable">cls</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;java.lang.String&quot;</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>æ–¹æ³•4ï¼šè¿˜å¯ä»¥é€šè¿‡ç±»åŠ è½½å™¨æ¥å¾—åˆ°Classå¯¹è±¡</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> car.getClass().getClassLoader()</span><br><span class="line">classLoader.loadClass(<span class="string">&quot;java.lang.String&quot;</span>)</span><br></pre></td></tr></table></figure>
<h4 id="å“ªäº›ç±»å‹æœ‰classå¯¹è±¡">3ã€å“ªäº›ç±»å‹æœ‰Classå¯¹è±¡ï¼Ÿ</h4>
<p>â€‹
å¤–éƒ¨ç±»ã€å†…éƒ¨ç±»ã€æ¥å£ã€æ•°ç»„ã€ç¾å‰§ã€æ³¨è§£ã€åŸºæœ¬æ•°æ®ç±»å‹ã€voidéƒ½æœ‰Classå¯¹è±¡</p>
<h4 id="æ¯”è¾ƒclasså®ä¾‹">4ã€æ¯”è¾ƒâ€Classâ€œå®ä¾‹</h4>
<p>â€‹
å› ä¸º<strong>"Class"</strong>å®ä¾‹åœ¨JVMä¸­æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥ï¼Œä¸Šè¿°æ–¹æ³•è·å–çš„<strong>"Class"</strong>å®ä¾‹æ˜¯åŒä¸€ä¸ªå®ä¾‹ã€‚å¯ä»¥ç”¨<code>==</code>æ¯”è¾ƒä¸¤ä¸ª<strong>"Class"</strong>å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Class</span> <span class="variable">cls1</span> <span class="operator">=</span> String.class;</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="type">Class</span> <span class="variable">cls2</span> <span class="operator">=</span> s.getClass();</span><br><span class="line"></span><br><span class="line"><span class="type">boolean</span> <span class="variable">sameClass</span> <span class="operator">=</span> cls1 == cls2; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„</strong>ï¼š<strong>"Class"</strong>å®ä¾‹æ¯”è¾ƒå’Œ<strong>instanceof</strong>çš„å·®åˆ«ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">n</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">123</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">boolean</span> <span class="variable">b1</span> <span class="operator">=</span> n <span class="keyword">instanceof</span> Integer; <span class="comment">// trueï¼Œå› ä¸ºnæ˜¯Integerç±»å‹</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">b2</span> <span class="operator">=</span> n <span class="keyword">instanceof</span> Number; <span class="comment">// trueï¼Œå› ä¸ºnæ˜¯Numberç±»å‹çš„å­ç±»</span></span><br><span class="line"></span><br><span class="line"><span class="type">boolean</span> <span class="variable">b3</span> <span class="operator">=</span> n.getClass() == Integer.class; <span class="comment">// trueï¼Œå› ä¸ºn.getClass()è¿”å›Integer.class</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">b4</span> <span class="operator">=</span> n.getClass() == Number.class; <span class="comment">// falseï¼Œå› ä¸ºInteger.class!=Number.class</span></span><br></pre></td></tr></table></figure>
<p>â€‹
ç”¨<code>instanceof</code>ä¸ä½†åŒ¹é…æŒ‡å®šç±»å‹ï¼Œè¿˜åŒ¹é…æŒ‡å®šç±»å‹çš„å­ç±»ã€‚è€Œç”¨<code>==</code>åˆ¤æ–­<code>class</code>å®ä¾‹å¯ä»¥ç²¾ç¡®åœ°åˆ¤æ–­æ•°æ®ç±»å‹ï¼Œä½†ä¸èƒ½ä½œå­ç±»å‹æ¯”è¾ƒã€‚</p>
<p>â€‹
é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥ç”¨<code>instanceof</code>åˆ¤æ–­æ•°æ®ç±»å‹ï¼Œå› ä¸ºé¢å‘æŠ½è±¡ç¼–ç¨‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å…³å¿ƒå…·ä½“çš„å­ç±»å‹ã€‚åªæœ‰åœ¨éœ€è¦ç²¾ç¡®åˆ¤æ–­ä¸€ä¸ªç±»å‹æ˜¯ä¸æ˜¯æŸä¸ª<code>class</code>çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰ä½¿ç”¨<code>==</code>åˆ¤æ–­<code>class</code>å®ä¾‹ã€‚</p>
<h4 id="åŠ¨æ€åŠ è½½ç‰¹æ€§">4ã€åŠ¨æ€åŠ è½½ç‰¹æ€§ï¼š</h4>
<p>â€‹
JVMåœ¨æ‰§è¡ŒJavaç¨‹åºçš„æ—¶å€™ï¼Œ<strong>å¹¶ä¸æ˜¯ä¸€æ¬¡æ€§æŠŠæ‰€æœ‰ç”¨åˆ°çš„classå…¨éƒ¨åŠ è½½åˆ°å†…å­˜ï¼Œè€Œæ˜¯ç¬¬ä¸€æ¬¡éœ€è¦ç”¨åˆ°classæ—¶æ‰åŠ è½½</strong>ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Main.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (args.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            create(args[<span class="number">0</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">create</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
å½“æ‰§è¡Œ<code>Main.java</code>æ—¶ï¼Œç”±äºç”¨åˆ°äº†<code>Main</code>ï¼Œå› æ­¤ï¼ŒJVMé¦–å…ˆä¼šæŠŠ<code>Main.class</code>åŠ è½½åˆ°å†…å­˜ã€‚ç„¶è€Œï¼Œå¹¶ä¸ä¼šåŠ è½½<code>Person.class</code>ï¼Œé™¤éç¨‹åºæ‰§è¡Œåˆ°<code>create()</code>æ–¹æ³•ï¼ŒJVMå‘ç°éœ€è¦åŠ è½½<code>Person</code>ç±»æ—¶ï¼Œæ‰ä¼šé¦–æ¬¡åŠ è½½<code>Person.class</code>ã€‚å¦‚æœæ²¡æœ‰æ‰§è¡Œ<code>create()</code>æ–¹æ³•ï¼Œé‚£ä¹ˆ<code>Person.class</code>æ ¹æœ¬å°±ä¸ä¼šè¢«åŠ è½½ã€‚</p>
<p>â€‹ è¿™å°±æ˜¯<strong>JVMåŠ¨æ€åŠ è½½<code>class</code>çš„ç‰¹æ€§</strong>ã€‚</p>
<p>â€‹
<strong>å¤‡æ³¨</strong>ï¼šåŠ¨æ€åŠ è½½ç±»çš„ç‰¹æ€§å¯¹äºJavaç¨‹åºéå¸¸é‡è¦ã€‚åˆ©ç”¨JVMåŠ¨æ€åŠ è½½ç±»çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨è¿è¡ŒæœŸæ ¹æ®æ¡ä»¶åŠ è½½ä¸åŒçš„å®ç°ç±»ã€‚ä¾‹å¦‚ï¼ŒCommons
Loggingæ€»æ˜¯ä¼˜å…ˆä½¿ç”¨Log4jï¼Œåªæœ‰å½“Log4jä¸å­˜åœ¨æ—¶ï¼Œæ‰ä½¿ç”¨JDKçš„loggingã€‚åˆ©ç”¨JVMåŠ¨æ€åŠ è½½ç‰¹æ€§ï¼Œå¤§è‡´çš„å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Commons Loggingä¼˜å…ˆä½¿ç”¨Log4j:</span></span><br><span class="line"><span class="type">LogFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (isClassPresent(<span class="string">&quot;org.apache.logging.log4j.Logger&quot;</span>)) &#123;</span><br><span class="line">    factory = createLog4j();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    factory = createJdkLog();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isClassPresent</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Class.forName(name);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åªéœ€è¦æŠŠLog4jçš„jaråŒ…æ”¾åˆ°classpathä¸­ï¼ŒCommons
Loggingå°±ä¼šè‡ªåŠ¨ä½¿ç”¨Log4jçš„åŸå› ã€‚</p>
<h3 id="äº”javaåŠ¨æ€åŠ è½½å’Œé™æ€åŠ è½½">äº”ã€JAVAåŠ¨æ€åŠ è½½å’Œé™æ€åŠ è½½</h3>
<ul>
<li><p>é™æ€åŠ è½½ï¼šç¼–è¯‘çš„æ—¶å€™åŠ è½½ç›¸å…³çš„ç±»ï¼Œå¦‚æœæ²¡æœ‰åˆ™æŠ¥é”™ï¼Œä¾èµ–æ€§å¤ªå¼º</p></li>
<li><p>åŠ¨æ€åŠ è½½ï¼šè¿è¡Œæ—¶åŠ è½½æ‰€éœ€çš„ç±»ï¼Œå¦‚æœè¿è¡Œæ—¶ä¸ç”¨è¯¥ç±»ï¼Œåˆ™ä¸ä¼šæŠ¥é”™ã€‚
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220829114232361.png" /></p></li>
<li><p>ç±»åŠ è½½çš„æ—¶æœºï¼š</p>
<ul>
<li>åˆ›å»ºå¯¹è±¡æ—¶ //é™æ€åŠ è½½</li>
<li>å½“å­ç±»è¢«åŠ è½½æ—¶ //é™æ€åŠ è½½</li>
<li>è°ƒç”¨ç±»ä¸­çš„é™æ€æˆå‘˜æ—¶å€™ //é™æ€åŠ è½½</li>
<li>é€šè¿‡åå°„ //åŠ¨æ€åŠ è½½</li>
</ul></li>
</ul>
<h3 id="å…­ç±»åŠ è½½æµç¨‹">å…­ã€ç±»åŠ è½½æµç¨‹:</h3>
<ul>
<li>å¦‚ä¸‹ä¸ºè¯¦ç»†çš„JAVAä»£ç è¿è¡Œæµç¨‹ï¼š</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20220829115028951.png" /></p>
<ul>
<li>ç±»åŠ è½½çš„é˜¶æ®µæ¦‚è¿°ï¼š
<ul>
<li>åŠ è½½ï¼šå°†ç±»çš„classæ–‡ä»¶è¯»å…¥å†…å­˜ï¼Œå¹¶ä¸ºä¹‹åˆ›å»ºä¸€ä¸ªjava.lang.Classå¯¹è±¡ï¼Œæ­¤è¿‡ç¨‹ç”±ç±»åŠ è½½å™¨å®Œæˆ</li>
<li>è¿æ¥ï¼šå°†ç±»çš„äºŒè¿›åˆ¶æ•°æ®åˆå¹¶åˆ°JREä¸­</li>
<li>åˆå§‹åŒ–ï¼šJVMè´Ÿè´£å¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™é‡Œä¸»è¦æŒ‡é™æ€æˆå‘˜</li>
</ul></li>
</ul>
<h5 id="åŠ è½½é˜¶æ®µ">åŠ è½½é˜¶æ®µï¼š</h5>
<ul>
<li>JVMåœ¨è¯¥é˜¶æ®µçš„ä¸»è¦ç›®çš„æ˜¯å°†å­—èŠ‚ç ä»ä¸åŒçš„æ•°æ®æºï¼ˆå¯èƒ½æ˜¯class
æ–‡ä»¶ã€ä¹Ÿå¯èƒ½æ˜¯jaråŒ…ï¼Œç”šè‡³ç½‘ç»œï¼‰<strong>è½¬åŒ–ä¸ºäºŒè¿›åˆ¶å­—èŠ‚æµåŠ è½½åˆ°å†…å­˜ä¸­</strong>ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¯¥ç±»çš„java.lang.Class
å¯¹è±¡</li>
</ul>
<h5 id="è¿æ¥é˜¶æ®µ">è¿æ¥é˜¶æ®µï¼š</h5>
<ul>
<li><strong>éªŒè¯</strong>ï¼š
<ul>
<li>ç¡®ä¿Classæ–‡ä»¶çš„å­—èŠ‚æµä¸­åŒ…å«çš„ä¿¡æ¯æ˜¯å¦ç¬¦åˆå½“å‰è™šæ‹Ÿæœºçš„è¦æ±‚ï¼Œå¹¶ä¸”ä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«çš„å®‰å…¨ã€‚åŒ…æ‹¬ï¼šæ–‡ä»¶æ ¼å¼éªŒè¯ã€å…ƒæ•°æ®éªŒè¯ã€å­—èŠ‚ç éªŒè¯å’Œç¬¦å·å¼•ç”¨éªŒè¯.</li>
</ul></li>
<li><strong>å‡†å¤‡</strong>:
<ul>
<li>JVM
ä¼šåœ¨è¯¥é˜¶æ®µå¯¹<strong>é™æ€å˜é‡</strong>ï¼Œåˆ†é…å†…å­˜å¹¶é»˜è®¤åˆå§‹åŒ–ï¼ˆå¯¹åº”æ•°æ®ç±»å‹çš„é»˜è®¤åˆå§‹å€¼ï¼Œå¦‚0ã€0Lã€nullã€falseç­‰ï¼‰ã€‚è¿™äº›å˜é‡æ‰€ä½¿ç”¨çš„å†…å­˜éƒ½å°†åœ¨<strong>æ–¹æ³•åŒº</strong>ä¸­è¿›è¡Œåˆ†é….</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220902174130300.png" /></li>
</ul></li>
<li><strong>è§£æ</strong>:
<ul>
<li>è™šæ‹Ÿæœºå°†å¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹.</li>
<li>åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­,Aç±»å¯¹Bç±»çš„å¼•ç”¨,éƒ½æ˜¯ç¬¦å·å¼•ç”¨.
åœ¨æ­¤é˜¶æ®µæŠŠè¿™äº›ç¬¦å·å¼•ç”¨,æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨(å³å†…å­˜åœ°å€çš„è®°å½•)</li>
</ul></li>
</ul>
<h5 id="åˆå§‹åŒ–é˜¶æ®µ">åˆå§‹åŒ–é˜¶æ®µ:</h5>
<ul>
<li>åˆ°åˆå§‹åŒ–é˜¶æ®µï¼Œæ‰çœŸæ­£å¼€å§‹æ‰§è¡Œç±»ä¸­å®šä¹‰çš„Javaç¨‹åºä»£ç ï¼Œæ­¤é˜¶æ®µæ˜¯æ‰§è¡Œ&lt;clinit&gt;()æ–¹æ³•çš„è¿‡ç¨‹ã€‚</li>
<li>&lt;clinit&gt;()
æ–¹æ³•æ˜¯ç”±ç¼–è¯‘å™¨æŒ‰è¯­å¥åœ¨æºæ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºï¼Œä¾æ¬¡è‡ªåŠ¨æ”¶é›†ç±»ä¸­çš„æ‰€æœ‰é™æ€å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€ä»£ç å—ä¸­çš„è¯­å¥ï¼Œå¹¶è¿›è¡Œåˆå¹¶ã€‚</li>
<li>è™šæ‹Ÿæœºä¼šä¿è¯ä¸€ä¸ªç±»çš„&lt;clinit&gt;()æ–¹æ³•åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­è¢«æ­£ç¡®åœ°åŠ é”ã€åŒæ­¥ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶å»åˆå§‹åŒ–ä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ªç±»çš„&lt;clinit&gt;()æ–¹æ³•ï¼Œå…¶ä»–çº¿ç¨‹éƒ½éœ€è¦é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°æ´»åŠ¨çº¿ç¨‹æ‰§è¡Œ&lt;clinit&gt;()æ–¹æ³•å®Œæ¯•</li>
</ul>
<h3 id="ä¸ƒé€šè¿‡classå®ä¾‹è®¿é—®å­—æ®µè¯¦">ä¸ƒã€é€šè¿‡Classå®ä¾‹è®¿é—®å­—æ®µâ€”â€”è¯¦ï¼š</h3>
<h4 id="è·å–å­—æ®µä¿¡æ¯">1ã€è·å–å­—æ®µä¿¡æ¯</h4>
<p>â€‹
å¯¹ä»»æ„çš„ä¸€ä¸ª<code>Object</code>å®ä¾‹ï¼Œåªè¦æˆ‘ä»¬è·å–äº†å®ƒçš„<strong>"Class"</strong>ï¼Œå°±å¯ä»¥è·å–å®ƒçš„ä¸€åˆ‡ä¿¡æ¯ã€‚</p>
<p>â€‹ <strong>"Class"</strong>ç±»æä¾›äº†ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•æ¥è·å–å­—æ®µFieldï¼š</p>
<ul>
<li>Field
getField(name)ï¼šæ ¹æ®å­—æ®µåè·å–æŸä¸ªpublicçš„fieldï¼ˆåŒ…æ‹¬çˆ¶ç±»ï¼‰</li>
<li>Field
getDeclaredField(name)ï¼šæ ¹æ®å­—æ®µåè·å–å½“å‰ç±»çš„æŸä¸ªfieldï¼ˆä¸åŒ…æ‹¬çˆ¶ç±»ï¼‰</li>
<li>Field[] getFields()ï¼šè·å–æ‰€æœ‰publicçš„fieldï¼ˆåŒ…æ‹¬çˆ¶ç±»ï¼‰</li>
<li>Field[]
getDeclaredFields()ï¼šè·å–å½“å‰ç±»çš„æ‰€æœ‰fieldï¼ˆä¸åŒ…æ‹¬çˆ¶ç±»ï¼‰</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Class</span> <span class="variable">stdClass</span> <span class="operator">=</span> Student.class;</span><br><span class="line">        <span class="comment">// è·å–publicå­—æ®µ&quot;score&quot;:</span></span><br><span class="line">        System.out.println(stdClass.getField(<span class="string">&quot;score&quot;</span>));</span><br><span class="line">        <span class="comment">// è·å–ç»§æ‰¿çš„publicå­—æ®µ&quot;name&quot;:</span></span><br><span class="line">        System.out.println(stdClass.getField(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">        <span class="comment">// è·å–privateå­—æ®µ&quot;grade&quot;:</span></span><br><span class="line">        System.out.println(stdClass.getDeclaredField(<span class="string">&quot;grade&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> score;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> grade;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/** ä¸Šè¿°è¾“å‡º </span></span><br><span class="line"><span class="comment">public int Student.score</span></span><br><span class="line"><span class="comment">public java.lang.String Person.name</span></span><br><span class="line"><span class="comment">private int Student.grade</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ª<code>Field</code>å¯¹è±¡åŒ…å«äº†ä¸€ä¸ªå­—æ®µçš„æ‰€æœ‰ä¿¡æ¯ï¼š</p>
<ul>
<li><code>getName()</code>ï¼šè¿”å›å­—æ®µåç§°ï¼Œä¾‹å¦‚ï¼Œ<code>"name"</code>ï¼›</li>
<li><code>getType()</code>ï¼šè¿”å›å­—æ®µç±»å‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª<code>Class</code>å®ä¾‹ï¼Œä¾‹å¦‚ï¼Œ<code>String.class</code>ï¼›</li>
<li><code>getModifiers()</code>ï¼šè¿”å›å­—æ®µçš„ä¿®é¥°ç¬¦ï¼Œå®ƒæ˜¯ä¸€ä¸ª<code>int</code>ï¼Œä¸åŒçš„bitè¡¨ç¤ºä¸åŒçš„å«ä¹‰ã€‚</li>
</ul>
<h4 id="è·å–å­—æ®µå€¼">2ã€è·å–å­—æ®µå€¼ï¼š</h4>
<p>â€‹
åˆ©ç”¨åå°„æ‹¿åˆ°å­—æ®µçš„ä¸€ä¸ª<code>Field</code>å®ä¾‹åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ‹¿åˆ°ä¸€ä¸ªå®ä¾‹å¯¹åº”çš„è¯¥å­—æ®µçš„å€¼ã€‚</p>
<p>â€‹
ä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ª<code>Person</code>å®ä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ‹¿åˆ°<code>name</code>å­—æ®µå¯¹åº”çš„<code>Field</code>ï¼Œå†è·å–è¿™ä¸ªå®ä¾‹çš„<code>name</code>å­—æ®µçš„å€¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Xiao Ming&quot;</span>);</span><br><span class="line">        <span class="type">Class</span> <span class="variable">c</span> <span class="operator">=</span> p.getClass();</span><br><span class="line">        <span class="type">Field</span> <span class="variable">f</span> <span class="operator">=</span> c.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> f.get(p);</span><br><span class="line">        System.out.println(value); <span class="comment">// &quot;Xiao Ming&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
ä¸Šè¿°ä»£ç å…ˆè·å–<code>Class</code>å®ä¾‹ï¼Œå†è·å–<code>Field</code>å®ä¾‹ï¼Œç„¶åï¼Œç”¨<code>Field.get(Object)</code>è·å–æŒ‡å®šå®ä¾‹çš„æŒ‡å®šå­—æ®µçš„å€¼ã€‚</p>
<p>â€‹
è¿è¡Œä»£ç ï¼Œå¦‚æœä¸å‡ºæ„å¤–ï¼Œä¼šå¾—åˆ°ä¸€ä¸ª<code>IllegalAccessException</code>ï¼Œè¿™æ˜¯å› ä¸º<code>name</code>è¢«å®šä¹‰ä¸ºä¸€ä¸ª<code>private</code>å­—æ®µï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œ<code>Main</code>ç±»æ— æ³•è®¿é—®<code>Person</code>ç±»çš„<code>private</code>å­—æ®µã€‚è¦ä¿®å¤é”™è¯¯ï¼Œå¯ä»¥å°†<code>private</code>æ”¹ä¸º<code>public</code>ï¼Œæˆ–è€…ï¼Œåœ¨è°ƒç”¨<code>Object value = f.get(p);</code>å‰ï¼Œå…ˆå†™ä¸€å¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">f.setAccessible(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨<code>Field.setAccessible(true)</code>çš„æ„æ€æ˜¯ï¼Œåˆ«ç®¡è¿™ä¸ªå­—æ®µæ˜¯ä¸æ˜¯<code>public</code>ï¼Œä¸€å¾‹å…è®¸è®¿é—®ã€‚</p>
<h4 id="è®¾ç½®å­—æ®µå€¼">3ã€è®¾ç½®å­—æ®µå€¼ï¼š</h4>
<p>â€‹
é€šè¿‡Fieldå®ä¾‹æ—¢ç„¶å¯ä»¥è·å–åˆ°æŒ‡å®šå®ä¾‹çš„å­—æ®µå€¼ï¼Œè‡ªç„¶ä¹Ÿå¯ä»¥è®¾ç½®å­—æ®µçš„å€¼ã€‚</p>
<p>â€‹
è®¾ç½®å­—æ®µå€¼æ˜¯é€šè¿‡<code>Field.set(Object, Object)</code>å®ç°çš„ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ª<code>Object</code>å‚æ•°æ˜¯æŒ‡å®šçš„å®ä¾‹ï¼Œç¬¬äºŒä¸ª<code>Object</code>å‚æ•°æ˜¯å¾…ä¿®æ”¹çš„å€¼ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Xiao Ming&quot;</span>);</span><br><span class="line">        System.out.println(p.getName()); <span class="comment">// &quot;Xiao Ming&quot;</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">c</span> <span class="operator">=</span> p.getClass();</span><br><span class="line">        <span class="type">Field</span> <span class="variable">f</span> <span class="operator">=</span> c.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        f.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        f.set(p, <span class="string">&quot;Xiao Hong&quot;</span>);</span><br><span class="line">        System.out.println(p.getName()); <span class="comment">// &quot;Xiao Hong&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŒæ ·çš„ï¼Œä¿®æ”¹é<code>public</code>å­—æ®µï¼Œéœ€è¦é¦–å…ˆè°ƒç”¨<code>setAccessible(true)</code>ã€‚</p>
<h3 id="å…«è°ƒç”¨æ–¹æ³•">å…«ã€è°ƒç”¨æ–¹æ³•ï¼š</h3>
<h4 id="ç®€ä»‹">1ã€ç®€ä»‹</h4>
<p>å¯ä»¥é€šè¿‡<code>Class</code>å®ä¾‹è·å–æ‰€æœ‰<code>Method</code>ä¿¡æ¯ã€‚<code>Class</code>ç±»æä¾›äº†ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•æ¥è·å–<code>Method</code>ï¼š</p>
<ul>
<li><code>Method getMethod(name, Class...)</code>ï¼šè·å–æŸä¸ª<code>public</code>çš„<code>Method</code>ï¼ˆåŒ…æ‹¬çˆ¶ç±»ï¼‰</li>
<li><code>Method getDeclaredMethod(name, Class...)</code>ï¼šè·å–å½“å‰ç±»çš„æŸä¸ª<code>Method</code>ï¼ˆä¸åŒ…æ‹¬çˆ¶ç±»ï¼‰</li>
<li><code>Method[] getMethods()</code>ï¼šè·å–æ‰€æœ‰<code>public</code>çš„<code>Method</code>ï¼ˆåŒ…æ‹¬çˆ¶ç±»ï¼‰</li>
<li><code>Method[] getDeclaredMethods()</code>ï¼šè·å–å½“å‰ç±»çš„æ‰€æœ‰<code>Method</code>ï¼ˆä¸åŒ…æ‹¬çˆ¶ç±»ï¼‰</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Class</span> <span class="variable">stdClass</span> <span class="operator">=</span> Student.class;</span><br><span class="line">        <span class="comment">// è·å–publicæ–¹æ³•getScoreï¼Œå‚æ•°ä¸ºString:</span></span><br><span class="line">        System.out.println(stdClass.getMethod(<span class="string">&quot;getScore&quot;</span>, String.class));</span><br><span class="line">        <span class="comment">// è·å–ç»§æ‰¿çš„publicæ–¹æ³•getNameï¼Œæ— å‚æ•°:</span></span><br><span class="line">        System.out.println(stdClass.getMethod(<span class="string">&quot;getName&quot;</span>));</span><br><span class="line">        <span class="comment">// è·å–privateæ–¹æ³•getGradeï¼Œå‚æ•°ä¸ºint:</span></span><br><span class="line">        System.out.println(stdClass.getDeclaredMethod(<span class="string">&quot;getGrade&quot;</span>, <span class="type">int</span>.class));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getScore</span><span class="params">(String type)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">99</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getGrade</span><span class="params">(<span class="type">int</span> year)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Person&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">public int Student.getScore(java.lang.String)</span></span><br><span class="line"><span class="comment">public java.lang.String Person.getName()</span></span><br><span class="line"><span class="comment">private int Student.getGrade(int)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ª<code>Method</code>å¯¹è±¡åŒ…å«ä¸€ä¸ªæ–¹æ³•çš„æ‰€æœ‰ä¿¡æ¯ï¼š</p>
<ul>
<li><code>getName()</code>ï¼šè¿”å›æ–¹æ³•åç§°ï¼Œä¾‹å¦‚ï¼š<code>"getScore"</code>ï¼›</li>
<li><code>getReturnType()</code>ï¼šè¿”å›æ–¹æ³•è¿”å›å€¼ç±»å‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªClasså®ä¾‹ï¼Œä¾‹å¦‚ï¼š<code>String.class</code>ï¼›</li>
<li><code>getParameterTypes()</code>ï¼šè¿”å›æ–¹æ³•çš„å‚æ•°ç±»å‹ï¼Œæ˜¯ä¸€ä¸ªClassæ•°ç»„ï¼Œä¾‹å¦‚ï¼š<code>&#123;String.class, int.class&#125;</code>ï¼›</li>
<li><code>getModifiers()</code>ï¼šè¿”å›æ–¹æ³•çš„ä¿®é¥°ç¬¦ï¼Œå®ƒæ˜¯ä¸€ä¸ª<code>int</code>ï¼Œä¸åŒçš„bitè¡¨ç¤ºä¸åŒçš„å«ä¹‰ã€‚</li>
</ul>
<h4 id="è°ƒç”¨æ–¹æ³•">2ã€è°ƒç”¨æ–¹æ³•ï¼š</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">String s = &quot;Hello world&quot;;</span><br><span class="line">String r = s.substring(6); // &quot;world&quot;</span><br></pre></td></tr></table></figure>
<p>â€‹ å¦‚æœç”¨åå°„æ¥ç”¨<code>substring</code>æ–¹æ³•ï¼Œéœ€è¦ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// Stringå¯¹è±¡:</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;Hello world&quot;</span>;</span><br><span class="line">        <span class="comment">// è·å–String substring(int)æ–¹æ³•ï¼Œå‚æ•°ä¸ºint:</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">m</span> <span class="operator">=</span> String.class.getMethod(<span class="string">&quot;substring&quot;</span>, <span class="type">int</span>.class);</span><br><span class="line">        <span class="comment">// åœ¨så¯¹è±¡ä¸Šè°ƒç”¨è¯¥æ–¹æ³•å¹¶è·å–ç»“æœ:</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">r</span> <span class="operator">=</span> (String) m.invoke(s, <span class="number">6</span>);</span><br><span class="line">        <span class="comment">// æ‰“å°è°ƒç”¨ç»“æœ:</span></span><br><span class="line">        System.out.println(r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
å¯¹<code>Method</code>å®ä¾‹è°ƒç”¨<code>invoke</code>å°±ç›¸å½“äºè°ƒç”¨è¯¥æ–¹æ³•ï¼Œ<code>invoke</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯¹è±¡å®ä¾‹ï¼Œå³åœ¨å“ªä¸ªå®ä¾‹ä¸Šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œåé¢çš„å¯å˜å‚æ•°è¦ä¸æ–¹æ³•å‚æ•°ä¸€è‡´ï¼Œå¦åˆ™å°†æŠ¥é”™ã€‚</p>
<h4 id="è°ƒç”¨é™æ€æ–¹æ³•">3ã€è°ƒç”¨é™æ€æ–¹æ³•ï¼š</h4>
<p>â€‹
å¦‚æœè·å–åˆ°çš„Methodè¡¨ç¤ºä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œè°ƒç”¨é™æ€æ–¹æ³•æ—¶ï¼Œç”±äºæ— éœ€æŒ‡å®šå®ä¾‹å¯¹è±¡ï¼Œæ‰€ä»¥<code>invoke</code>æ–¹æ³•ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œä¸º<code>null</code>ã€‚æˆ‘ä»¬ä»¥<code>Integer.parseInt(String)</code>ä¸ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// è·å–Integer.parseInt(String)æ–¹æ³•ï¼Œå‚æ•°ä¸ºString:</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">m</span> <span class="operator">=</span> Integer.class.getMethod(<span class="string">&quot;parseInt&quot;</span>, String.class);</span><br><span class="line">        <span class="comment">// è°ƒç”¨è¯¥é™æ€æ–¹æ³•å¹¶è·å–ç»“æœ:</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">n</span> <span class="operator">=</span> (Integer) m.invoke(<span class="literal">null</span>, <span class="string">&quot;12345&quot;</span>);</span><br><span class="line">        <span class="comment">// æ‰“å°è°ƒç”¨ç»“æœ:</span></span><br><span class="line">        System.out.println(n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è°ƒç”¨épublicæ–¹æ³•">4ã€è°ƒç”¨épublicæ–¹æ³•ï¼š</h4>
<p>ä¸ºäº†è°ƒç”¨épublicæ–¹æ³•ï¼Œæˆ‘ä»¬é€šè¿‡<code>Method.setAccessible(true)</code>å…è®¸å…¶è°ƒç”¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">        <span class="type">Method</span> <span class="variable">m</span> <span class="operator">=</span> p.getClass().getDeclaredMethod(<span class="string">&quot;setName&quot;</span>, String.class);</span><br><span class="line">        m.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        m.invoke(p, <span class="string">&quot;Bob&quot;</span>);</span><br><span class="line">        System.out.println(p.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¹è°ƒç”¨æ„é€ æ–¹æ³•">ä¹ã€è°ƒç”¨æ„é€ æ–¹æ³•ï¼š</h3>
<p>æˆ‘ä»¬é€šå¸¸ä½¿ç”¨<code>new</code>æ“ä½œç¬¦åˆ›å»ºæ–°çš„å®ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Person p = new Person();</span><br></pre></td></tr></table></figure>
<p>å¦‚æœé€šè¿‡åå°„æ¥åˆ›å»ºæ–°çš„å®ä¾‹ï¼Œå¯ä»¥è°ƒç”¨Classæä¾›çš„newInstance()æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Person p = Person.class.newInstance();</span><br></pre></td></tr></table></figure>
<p>â€‹ è°ƒç”¨Class.newInstance()
çš„å±€é™æ˜¯ï¼Œ<strong>å®ƒåªèƒ½è°ƒç”¨è¯¥ç±»çš„publicæ— å‚æ•°æ„é€ æ–¹æ³•</strong>ã€‚å¦‚æœæ„é€ æ–¹æ³•å¸¦æœ‰å‚æ•°ï¼Œæˆ–è€…ä¸æ˜¯publicï¼Œå°±æ— æ³•ç›´æ¥é€šè¿‡Class.newInstance()
æ¥è°ƒç”¨ã€‚</p>
<p>â€‹
ä¸ºäº†è°ƒç”¨ä»»æ„çš„æ„é€ æ–¹æ³•ï¼ŒJavaçš„<strong>åå°„APIæä¾›äº†Constructorå¯¹è±¡</strong>ï¼Œå®ƒåŒ…å«ä¸€ä¸ªæ„é€ æ–¹æ³•çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚Constructorå¯¹è±¡å’ŒMethodéå¸¸ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„ä»…åœ¨äºå®ƒæ˜¯ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œå¹¶ä¸”ï¼Œè°ƒç”¨ç»“æœæ€»æ˜¯è¿”å›å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// è·å–æ„é€ æ–¹æ³•Integer(int):</span></span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">cons1</span> <span class="operator">=</span> Integer.class.getConstructor(<span class="type">int</span>.class);</span><br><span class="line">        <span class="comment">// è°ƒç”¨æ„é€ æ–¹æ³•:</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">n1</span> <span class="operator">=</span> (Integer) cons1.newInstance(<span class="number">123</span>);</span><br><span class="line">        System.out.println(n1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–æ„é€ æ–¹æ³•Integer(String)</span></span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">cons2</span> <span class="operator">=</span> Integer.class.getConstructor(String.class);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">n2</span> <span class="operator">=</span> (Integer) cons2.newInstance(<span class="string">&quot;456&quot;</span>);</span><br><span class="line">        System.out.println(n2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡Classå®ä¾‹è·å–Constructorçš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>getConstructor(Class...)</code>ï¼šè·å–æŸä¸ª<code>public</code>çš„<code>Constructor</code>ï¼›</li>
<li><code>getDeclaredConstructor(Class...)</code>ï¼šè·å–æŸä¸ª<code>Constructor</code>ï¼›</li>
<li><code>getConstructors()</code>ï¼šè·å–æ‰€æœ‰<code>public</code>çš„<code>Constructor</code>ï¼›</li>
<li><code>getDeclaredConstructors()</code>ï¼šè·å–æ‰€æœ‰<code>Constructor</code>ã€‚</li>
</ul>
<p>â€‹
æ³¨æ„<code>Constructor</code>æ€»æ˜¯å½“å‰ç±»å®šä¹‰çš„æ„é€ æ–¹æ³•ï¼Œå’Œçˆ¶ç±»æ— å…³ï¼Œå› æ­¤ä¸å­˜åœ¨å¤šæ€çš„é—®é¢˜ã€‚</p>
<p>â€‹
è°ƒç”¨é<code>public</code>çš„<code>Constructor</code>æ—¶ï¼Œå¿…é¡»é¦–å…ˆé€šè¿‡<code>setAccessible(true)</code>è®¾ç½®å…è®¸è®¿é—®ã€‚<code>setAccessible(true)</code>å¯èƒ½ä¼šå¤±è´¥ã€‚</p>
<h3 id="åè·å–ç±»çš„ç»“æ„ä¿¡æ¯">åã€è·å–ç±»çš„ç»“æ„ä¿¡æ¯ï¼š</h3>
<h4 id="è·å–çˆ¶ç±»çš„class">1ã€è·å–çˆ¶ç±»çš„Class</h4>
<p>â€‹
æœ‰äº†æŸä¸ªç±»çš„<code>Class</code>å®ä¾‹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è·å–å®ƒçš„çˆ¶ç±»çš„<code>Class</code>ï¼šå¦‚ä¸‹ï¼Œ<code>Integer</code>çš„çˆ¶ç±»ç±»å‹æ˜¯<code>Number</code>ï¼Œ<code>Number</code>çš„çˆ¶ç±»æ˜¯<code>Object</code>ï¼Œ<code>Object</code>çš„çˆ¶ç±»æ˜¯<code>null</code>ã€‚é™¤<code>Object</code>å¤–ï¼Œå…¶ä»–ä»»ä½•é<code>interface</code>çš„<code>Class</code>éƒ½å¿…å®šå­˜åœ¨ä¸€ä¸ªçˆ¶ç±»ç±»å‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Class</span> <span class="variable">i</span> <span class="operator">=</span> Integer.class;</span><br><span class="line">        <span class="type">Class</span> <span class="variable">n</span> <span class="operator">=</span> i.getSuperclass();</span><br><span class="line">        System.out.println(n);</span><br><span class="line">        <span class="type">Class</span> <span class="variable">o</span> <span class="operator">=</span> n.getSuperclass();</span><br><span class="line">        System.out.println(o);</span><br><span class="line">        System.out.println(o.getSuperclass());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">class java.lang.Number</span></span><br><span class="line"><span class="comment">class java.lang.Object</span></span><br><span class="line"><span class="comment">null </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h4 id="è·å–interface">2ã€è·å–Interface</h4>
<p>â€‹
ç”±äºä¸€ä¸ªç±»å¯èƒ½å®ç°ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£ï¼Œé€šè¿‡<code>Class</code>æˆ‘ä»¬å°±å¯ä»¥æŸ¥è¯¢åˆ°å®ç°çš„æ¥å£ç±»å‹ã€‚ä¾‹å¦‚ï¼ŒæŸ¥è¯¢<code>Integer</code>å®ç°çš„æ¥å£ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Class</span> <span class="variable">s</span> <span class="operator">=</span> Integer.class;</span><br><span class="line">        Class[] is = s.getInterfaces();</span><br><span class="line">        <span class="keyword">for</span> (Class i : is) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">interface java.lang.Comparable</span></span><br><span class="line"><span class="comment">interface java.lang.constant.Constable</span></span><br><span class="line"><span class="comment">interface java.lang.constant.ConstantDesc </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸Šè¿°ä»£ç å¯çŸ¥ï¼Œ<code>Integer</code>å®ç°çš„æ¥å£æœ‰ï¼š</p>
<ul>
<li>java.lang.Comparable</li>
<li>java.lang.constant.Constable</li>
<li>java.lang.constant.ConstantDesc</li>
</ul>
<p>è¦ç‰¹åˆ«æ³¨æ„ï¼š</p>
<ul>
<li><p><code>getInterfaces()</code>åªè¿”å›å½“å‰ç±»ç›´æ¥å®ç°çš„æ¥å£ç±»å‹ï¼Œå¹¶ä¸åŒ…æ‹¬å…¶çˆ¶ç±»å®ç°çš„æ¥å£ç±»å‹ï¼š</p></li>
<li><p>å¯¹æ‰€æœ‰<code>interface</code>çš„<code>Class</code>è°ƒç”¨<code>getSuperclass()</code>è¿”å›çš„æ˜¯<code>null</code></p></li>
<li><p>å¦‚æœä¸€ä¸ªç±»æ²¡æœ‰å®ç°ä»»ä½•<code>interface</code>ï¼Œé‚£ä¹ˆ<code>getInterfaces()</code>è¿”å›ç©ºæ•°ç»„ã€‚</p></li>
</ul>
<h4 id="ç»§æ‰¿å…³ç³»">3ã€ç»§æ‰¿å…³ç³»</h4>
<ul>
<li>å½“æˆ‘ä»¬åˆ¤æ–­ä¸€ä¸ªå®ä¾‹æ˜¯å¦æ˜¯æŸä¸ªç±»å‹æ—¶ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œä½¿ç”¨<code>instanceof</code>æ“ä½œç¬¦ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">n</span> <span class="operator">=</span> Integer.valueOf(<span class="number">123</span>);</span><br><span class="line"><span class="type">boolean</span> <span class="variable">isDouble</span> <span class="operator">=</span> n <span class="keyword">instanceof</span> Double; <span class="comment">// false</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">isInteger</span> <span class="operator">=</span> n <span class="keyword">instanceof</span> Integer; <span class="comment">// true</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">isNumber</span> <span class="operator">=</span> n <span class="keyword">instanceof</span> Number; <span class="comment">// true</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">isSerializable</span> <span class="operator">=</span> n <span class="keyword">instanceof</span> java.io.Serializable; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœæ˜¯ä¸¤ä¸ª<code>Class</code>å®ä¾‹ï¼Œè¦åˆ¤æ–­ä¸€ä¸ªå‘ä¸Šè½¬å‹æ˜¯å¦æˆç«‹ï¼Œå¯ä»¥è°ƒç”¨<code>isAssignableFrom()</code>ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Integer i = ?</span></span><br><span class="line">Integer.class.isAssignableFrom(Integer.class); <span class="comment">// trueï¼Œå› ä¸ºIntegerå¯ä»¥èµ‹å€¼ç»™Integer</span></span><br><span class="line"><span class="comment">// Number n = ?</span></span><br><span class="line">Number.class.isAssignableFrom(Integer.class); <span class="comment">// trueï¼Œå› ä¸ºIntegerå¯ä»¥èµ‹å€¼ç»™Number</span></span><br><span class="line"><span class="comment">// Object o = ?</span></span><br><span class="line">Object.class.isAssignableFrom(Integer.class); <span class="comment">// trueï¼Œå› ä¸ºIntegerå¯ä»¥èµ‹å€¼ç»™Object</span></span><br><span class="line"><span class="comment">// Integer i = ?</span></span><br><span class="line">Integer.class.isAssignableFrom(Number.class); <span class="comment">// falseï¼Œå› ä¸ºNumberä¸èƒ½èµ‹å€¼ç»™Integer</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaå…¥é—¨ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>reflection</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç³»åˆ—ç¬”è®°8â€”â€”java IOæ¨¡å—ï¼ˆæ›´æ–°ä¸­ï¼‰</title>
    <url>/2022/02/01/d6f26999810e/</url>
    <content><![CDATA[<p>å‚è€ƒæ•™ç¨‹ç½‘å€ï¼šhttps://www.liaoxuefeng.com/wiki/1252599548343744/1255945227202752</p>
<h3 id="ä¸€ç®€ä»‹">ä¸€ã€ç®€ä»‹ï¼š</h3>
<p>â€‹
åœ¨Javaä¸­ï¼Œ<code>InputStream</code>ä»£è¡¨è¾“å…¥å­—èŠ‚æµï¼Œ<code>OuputStream</code>ä»£è¡¨è¾“å‡ºå­—èŠ‚æµï¼Œè¿™æ˜¯æœ€åŸºæœ¬çš„ä¸¤ç§IOæµã€‚</p>
<p>â€‹
å¦‚æœæˆ‘ä»¬éœ€è¦è¯»å†™çš„æ˜¯å­—ç¬¦ï¼Œå¹¶ä¸”å­—ç¬¦ä¸å…¨æ˜¯å•å­—èŠ‚è¡¨ç¤ºçš„ASCIIå­—ç¬¦ï¼Œé‚£ä¹ˆï¼ŒæŒ‰ç…§<code>char</code>æ¥è¯»å†™æ˜¾ç„¶æ›´æ–¹ä¾¿ï¼Œè¿™ç§æµç§°ä¸º<strong>å­—ç¬¦æµ</strong>ã€‚Javaæä¾›äº†<code>Reader</code>å’Œ<code>Writer</code>è¡¨ç¤ºå­—ç¬¦æµï¼Œå­—ç¬¦æµä¼ è¾“çš„æœ€å°æ•°æ®å•ä½æ˜¯<code>char</code>ã€‚</p>
<p>â€‹
<code>Reader</code>å’Œ<code>Writer</code><strong>æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªèƒ½è‡ªåŠ¨ç¼–è§£ç çš„<code>InputStream</code>å’Œ<code>OutputStream</code></strong>ã€‚</p>
<p>â€‹
<strong>ä½¿ç”¨<code>Reader</code>ï¼Œæ•°æ®æºè™½ç„¶æ˜¯å­—èŠ‚ï¼Œä½†æˆ‘ä»¬è¯»å…¥çš„æ•°æ®éƒ½æ˜¯<code>char</code>ç±»å‹çš„å­—ç¬¦ï¼ŒåŸå› æ˜¯<code>Reader</code>å†…éƒ¨æŠŠè¯»å…¥çš„<code>byte</code>åšäº†è§£ç ï¼Œè½¬æ¢æˆäº†<code>char</code>ã€‚</strong></p>
<p>â€‹
<strong>ä½¿ç”¨<code>InputStream</code>ï¼Œæˆ‘ä»¬è¯»å…¥çš„æ•°æ®å’ŒåŸå§‹äºŒè¿›åˆ¶æ•°æ®ä¸€æ¨¡ä¸€æ ·ï¼Œæ˜¯<code>byte[]</code>æ•°ç»„</strong>ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥è‡ªå·±æŠŠäºŒè¿›åˆ¶<code>byte[]</code>æ•°ç»„æŒ‰ç…§æŸç§ç¼–ç è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220811092720148.png" style="zoom:67%;" /></p>
<h3 id="äºŒå¸¸ç”¨çš„æ–‡ä»¶æ“ä½œfileå¯¹è±¡">äºŒã€å¸¸ç”¨çš„æ–‡ä»¶æ“ä½œï¼šFileå¯¹è±¡ï¼š</h3>
<h4 id="æ„é€ fileå¯¹è±¡">1ã€æ„é€ Fileå¯¹è±¡</h4>
<p>â€‹
Javaçš„æ ‡å‡†åº“<code>java.io</code>æä¾›äº†<code>File</code>å¯¹è±¡æ¥æ“ä½œæ–‡ä»¶å’Œç›®å½•ã€‚</p>
<p>â€‹ è¦æ„é€ ä¸€ä¸ª<code>File</code>å¯¹è±¡ï¼Œéœ€è¦ä¼ å…¥æ–‡ä»¶è·¯å¾„ï¼Œ
<code>File</code>å¯¹è±¡æ—¢å¯ä»¥è¡¨ç¤ºæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºç›®å½•ã€‚ç‰¹åˆ«è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>æ„é€ ä¸€ä¸ª<code>File</code>å¯¹è±¡ï¼Œå³ä½¿ä¼ å…¥çš„æ–‡ä»¶æˆ–ç›®å½•ä¸å­˜åœ¨ï¼Œä»£ç ä¹Ÿä¸ä¼šå‡ºé”™</strong>ï¼Œå› ä¸ºæ„é€ ä¸€ä¸ª<code>File</code>å¯¹è±¡ï¼Œå¹¶ä¸ä¼šå¯¼è‡´ä»»ä½•ç£ç›˜æ“ä½œã€‚<strong>åªæœ‰å½“æˆ‘ä»¬è°ƒç”¨<code>File</code>å¯¹è±¡çš„æŸäº›æ–¹æ³•çš„æ—¶å€™ï¼Œæ‰çœŸæ­£è¿›è¡Œç£ç›˜æ“ä½œ</strong>ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">f</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:\\Windows\\notepad.exe&quot;</span>);  </span><br><span class="line">        System.out.println(f);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">File</span>(File Parent,String child);  <span class="comment">//æ ¹æ®çˆ¶ç›®å½•æ–‡ä»¶ + å­è·¯å¾„</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">File</span>(String Parent,String child); <span class="comment">//ä¼°è®¡çˆ¶ç›®å½• + å­è·¯å¾„</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å…¶å®ç°äº†Serializableå’ŒComparableæ¥å£</li>
</ul>
<h4 id="fileå¸¸ç”¨å‡½æ•°ä¸ä¿¡æ¯">2ã€Fileå¸¸ç”¨å‡½æ•°ä¸ä¿¡æ¯</h4>
<ul>
<li><code>getPath()</code>ï¼Œè¿”å›æ„é€ æ–¹æ³•ä¼ å…¥çš„è·¯å¾„</li>
<li><code>getAbsolutePath()</code>ï¼Œè¿”å›ç»å¯¹è·¯å¾„</li>
<li><code>getCanonicalPath()</code>ï¼Œå®ƒå’Œç»å¯¹è·¯å¾„ç±»ä¼¼ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯è§„èŒƒè·¯å¾„ã€‚</li>
</ul>
<p><strong>ä»€ä¹ˆæ˜¯è§„èŒƒè·¯å¾„ï¼Ÿ</strong></p>
<p>â€‹
ç»å¯¹è·¯å¾„å¯ä»¥è¡¨ç¤ºæˆ<code>C:\Windows\System32\..\notepad.exe</code>ï¼Œè€Œ<strong>è§„èŒƒè·¯å¾„å°±æ˜¯æŠŠ<code>.</code>å’Œ<code>..</code>è½¬æ¢æˆæ ‡å‡†çš„ç»å¯¹è·¯å¾„åçš„è·¯å¾„</strong>ï¼š<code>C:\Windows\notepad.exe</code>ã€‚</p>
<ul>
<li><code>isFile()</code>ï¼Œåˆ¤æ–­è¯¥<code>File</code>å¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªå·²å­˜åœ¨çš„æ–‡ä»¶</li>
<li><code>isDirectory()</code>ï¼Œåˆ¤æ–­è¯¥<code>File</code>å¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªå·²å­˜åœ¨çš„ç›®å½•ï¼š</li>
</ul>
<p><strong>ç”¨<code>File</code>å¯¹è±¡è·å–åˆ°ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œè¿˜å¯ä»¥è¿›ä¸€æ­¥åˆ¤æ–­æ–‡ä»¶çš„æƒé™å’Œå¤§å°ï¼š</strong></p>
<ul>
<li><code>boolean canRead()</code>ï¼šæ˜¯å¦å¯è¯»ï¼›</li>
<li><code>boolean canWrite()</code>ï¼šæ˜¯å¦å¯å†™ï¼›</li>
<li><code>boolean canExecute()</code>ï¼šæ˜¯å¦å¯æ‰§è¡Œï¼›</li>
<li><code>long length()</code>ï¼šæ–‡ä»¶å­—èŠ‚å¤§å°ã€‚</li>
</ul>
<p>å¯¹ç›®å½•è€Œè¨€ï¼Œæ˜¯å¦å¯æ‰§è¡Œè¡¨ç¤ºèƒ½å¦åˆ—å‡ºå®ƒåŒ…å«çš„æ–‡ä»¶å’Œå­ç›®å½•ã€‚</p>
<h4 id="åˆ›å»ºå’Œåˆ é™¤æ–‡ä»¶">3ã€åˆ›å»ºå’Œåˆ é™¤æ–‡ä»¶ï¼š</h4>
<p>â€‹
å½“Fileå¯¹è±¡è¡¨ç¤ºä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œå¯ä»¥é€šè¿‡<code>createNewFile()</code>åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œç”¨<code>delete()</code>åˆ é™¤è¯¥æ–‡ä»¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;/path/to/file&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (file.createNewFile()) &#123;</span><br><span class="line">    <span class="comment">// æ–‡ä»¶åˆ›å»ºæˆåŠŸ:</span></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span></span></span><br><span class="line">    <span class="keyword">if</span> (file.delete()) &#123;</span><br><span class="line">        <span class="comment">// åˆ é™¤æ–‡ä»¶æˆåŠŸ:</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
æœ‰äº›æ—¶å€™ï¼Œç¨‹åºéœ€è¦è¯»å†™ä¸€äº›ä¸´æ—¶æ–‡ä»¶ï¼Œ<strong>Fileå¯¹è±¡æä¾›äº†<code>createTempFile()</code>æ¥åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶</strong>ï¼Œä»¥åŠ<code>deleteOnExit()</code>åœ¨JVMé€€å‡ºæ—¶è‡ªåŠ¨åˆ é™¤è¯¥æ–‡ä»¶ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">f</span> <span class="operator">=</span> File.createTempFile(<span class="string">&quot;tmp-&quot;</span>, <span class="string">&quot;.txt&quot;</span>); <span class="comment">// æä¾›ä¸´æ—¶æ–‡ä»¶çš„å‰ç¼€å’Œåç¼€</span></span><br><span class="line">        f.deleteOnExit(); <span class="comment">// JVMé€€å‡ºæ—¶è‡ªåŠ¨åˆ é™¤</span></span><br><span class="line">        System.out.println(f.isFile());</span><br><span class="line">        System.out.println(f.getAbsolutePath());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="number">6</span></span><br></pre></td></tr></table></figure>
<h4 id="åˆ›å»ºå’Œåˆ é™¤ç›®å½•">4ã€åˆ›å»ºå’Œåˆ é™¤ç›®å½•ï¼š</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// mkdiråˆ›å»ºå•çº§ç›®å½•ï¼Œmkdirsåˆ›å»ºå¤šçº§ç›®å½•ï¼Œdeleteæ–¹æ³•åˆ é™¤ç›®å½•</span></span><br><span class="line"><span class="type">String</span> <span class="variable">directoryPath</span> <span class="operator">=</span><span class="string">&quot;D:\\demo\\a\\b\\c&quot;</span>;</span><br><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(directoryPath);</span><br><span class="line"><span class="keyword">if</span>(file.exists())&#123;</span><br><span class="line">	System.out.printinï¼ˆdirectoryPath+â€œå­˜åœ¨..<span class="string">&quot;ï¼‰ï¼›</span></span><br><span class="line"><span class="string">&#125;else&#123;</span></span><br><span class="line"><span class="string">    file.mkdirs();</span></span><br><span class="line"><span class="string">    //å¦‚æœæ­¤å¤„ä½¿ç”¨ file.mkdir()çš„è¯ï¼Œä¼šæŠ¥é”™ï¼Œå› ä¸ºdemo/aç›®å½•å°šä¸”ä¸å­˜åœ¨</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="éå†æ–‡ä»¶å’Œç›®å½•">5ã€éå†æ–‡ä»¶å’Œç›®å½•ï¼š</h4>
<p>â€‹
å½“Fileå¯¹è±¡è¡¨ç¤ºä¸€ä¸ªç›®å½•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>list()</code>å’Œ<code>listFiles()</code>åˆ—å‡ºç›®å½•ä¸‹çš„æ–‡ä»¶å’Œå­ç›®å½•åã€‚<code>listFiles()</code>æä¾›äº†ä¸€ç³»åˆ—é‡è½½æ–¹æ³•ï¼Œå¯ä»¥è¿‡æ»¤ä¸æƒ³è¦çš„æ–‡ä»¶å’Œç›®å½•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">f</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:\\Windows&quot;</span>);</span><br><span class="line">        File[] fs1 = f.listFiles(); <span class="comment">// åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•</span></span><br><span class="line">        printFiles(fs1);</span><br><span class="line">        File[] fs2 = f.listFiles(<span class="keyword">new</span> <span class="title class_">FilenameFilter</span>() &#123; <span class="comment">// ä»…åˆ—å‡º.exeæ–‡ä»¶</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">accept</span><span class="params">(File dir, String name)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> name.endsWith(<span class="string">&quot;.exe&quot;</span>); <span class="comment">// è¿”å›trueè¡¨ç¤ºæ¥å—è¯¥æ–‡ä»¶</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        printFiles(fs2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printFiles</span><span class="params">(File[] files)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;==========&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (files != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (File f : files) &#123;</span><br><span class="line">                System.out.println(f);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;==========&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å’Œæ–‡ä»¶æ“ä½œç±»ä¼¼ï¼ŒFileå¯¹è±¡å¦‚æœè¡¨ç¤ºä¸€ä¸ªç›®å½•ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•åˆ›å»ºå’Œåˆ é™¤ç›®å½•ï¼š</p>
<ul>
<li><code>boolean mkdir()</code>ï¼šåˆ›å»ºå½“å‰Fileå¯¹è±¡è¡¨ç¤ºçš„ç›®å½•ï¼›</li>
<li><code>boolean mkdirs()</code>ï¼šåˆ›å»ºå½“å‰Fileå¯¹è±¡è¡¨ç¤ºçš„ç›®å½•ï¼Œå¹¶åœ¨å¿…è¦æ—¶å°†ä¸å­˜åœ¨çš„çˆ¶ç›®å½•ä¹Ÿåˆ›å»ºå‡ºæ¥ï¼›</li>
<li><code>boolean delete()</code>ï¼šåˆ é™¤å½“å‰Fileå¯¹è±¡è¡¨ç¤ºçš„ç›®å½•ï¼Œå½“å‰ç›®å½•å¿…é¡»ä¸ºç©ºæ‰èƒ½åˆ é™¤æˆåŠŸã€‚</li>
</ul>
<h4 id="pathå¯¹è±¡">6ã€pathå¯¹è±¡ï¼š</h4>
<p>â€‹
Javaæ ‡å‡†åº“è¿˜æä¾›äº†ä¸€ä¸ª<code>Path</code>å¯¹è±¡ï¼Œå®ƒä½äº<code>java.nio.file</code>åŒ…ã€‚<code>Path</code>å¯¹è±¡å’Œ<code>File</code>å¯¹è±¡ç±»ä¼¼ï¼Œä½†æ“ä½œæ›´åŠ ç®€å•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Path</span> <span class="variable">p1</span> <span class="operator">=</span> Paths.get(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;project&quot;</span>, <span class="string">&quot;study&quot;</span>); <span class="comment">// æ„é€ ä¸€ä¸ªPathå¯¹è±¡</span></span><br><span class="line">        System.out.println(p1);</span><br><span class="line">        <span class="type">Path</span> <span class="variable">p2</span> <span class="operator">=</span> p1.toAbsolutePath(); <span class="comment">// è½¬æ¢ä¸ºç»å¯¹è·¯å¾„</span></span><br><span class="line">        System.out.println(p2);</span><br><span class="line">        <span class="type">Path</span> <span class="variable">p3</span> <span class="operator">=</span> p2.normalize(); <span class="comment">// è½¬æ¢ä¸ºè§„èŒƒè·¯å¾„</span></span><br><span class="line">        System.out.println(p3);</span><br><span class="line">        <span class="type">File</span> <span class="variable">f</span> <span class="operator">=</span> p3.toFile(); <span class="comment">// è½¬æ¢ä¸ºFileå¯¹è±¡</span></span><br><span class="line">        System.out.println(f);</span><br><span class="line">        <span class="keyword">for</span> (Path p : Paths.get(<span class="string">&quot;..&quot;</span>).toAbsolutePath()) &#123; <span class="comment">// å¯ä»¥ç›´æ¥éå†Path</span></span><br><span class="line">            System.out.println(<span class="string">&quot;  &quot;</span> + p);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸‰ioæµåŸç†å’Œåˆ†ç±»">ä¸‰ã€I/OæµåŸç†å’Œåˆ†ç±»</h3>
<p>javaä¸­ï¼Œå¯¹äºæ•°æ®çš„è¾“å…¥è¾“å‡ºæ“ä½œå‡ä»¥æµçš„å½¢å¼è¿›è¡Œæ“ä½œ</p>
<ul>
<li>å­—èŠ‚æµã€å­—ç¬¦æµ</li>
<li>è¾“å…¥æµã€è¾“å‡ºæµ</li>
<li>èŠ‚ç‚¹æµï¼Œå¤„ç†æµ/åŒ…è£…æµ</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220811150309611.png" style="zoom:50%;" /></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220811223739770.png" style="zoom:67%;" /></p>
<h3 id="å››inputstream">å››ã€InputStream</h3>
<h4 id="inputstream">1ã€InputStream</h4>
<p>â€‹
<code>InputStream</code>å¹¶ä¸æ˜¯ä¸€ä¸ªæ¥å£ï¼Œè€Œæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒæ˜¯æ‰€æœ‰è¾“å…¥æµçš„è¶…ç±»ã€‚</p>
<p>â€‹
è¿™ä¸ªæŠ½è±¡ç±»å®šä¹‰çš„ä¸€ä¸ªæœ€é‡è¦çš„æ–¹æ³•å°±æ˜¯<code>int read()</code>ï¼Œç­¾åå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public abstract int read() throws IOException;</span><br></pre></td></tr></table></figure>
<p>â€‹
è¿™ä¸ªæ–¹æ³•ä¼šè¯»å–è¾“å…¥æµçš„ä¸‹ä¸€ä¸ªå­—èŠ‚ï¼Œå¹¶è¿”å›å­—èŠ‚è¡¨ç¤ºçš„<code>int</code>å€¼ï¼ˆ0~255ï¼‰ã€‚å¦‚æœå·²è¯»åˆ°æœ«å°¾ï¼Œè¿”å›<code>-1</code>è¡¨ç¤ºä¸èƒ½ç»§ç»­è¯»å–äº†ã€‚</p>
<h4 id="fileinputstream-æ–‡ä»¶è¯»å–æ•°æ®">2ã€FileInputStream
æ–‡ä»¶è¯»å–æ•°æ®</h4>
<p>â€‹
<code>FileInputStream</code>æ˜¯<code>InputStream</code>çš„ä¸€ä¸ªå­ç±»ã€‚é¡¾åæ€ä¹‰ï¼Œ<code>FileInputStream</code>å°±æ˜¯ä»æ–‡ä»¶æµä¸­è¯»å–æ•°æ®ã€‚ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•å®Œæ•´åœ°è¯»å–ä¸€ä¸ª<code>FileInputStream</code>çš„æ‰€æœ‰å­—èŠ‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">readFile</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªFileInputStreamå¯¹è±¡:</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;src/readme.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> input.read(); <span class="comment">// åå¤è°ƒç”¨read()æ–¹æ³•ï¼Œç›´åˆ°è¿”å›-1</span></span><br><span class="line">        <span class="keyword">if</span> (n == -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(n); <span class="comment">// æ‰“å°byteçš„å€¼</span></span><br><span class="line">    &#125;</span><br><span class="line">    input.close(); <span class="comment">// å…³é—­æµ, InputStreamå’ŒOutputStreaméƒ½æ˜¯é€šè¿‡close()æ–¹æ³•æ¥å…³é—­æµã€‚å…³é—­æµå°±ä¼šé‡Šæ”¾å¯¹åº”çš„åº•å±‚èµ„æºã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
æˆ‘ä»¬è¿˜è¦æ³¨æ„åˆ°åœ¨è¯»å–æˆ–å†™å…¥IOæµçš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå‘ç”Ÿé”™è¯¯ï¼Œä¾‹å¦‚ï¼Œæ–‡ä»¶ä¸å­˜åœ¨å¯¼è‡´æ— æ³•è¯»å–ï¼Œæ²¡æœ‰å†™æƒé™å¯¼è‡´å†™å…¥å¤±è´¥ï¼Œç­‰ç­‰ï¼Œè¿™äº›åº•å±‚é”™è¯¯ç”±Javaè™šæ‹Ÿæœºè‡ªåŠ¨å°è£…æˆ<code>IOException</code>å¼‚å¸¸å¹¶æŠ›å‡ºã€‚å› æ­¤ï¼Œæ‰€æœ‰ä¸IOæ“ä½œç›¸å…³çš„ä»£ç éƒ½å¿…é¡»æ­£ç¡®å¤„ç†<code>IOException</code>ã€‚</p>
<p>â€‹ <strong>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨Java
7å¼•å…¥çš„æ–°çš„<code>try(resource)</code>çš„è¯­æ³•</strong>ï¼Œåªéœ€è¦ç¼–å†™<code>try</code>è¯­å¥ï¼Œè®©ç¼–è¯‘å™¨è‡ªåŠ¨ä¸ºæˆ‘ä»¬å…³é—­èµ„æºã€‚æ¨èçš„å†™æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">readFile</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="keyword">try</span> (<span class="type">InputStream</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;src/readme.txt&quot;</span>)) &#123;</span><br><span class="line">        <span class="type">int</span> n;</span><br><span class="line">        <span class="keyword">while</span> ((n = input.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(n);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="comment">// ç¼–è¯‘å™¨åœ¨æ­¤è‡ªåŠ¨ä¸ºæˆ‘ä»¬å†™å…¥finallyå¹¶è°ƒç”¨close()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
å®é™…ä¸Šï¼Œç¼–è¯‘å™¨å¹¶ä¸ä¼šç‰¹åˆ«åœ°ä¸º<code>InputStream</code>åŠ ä¸Šè‡ªåŠ¨å…³é—­ã€‚<strong>ç¼–è¯‘å™¨åªçœ‹<code>try(resource = ...)</code>ä¸­çš„å¯¹è±¡æ˜¯å¦å®ç°äº†<code>java.lang.AutoCloseable</code>æ¥å£</strong>ï¼Œå¦‚æœå®ç°äº†ï¼Œå°±è‡ªåŠ¨åŠ ä¸Š<code>finally</code>è¯­å¥å¹¶è°ƒç”¨<code>close()</code>æ–¹æ³•ã€‚<code>InputStream</code>å’Œ<code>OutputStream</code>éƒ½å®ç°äº†è¿™ä¸ªæ¥å£ï¼Œå› æ­¤ï¼Œéƒ½å¯ä»¥ç”¨åœ¨<code>try(resource)</code>ä¸­ã€‚</p>
<h4 id="é˜»å¡">3ã€é˜»å¡</h4>
<p>â€‹
åœ¨è°ƒç”¨<code>InputStream</code>çš„<code>read()</code>æ–¹æ³•è¯»å–æ•°æ®æ—¶ï¼Œæˆ‘ä»¬è¯´<code>read()</code>æ–¹æ³•æ˜¯é˜»å¡ï¼ˆBlockingï¼‰çš„ã€‚å®ƒçš„æ„æ€æ˜¯ï¼Œå¯¹äºä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> n;</span><br><span class="line">n = input.read(); <span class="comment">// å¿…é¡»ç­‰å¾…read()æ–¹æ³•è¿”å›æ‰èƒ½æ‰§è¡Œä¸‹ä¸€è¡Œä»£ç </span></span><br><span class="line"><span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> n;</span><br></pre></td></tr></table></figure>
<p>â€‹
æ‰§è¡Œåˆ°ç¬¬äºŒè¡Œä»£ç æ—¶ï¼Œå¿…é¡»ç­‰<code>read()</code>æ–¹æ³•è¿”å›åæ‰èƒ½ç»§ç»­ã€‚å› ä¸ºè¯»å–IOæµç›¸æ¯”æ‰§è¡Œæ™®é€šä»£ç ï¼Œé€Ÿåº¦ä¼šæ…¢å¾ˆå¤šï¼Œå› æ­¤ï¼Œæ— æ³•ç¡®å®š<code>read()</code>æ–¹æ³•è°ƒç”¨åˆ°åº•è¦èŠ±è´¹å¤šé•¿æ—¶é—´ã€‚</p>
<h3 id="äº”outputstream">äº”ã€OutputStream</h3>
<p>â€‹
å’Œ<code>InputStream</code>ç±»ä¼¼ï¼Œ<code>OutputStream</code>ä¹Ÿæ˜¯æŠ½è±¡ç±»ï¼Œå®ƒæ˜¯æ‰€æœ‰è¾“å‡ºæµçš„è¶…ç±»ã€‚è¿™ä¸ªæŠ½è±¡ç±»å®šä¹‰çš„ä¸€ä¸ªæœ€é‡è¦çš„æ–¹æ³•å°±æ˜¯<code>void write(int b)</code>ï¼Œç­¾åå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">(<span class="type">int</span> b)</span> <span class="keyword">throws</span> IOException;</span><br></pre></td></tr></table></figure>
<p>â€‹
è¿™ä¸ªæ–¹æ³•ä¼š<strong>å†™å…¥ä¸€ä¸ªå­—èŠ‚åˆ°è¾“å‡ºæµ</strong>ã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶ä¼ å…¥çš„æ˜¯<code>int</code>å‚æ•°ï¼Œä½†åªä¼šå†™å…¥ä¸€ä¸ªå­—èŠ‚ï¼Œå³åªå†™å…¥<code>int</code>æœ€ä½8ä½è¡¨ç¤ºå­—èŠ‚çš„éƒ¨åˆ†ï¼ˆç›¸å½“äº<code>b &amp; 0xff</code>ï¼‰ã€‚</p>
<h4 id="flushæ–¹æ³•">1ã€Flushæ–¹æ³•</h4>
<p>â€‹
è¦ç‰¹åˆ«æ³¨æ„ï¼š<code>OutputStream</code>è¿˜æä¾›äº†ä¸€ä¸ª<code>flush()</code>æ–¹æ³•ï¼Œå®ƒçš„ç›®çš„æ˜¯<strong>å°†ç¼“å†²åŒºçš„å†…å®¹çœŸæ­£è¾“å‡ºåˆ°ç›®çš„åœ°ã€‚</strong></p>
<p>â€‹
ä¸ºä»€ä¹ˆè¦æœ‰<code>flush()</code>ï¼Ÿå› ä¸ºå‘ç£ç›˜ã€ç½‘ç»œå†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œå‡ºäºæ•ˆç‡çš„è€ƒè™‘ï¼Œæ“ä½œç³»ç»Ÿå¹¶ä¸æ˜¯è¾“å‡ºä¸€ä¸ªå­—èŠ‚å°±ç«‹åˆ»å†™å…¥åˆ°æ–‡ä»¶æˆ–è€…å‘é€åˆ°ç½‘ç»œï¼Œè€Œæ˜¯æŠŠè¾“å‡ºçš„å­—èŠ‚å…ˆæ”¾åˆ°å†…å­˜çš„ä¸€ä¸ªç¼“å†²åŒºé‡Œï¼ˆæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª<code>byte[]</code>æ•°ç»„ï¼‰ï¼Œç­‰åˆ°ç¼“å†²åŒºå†™æ»¡äº†ï¼Œå†ä¸€æ¬¡æ€§å†™å…¥æ–‡ä»¶æˆ–è€…ç½‘ç»œã€‚å¯¹äºå¾ˆå¤šIOè®¾å¤‡æ¥è¯´ï¼Œä¸€æ¬¡å†™ä¸€ä¸ªå­—èŠ‚å’Œä¸€æ¬¡å†™1000ä¸ªå­—èŠ‚ï¼ŒèŠ±è´¹çš„æ—¶é—´å‡ ä¹æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œ<strong>æ‰€ä»¥<code>OutputStream</code>æœ‰ä¸ª<code>flush()</code>æ–¹æ³•ï¼Œèƒ½å¼ºåˆ¶æŠŠç¼“å†²åŒºå†…å®¹è¾“å‡ºã€‚</strong></p>
<p>â€‹
<strong>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦è°ƒç”¨è¿™ä¸ª<code>flush()</code>æ–¹æ³•ï¼Œå› ä¸ºç¼“å†²åŒºå†™æ»¡äº†<code>OutputStream</code>ä¼šè‡ªåŠ¨è°ƒç”¨å®ƒï¼Œ</strong>å¹¶ä¸”ï¼Œåœ¨è°ƒç”¨<code>close()</code>æ–¹æ³•å…³é—­<code>OutputStream</code>ä¹‹å‰ï¼Œä¹Ÿä¼šè‡ªåŠ¨è°ƒç”¨<code>flush()</code>æ–¹æ³•ã€‚</p>
<p>â€‹
<strong>ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨è°ƒç”¨<code>flush()</code>æ–¹æ³•ã€‚ä¸¾ä¸ªæ —å­ï¼š</strong></p>
<p>â€‹
å°æ˜æ­£åœ¨å¼€å‘ä¸€æ¬¾åœ¨çº¿èŠå¤©è½¯ä»¶ï¼Œå½“ç”¨æˆ·è¾“å…¥ä¸€å¥è¯åï¼Œå°±é€šè¿‡<code>OutputStream</code>çš„<code>write()</code>æ–¹æ³•å†™å…¥ç½‘ç»œæµã€‚å°æ˜æµ‹è¯•çš„æ—¶å€™å‘ç°ï¼Œå‘é€æ–¹è¾“å…¥åï¼Œæ¥æ”¶æ–¹æ ¹æœ¬æ”¶ä¸åˆ°ä»»ä½•ä¿¡æ¯ï¼Œæ€ä¹ˆè‚¥å››ï¼Ÿ</p>
<p>â€‹
åŸå› å°±åœ¨äºå†™å…¥ç½‘ç»œæµæ˜¯å…ˆå†™å…¥å†…å­˜ç¼“å†²åŒºï¼Œç­‰ç¼“å†²åŒºæ»¡äº†æ‰ä¼šä¸€æ¬¡æ€§å‘é€åˆ°ç½‘ç»œã€‚å¦‚æœç¼“å†²åŒºå¤§å°æ˜¯4Kï¼Œåˆ™å‘é€æ–¹è¦æ•²å‡ åƒä¸ªå­—ç¬¦åï¼Œæ“ä½œç³»ç»Ÿæ‰ä¼šæŠŠç¼“å†²åŒºçš„å†…å®¹å‘é€å‡ºå»ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæ¥æ”¶æ–¹ä¼šä¸€æ¬¡æ€§æ”¶åˆ°å¤§é‡æ¶ˆæ¯ã€‚</p>
<p>â€‹
è§£å†³åŠæ³•å°±æ˜¯æ¯è¾“å…¥ä¸€å¥è¯åï¼Œç«‹åˆ»è°ƒç”¨<code>flush()</code>ï¼Œä¸ç®¡å½“å‰ç¼“å†²åŒºæ˜¯å¦å·²æ»¡ï¼Œå¼ºè¿«æ“ä½œç³»ç»ŸæŠŠç¼“å†²åŒºçš„å†…å®¹ç«‹åˆ»å‘é€å‡ºå»ã€‚</p>
<h4 id="å°†è‹¥å¹²ä¸ªå­—èŠ‚å†™å…¥æ–‡ä»¶æµ-ç¤ºä¾‹">2ã€å°†è‹¥å¹²ä¸ªå­—èŠ‚å†™å…¥æ–‡ä»¶æµ
ç¤ºä¾‹ï¼š</h4>
<p>â€‹
æˆ‘ä»¬ä»¥<code>FileOutputStream</code>ä¸ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•å°†è‹¥å¹²ä¸ªå­—èŠ‚å†™å…¥æ–‡ä»¶æµï¼š</p>
<p>â€‹
<strong>æ¯æ¬¡å†™å…¥ä¸€ä¸ªå­—èŠ‚éå¸¸éº»çƒ¦ï¼Œæ›´å¸¸è§çš„æ–¹æ³•æ˜¯ä¸€æ¬¡æ€§å†™å…¥è‹¥å¹²å­—èŠ‚ã€‚è¿™æ—¶ï¼Œå¯ä»¥ç”¨<code>OutputStream</code>æä¾›çš„é‡è½½æ–¹æ³•<code>void write(byte[])</code>æ¥å®ç°ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeFile</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">OutputStream</span> <span class="variable">output</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;out/readme.txt&quot;</span>);</span><br><span class="line">    output.write(<span class="string">&quot;Hello&quot;</span>.getBytes(<span class="string">&quot;UTF-8&quot;</span>)); <span class="comment">// Hello</span></span><br><span class="line">    output.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
å’Œ<code>InputStream</code>ä¸€æ ·ï¼Œä¸Šè¿°ä»£ç æ²¡æœ‰è€ƒè™‘åˆ°åœ¨å‘ç”Ÿå¼‚å¸¸çš„æƒ…å†µä¸‹å¦‚ä½•æ­£ç¡®åœ°å…³é—­èµ„æºã€‚å†™å…¥è¿‡ç¨‹ä¹Ÿä¼šç»å¸¸å‘ç”ŸIOé”™è¯¯ï¼Œä¾‹å¦‚ï¼Œç£ç›˜å·²æ»¡ï¼Œæ— æƒé™å†™å…¥ç­‰ç­‰ã€‚æˆ‘ä»¬éœ€è¦ç”¨<code>try(resource)</code>æ¥ä¿è¯<code>OutputStream</code>åœ¨æ— è®ºæ˜¯å¦å‘ç”ŸIOé”™è¯¯çš„æ—¶å€™éƒ½èƒ½å¤Ÿæ­£ç¡®åœ°å…³é—­ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeFile</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="keyword">try</span> (<span class="type">OutputStream</span> <span class="variable">output</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;out/readme.txt&quot;</span>)) &#123;</span><br><span class="line">        output.write(<span class="string">&quot;Hello&quot;</span>.getBytes(<span class="string">&quot;UTF-8&quot;</span>)); <span class="comment">// Hello</span></span><br><span class="line">    &#125; <span class="comment">// ç¼–è¯‘å™¨åœ¨æ­¤è‡ªåŠ¨ä¸ºæˆ‘ä»¬å†™å…¥finallyå¹¶è°ƒç”¨close()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="é˜»å¡-1">3ã€é˜»å¡</h4>
<p>å’Œ<code>InputStream</code>ä¸€æ ·ï¼Œ<code>OutputStream</code>çš„<code>write()</code>æ–¹æ³•ä¹Ÿæ˜¯é˜»å¡çš„ã€‚</p>
<h3 id="å…­æ–‡ä»¶æ‹·è´">å…­ã€æ–‡ä»¶æ‹·è´</h3>
<p>å…¶å®å°±æ˜¯ä¸€è¾¹è¯»æ–‡ä»¶ä¸€è¾¹å†™æ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(Stringp[] args)</span>&#123;</span><br><span class="line">	<span class="type">String</span> <span class="variable">srcPath</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">	<span class="type">String</span> <span class="variable">tgtPath</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">	<span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">	<span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">		fileInputStream = <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(srcPath);</span><br><span class="line">		fileOutputStream = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(tgtPath);</span><br><span class="line">		<span class="type">byte</span>[] buf = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];  <span class="comment">//å®šä¹‰ä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼Œæé«˜è¯»å–æ•ˆæœ</span></span><br><span class="line">		<span class="type">int</span> <span class="variable">readLen</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span>((readLen = fileInputStream.read(buf)) != -<span class="number">1</span>)&#123;</span><br><span class="line">			fileOutputStream.write(buf,<span class="number">0</span>,readLen); <span class="comment">//ä¸€å®šè¦æŒ‡æ˜è¯»å–é•¿åº¦</span></span><br><span class="line">			<span class="comment">// fileOutputStream.write(buf);  å¦‚æœä½¿ç”¨è¯¥æ–¹æ³•ä¼šå¼•å‘é”™è¯¯</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸ƒfilereaderå’Œfilewriter">ä¸ƒã€FileReaderå’ŒFileWriter</h3>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220811152647890.png" style="zoom:50%;" /></p>
<ul>
<li><p>FileWriterä½¿ç”¨åï¼Œå¿…é¡»è°ƒç”¨<code>close()</code>æˆ–è€…<code>flush()</code>ï¼Œå¦åˆ™å†™å…¥ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚close()æ–¹æ³•
ç­‰äº ä¸€ä¸ªflush() + å…³é—­æ–‡ä»¶</p></li>
<li><p>FileReaderå’ŒFileWriterä¸å…ˆå‰çš„å­—èŠ‚æµè¯»å–ã€å†™å…¥è¿‡ç¨‹ç±»ä¼¼ï¼Œåªä¸è¿‡è¯»å…¥çš„æ˜¯char[]å­—ç¬¦æµæ•°ç»„ã€‚</p></li>
<li><p>FileWriterçš„writeæ–¹æ³•ä¹Ÿå¯ä»¥ç›´æ¥å†™å…¥å­—ç¬¦ä¸²</p></li>
</ul>
<h3 id="å…«èŠ‚ç‚¹æµå’Œå¤„ç†æµåŠè®¾è®¡æ¨¡å¼">å…«ã€èŠ‚ç‚¹æµå’Œå¤„ç†æµåŠè®¾è®¡æ¨¡å¼ï¼š</h3>
<h4 id="èŠ‚ç‚¹æµå’Œå¤„ç†æµ">1ã€èŠ‚ç‚¹æµå’Œå¤„ç†æµ</h4>
<ul>
<li>èŠ‚ç‚¹æµå¯ä»¥ä»<strong>ä¸€ä¸ªç‰¹å®šçš„æ•°æ®æº</strong>è¯»å†™æ•°æ®ï¼Œå¦‚FileReaderã€FileWriter</li>
<li>å¤„ç†æµæ˜¯â€œè¿æ¥â€åœ¨å·²å­˜åœ¨çš„æµä¹‹ä¸Šã€‚</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220811164059830.png" /></p>
<ul>
<li>å¤„ç†æµï¼šæ¯”å¦‚è¯´BufferedReaderç±»ä¸­ï¼Œæœ‰å±æ€§Readerï¼Œå³å¯ä»¥å°è£…ä¸€ä¸ªèŠ‚ç‚¹æµã€‚è¯¥èŠ‚ç‚¹æµå¯ä»¥æ˜¯ä»»æ„çš„ï¼Œåªè¦æ˜¯Readerçš„å­ç±»ã€‚</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220811164655306.png" style="zoom:50%;" /></p>
<ul>
<li>æ€»ç»“ï¼š
<ul>
<li>1.èŠ‚ç‚¹æµæ˜¯åº•å±‚æµ/ä½çº§æµï¼Œç›´æ¥è·Ÿæ•°æ®æºç›¸æ¥ã€‚</li>
<li>2.å¤„ç†æµï¼ˆåŒ…è£…æµï¼‰<strong>åŒ…è£…èŠ‚ç‚¹æµ</strong>ï¼Œ<strong>æ—¢å¯ä»¥æ¶ˆé™¤ä¸åŒèŠ‚ç‚¹æµçš„å®ç°å·®å¼‚ï¼Œä¹Ÿå¯ä»¥æä¾›æ›´æ–¹ä¾¿çš„æ–¹æ³•æ¥å®Œæˆè¾“å…¥è¾“å‡ºã€‚</strong></li>
<li>3.å¤„ç†æµï¼ˆä¹Ÿå«åŒ…è£…æµï¼‰å¯¹èŠ‚ç‚¹æµè¿›è¡ŒåŒ…è£…ï¼Œä½¿ç”¨äº†ä¿®é¥°å™¨è®¾è®¡æ¨¡å¼ï¼Œä¸ä¼šç›´æ¥ä¸æ•°æ®æºç›¸è¿</li>
</ul></li>
</ul>
<h4 id="å¤„ç†æµçš„è®¾è®¡æ¨¡å¼">2ã€å¤„ç†æµçš„è®¾è®¡æ¨¡å¼ï¼š</h4>
<p>ä¼˜åŠ¿ï¼š</p>
<ul>
<li>æ€§èƒ½çš„æé«˜ï¼šä¸»è¦ä»¥å¢åŠ ç¼“å†²çš„æ–¹å¼æ¥æé«˜è¾“å…¥è¾“å‡ºçš„æ•ˆç‡ã€‚</li>
<li>æ“ä½œçš„ä¾¿æ·ï¼šå¤„ç†æµå¯èƒ½æä¾›äº†ä¸€ç³»åˆ—ä¾¿æ·çš„æ–¹æ³•æ¥ä¸€æ¬¡è¾“å…¥è¾“å‡ºå¤§æ‰¹é‡çš„æ•°æ®ï¼Œä½¿ç”¨æ›´åŠ çµæ´»æ–¹ä¾¿</li>
</ul>
<h3
id="ä¹bufferedreaderbufferedwriterbufferedæ‹·è´bufferedå­—èŠ‚å¤„ç†æµ">ä¹ã€BufferedReaderã€BufferedWriterï¼ŒBufferedæ‹·è´ï¼ŒBufferedå­—èŠ‚å¤„ç†æµ</h3>
<ul>
<li><p>æ³¨æ„ï¼šåœ¨å…³é—­å¤„ç†æµæ—¶ï¼Œåªéœ€è¦å…³é—­å¤–å±‚æµæ—¶å³å¯ã€‚</p></li>
<li><p><strong>BufferedReaderç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="string">&quot;e:\\a.java&quot;</span>;</span><br><span class="line"><span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(filePath));</span><br><span class="line">String line;</span><br><span class="line"><span class="keyword">while</span>((line = bufferedReader.readLine()) != <span class="literal">null</span>)&#123;</span><br><span class="line">    <span class="comment">//å¤„ç†line</span></span><br><span class="line">&#125;</span><br><span class="line">bufferedReader.close();</span><br></pre></td></tr></table></figure></li>
<li><p><strong>Bufferedæ‹·è´å®ä¾‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="string">&quot;e:\\a.java&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">destPath</span> <span class="operator">=</span> <span class="string">&quot;e:\\a2.java&quot;</span></span><br><span class="line"><span class="type">BufferedReader</span> <span class="variable">bufferedReader</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="type">BufferedWriter</span> <span class="variable">bufferedWriter</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    bufferedReader = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(filePath));</span><br><span class="line">    bufferedWriter = <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(destPath));</span><br><span class="line"> 	String line;</span><br><span class="line">    <span class="keyword">while</span>((line = bufferedReader.readLine()) != <span class="literal">null</span>)&#123;</span><br><span class="line">        bufferedWriter.write(line);</span><br><span class="line">        bufferedWriter.newLine();</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(bufferedReader != <span class="literal">null</span>) bufferedReader.close();</span><br><span class="line">	<span class="keyword">if</span>(bufferedWriter != <span class="literal">null</span>) bufferedWriter.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p><strong>Bufferedå­—èŠ‚å¤„ç†æµï¼šBufferedInputStream å’Œ
BufferedOutputStream</strong></p></li>
<li><p><img src="C:\Users\14012\AppData\Roaming\Typora\typora-user-images\image-20220811223030663.png" style="zoom:50%;" /></p>
<ul>
<li><p>BufferedInputStreamæ˜¯å­—èŠ‚æµï¼Œåœ¨åˆ›å»ºæ—¶ä¼šåˆ›å»ºä¸€ä¸ªå†…éƒ¨ç¼“å†²åŒºæ•°ç»„ï¼Œå…¶æ„é€ å‡½æ•°å¯ä»¥æ¥æ”¶ä»»ä½•ä¸€ä¸ªInputStreamå¯¹è±¡ã€‚</p></li>
<li><p>BufferedOutputStreamæ˜¯å­—èŠ‚æµï¼Œå®ç°ç¼“å†²çš„è¾“å‡ºæµï¼Œå¯ä»¥å°†å¤šä¸ªå­—èŠ‚å†™å…¥åº•å±‚è¾“å‡ºæµä¸­ï¼Œè€Œä¸å¿…å¯¹æ¯æ¬¡å­—èŠ‚å†™å…¥è°ƒç”¨åº•å±‚ç³»ç»Ÿï¼Œå…¶æ„é€ å‡½æ•°å¯ä»¥æ¥æ”¶ä»»ä½•ä¸€ä¸ªOutputStreamå¯¹è±¡ã€‚</p></li>
</ul></li>
<li><p><strong>å­—èŠ‚å¤„ç†æµçš„æ–‡ä»¶æ‹·è´ï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶æ‹·è´ï¼Œå¦‚éŸ³é¢‘ç­‰ï¼‰</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">String filePath = &quot;e:\\a.jpg&quot;;</span><br><span class="line">String destPath = &quot;e:\\a2.jpg&quot;</span><br><span class="line">BufferedInputStream bufferedInputStream = null;</span><br><span class="line">BufferedOutputStream bufferedOutputStream = null;</span><br><span class="line">try&#123;</span><br><span class="line">    bufferedInputStream = new BufferedInputStream(new FileInputStream(filePath));</span><br><span class="line">    bufferedOutputStream = new BufferedOutputStream(new FileInputStream(destPath));</span><br><span class="line"> 	byte[] buff = new byte[1024];</span><br><span class="line"> 	int readLen = 0;</span><br><span class="line">    while((readLen = bufferedInputStream.read(buff)) != -1)&#123;</span><br><span class="line">        bufferedOutputStream.write(buff,0,readLen);</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;catch(IOException e)&#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;finally&#123;</span><br><span class="line">    if(bufferedInputStream != null) bufferedInputStream.close();</span><br><span class="line">	if(bufferedOutputStream != null) bufferedOutputStream.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="åå¯¹è±¡æµ-objectinputstreamå’Œobjectoutputstream">åã€å¯¹è±¡æµ
ObjectInputStreamå’ŒObjectOutputStreamï¼š</h3>
<p>â€‹
åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼šåªæœ‰æŸå¯¹è±¡å®ç°å¦‚ä¸‹ä¸¤ä¸ªæ¥å£ä¹‹ä¸€ï¼Œæ‰èƒ½å¤Ÿè¿›è¡Œåºåˆ—åŒ–ã€‚</p>
<ul>
<li><p>Serializable è¿™æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œæ²¡æœ‰æ–¹æ³•</p></li>
<li><p>Externalizable
è¯¥æ¥å£æœ‰æ–¹æ³•éœ€è¦å®ç°ï¼Œå› æ­¤ä¸€èˆ¬å®ç°ä¸Šé¢çš„Serializableæ¥å£</p></li>
<li><p><strong>ObjectOutputStream</strong>æä¾›åºåˆ—åŒ–åŠŸèƒ½ï¼Œ<strong>ObjectInputStream</strong>æä¾›ååºåˆ—åŒ–åŠŸèƒ½ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220812210742720.png" style="zoom:67%;" /></p></li>
<li><p>åºåˆ—åŒ–å­˜å‚¨ç¤ºä¾‹ä»£ç </p>
<ul>
<li><p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220813090617046.png" alt="image-20220813090617046" style="zoom:67%;" /></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ObjectStreamTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="string">&quot;e:\\data.dat&quot;</span>;</span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(filePath));</span><br><span class="line">        oos.write(<span class="number">100</span>);</span><br><span class="line">        oos.writeObject(<span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;11&quot;</span>,<span class="number">12</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Dog</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ä¿å­˜ä¸‹æ¥çš„æ–‡ä»¶å¹¶ä¸æ˜¯ä»¥æ–‡æœ¬å½¢å¼å­˜åœ¨çš„ã€‚</p></li>
</ul></li>
<li><p>ååºåˆ—åŒ–ç¤ºä¾‹ä»£ç ï¼š<strong>è¯»å–ï¼ˆååºåˆ—åŒ–ï¼‰çš„é¡ºåºéœ€è¦å’Œä½ ä¿å­˜æ•°æ®ï¼ˆåºåˆ—åŒ–ï¼‰çš„é¡ºåºä¸€è‡´</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.slks.stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ObjectStreamTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="string">&quot;e:\\data.dat&quot;</span>;</span><br><span class="line">        <span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(filePath));</span><br><span class="line">        ois.read();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">readDog</span> <span class="operator">=</span> ois.readObject();</span><br><span class="line">        System.out.println(<span class="string">&quot;runtime class:&quot;</span> + readDog.getClass());</span><br><span class="line">        System.out.println(<span class="string">&quot;dog info:&quot;</span> + readDog);</span><br><span class="line">        <span class="comment">// readDogçš„ç¼–è¯‘ç±»å‹æ˜¯ Objectï¼Œè¿è¡Œç±»å‹æ˜¯Dog</span></span><br><span class="line">        <span class="comment">// å¦‚æœæˆ‘ä»¬å¸Œæœ›è°ƒç”¨Dogçš„æ–¹æ³•ï¼Œéœ€è¦å‘ä¸‹è½¬å‹</span></span><br><span class="line">        <span class="type">Dog</span> <span class="variable">newReadDog</span> <span class="operator">=</span> (Dog)readDog;</span><br><span class="line">        System.out.println(<span class="string">&quot;dog call:&quot;</span> + newReadDog.getName());</span><br><span class="line">        ois.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Dog</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;name:&quot;</span> + <span class="built_in">this</span>.name + <span class="string">&quot;age:&quot;</span> + <span class="built_in">this</span>.age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>å®ç°ç»†èŠ‚ï¼š</p>
<ul>
<li>1ï¼‰è¯»å†™é¡ºåºè¦ä¸€è‡´</li>
<li>2ï¼‰è¦æ±‚å®ç°åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–å¯¹è±¡ï¼Œéœ€è¦å®ç°Serializable2ï¼‰è¦æ±‚å®ç°åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–å¯¹è±¡ï¼Œéœ€è¦å®ç°Serializable</li>
<li>3ï¼‰åºåˆ—åŒ–çš„ç±»ä¸­å»ºè®®æ·»åŠ SerialVersionUIDï¼Œä¸ºäº†æé«˜ç‰ˆæœ¬çš„å…¼å®¹æ€§</li>
<li>4ï¼‰åºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œé»˜è®¤å°†é‡Œé¢æ‰€æœ‰å±æ€§éƒ½è¿›è¡Œåºåˆ—åŒ–ï¼Œä½†é™¤äº†staticæˆ–transientä¿®é¥°çš„æˆå‘˜</li>
<li>5ï¼‰åºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œè¦æ±‚é‡Œé¢å±æ€§çš„ç±»å‹ä¹Ÿéœ€è¦å®ç°åºåˆ—åŒ–æ¥å£6ï¼‰åºåˆ—åŒ–å…·å¤‡å¯ç»§æ‰¿æ€§ï¼Œä¹Ÿå°±æ˜¯å¦‚æœæŸç±»å·²ç»å®ç°äº†åºåˆ—åŒ–ï¼Œåˆ™å®ƒçš„æ‰€æœ‰å­ç±»ä¹Ÿå·²ç»é»˜è®¤å®ç°äº†åºåˆ—åŒ–</li>
</ul></li>
</ul>
<h3 id="åä¸€æ ‡å‡†è¾“å…¥è¾“å‡ºæµ">åä¸€ã€æ ‡å‡†è¾“å…¥è¾“å‡ºæµ</h3>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220813100329630.png" style="zoom:67%;" /></p>
<h3 id="åäºŒè½¬æ¢æµ-inputstreamreader-å’Œ-outputstreamwriter">åäºŒã€è½¬æ¢æµ
InputStreamReader å’Œ OutputStreamWriterï¼š</h3>
<p>â€‹ ç”¨äºå°†å­—èŠ‚æµè½¬æ¢æˆå­—ç¬¦æµã€‚</p>
<p>â€‹
é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯»å–æ–‡ä»¶æŒ‰ç…§utf-8ç¼–ç è¯»å–çš„ï¼Œå¦‚æœæ–‡ä»¶æœ¬èº«ä¸æ˜¯utf-8ç¼–ç çš„è¯ï¼Œè¯»å–åå¾ˆå®¹æ˜“å¯¼è‡´ä¹±ç çš„äº§ç”Ÿã€‚</p>
<p>â€‹
åœ¨è½¬æ¢è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥æŒ‡å®šå­—èŠ‚æµçš„ç¼–ç æ–¹å¼çš„ï¼Œç„¶åå°†å…¶æŒ‰ç…§ç¼–ç æ–¹å¼è½¬æ¢æˆå­—ç¬¦æµå³å¯æ¶ˆé™¤ä¹±ç çš„é—®é¢˜ã€‚</p>
<p>â€‹
å½“å¤„ç†çº¯æ–‡æœ¬æ•°æ®æ—¶ï¼Œå¦‚æœä½¿ç”¨å­—ç¬¦æµæ•ˆç‡æ›´é«˜ï¼Œå¹¶ä¸”å¯ä»¥æœ‰æ•ˆè§£å†³ä¸­æ–‡Sé—®é¢˜ï¼Œæ‰€ä»¥å»ºè®®å°†å­—èŠ‚æµè½¬æ¢æˆå­—ç¬¦æµ.å¯ä»¥åœ¨ä½¿ç”¨æ—¶æŒ‡å®šç¼–ç æ ¼å¼ï¼ˆæ¯”å¦‚
utf-8ï¼Œgbkï¼Œgb2312ï¼ŒISO8859-1ç­‰ï¼‰</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220813102535318.png" /></p>
<ul>
<li>æ¼”ç¤ºä»£ç ï¼šä½¿ç”¨InputStreamReader è½¬æ¢æµè§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InputStreamReader_</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> mainï¼ˆString[]argsï¼‰<span class="keyword">throws</span> FileNotFoundExceptionï¼ŒUnsupportedEncodingException&#123;</span><br><span class="line">		String filePath=<span class="string">&quot;e:\\a.txt&quot;</span>;  <span class="comment">// a.txtç¼–ç ä¸ºgbkï¼Œè€Œéutf-8</span></span><br><span class="line">		<span class="comment">//è§£è¯»</span></span><br><span class="line">        <span class="comment">//1.æŠŠFileInputStream è½¬æˆInputStreamReader//1.æŠŠFileInputStream è½¬æˆInputStreamReader</span></span><br><span class="line">        <span class="comment">//2.æŒ‡å®šç¼–ç gbk</span></span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">isr</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputstream</span>(filePath)ï¼Œ<span class="string">&quot;gbk&quot;</span>);</span><br><span class="line">        <span class="comment">//3.æŠŠInputstreamReaderä¼ å…¥BufferedReader</span></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(isr);</span><br><span class="line">		<span class="comment">//4.è¯»å–</span></span><br><span class="line">        String s=br.readLine();</span><br><span class="line">        System.out.printinï¼ˆ<span class="string">&quot;è¯»å–å†…å®¹=&quot;</span>+sï¼‰ï¼›	</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æŒ‰ç…§æŒ‡å®šç¼–ç æ–¹å¼ä¿å­˜æ–‡æœ¬æ–‡ä»¶ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OutputStreamWriter_</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> mainï¼ˆString[]argsï¼‰<span class="keyword">throws</span> IOException&#123;</span><br><span class="line">		String filePath=<span class="string">&quot;e:\\hsp.txt&quot;</span>;</span><br><span class="line">		string charSet=<span class="string">&quot;utf-8&quot;</span>;</span><br><span class="line">		<span class="type">OutputStreamWriter</span> <span class="variable">osw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(filePath),charSet);</span><br><span class="line">		osw.write(<span class="string">&quot;hiï¼ŒéŸ©é¡ºå¹³æ•™è‚²&quot;</span>);</span><br><span class="line">		osw.close()ï¼›</span><br><span class="line">		System.out.printin(<span class="string">&quot;æŒ‰ç…§&quot;</span>+charSet+<span class="string">&quot;ä¿å­˜æ–‡ä»¶æˆåŠŸ~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3
id="åä¸‰æ‰“å°æµprintsteamå’Œprintwriter">åä¸‰ã€æ‰“å°æµï¼šPrintSteamå’ŒPrintWriter</h3>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220813104318225.png" style="zoom:67%;" /></p>
<h3 id="åå››æ“ä½œzip">åå››ã€æ“ä½œZip</h3>
<p><code>ZipInputStream</code>æ˜¯ä¸€ç§<code>FilterInputStream</code>ï¼Œå®ƒå¯ä»¥ç›´æ¥è¯»å–zipåŒ…çš„å†…å®¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚    InputStream    â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">          â–²</span><br><span class="line">          â”‚</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚ FilterInputStream â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">          â–²</span><br><span class="line">          â”‚</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚InflaterInputStreamâ”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">          â–²</span><br><span class="line">          â”‚</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚  ZipInputStream   â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">          â–²</span><br><span class="line">          â”‚</span><br><span class="line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">â”‚  JarInputStream   â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure>
<h4 id="è¯»å–zipåŒ…">1ã€è¯»å–ZipåŒ…ï¼š</h4>
<p>â€‹
æˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ª<code>ZipInputStream</code>ï¼Œé€šå¸¸æ˜¯ä¼ å…¥ä¸€ä¸ª<code>FileInputStream</code>ä½œä¸ºæ•°æ®æºï¼Œç„¶åï¼Œå¾ªç¯è°ƒç”¨<code>getNextEntry()</code>ï¼Œç›´åˆ°è¿”å›<code>null</code>ï¼Œè¡¨ç¤ºzipæµç»“æŸã€‚</p>
<p>â€‹
ä¸€ä¸ª<code>ZipEntry</code>è¡¨ç¤ºä¸€ä¸ªå‹ç¼©æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¦‚æœæ˜¯å‹ç¼©æ–‡ä»¶ï¼Œæˆ‘ä»¬å°±ç”¨<code>read()</code>æ–¹æ³•ä¸æ–­è¯»å–ï¼Œç›´åˆ°è¿”å›<code>-1</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> (<span class="type">ZipInputStream</span> <span class="variable">zip</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(...))) &#123;</span><br><span class="line">    <span class="type">ZipEntry</span> <span class="variable">entry</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">while</span> ((entry = zip.getNextEntry()) != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> entry.getName();</span><br><span class="line">        <span class="keyword">if</span> (!entry.isDirectory()) &#123;</span><br><span class="line">            <span class="type">int</span> n;</span><br><span class="line">            <span class="keyword">while</span> ((n = zip.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">                ...</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å†™å…¥zipåŒ…">2ã€å†™å…¥ZipåŒ…ï¼š</h4>
<p><code>ZipOutputStream</code>æ˜¯ä¸€ç§<code>FilterOutputStream</code>ï¼Œå®ƒå¯ä»¥ç›´æ¥å†™å…¥å†…å®¹åˆ°zipåŒ…ã€‚æˆ‘ä»¬è¦å…ˆåˆ›å»ºä¸€ä¸ª<code>ZipOutputStream</code>ï¼Œé€šå¸¸æ˜¯åŒ…è£…ä¸€ä¸ª<code>FileOutputStream</code>ï¼Œç„¶åï¼Œæ¯å†™å…¥ä¸€ä¸ªæ–‡ä»¶å‰ï¼Œå…ˆè°ƒç”¨<code>putNextEntry()</code>ï¼Œç„¶åç”¨<code>write()</code>å†™å…¥<code>byte[]</code>æ•°æ®ï¼Œå†™å…¥å®Œæ¯•åè°ƒç”¨<code>closeEntry()</code>ç»“æŸè¿™ä¸ªæ–‡ä»¶çš„æ‰“åŒ…ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> (<span class="type">ZipOutputStream</span> <span class="variable">zip</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(...))) &#123;</span><br><span class="line">    File[] files = ...</span><br><span class="line">    <span class="keyword">for</span> (File file : files) &#123;</span><br><span class="line">        zip.putNextEntry(<span class="keyword">new</span> <span class="title class_">ZipEntry</span>(file.getName()));</span><br><span class="line">        zip.write(getFileDataAsBytes(file));</span><br><span class="line">        zip.closeEntry();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç æ²¡æœ‰è€ƒè™‘æ–‡ä»¶çš„ç›®å½•ç»“æ„ã€‚å¦‚æœè¦å®ç°ç›®å½•å±‚æ¬¡ç»“æ„ï¼Œ<code>new ZipEntry(name)</code>ä¼ å…¥çš„<code>name</code>è¦ç”¨ç›¸å¯¹è·¯å¾„ã€‚</p>
<h3 id="åäº”propertiesç±»é…ç½®æ–‡ä»¶">åäº”ã€Propertiesç±»ï¼šé…ç½®æ–‡ä»¶</h3>
<p>ä¸“é—¨ç”¨äºè¯»å–é…ç½®æ–‡ä»¶çš„é›†åˆç±»ï¼Œè¦æ±‚é…ç½®æ–‡ä»¶çš„æ ¼å¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">é”®=å€¼</span><br><span class="line">é”®=å€¼</span><br></pre></td></tr></table></figure>
<ul>
<li><p>é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// mysql.propertiesæ–‡ä»¶</span><br><span class="line">ip=192.168.0.1</span><br><span class="line">user=root</span><br><span class="line">psd=123456</span><br></pre></td></tr></table></figure></li>
<li><p>Propertiesç±»å¯¹è±¡å¸¸ç”¨æ–¹æ³•</p>
<ul>
<li><p>load</p></li>
<li><p>list</p></li>
<li><p>getProperty</p></li>
<li><p>setProperty</p></li>
<li><p>store:
å°†Propertiesä¸­çš„é”®å€¼å¯¹å­˜å‚¨åˆ°é…ç½®æ–‡ä»¶ï¼Œä¸­æ–‡ä¼šå­˜æˆunicodeç¼–ç </p></li>
</ul></li>
<li><p>Propertiesç±»è¿›è¡Œè¯»å–ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//1.åˆ›å»ºPropertieså¯¹è±¡</span><br><span class="line">Properties properties =new Properties();</span><br><span class="line">//2.åŠ è½½æŒ‡å®šé…ç½®æ–‡ä»¶</span><br><span class="line">properties.load(new FileReader(&quot;src\\mysqL.properties&quot;));</span><br><span class="line">//3.æŠŠk-væ˜¾ç¤ºæ§åˆ¶å°</span><br><span class="line">properties.list(System.out);</span><br><span class="line">//4.æ ¹æ®kè·å–å¯¹åº”çš„å€¼</span><br><span class="line">properties.getProperty(&quot;user&quot;);</span><br></pre></td></tr></table></figure></li>
<li><p>Propertiesè¿›è¡Œæ–‡ä»¶çš„åˆ›å»ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Properties properties = new Properties();</span><br><span class="line">//åˆ›å»º</span><br><span class="line">properties.setProperty(&quot;charset&quot;,&quot;utf8&quot;);</span><br><span class="line">properties.setProperty(&quot;user&quot;,&quot;slks&quot;);</span><br><span class="line">//å­˜å‚¨æ–‡ä»¶</span><br><span class="line">properties.store(new FileOutputStream(&quot;mysql.properties&quot;),null);  //ç¬¬äºŒä¸ªå‚æ•°ä»£è¡¨ä¸€ä¸ªæ³¨é‡Š</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>æ³¨æ„ï¼šPropertiesçš„çˆ¶ç±»æ˜¯HashTableï¼Œå…¶åº•å±‚å°±æ˜¯Hashtable</p></li>
</ul>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaå…¥é—¨ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>2.1 è¿›ç¨‹ä¸çº¿ç¨‹çš„åŸºæœ¬æ¦‚å¿µ</title>
    <url>/2022/03/14/32aa5a2632ac/</url>
    <content><![CDATA[<p>ç¬”è®°è¯¾ç¨‹è§†é¢‘ï¼šhttps://www.bilibili.com/video/BV1YE411D7nH?p=12</p>
<h3 id="ä¸€è¿›ç¨‹çš„å®šä¹‰ç»„æˆå’Œç»„ç»‡æ–¹å¼">ä¸€ã€è¿›ç¨‹çš„å®šä¹‰ã€ç»„æˆå’Œç»„ç»‡æ–¹å¼</h3>
<h4 id="è¿›ç¨‹çš„ç”±æ¥">1ã€è¿›ç¨‹çš„ç”±æ¥ï¼š</h4>
<p>ç¨‹åºæœ¬èº«å…¶å®å°±æ˜¯ä¸€ä¸ªæŒ‡ä»¤åºåˆ—ã€‚</p>
<p>æ—©æœŸçš„è®¡ç®—æœºåªæ”¯æŒå•é“ç¨‹åºï¼Œç¨‹åºè¿è¡Œæ—¶ï¼Œå†…å­˜ä¸­ä¼šåˆ†é…ä¸¤å—åŒºåŸŸï¼š</p>
<ul>
<li>ç¨‹åºæ®µï¼šç¨‹åºçš„ä»£ç æ”¾åœ¨ç¨‹åºæ®µå†…</li>
<li>æ•°æ®æ®µï¼šç¨‹åºè¿è¡Œè¿‡ç¨‹å¤„ç†çš„æ•°æ®æ”¾åœ¨æ•°æ®æ®µå†…</li>
</ul>
<p>â€‹ å¼•å…¥å¤šé“ç¨‹åºæŠ€æœ¯åï¼Œå†…å­˜ä¸­éœ€è¦å­˜æ”¾å¤šé“ç¨‹åºï¼š</p>
<p>â€‹
<strong>ä¸ºæ–¹ä¾¿æ“ä½œç³»ç»Ÿç®¡ç†ï¼Œå®Œæˆä¸ªç¨‹åºå¹¶å‘æ‰§è¡Œ</strong>ï¼Œæ•…è€Œæ“ä½œç³»ç»Ÿä¸ºæ¯ä¸ªè¿è¡Œçš„ç¨‹åºé…ç½®ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œè¢«ç§°ä¸º<strong>è¿›ç¨‹æ§åˆ¶å—ï¼ˆPCBï¼‰</strong>ï¼Œç”¨äºæè¿°è¿›ç¨‹çš„å„ç§ä¿¡æ¯ï¼ˆæ¯”å¦‚è¯¥è¿›ç¨‹ç¨‹åºä»£ç å­˜æ”¾ä½ç½®ç­‰ï¼‰ã€‚</p>
<h4 id="è¿›ç¨‹çš„å®šä¹‰">2ã€è¿›ç¨‹çš„å®šä¹‰ï¼š</h4>
<p>â€‹
<strong>PCBã€ç¨‹åºæ®µã€æ•°æ®æ®µ</strong>ä¸‰éƒ¨åˆ†æ„æˆäº†<strong>è¿›ç¨‹å®ä½“</strong>ã€‚<strong>æ‰€è°“åˆ›å»ºè¿›ç¨‹ï¼Œå®è´¨ä¸Šæ˜¯åˆ›å»ºè¿›ç¨‹å®ä½“ä¸­çš„PCBï¼›</strong>è€Œæ’¤é”€è¿›ç¨‹ï¼Œå®è´¨ä¸Šæ˜¯æ’¤é”€è¿›ç¨‹å®ä½“ä¸­çš„PCBã€‚</p>
<p>â€‹ PCBæ˜¯è¿›ç¨‹å­˜åœ¨çš„å”¯ä¸€æ ‡å¿—ã€‚</p>
<p>â€‹
å¼•å…¥è¿›ç¨‹å®ä½“çš„æ¦‚å¿µåï¼Œå¯æŠŠè¿›ç¨‹å®šä¹‰ä¸ºï¼š<strong>è¿›ç¨‹æ˜¯è¿›ç¨‹å®ä½“çš„è¿è¡Œè¿‡ç¨‹ï¼Œæ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½ã€‚</strong>æ³¨ï¼šä¸¥æ ¼æ¥è¯´ï¼Œè¿›ç¨‹å®ä½“å’Œè¿›ç¨‹å¹¶ä¸ä¸€æ ·ï¼Œè¿›ç¨‹å®ä½“æ˜¯é™æ€çš„ï¼Œè¿›ç¨‹åˆ™æ˜¯åŠ¨æ€çš„ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220314212804178.png" style="zoom:50%;" /></p>
<h4 id="è¿›ç¨‹ç»„æˆ">3ã€è¿›ç¨‹ç»„æˆï¼š</h4>
<h5 id="è¿›ç¨‹ç”±ä»¥ä¸‹ä¸‰éƒ¨åˆ†ç»„æˆ">1ï¼‰è¿›ç¨‹ç”±ä»¥ä¸‹ä¸‰éƒ¨åˆ†ç»„æˆï¼š</h5>
<ul>
<li>PCBï¼šè¿›ç¨‹çš„ç®¡ç†è€…æ‰€éœ€çš„æ•°æ®éƒ½åœ¨PCBä¸­</li>
<li>ç¨‹åºæ®µï¼šå­˜æ”¾è¦æ‰§è¡Œçš„ä»£ç </li>
<li>æ•°æ®æ®µï¼šå­˜æ”¾ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å¤„ç†çš„å„ç§æ•°æ®</li>
</ul>
<h5 id="pcbç»“æ„ä½“ä¸­åŒ…å«å¦‚ä¸‹å†…å®¹">2ï¼‰PCBç»“æ„ä½“ä¸­åŒ…å«å¦‚ä¸‹å†…å®¹ï¼š</h5>
<ul>
<li>è¿›ç¨‹æè¿°ä¿¡æ¯
<ul>
<li>è¿›ç¨‹æ ‡è¯†ç¬¦PID</li>
<li>ç”¨æˆ·æ ‡è¯†ç¬¦UID</li>
</ul></li>
<li>è¿›ç¨‹æ§åˆ¶å’Œç®¡ç†ä¿¡æ¯
<ul>
<li>è¿›ç¨‹å½“å‰çŠ¶æ€</li>
<li>è¿›ç¨‹ä¼˜å…ˆçº§</li>
</ul></li>
<li>èµ„æºåˆ†é…æ¸…å•
<ul>
<li>ç¨‹åºæ®µæŒ‡é’ˆ</li>
<li>æ•°æ®æ®µæŒ‡é’ˆ</li>
<li>é”®ç›˜ã€é¼ æ ‡</li>
</ul></li>
<li>å¤„ç†æœºç›¸å…³ä¿¡æ¯
<ul>
<li>å„ç§å¯„å­˜å™¨çš„å€¼</li>
</ul></li>
</ul>
<h4 id="è¿›ç¨‹çš„ç»„ç»‡å¤šä¸ªè¿›ç¨‹é—´">4ã€è¿›ç¨‹çš„ç»„ç»‡ï¼šï¼ˆå¤šä¸ªè¿›ç¨‹é—´ï¼‰</h4>
<h5 id="é“¾æ¥æ–¹å¼">1ï¼‰é“¾æ¥æ–¹å¼</h5>
<p>æŒ‰ç…§è¿›ç¨‹çŠ¶æ€å°†PCBåˆ†ä¸ºå¤šä¸ªé˜Ÿåˆ—ï¼Œæ“ä½œç³»ç»ŸæŒæœ‰æŒ‡å‘å„ä¸ªé˜Ÿåˆ—çš„æŒ‡é’ˆ</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220314221020998.png" alt="è¿›ç¨‹ç»„ç»‡çš„é“¾æ¥æ–¹å¼" style="zoom: 50%;" /></p>
<h5 id="ç´¢å¼•æ–¹å¼">2ï¼‰ç´¢å¼•æ–¹å¼</h5>
<p>â€‹
æ ¹æ®è¿›ç¨‹çŠ¶æ€çš„ä¸åŒï¼Œå»ºç«‹å‡ å¼ ç´¢å¼•è¡¨ï¼Œæ“ä½œç³»ç»ŸæŒæœ‰æŒ‡å‘å„ä¸ªç´¢å¼•è¡¨çš„æŒ‡é’ˆ</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220314221055019.png" alt="è¿›ç¨‹ç»„ç»‡çš„ç´¢å¼•æ–¹å¼" style="zoom:50%;" /></p>
<h4 id="è¿›ç¨‹çš„ç‰¹å¾">5ã€è¿›ç¨‹çš„ç‰¹å¾ï¼š</h4>
<ul>
<li><strong>åŠ¨æ€æ€§ï¼ˆæœ€åŸºæœ¬ç‰¹å¾ï¼‰</strong>ï¼šè¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯åŠ¨æ€åœ°äº§ç”Ÿã€å˜åŒ–å’Œæ¶ˆäº¡çš„</li>
<li><strong>å¹¶å‘æ€§ï¼š</strong>å†…å­˜ä¸­æœ‰å¤šä¸ªè¿›ç¨‹å®ä½“ï¼Œå„è¿›ç¨‹å¯å¹¶å‘æ‰§è¡Œ</li>
<li><strong>ç‹¬ç«‹æ€§ï¼š</strong>è¿›ç¨‹æ˜¯èƒ½ç‹¬ç«‹è¿è¡Œã€ç‹¬ç«‹è·å¾—èµ„æºã€ç‹¬ç«‹æ¥å—è°ƒåº¦çš„åŸºæœ¬å•ä½</li>
<li><strong>å¼‚æ­¥æ€§ï¼š</strong>å„è¿›ç¨‹æŒ‰å„è‡ªç‹¬ç«‹çš„ã€ä¸å¯é¢„çŸ¥çš„é€Ÿåº¦å‘å‰æ¨è¿›ï¼Œæ“ä½œç³»ç»Ÿè¦æä¾›â€œè¿›ç¨‹åŒæ­¥æœºåˆ¶"æ¥è§£å†³å¼‚æ­¥é—®é¢˜ã€‚å¼‚æ­¥æ€§å¯èƒ½ä¼šå¯¼è‡´å¹¶å‘ç¨‹åºæ‰§è¡Œç»“æœçš„ä¸ç¡®å®šæ€§ã€‚</li>
<li><strong>ç»“æ„æ€§ï¼š</strong>æ¯ä¸ªè¿›ç¨‹éƒ½ä¼šé…ç½®ä¸€ä¸ªPCBã€‚ç»“æ„ä¸Šçœ‹ï¼Œè¿›ç¨‹ç”±ç¨‹åºæ®µã€æ•°æ®æ®µã€PCBç»„æˆ</li>
</ul>
<h3 id="äºŒè¿›ç¨‹çš„çŠ¶æ€å’Œè½¬æ¢">äºŒã€è¿›ç¨‹çš„çŠ¶æ€å’Œè½¬æ¢</h3>
<h4 id="è¿›ç¨‹çš„ä¸‰ç§åŸºæœ¬çŠ¶æ€">1ã€è¿›ç¨‹çš„ä¸‰ç§åŸºæœ¬çŠ¶æ€ï¼š</h4>
<h5
id="è¿è¡Œæ€å ç”¨cpuå¹¶åœ¨cpuä¸Šè¿è¡Œ">1ï¼‰è¿è¡Œæ€ï¼šå ç”¨CPUï¼Œå¹¶åœ¨CPUä¸Šè¿è¡Œã€‚</h5>
<p>â€‹
æ³¨æ„ï¼šå•æ ¸å¤„ç†æœºç¯å¢ƒä¸‹ï¼Œæ¯ä¸€æ—¶åˆ»æœ€å¤šè§æœ‰ä¸€ä¸ªè¿›ç¨‹å¤„äºè¿è¡Œæ€ã€‚ï¼ˆåŒæ ¸ç¯å¢ƒä¸‹å¯ä»¥åŒæ—¶æœ‰ä¸¤ä¸ªè¿›ç¨‹å¤„äºè¿</p>
<p>è¡Œæ€ï¼‰ã€‚</p>
<h5
id="å°±ç»ªæ€å·²ç»å…·å¤‡è¿è¡Œæ¡ä»¶ä½†ç”±äºæ²¡æœ‰ç©ºé—²cpuè€Œæš‚æ—¶ä¸èƒ½è¿è¡Œ">2ï¼‰å°±ç»ªæ€ï¼šå·²ç»å…·å¤‡è¿è¡Œæ¡ä»¶ï¼Œä½†ç”±äºæ²¡æœ‰ç©ºé—²CPUï¼Œè€Œæš‚æ—¶ä¸èƒ½è¿è¡Œ</h5>
<p>â€‹
è¿›ç¨‹å·²ç»æ‹¥æœ‰äº†é™¤å¤„ç†æœºä¹‹å¤–æ‰€æœ‰éœ€è¦çš„èµ„æºï¼Œä¸€æ—¦è·å¾—å¤„ç†æœºï¼Œå³å¯ç«‹å³è¿›å…¥è¿è¡Œæ€å¼€å§‹è¿è¡Œã€‚
å³ï¼šä¸‡äº‹ä¿±å¤‡ï¼Œåªæ¬ CPUå³ï¼šä¸‡äº‹ä¿±å¤‡ï¼Œåªæ¬ CPU</p>
<h5
id="é˜»å¡æ€å› ç­‰å¾…æŸä¸€äº‹ä»¶è€Œæš‚æ—¶ä¸èƒ½è¿è¡Œ">3ï¼‰é˜»å¡æ€ï¼šå› ç­‰å¾…æŸä¸€äº‹ä»¶è€Œæš‚æ—¶ä¸èƒ½è¿è¡Œ</h5>
<p>â€‹
å¦‚ï¼šç­‰å¾…æ“ä½œç³»ç»Ÿåˆ†é…æ‰“å°æœºã€ç­‰å¾…è¯»ç£ç›˜æ“ä½œçš„ç»“æœã€‚CPUæ˜¯è®¡ç®—æœºä¸­æœ€æ˜‚è´µçš„éƒ¨ä»¶ï¼Œä¸ºäº†æé«˜CPUçš„åˆ©ç”¨ç‡ï¼Œéœ€è¦å…ˆå°†å…¶ä»–è¿›ç¨‹éœ€è¦çš„èµ„æºåˆ†é…åˆ°ä½ï¼Œæ‰èƒ½å¾—åˆ°CPUçš„æœåŠ¡</p>
<h4 id="è¿›ç¨‹çš„å¦å¤–ä¸¤ç§çŠ¶æ€">2ã€è¿›ç¨‹çš„å¦å¤–ä¸¤ç§çŠ¶æ€ï¼š</h4>
<h5
id="åˆ›å»ºæ€è¿›ç¨‹æ­£åœ¨è¢«åˆ›å»ºæ“ä½œç³»ç»Ÿä¸ºè¿›ç¨‹åˆ†é…èµ„æºåˆå§‹åŒ–pcbè¿›ç¨‹æ­£åœ¨è¢«åˆ›å»ºæ“ä½œç³»ç»Ÿä¸ºè¿›ç¨‹åˆ†é…èµ„æºåˆå§‹åŒ–pcb">1ï¼‰åˆ›å»ºæ€ï¼šè¿›ç¨‹æ­£åœ¨è¢«åˆ›å»ºï¼Œæ“ä½œç³»ç»Ÿä¸ºè¿›ç¨‹åˆ†é…èµ„æºã€åˆå§‹åŒ–PCBè¿›ç¨‹æ­£åœ¨è¢«åˆ›å»ºï¼Œæ“ä½œç³»ç»Ÿä¸ºè¿›ç¨‹åˆ†é…èµ„æºã€åˆå§‹åŒ–PCB</h5>
<p>â€‹
æ“ä½œç³»ç»Ÿéœ€è¦å®Œæˆåˆ›å»ºè¿›ç¨‹ã€‚æ“ä½œç³»ç»Ÿä¸ºè¯¥è¿›ç¨‹åˆ†é…æ‰€éœ€çš„å†…å­˜ç©ºé—´ç­‰ç³»ç»Ÿèµ„æºï¼Œå¹¶ä¸ºå…¶åˆ›å»ºã€åˆå§‹åŒ–PCBï¼ˆå¦‚ï¼šä¸ºè¿›ç¨‹åˆ†é…PIDï¼‰</p>
<h5
id="ç»ˆæ­¢æ€è¿›ç¨‹æ­£åœ¨ä»ç³»ç»Ÿä¸­æ’¤é”€æ“ä½œç³»ç»Ÿä¼šå›æ”¶è¿›ç¨‹æ‹¥æœ‰çš„èµ„æºæ’¤é”€pcbè¿›ç¨‹æ­£åœ¨ä»ç³»ç»Ÿä¸­æ’¤é”€æ“ä½œç³»ç»Ÿä¼šå›æ”¶è¿›ç¨‹æ‹¥æœ‰çš„èµ„æºæ’¤é”€pcb">2ï¼‰ç»ˆæ­¢æ€ï¼šè¿›ç¨‹æ­£åœ¨ä»ç³»ç»Ÿä¸­æ’¤é”€ï¼Œæ“ä½œç³»ç»Ÿä¼šå›æ”¶è¿›ç¨‹æ‹¥æœ‰çš„èµ„æºã€æ’¤é”€PCBè¿›ç¨‹æ­£åœ¨ä»ç³»ç»Ÿä¸­æ’¤é”€ï¼Œæ“ä½œç³»ç»Ÿä¼šå›æ”¶è¿›ç¨‹æ‹¥æœ‰çš„èµ„æºã€æ’¤é”€PCB</h5>
<p>â€‹
è¿›ç¨‹è¿è¡Œç»“æŸï¼ˆæˆ–è€…ç”±äºbugå¯¼è‡´è¿›ç¨‹æ— æ³•ç»§ç»­æ‰§è¡Œä¸‹å»ï¼Œæ¯”å¦‚æ•°ç»„è¶Šç•Œé”™è¯¯ï¼‰ï¼Œéœ€è¦æ’¤é”€è¿›ç¨‹ã€‚æ“ä½œç³»ç»Ÿéœ€è¦å®Œæˆæ’¤é”€è¿›ç¨‹ç›¸å…³çš„å·¥ä½œã€‚å®Œæˆå°†åˆ†é…ç»™è¿›ç¨‹çš„èµ„æºå›æ”¶ï¼Œæ’¤é”€è¿›ç¨‹PCBç­‰å·¥ä½œ</p>
<h4 id="è¿›ç¨‹çŠ¶æ€çš„è½¬æ¢">2ã€è¿›ç¨‹çŠ¶æ€çš„è½¬æ¢ï¼š</h4>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220314223023656.png"
alt="è¿›ç¨‹çŠ¶æ€è½¬æ¢å›¾" />
<figcaption aria-hidden="true">è¿›ç¨‹çŠ¶æ€è½¬æ¢å›¾</figcaption>
</figure>
<ul>
<li><p>è¿è¡Œæ€â†’é˜»å¡æ€æ˜¯ä¸€ç§è¿›ç¨‹è‡ªèº«åšå‡ºçš„<strong>ä¸»åŠ¨è¡Œä¸º</strong></p></li>
<li><p>é˜»å¡æ€â†’å°±ç»ªæ€æ˜¯ä¸æ˜¯è¿›ç¨‹è‡ªèº«èƒ½æ§åˆ¶çš„ï¼Œæ˜¯ä¸€ç§<strong>è¢«åŠ¨è¡Œä¸º</strong>ã€‚</p></li>
<li><p>æ³¨æ„ï¼š<strong>ä¸èƒ½ç”±é˜»å¡æ€ç›´æ¥è½¬æ¢ä¸ºè¿è¡Œæ€</strong>ï¼Œ<strong>ä¹Ÿä¸èƒ½ç”±å°±ç»ªæ€ç›´æ¥è½¬æ¢ä¸ºé˜»å¡æ€</strong>ï¼ˆå› ä¸ºè¿›å…¥é˜»å¡æ€æ˜¯è¿›ç¨‹ä¸»åŠ¨è¯·æ±‚çš„ï¼Œå¿…ç„¶éœ€è¦è¿›ç¨‹åœ¨è¿è¡Œæ—¶æ‰èƒ½å‘å‡ºè¿™ç§è¯·æ±‚ï¼‰</p></li>
</ul>
<h3 id="ä¸‰è¿›ç¨‹æ§åˆ¶">ä¸‰ã€è¿›ç¨‹æ§åˆ¶</h3>
<h4 id="ä»€ä¹ˆæ˜¯è¿›ç¨‹æ§åˆ¶">1ã€ä»€ä¹ˆæ˜¯è¿›ç¨‹æ§åˆ¶ï¼š</h4>
<p>â€‹
è¿›ç¨‹æ§åˆ¶çš„ä¸»è¦åŠŸèƒ½æ˜¯å¯¹ç³»ç»Ÿä¸­çš„æ‰€æœ‰è¿›ç¨‹å®æ–½æœ‰æ•ˆçš„ç®¡ç†ï¼Œå®ƒå…·æœ‰åˆ›å»ºæ–°è¿›ç¨‹ã€æ’¤é”€å·²æœ‰è¿›ç¨‹ã€å®ç°è¿›ç¨‹çŠ¶æ€è½¬æ¢ç­‰åŠŸèƒ½ã€‚</p>
<h4 id="å¦‚ä½•å®ç°è¿›ç¨‹æ§åˆ¶">2ã€å¦‚ä½•å®ç°è¿›ç¨‹æ§åˆ¶ï¼š</h4>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220314223828760.png" style="zoom:50%;" /></p>
<ul>
<li>åˆ›å»ºè¿›ç¨‹ï¼šéœ€è¦åˆå§‹åŒ–PCBã€åˆ†é…ç³»ç»Ÿèµ„æº</li>
<li>åˆ›å»ºæ€â†’å°±ç»ªæ€ï¼šéœ€ä¿®æ”¹PCBå†…å®¹å’Œç›¸åº”é˜Ÿåˆ—</li>
<li>å°±ç»ªæ€â†’è¿è¡Œæ€ï¼šéœ€æ¢å¤è¿›ç¨‹è¿è¡Œç¯å¢ƒã€ä¿®æ”¹PCBå†…å®¹å’Œç›¸åº”é˜Ÿåˆ—</li>
<li>è¿è¡Œæ€â†’é˜»å¡æ€ï¼šéœ€ä¿å­˜è¿›ç¨‹è¿è¡Œç¯å¢ƒã€ä¿®æ”¹PCBå†…å®¹å’Œç›¸åº”é˜Ÿåˆ—</li>
<li>é˜»å¡æ€â†’å°±ç»ªæ€ï¼šéœ€ä¿®æ”¹PCBå†…å®¹å’Œç›¸åº”é˜Ÿåˆ—ã€‚å¦‚æœç­‰å¾…çš„æ˜¯èµ„æºï¼Œåˆ™è¿˜éœ€ä¸ºè¿›ç¨‹åˆ†é…ç³»ç»Ÿèµ„æº</li>
<li>è¿è¡Œæ€â†’å°±ç»ªæ€ï¼šï¼ˆè¿›ç¨‹åˆ‡æ¢ï¼‰éœ€ä¿å­˜è¿›ç¨‹è¿è¡Œç¯å¢ƒã€ä¿®æ”¹PCBå†…å®¹å’Œç›¸åº”é˜Ÿåˆ—</li>
<li>è¿è¡Œæ€â†’ç»ˆæ­¢æ€ï¼šéœ€å›æ”¶è¿›ç¨‹æ‹¥æœ‰çš„èµ„æºï¼Œæ’¤é”€PCBçš„èµ„æºï¼Œæ’¤é”€PCB</li>
</ul>
<p>â€‹
ä¸ºäº†ä½¿å¾—è¿›ç¨‹çŠ¶æ€åˆ‡æ¢ä¸­ï¼Œæ•°æ®å…·æœ‰ä¸€è‡´æ€§ï¼ˆç±»ä¼¼äºäº‹åŠ¡çš„æ¦‚å¿µï¼‰ï¼Œç”¨<strong>åŸè¯­</strong>å®ç°è¿›ç¨‹æ§åˆ¶ã€‚åŸè¯­çš„ç‰¹ç‚¹æ˜¯æ‰§è¡ŒæœŸé—´ä¸å…è®¸ä¸­æ–­ï¼Œåªèƒ½ä¸€æ°”å‘µæˆã€‚</p>
<p><strong>è¿™ç§ä¸å¯è¢«ä¸­æ–­çš„æ“ä½œå³åŸå­æ“ä½œã€‚</strong></p>
<p><strong>åŸè¯­é‡‡ç”¨â€œå…³ä¸­æ–­æŒ‡ä»¤â€å’Œâ€œå¼€ä¸­æ–­æŒ‡ä»¤â€å®ç°ï¼Œå¦‚ä¸‹æ‰€ç¤º</strong>ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220314224013167.png" alt="" style="zoom: 67%;" /></p>
<p>â€‹
å½“åœ¨å…³ä¸­æ–­æŒ‡ä»¤æ‰§è¡Œåï¼Œå¦‚æœç³»ç»Ÿæ”¶åˆ°å¤–éƒ¨ä¸­æ–­ä¿¡å·ï¼Œæ­¤æ—¶ä¼šå°†è¯¥ä¿¡å·è½¬è‡³å¼€ä¸­æ–­æŒ‡ä»¤ç»“æŸåå†è¿›è¡Œå¤„ç†ï¼Œå³å†å¼€ä¸­æ–­æŒ‡ä»¤æ‰§è¡Œç»“æŸåï¼Œæ‰ä¼šå¯åŠ¨ä¸­æ–­å¤„ç†ç¨‹åºã€‚å¦‚æ­¤ï¼ŒåŸè¯­éƒ¨åˆ†çš„ä»£ç å°±ä¸ä¼šè¢«æ‰“æ–­æ‰§è¡Œã€‚</p>
<p>â€‹
æ˜¾ç„¶ï¼Œ<strong>å…³/å¼€ä¸­æ–­æŒ‡ä»¤çš„æƒé™éå¸¸å¤§ï¼Œå¿…ç„¶æ˜¯åªå…è®¸åœ¨æ ¸å¿ƒæ€ä¸‹æ‰§è¡Œçš„ç‰¹æƒæŒ‡ä»¤</strong></p>
<p>â€‹</p>
<h4 id="åŸè¯­çš„å…·ä½“æ“ä½œ">3ã€åŸè¯­çš„å…·ä½“æ“ä½œï¼š</h4>
<h5
id="è¿›ç¨‹æ§åˆ¶ä¼šå¯¼è‡´è¿›ç¨‹çŠ¶æ€çš„è½¬æ¢æ— è®ºå“ªä¸ªåŸè¯­è¦åšçš„æ— éä¸‰ç±»äº‹æƒ…">è¿›ç¨‹æ§åˆ¶ä¼šå¯¼è‡´è¿›ç¨‹çŠ¶æ€çš„è½¬æ¢ã€‚æ— è®ºå“ªä¸ªåŸè¯­ï¼Œè¦åšçš„æ— éä¸‰ç±»äº‹æƒ…ï¼š</h5>
<ul>
<li>1.æ›´æ–°PCBä¸­çš„ä¿¡æ¯ï¼ˆå¦‚ä¿®æ”¹è¿›ç¨‹çŠ¶æ€æ ‡å¿—ã€å°†è¿è¡Œç¯å¢ƒä¿å­˜åˆ°PCBã€ä»PCBæ¢å¤è¿è¡Œç¯å¢ƒï¼‰
<ul>
<li>a.æ‰€æœ‰çš„è¿›ç¨‹æ§åˆ¶åŸè¯­ä¸€å®šéƒ½ä¼šä¿®æ”¹è¿›ç¨‹çŠ¶æ€æ ‡å¿—</li>
<li>b.å‰¥å¤ºå½“å‰è¿è¡Œè¿›ç¨‹çš„CPUä½¿ç”¨æƒå¿…ç„¶éœ€è¦ä¿å­˜å…¶è¿è¡Œç¯å¢ƒ</li>
<li>c.æŸè¿›ç¨‹å¼€å§‹è¿è¡Œå‰å¿…ç„¶è¦æ¢å¤æœŸè¿è¡Œç¯å¢ƒ</li>
</ul></li>
<li>2.å°†PCBæ’å…¥åˆé€‚çš„é˜Ÿåˆ—</li>
<li>3.åˆ†é…/å›æ”¶èµ„æº</li>
</ul>
<h5 id="åˆ›å»ºåŸè¯­æ— åˆ›å»ºæ€å°±ç»ªæ€">1ï¼‰åˆ›å»ºåŸè¯­ï¼šï¼ˆæ— â†’åˆ›å»ºæ€â†’å°±ç»ªæ€ï¼‰</h5>
<p>ç”³è¯·ç©ºç™½PCBã€ä¸ºæ–°è¿›ç¨‹åˆ†é…æ‰€éœ€èµ„æºã€åˆå§‹åŒ–PCBã€å°†PCBæ’å…¥å°±ç»ªé˜Ÿåˆ—</p>
<h5 id="èƒ½å¤Ÿå¼•èµ·è¿›ç¨‹åˆ›å»ºçš„äº‹ä»¶å¦‚ä¸‹">èƒ½å¤Ÿå¼•èµ·è¿›ç¨‹åˆ›å»ºçš„äº‹ä»¶å¦‚ä¸‹ï¼š</h5>
<ul>
<li>ç”¨æˆ·ç™»å½•ï¼šåˆ†æ—¶ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·ç™»å½•æˆåŠŸï¼Œç³»ç»Ÿä¼šå»ºç«‹ä¸ºå…¶å»ºç«‹ä¸€ä¸ªæ–°çš„è¿›ç¨‹</li>
<li>ä½œä¸šè°ƒåº¦ï¼šå¤šé“æ‰¹å¤„ç†ç³»ç»Ÿä¸­ï¼Œæœ‰æ–°çš„ä½œä¸šæ”¾å…¥å†…å­˜æ—¶ï¼Œä¼šä¸ºå…¶å»ºç«‹ä¸€ä¸ªæ–°çš„è¿›ç¨‹å¼•èµ·è¿›ç¨‹åˆ›å»ºçš„äº‹ä»¶
lå¼•èµ·è¿›ç¨‹åˆ›å»ºçš„äº‹ä»¶</li>
<li>æä¾›æœåŠ¡ï¼šç”¨æˆ·å‘æ“ä½œç³»ç»Ÿæå‡ºæŸäº›è¯·æ±‚æ—¶ï¼Œä¼šæ–°å»ºä¸€ä¸ªè¿›ç¨‹å¤„ç†è¯¥è¯·æ±‚</li>
<li>åº”ç”¨è¯·æ±‚ï¼šç”±ç”¨æˆ·è¿›ç¨‹ä¸»åŠ¨è¯·æ±‚åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹</li>
</ul>
<h5
id="æ’¤é”€åŸè¯­å°±ç»ªæ€é˜»å¡æ€è¿è¡Œæ€ç»ˆæ­¢æ€æ— ">2ï¼‰æ’¤é”€åŸè¯­ï¼šï¼ˆå°±ç»ªæ€/é˜»å¡æ€/è¿è¡Œæ€â†’ç»ˆæ­¢æ€â†’æ— ï¼‰</h5>
<p>â€‹
ä»PCBé›†åˆä¸­æ‰¾åˆ°ç»ˆæ­¢è¿›ç¨‹çš„PCBï¼Œè‹¥è¿›ç¨‹æ­£åœ¨è¿è¡Œï¼Œç«‹å³å‰¥å¤ºCPUï¼Œå°†CPUåˆ†é…ç»™å…¶ä»–è¿›ç¨‹ã€‚ç»ˆæ­¢å…¶æ‰€æœ‰å­è¿›ç¨‹ï¼Œå°†è¯¥è¿›ç¨‹æ‹¥æœ‰çš„æ‰€æœ‰èµ„æºå½’è¿˜ç»™çˆ¶è¿›ç¨‹æˆ–æ“ä½œç³»ç»Ÿã€‚åˆ é™¤PCB</p>
<h5 id="èƒ½å¤Ÿå¼•èµ·è¿›ç¨‹æ’¤é”€çš„äº‹ä»¶å¦‚ä¸‹">èƒ½å¤Ÿå¼•èµ·è¿›ç¨‹æ’¤é”€çš„äº‹ä»¶å¦‚ä¸‹ï¼š</h5>
<ul>
<li>æ­£å¸¸ç»“æŸ</li>
<li>å¼‚å¸¸ç»“æŸ</li>
<li>å¤–ç•Œå¹²é¢„</li>
</ul>
<h5 id="é˜»å¡åŸè¯­è¿è¡Œæ€é˜»å¡æ€">3ï¼‰é˜»å¡åŸè¯­ï¼šï¼ˆè¿è¡Œæ€â†’é˜»å¡æ€ï¼‰</h5>
<p>â€‹
æ‰¾åˆ°è¦é˜»å¡çš„è¿›ç¨‹å¯¹åº”çš„PCBï¼Œä¿æŠ¤è¿›ç¨‹è¿è¡Œç°åœºï¼Œå°†PCBçŠ¶æ€ä¿¡æ¯è®¾ç½®ä¸ºâ€œé˜»å¡æ€â€ï¼Œæš‚æ—¶åœæ­¢è¿›ç¨‹è¿è¡Œï¼Œå°†PCBæ’å…¥ç›¸åº”äº‹ä»¶çš„ç­‰å¾…é˜Ÿåˆ—ã€‚</p>
<p><strong>èƒ½å¤Ÿå¼•èµ·è¿›ç¨‹é˜»å¡çš„äº‹ä»¶å¦‚ä¸‹ï¼š</strong></p>
<ul>
<li>éœ€è¦ç­‰å¾…ç³»ç»Ÿåˆ†é…æŸç§èµ„æº</li>
<li>éœ€è¦ç­‰å¾…ç›¸äº’åˆä½œçš„å…¶ä»–è¿›ç¨‹å®Œæˆå·¥ä½œ</li>
</ul>
<h5 id="å”¤é†’åŸè¯­é˜»å¡æ€è¿è¡Œæ€">4ï¼‰å”¤é†’åŸè¯­ï¼šï¼ˆé˜»å¡æ€â†’è¿è¡Œæ€ï¼‰</h5>
<p>â€‹
åœ¨äº‹ä»¶ç­‰å¾…é˜Ÿåˆ—ä¸­æ‰¾åˆ°PCBï¼Œå°†PCBä»ç­‰å¾…é˜Ÿåˆ—ç§»é™¤ï¼Œè®¾ç½®è¿›ç¨‹ä¸ºå°±ç»ªæ€ï¼Œå°†PCBæ’å…¥å°±ç»ªé˜Ÿåˆ—ï¼Œç­‰å¾…è¢«è°ƒåº¦</p>
<p><strong>èƒ½å¤Ÿå¼•èµ·è¿›ç¨‹å”¤é†’çš„äº‹ä»¶å¦‚ä¸‹ï¼š</strong></p>
<ul>
<li>æ­£åœ¨ç­‰å¾…çš„äº‹ä»¶å‘ç”Ÿï¼ˆå› ä½•äº‹é˜»å¡ï¼Œå°±åº”å½“ç”±ä½•äº‹å”¤é†’ï¼Œéœ€ä¸é˜»å¡åŸè¯­æˆå¯¹ä½¿ç”¨ï¼‰</li>
</ul>
<h5
id="åˆ‡æ¢åŸè¯­è¿è¡Œæ€é˜»å¡æ€å°±ç»ªæ€-æˆ–-å°±ç»ªæ€è¿è¡Œæ€">5ï¼‰åˆ‡æ¢åŸè¯­ï¼šï¼ˆè¿è¡Œæ€â†’é˜»å¡æ€/å°±ç»ªæ€
æˆ– å°±ç»ªæ€â†’è¿è¡Œæ€ï¼‰</h5>
<p>â€‹
å°†è¿è¡Œç¯å¢ƒä¿¡æ¯å­˜å…¥PCBï¼ŒPCBç§»å…¥ç›¸åº”é˜Ÿåˆ—ã€‚é€‰æ‹©å¦ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œï¼Œå¹¶æ›´æ–°å…¶PCBï¼Œæ ¹æ®PCBæ¢å¤æ–°è¿›ç¨‹æ‰€éœ€çš„è¿è¡Œç¯å¢ƒ</p>
<p><strong>èƒ½å¤Ÿå¼•èµ·è¿›ç¨‹åˆ‡æ¢çš„äº‹ä»¶å¦‚ä¸‹ï¼š</strong></p>
<ul>
<li>å½“å‰è¿›ç¨‹æ—¶é—´ç‰‡åˆ°</li>
<li>æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹åˆ°è¾¾</li>
<li>å½“å‰è¿›ç¨‹ä¸»åŠ¨é˜»å¡</li>
<li>å½“å‰è¿›ç¨‹ç»ˆæ­¢</li>
</ul>
<h3 id="å››è¿›ç¨‹é€šä¿¡">å››ã€è¿›ç¨‹é€šä¿¡ï¼š</h3>
<h4 id="ä»€ä¹ˆæ˜¯è¿›ç¨‹é€šä¿¡">1ã€ä»€ä¹ˆæ˜¯è¿›ç¨‹é€šä¿¡ï¼Ÿ</h4>
<p>â€‹
è¿›ç¨‹é€šä¿¡å°±æ˜¯æŒ‡è¿›ç¨‹ä¹‹é—´çš„ä¿¡æ¯äº¤æ¢ã€‚è¿›ç¨‹æ˜¯åˆ†é…ç³»ç»Ÿèµ„æºçš„å•ä½ï¼ˆåŒ…æ‹¬å†…å­˜åœ°å€ç©ºé—´ï¼‰ï¼Œå› æ­¤<strong>å„è¿›ç¨‹æ‹¥æœ‰çš„å†…å­˜åœ°å€ç©ºé—´ç›¸äº’ç‹¬ç«‹ã€‚</strong>è¿›ç¨‹1å¯ä»¥è®¿é—®è¿›ç¨‹1çš„åœ°å€ç©ºé—´ï¼Œä½†ä¸èƒ½ç›´æ¥è®¿é—®è¿›ç¨‹2çš„åœ°å€ç©ºé—´ã€‚</p>
<p>â€‹
<strong>ä¸ºäº†ä¿è¯å®‰å…¨ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸èƒ½ç›´æ¥è®¿é—®å¦ä¸€ä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œä½†æ˜¯è¿›ç¨‹ä¹‹é—´çš„ä¿¡æ¯äº¤æ¢æ˜¯å¿…é¡»å®ç°çš„ï¼Œä¸ºäº†ä¿è¯è¿›ç¨‹é—´çš„å®‰å…¨é€šä¿¡ï¼Œæ“ä½œç³»ç»Ÿæä¾›äº†ä¸€äº›æ–¹æ³•å°±æ˜¯è¿›ç¨‹é€šä¿¡</strong></p>
<h4 id="è¿›ç¨‹é€šä¿¡å…±äº«å­˜å‚¨-æ–¹æ³•">2ã€è¿›ç¨‹é€šä¿¡â€”â€”å…±äº«å­˜å‚¨ æ–¹æ³•</h4>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220315171055164.png" alt="å…±äº«å­˜å‚¨" style="zoom: 67%;" /></p>
<p>â€‹
ä¸¤ä¸ªè¿›ç¨‹å¯¹å…±äº«ç©ºé—´çš„è®¿é—®å¿…é¡»æ˜¯äº’æ–¥çš„ï¼ˆäº’æ–¥è®¿é—®é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„å·¥å…·å®ç°ï¼‰ã€‚</p>
<p>â€‹ æ“ä½œç³»ç»Ÿåªè´Ÿè´£æä¾›å…±äº«ç©ºé—´å’ŒåŒæ­¥äº’æ–¥å·¥å…·ï¼ˆå¦‚Pã€Væ“ä½œï¼‰</p>
<p>â€‹ <strong>å…¶åˆæœ‰ä¸¤ç§æ–¹å¼</strong>ï¼š</p>
<ul>
<li><p>åŸºäºæ•°æ®ç»“æ„çš„å…±äº«</p>
<p>â€‹
åŸºäºæ•°æ®ç»“æ„çš„å…±äº«ï¼šæ¯”å¦‚å…±äº«ç©ºé—´é‡Œåªèƒ½æ”¾ä¸€ä¸ªé•¿åº¦ä¸º10çš„æ•°ç»„ã€‚è¿™ç§å…±äº«æ–¹å¼<strong>é€Ÿåº¦æ…¢ã€é™åˆ¶å¤šï¼Œæ˜¯ä¸€ç§ä½çº§é€šä¿¡æ–¹å¼</strong></p></li>
<li><p>åŸºäºå­˜å‚¨åŒºçš„å…±äº«</p>
<p>â€‹
åŸºäºå­˜å‚¨åŒºçš„å…±äº«ï¼šåœ¨å†…å­˜ä¸­ç”»å‡ºä¸€å—å…±äº«å­˜å‚¨åŒºï¼Œ<strong>æ•°æ®çš„å½¢å¼ã€å­˜æ”¾ä½ç½®éƒ½ç”±è¿›ç¨‹æ§åˆ¶ï¼Œè€Œä¸æ˜¯æ“ä½œç³»ç»Ÿã€‚</strong>ç›¸æ¯”ä¹‹ä¸‹ï¼Œè¿™ç§å…±äº«æ–¹å¼<strong>é€Ÿåº¦æ›´å¿«ï¼Œæ˜¯ä¸€ç§é«˜çº§é€šä¿¡æ–¹å¼ã€‚</strong></p></li>
</ul>
<h4 id="è¿›ç¨‹é€šä¿¡ç®¡é“é€šä¿¡-æ–¹æ³•">3ã€è¿›ç¨‹é€šä¿¡â€”â€”ç®¡é“é€šä¿¡ æ–¹æ³•</h4>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220315171447871.png"
alt="ç®¡é“é€šä¿¡" />
<figcaption aria-hidden="true">ç®¡é“é€šä¿¡</figcaption>
</figure>
<p>â€‹
â€œç®¡é“â€æ˜¯æŒ‡ç”¨äºè¿æ¥è¯»å†™è¿›ç¨‹çš„ä¸€ä¸ªå…±äº«æ–‡ä»¶ï¼Œåˆåpipeç¨‹çš„ä¸€ä¸ªå…±äº«æ–‡ä»¶ï¼Œåˆåpipe
æ–‡ä»¶ã€‚å…¶å®å°±æ˜¯<strong>åœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªå¤§å°å›ºå®šçš„ç¼“å†²åŒº </strong></p>
<ul>
<li>ç®¡é“åªèƒ½é‡‡ç”¨åŠåŒå·¥é€šä¿¡ï¼ŒæŸä¸€æ—¶é—´æ®µå†…åªèƒ½å®ç°å•å‘çš„ä¼ è¾“ã€‚å¦‚æœè¦å®ç°åŒå‘åŒæ—¶é€šä¿¡ï¼Œåˆ™éœ€è¦è®¾ç½®ä¸¤ä¸ªç®¡é“ã€‚</li>
<li>å„ä¸ªè¿›ç¨‹éœ€è¦äº’æ–¥çš„è®¿é—®ç®¡é“</li>
<li>æ•°æ®ä»¥å­—ç¬¦æµçš„å½¢å¼å†™å…¥ç®¡é“ï¼Œ<strong>å½“ç®¡é“å†™æ»¡æ—¶ï¼Œå†™è¿›ç¨‹çš„writeï¼ˆï¼‰ç³»ç»Ÿè°ƒç”¨å°†è¢«é˜»å¡</strong>ï¼Œç­‰å¾…è¯»è¿›ç¨‹å°†æ•°æ®å–èµ°ã€‚<strong>å½“è¯»è¿›ç¨‹å°†æ•°æ®å…¨éƒ¨å–èµ°åï¼Œç®¡é“å˜ç©ºï¼Œæ­¤æ—¶è¯»è¿›ç¨‹çš„readï¼ˆï¼‰ç³»ç»Ÿè°ƒç”¨å°†è¢«é˜»å¡ã€‚</strong></li>
<li><strong>å¦‚æœæ²¡å†™æ»¡ï¼Œå°±ä¸å…è®¸è¯»ã€‚å¦‚æœæ²¡è¯»ç©ºï¼Œå°±ä¸å…è®¸å†™ã€‚</strong></li>
<li><strong>æ•°æ®ä¸€æ—¦è¢«è¯»å‡ºï¼Œå°±ä»ç®¡é“ä¸­è¢«æŠ›å¼ƒï¼Œè¿™å°±æ„å‘³ç€è¯»è¿›ç¨‹æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªï¼Œå¦åˆ™å¯èƒ½ä¼šæœ‰è¯»é”™æ•°æ®çš„æƒ…</strong></li>
</ul>
<h4 id="è¿›ç¨‹é€šä¿¡æ¶ˆæ¯ä¼ é€’-æ–¹æ³•">4ã€è¿›ç¨‹é€šä¿¡â€”â€”æ¶ˆæ¯ä¼ é€’ æ–¹æ³•</h4>
<p>â€‹
è¿›ç¨‹é—´çš„æ•°æ®äº¤æ¢<strong>ä»¥æ ¼å¼åŒ–çš„æ¶ˆæ¯ï¼ˆMessageï¼‰ä¸ºå•ä½</strong>ã€‚è¿›ç¨‹é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„<strong>â€œå‘é€æ¶ˆæ¯/æ¥æ”¶æ¶ˆæ¯â€ä¸¤ä¸ªåŸè¯­è¿›è¡Œæ•°æ®äº¤æ¢</strong>ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220315180227145.png" /></p>
<p>â€‹
æ¶ˆæ¯å¤´åŒ…æ‹¬ï¼šå‘é€è¿›ç¨‹IDã€æ¥å—è¿›ç¨‹IDã€æ¶ˆæ¯ç±»å‹ã€æ¶ˆæ¯é•¿åº¦ç­‰æ ¼å¼åŒ–çš„ä¿¡æ¯</p>
<p>â€‹ æ¯ä¸ªè¿›ç¨‹éƒ½ä¼šæœ‰ä¸€ä¸ªæ¶ˆæ¯ç¼“å†²é˜Ÿåˆ—ï¼šæ¶ˆæ¯ä¼ é€’æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>ç›´æ¥é€šä¿¡æ–¹å¼: æ¶ˆæ¯ç›´æ¥æŒ‚åˆ°æ¥å—è¿›ç¨‹çš„æ¶ˆæ¯ç¼“å†²é˜Ÿåˆ—ä¸Š
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220315180138885.png" /></li>
</ul></li>
<li>é—´æ¥é€šä¿¡æ–¹å¼ï¼šæ¶ˆæ¯å…ˆå‘é€åˆ°ä¸­é—´å®ä½“ä¸­
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220315180217571.png" /></li>
</ul></li>
</ul>
<h3 id="äº”çº¿ç¨‹æ¦‚å¿µå’Œå¤šçº¿ç¨‹æ¨¡å‹">äº”ã€çº¿ç¨‹æ¦‚å¿µå’Œå¤šçº¿ç¨‹æ¨¡å‹ï¼š</h3>
<h4 id="ä»€ä¹ˆæ˜¯çº¿ç¨‹">1ã€ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿ</h4>
<p>â€‹ åœ¨ä¼ ç»Ÿçš„æœºåˆ¶ä¸­ï¼Œ<strong>è¿›ç¨‹æ˜¯ç¨‹åºæ‰§è¡Œæµçš„æœ€å°å•ä½ã€‚</strong></p>
<p>â€‹
<strong>æœ‰çš„è¿›ç¨‹</strong>å¯èƒ½éœ€è¦â€œåŒæ—¶â€åšå¾ˆå¤šäº‹ï¼Œè€Œä¼ ç»Ÿçš„è¿›ç¨‹åªèƒ½ä¸²è¡Œåœ°æ‰§è¡Œä¸€ç³»åˆ—ç¨‹åºã€‚ä¸ºæ­¤ï¼Œå¼•å…¥äº†â€œçº¿ç¨‹â€ï¼Œæ¥å¢åŠ å¹¶å‘åº¦ã€‚</p>
<p>â€‹
ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œè¢«åˆ†ä¸ºå¤šä¸ªçº¿ç¨‹ã€‚CPUè½®æµä¸ºä¸åŒçš„çº¿ç¨‹æœåŠ¡ã€‚æ•…è€Œï¼Œå¼•å…¥çº¿ç¨‹åï¼Œ<strong>çº¿ç¨‹æ˜¯ç¨‹åºæ‰§è¡Œæµçš„æœ€å°å•ä½ã€‚</strong></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220315180730244.png" style="zoom:67%;" /></p>
<p>â€‹</p>
<p><strong>å®˜æ–¹å®šä¹‰ï¼šçº¿ç¨‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„CPUæ‰§è¡Œå•å…ƒï¼Œä¹Ÿæ˜¯ç¨‹åºæ‰§è¡Œæµçš„æœ€å°å•ä½ã€‚</strong></p>
<p>â€‹
å¼•å…¥çº¿ç¨‹ä¹‹åï¼Œä¸ä»…æ˜¯è¿›ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘ï¼Œè¿›ç¨‹å†…çš„å„çº¿ç¨‹ä¹‹é—´ä¹Ÿå¯ä»¥å¹¶å‘ï¼Œä»è€Œè¿›ä¸€æ­¥æå‡äº†ç³»ç»Ÿçš„å¹¶å‘åº¦ï¼Œä½¿å¾—ä¸€ä¸ªè¿›ç¨‹å†…ä¹Ÿå¯ä»¥å¹¶å‘å¤„ç†å„ç§ä»»åŠ¡</p>
<p>â€‹
å¼•å…¥çº¿ç¨‹åï¼Œ<strong>è¿›ç¨‹åªä½œä¸ºé™¤CPUä¹‹å¤–çš„ç³»ç»Ÿèµ„æºçš„åˆ†é…å•å…ƒ</strong>ï¼ˆå¦‚æ‰“å°æœºã€å†…å­˜åœ°å€ç©ºé—´ç­‰éƒ½æ˜¯åˆ†é…ç»™è¿›ç¨‹çš„ï¼‰ï¼Œ<strong>çº¿ç¨‹æ‰æ˜¯CPUçš„æ‰§è¡Œå•å…ƒ</strong>ï¼ˆè€ŒCPUæ˜¯åˆ†é…ç»™ä¸åŒçš„çº¿ç¨‹çš„ï¼‰</p>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220315181019487.png"
alt="å¼•å…¥çº¿ç¨‹åçš„å˜åŒ–" /></p>
<h4 id="çº¿ç¨‹çš„å±æ€§">2ã€çº¿ç¨‹çš„å±æ€§ï¼š</h4>
<ul>
<li>çº¿ç¨‹æ˜¯å¤„ç†æœºè°ƒåº¦çš„å•ä½</li>
<li>å¤šCPUè®¡ç®—æœºä¸­ï¼Œå„ä¸ªçº¿ç¨‹å¯å ç”¨ä¸åŒçš„CPU</li>
<li>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹IDã€çº¿ç¨‹æ§åˆ¶å—ï¼ˆTCBï¼‰</li>
<li>çº¿ç¨‹ä¹Ÿæœ‰å°±ç»ªã€é˜»å¡ã€è¿è¡Œä¸‰ç§åŸºæœ¬çŠ¶æ€</li>
<li>çº¿ç¨‹å‡ ä¹ä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æº</li>
<li><strong>åŒä¸€è¿›ç¨‹çš„ä¸åŒçº¿ç¨‹é—´å…±äº«è¿›ç¨‹çš„èµ„æºï¼ˆä¾‹å¦‚æ‰“å°æœºç­‰ï¼‰</strong></li>
<li>ç”±äºå…±äº«å†…å­˜åœ°å€ç©ºé—´ï¼ŒåŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹é—´é€šä¿¡ç”šè‡³æ— éœ€ç³»ç»Ÿå¹²é¢„</li>
<li>åŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹åˆ‡æ¢ï¼Œä¸ä¼šå¼•èµ·è¿›ç¨‹åˆ‡æ¢</li>
<li>ä¸åŒè¿›ç¨‹ä¸­çš„çº¿ç¨‹åˆ‡æ¢ï¼Œä¼šå¼•èµ·è¿›ç¨‹åˆ‡æ¢</li>
<li>åˆ‡æ¢åŒè¿›ç¨‹å†…çš„çº¿ç¨‹ï¼Œç³»ç»Ÿå¼€é”€å¾ˆå°</li>
<li>åˆ‡æ¢è¿›ç¨‹ï¼Œç³»ç»Ÿå¼€é”€è¾ƒå¤§</li>
</ul>
<h4 id="çº¿ç¨‹çš„å®ç°æ–¹å¼">3ã€çº¿ç¨‹çš„å®ç°æ–¹å¼ï¼š</h4>
<h5 id="ç”¨æˆ·çº§çº¿ç¨‹">1ï¼‰ç”¨æˆ·çº§çº¿ç¨‹ï¼š</h5>
<p>â€‹ ç”¨æˆ·çº§çº¿ç¨‹ç”±åº”ç”¨ç¨‹åºé€šè¿‡çº¿ç¨‹åº“å®ç°ã€‚</p>
<p>â€‹
æ‰€æœ‰çš„çº¿ç¨‹ç®¡ç†å·¥ä½œéƒ½<strong>ç”±åº”ç”¨ç¨‹åºè´Ÿè´£ï¼ˆåŒ…æ‹¬çº¿ç¨‹åˆ‡æ¢ï¼‰</strong></p>
<p>â€‹ ç”¨æˆ·çº§çº¿ç¨‹ä¸­ï¼Œçº¿ç¨‹åˆ‡æ¢å¯ä»¥åœ¨ç”¨æˆ·æ€ä¸‹å³å¯å®Œæˆï¼Œæ— éœ€æ“ä½œç³»ç»Ÿå¹²é¢„ã€‚</p>
<p>â€‹
<strong>åœ¨ç”¨æˆ·çœ‹æ¥ï¼Œæ˜¯æœ‰å¤šä¸ªçº¿ç¨‹ã€‚ä½†æ˜¯åœ¨æ“ä½œç³»ç»Ÿå†…æ ¸çœ‹æ¥ï¼Œå¹¶æ„è¯†ä¸åˆ°çº¿ç¨‹çš„å­˜åœ¨ã€‚</strong>ï¼ˆç”¨æˆ·çº§çº¿ç¨‹å¯¹ç”¨æˆ·ä¸é€æ˜ï¼Œå¯¹æ“ä½œç³»ç»Ÿé€æ˜ï¼‰</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220315181528334.png" alt="ç”¨æˆ·çº§çº¿ç¨‹" style="zoom: 67%;" /></p>
<h5 id="å†…æ ¸çº§çº¿ç¨‹">2ï¼‰å†…æ ¸çº§çº¿ç¨‹ï¼š</h5>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220315181555209.png" alt="å†…æ ¸çº§çº¿ç¨‹" style="zoom:67%;" /></p>
<p>â€‹ æ ¸çº§çº¿ç¨‹çš„ç®¡ç†å·¥ä½œç”±æ“ä½œç³»ç»Ÿå†…æ ¸å®Œæˆã€‚</p>
<p>â€‹
çº¿ç¨‹è°ƒåº¦ã€åˆ‡æ¢ç­‰å·¥ä½œéƒ½ç”±å†…æ ¸è´Ÿè´£ï¼Œå› æ­¤å†…æ ¸çº§çº¿ç¨‹çš„åˆ‡æ¢å¿…ç„¶éœ€è¦åœ¨æ ¸å¿ƒæ€ä¸‹æ‰èƒ½å®Œæˆã€‚</p>
<h5 id="ä¸¤è€…ç»„åˆ">3ï¼‰ä¸¤è€…ç»„åˆï¼š</h5>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220315181640824.png" alt="" style="zoom:67%;" /></p>
<p>â€‹
åœ¨åŒæ—¶æ”¯æŒç”¨æˆ·çº§çº¿ç¨‹å’Œå†…æ ¸çº§çº¿ç¨‹çš„ç³»ç»Ÿä¸­ï¼Œå¯é‡‡ç”¨äºŒè€…ç»„åˆçš„æ–¹å¼ï¼šå°†nä¸ªç”¨æˆ·çº§çº¿ç¨‹æ˜ å°„åˆ°m
ä¸ªå†…æ ¸çº§çº¿ç¨‹ä¸Šï¼ˆn&gt;=mï¼‰</p>
<p>â€‹
é‡ç‚¹ï¼š<strong>æ“ä½œç³»ç»Ÿåªâ€œçœ‹å¾—è§â€å†…æ ¸çº§çº¿ç¨‹ï¼Œå› æ­¤åªæœ‰å†…æ ¸çº§çº¿ç¨‹æ‰æ˜¯å¤„ç†æœºåˆ†é…çš„å•ä½ã€‚</strong></p>
<p>â€‹
ä¾‹å¦‚ï¼šå·¦è¾¹è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œè¯¥è¿›ç¨‹ç”±ä¸¤ä¸ªå†…æ ¸çº§çº¿ç¨‹ï¼Œä¸‰ä¸ªç”¨æˆ·çº§çº¿ç¨‹ï¼Œåœ¨ç”¨æˆ·çœ‹æ¥ï¼Œè¿™ä¸ªè¿›ç¨‹ä¸­æœ‰ä¸‰ä¸ªçº¿ç¨‹ã€‚ä½†å³ä½¿è¯¥è¿›ç¨‹åœ¨ä¸€ä¸ª4æ ¸å¤„ç†æœºçš„è®¡ç®—æœºä¸Šè¿è¡Œï¼Œ<strong>ä¹Ÿæœ€å¤šåªèƒ½è¢«åˆ†é…åˆ°ä¸¤ä¸ªæ ¸ï¼Œæœ€å¤šåªèƒ½æœ‰ä¸¤ä¸ªç”¨æˆ·çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œã€‚</strong></p>
<h4 id="å¤šçº¿ç¨‹æ¨¡å‹">4ã€å¤šçº¿ç¨‹æ¨¡å‹ï¼š</h4>
<p>â€‹
åœ¨åŒæ—¶æ”¯æŒç”¨æˆ·çº§çº¿ç¨‹å’Œå†…æ ¸çº§çº¿ç¨‹çš„ç³»ç»Ÿä¸­ï¼Œç”±å‡ ä¸ªç”¨æˆ·çº§çº¿ç¨‹æ˜ å°„åˆ°å‡ ä¸ªå†…æ ¸çº§çº¿ç¨‹çš„é—®é¢˜å¼•å‡ºäº†â€œå¤šçº¿ç¨‹æ¨¡å‹â€é—®é¢˜ã€‚</p>
<h5 id="å¤šå¯¹ä¸€æ¨¡å‹">1ï¼‰å¤šå¯¹ä¸€æ¨¡å‹ï¼š</h5>
<p>â€‹
å¤šä¸ªç”¨æˆ·åŠçº¿ç¨‹æ˜ å°„åˆ°ä¸€ä¸ªå†…æ ¸çº§çº¿ç¨‹ã€‚æ¯ä¸ªç”¨æˆ·è¿›ç¨‹åªå¯¹åº”ä¸€ä¸ªå†…æ ¸çº§çº¿ç¨‹ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220315182055006.png" style="zoom:67%;" /></p>
<p>â€‹
<strong>ä¼˜ç‚¹ï¼š</strong>ç”¨å°¸çº§çº¿ç¨‹çš„åˆ‡æ¢åœ¨ç”¨å°¸ç©ºé—´å³å¯å®Œæˆï¼Œä¸éœ€è¦åˆ‡æ¢åˆ°æ ¸å¿ƒæ€ï¼Œçº¿ç¨‹ç®¡ç†çš„ç³»ç»Ÿå¼€é”€å°ï¼Œæ•ˆç‡é«˜</p>
<p>â€‹
<strong>ç¼ºç‚¹ï¼š</strong>å½“ä¸€ä¸ªç”¨æˆ·çº§çº¿ç¨‹è¢«é˜»å¡åï¼Œæ•´ä¸ªè¿›ç¨‹éƒ½ä¼šè¢«é˜»å¡ï¼Œå¹¶å‘åº¦ä¸é«˜ã€‚å¤šä¸ªçº¿ç¨‹ä¸å¯åœ¨å¤šæ ¸å¤„ç†æœºä¸Šå¹¶è¡Œè¿è¡Œ</p>
<h5 id="ä¸€å¯¹ä¸€æ¨¡å‹">2ï¼‰ä¸€å¯¹ä¸€æ¨¡å‹ï¼š</h5>
<p>â€‹
ä¸€ä¸ªç”¨æˆ·åŠçº¿ç¨‹æ˜ å°„åˆ°ä¸€ä¸ªå†…æ ¸çº§çº¿ç¨‹ã€‚æ¯ä¸ªç”¨æˆ·è¿›ç¨‹æœ‰ä¸ç”¨æˆ·çº§çº¿ç¨‹åŒæ•°é‡çš„å†…æ ¸çº§çº¿ç¨‹ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220315182003606.png" alt="ä¸€å¯¹ä¸€æ¨¡å‹" style="zoom:67%;" /></p>
<p>â€‹
<strong>ä¼˜ç‚¹</strong>ï¼šå½“ä¸€ä¸ªçº¿ç¨‹è¢«é˜»å¡åï¼Œåˆ«çš„çº¿ç¨‹è¿˜å¯ä»¥ç»§ç»­æ‰§è¡Œï¼Œå¹¶å‘èƒ½åŠ›å¼ºã€‚å¤šçº¿ç¨‹å¯åœ¨å¤šæ ¸å¤„ç†æœºä¸Šå¹¶è¡Œæ‰§è¡Œã€‚</p>
<p>â€‹
<strong>ç¼ºç‚¹</strong>ï¼šä¸€ä¸ªç”¨æˆ·è¿›ç¨‹ä¼šå ç”¨å¤šä¸ªå†…æ ¸çº§çº¿ç¨‹ï¼Œçº¿ç¨‹åˆ‡æ¢ç”±æ“ä½œç³»ç»Ÿå†…æ ¸å®Œæˆï¼Œéœ€è¦åˆ‡æ¢åˆ°æ ¸å¿ƒæ€ï¼Œå› æ­¤çº¿ç¨‹ç®¡ç†çš„æˆæœ¬é«˜ï¼Œå¼€é”€å¤§ã€‚</p>
<h5 id="å¤šå¯¹å¤šæ¨¡å‹">3ï¼‰å¤šå¯¹å¤šæ¨¡å‹ï¼š</h5>
<p>â€‹
nç”¨æˆ·åŠçº¿ç¨‹æ˜ å°„åˆ°mä¸ªå†…æ ¸çº§çº¿ç¨‹ï¼ˆn&gt;=mï¼‰ã€‚æ¯ä¸ªç”¨æˆ·è¿›ç¨‹å¯¹åº”mä¸ªå†…æ ¸çº§çº¿ç¨‹ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220315182148042.png" style="zoom:67%;" /></p>
<p>â€‹
å…‹æœäº†å¤šå¯¹ä¸€æ¨¡å‹å¹¶å‘åº¦ä¸é«˜çš„ç¼ºç‚¹ï¼Œåˆå…‹æœäº†ä¸€å¯¹ä¸€æ¨¡å‹ä¸­ä¸€ä¸ªç”¨æˆ·è¿›ç¨‹å ç”¨å¤ªå¤šå†…æ ¸çº§çº¿ç¨‹ï¼Œå¼€é”€å¤ªå¤§çš„ç¼ºç‚¹ã€‚</p>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ“ä½œç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Operating System</tag>
      </tags>
  </entry>
  <entry>
    <title>1.1 æ“ä½œç³»ç»Ÿæ¦‚å¿µä¸åŸºç¡€</title>
    <url>/2022/03/11/b7e4aac04426/</url>
    <content><![CDATA[<h3 id="ä¸€æ¦‚å¿µåŠŸèƒ½ä¸ç›®æ ‡">ä¸€ã€æ¦‚å¿µåŠŸèƒ½ä¸ç›®æ ‡</h3>
<h4 id="æ¦‚å¿µ">1ã€æ¦‚å¿µ</h4>
<p>æ“ä½œç³»ç»Ÿï¼ˆOperating
Systemï¼ŒOSï¼‰æ˜¯æŒ‡æ§åˆ¶å’Œç®¡ç†<strong>æ•´ä¸ªè®¡ç®—æœºç³»ç»Ÿçš„ç¡¬ä»¶å’Œè½¯ä»¶èµ„æº</strong>ï¼Œå¹¶åˆç†åœ°ç»„ç»‡è°ƒåº¦è®¡ç®—æœºçš„å·¥ä½œå’Œèµ„æºçš„åˆ†é…ï¼Œä»¥æä¾›ç»™ç”¨æˆ·å’Œå…¶ä»–è½¯ä»¶æ–¹ä¾¿çš„æ¥å£å’Œç¯å¢ƒï¼Œå®ƒæ˜¯è®¡ç®—æœºç³»ç»Ÿä¸­æœ€åŸºæœ¬çš„<strong>ç³»ç»Ÿè½¯ä»¶</strong>ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220311205142106.png" style="zoom: 67%;" /></p>
<p>è¾ƒä¸ºç›´è§‚çš„ä¾‹å­ï¼šWindowsçš„ä»»åŠ¡ç®¡ç†å™¨</p>
<h4 id="åŠŸèƒ½ä¸ç›®æ ‡">2ã€åŠŸèƒ½ä¸ç›®æ ‡ï¼š</h4>
<h5 id="ç³»ç»Ÿèµ„æºçš„ç®¡ç†è€…">1) ç³»ç»Ÿèµ„æºçš„ç®¡ç†è€…ï¼š</h5>
<p>æä¾›4ä¸ªåŠŸèƒ½ï¼š</p>
<ul>
<li>CPUç®¡ç†</li>
<li>å­˜å‚¨å™¨ç®¡ç†ï¼ˆå†…å­˜&amp;å¤–å­˜ï¼‰</li>
<li>æ–‡ä»¶ç®¡ç†</li>
<li>ç¡¬ä»¶è®¾å¤‡ç®¡ç†</li>
</ul>
<p>ç›®æ ‡ï¼šå®‰å…¨ + é«˜æ•ˆ</p>
<h5
id="ä½œä¸ºç”¨æˆ·å’Œè®¡ç®—æœºç¡¬ä»¶ä¹‹é—´çš„æ¥å£">2ï¼‰ä½œä¸ºç”¨æˆ·å’Œè®¡ç®—æœºç¡¬ä»¶ä¹‹é—´çš„æ¥å£ï¼š</h5>
<p>æä¾›3ä¸ªåŠŸèƒ½ï¼š</p>
<ul>
<li>å‘½ä»¤æ¥å£
<ul>
<li>è”æœºå‘½ä»¤æ¥å£ï¼ˆäº¤äº’å¼å‘½ä»¤æ¥å£ï¼‰ï¼šç”¨æˆ·è¯´ä¸€å¥ï¼Œç³»ç»Ÿåšä¸€å¥ã€‚æ¯”å¦‚winä¸­çš„<code>cmd</code>å‘½ä»¤è§£é‡Šå™¨</li>
<li>è„±æœºå‘½ä»¤æ¥å£ï¼ˆæ‰¹å¤„ç†å‘½ä»¤æ¥å£ï¼‰ï¼šç”¨æˆ·è¯´ä¸€å †ï¼Œç³»ç»Ÿåšä¸€å †ã€‚winä¸­çš„<code>*.bat</code>æ–‡ä»¶æ‰§è¡Œ</li>
</ul></li>
<li>ç¨‹åºæ¥å£
<ul>
<li>å¦‚winä¸­ï¼Œç¨‹åºå‘˜åœ¨ç¨‹åºä¸­è°ƒç”¨<code>*.dll</code>ï¼ˆè¯¥è°ƒç”¨è¿‡ç¨‹å³ä¸º<strong>ç³»ç»Ÿè°ƒç”¨</strong>ï¼‰å¯ä»¥å®ç°æŸäº›åŠŸèƒ½ã€‚è¿™ç±»æ¥å£åªèƒ½é€šè¿‡ç”¨æˆ·ç¨‹åº<strong>é—´æ¥ä½¿ç”¨</strong></li>
</ul></li>
<li>GUIå›¾å½¢ç”¨æˆ·ç•Œé¢
<ul>
<li>åˆ é™¤æ–‡ä»¶ï¼šæ‹–æ‹½è‡³å›æ”¶ç«™</li>
</ul></li>
</ul>
<h5 id="ä½œä¸ºæœ€æ¥è¿‘ç¡¬ä»¶çš„å±‚æ¬¡">3ï¼‰ ä½œä¸ºæœ€æ¥è¿‘ç¡¬ä»¶çš„å±‚æ¬¡ï¼š</h5>
<p>éœ€è¦å®ç°å †ç¡¬ä»¶æœºå™¨çš„æ‹“å±•ï¼Œæ²¡æœ‰ä»»ä½•è½¯ä»¶æ”¯æŒçš„è®¡ç®—æœºç§°ä¸º<strong>è£¸æœº</strong>ã€‚</p>
<p>é€šå¸¸æŠŠè¦†ç›–äº†è½¯ä»¶çš„æœºå™¨æˆä¸º<strong>æ‰©å……æœºå™¨</strong>ï¼Œåˆç§°ä¹‹ä¸º<strong>è™šæ‹Ÿæœº</strong></p>
<h3 id="äºŒæ“ä½œç³»ç»Ÿçš„ç‰¹å¾">äºŒã€æ“ä½œç³»ç»Ÿçš„ç‰¹å¾</h3>
<h4 id="å¹¶å‘æœ€åŸºæœ¬çš„ç‰¹å¾ä¹‹ä¸€">1ã€å¹¶å‘ï¼ˆæœ€åŸºæœ¬çš„ç‰¹å¾ä¹‹ä¸€ï¼‰</h4>
<p>â€‹
æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶é—´é—´éš”å†…å‘ç”Ÿã€‚<strong>è¿™äº›äº‹ä»¶å®è§‚ä¸Šæ˜¯åŒæ—¶å‘ç”Ÿçš„ï¼Œä½†å¾®è§‚ä¸Šæ˜¯äº¤æ›¿å‘ç”Ÿçš„ã€‚</strong></p>
<p>â€‹
æ“ä½œç³»ç»Ÿçš„å¹¶å‘æ€§æŒ‡<strong>è®¡ç®—æœºç³»ç»Ÿä¸­åŒæ—¶å­˜åœ¨ç€å¤šä¸ªè¿è¡Œç€çš„ç¨‹åº</strong>ã€‚</p>
<p>â€‹
ä¸€ä¸ªå•æ ¸å¤„ç†æœºï¼ˆCPUï¼‰åŒä¸€æ—¶åˆ»åªèƒ½æ‰§è¡Œä¸€ä¸ªç¨‹åºï¼Œå› æ­¤<strong>æ“ä½œç³»ç»Ÿä¼šè´Ÿè´£åè°ƒå¤šä¸ªç¨‹åºäº¤æ›¿æ‰§è¡Œï¼ˆè¿™äº›ç¨‹åºå¾®è§‚ä¸Šæ˜¯äº¤æ›¿æ‰§è¡Œçš„ï¼Œä½†å®è§‚ä¸Šçœ‹èµ·æ¥å°±åƒåœ¨åŒæ—¶æ‰§è¡Œï¼‰</strong></p>
<p>â€‹
æˆ‘ä»¬ç°åœ¨çš„4æ ¸CPUå¤„ç†å™¨ï¼Œæ„å‘³ç€åŒä¸€æ—¶åˆ»å¯ä»¥æœ‰4ä¸ªç¨‹åº<strong>å¹¶è¡Œ</strong>æ‰§è¡Œï¼Œä½†æ˜¯æ“ä½œç³»ç»Ÿçš„<strong>å¹¶å‘æ€§</strong>å¿…ä¸å¯å°‘ã€‚</p>
<h4 id="å…±äº«æœ€åŸºæœ¬çš„ç‰¹å¾ä¹‹äºŒ">2ã€å…±äº«ï¼ˆæœ€åŸºæœ¬çš„ç‰¹å¾ä¹‹äºŒï¼‰</h4>
<p>â€‹
èµ„æºå…±äº«ï¼Œæ˜¯æŒ‡<strong>ç³»ç»Ÿä¸­çš„èµ„æºå¯ä¾›å†…å­˜ä¸­å¤šä¸ªå¹¶å‘æ‰§è¡Œçš„è¿›ç¨‹å…±åŒä½¿ç”¨ã€‚</strong></p>
<ul>
<li>äº’æ–¥å…±äº«æ–¹å¼ï¼šç³»ç»Ÿä¸­çš„<strong>æŸäº›èµ„æºï¼Œè™½ç„¶å¯ä»¥æä¾›ç»™å¤šä¸ªè¿›ç¨‹ä½¿ç”¨ï¼Œä½†ä¸€ä¸ªæ—¶é—´æ®µå†…åªå…è®¸ä¸€ä¸ªè¿›ç¨‹è®¿é—®è¯¥èµ„æºã€‚</strong>æ¯”å¦‚è¯´ï¼šä½¿ç”¨QQå’Œå¾®ä¿¡è§†é¢‘ï¼Œ<strong>åŒä¸€æ—¶é—´æ®µæ‘„åƒå¤´åªèƒ½åˆ†é…ç»™å…¶ä¸­ä¸€ä¸ªè¿›ç¨‹ã€‚</strong></li>
<li>åŒæ—¶å…±äº«æ–¹å¼ï¼šç³»ç»Ÿä¸­çš„æŸäº›èµ„æºï¼Œå…è®¸ä¸€ä¸ªæ—¶é—´æ®µå†…ç”±å¤šä¸ªè¿›ç¨‹<strong>â€œåŒæ—¶â€</strong>å¯¹å®ƒä»¬è¿›è¡Œè®¿é—®ã€‚æ¯”å¦‚è¯´ï¼šä½¿ç”¨QQå‘é€æ–‡ä»¶Aï¼ŒåŒæ—¶ä½¿ç”¨å¾®ä¿¡å‘é€æ–‡ä»¶Bã€‚<strong>å®è§‚ä¸Šçœ‹ï¼Œä¸¤è¾¹éƒ½åœ¨åŒæ—¶è¯»å–å¹¶å‘é€æ–‡ä»¶ï¼Œ</strong>è¯´æ˜ä¸¤ä¸ªè¿›ç¨‹éƒ½åœ¨è®¿é—®ç¡¬ç›˜èµ„æºï¼Œä»ä¸­è¯»å–æ•°æ®ã€‚<strong>å¾®è§‚ä¸Šçœ‹ï¼Œä¸¤ä¸ªè¿›ç¨‹æ˜¯äº¤æ›¿ç€è®¿é—®ç¡¬ç›˜çš„ã€‚</strong></li>
</ul>
<h4 id="è™šæ‹Ÿ">3ã€è™šæ‹Ÿ</h4>
<p>â€‹
è™šæ‹Ÿæ˜¯æŒ‡<strong>æŠŠä¸€ä¸ªç‰©ç†ä¸Šçš„å®ä½“å˜ä¸ºè‹¥å¹²ä¸ªé€»è¾‘ä¸Šçš„å¯¹åº”ç‰©</strong>ï¼šç‰©ç†å®ä½“ï¼ˆå‰è€…ï¼‰æ˜¯å®é™…å­˜åœ¨çš„ï¼Œè€Œ<strong>é€»è¾‘ä¸Šå¯¹åº”ç‰©ï¼ˆåè€…ï¼‰æ˜¯ç”¨æˆ·æ„Ÿå—åˆ°çš„ã€‚</strong></p>
<h5 id="è™šæ‹ŸæŠ€æœ¯">1ï¼‰è™šæ‹ŸæŠ€æœ¯</h5>
<ul>
<li><p>ç©ºåˆ†å¤ç”¨æŠ€æœ¯ï¼šå¦‚è™šæ‹Ÿå­˜å‚¨å™¨æŠ€æœ¯</p></li>
<li><p>æ—¶åˆ†å¤ç”¨æŠ€æœ¯ï¼šå¦‚è™šæ‹Ÿå¤„ç†å™¨</p></li>
<li><p>é—®é¢˜1ï¼šGTA5éœ€è¦4GBçš„è¿è¡Œå†…å­˜ï¼ŒQQéœ€è¦256MBçš„å†…å­˜ï¼Œè¿…é›·éœ€è¦256MBçš„å†…å­˜ï¼Œç½‘æ˜“äº‘éŸ³ä¹éœ€è¦256MBçš„å†…å­˜â€¦â€¦è€Œæˆ‘çš„ç”µè„‘åªæœ‰4GBå†…å­˜ï¼Œè¿™äº›ç¨‹åºåŒæ—¶è¿è¡Œéœ€è¦çš„å†…å­˜è¿œå¤§äº4GBï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå®ƒä»¬è¿˜å¯ä»¥åœ¨æˆ‘çš„ç”µè„‘ä¸ŠåŒæ—¶è¿è¡Œå‘¢ï¼Ÿ</p></li>
<li><p>ç­”ï¼šè¿™æ˜¯è™šæ‹Ÿå­˜å‚¨å™¨æŠ€æœ¯ã€‚å®é™…åªæœ‰4GBçš„å†…å­˜ï¼Œåœ¨ç”¨æˆ·çœ‹æ¥ä¼¼ä¹è¿œè¿œå¤§äº4GBã€‚<strong>å³ç©ºåˆ†å¤ç”¨æŠ€æœ¯</strong></p></li>
<li><p>é—®é¢˜2ï¼šæ—¢ç„¶ä¸€ä¸ªç¨‹åºéœ€è¦è¢«åˆ†é…CPUæ‰èƒ½æ­£å¸¸æ‰§è¡Œï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå•æ ¸CPUçš„ç”µè„‘ä¸­èƒ½åŒæ—¶è¿è¡Œè¿™ä¹ˆå¤šä¸ªç¨‹åºå‘¢ï¼Ÿ</p></li>
<li><p>ç­”ï¼šè¿™æ˜¯è™šæ‹Ÿå¤„ç†å™¨æŠ€æœ¯ã€‚å®é™…ä¸Šåªæœ‰ä¸€ä¸ªå•æ ¸CPUï¼Œåœ¨ç”¨æˆ·çœ‹æ¥ä¼¼ä¹æœ‰6ä¸ªCPUåœ¨åŒæ—¶ä¸ºè‡ªå·±æœåŠ¡ã€‚<strong>å³æ—¶åˆ†å¤ç”¨æŠ€æœ¯</strong></p></li>
</ul>
<h4 id="å¼‚æ­¥">4ã€å¼‚æ­¥</h4>
<p>â€‹
å¼‚æ­¥æ˜¯æŒ‡ï¼Œåœ¨å¤šé“ç¨‹åºç¯å¢ƒä¸‹ï¼Œå…è®¸å¤šä¸ªç¨‹åºå¹¶å‘æ‰§è¡Œï¼Œ<strong>ä½†ç”±äºèµ„æºæœ‰é™ï¼Œè¿›ç¨‹çš„æ‰§è¡Œä¸æ˜¯ä¸€è´¯åˆ°åº•çš„ï¼Œè€Œæ˜¯èµ°èµ°åœåœï¼Œä»¥ä¸å¯é¢„çŸ¥çš„é€Ÿåº¦å‘å‰æ¨è¿›ï¼Œ</strong>è¿™å°±æ˜¯è¿›ç¨‹çš„å¼‚æ­¥æ€§ã€‚</p>
<h3 id="ä¸‰æ“ä½œç³»ç»Ÿçš„å‘å±•ä¸åˆ†ç±»">ä¸‰ã€æ“ä½œç³»ç»Ÿçš„å‘å±•ä¸åˆ†ç±»ï¼š</h3>
<h4 id="æ‰‹å·¥æ“ä½œé˜¶æ®µ">1ã€æ‰‹å·¥æ“ä½œé˜¶æ®µï¼š</h4>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220313105737330.png"
alt="æ‰‹å·¥æ“ä½œé˜¶æ®µ" />
<figcaption aria-hidden="true">æ‰‹å·¥æ“ä½œé˜¶æ®µ</figcaption>
</figure>
<p><strong>ä¸»è¦ç¼ºç‚¹ï¼š</strong>ç”¨æˆ·ç‹¬å å…¨æœºã€äººæœºé€Ÿåº¦çŸ›ç›¾å¯¼è‡´èµ„æºåˆ©ç”¨ç‡æä½</p>
<h4 id="æ‰¹å¤„ç†é˜¶æ®µ">2ã€æ‰¹å¤„ç†é˜¶æ®µï¼š</h4>
<h5 id="å•é“æ‰¹å¤„ç†ç³»ç»Ÿ">1ï¼‰å•é“æ‰¹å¤„ç†ç³»ç»Ÿ</h5>
<p>â€‹
å¼•å…¥è„±æœºè¾“å…¥è¾“å‡ºæŠ€æœ¯ï¼ˆç”¨ç£å¸¦å®Œæˆï¼‰ï¼Œå¹¶ç”±ç›‘ç£ç¨‹åºè´Ÿè´£æ§åˆ¶ä½œä¸šçš„è¾“å…¥è¾“å‡ºã€‚</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220313110520259.png"
alt="å•é“æ‰¹å¤„ç†ç³»ç»Ÿ" />
<figcaption aria-hidden="true">å•é“æ‰¹å¤„ç†ç³»ç»Ÿ</figcaption>
</figure>
<p><strong>ä¸»è¦ä¼˜ç‚¹ï¼š</strong>ç¼“è§£äº†ä¸€å®šç¨‹åº¦çš„äººæœºé€Ÿåº¦çŸ›ç›¾ï¼Œèµ„æºåˆ©ç”¨ç‡æœ‰æ‰€æå‡ã€‚</p>
<p><strong>ä¸»è¦ç¼ºç‚¹ï¼š</strong>å†…å­˜ä¸­ä»…èƒ½æœ‰ä¸€é“ç¨‹åºè¿è¡Œï¼Œåªæœ‰è¯¥ç¨‹åºè¿è¡Œç»“æŸä¹‹åæ‰èƒ½è°ƒå…¥ä¸‹ä¸€é“ç¨‹åºã€‚CPUæœ‰å¤§é‡çš„æ—¶é—´æ˜¯åœ¨ç©ºé—²ç­‰å¾…l/0å®Œæˆã€‚èµ„æºåˆ©ç”¨ç‡ä¾ç„¶å¾ˆä½ã€‚</p>
<h5 id="å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿ">2ï¼‰å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿ</h5>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220313110759912.png"
alt="å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿ" />
<figcaption aria-hidden="true">å¤šé“æ‰¹å¤„ç†ç³»ç»Ÿ</figcaption>
</figure>
<p><strong>ä¸»è¦ä¼˜ç‚¹ï¼š</strong>å¤šé“ç¨‹åºå¹¶å‘æ‰§è¡Œï¼Œå…±äº«è®¡ç®—æœºèµ„æºã€‚èµ„æºåˆ©ç”¨ç‡å¤§å¹…æå‡ï¼ŒCPUå’Œå…¶ä»–èµ„æºä¿æŒâ€œå¿™ç¢Œâ€çŠ¶æ€ï¼Œç³»ç»Ÿååé‡å¢å¤§ã€‚</p>
<p><strong>ä¸»è¦ç¼ºç‚¹ï¼š</strong>ç”¨æˆ·å“åº”æ—¶é—´é•¿ï¼Œæ²¡æœ‰äººæœºäº¤äº’åŠŸèƒ½ï¼ˆç”¨æˆ·æäº¤è‡ªå·±çš„ä½œä¸šï¼ˆç¨‹åºï¼‰ä¹‹åå°±åªèƒ½ç­‰å¾…è®¡ç®—æœºå¤„ç†å®Œæˆï¼Œä¸­é—´ä¸èƒ½æ§åˆ¶è‡ªå·±çš„ä½œä¸šæ‰§è¡Œï¼‰</p>
<h4 id="åˆ†æ—¶æ“ä½œç³»ç»Ÿ">3ã€åˆ†æ—¶æ“ä½œç³»ç»Ÿï¼š</h4>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220313111132639.png"
alt="åˆ†æ—¶æ“ä½œç³»ç»Ÿ" />
<figcaption aria-hidden="true">åˆ†æ—¶æ“ä½œç³»ç»Ÿ</figcaption>
</figure>
<p>â€‹
è®¡ç®—æœºä»¥<strong>æ—¶é—´ç‰‡</strong>ï¼ˆä¾‹å¦‚50msï¼‰ä¸ºå•ä½<strong>è½®æµä¸ºå„ä¸ªç”¨æˆ·/ä½œä¸šæœåŠ¡</strong>ï¼Œå„ä¸ªç”¨æˆ·å¯é€šè¿‡ç»ˆç«¯ä¸è®¡ç®—æœºè¿›è¡Œäº¤äº’ã€‚</p>
<p><strong>ç‹è¦ä¼˜ç‚¹ï¼šç”¨æˆ·è¯·æ±‚å¯ä»¥è¢«å³æ—¶å“åº”ï¼Œç¾¤å†³äº†äººæœºäº¤äº’é—®é¢˜ã€‚</strong>å…è®¸å¤šä¸ªç”¨å°¸åŒæ—¶ä½¿ç”¨ä¸€å°è®¡ç®—æœºï¼Œå¹¶ä¸”ç”¨æˆ·å¯¹è®¡ç®—æœºçš„æ“ä½œç›¸äº’ç‹¬ç«‹ï¼Œæ„Ÿå—ä¸åˆ°åˆ«äººçš„å­˜åœ¨ã€‚</p>
<p><strong>ä¸»è¦ç¼ºç‚¹ï¼š</strong>ä¸èƒ½ä¼˜å…ˆå¤„ç†ä¸€äº›ç´§æ€¥ä»»åŠ¡ã€‚æ“ä½œç³»ç»Ÿå¯¹å„ä¸ªç”¨æˆ·/ä½œä¸šéƒ½æ˜¯å®Œå…¨å…¬å¹³çš„ï¼Œå¾ªç¯åœ°ä¸ºæ¯ä¸ªç”¨æˆ·ä½œä¸šæœåŠ¡ä¸€ä¸ªæ—¶é—´ç‰‡ï¼Œ<strong>ä¸åŒºåˆ†ä»»åŠ¡çš„ç´§æ€¥æ€§</strong>ã€‚</p>
<h4 id="å®æ—¶æ“ä½œç³»ç»Ÿ">4ã€å®æ—¶æ“ä½œç³»ç»Ÿï¼š</h4>
<ul>
<li>ç¡¬å®æ—¶ç³»ç»Ÿï¼šå¿…é¡»åœ¨ç»å¯¹ä¸¥æ ¼çš„è§„å®šæ—¶é—´å†…å®Œæˆå¤„ç†ï¼ˆå¦‚å¯¼å¼¹æ§åˆ¶ç³»ç»Ÿã€è‡ªåŠ¨é©¾é©¶ç­‰ï¼‰</li>
<li>è½¯å®æ—¶ç³»ç»Ÿï¼šèƒ½æ¥å—å¶å°”è¿åæ—¶é—´è§„å®š</li>
</ul>
<p>ä¸»è¦ä¼˜ç‚¹ï¼šèƒ½å¤Ÿä¼˜å…ˆå“åº”ä¸€äº›ç´§æ€¥ä»»åŠ¡ï¼ŒæŸäº›ç´§æ€¥ä»»åŠ¡ä¸éœ€æ—¶é—´ç‰‡æ’é˜Ÿã€‚</p>
<p>åœ¨å®æ—¶æ“ä½œç³»ç»Ÿçš„æ§åˆ¶ä¸‹ï¼Œè®¡ç®—æœºç³»ç»Ÿæ¥æ”¶åˆ°å¤–éƒ¨ä¿¡å·å<strong>åŠæ—¶è¿›è¡Œå¤„ç†</strong>ï¼Œå¹¶ä¸”è¦åœ¨ä¸¥æ ¼çš„æ—¶é™å†…å¤„ç†å®Œäº‹ä»¶ã€‚å®æ—¶æ“ä½œç³»ç»Ÿçš„ä¸»è¦ç‰¹ç‚¹æ˜¯<strong>åŠæ—¶æ€§å’Œå¯é æ€§</strong></p>
<h4 id="å…¶ä»–æ“ä½œç³»ç»Ÿ">5ã€å…¶ä»–æ“ä½œç³»ç»Ÿï¼š</h4>
<ul>
<li>ç½‘ç»œæ“ä½œç³»ç»Ÿï¼šæ˜¯ä¼´éšç€è®¡ç®—æœºç½‘ç»œçš„å‘å±•è€Œè¯ç”Ÿçš„ï¼Œèƒ½æŠŠç½‘ç»œä¸­å„ä¸ªè®¡ç®—æœºæœ‰æœºåœ°ç»“åˆèµ·æ¥ï¼Œå®ç°æ•°æ®ä¼ é€ç­‰åŠŸèƒ½ï¼Œå®ç°ç½‘ç»œä¸­å„ç§èµ„æºçš„å…±äº«ï¼ˆå¦‚æ–‡ä»¶å…±äº«ï¼‰å’Œå„å°è®¡ç®—æœºä¹‹é—´çš„é€šä¿¡ã€‚ï¼ˆå¦‚ï¼šWindows
NTå°±æ˜¯ä¸€ç§å…¸å‹çš„ç½‘ç»œæ“ä½œç³»ç»Ÿï¼Œç½‘ç«™æœåŠ¡å™¨å°±å¯ä»¥ä½¿ç”¨ï¼‰</li>
<li>åˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿï¼šä¸»è¦ç‰¹ç‚¹æ˜¯<strong>åˆ†å¸ƒæ€§å’Œå¹¶è¡Œæ€§</strong>ã€‚ç³»ç»Ÿä¸­çš„å„å°è®¡ç®—æœºåœ°ä½ç›¸åŒï¼Œä»»ä½•å·¥ä½œéƒ½å¯ä»¥åˆ†å¸ƒåœ¨è¿™äº›è®¡ç®—æœºä¸Šï¼Œç”±å®ƒä»¬å¹¶è¡Œã€ååŒå®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚</li>
<li>ä¸ªäººè®¡ç®—æœºæ“ä½œç³»ç»Ÿï¼šå¦‚WindowsXPã€MacOsï¼Œæ–¹ä¾¿ä¸ªäººä½¿ç”¨ã€‚</li>
</ul>
<h3 id="å››æ“ä½œç³»ç»Ÿçš„è¿è¡Œæœºåˆ¶">å››ã€æ“ä½œç³»ç»Ÿçš„è¿è¡Œæœºåˆ¶ï¼š</h3>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220313111750626.png"
alt="â€œæŒ‡ä»¤â€å’Œ&quot;ä»£ç &quot;çš„åŒºåˆ«" />
<figcaption aria-hidden="true">â€œæŒ‡ä»¤â€å’Œ"ä»£ç "çš„åŒºåˆ«</figcaption>
</figure>
<h4 id="ä¸¤ç§æŒ‡ä»¤">1ã€ä¸¤ç§æŒ‡ä»¤ï¼š</h4>
<h5 id="ç‰¹æƒæŒ‡ä»¤å¦‚å†…å­˜æ¸…é›¶æŒ‡ä»¤ä¸å…è®¸ç”¨æˆ·ç¨‹åºä½¿ç”¨">1ï¼‰
ç‰¹æƒæŒ‡ä»¤ï¼šå¦‚å†…å­˜æ¸…é›¶æŒ‡ä»¤ï¼Œä¸å…è®¸ç”¨æˆ·ç¨‹åºä½¿ç”¨</h5>
<h5 id="éç‰¹æƒæŒ‡ä»¤å¦‚æ™®é€šçš„è¿ç®—æŒ‡ä»¤">2ï¼‰
éç‰¹æƒæŒ‡ä»¤ï¼šå¦‚æ™®é€šçš„è¿ç®—æŒ‡ä»¤</h5>
<h4 id="ä¸¤ç§å¤„ç†å™¨çŠ¶æ€">2ã€ä¸¤ç§å¤„ç†å™¨çŠ¶æ€ï¼š</h4>
<p>ç”¨äºåˆ¤æ–­å½“å‰æ˜¯å¦å¯ä»¥æ‰§è¡Œç‰¹æƒæŒ‡ä»¤</p>
<h5 id="ç”¨æˆ·æ€ç›®æ€åªèƒ½æ‰§è¡Œéç‰¹æƒæŒ‡ä»¤">1ï¼‰
ç”¨æˆ·æ€ï¼ˆç›®æ€ï¼‰ï¼šåªèƒ½æ‰§è¡Œéç‰¹æƒæŒ‡ä»¤</h5>
<h5 id="æ ¸å¿ƒæ€ç®¡æ€ä¸¤ç§æŒ‡ä»¤éƒ½å¯ä»¥æ‰§è¡Œ">2ï¼‰
æ ¸å¿ƒæ€ï¼ˆç®¡æ€ï¼‰ï¼šä¸¤ç§æŒ‡ä»¤éƒ½å¯ä»¥æ‰§è¡Œ</h5>
<h4 id="ä¸¤ç§ç¨‹åº">3ã€ä¸¤ç§ç¨‹åºï¼š</h4>
<h5 id="å†…æ ¸ç¨‹åº">1ï¼‰å†…æ ¸ç¨‹åºï¼š</h5>
<p>â€‹
æ“ä½œç³»ç»Ÿçš„å†…æ ¸ç¨‹åºæ˜¯ç³»ç»Ÿçš„ç®¡ç†è€…ï¼Œæ—¢å¯ä»¥æ‰§è¡Œç‰¹æƒæŒ‡ä»¤ï¼Œä¹Ÿå¯ä»¥æ‰§è¡Œéç‰¹æƒæŒ‡ä»¤ï¼Œè¿è¡Œåœ¨æ ¸å¿ƒæ€ã€‚</p>
<h5 id="åº”ç”¨ç¨‹åº">2ï¼‰åº”ç”¨ç¨‹åºï¼š</h5>
<p>â€‹
ä¸ºäº†ä¿è¯ç³»ç»Ÿèƒ½å®‰å…¨è¿è¡Œï¼Œæ™®é€šåº”ç”¨ç¨‹åºåªèƒ½æ‰§è¡Œéç‰¹æƒæŒ‡ä»¤ï¼Œè¿è¡Œåœ¨ç”¨æˆ·æ€</p>
<h3 id="äº”æ“ä½œç³»ç»Ÿå†…æ ¸">äº”ã€æ“ä½œç³»ç»Ÿå†…æ ¸ï¼š</h3>
<h4 id="å†…æ ¸æ€»è§ˆç¤ºæ„å›¾">1ã€å†…æ ¸æ€»è§ˆç¤ºæ„å›¾ï¼š</h4>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220313112448980.png"
alt="è®¡ç®—æœºç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„" />
<figcaption aria-hidden="true">è®¡ç®—æœºç³»ç»Ÿçš„å±‚æ¬¡ç»“æ„</figcaption>
</figure>
<p>â€‹ <strong>åŸå­æ€§</strong>æŒ‡è¯¥ç¨‹åºåœ¨å¼€å§‹æ‰§è¡Œåï¼Œä¸­é—´ä¸èƒ½è¢«ä¸­æ–­ã€‚</p>
<p>â€‹
å†…æ ¸æ˜¯è®¡ç®—æœºä¸Šé…ç½®çš„åº•å±‚è½¯ä»¶ï¼Œæ˜¯æ“ä½œç³»ç»Ÿæœ€åŸºæœ¬ã€æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ã€‚å®ç°æ“ä½œç³»ç»Ÿå†…æ ¸åŠŸèƒ½çš„é‚£äº›ç¨‹åºå°±æ˜¯å†…æ ¸ç¨‹åºã€‚</p>
<h4 id="æ“ä½œç³»ç»Ÿçš„ä½“ç³»ç»“æ„">2ã€æ“ä½œç³»ç»Ÿçš„ä½“ç³»ç»“æ„ï¼š</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220313112907278.png" /></p>
<h5 id="å¤§å†…æ ¸">1ï¼‰ å¤§å†…æ ¸ï¼š</h5>
<p>å°†æ“ä½œç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½æ¨¡å—éƒ½ä½œä¸ºç³»ç»Ÿå†…æ ¸ï¼Œè¿è¡Œåœ¨æ ¸å¿ƒæ€</p>
<p>ä¼˜ç‚¹ï¼šé«˜æ€§èƒ½</p>
<p>ç¼ºç‚¹ï¼šå†…æ ¸ä»£ç åºå¤§ï¼Œç»“æ„æ··ä¹±ï¼Œéš¾ä»¥ç»´æŠ¤</p>
<h5 id="å¾®å†…æ ¸">2ï¼‰å¾®å†…æ ¸ï¼š</h5>
<p>åªæŠŠæœ€åŸºæœ¬çš„åŠŸèƒ½ä¿ç•™åœ¨å†…æ ¸</p>
<p>ä¼˜ç‚¹ï¼šå†…æ ¸åŠŸèƒ½å°‘ï¼Œç»“æ„æ¸…æ™°ï¼Œæ–¹ä¾¿ç»´æŠ¤</p>
<p>ç¼ºç‚¹ï¼šéœ€è¦é¢‘ç¹åœ°åœ¨æ ¸å¿ƒæ€å’Œç”¨æˆ·æ€ä¹‹é—´åˆ‡æ¢ï¼Œæ€§èƒ½ä½</p>
<h3 id="å…­ä¸­æ–­å’Œå¼‚å¸¸">å…­ã€ä¸­æ–­å’Œå¼‚å¸¸ï¼š</h3>
<h4 id="ä¸­æ–­æœºåˆ¶çš„è¯ç”Ÿç¼˜ç”±">1ã€ä¸­æ–­æœºåˆ¶çš„è¯ç”Ÿç¼˜ç”±ï¼š</h4>
<p>â€‹
æ—©æœŸè®¡ç®—æœºå„ä¸ªç¨‹åºåªèƒ½ä¸²è¡Œæ‰§è¡Œç¨‹åºï¼Œç³»ç»Ÿèµ„æºåˆ©ç”¨ç‡ä¼šè¾ƒä½ã€‚ä¸ºäº†è§£å†³è¯¥é—®é¢˜ï¼Œå°±å‘æ˜äº†æ“ä½œç³»ç»Ÿï¼Œå¼•å…¥ä¸­æ–­æœºåˆ¶ï¼Œå®ç°äº†å¤šé“ç¨‹åºçš„å¹¶å‘æ‰§è¡Œã€‚</p>
<p><strong>æœ¬è´¨</strong>ï¼š
å‘ç”Ÿä¸­æ–­ï¼Œå°±æ„å‘³ç€éœ€è¦æ“ä½œç³»ç»Ÿæ¥å…¥ï¼Œè¿›è¡Œç®¡ç†.å…·ä½“å¦‚ä¸‹:</p>
<p>â€‹
æˆ‘ä»¬å‡è®¾3ä¸ªè¿›ç¨‹åŒæ—¶æ”¾å…¥å†…å­˜ä¸­è¿›è¡Œæ‰§è¡Œ,é¦–å…ˆCPUæ‰§è¡Œè¿›ç¨‹1,ä¸€æ®µæ—¶é—´å,CPUæ”¶åˆ°è®¡æ—¶ç¡¬ä»¶å‘å‡ºçš„ä¸­æ–­ä¿¡å·,å°±ä¼šåˆ‡æ¢è‡³<strong>æ ¸å¿ƒæ€</strong>,CPUçŸ¥æ™“è¿›ç¨‹1çš„æ—¶é—´ç‰‡å·²ç»ç”¨å®Œäº†,å°±åˆ‡æ¢è¿›ç¨‹2è¿è¡Œ.å®Œæˆè¯¥ç³»åˆ—æ“ä½œå,CPUåˆä¼šåˆ‡æ¢è‡³<strong>ç”¨æˆ·æ€</strong>,ç„¶åå¼€å§‹è¿è¡Œè¿›ç¨‹2,åœ¨è¿›ç¨‹2è¿è¡Œè¿‡ç¨‹ä¸­,è¿›ç¨‹2å‘å‡º<strong>ç³»ç»Ÿè°ƒç”¨(å†…ä¸­æ–­ä¿¡å·)</strong>,è¯·æ±‚è¾“å‡º.<strong>(ç”±äºè¾“å…¥è¾“å‡ºæ˜¯ç‰¹æƒæŒ‡ä»¤,æ™®é€šç¨‹åºä¸èƒ½ç›´æ¥è°ƒç”¨,åªèƒ½é€šè¿‡å‘æ“ä½œç³»ç»Ÿç”³è¯·,å³ä¸»åŠ¨å‘å‡ºä¸­æ–­ä¿¡å·)</strong>,æ­¤æ—¶CPUå°†åˆ‡æ¢åˆ°<strong>æ ¸å¿ƒæ€</strong>,<strong>ç”±æ“ä½œç³»ç»Ÿå†…æ ¸è¿›è¡Œæ¥ç®¡</strong>,è´Ÿè´£æ‰§è¡Œè¾“å‡ºå†…å®¹,æ¯”å¦‚å…¶è®©æ‰“å°æœºIOè®¾å¤‡å¼€å§‹å·¥ä½œ,<strong>æ­¤æ—¶è¿›ç¨‹2å°±éœ€è¦æš‚åœè¿è¡Œç­‰å¾…IOå®Œæˆ,æ•…è€Œæ“ä½œç³»ç»Ÿæ­¤æ—¶è®©è¿›ç¨‹3å…ˆè¿è¡Œ</strong>.CPUé‡æ–°åˆ‡æ¢ä¸º<strong>ç”¨æˆ·æ€,</strong>æ‰§è¡Œè¿›ç¨‹3.åœ¨CPUæ‰§è¡Œè¿›ç¨‹3çš„è¿‡ç¨‹ä¸­,IOä¹Ÿåœ¨åŒæ­¥è¿›è¡Œ,å½“IOå®Œæˆæ—¶,IOè®¾å¤‡(æ‰“å°æœº)å°±ä¼šå‘CPUå‘å‡ºä¸­æ–­ä¿¡å·,CPUæ”¶åˆ°IOè®¾å¤‡å‘æ¥çš„ä¸­æ–­ä¿¡å·,åˆä¼šåˆ‡æ¢è‡³<strong>æ ¸å¿ƒæ€</strong>,<strong>äº¤ç”±æ“ä½œç³»ç»Ÿå†…æ ¸è¿›è¡Œå¤„ç†</strong>.æ­¤æ—¶,æ“ä½œç³»ç»Ÿå‘ç°æ˜¯è¿›ç¨‹2çš„IOç»“æŸäº†,å°±ä¼šè®©è¿›ç¨‹2æ¢å¤è¿è¡Œ,CPUåˆ‡æ¢ä¸ºç”¨æˆ·æ€.è¿›ç¨‹2ç»§ç»­å®Œæˆå†…å®¹.</p>
<h4 id="ä¸­æ–­çš„æ¦‚å¿µå’Œä½œç”¨">2ã€ä¸­æ–­çš„æ¦‚å¿µå’Œä½œç”¨ï¼š</h4>
<ul>
<li>å½“ä¸­æ–­å‘ç”Ÿæ—¶ï¼ŒCPUç«‹å³è¿›å…¥æ ¸å¿ƒæ€</li>
<li>å½“ä¸­æ–­å‘ç”Ÿåï¼Œå½“å‰è¿è¡Œçš„è¿›ç¨‹æš‚åœè¿è¡Œï¼Œå¹¶ç”±æ“ä½œç³»ç»Ÿå†…æ ¸å¯¹ä¸­æ–­è¿›è¡Œå¤„ç†</li>
<li>å¯¹äºä¸åŒçš„ä¸­æ–­ä¿¡å·ï¼Œä¼šè¿›è¡Œä¸åŒçš„å¤„ç†</li>
</ul>
<p>â€‹
å‘ç”Ÿäº†ä¸­æ–­ï¼Œå°±æ„å‘³ç€éœ€è¦<strong>æ“ä½œç³»ç»Ÿä»‹å…¥ï¼Œå¼€å±•ç®¡ç†å·¥ä½œã€‚</strong>ç”±äºæ“ä½œç³»ç»Ÿçš„ç®¡ç†å·¥ä½œï¼ˆæ¯”å¦‚è¿›ç¨‹åˆ‡æ¢ã€åˆ†é…I/Oè®¾å¤‡ç­‰ï¼‰éœ€è¦ä½¿ç”¨ç‰¹æƒæŒ‡ä»¤ï¼Œå› æ­¤CPUè¦ä»<strong>ç”¨æˆ·æ€è½¬ä¸ºæ ¸å¿ƒæ€</strong>ã€‚<strong>ä¸­æ–­å¯ä»¥ä½¿CPUä»ç”¨æˆ·æ€åˆ‡æ¢ä¸ºæ ¸å¿ƒæ€ï¼Œä½¿æ“ä½œç³»ç»Ÿè·å¾—è®¡ç®—æœºçš„æ§åˆ¶æƒã€‚</strong>
<strong>æœ‰äº†ä¸­æ–­ï¼Œæ‰èƒ½å®ç°å¤šé“ç¨‹åºå¹¶å‘æ‰§è¡Œã€‚</strong></p>
<p><strong>ç”¨æˆ·æ€</strong>åˆ°<strong>æ ¸å¿ƒæ€</strong>çš„åˆ‡æ¢æ˜¯é€šè¿‡<strong>ä¸­æ–­</strong>å®ç°çš„ï¼Œå¹¶ä¸”ä¸­æ–­æ˜¯å”¯ä¸€é€”å¾„ã€‚</p>
<p><strong>æ ¸å¿ƒæ€</strong>åˆ°<strong>ç”¨æˆ·æ€</strong>çš„åˆ‡æ¢æ˜¯é€šè¿‡<strong>æ‰§è¡Œä¸€ä¸ªç‰¹æƒæŒ‡ä»¤ï¼Œå°†PSWæ ‡å¿—ä½è®¾ç½®</strong>å®ç°çš„ã€‚</p>
<h4 id="ä¸­æ–­çš„åˆ†ç±»">3ã€ä¸­æ–­çš„åˆ†ç±»:</h4>
<p>ä¸¤è€…çš„æœ¬è´¨åŒºåˆ«ï¼š
ä¿¡å·çš„æ¥æºæ˜¯CPUå†…éƒ¨è¿˜æ˜¯CPUå¤–éƒ¨ã€‚ä¸å½“å‰çš„æ‰§è¡Œçš„æŒ‡ä»¤æ˜¯å¦æœ‰å…³</p>
<h5
id="å†…ä¸­æ–­å¼‚å¸¸ä¾‹å¤–é™·å…¥-æ¥æºäºcpuå†…éƒ¨ä¸å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤æœ‰å…³">1ï¼‰å†…ä¸­æ–­ï¼ˆå¼‚å¸¸ã€ä¾‹å¤–ã€é™·å…¥ï¼‰ï¼š
æ¥æºäºCPUå†…éƒ¨ï¼Œä¸å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤æœ‰å…³</h5>
<ul>
<li>æŒ‡ä»¤ä¸­æ–­ï¼šç³»ç»Ÿè°ƒç”¨</li>
<li>å¼ºè¿«ä¸­æ–­
<ul>
<li>ç¡¬ä»¶æ•…éšœ</li>
<li>è½¯ä»¶ä¸­æ–­ï¼ˆå¦‚æ•´æ•°é™¤0ï¼‰</li>
</ul></li>
</ul>
<h5
id="å¤–ä¸­æ–­æ¥æºäºcpuå¤–éƒ¨ä¸å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤æ— å…³">2ï¼‰å¤–ä¸­æ–­ï¼šæ¥æºäºCPUå¤–éƒ¨ï¼Œä¸å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤æ— å…³</h5>
<ul>
<li>å¤–è®¾è¯·æ±‚ï¼šI/0æ“ä½œå®Œæˆå‘å‡ºçš„ä¸­æ–­ä¿¡å·</li>
<li>äººå·¥å¹²é¢„ï¼šç”¨æˆ·å¼ºè¡Œç»ˆæ­¢ä¸€ä¸ªè¿›ç¨‹</li>
</ul>
<p>å¦ä¸€ç§åˆ†ç±»ï¼š</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220313130033093.png"
alt="å¦ä¸€ç§ä¸­æ–­çš„åˆ†ç±»" />
<figcaption aria-hidden="true">å¦ä¸€ç§ä¸­æ–­çš„åˆ†ç±»</figcaption>
</figure>
<h4 id="å¤–ä¸­æ–­çš„å¤„ç†è¿‡ç¨‹">4ã€å¤–ä¸­æ–­çš„å¤„ç†è¿‡ç¨‹ï¼š</h4>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220313130249004.png"
alt="å¤–ä¸­æ–­çš„å¤„ç†è¿‡ç¨‹" />
<figcaption aria-hidden="true">å¤–ä¸­æ–­çš„å¤„ç†è¿‡ç¨‹</figcaption>
</figure>
<ul>
<li>Step1ï¼šæ‰§è¡Œå®Œæ¯ä¸ªæŒ‡ä»¤ä¹‹åï¼ŒCPUéƒ½è¦æ£€æŸ¥å½“å‰æ˜¯å¦æœ‰å¤–éƒ¨ä¸­æ–­ä¿¡å·</li>
<li>Step2ï¼šå¦‚æœæ£€æµ‹åˆ°å¤–éƒ¨ä¸­æ–­ä¿¡å·ï¼Œåˆ™éœ€è¦ä¿æŠ¤è¢«ä¸­æ–­è¿›ç¨‹çš„CPUç¯å¢ƒï¼ˆå¦‚ç¨‹åºçŠ¶æ€å­—PSWã€ç¨‹åºè®¡æ•°å™¨PCã€å„ç§é€šç”¨å¯„å­˜å™¨)</li>
<li>Step3ï¼šæ ¹æ®ä¸­æ–­ä¿¡å·ç±»å‹è½¬å…¥ç›¸åº”çš„ä¸­æ–­å¤„ç†ç¨‹åº</li>
<li>Step 4ï¼šæ¢å¤åŸè¿›ç¨‹çš„CPUç¯å¢ƒå¹¶é€€å‡ºä¸­æ–­ï¼Œè¿”å›åŸè¿›ç¨‹ç»§ç»­å¾€ä¸‹æ‰§è¡Œ</li>
</ul>
<h3 id="ä¸ƒç³»ç»Ÿè°ƒç”¨">ä¸ƒã€ç³»ç»Ÿè°ƒç”¨ï¼š</h3>
<h4 id="ä»€ä¹ˆæ˜¯ç³»ç»Ÿè°ƒç”¨">1ã€ä»€ä¹ˆæ˜¯ç³»ç»Ÿè°ƒç”¨ï¼š</h4>
<p>â€‹
æ“ä½œç³»ç»Ÿä½œä¸ºç”¨æˆ·å’Œè®¡ç®—æœºç¡¬ä»¶ä¹‹é—´çš„æ¥å£ï¼Œéœ€è¦å‘ä¸Šæä¾›ä¸€äº›ç®€å•æ˜“ç”¨çš„æœåŠ¡ã€‚ä¸»è¦åŒ…æ‹¬å‘½ä»¤æ¥å£å’Œç¨‹åºæ¥å£ã€‚å…¶ä¸­ï¼Œç¨‹åºæ¥å£ç”±<strong>ä¸€ç»„ç³»ç»Ÿè°ƒç”¨ç»„æˆ</strong>ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220313141435648.png" /></p>
<p>â€‹
â€œç³»ç»Ÿè°ƒç”¨â€æ˜¯<strong>æ“ä½œç³»ç»Ÿæä¾›ç»™åº”ç”¨ç¨‹åº</strong>ï¼ˆç¨‹åºå‘˜/ç¼–ç¨‹äººå‘˜)ä½¿ç”¨çš„æ¥å£ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ç§<strong>å¯ä¾›åº”ç”¨ç¨‹åºè°ƒç”¨çš„ç‰¹æ®Šå‡½æ•°ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥å‘å‡ºç³»ç»Ÿè°ƒç”¨è¯·æ±‚æ¥è·å¾—æ“ä½œç³»ç»Ÿçš„æœåŠ¡</strong>ã€‚</p>
<p>â€‹</p>
<h4 id="ç³»ç»Ÿè°ƒç”¨æœ‰ä»€ä¹ˆä½œç”¨">2ã€ç³»ç»Ÿè°ƒç”¨æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h4>
<p>â€‹
<strong>åº”ç”¨ç¨‹åºé€šè¿‡ç³»ç»Ÿè°ƒç”¨è¯·æ±‚æ“ä½œç³»ç»Ÿçš„æœåŠ¡ã€‚ç³»ç»Ÿä¸­çš„å„ç§å…±äº«èµ„æºéƒ½ç”±æ“ä½œç³»ç»Ÿç»Ÿä¸€æŒç®¡ï¼Œå› æ­¤åœ¨ç”¨æˆ·ç¨‹åºä¸­ï¼Œå‡¡æ˜¯ä¸èµ„æºæœ‰å…³çš„æ“ä½œï¼ˆå¦‚å­˜å‚¨åˆ†é…ã€I/Oæ“ä½œã€æ–‡ä»¶ç®¡ç†ç­‰ï¼‰ï¼Œéƒ½å¿…é¡»é€šè¿‡ç³»ç»Ÿè°ƒç”¨çš„æ–¹å¼å‘æ“ä½œç³»ç»Ÿæå‡ºæœåŠ¡è¯·æ±‚ï¼Œç”±æ“ä½œç³»ç»Ÿä»£ä¸ºå®Œæˆã€‚è¿™æ ·å¯ä»¥ä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ï¼Œé˜²æ­¢ç”¨æˆ·è¿›è¡Œéæ³•æ“ä½œã€‚</strong></p>
<p><strong>ç³»ç»Ÿè°ƒç”¨</strong>ä¼šä½¿å¾—å¤„ç†å™¨ä»<strong>ç”¨æˆ·æ€</strong>è¿›å…¥<strong>æ ¸å¿ƒæ€</strong>ã€‚</p>
<h4 id="ç³»ç»Ÿè°ƒç”¨åˆ†ç±»">3ã€ç³»ç»Ÿè°ƒç”¨åˆ†ç±»ï¼š</h4>
<p>â€‹
ç³»ç»Ÿè°ƒç”¨ç›¸å…³å¤„ç†æ¶‰åŠåˆ°å¯¹ç³»ç»Ÿèµ„æºçš„ç®¡ç†ã€å¯¹è¿›ç¨‹çš„æ§åˆ¶ï¼Œè¿™äº›åŠŸèƒ½éœ€è¦æ‰§è¡Œä¸€äº›ç‰¹æƒæŒ‡ä»¤æ‰èƒ½å®Œæˆï¼Œå› æ­¤ç³»ç»Ÿè°ƒç”¨çš„ç›¸å…³å¤„ç†éœ€è¦åœ¨æ ¸å¿ƒæ€ä¸‹è¿›è¡Œã€‚</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220313142304849.png"
alt="ç³»ç»Ÿè°ƒç”¨åˆ†ç±»" />
<figcaption aria-hidden="true">ç³»ç»Ÿè°ƒç”¨åˆ†ç±»</figcaption>
</figure>
<h4 id="ç³»ç»Ÿè°ƒç”¨ä¸åº“å‡½æ•°çš„åŒºåˆ«">4ã€ç³»ç»Ÿè°ƒç”¨ä¸åº“å‡½æ•°çš„åŒºåˆ«ï¼š</h4>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220313142453847.png" style="zoom:50%;" /></p>
<p>ä»ä¸‹å±‚è‡³ä¸Šå±‚å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>è£¸æœº</strong></li>
<li><strong>æ“ä½œç³»ç»Ÿ</strong>ï¼šå‘ä¸Šæä¾›ç³»ç»Ÿè°ƒç”¨</li>
<li><strong>ç¼–ç¨‹è¯­è¨€</strong>ï¼šå‘ä¸Šæä¾›åº“å‡½æ•°ã€‚æœ‰æ—¶ä¼šå°†ç³»ç»Ÿè°ƒç”¨å°è£…æˆåº“å‡½æ•°ï¼Œä»¥éšè—ç³»ç»Ÿè°ƒç”¨çš„ä¸€äº›ç»†èŠ‚ï¼Œä½¿ä¸Šå±‚è¿›è¡Œç³»ç»Ÿè°ƒç”¨æ›´åŠ æ–¹ä¾¿ã€‚</li>
<li><strong>æ™®é€šåº”ç”¨ç¨‹åº</strong>ï¼šå¯ç›´æ¥è¿›è¡Œç³»ç»Ÿè°ƒç”¨ï¼Œä¹Ÿå¯ä½¿ç”¨åº“å‡½æ•°ã€‚</li>
</ul>
<p>æ³¨æ„ï¼šæœ‰çš„åº“å‡½æ•°æ¶‰åŠç³»ç»Ÿè°ƒç”¨ï¼Œæœ‰çš„ä¸æ¶‰åŠ</p>
<h4 id="ç³»ç»Ÿè°ƒç”¨èƒŒåçš„è¿‡ç¨‹">5ã€ç³»ç»Ÿè°ƒç”¨èƒŒåçš„è¿‡ç¨‹ï¼š</h4>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220313142828536.png"
alt="ç³»ç»Ÿè°ƒç”¨èƒŒåçš„è¿‡ç¨‹" />
<figcaption aria-hidden="true">ç³»ç»Ÿè°ƒç”¨èƒŒåçš„è¿‡ç¨‹</figcaption>
</figure>
<p><code>int x</code>æŒ‡ä»¤çš„å‚æ•°xï¼ŒæŒ‡æ˜äº†ç³»ç»Ÿè°ƒç”¨å·ã€‚æ­¤å¤„çš„intæ˜¯interruptçš„ç¼©å†™ï¼Œæ‰§è¡Œè¯¥æŒ‡ä»¤åï¼Œæƒé™å°±äº¤ç»™äº†æ“ä½œç³»ç»Ÿæ¥æ¥ç®¡ï¼Œåˆ‡æ¢è‡³æ ¸å¿ƒæ€å¤„ç†ç³»ç»Ÿè°ƒç”¨ç›¸å…³ä»£ç ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong></p>
<p>1.é™·å…¥æŒ‡ä»¤æ˜¯åœ¨<strong>ç”¨æˆ·æ€æ‰§è¡Œçš„</strong>ï¼Œæ‰§è¡Œé™·å…¥æŒ‡ä»¤ä¹‹åç«‹å³å¼•å‘ä¸€ä¸ªå†…ä¸­æ–­ï¼Œä»è€ŒCPUè¿›å…¥æ ¸å¿ƒæ€
2.<strong>å‘å‡ºç³»ç»Ÿè°ƒç”¨è¯·æ±‚æ˜¯åœ¨ç”¨æˆ·æ€</strong>ï¼Œè€Œå¯¹ç³»ç»Ÿè°ƒç”¨çš„ç›¸åº”å¤„ç†åœ¨æ ¸å¿ƒæ€ä¸‹è¿›è¡Œ
3.<strong>é™·å…¥æŒ‡ä»¤æ˜¯å”¯ä¸€ä¸€ä¸ªåªèƒ½åœ¨ç”¨æˆ·æ€æ‰§è¡Œï¼Œè€Œä¸å¯åœ¨æ ¸å¿ƒæ€æ‰§è¡Œçš„æŒ‡ä»¤</strong></p>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ“ä½œç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Operating System</tag>
      </tags>
  </entry>
  <entry>
    <title>2.2 å¤„ç†æœºè°ƒåº¦åŠç›¸å…³ç®—æ³•</title>
    <url>/2022/03/25/9887f629bb62/</url>
    <content><![CDATA[<p>ç¬”è®°è¯¾ç¨‹è§†é¢‘ï¼šhttps://www.bilibili.com/video/BV1YE411D7nH?p=13</p>
<h3 id="ä¸€å¤„ç†æœºè°ƒåº¦-æ¦‚å¿µä¸å±‚æ¬¡">ä¸€ã€å¤„ç†æœºè°ƒåº¦ æ¦‚å¿µä¸å±‚æ¬¡</h3>
<h4 id="è°ƒåº¦çš„åŸºæœ¬æ¦‚å¿µ">1ã€è°ƒåº¦çš„åŸºæœ¬æ¦‚å¿µï¼š</h4>
<p>â€‹
å½“æœ‰ä¸€å †ä»»åŠ¡è¦å¤„ç†ï¼Œä½†ç”±äºèµ„æºæœ‰é™ï¼Œè¿™äº›äº‹æƒ…æ²¡æ³•åŒæ—¶å¤„ç†ã€‚è¿™å°±éœ€è¦ç¡®å®šæŸç§è§„åˆ™æ¥å†³å®šå¤„ç†è¿™äº›ä»»åŠ¡çš„é¡ºåºï¼Œè¿™å°±æ˜¯â€œè°ƒåº¦â€ç ”ç©¶çš„é—®é¢˜ã€‚</p>
<p>â€‹
åœ¨å¤šé“ç¨‹åºç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹çš„æ•°é‡å¾€å¾€æ˜¯å¤šäºå¤„ç†æœºçš„ä¸ªæ•°çš„ï¼Œè¿™æ ·ä¸å¯èƒ½åŒæ—¶å¹¶è¡Œåœ°å¤„ç†å„ä¸ªè¿›ç¨‹ã€‚<strong>å¤„ç†æœºè°ƒåº¦ï¼Œå°±æ˜¯ä»å°±ç»ªé˜Ÿåˆ—ä¸­æŒ‰ç…§ä¸€å®šçš„ç®—æ³•é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹å¹¶å°†å¤„ç†æœºåˆ†é…ç»™å®ƒè¿è¡Œï¼Œä»¥å®ç°è¿›ç¨‹çš„å¹¶å‘æ‰§è¡Œã€‚</strong></p>
<h4
id="è°ƒåº¦çš„ä¸‰ä¸ªå±‚æ¬¡é«˜çº§è°ƒåº¦ä½œä¸šè°ƒåº¦">2ã€è°ƒåº¦çš„ä¸‰ä¸ªå±‚æ¬¡â€”é«˜çº§è°ƒåº¦ï¼ˆä½œä¸šè°ƒåº¦ï¼‰ï¼š</h4>
<p>â€‹
<strong>æŒ‰ä¸€å®šçš„åŸåˆ™ä»å¤–å­˜ä¸Šå¤„äºåå¤‡é˜Ÿåˆ—çš„ä½œä¸šä¸­æŒ‘é€‰ä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰ä½œä¸šï¼Œç»™ä»–ä»¬åˆ†é…å†…å­˜ç­‰å¿…è¦èµ„æºï¼Œå¹¶å»ºç«‹ç›¸åº”çš„è¿›ç¨‹ï¼ˆå»ºç«‹PCBï¼‰ï¼Œä»¥ä½¿å®ƒï¼ˆä»¬ï¼‰è·å¾—ç«äº‰å¤„ç†æœºçš„æƒåˆ©ã€‚</strong></p>
<ul>
<li>ç”±äºå†…å­˜ç©ºé—´æœ‰é™ï¼Œæœ‰æ—¶æ— æ³•å°†ç”¨æˆ·æäº¤çš„ä½œä¸šå…¨éƒ¨æ”¾å…¥å†…å­˜ï¼Œå› æ­¤å°±éœ€è¦ç¡®å®šæŸç§è§„åˆ™æ¥å†³å®šå°†ä½œä¸šè°ƒå…¥å†…å­˜çš„é¡ºåºã€‚</li>
<li>é«˜çº§è°ƒåº¦æ˜¯è¾…å­˜ï¼ˆå¤–å­˜ï¼‰ä¸å†…å­˜ä¹‹é—´çš„è°ƒåº¦ã€‚</li>
<li>æ¯ä¸ªä½œä¸šåªè°ƒå…¥ä¸€æ¬¡ï¼Œè°ƒå‡ºä¸€æ¬¡ã€‚</li>
<li>ä½œä¸šè°ƒå…¥æ—¶ä¼šå»ºç«‹ç›¸åº”çš„PCBï¼Œä½œä¸šè°ƒå‡ºæ—¶æ‰æ’¤é”€PCBã€‚</li>
</ul>
<p>â€‹
<strong>é«˜çº§è°ƒåº¦ä¸»è¦æ˜¯æŒ‡è°ƒå…¥çš„é—®é¢˜ï¼Œå› ä¸ºåªæœ‰è°ƒå…¥çš„æ—¶æœºéœ€è¦æ“ä½œç³»ç»Ÿæ¥ç¡®å®šï¼Œä½†è°ƒå‡ºçš„æ—¶æœºå¿…ç„¶æ˜¯ä½œä¸šè¿è¡Œç»“æŸæ‰è°ƒå‡ºã€‚</strong></p>
<h4
id="è°ƒåº¦çš„ä¸‰ä¸ªå±‚æ¬¡ä¸­çº§è°ƒåº¦å†…å­˜è°ƒåº¦">3ã€è°ƒåº¦çš„ä¸‰ä¸ªå±‚æ¬¡â€”ä¸­çº§è°ƒåº¦ï¼ˆå†…å­˜è°ƒåº¦ï¼‰ï¼š</h4>
<p>â€‹ å¼•å…¥äº†è™šæ‹Ÿå­˜å‚¨æŠ€æœ¯ä¹‹åï¼Œå¯å°†æš‚æ—¶ä¸èƒ½è¿è¡Œçš„è¿›ç¨‹è°ƒè‡³å¤–å­˜ç­‰å¾…ã€‚</p>
<p>â€‹
ç­‰å®ƒé‡æ–°å…·å¤‡äº†è¿è¡Œæ¡ä»¶ä¸”å†…å­˜åˆç¨æœ‰ç©ºé—²æ—¶ï¼Œå†é‡æ–°è°ƒå…¥å†…å­˜ã€‚<strong>è¿™ä¹ˆåšçš„ç›®çš„æ˜¯ä¸ºäº†æé«˜å†…å­˜åˆ©ç”¨ç‡å’Œç³»ç»Ÿååé‡ã€‚</strong></p>
<ul>
<li>æš‚æ—¶è°ƒåˆ°å¤–å­˜ç­‰å¾…çš„è¿›ç¨‹çŠ¶æ€ä¸ºæŒ‚èµ·çŠ¶æ€ã€‚</li>
<li>PCBå¹¶ä¸ä¼šä¸€èµ·è°ƒåˆ°å¤–å­˜ï¼Œè€Œæ˜¯ä¼šå¸¸é©»å†…å­˜ã€‚</li>
<li>PCBä¸­ä¼šè®°å½•è¿›ç¨‹æ•°æ®åœ¨å¤–å­˜ä¸­çš„å­˜æ”¾ä½ç½®ï¼Œè¿›ç¨‹çŠ¶æ€ç­‰ä¿¡æ¯ï¼Œæ“ä½œç³»ç»Ÿé€šè¿‡å†…å­˜ä¸­çš„PCBæ¥ä¿æŒå¯¹å„ä¸ªè¿›ç¨‹çš„ç›‘æ§ã€ç®¡ç†ã€‚<strong>è¢«æŒ‚èµ·çš„è¿›ç¨‹PCBä¼šè¢«æ”¾åˆ°çš„æŒ‚èµ·é˜Ÿåˆ—ä¸­ã€‚</strong></li>
</ul>
<p><strong>ä¸­çº§è°ƒåº¦ï¼ˆå†…å­˜è°ƒåº¦ï¼‰ï¼Œå°±æ˜¯è¦å†³å®šå°†å“ªä¸ªå¤„äºæŒ‚èµ·çŠ¶æ€çš„è¿›ç¨‹é‡æ–°è°ƒå…¥å†…å­˜ã€‚ä¸€ä¸ªè¿›ç¨‹å¯èƒ½ä¼šè¢«å¤šæ¬¡è°ƒå‡ºã€è°ƒå…¥å†…å­˜ï¼Œå› æ­¤ä¸­çº§è°ƒåº¦å‘ç”Ÿçš„é¢‘ç‡è¦æ¯”é«˜çº§è°ƒåº¦æ›´é«˜ã€‚</strong></p>
<p><strong>æ³¨æ„ï¼š</strong>â€œæŒ‚èµ·â€å’Œâ€œé˜»å¡â€çš„åŒºåˆ«ï¼Œä¸¤ç§çŠ¶æ€éƒ½æ˜¯æš‚æ—¶ä¸èƒ½è·å¾—CPUçš„æœåŠ¡ï¼Œä½†æŒ‚èµ·æ€æ˜¯å°†è¿›ç¨‹æ˜ åƒè°ƒåˆ°å¤–å­˜å»äº†ï¼Œè€Œé˜»å¡æ€ä¸‹è¿›ç¨‹æ˜ åƒè¿˜åœ¨å†…å­˜ä¸­ã€‚</p>
<h4
id="è°ƒåº¦çš„ä¸‰ä¸ªå±‚æ¬¡ä½çº§è°ƒåº¦è¿›ç¨‹è°ƒåº¦">4ã€è°ƒåº¦çš„ä¸‰ä¸ªå±‚æ¬¡â€”ä½çº§è°ƒåº¦ï¼ˆè¿›ç¨‹è°ƒåº¦ï¼‰</h4>
<p>â€‹
ä½çº§è°ƒåº¦ï¼ˆè¿›ç¨‹è°ƒåº¦ï¼‰ï¼Œå…¶ä¸»è¦ä»»åŠ¡æ˜¯æŒ‰ç…§æŸç§æ–¹æ³•å’Œç­–ç•¥ä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰å–ä¸€ä¸ªè¿›ç¨‹ï¼Œå°†å¤„ç†æœºåˆ†é…ç»™å®ƒã€‚</p>
<p>â€‹
è¿›ç¨‹è°ƒåº¦æ˜¯æ“ä½œç³»ç»Ÿä¸­æœ€åŸºæœ¬çš„ä¸€ç§è°ƒåº¦ï¼Œåœ¨ä¸€èˆ¬çš„æ“ä½œç³»ç»Ÿä¸­éƒ½å¿…é¡»é…ç½®è¿›ç¨‹è°ƒåº¦ã€‚è¿›ç¨‹è°ƒåº¦çš„é¢‘ç‡å¾ˆé«˜ï¼Œä¸€èˆ¬å‡ åæ¯«ç§’ä¸€æ¬¡ã€‚</p>
<h4 id="ä¸‰å±‚è°ƒåº¦çš„è”ç³»å’Œå¯¹æ¯”">5ã€ä¸‰å±‚è°ƒåº¦çš„è”ç³»å’Œå¯¹æ¯”ï¼š</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220326111647450.png" /></p>
<h3
id="äºŒè¿›ç¨‹è°ƒåº¦çš„æ—¶æœºåˆ‡æ¢è¿‡ç¨‹ä¸æ–¹å¼">äºŒã€è¿›ç¨‹è°ƒåº¦çš„æ—¶æœºã€åˆ‡æ¢è¿‡ç¨‹ä¸æ–¹å¼</h3>
<h4 id="ä½•æ—¶éœ€è¦è¿›è¡Œè¿›ç¨‹è°ƒåº¦">1ã€ä½•æ—¶éœ€è¦è¿›è¡Œè¿›ç¨‹è°ƒåº¦ï¼Ÿ</h4>
<ul>
<li>å½“å‰è¿è¡Œçš„è¿›ç¨‹ä¸»åŠ¨æ”¾å¼ƒ
<ul>
<li>æ­£å¸¸ç»ˆæ­¢</li>
<li>å‘ç”Ÿå¼‚å¸¸è€Œç»ˆæ­¢</li>
<li>è¿›ç¨‹ä¸»åŠ¨è¯·æ±‚é˜»å¡</li>
</ul></li>
<li>å½“å‰è¿›è¡Œçš„è¿›ç¨‹è¢«åŠ¨æ”¾å¼ƒ
<ul>
<li>åˆ†ç»™è¿›ç¨‹çš„æ—¶é—´ç‰‡ç”¨å®Œ</li>
<li>æœ‰æ›´ç´§æ€¥çš„äº‹éœ€è¦å¤„ç†ï¼ˆå¦‚I/Oä¸­æ–­ï¼‰</li>
<li>æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹è¿›å…¥å°±ç»ªé˜Ÿåˆ—</li>
</ul></li>
</ul>
<h4 id="ä½•æ—¶ä¸èƒ½è¿›è¡Œè¿›ç¨‹è°ƒåº¦">2ã€ä½•æ—¶ä¸èƒ½è¿›è¡Œè¿›ç¨‹è°ƒåº¦ï¼Ÿ</h4>
<ul>
<li>åœ¨å¤„ç†ä¸­æ–­çš„è¿‡ç¨‹ä¸­ã€‚ä¸­æ–­å¤„ç†è¿‡ç¨‹å¤æ‚ï¼Œä¸ç¡¬ä»¶å¯†åˆ‡ç›¸å…³ï¼Œå¾ˆéš¾
åšåˆ°åœ¨ä¸­æ–­å¤„ç†è¿‡ç¨‹ä¸­è¿›è¡Œè¿›ç¨‹åˆ‡æ¢ã€‚</li>
<li>è¿›ç¨‹åœ¨<strong>æ“ä½œç³»ç»Ÿå†…æ ¸ç¨‹åºä¸´ç•ŒåŒº</strong>ä¸­ä¸èƒ½è¿›è¡Œè¿›ç¨‹è°ƒåº¦ã€‚ï¼ˆä½†æ˜¯è¿›ç¨‹åœ¨æ™®é€šä¸´ç•ŒåŒºä¸­æ˜¯å¯ä»¥è¿›è¡Œè°ƒåº¦ã€åˆ‡æ¢çš„ã€‚</li>
<li>åœ¨åŸå­æ“ä½œè¿‡ç¨‹ä¸­ï¼ˆåŸè¯­ï¼‰ã€‚åŸå­æ“ä½œä¸å¯ä¸­æ–­ï¼Œè¦ä¸€æ°”å‘µæˆï¼ˆå¦‚ä¹‹å‰è®²è¿‡çš„ä¿®æ”¹PCBä¸­è¿›ç¨‹çŠ¶æ€æ ‡å¿—ï¼Œå¹¶æŠŠPCBæ”¾åˆ°ç›¸åº”é˜Ÿåˆ—ï¼‰</li>
</ul>
<p><strong>æ³¨ï¼šä»€ä¹ˆæ˜¯ä¸´ç•Œèµ„æºï¼Ÿ</strong></p>
<p>â€‹
ä¸´ç•Œèµ„æºï¼šä¸€ä¸ªæ—¶é—´æ®µå†…åªå…è®¸ä¸€ä¸ªé€‰ç¨‹ä½¿ç”¨çš„èµ„æºã€‚å„è¿›ç¨‹éœ€è¦äº’æ–¥åœ°è®¿é—®ä¸´ç•Œèµ„æºã€‚</p>
<p>â€‹ ä¸´ç•ŒåŒºï¼šè®¿é—®ä¸´ç•Œèµ„æºçš„é‚£æ®µä»£ç ã€‚</p>
<p>â€‹
<strong>å†…æ ¸ç¨‹åºä¸´ç•ŒåŒº</strong>ä¸€èˆ¬æ˜¯ç”¨æ¥è®¿é—®æŸç§å†…æ ¸æ•°æ®ç»“æ„çš„ï¼Œæ¯”å¦‚è¿›ç¨‹çš„å°±ç»ªé˜Ÿåˆ—ï¼ˆç”±å„å°±ç»ªè¿›ç¨‹çš„PCBç»„æˆï¼‰</p>
<p>â€‹
<strong>å†…æ ¸ç¨‹åºä¸´ç•ŒåŒº</strong>è®¿é—®çš„ä¸´ç•Œèµ„æºå¦‚æœä¸å°½å¿«é‡Šæ”¾çš„è¯ï¼Œææœ‰å¯èƒ½å½±å“åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸çš„å…¶ä»–ç®¡ç†å·¥ä½œã€‚å› æ­¤åœ¨è®¿é—®å†…æ ¸ç¨‹åºä¸´ç•ŒåŒºæœŸé—´ä¸èƒ½è¿›è¡Œè°ƒåº¦ä¸åˆ‡æ¢</p>
<h4 id="è¿›ç¨‹è°ƒåº¦çš„æ–¹å¼">3ã€è¿›ç¨‹è°ƒåº¦çš„æ–¹å¼</h4>
<p>â€‹
æœ‰çš„ç³»ç»Ÿä¸­åªå…è®¸è¿›ç¨‹ä¸»åŠ¨æ”¾å¼ƒå¤„ç†æœºï¼Œæœ‰çš„ç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹å¯ä»¥ä¸»åŠ¨æ”¾å¼ƒå¤„ç†æœºï¼Œå½“æœ‰æ›´ç´§æ€¥çš„ä»»åŠ¡éœ€è¦å¤„ç†æ—¶ï¼Œä¹Ÿä¼šå¼ºè¡Œå‰¥å¤ºå¤„ç†æœºï¼ˆè¢«åŠ¨æ”¾å¼ƒï¼‰</p>
<h5 id="éæŠ¢å æ–¹å¼">1ï¼‰éæŠ¢å æ–¹å¼ï¼š</h5>
<p>â€‹ åªå…è®¸è¿›ç¨‹ä¸»åŠ¨æ”¾å¼ƒå¤„ç†</p>
<h5 id="æŠ¢å æ–¹å¼">2ï¼‰æŠ¢å æ–¹å¼</h5>
<p>â€‹
å½“æœ‰æ›´ç´§æ€¥çš„ä»»åŠ¡éœ€è¦å¤„ç†æ—¶ï¼Œä¼šå¼ºè¡Œå‰¥å¤ºå¤„ç†æœºï¼ˆè¢«åŠ¨æ”¾å¼ƒï¼‰ã€‚å¯ä»¥ä¼˜å…ˆå¤„ç†æ›´ç´§æ€¥çš„è¿›ç¨‹ï¼Œä¹Ÿå¯å®ç°è®©å„è¿›ç¨‹æŒ‰æ—¶é—´ç‰‡è½®æµæ‰§è¡Œçš„åŠŸèƒ½ï¼ˆé€šè¿‡æ—¶é’Ÿä¸­æ–­ï¼‰ã€‚é€‚åˆäºåˆ†æ—¶æ“åœç³»ç»Ÿã€å®æ—¶æ“ä½œç³»ç»Ÿ</p>
<h4 id="è¿›ç¨‹çš„åˆ‡æ¢ä¸è¿‡ç¨‹">4ã€è¿›ç¨‹çš„åˆ‡æ¢ä¸è¿‡ç¨‹</h4>
<h5
id="ç‹­ä¹‰çš„è¿›ç¨‹è°ƒåº¦ä¸è¿›ç¨‹åˆ‡æ¢çš„åŒºåˆ«">1ï¼‰â€œç‹­ä¹‰çš„è¿›ç¨‹è°ƒåº¦â€ä¸â€œè¿›ç¨‹åˆ‡æ¢â€çš„åŒºåˆ«ï¼š</h5>
<ul>
<li><strong>ç‹­ä¹‰çš„è¿›ç¨‹è°ƒåº¦</strong>ï¼šæŒ‡çš„æ˜¯ä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰ä¸­ä¸€ä¸ªè¦è¿è¡Œçš„è¿›ç¨‹ã€‚ï¼ˆè¿™ä¸ªè¿›ç¨‹å¯ä»¥æ˜¯åˆšåˆšè¢«æš‚åœæ‰§è¡Œçš„è¿›ç¨‹ï¼Œ</li>
<li><strong>è¿›ç¨‹åˆ‡æ¢</strong>ï¼šæ˜¯æŒ‡ä¸€ä¸ªè¿›ç¨‹è®©å‡ºå¤„ç†æœºï¼Œç”±å¦ä¸€ä¸ªè¿›ç¨‹å ç”¨å¤„ç†æœºçš„è¿‡ç¨‹ã€‚å¹¿ä¹‰çš„è¿›ç¨‹è°ƒåº¦åŒ…å«äº†é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹å’Œè¿›ç¨‹åˆ‡æ¢ä¸¤ä¸ªæ­¥éª¤ã€‚</li>
</ul>
<h5
id="è¿›ç¨‹åˆ‡æ¢çš„è¿‡ç¨‹ä¸»è¦å®Œæˆäº†">2ï¼‰<strong>è¿›ç¨‹åˆ‡æ¢çš„è¿‡ç¨‹ä¸»è¦å®Œæˆäº†ï¼š</strong></h5>
<ul>
<li>å¯¹åŸæ¥è¿è¡Œè¿›ç¨‹å„ç§æ•°æ®çš„ä¿å­˜</li>
<li>å¯¹æ–°çš„è¿›ç¨‹å„ç§æ•°æ®çš„æ¢å¤ï¼ˆå¦‚ï¼šç¨‹åºè®¡æ•°å™¨ã€ç¨‹åºçŠ¶æ€å­—ã€å„ç§æ•°æ®å¯„å­˜å™¨ç­‰å¤„ç†æœºç°åœºä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ä¸€èˆ¬ä¿å­˜åœ¨è¿›ç¨‹æ§åˆ¶å—ï¼‰</li>
</ul>
<p><strong>æ³¨æ„ï¼š</strong>è¿›ç¨‹åˆ‡æ¢æ˜¯æœ‰ä»£ä»·çš„ï¼Œå› æ­¤å¦‚æœè¿‡äºé¢‘ç¹çš„è¿›è¡Œè¿›ç¨‹è°ƒåº¦ã€åˆ‡æ¢ï¼Œå¿…ç„¶ä¼šä½¿æ•´ä¸ªç³»ç»Ÿçš„æ•ˆç‡é™ä½ï¼Œä½¿ç³»ç»Ÿå¤§éƒ¨åˆ†æ—¶é—´éƒ½èŠ±åœ¨äº†è¿›ç¨‹åˆ‡æ¢ä¸Šï¼Œè€ŒçœŸæ­£ç”¨äºæ‰§è¡Œè¿›ç¨‹çš„æ—¶é—´å‡å°‘ã€‚</p>
<h4 id="è°ƒåº¦ç®—æ³•çš„è¯„ä»·æŒ‡æ ‡">5ã€è°ƒåº¦ç®—æ³•çš„è¯„ä»·æŒ‡æ ‡</h4>
<h5 id="cpuåˆ©ç”¨ç‡">1ï¼‰CPUåˆ©ç”¨ç‡ï¼š</h5>
<p>â€‹ CPUåˆ©ç”¨ç‡ = å¿™ç¢Œæ—¶é—´ / æ€»æ—¶é—´</p>
<h5 id="ç³»ç»Ÿååé‡">2ï¼‰ç³»ç»Ÿååé‡ï¼š</h5>
<p>â€‹ ç³»ç»Ÿååé‡ = æ€»å…±å®Œæˆäº†å¤šå°‘é“ä½œä¸š / æ€»å…±èŠ±äº†å¤šå°‘æ—¶é—´</p>
<h5 id="å‘¨è½¬æ—¶é—´">3ï¼‰å‘¨è½¬æ—¶é—´ï¼š</h5>
<p>â€‹
å‘¨è½¬æ—¶é—´ï¼Œæ˜¯æŒ‡<strong>ä»ä½œä¸šè¢«æäº¤ç»™ç³»ç»Ÿå¼€å§‹ï¼Œåˆ°ä½œä¸šå®Œæˆä¸ºæ­¢çš„è¿™æ®µæ—¶é—´é—´éš”ã€‚</strong></p>
<p>â€‹ å®ƒåŒ…æ‹¬å››ä¸ªéƒ¨åˆ†ï¼š</p>
<ul>
<li>ä½œä¸šåœ¨å¤–å­˜åå¤‡é˜Ÿåˆ—ä¸Šç­‰å¾…ä½œä¸šè°ƒåº¦ï¼ˆé«˜çº§è°ƒåº¦ï¼‰çš„æ—¶é—´ã€</li>
<li>è¿›ç¨‹åœ¨å°±ç»ªé˜Ÿåˆ—ä¸Šç­‰å¾…è¿›ç¨‹è°ƒåº¦ï¼ˆä½çº§è°ƒåº¦ï¼‰çš„æ—¶é—´ã€</li>
<li>è¿›ç¨‹åœ¨CPUä¸Šæ‰§è¡Œçš„æ—¶é—´ã€</li>
<li>è¿›ç¨‹ç­‰å¾…I/0æ“ä½œå®Œæˆçš„æ—¶é—´ã€‚</li>
</ul>
<p>åä¸‰é¡¹åœ¨ä¸€ä¸ªä½œä¸šçš„æ•´ä¸ªå¤„ç†è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½å‘ç”Ÿå¤šæ¬¡ã€‚</p>
<p>â€‹ å¹³å‡å‘¨è½¬æ—¶é—´ = å„ä½œä¸šå‘¨è½¬æ—¶é—´ä¹‹å’Œ / ä½œä¸šæ•°</p>
<h5 id="å¸¦æƒå‘¨è½¬æ—¶é—´">4ï¼‰å¸¦æƒå‘¨è½¬æ—¶é—´ï¼š</h5>
<p>â€‹ å¸¦æƒå‘¨è½¬æ—¶é—´ = ä½œä¸šå‘¨è½¬æ—¶é—´ / ä½œä¸šå®é™…è¿è¡Œçš„æ—¶é—´</p>
<ul>
<li>å¯¹äºå‘¨è½¬æ—¶é—´ç›¸åŒçš„ä¸¤ä¸ªä½œä¸šï¼Œå®é™…è¿è¡Œæ—¶é—´é•¿çš„ä½œä¸šåœ¨ç›¸åŒæ—¶é—´å†…è¢«æœåŠ¡çš„æ—¶é—´æ›´å¤šï¼Œ
å¸¦æƒå‘¨è½¬æ—¶é—´æ›´å°ï¼Œç”¨æˆ·æ»¡æ„åº¦æ›´é«˜ã€‚</li>
<li>å¯¹äºå®é™…è¿è¡Œæ—¶é—´ç›¸åŒçš„ä¸¤ä¸ªä½œä¸šï¼Œå‘¨è½¬æ—¶é—´çŸ­çš„å¸¦æƒå‘¨è½¬æ—¶é—´æ›´å°ï¼Œç”¨æˆ·æ»¡æ„åº¦æ›´é«˜ã€‚</li>
</ul>
<h5 id="ç­‰å¾…æ—¶é—´">5ï¼‰ç­‰å¾…æ—¶é—´ï¼š</h5>
<p>â€‹
ç­‰å¾…æ—¶é—´ï¼ŒæŒ‡è¿›ç¨‹/ä½œä¸šå¤„äºç­‰å¾…å¤„ç†æœºçŠ¶æ€æ—¶é—´ä¹‹å’Œï¼Œç­‰å¾…æ—¶é—´è¶Šé•¿ï¼Œç”¨æˆ·æ»¡æ„åº¦è¶Šä½ã€‚</p>
<h5
id="å¯¹äºè¿›ç¨‹æ¥è¯´ç­‰å¾…æ—¶é—´å°±æ˜¯æŒ‡è¿›ç¨‹å»ºç«‹åç­‰å¾…è¢«æœåŠ¡çš„æ—¶é—´ä¹‹å’Œåœ¨ç­‰å¾…i0å®Œæˆçš„æœŸé—´å…¶å®è¿›ç¨‹ä¹Ÿæ˜¯åœ¨è¢«æœåŠ¡çš„æ‰€ä»¥ä¸è®¡å…¥ç­‰å¾…æ—¶é—´">å¯¹äºè¿›ç¨‹æ¥è¯´ï¼Œç­‰å¾…æ—¶é—´å°±æ˜¯æŒ‡è¿›ç¨‹å»ºç«‹åç­‰å¾…è¢«æœåŠ¡çš„æ—¶é—´ä¹‹å’Œï¼Œåœ¨ç­‰å¾…I/0å®Œæˆçš„æœŸé—´å…¶å®è¿›ç¨‹ä¹Ÿæ˜¯åœ¨è¢«æœåŠ¡çš„ï¼Œæ‰€ä»¥ä¸è®¡å…¥ç­‰å¾…æ—¶é—´ã€‚</h5>
<p>â€‹
<strong>å¯¹äºä½œä¸šæ¥è¯´ï¼Œä¸ä»…è¦è€ƒè™‘å»ºç«‹è¿›ç¨‹åçš„ç­‰å¾…æ—¶é—´ï¼Œè¿˜è¦åŠ ä¸Šä½œä¸šåœ¨å¤–å­˜åå¤‡é˜Ÿåˆ—ä¸­ç­‰å¾…çš„æ—¶é—´ã€‚</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220326114401542.png" /></p>
<h5 id="å“åº”æ—¶é—´">6ï¼‰å“åº”æ—¶é—´ï¼š</h5>
<p>â€‹ å“åº”æ—¶é—´ï¼ŒæŒ‡ä»ç”¨æˆ·æäº¤è¯·æ±‚åˆ°é¦–æ¬¡äº§ç”Ÿå“åº”æ‰€ç”¨çš„æ—¶é—´ã€‚</p>
<h4 id="è°ƒåº¦ç®—æ³•-1">6ã€è°ƒåº¦ç®—æ³• 1</h4>
<p><strong>è°ƒåº¦ç®—æ³•çš„é‡ç‚¹</strong>ï¼š</p>
<ul>
<li>ç®—æ³•æ€æƒ³</li>
<li>ç®—æ³•è§„åˆ™</li>
<li>ç”¨äºä½œä¸šè°ƒåº¦è¿˜æ˜¯è¿›ç¨‹è°ƒåº¦</li>
<li>æŠ¢å å¼è¿˜æ˜¯éæŠ¢å å¼</li>
<li>ä¼˜ç‚¹å’Œç¼ºç‚¹</li>
<li>æ˜¯å¦ä¼šå¯¼è‡´é¥¥é¥¿</li>
</ul>
<h5 id="fcfs-å…ˆæ¥å…ˆæœåŠ¡éæŠ¢å å¼ç®—æ³•">1ï¼‰ FCFS
å…ˆæ¥å…ˆæœåŠ¡ï¼ˆéæŠ¢å å¼ç®—æ³•ï¼‰</h5>
<p>â€‹ ä¸»è¦ä»å…¬å¹³çš„è§’åº¦è€ƒè™‘ï¼ŒæŒ‰ç…§ä½œä¸š/è¿›ç¨‹åˆ°è¾¾çš„å…ˆåé¡ºåºè¿›è¡ŒæœåŠ¡ã€‚</p>
<ul>
<li>ç”¨äºä½œä¸šè°ƒåº¦æ—¶ï¼Œè€ƒè™‘çš„æ˜¯å“ªä¸ªä½œä¸šå…ˆåˆ°è¾¾åå¤‡é˜Ÿåˆ—</li>
<li>ç”¨äºè¿›ç¨‹è°ƒåº¦æ—¶ï¼Œè€ƒè™‘çš„æ˜¯å“ªä¸ªè¿›ç¨‹å…ˆåˆ°è¾¾å°±ç»ªé˜Ÿåˆ—</li>
<li>éæŠ¢å å¼ç®—æ³•
<ul>
<li>ä¼˜ç‚¹ï¼šå…¬å¹³ï¼Œç®—æ³•å®ç°ç®€å•</li>
<li>ç¼ºç‚¹ï¼šæ’åœ¨é•¿ä½œä¸šåçš„çŸ­ä½œä¸šéœ€è¦ç­‰å¾…å¾ˆé•¿æ—¶é—´ï¼Œå¸¦æƒå‘¨è½¬æ—¶é—´å¾ˆå¤§.
FCFSç®—æ³•å¯¹é•¿ä½œä¸šæœ‰åˆ©,å¯¹çŸ­ä½œä¸šä¸åˆ©.</li>
</ul></li>
<li>ä¸ä¼šå¯¼è‡´é¥¥é¥¿</li>
</ul>
<h5 id="sjf-çŸ­ä½œä¸šä¼˜å…ˆç®—æ³•-éæŠ¢å å¼ç®—æ³•">2ï¼‰ SJF çŸ­ä½œä¸šä¼˜å…ˆç®—æ³•
(éæŠ¢å å¼ç®—æ³•):</h5>
<p>â€‹ è¿½æ±‚æœ€å°‘çš„å¹³å‡ç­‰å¾…æ—¶é—´,æœ€çŸ­çš„ä½œä¸šæˆ–è¿›ç¨‹ä¼˜å…ˆå¾—åˆ°æœåŠ¡(æŒ‡
è¦æ±‚æœåŠ¡æ—¶é—´æœ€çŸ­)</p>
<p>â€‹
<strong>[æ¯æ¬¡è°ƒåº¦æ—¶é€‰æ‹©å½“å‰å·²åˆ°è¾¾ä¸”è¿è¡Œæ—¶é—´æœ€çŸ­çš„ä½œä¸š/è¿›ç¨‹]</strong></p>
<ul>
<li>ç”¨äºä½œä¸šè°ƒåº¦æ—¶ï¼Œç§°ä¸º çŸ­ä½œä¸šä¼˜å…ˆç®—æ³•</li>
<li>ç”¨äºè¿›ç¨‹è°ƒåº¦æ—¶ï¼Œç§°ä¸º SPF çŸ­è¿›ç¨‹ä¼˜å…ˆç®—æ³•</li>
<li>SJFå’ŒSPFæ˜¯éæŠ¢å å¼ç®—æ³•,ä¹Ÿæœ‰æŠ¢å å¼çš„ç®—æ³•: æœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆç®—æ³•SRTN
<ul>
<li>ä¼˜ç‚¹ï¼šâ€œæœ€çŸ­çš„â€å¹³å‡ç­‰å¾…æ—¶é—´ã€å¹³å‡å‘¨è½¬æ—¶é—´</li>
<li>ç¼ºç‚¹ï¼šä¸å…¬å¹³ã€‚å¯¹çŸ­ä½œä¸šæœ‰åˆ©ï¼Œå¯¹é•¿ä½œä¸šä¸åˆ©ã€‚å¯èƒ½äº§ç”Ÿé¥¥é¥¿ç°è±¡ã€‚å¦å¤–ï¼Œä½œä¸š/è¿›ç¨‹çš„è¿è¡Œæ—¶é—´æ˜¯ç”±ç”¨æˆ·æä¾›çš„ï¼Œå¹¶ä¸ä¸€å®šçœŸå®ï¼Œä¸ä¸€å®šèƒ½åšåˆ°çœŸæ­£çš„çŸ­ä½œä¸šä¼˜å…ˆ</li>
</ul></li>
<li>å¯èƒ½å¯¼è‡´é¥¥é¥¿,å¦‚æœæœ‰æºæºä¸æ–­æœ‰çŸ­ä½œä¸šæ¥</li>
<li><strong>ç¤ºä¾‹1:</strong> SPF ç®—æ³•
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220412092135300.png" /></li>
</ul></li>
<li><strong>ç¤ºä¾‹2:</strong> SRTN ç®—æ³•( æœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆç®—æ³• ):
æ¯å½“æœ‰è¿›ç¨‹åŠ å…¥å°±ç»ªé˜Ÿåˆ—æ”¹å˜æ—¶å°±éœ€è¦è°ƒåº¦ï¼Œ<strong>å¦‚æœæ–°åˆ°è¾¾çš„è¿›ç¨‹å‰©ä½™æ—¶é—´æ¯”å½“å‰è¿è¡Œçš„è¿›ç¨‹å‰©ä½™æ—¶é—´æ›´çŸ­ï¼Œåˆ™ç”±æ–°è¿›ç¨‹æŠ¢å å¤„ç†æœºï¼Œ</strong>å½“å‰è¿è¡Œè¿›ç¨‹é‡æ–°å›åˆ°å°±ç»ªé˜Ÿåˆ—ã€‚å¦å¤–ï¼Œ<strong>å½“ä¸€ä¸ªè¿›ç¨‹å®Œæˆæ—¶ä¹Ÿéœ€è¦è°ƒåº¦</strong>
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220412092403526.png" /></li>
</ul></li>
</ul>
<h5 id="hrrn-é«˜å“åº”æ¯”ä¼˜å…ˆé-æŠ¢å å¼-ç®—æ³•">3ï¼‰ HRRN é«˜å“åº”æ¯”ä¼˜å…ˆ:(é
æŠ¢å å¼ ç®—æ³• )</h5>
<p>â€‹
ç»¼åˆè€ƒè™‘ä½œä¸šå’Œè¿›ç¨‹çš„ç­‰å¾…æ—¶é—´å’Œè¦æ±‚æœåŠ¡çš„æ—¶é—´,åœ¨æ¯æ¬¡è°ƒåº¦æ—¶å…ˆè®¡ç®—å„ä¸ªä½œä¸š/è¿›ç¨‹çš„å“åº”æ¯”ï¼Œé€‰æ‹©å“åº”æ¯”æœ€é«˜çš„ä½œä¸š/è¿›ç¨‹ä¸ºå…¶æœåŠ¡.
<span class="math display">\[
å“åº”æ¯” = \frac{ç­‰å¾…æ—¶é—´ + è¦æ±‚æœåŠ¡æ—¶é—´}{è¦æ±‚æœåŠ¡æ—¶é—´}
\]</span></p>
<ul>
<li><p>æ—¢å¯ä»¥ç”¨äºè¿›ç¨‹è°ƒåº¦ä¹Ÿå¯ä»¥ç”¨äºä½œä¸šè°ƒåº¦</p>
<ul>
<li>ä¼˜ç‚¹:
ç»¼åˆè€ƒè™‘äº†ç­‰å¾…æ—¶é—´å’Œè¿è¡Œæ—¶é—´,å¯¹äºé•¿ä½œä¸šæ¥è¯´,éšç€ç­‰å¾…æ—¶é—´è¶Šæ¥è¶Šä¹…,å…¶å“åº”æ¯”ä¹Ÿä¼šè¶Šæ¥è¶Šå¤§,ä»è€Œé¿å…äº†é•¿ä½œä¸šé¥¥é¥¿çš„é—®é¢˜</li>
<li>ç¼ºç‚¹:</li>
</ul></li>
<li><p>ç¤ºä¾‹1:</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220412104029587.png" /></p>
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220412104019832.png" /></li>
</ul></li>
<li><p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220412104148079.png" /><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220412104351880.png" /></p></li>
</ul>
<h4 id="è°ƒåº¦ç®—æ³•-2">7ã€è°ƒåº¦ç®—æ³• 2</h4>
<h5
id="æ—¶é—´ç‰‡è½®è½¬ç®—æ³•æŠ¢å å¼ç®—æ³•å¸¸ç”¨äºåˆ†æ—¶æ“ä½œç³»ç»Ÿæ›´æ³¨é‡å“åº”æ—¶é—´">1ï¼‰æ—¶é—´ç‰‡è½®è½¬ç®—æ³•ï¼šï¼ˆæŠ¢å å¼ç®—æ³•ï¼‰ã€å¸¸ç”¨äºåˆ†æ—¶æ“ä½œç³»ç»Ÿï¼Œæ›´æ³¨é‡å“åº”æ—¶é—´ã€‘</h5>
<ul>
<li>å…¬å¹³åœ°ã€è½®æµåœ°ä¸ºå„ä¸ªè¿›ç¨‹æœåŠ¡ï¼Œè®©æ¯ä¸ªè¿›ç¨‹åœ¨ä¸€å®šæ—¶é—´é—´éš”å†…éƒ½å¯ä»¥å¾—åˆ°å“åº”</li>
<li>æŒ‰ç…§å„è¿›ç¨‹åˆ°è¾¾å°±ç»ªé˜Ÿåˆ—çš„é¡ºåºï¼Œè½®æµè®©å„ä¸ªè¿›ç¨‹æ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡ï¼ˆå¦‚100msï¼‰ã€‚è‹¥è¿›ç¨‹æœªåœ¨ä¸€ä¸ªæ—¶é—´ç‰‡å†…æ‰§è¡Œå®Œï¼Œåˆ™å‰¥å¤ºå¤„ç†æœºï¼Œå°†è¿›ç¨‹é‡æ–°æ”¾åˆ°å°±ç»ªé˜Ÿåˆ—é˜Ÿå°¾é‡æ–°æ’é˜Ÿã€‚</li>
<li>ä¸€èˆ¬åªç”¨äºè¿›ç¨‹è°ƒåº¦ï¼ˆåªæœ‰ä½œä¸šæ”¾å…¥å†…å­˜å»ºç«‹äº†ç›¸åº”çš„è¿›ç¨‹åï¼Œæ‰èƒ½è¢«åˆ†é…å¤„ç†æœºæ—¶é—´ç‰‡ï¼‰</li>
<li>ç”±æ—¶é’Ÿè£…ç½®å‘å‡º<strong>æ—¶é’Ÿä¸­æ–­</strong>æ¥é€šçŸ¥CPUæ—¶é—´ç‰‡å·²åˆ°ã€‚
<ul>
<li><strong>ä¼˜ç‚¹ï¼š</strong>å“åº”å¿«ï¼Œé€‚åˆåˆ†æ—¶æ“ä½œç³»ç»Ÿï¼Œä¸ä¼šå¯¼è‡´é¥¥é¥¿</li>
<li><strong>ç¼ºç‚¹ï¼š</strong>ç”±äºé«˜é¢‘ç‡çš„è¿›ç¨‹åˆ‡æ¢ï¼Œå› æ­¤æœ‰ä¸€å®šå¼€é”€</li>
</ul></li>
<li><strong>ç¤ºä¾‹ï¼š</strong>
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220412111910996.png" /></li>
</ul></li>
</ul>
<p>â€‹
å¦‚æœæ—¶é—´ç‰‡å¤ªå¤§ï¼Œä½¿å¾—æ¯ä¸ªè¿›ç¨‹éƒ½å¯ä»¥åœ¨ä¸€ä¸ªæ—¶é—´ç‰‡å†…å°±å®Œæˆï¼Œåˆ™æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•é€€åŒ–ä¸ºå…ˆæ¥å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•ï¼Œå¹¶ä¸”ä¼šå¢å¤§è¿›ç¨‹å“åº”æ—¶é—´ã€‚å› æ­¤æ—¶é—´ç‰‡ä¸èƒ½å¤ªå¤§ã€‚</p>
<p>â€‹
å¦ä¸€æ–¹é¢ï¼Œè¿›ç¨‹è°ƒåº¦ã€åˆ‡æ¢æ˜¯æœ‰æ—¶é—´ä»£ä»·çš„ï¼ˆä¿å­˜ã€æ¢å¤è¿è¡Œç¯å¢ƒï¼‰ï¼Œå› æ­¤å¦‚æœæ—¶é—´ç‰‡å¤ªå°ï¼Œä¼šå¯¼è‡´è¿›ç¨‹åˆ‡æ¢è¿‡äºé¢‘ç¹ï¼Œç³»ç»Ÿä¼šèŠ±å¤§é‡çš„æ—¶é—´æ¥å¤„ç†è¿›ç¨‹åˆ‡æ¢ï¼Œä»è€Œå¯¼è‡´å®é™…ç”¨äºè¿›ç¨‹æ‰§è¡Œçš„æ—¶é—´æ¯”ä¾‹å‡å°‘ã€‚å¯è§æ—¶é—´ç‰‡ä¹Ÿä¸èƒ½å¤ªå°ã€‚</p>
<h5
id="ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•æŠ¢å å¼éæŠ¢å å¼ç‰ˆæœ¬éƒ½æœ‰å¸¸ç”¨äºå®æ—¶æ“ä½œç³»ç»Ÿ">2ï¼‰ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•ï¼šï¼ˆæŠ¢å å¼ã€éæŠ¢å å¼ç‰ˆæœ¬éƒ½æœ‰ï¼‰ã€å¸¸ç”¨äºå®æ—¶æ“ä½œç³»ç»Ÿã€‘</h5>
<ul>
<li>éšç€è®¡ç®—æœºçš„å‘å±•ï¼Œç‰¹åˆ«æ˜¯å®æ—¶æ“ä½œç³»ç»Ÿçš„å‡ºç°ï¼Œè¶Šæ¥è¶Šå¤šçš„åº”ç”¨åœºæ™¯éœ€è¦æ ¹æ®ä»»åŠ¡çš„ç´§æ€¥ç¨‹åº¦æ¥å†³å®šå¤„ç†é¡ºåºæ¯ä¸ªä½œä¸š/è¿›ç¨‹æœ‰å„è‡ªçš„ä¼˜å…ˆçº§ï¼Œè°ƒåº¦æ—¶é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„ä½œä¸š/è¿›ç¨‹</li>
<li>æ—¢å¯ç”¨äºä½œä¸šè°ƒåº¦ï¼Œä¹Ÿå¯ç”¨äºè¿›ç¨‹è°ƒåº¦ã€‚ç”šè‡³ï¼Œè¿˜ä¼šç”¨äºåœ¨ä¹‹åä¼šå­¦ä¹ çš„I/0è°ƒåº¦ä¸­
<ul>
<li>éæŠ¢å å¼ï¼šæ¯æ¬¡è°ƒåº¦æ—¶é€‰æ‹©å½“å‰å·²åˆ°è¾¾ä¸”ä¼˜å…ˆçº§æœ€é«˜çš„è¿›ç¨‹ã€‚å½“å‰è¿›ç¨‹ä¸»åŠ¨æ”¾å¼ƒå¤„ç†æœºæ—¶å‘ç”Ÿè°ƒåº¦ã€‚</li>
<li>æŠ¢å å¼ï¼šæ¯æ¬¡è°ƒåº¦æ—¶é€‰æ‹©å½“å‰å·²åˆ°è¾¾ä¸”ä¼˜å…ˆçº§æœ€é«˜çš„è¿›ç¨‹ã€‚å½“å‰è¿›ç¨‹ä¸»åŠ¨æ”¾å¼ƒå¤„ç†æœºæ—¶å‘ç”Ÿè°ƒåº¦ã€‚<strong>å¦å¤–ï¼Œå½“å°±ç»ªé˜Ÿåˆ—å‘ç”Ÿæ”¹å˜æ—¶ä¹Ÿéœ€è¦æ£€æŸ¥æ˜¯ä¼šå‘ç”ŸæŠ¢å ã€‚</strong></li>
</ul></li>
<li><strong>ä¼˜ç‚¹ï¼š</strong>ç”¨ä¼˜å…ˆçº§åŒºåˆ†ç´§æ€¥ç¨‹åº¦ã€é‡è¦ç¨‹åº¦ï¼Œé€‚ç”¨äºå®æ—¶æ“ä½œç³»ç»Ÿã€‚å¯çµæ´»è°ƒæ•´å¯¹å„ç§ä½œä¸š/è¿›ç¨‹çš„åå¥½ç¨‹åº¦ã€‚</li>
<li><strong>ç¼ºç‚¹ï¼š</strong>è‹¥æºæºä¸æ–­åœ°æœ‰é«˜ä¼˜å…ˆçº§è¿›ç¨‹åˆ°æ¥ï¼Œåˆ™å¯èƒ½å¯¼è‡´é¥¥</li>
<li><strong>ç¤ºä¾‹ï¼š</strong>
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220412112408359.png" /></li>
<li></li>
</ul></li>
<li>é€šå¸¸ï¼š
<ul>
<li>ç³»ç»Ÿè¿›ç¨‹ä¼˜å…ˆçº§é«˜äºç”¨æˆ·è¿›ç¨‹ä¼šå¾—åˆ°æå‡</li>
<li>å‰å°è¿›ç¨‹ä¼˜å…ˆçº§é«˜äºåå°è¿›ç¨‹</li>
<li>æ“ä½œç³»ç»Ÿæ›´åå¥½I/oå‹è¿›ç¨‹ï¼ˆæˆ–ç§°I/oç¹å¿™å‹è¿›ç¨‹ï¼‰</li>
<li>æ³¨ï¼šä¸I/0å‹è¿›ç¨‹ç›¸å¯¹çš„æ˜¯è®¡ç®—å‹è¿›ç¨‹ï¼ˆæˆ–ç§°CPUç¹å¿™å‹è¿›ç¨‹ï¼‰</li>
</ul></li>
</ul>
<p>ã€ç”±äºI/oè®¾å¤‡å’ŒCPUå¯ä»¥å¹¶è¡Œå·¥ä½œã€‚å¦‚æœä¼˜å…ˆè®©I/Oç¹å¿™å‹è¿›ç¨‹ä¼˜å…ˆè¿è¡Œçš„è¯ï¼Œåˆ™è¶Šæœ‰å¯èƒ½è®©I/Oè®¾å¤‡å°½æ—©åœ°æŠ•å…¥å·¥ä½œï¼Œåˆ™èµ„æºåˆ©ç”¨ç‡ã€ç³»ç»Ÿååé‡éƒ½ä¼šå¾—åˆ°æå‡ã€‘</p>
<ul>
<li>å¯ä»¥ä»è¿½æ±‚å…¬å¹³ã€æå‡èµ„æºåˆ©ç”¨ç‡ç­‰è§’åº¦è€ƒè™‘
<ul>
<li>å¦‚æœæŸè¿›ç¨‹åœ¨å°±ç»ªé˜Ÿåˆ—ä¸­ç­‰å¾…äº†å¾ˆé•¿æ—¶é—´ï¼Œåˆ™å¯ä»¥é€‚å½“æå‡å…¶ä¼˜å…ˆçº§</li>
<li>å¦‚æœæŸè¿›ç¨‹å ç”¨å¤„ç†æœºè¿è¡Œäº†å¾ˆé•¿æ—¶é—´ï¼Œåˆ™å¯é€‚å½“é™ä½å…¶ä¼˜å…ˆçº§</li>
<li>å¦‚æœå‘ç°ä¸€ä¸ªè¿›ç¨‹é¢‘ç¹åœ°è¿›è¡ŒI/Oæ“ä½œï¼Œåˆ™å¯é€‚å½“æå‡å…¶ä¼˜å…ˆçº§</li>
</ul></li>
</ul>
<h5
id="å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•æŠ¢å å¼ç®—æ³•å¯èƒ½å¯¼è‡´é¥¥é¥¿">3ï¼‰å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•ï¼šã€æŠ¢å å¼ç®—æ³•ï¼Œå¯èƒ½å¯¼è‡´é¥¥é¥¿ã€‘</h5>
<ul>
<li>å¯¹å…¶ä»–è°ƒåº¦ç®—æ³•çš„æŠ˜ä¸­æƒè¡¡
<ul>
<li>1.è®¾ç½®å¤šçº§å°±ç»ªé˜Ÿåˆ—ï¼Œå„çº§é˜Ÿåˆ—ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼Œæ—¶é—´ç‰‡ä»å°åˆ°å¤§</li>
<li>2.æ–°è¿›ç¨‹åˆ°è¾¾æ—¶å…ˆè¿›å…¥ç¬¬1çº§é˜Ÿåˆ—ï¼ŒæŒ‰FCFSåŸåˆ™æ’é˜Ÿç­‰å¾…è¢«åˆ†é…æ—¶é—´ç‰‡ï¼Œè‹¥ç”¨å®Œæ—¶é—´ç‰‡è¿›ç¨‹è¿˜æœªç»“æŸï¼Œåˆ™è¿›ç¨‹è¿›å…¥ä¸‹ä¸€çº§é˜Ÿåˆ—é˜Ÿå°¾ã€‚å¦‚æœæ­¤æ—¶å·²ç»æ˜¯åœ¨æœ€ä¸‹çº§çš„é˜Ÿåˆ—ï¼Œåˆ™é‡æ–°æ”¾å›è¯¥é˜Ÿåˆ—é˜Ÿå°¾</li>
<li>3.åªæœ‰ç¬¬kçº§é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œæ‰ä¼šä¸ºk+1çº§é˜Ÿå¤´çš„è¿›ç¨‹åˆ†é…æ—¶é—´ç‰‡</li>
</ul></li>
<li>ç”¨äºè¿›ç¨‹è°ƒåº¦ï¼ŒæŠ¢å å¼ç®—æ³•
<ul>
<li>åœ¨kçº§é˜Ÿåˆ—çš„è¿›ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œ<strong>è‹¥æ›´ä¸Šçº§çš„é˜Ÿåˆ—ï¼ˆ1~k-1çº§ï¼‰ä¸­è¿›å…¥äº†ä¸€ä¸ªæ–°è¿›ç¨‹ï¼Œåˆ™ç”±äºæ–°è¿›ç¨‹å¤„äºä¼˜å…ˆçº§æ›´é«˜çš„é˜Ÿåˆ—ä¸­ï¼Œå› æ­¤æ–°è¿›ç¨‹ä¼šæŠ¢å å¤„ç†æœºï¼Œ</strong>åŸæ¥è¿è¡Œçš„è¿›ç¨‹æ”¾å›kçº§é˜Ÿåˆ—é˜Ÿå°¾ã€‚</li>
</ul></li>
<li><strong>ä¼˜ç‚¹ï¼š</strong>å¯¹å„ç±»å‹è¿›ç¨‹ç›¸å¯¹å…¬å¹³ï¼ˆFCFSçš„ä¼˜ç‚¹ï¼‰ï¼›æ¯ä¸ªæ–°åˆ°è¾¾çš„è¿›ç¨‹éƒ½å¯ä»¥å¾ˆå¿«å°±å¾—åˆ°å“åº”ï¼ˆRRçš„ä¼˜ç‚¹ï¼‰ï¼›çŸ­è¿›ç¨‹åªç”¨è¾ƒå°‘çš„æ—¶é—´å°±å¯å®Œæˆï¼ˆSPFçš„ä¼˜ç‚¹ï¼‰ï¼›ä¸å¿…å®ç°ä¼°è®¡è¿›ç¨‹çš„è¿è¡Œæ—¶é—´ï¼ˆé¿å…ç”¨æˆ·ä½œå‡ï¼‰ï¼›å¯çµæ´»åœ°è°ƒæ•´å¯¹å„ç±»è¿›ç¨‹çš„åå¥½ç¨‹åº¦ï¼Œæ¯”å¦‚CPUå¯†é›†å‹è¿›ç¨‹ã€I/0å¯†é›†å‹è¿›ç¨‹ï¼ˆæ‹“å±•ï¼šå¯ä»¥å°†å› l/Oè€Œé˜»å¡çš„è¿›ç¨‹é‡æ–°æ”¾å›åŸé˜Ÿåˆ—ï¼Œè¿™æ ·I/oå‹è¿›ç¨‹å°±å¯ä»¥ä¿æŒè¾ƒé«˜ä¼˜å…ˆçº§ï¼‰</li>
<li><strong>ç¤ºä¾‹ï¼š</strong>
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220412113638505.png" /></li>
<li>æ–°è¿›ç¨‹åˆ°è¾¾æ—¶å…ˆè¿›å…¥ç¬¬1çº§é˜Ÿåˆ—ï¼ŒæŒ‰FCFSåŸåˆ™æ’é˜Ÿç­‰å¾…è¢«åˆ†é…æ—¶é—´ç‰‡ã€‚è‹¥ç”¨å®Œæ—¶é—´ç‰‡è¿›ç¨‹è¿˜æœªç»“æŸï¼Œåˆ™è¿›ç¨‹è¿›å…¥ä¸‹ä¸€çº§é˜Ÿåˆ—é˜Ÿå°¾ã€‚å¦‚æœæ­¤æ—¶å·²ç»åœ¨æœ€ä¸‹çº§çš„é˜Ÿåˆ—ï¼Œåˆ™é‡æ–°æ”¾å›æœ€ä¸‹çº§é˜Ÿåˆ—é˜Ÿå°¾</li>
<li>åªæœ‰ç¬¬kçº§é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œæ‰ä¼šä¸ºk+1çº§é˜Ÿå¤´çš„è¿›ç¨‹åˆ†é…æ—¶é—´ç‰‡</li>
<li>è¢«æŠ¢å å¤„ç†æœºçš„è¿›ç¨‹é‡æ–°æ”¾å›åŸé˜Ÿåˆ—é˜Ÿå°¾</li>
</ul></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220412113856291.png" /></p>
<p>â€‹
æ³¨ï¼šæ¯”èµ·æ—©æœŸçš„æ‰¹å¤„ç†æ“ä½œç³»ç»Ÿæ¥è¯´ï¼Œç”±äºè®¡ç®—æœºé€ ä»·å¤§å¹…é™ä½ï¼Œå› æ­¤ä¹‹åå‡ºç°çš„äº¤äº’å¼æ“ä½œç³»ç»Ÿï¼ˆåŒ…æ‹¬åˆ†æ—¶æ“ä½œç³»ç»Ÿã€å®æ—¶æ“ä½œç³»ç»Ÿç­‰ï¼‰æ›´æ³¨é‡ç³»ç»Ÿçš„å“åº”æ—¶é—´ã€å…¬å¹³æ€§ã€å¹³è¡¡æ€§ç­‰æŒ‡æ ‡ã€‚è€Œè¿™å‡ ç§ç®—æ³•æ°å¥½ä¹Ÿèƒ½è¾ƒå¥½åœ°æ»¡è¶³äº¤äº’å¼ç³»ç»Ÿçš„éœ€æ±‚ã€‚å› æ­¤è¿™ä¸‰ç§ç®—æ³•é€‚åˆç”¨äºäº¤äº’å¼ç³»ç»Ÿã€‚ï¼ˆæ¯”å¦‚UNIXä½¿ç”¨çš„å°±æ˜¯å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•ï¼‰*</p>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ“ä½œç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Operating System</tag>
      </tags>
  </entry>
  <entry>
    <title>InnoDBæ•°æ®å­˜å‚¨ç»“æ„åˆ†æ</title>
    <url>/2022/10/17/e8cf764280fd/</url>
    <content><![CDATA[<h3 id="ä¸€æ•°æ®åº“çš„å­˜å‚¨ç»“æ„é¡µ">ä¸€ã€æ•°æ®åº“çš„å­˜å‚¨ç»“æ„ï¼šé¡µ</h3>
<h4
id="ç£ç›˜ä¸å†…å­˜äº¤äº’çš„åŸºæœ¬å•ä½é¡µ">1ã€ç£ç›˜ä¸å†…å­˜äº¤äº’çš„åŸºæœ¬å•ä½â€”â€”é¡µï¼š</h4>
<ul>
<li><p>InnoDBå°†æ•°æ®åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªé¡µï¼Œé¡µçš„å¤§å°é»˜è®¤ä¸º16KBã€‚</p></li>
<li><p><strong>å°†é¡µä½œä¸ºç£ç›˜å’Œå†…å­˜ä¹‹é—´äº¤äº’çš„åŸºæœ¬å•ä½ã€‚</strong>å³ï¼Œåœ¨æ•°æ®åº“ä¸­ï¼Œä¸è®ºè¯»å¤šå°‘è¡Œï¼Œéƒ½æ˜¯å°†è¿™äº›è¡Œæ‰€åœ¨çš„é¡µè¿›è¡ŒåŠ è½½ã€‚å³I/Oæ“ä½œçš„æœ€å°å•ä½å°±æ˜¯é¡µã€‚</p></li>
<li><p>è¿ç»­çš„é¡µä¹‹é—´ï¼Œä¸åœ¨ç‰©ç†ç»“æ„ä¸Šç›¸è¿æ¥ï¼ŒæœŸé—´é€šè¿‡åŒå‘é“¾è¡¨è¿æ¥ã€‚æ¯ä¸ªæ•°æ®é¡µä¸­çš„è®°å½•ä¼šæŒ‰ç…§ä¸»é”®çš„å€¼ä»å°åˆ°å¤§çš„é¡ºåºç»„æˆä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œ<strong>æ¯ä¸ªæ•°æ®ä¹Ÿéƒ½ä¼šä¸ºå­˜å‚¨åœ¨å®ƒé‡Œé¢çš„è®°å½•ç”Ÿæˆä¸€ä¸ªé¡µç›®å½•ï¼Œ</strong>è¿™æ ·å¯ä»¥åœ¨é¡µç›®å½•ä¸­æ˜¯ç”¨äºŒåˆ†æ³•å®šä½åˆ°å¯¹åº”çš„æ§½ï¼Œå†éå†æ§½å¯¹åº”åˆ†ç»„ä¸­çš„è®°å½•æ‰¾åˆ°æŒ‡å®šè®°å½•å°±è¡Œã€‚</p></li>
<li><p>é¡µçš„ä¸Šå±‚ç»“æ„ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221023094039939.png" /></p>
<ul>
<li>åŒºï¼šä¸€ä¸ªåŒºä¼šåˆ†é…64ä¸ªè¿ç»­çš„é¡µ</li>
<li>æ®µï¼šæ®µæ˜¯æ•°æ®åº“ä¸­çš„åˆ†é…å•ä½ã€‚æ®µä¸­ä¸è¦æ±‚åŒºå’ŒåŒºä¹‹é—´è¿ç»­ã€‚æ¯”å¦‚è¯´åˆ›å»ºä¸€å¼ è¡¨æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªè¡¨æ®µï¼Œåˆ›å»ºä¸€ä¸ªç´¢å¼•æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªç´¢å¼•æ®µã€‚</li>
<li>è¡¨ç©ºé—´ï¼šé€»è¾‘å®¹å™¨ï¼Œå¯ä»¥æœ‰1ä¸ªæˆ–å¤šä¸ªæ®µã€‚è¡¨ç©ºé—´ä»ç®¡ç†ä¸Šå¯ä»¥åˆ’åˆ†ä¸ºï¼šç³»ç»Ÿè¡¨ç©ºé—´ã€ç”¨æˆ·è¡¨ç©ºé—´ç­‰ã€‚</li>
</ul></li>
</ul>
<h4 id="é¡µçš„å†…éƒ¨ç»“æ„">2ã€é¡µçš„å†…éƒ¨ç»“æ„ï¼š</h4>
<h5 id="æ•°æ®é¡µçš„å­˜å‚¨ç©ºé—´è¢«åˆ’åˆ†ä¸º7ä¸ªéƒ¨åˆ†">1)
æ•°æ®é¡µçš„å­˜å‚¨ç©ºé—´è¢«åˆ’åˆ†ä¸º7ä¸ªéƒ¨åˆ†ï¼š</h5>
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221023094541084.png" /></li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221023094558222.png" /></li>
</ul>
<h5 id="file-header-å’Œ-file-trailer-æ–‡ä»¶å¤´éƒ¨å’Œæ–‡ä»¶å°¾éƒ¨">2) File Header
å’Œ File Trailer æ–‡ä»¶å¤´éƒ¨å’Œæ–‡ä»¶å°¾éƒ¨ï¼š</h5>
<ul>
<li>File Header æè¿°å„ç§é¡µçš„é€šç”¨ä¿¡æ¯â€”â€”é¡µçš„ç¼–å·ï¼Œä¸Šä¸€é¡µä¸‹ä¸€é¡µç­‰
<ul>
<li>FIL_PAGE_OFFSET é¡µçš„å•ç‹¬é¡µå·</li>
<li>FIL_PAGE_TYPE é¡µçš„ç±»å‹ï¼Œæ¯”å¦‚ç´¢å¼•é¡µã€æ—¥å¿—é¡µç­‰ç­‰</li>
<li>FIL_PAGE_PREVï¼ˆ4å­—èŠ‚ï¼‰å’ŒFIL_PAGE_NEXTï¼ˆ4å­—èŠ‚ï¼‰æœ¬é¡µçš„ä¸Šä¸€ä¸ªå’Œä¸‹ä¸€ä¸ªé¡µçš„é¡µå·ã€‚è¿™æ ·é€šè¿‡å»ºç«‹ä¸€ä¸ªåŒå‘é“¾è¡¨æŠŠè®¸è®¸å¤šå¤šçš„é¡µå°±éƒ½ä¸²è”èµ·æ¥äº†ï¼Œä¿è¯è¿™äº›é¡µä¹‹é—´ä¸éœ€è¦æ˜¯ç‰©ç†ä¸Šçš„è¿ç»­ï¼Œè€Œæ˜¯é€»è¾‘ä¸Šçš„è¿ç»­ã€‚</li>
<li>FIL_PAGE_SPACE_OR_CHKSUMï¼ˆ4å­—èŠ‚ï¼‰å½“å‰é¡µé¢çš„æ ¡éªŒå’Œï¼Œ<strong>æ–‡ä»¶å¤´éƒ¨å’Œå°¾éƒ¨éƒ½æœ‰è¿™ä¸ªæ ¡éªŒå’Œ</strong>
<ul>
<li>ä½œç”¨ :
InnoDBå­˜å‚¨å¼•æ“ä»¥é¡µä¸ºå•ä½æŠŠæ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­å¤„ç†ï¼Œ<strong>å¦‚æœè¯¥é¡µä¸­çš„æ•°æ®åœ¨å†…å­˜ä¸­è¢«ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆåœ¨ä¿®æ”¹åçš„æŸä¸ªæ—¶é—´éœ€è¦æŠŠæ•°æ®åŒæ­¥åˆ°ç£ç›˜ä¸­ã€‚ä½†æ˜¯åœ¨åŒæ­¥äº†ä¸€åŠçš„æ—¶å€™æ–­ç”µäº†ï¼Œé€ æˆäº†è¯¥é¡µä¼ è¾“çš„ä¸å®Œæ•´ã€‚</strong>ä¸ºäº†æ£€æµ‹ä¸€ä¸ªé¡µæ˜¯å¦å®Œæ•´ï¼ˆä¹Ÿå°±æ˜¯åœ¨åŒæ­¥çš„æ—¶å€™æœ‰æ²¡æœ‰å‘ç”ŸåªåŒæ­¥ä¸€åŠçš„å°´å°¬æƒ…å†µï¼‰ï¼Œ<strong>è¿™æ—¶å¯ä»¥é€šè¿‡æ–‡ä»¶å°¾çš„æ ¡éªŒå’Œï¼ˆchecksum
å€¼ï¼‰ä¸æ–‡ä»¶å¤´çš„æ ¡éªŒå’Œåšæ¯”å¯¹ï¼Œå¦‚æœä¸¤ä¸ªå€¼ä¸ç›¸ç­‰åˆ™è¯æ˜é¡µçš„ä¼ è¾“æœ‰é—®é¢˜ï¼Œéœ€è¦é‡æ–°è¿›è¡Œä¼ è¾“ï¼Œ</strong>å¦åˆ™è®¤ä¸ºé¡µçš„ä¼ è¾“å·²ç»å®Œæˆã€‚</li>
<li>å…·ä½“æ“ä½œæ–¹æ³•ï¼šæ¯å½“ä¸€ä¸ªé¡µé¢åœ¨å†…å­˜ä¸­ä¿®æ”¹äº†ï¼Œåœ¨åŒæ­¥ä¹‹å‰å°±è¦æŠŠå®ƒçš„æ ¡éªŒå’Œç®—å‡ºæ¥ï¼Œå› ä¸ºFile
Headeråœ¨é¡µé¢çš„å‰è¾¹ï¼Œæ‰€ä»¥æ ¡éªŒå’Œä¼šè¢«é¦–å…ˆåŒæ­¥åˆ°ç£ç›˜ï¼Œå½“å®Œå…¨å†™å®Œæ—¶ï¼Œæ ¡éªŒå’Œä¹Ÿä¼šè¢«å†™åˆ°é¡µçš„å°¾éƒ¨ï¼Œå¦‚æœå®Œå…¨åŒæ­¥æˆåŠŸï¼Œåˆ™é¡µçš„é¦–éƒ¨å’Œå°¾éƒ¨çš„æ ¡éªŒå’Œåº”è¯¥æ˜¯ä¸€è‡´çš„ã€‚å¦‚æœå†™äº†ä¸€åŠå„¿æ–­ç”µäº†ï¼Œé‚£ä¹ˆåœ¨File
Headerä¸­çš„æ ¡éªŒå’Œå°±ä»£è¡¨ç€å·²ç»ä¿®æ”¹è¿‡çš„é¡µï¼Œè€Œåœ¨File
Trailerä¸­çš„æ ¡éªŒå’Œä»£è¡¨ç€åŸå…ˆçš„é¡µï¼ŒäºŒè€…ä¸åŒåˆ™æ„å‘³ç€åŒæ­¥ä¸­é—´å‡ºäº†é”™ã€‚</li>
</ul></li>
<li>FIL_PAGE_LSN é¡µé¢è¢«æœ€åä¿®æ”¹æ—¶å¯¹åº”çš„æ—¥å¿—åºåˆ—ä½ç½®ï¼ˆLog Sequence
Numberï¼‰</li>
</ul></li>
<li>æ–‡ä»¶å°¾éƒ¨ï¼šå…±8å­—èŠ‚
<ul>
<li>å‰4ä¸ªå­—èŠ‚ä»£è¡¨é¡µçš„æ ¡éªŒå’Œï¼šè¿™ä¸ªéƒ¨åˆ†æ˜¯å’ŒFile Headerä¸­çš„æ ¡éªŒå’Œç›¸å¯¹åº”çš„ã€‚
å4ä¸ªå­—èŠ‚ä»£è¡¨é¡µé¢è¢«æœ€åä¿®æ”¹æ—¶å¯¹åº”çš„æ—¥å¿—åºåˆ—ä½ç½®ï¼ˆLSNï¼‰ï¼šè¿™ä¸ªéƒ¨åˆ†ä¹Ÿæ˜¯ä¸ºäº†æ ¡éªŒé¡µçš„å®Œæ•´æ€§çš„ï¼Œå¦‚æœé¦–éƒ¨å’Œå°¾éƒ¨çš„LSNå€¼æ ¡éªŒä¸æˆåŠŸçš„è¯ï¼Œå°±è¯´æ˜åŒæ­¥è¿‡ç¨‹å‡ºç°äº†é—®é¢˜</li>
</ul></li>
</ul>
<h5 id="free-space-user-records-infimum-supremum">3) Free Space &amp;
User Records &amp; Infimum Supremum</h5>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-23%2016.31.02.png" /></p>
<ul>
<li><p>æ¯æ’å…¥ä¸€æ¡è®°å½•ï¼Œä»Free Spaceéƒ¨åˆ†ç”³è¯·ä¸€ä¸ªè®°å½•å¤§å°çš„ç©ºé—´åˆ†ç»™User
Recordsç©ºé—´</p></li>
<li><p>æˆ‘ä»¬è‡ªå·±å­˜å‚¨çš„è®°å½•ä¼šæŒ‰ç…§æŒ‡å®šçš„è¡Œæ ¼å¼å­˜å‚¨åˆ°User
Recordséƒ¨åˆ†</p></li>
<li><p>è®°å½•æŒ‰ç…§æŒ‡å®šçš„è¡Œæ ¼å¼ä¸€æ¡ä¸€æ¡æ‘†åœ¨User
Recordséƒ¨åˆ†ï¼Œç›¸äº’ä¹‹é—´å½¢æˆå•é“¾è¡¨ã€‚
ç”¨æˆ·è®°å½•é‡Œçš„ä¸€æ¡æ¡æ•°æ®å¦‚ä½•è®°å½•å’Œå½¢æˆå‘¢ï¼Ÿè¯¦è§InnoDBè¡Œæ ¼å¼ä¸­çš„è®°å½•å¤´ä¿¡æ¯ã€‚</p></li>
<li><p>Infimum Supremum æœ€å°æœ€å¤§è®°å½•ï¼š</p>
<ul>
<li><p>å¯¹äºä¸€æ¡å®Œæ•´çš„è®°å½•æ¥è¯´ï¼Œæ¯”è¾ƒè®°å½•çš„å¤§å°å°±æ˜¯æ¯”è¾ƒä¸»é”®çš„å¤§å°ã€‚</p></li>
<li><p>InnoDBè§„å®šçš„æœ€å°è®°å½•ä¸æœ€å¤§è®°å½•è¿™ä¸¤æ¡è®°å½•çš„æ„é€ ååˆ†ç®€å•ï¼Œéƒ½æ˜¯ç”±5å­—èŠ‚å¤§å°çš„è®°å½•å¤´ä¿¡æ¯å’Œ8å­—èŠ‚å¤§å°çš„ä¸€ä¸ªå›ºå®šçš„éƒ¨åˆ†ç»„æˆçš„</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-23%2016.40.36.png" /></p></li>
<li><p>è¿™ä¸¤æ¡è®°å½•ä¸æ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„è®°å½•ï¼Œæ‰€ä»¥å®ƒä»¬å¹¶ä¸å­˜æ”¾åœ¨é¡µçš„User
Recordséƒ¨åˆ†ï¼Œä»–ä»¬è¢«å•ç‹¬æ”¾åœ¨ä¸€ä¸ªç§°ä¸ºInfimum +
Supremumçš„éƒ¨åˆ†ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p></li>
</ul></li>
</ul>
<h5 id="page-directory-page-header-é¡µç›®å½•å’Œé¡µå¤´">4) Page Directory &amp;
Page Header é¡µç›®å½•å’Œé¡µå¤´</h5>
<ul>
<li><p>1ã€ä¸ºä»€ä¹ˆéœ€è¦é¡µç›®å½•ï¼Ÿ</p>
<ul>
<li>åœ¨é¡µä¸­ï¼Œè®°å½•æ˜¯ä»¥å•å‘é“¾è¡¨çš„å½¢å¼è¿›è¡Œå­˜å‚¨çš„ã€‚æŸ¥æ‰¾æ€§èƒ½å·®ï¼Œå› æ­¤åœ¨é¡µç»“æ„ä¸­ä¸“é—¨è®¾è®¡äº†é¡µç›®å½•è¿™ä¸ªæ¨¡å—ï¼Œä¸“é—¨ç»™è®°å½•åšä¸€ä¸ªç›®å½•ï¼Œé€šè¿‡äºŒåˆ†æŸ¥æ‰¾æ³•çš„æ–¹å¼è¿›è¡Œæ£€ç´¢ï¼Œæå‡æ•ˆç‡ã€‚</li>
<li>å…·ä½“åšæ³•ï¼šå°†æ‰€æœ‰çš„è®°å½•åˆ†æˆå‡ ä¸ªç»„ï¼Œè¿™äº›è®°å½•åŒ…æ‹¬æœ€å°è®°å½•å’Œæœ€å¤§è®°å½•ï¼Œä½†ä¸åŒ…æ‹¬æ ‡è®°ä¸ºâ€œå·²åˆ é™¤â€çš„è®°å½•ã€‚
<ul>
<li>ç¬¬ 1 ç»„ï¼Œä¹Ÿå°±æ˜¯æœ€å°è®°å½•æ‰€åœ¨çš„åˆ†ç»„åªæœ‰ 1 ä¸ªè®°å½•ï¼›
æœ€åä¸€ç»„ï¼Œå°±æ˜¯æœ€å¤§è®°å½•æ‰€åœ¨çš„åˆ†ç»„ï¼Œä¼šæœ‰ 1-8 æ¡è®°å½•ï¼› å…¶ä½™çš„ç»„è®°å½•æ•°é‡åœ¨
4-8 æ¡ä¹‹é—´ã€‚</li>
<li>åœ¨æ¯ä¸ªç»„ä¸­<strong>æœ€åä¸€æ¡è®°å½•çš„å¤´ä¿¡æ¯ä¸­ä¼šå­˜å‚¨è¯¥ç»„ä¸€å…±æœ‰å¤šå°‘æ¡è®°å½•</strong>ï¼Œä½œä¸º
n_owned å­—æ®µã€‚</li>
<li>é¡µç›®å½•ç”¨æ¥å­˜å‚¨<strong>æ¯ç»„æœ€åä¸€æ¡è®°å½•çš„åœ°å€åç§»é‡ï¼Œè¿™äº›åœ°å€åç§»é‡ä¼šæŒ‰ç…§å…ˆåé¡ºåºå­˜å‚¨èµ·æ¥ï¼Œ</strong>æ¯ç»„çš„åœ°å€åç§»é‡ä¹Ÿè¢«ç§°ä¹‹ä¸ºæ§½ï¼ˆslotï¼‰ï¼Œæ¯ä¸ªæ§½ç›¸å½“äºæŒ‡é’ˆæŒ‡å‘äº†ä¸åŒç»„çš„æœ€åä¸€ä¸ªè®°å½•ã€‚</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-23%2016.50.25.png" /></li>
</ul></li>
</ul></li>
<li><p>2ã€é¡µç›®å½•ç»“æ„ä¸‹å¦‚ä½•å¿«é€ŸæŸ¥æ‰¾è®°å½•ï¼Ÿ</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-23%2016.53.45.png" /></p></li>
</ul>
<p>Page Header é¡µå¤´</p>
<ul>
<li><p>ä¸ºäº†èƒ½å¾—åˆ°ä¸€ä¸ªæ•°æ®é¡µä¸­å­˜å‚¨çš„è®°å½•çš„çŠ¶æ€ä¿¡æ¯ï¼Œæ¯”å¦‚æœ¬é¡µä¸­å·²ç»å­˜å‚¨äº†å¤šå°‘æ¡è®°å½•ï¼Œç¬¬ä¸€æ¡è®°å½•çš„åœ°å€æ˜¯ä»€ä¹ˆï¼Œé¡µç›®å½•ä¸­å­˜å‚¨äº†å¤šå°‘ä¸ªæ§½ç­‰ç­‰ï¼Œç‰¹æ„åœ¨é¡µä¸­å®šä¹‰äº†ä¸€ä¸ªå«Page
Headerçš„éƒ¨åˆ†ï¼Œè¿™ä¸ªéƒ¨åˆ†å ç”¨å›ºå®šçš„56ä¸ªå­—èŠ‚ï¼Œä¸“é—¨å­˜å‚¨å„ç§çŠ¶æ€ä¿¡æ¯ã€‚</p></li>
<li><p>PAGE_DIRECTION è®°å½•æ’å…¥æ–¹å‘</p></li>
<li><p>PAGE_N_DIRECTION</p>
<ul>
<li>å‡è®¾è¿ç»­å‡ æ¬¡æ’å…¥æ–°è®°å½•çš„æ–¹å‘éƒ½æ˜¯ä¸€è‡´çš„ï¼ŒInnoDBä¼šæŠŠæ²¿ç€åŒä¸€ä¸ªæ–¹å‘æ’å…¥è®°å½•çš„æ¡æ•°è®°ä¸‹æ¥ï¼Œè¿™ä¸ªæ¡æ•°å°±ç”¨PAGE_N_DIRECTIONè¿™ä¸ªçŠ¶æ€è¡¨ç¤ºã€‚å½“ç„¶ï¼Œå¦‚æœæœ€åä¸€æ¡è®°å½•çš„æ’å…¥æ–¹å‘æ”¹å˜äº†çš„è¯ï¼Œè¿™ä¸ªçŠ¶æ€çš„å€¼ä¼šè¢«æ¸…é›¶é‡æ–°ç»Ÿè®¡ã€‚</li>
</ul></li>
</ul>
<h4
id="ä»æ•°æ®é¡µçš„è§’åº¦çœ‹bæ ‘å¦‚ä½•æŸ¥è¯¢">3ã€ä»æ•°æ®é¡µçš„è§’åº¦çœ‹B+æ ‘å¦‚ä½•æŸ¥è¯¢ï¼š</h4>
<h5 id="å¦‚ä½•æŸ¥è¯¢">1ï¼‰å¦‚ä½•æŸ¥è¯¢ï¼Ÿ</h5>
<p>â€‹
å…ˆä»B+æ ‘çš„æ ¹å¼€å§‹ï¼Œé€å±‚æ£€ç´¢ã€‚ç„¶åå°†æ•°æ®é¡µåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œé¡µç›®å½•ä¸­çš„æ§½ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾çš„æ–¹å¼å…ˆæ‰¾åˆ°ä¸€ä¸ªç²—ç•¥çš„è®°å½•åˆ†ç»„ï¼Œç„¶åå†åœ¨åˆ†ç»„ä¸­é€šè¿‡é“¾è¡¨éå†çš„æ–¹å¼æŸ¥æ‰¾è®°å½•ã€‚</p>
<h5
id="æ™®é€šç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•åœ¨æŸ¥è¯¢ä¸­çš„åŒºåˆ«">2ï¼‰æ™®é€šç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•åœ¨æŸ¥è¯¢ä¸­çš„åŒºåˆ«ï¼Ÿ</h5>
<p>â€‹
å”¯ä¸€ç´¢å¼•æ‰¾åˆ°äº†å…³é”®å­—å°±å¯ä»¥åœæ­¢æ£€ç´¢ã€‚è€Œæ™®é€šç´¢å¼•æ‰¾åˆ°å…³é”®å­—ä»¥åï¼Œè¿˜éœ€è¦åœ¨å†…å­˜ä¸­å¤šçœ‹ä¸‹Xæ¡è®°å½•ã€‚</p>
<h4 id="innodbè¡Œæ ¼å¼compactè¡Œæ ¼å¼">4ã€InnoDBè¡Œæ ¼å¼ï¼šCOMPACTè¡Œæ ¼å¼</h4>
<p>ä¸€æ¡è®°å½•çš„æ•°æ®å¯ä»¥åˆ†ä¸ºè®°å½•çš„é¢å¤–ä¿¡æ¯å’ŒçœŸå®æ•°æ®</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-23%2016.34.37.png" /></p>
<h5 id="å˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨">1ï¼‰å˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨</h5>
<p>â€‹
å˜é•¿å­—æ®µä¸­å­˜å‚¨å¤šå°‘å­—èŠ‚çš„æ•°æ®ä¸æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å­˜å‚¨çœŸå®æ•°æ®çš„æ—¶å€™éœ€è¦é¡ºä¾¿æŠŠè¿™äº›æ•°æ®å ç”¨çš„å­—èŠ‚æ•°ä¹Ÿå­˜èµ·æ¥ã€‚</p>
<p>â€‹
åœ¨Compactè¡Œæ ¼å¼ä¸­ï¼ŒæŠŠæ‰€æœ‰å˜é•¿å­—æ®µçš„çœŸå®æ•°æ®å ç”¨çš„å­—èŠ‚é•¿åº¦éƒ½å­˜æ”¾åœ¨è®°å½•çš„å¼€å¤´éƒ¨ä½ï¼Œä»è€Œå½¢æˆä¸€ä¸ªå˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨ã€‚
æ³¨æ„ï¼šè¿™é‡Œé¢å­˜å‚¨çš„å˜é•¿é•¿åº¦å’Œå­—æ®µé¡ºåºæ˜¯åè¿‡æ¥çš„ã€‚æ¯”å¦‚ä¸¤ä¸ªvarcharå­—æ®µåœ¨è¡¨ç»“æ„çš„é¡ºåºæ˜¯a(10)ï¼Œb(15)ã€‚é‚£ä¹ˆåœ¨å˜é•¿å­—æ®µé•¿åº¦åˆ—è¡¨ä¸­å­˜å‚¨çš„é•¿åº¦é¡ºåºå°±æ˜¯15ï¼Œ10ï¼Œæ˜¯åè¿‡æ¥çš„ã€‚</p>
<h5 id="nullå€¼åˆ—è¡¨">2ï¼‰NULLå€¼åˆ—è¡¨</h5>
<p>â€‹
Compactè¡Œæ ¼å¼ä¼šæŠŠå¯ä»¥ä¸ºNULLçš„åˆ—ç»Ÿä¸€ç®¡ç†èµ·æ¥ï¼Œå­˜åœ¨ä¸€ä¸ªæ ‡è®°ä¸ºNULLå€¼åˆ—è¡¨ä¸­ã€‚å¦‚æœè¡¨ä¸­æ²¡æœ‰å…è®¸å­˜å‚¨
NULL çš„åˆ—ï¼Œåˆ™ NULLå€¼åˆ—è¡¨ä¹Ÿä¸å­˜åœ¨äº†ã€‚</p>
<ul>
<li>ä¸ºä»€ä¹ˆå®šä¹‰NULLå€¼åˆ—è¡¨ï¼Ÿ
<ul>
<li>ä¹‹æ‰€ä»¥è¦å­˜å‚¨NULLæ˜¯å› ä¸ºæ•°æ®éƒ½æ˜¯éœ€è¦å¯¹é½çš„ï¼Œå¦‚æœæ²¡æœ‰æ ‡æ³¨å‡ºæ¥NULLå€¼çš„ä½ç½®ï¼Œå°±æœ‰å¯èƒ½åœ¨æŸ¥è¯¢æ•°æ®çš„æ—¶å€™å‡ºç°æ··ä¹±ã€‚å¦‚æœä½¿ç”¨ä¸€ä¸ªç‰¹å®šçš„ç¬¦å·æ”¾åˆ°ç›¸åº”çš„æ•°æ®ä½è¡¨ç¤ºç©ºç½®çš„è¯ï¼Œè™½ç„¶èƒ½è¾¾åˆ°æ•ˆæœï¼Œä½†æ˜¯è¿™æ ·å¾ˆæµªè´¹ç©ºé—´ï¼Œæ‰€ä»¥ç›´æ¥å°±åœ¨è¡Œæ•°æ®å¾—å¤´éƒ¨å¼€è¾Ÿå‡ºä¸€å—ç©ºé—´ä¸“é—¨ç”¨æ¥è®°å½•è¯¥è¡Œæ•°æ®å“ªäº›æ˜¯éç©ºæ•°æ®ï¼Œå“ªäº›æ˜¯ç©ºæ•°æ®ï¼Œ</li>
</ul></li>
<li>æ ¼å¼å¦‚ä¸‹ï¼š
<ul>
<li>äºŒè¿›åˆ¶ä½çš„å€¼ä¸º1æ—¶ï¼Œä»£è¡¨è¯¥åˆ—çš„å€¼ä¸ºNULLã€‚</li>
<li>äºŒè¿›åˆ¶ä½çš„å€¼ä¸º0æ—¶ï¼Œä»£è¡¨è¯¥åˆ—çš„å€¼ä¸ä¸ºNULLã€‚</li>
</ul></li>
<li>ä¾‹å¦‚ï¼šå­—æ®µ aã€bã€cï¼Œå…¶ä¸­aæ˜¯ä¸»é”®ï¼Œåœ¨æŸä¸€è¡Œä¸­å­˜å‚¨çš„æ•°ä¾æ¬¡æ˜¯
a=1ã€b=nullã€c=2ã€‚é‚£ä¹ˆCompactè¡Œæ ¼å¼ä¸­çš„NULLå€¼åˆ—è¡¨ä¸­å­˜å‚¨ï¼š01ã€‚ç¬¬ä¸€ä¸ª0è¡¨ç¤ºcä¸ä¸ºnullï¼Œç¬¬äºŒä¸ª1è¡¨ç¤ºbæ˜¯nullã€‚è¿™é‡Œä¹‹æ‰€ä»¥æ²¡æœ‰aæ˜¯å› ä¸ºæ•°æ®åº“ä¼šè‡ªåŠ¨è·³è¿‡ä¸»é”®ï¼Œå› ä¸ºä¸»é”®è‚¯å®šæ˜¯éNULLä¸”å”¯ä¸€çš„ï¼Œåœ¨NULLå€¼åˆ—è¡¨çš„æ•°æ®ä¸­å°±ä¼šè‡ªåŠ¨è·³è¿‡ä¸»é”®ã€‚</li>
</ul>
<h5 id="è®°å½•å¤´ä¿¡æ¯æ€»å…±å°±5ä¸ªå­—èŠ‚">3ï¼‰è®°å½•å¤´ä¿¡æ¯ï¼ˆæ€»å…±å°±5ä¸ªå­—èŠ‚ï¼‰</h5>
<ul>
<li><p>delete_mask</p>
<ul>
<li>è¿™ä¸ªå±æ€§æ ‡è®°ç€å½“å‰è®°å½•æ˜¯å¦è¢«åˆ é™¤ï¼Œå ç”¨1ä¸ªäºŒè¿›åˆ¶ä½ã€‚è¿™äº›è¢«åˆ é™¤çš„è®°å½•ä¹‹æ‰€ä»¥ä¸ç«‹å³ä»ç£ç›˜ä¸Šç§»é™¤ï¼Œæ˜¯å› ä¸ºç§»é™¤å®ƒä»¬ä¹‹åå…¶ä»–çš„è®°å½•åœ¨ç£ç›˜ä¸Šéœ€è¦é‡æ–°æ’åˆ—ï¼Œå¯¼è‡´æ€§èƒ½æ¶ˆè€—ã€‚æ‰€ä»¥åªæ˜¯æ‰“ä¸€ä¸ªåˆ é™¤æ ‡è®°è€Œå·²ï¼Œæ‰€æœ‰è¢«åˆ é™¤æ‰çš„è®°å½•éƒ½ä¼šç»„æˆä¸€ä¸ªæ‰€è°“çš„åƒåœ¾é“¾è¡¨ã€‚<br />
</li>
</ul></li>
<li><p>min_rec_mask</p>
<ul>
<li>B+æ ‘çš„æ¯å±‚éå¶å­èŠ‚ç‚¹ä¸­çš„æœ€å°è®°å½•éƒ½ä¼šæ·»åŠ è¯¥æ ‡è®°ï¼Œmin_rec_maskå€¼ä¸º1ã€‚</li>
</ul></li>
<li><p>record_type</p>
<ul>
<li>è¿™ä¸ªå±æ€§è¡¨ç¤ºå½“å‰è®°å½•çš„ç±»å‹ï¼Œä¸€å…±æœ‰4ç§ç±»å‹çš„è®°å½•ï¼š
<ul>
<li>0ï¼šè¡¨ç¤ºæ™®é€šè®°å½•<br />
</li>
<li>1ï¼šè¡¨ç¤ºB+æ ‘éå¶èŠ‚ç‚¹è®°å½•</li>
<li>2ï¼šè¡¨ç¤ºæœ€å°è®°å½•<br />
</li>
<li>3ï¼šè¡¨ç¤ºæœ€å¤§è®°å½•</li>
</ul></li>
</ul></li>
<li><p>heap_no</p>
<ul>
<li>è¿™ä¸ªå±æ€§è¡¨ç¤ºå½“å‰è®°å½•åœ¨æœ¬é¡µä¸­çš„ä½ç½®ã€‚æ¯”å¦‚è¯´2ï¼Œ3ï¼Œ4ï¼Œ5ç­‰</li>
<li><strong>MySQLä¼šè‡ªåŠ¨ç»™æ¯ä¸ªé¡µé‡ŒåŠ äº†ä¸¤ä¸ªè®°å½•ï¼Œç”±äºè¿™ä¸¤ä¸ªè®°å½•å¹¶ä¸æ˜¯æˆ‘ä»¬è‡ªå·±æ’å…¥çš„ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä¹Ÿç§°ä¸ºä¼ªè®°å½•æˆ–è€…è™šæ‹Ÿè®°å½•ã€‚</strong>è¿™ä¸¤ä¸ªä¼ªè®°å½•ä¸€ä¸ªä»£è¡¨æœ€å°è®°å½•ï¼Œä¸€ä¸ªä»£è¡¨æœ€å¤§è®°å½•ã€‚æœ€å°è®°å½•å’Œæœ€å¤§è®°å½•çš„heap_noå€¼åˆ†åˆ«æ˜¯0å’Œ1ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»¬çš„ä½ç½®æœ€é å‰ã€‚<br />
</li>
</ul></li>
<li><p>n_owned</p>
<ul>
<li><strong>é¡µç›®å½•</strong>ä¸­æ¯ä¸ªç»„ä¸­æœ€åä¸€æ¡è®°å½•çš„å¤´ä¿¡æ¯ä¸­ä¼šå­˜å‚¨è¯¥ç»„ä¸€å…±æœ‰å¤šå°‘æ¡è®°å½•ï¼Œä½œä¸º
n_owned å­—æ®µã€‚è¯¦æƒ…è§page directoryã€‚</li>
</ul></li>
<li><p>next_record</p>
<ul>
<li>å®ƒè¡¨ç¤ºä»å½“å‰è®°å½•çš„çœŸå®æ•°æ®åˆ°ä¸‹ä¸€æ¡è®°å½•çš„çœŸå®æ•°æ®çš„<strong>åœ°å€åç§»é‡ã€‚</strong></li>
<li>æ¯”å¦‚ï¼šç¬¬ä¸€æ¡è®°å½•çš„next_recordå€¼ä¸º32ï¼Œæ„å‘³ç€ä»ç¬¬ä¸€æ¡è®°å½•çš„çœŸå®æ•°æ®çš„åœ°å€å¤„å‘åæ‰¾32ä¸ªå­—èŠ‚ä¾¿æ˜¯ä¸‹ä¸€æ¡è®°å½•çš„çœŸå®æ•°æ®ã€‚æ³¨æ„ï¼Œä¸‹ä¸€æ¡è®°å½•æŒ‡å¾—å¹¶ä¸æ˜¯æŒ‰ç…§æˆ‘ä»¬æ’å…¥é¡ºåºçš„ä¸‹ä¸€æ¡è®°å½•ï¼Œè€Œæ˜¯æŒ‰ç…§ä¸»é”®å€¼ç”±å°åˆ°å¤§çš„é¡ºåºçš„ä¸‹ä¸€æ¡è®°å½•ã€‚</li>
<li>è§„å®šInfimumè®°å½•ï¼ˆä¹Ÿå°±æ˜¯æœ€å°è®°å½•ï¼‰çš„ä¸‹ä¸€æ¡è®°å½•å°±æ˜¯æœ¬é¡µä¸­ä¸»é”®å€¼æœ€å°çš„ç”¨æˆ·è®°å½•ï¼Œè€Œæœ¬é¡µä¸­ä¸»é”®å€¼æœ€å¤§çš„ç”¨æˆ·è®°å½•çš„ä¸‹ä¸€æ¡è®°å½•å°±æ˜¯
Supremumè®°å½•ï¼ˆä¹Ÿå°±æ˜¯æœ€å¤§è®°å½•ï¼‰ã€‚</li>
</ul></li>
<li><p><strong>ä¸è®ºæˆ‘ä»¬æ€ä¹ˆå¯¹é¡µä¸­çš„è®°å½•åšå¢åˆ æ”¹æ“ä½œï¼ŒInnoDBå§‹ç»ˆä¼šç»´æŠ¤ä¸€æ¡è®°å½•çš„å•é“¾è¡¨ï¼Œé“¾è¡¨ä¸­çš„å„ä¸ªèŠ‚ç‚¹æ˜¯æŒ‰ç…§ä¸»é”®å€¼ç”±å°åˆ°å¤§çš„é¡ºåºè¿æ¥èµ·æ¥çš„ã€‚
</strong></p></li>
<li><p>ä¸»é”®å€¼ä¸º2çš„è®°å½•è¢«åˆ æ‰äº†ä»¥åï¼Œå­˜å‚¨ç©ºé—´ä¸ä¼šå›æ”¶ï¼Œå¦‚æœæˆ‘ä»¬å†æ¬¡æŠŠè¿™æ¡è®°å½•æ’å…¥åˆ°è¡¨ä¸­ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆäº‹å‘¢ï¼Ÿâ€”â€”
ç›´æ¥å¤ç”¨äº†åŸæ¥è¢«åˆ é™¤è®°å½•çš„å­˜å‚¨ç©ºé—´ã€‚</p></li>
<li><p><strong>è¯´æ˜ï¼šå½“æ•°æ®é¡µä¸­å­˜åœ¨å¤šæ¡è¢«åˆ é™¤æ‰çš„è®°å½•æ—¶ï¼Œè¿™äº›è®°å½•çš„next_recordå±æ€§å°†ä¼šæŠŠè¿™äº›è¢«åˆ é™¤æ‰çš„è®°å½•ç»„æˆä¸€ä¸ªåƒåœ¾é“¾è¡¨ï¼Œä»¥å¤‡ä¹‹åé‡ç”¨è¿™éƒ¨åˆ†å­˜å‚¨ç©ºé—´ã€‚
</strong></p></li>
</ul>
<h5 id="è®°å½•çš„çœŸå®æ•°æ®">4ï¼‰è®°å½•çš„çœŸå®æ•°æ®</h5>
<p>â€‹ é™¤äº†æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„åˆ—æ•°æ®ä»¥å¤–ï¼Œè¿˜ä¼šæœ‰ä¸‰ä¸ªéšè—åˆ—ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221023222958606.png" /></p>
<p>â€‹
å®é™…ä¸Šè¿™å‡ ä¸ªåˆ—çš„çœŸæ­£åç§°å…¶å®æ˜¯ï¼šDB_ROW_IDã€DB_TRX_IDã€DB_ROLL_PTR</p>
<ul>
<li>ä¸€ä¸ªè¡¨æ²¡æœ‰æ‰‹åŠ¨å®šä¹‰ä¸»é”®ï¼Œåˆ™ä¼šé€‰å–ä¸€ä¸ªUniqueé”®ä½œä¸ºä¸»é”®ï¼Œå¦‚æœè¿Uniqueé”®éƒ½æ²¡æœ‰å®šä¹‰çš„è¯ï¼Œåˆ™ä¼šä¸ºè¡¨é»˜è®¤æ·»åŠ ä¸€ä¸ªåä¸ºrow_idçš„éšè—åˆ—ä½œä¸ºä¸»é”®ã€‚æ‰€ä»¥row_idæ˜¯åœ¨æ²¡æœ‰è‡ªå®šä¹‰ä¸»é”®ä»¥åŠUniqueé”®çš„æƒ…å†µä¸‹æ‰ä¼šå­˜åœ¨çš„ã€‚</li>
<li>äº‹åŠ¡IDå’Œå›æ»šæŒ‡é’ˆæ¶‰åŠåˆ°äº‹åŠ¡ç›¸å…³çš„å†…å®¹ï¼Œå…·ä½“è§äº‹åŠ¡</li>
</ul>
<h4 id="dynamicå’Œcompressedè¡Œæ ¼å¼">5ã€Dynamicå’ŒCompressedè¡Œæ ¼å¼</h4>
<h5 id="ä»€ä¹ˆæ˜¯è¡Œæº¢å‡º">1ï¼‰ä»€ä¹ˆæ˜¯è¡Œæº¢å‡ºï¼Ÿ</h5>
<p>â€‹ InnoDBå­˜å‚¨å¼•æ“å¯ä»¥å°†ä¸€æ¡è®°å½•ä¸­çš„æŸäº›æ•°æ®å­˜å‚¨åœ¨çœŸæ­£çš„æ•°æ®é¡µé¢ä¹‹å¤–ã€‚
å¾ˆå¤šDBAå–œæ¬¢MySQLæ•°æ®åº“æä¾›çš„VARCHAR(M)ç±»å‹ï¼Œè®¤ä¸ºå¯ä»¥å­˜æ”¾65535å­—èŠ‚ã€‚è¿™æ˜¯çœŸçš„å—ï¼Ÿå¦‚æœæˆ‘ä»¬ä½¿ç”¨
asciiå­—ç¬¦é›†çš„è¯ï¼Œä¸€ä¸ªå­—ç¬¦å°±ä»£è¡¨ä¸€ä¸ªå­—èŠ‚ï¼Œæˆ‘ä»¬çœ‹çœ‹VARCHAR(65535)æ˜¯å¦å¯ç”¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE varchar_size_demo( c VARCHAR(65535) ) CHARSET=ascii ROW_FORMAT=Compact;</span><br></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ERROR 1118 (42000): Row size too large. The maximum row size for the used table type, not counting BLOBs, is 65535. This includes storage overhead, check the manual. You have to change some columns to TEXT or BLOBs </span><br></pre></td></tr></table></figure>
<p>â€‹
æŠ¥é”™ä¿¡æ¯è¡¨è¾¾çš„æ„æ€æ˜¯ï¼šMySQLå¯¹ä¸€æ¡è®°å½•å ç”¨çš„æœ€å¤§å­˜å‚¨ç©ºé—´æ˜¯æœ‰é™åˆ¶çš„ï¼Œé™¤BLOBæˆ–è€…TEXTç±»å‹çš„åˆ—ä¹‹å¤–ï¼Œ
å…¶ä»–æ‰€æœ‰çš„åˆ—ï¼ˆä¸åŒ…æ‹¬éšè—åˆ—å’Œè®°å½•å¤´ä¿¡æ¯ï¼‰å ç”¨çš„å­—èŠ‚é•¿åº¦åŠ èµ·æ¥ä¸èƒ½è¶…è¿‡65535ä¸ªå­—èŠ‚ã€‚
è¿™ä¸ª65535ä¸ªå­—èŠ‚é™¤äº†åˆ—æœ¬èº«çš„æ•°æ®ä¹‹å¤–ï¼Œè¿˜åŒ…æ‹¬ä¸€äº›å…¶ä»–çš„æ•°æ®ï¼Œ</p>
<p>â€‹
<strong>ä»¥Compactè¡Œæ ¼å¼ä¸ºä¾‹ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬ä¸ºäº†å­˜å‚¨ä¸€ä¸ªVARCHAR(M)ç±»å‹çš„åˆ—ï¼Œé™¤äº†çœŸå®æ•°æ®å æœ‰ç©ºé—´ä»¥å¤–ï¼Œè¿˜éœ€è¦è®°å½•çš„é¢å¤–ä¿¡æ¯ã€‚
å¦‚æœè¯¥VARCHARç±»å‹çš„åˆ—æ²¡æœ‰NOT
NULLå±æ€§ï¼Œé‚£æœ€å¤šåªèƒ½å­˜å‚¨65532ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œå› ä¸ºå˜é•¿å­—æ®µçš„é•¿åº¦å ç”¨
2ä¸ªå­—èŠ‚ï¼ŒNULLå€¼æ ‡è¯†éœ€è¦å ç”¨1ä¸ªå­—èŠ‚ã€‚</strong></p>
<ul>
<li><p>é€šè¿‡ä¸Šé¢çš„æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ä¸€ä¸ªé¡µçš„å¤§å°ä¸€èˆ¬æ˜¯16KBï¼Œä¹Ÿå°±æ˜¯16384å­—èŠ‚ï¼Œè€Œä¸€ä¸ªVARCHAR(M)ç±»å‹çš„åˆ—å°±æœ€å¤šå¯ä»¥å­˜å‚¨65533ä¸ªå­—èŠ‚ï¼Œ<strong>è¿™æ ·å°±å¯èƒ½å‡ºç°ä¸€ä¸ªé¡µå­˜æ”¾ä¸äº†ä¸€æ¡è®°å½•ï¼Œè¿™ç§ç°è±¡ç§°ä¸ºè¡Œæº¢å‡ºã€‚</strong></p></li>
<li><p>åœ¨Compactå’ŒReduntantè¡Œæ ¼å¼ä¸­ï¼Œå¯¹äºå ç”¨å­˜å‚¨ç©ºé—´éå¸¸å¤§çš„åˆ—ï¼Œåœ¨è®°å½•çš„çœŸå®æ•°æ®å¤„åªä¼šå­˜å‚¨è¯¥åˆ—çš„ä¸€éƒ¨åˆ†æ•°æ®ï¼ŒæŠŠå‰©ä½™çš„æ•°æ®åˆ†æ•£å­˜å‚¨åœ¨å‡ ä¸ªå…¶ä»–çš„é¡µä¸­è¿›è¡Œåˆ†é¡µå­˜å‚¨ï¼Œç„¶åè®°å½•çš„çœŸå®æ•°æ®å¤„ç”¨20ä¸ªå­—èŠ‚å­˜å‚¨æŒ‡å‘è¿™äº›é¡µçš„åœ°å€ï¼ˆå½“ç„¶è¿™20ä¸ªå­—èŠ‚ä¸­è¿˜åŒ…æ‹¬è¿™äº›åˆ†æ•£åœ¨å…¶ä»–é¡µé¢ä¸­çš„æ•°æ®çš„å ç”¨çš„å­—èŠ‚æ•°ï¼‰ï¼Œä»è€Œå¯ä»¥æ‰¾åˆ°å‰©ä½™æ•°æ®æ‰€åœ¨çš„é¡µã€‚è¿™ç§°ä¸ºé¡µçš„æ‰©å±•ï¼Œï¼š</p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221023224141758.png" /></p>
<h5 id="dynamicå’Œcompressedå¦‚ä½•å¤„ç†è¡Œæº¢å‡º">2)
Dynamicå’ŒCompressedå¦‚ä½•å¤„ç†è¡Œæº¢å‡ºï¼Ÿ</h5>
<p>â€‹ åœ¨MySQL
8.0ä¸­ï¼Œé»˜è®¤è¡Œæ ¼å¼å°±æ˜¯Dynamicã€‚Dynamicã€Compressedè¡Œæ ¼å¼å’ŒCompactè¡Œæ ¼å¼æŒºåƒï¼Œåªä¸è¿‡åœ¨å¤„ç†è¡Œæº¢å‡ºæ•°æ®æ—¶æœ‰åˆ†æ­§ï¼š</p>
<ul>
<li><p>Compressedå’ŒDynamicä¸¤ç§è®°å½•æ ¼å¼å¯¹äºå­˜æ”¾åœ¨BLOBä¸­çš„æ•°æ®é‡‡ç”¨äº†å®Œå…¨çš„è¡Œæº¢å‡ºçš„æ–¹å¼ã€‚</p></li>
<li><p>å¦‚å›¾ï¼Œåœ¨æ•°æ®é¡µä¸­åªå­˜æ”¾20ä¸ªå­—èŠ‚çš„æŒ‡é’ˆï¼ˆæº¢å‡ºé¡µçš„åœ°å€ï¼‰ï¼Œå®é™…çš„æ•°æ®éƒ½å­˜æ”¾åœ¨Off
Pageï¼ˆæº¢å‡ºé¡µï¼‰ä¸­ã€‚Compactå’ŒRedundantä¸¤ç§æ ¼å¼ä¼šåœ¨è®°å½•çš„çœŸå®æ•°æ®å¤„å­˜å‚¨ä¸€éƒ¨åˆ†æ•°æ®ï¼ˆå­˜æ”¾768ä¸ªå‰ç¼€å­—èŠ‚ï¼‰ã€‚<strong>Compressedè¡Œè®°å½•æ ¼å¼çš„å¦ä¸€ä¸ªåŠŸèƒ½å°±æ˜¯ï¼Œå­˜å‚¨åœ¨å…¶ä¸­çš„è¡Œæ•°æ®ä¼šä»¥zlibçš„ç®—æ³•è¿›è¡Œå‹ç¼©ï¼Œå› æ­¤å¯¹äºBLOBã€TEXTã€VARCHARè¿™ç±»å¤§é•¿åº¦ç±»å‹çš„æ•°æ®èƒ½å¤Ÿè¿›è¡Œéå¸¸æœ‰æ•ˆçš„å­˜å‚¨ã€‚</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221023224238085.png" /></p></li>
</ul>
<h4 id="åŒºæ®µä¸ç¢ç‰‡åŒºä¸è¡¨ç©ºé—´ç»“æ„">5ã€åŒºã€æ®µä¸ç¢ç‰‡åŒºä¸è¡¨ç©ºé—´ç»“æ„ï¼š</h4>
<h5 id="ä¸ºä»€ä¹ˆè¦æœ‰åŒº">1ï¼‰ä¸ºä»€ä¹ˆè¦æœ‰åŒºï¼Ÿ</h5>
<p>â€‹
å¦‚æœä»¥é¡µä¸ºå•ä½æ¥åˆ†é…å­˜å‚¨ç©ºé—´çš„è¯ï¼ŒåŒå‘é“¾è¡¨ç›¸é‚»çš„ä¸¤ä¸ªé¡µä¹‹é—´çš„ç‰©ç†ä½ç½®å¯èƒ½ç¦»å¾—æ¯”è¾ƒè¿œã€‚å½“è¿›è¡ŒèŒƒå›´æŸ¥è¯¢æ—¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬åªéœ€è¦å®šä½åˆ°æœ€å·¦ä¾§å’Œæœ€å³ä¾§çš„è®°å½•ï¼Œç„¶åæ²¿ç€åŒå‘é“¾è¡¨ä¸€ç›´æ‰«æå³å¯ã€‚é‚£ä¹ˆå¦‚æœç›¸é‚»çš„ä¸¤ä¸ªé¡µä¹‹é—´çš„ç‰©ç†ä½ç½®å¯èƒ½ç¦»å¾—æ¯”è¾ƒè¿œçš„è¯ï¼Œå…¶å®æ˜¯åœ¨åš<strong>éšæœºIO</strong>ï¼Œå¯¹äºç£ç›˜è€Œè¨€è¯»å†™é€Ÿåº¦æ˜¯å¾ˆæ…¢çš„ã€‚</p>
<p>â€‹
æ‰€ä»¥ï¼Œå¼•å…¥åŒºçš„æ¦‚å¿µï¼Œä½¿å¾—1ä¸ªåŒºä¸­å«ç‰©ç†ä½ç½®ä¸Šè¿ç»­çš„64ä¸ªé¡µï¼Œè¿™æ ·å°±ä¼šæŠŠä¸Šè¿°è¿‡ç¨‹å˜æˆ<strong>é¡ºåºIO</strong>ï¼Œå‡å°‘äº†ç£ç›˜å¯»é“å’ŒåŠåœˆæ—‹è½¬æ—¶é—´ã€‚</p>
<p>â€‹
åœ¨è¡¨ä¸­æ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œä¸ºæŸä¸ªç´¢å¼•åˆ†é…ç©ºé—´çš„æ—¶å€™å°±ä¸å†æŒ‰ç…§é¡µä¸ºå•ä½åˆ†é…äº†ï¼Œ<strong>è€Œæ˜¯æŒ‰ç…§åŒºä¸ºå•ä½åˆ†é…ï¼Œ</strong>ç”šè‡³åœ¨è¡¨ä¸­çš„æ•°æ®ç‰¹åˆ«å¤šçš„æ—¶å€™ï¼Œå¯ä»¥ä¸€æ¬¡æ€§åˆ†é…å¤šä¸ªè¿ç»­çš„åŒºã€‚è™½ç„¶å¯èƒ½é€ æˆä¸€ç‚¹ç‚¹ç©ºé—´çš„æµªè´¹ï¼ˆæ•°æ®ä¸è¶³ä»¥å¡«å……æ»¡æ•´ä¸ªåŒºï¼‰ï¼Œ<strong>ä½†æ˜¯ä»æ€§èƒ½è§’åº¦çœ‹ï¼Œå¯ä»¥æ¶ˆé™¤å¾ˆå¤šçš„éšæœºI/0</strong>ï¼ŒåŠŸå¤§äºè¿‡ï¼</p>
<h5 id="ä¸ºä»€ä¹ˆè¦æœ‰æ®µ">2ï¼‰ä¸ºä»€ä¹ˆè¦æœ‰æ®µï¼Ÿ</h5>
<p>â€‹
å¯¹äºèŒƒå›´æŸ¥è¯¢ï¼Œå…¶å®æ˜¯å¯¹B+æ ‘å¶å­èŠ‚ç‚¹ä¸­çš„è®°å½•è¿›è¡Œé¡ºåºæ‰«æï¼Œè€Œå¦‚æœä¸åŒºåˆ†å¶å­èŠ‚ç‚¹å’Œéå¶å­èŠ‚ç‚¹ï¼Œç»Ÿç»ŸæŠŠèŠ‚ç‚¹ä»£è¡¨çš„é¡µé¢æ”¾åˆ°ç”³è¯·åˆ°çš„åŒºä¸­çš„è¯ï¼Œè¿›è¡ŒèŒƒå›´æ‰«æçš„æ•ˆæœå°±å¤§æ‰“æŠ˜æ‰£äº†ã€‚</p>
<p>â€‹
æ‰€ä»¥InnoDBå¯¹B+æ ‘çš„å¶å­èŠ‚ç‚¹å’Œéå¶å­èŠ‚ç‚¹è¿›è¡Œäº†åŒºåˆ«å¯¹å¾…ï¼Œ<strong>ä¹Ÿå°±æ˜¯è¯´å¶å­èŠ‚ç‚¹æœ‰è‡ªå·±ç‹¬æœ‰çš„åŒºï¼Œéå¶å­èŠ‚ç‚¹ä¹Ÿæœ‰è‡ªå·±ç‹¬æœ‰çš„åŒºã€‚</strong></p>
<p>â€‹
å­˜æ”¾å¶å­èŠ‚ç‚¹çš„åŒºçš„é›†åˆå°±ç®—æ˜¯ä¸€ä¸ªæ®µï¼ˆsegmentï¼‰ï¼Œå­˜æ”¾éå¶å­èŠ‚ç‚¹çš„åŒºçš„é›†åˆä¹Ÿç®—æ˜¯ä¸€ä¸ªæ®µã€‚<strong>ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªç´¢å¼•ä¼šç”Ÿæˆ2ä¸ªæ®µï¼Œä¸€ä¸ªå¶å­èŠ‚ç‚¹æ®µï¼Œä¸€ä¸ªéå¶å­èŠ‚ç‚¹æ®µã€‚</strong></p>
<p>â€‹
<strong>æ®µå…¶å®ä¸å¯¹åº”è¡¨ç©ºé—´ä¸­æŸä¸€ä¸ªè¿ç»­çš„ç‰©ç†åŒºåŸŸï¼Œè€Œæ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„æ¦‚å¿µï¼Œç”±è‹¥å¹²ä¸ªé›¶æ•£çš„é¡µé¢ä»¥åŠä¸€äº›å®Œæ•´çš„åŒºç»„æˆã€‚</strong></p>
<h5 id="ä¸ºä»€ä¹ˆè¦æœ‰ç¢ç‰‡åŒº">3ï¼‰ä¸ºä»€ä¹ˆè¦æœ‰ç¢ç‰‡åŒºï¼Ÿ</h5>
<p>â€‹
é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªä½¿ç”¨InnoDBå­˜å‚¨å¼•æ“çš„è¡¨åªæœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ï¼Œä¸€ä¸ªç´¢å¼•ä¼šç”Ÿæˆ2ä¸ªæ®µï¼Œè€Œæ®µæ˜¯ä»¥åŒºä¸ºå•ä½ç”³è¯·å­˜å‚¨ç©ºé—´çš„ï¼Œä¸€ä¸ªåŒºé»˜è®¤å ç”¨1Mï¼ˆ64*16Kb=1024Kbï¼‰å­˜å‚¨ç©ºé—´ï¼Œæ‰€ä»¥é»˜è®¤æƒ…å†µä¸‹ä¸€ä¸ªåªå­˜äº†å‡ æ¡è®°å½•çš„å°è¡¨ä¹Ÿéœ€è¦2Mçš„å­˜å‚¨ç©ºé—´ä¹ˆï¼Ÿä»¥åæ¯æ¬¡æ·»åŠ ä¸€ä¸ªç´¢å¼•éƒ½è¦å¤šç”³è¯·2Mçš„å­˜å‚¨ç©ºé—´ä¹ˆï¼Ÿè¿™å¯¹äºå­˜å‚¨è®°å½•æ¯”è¾ƒå°‘çš„è¡¨ç®€ç›´æ˜¯å¤©å¤§çš„æµªè´¹ã€‚</p>
<p>â€‹
è¿™ä¸ªé—®é¢˜çš„ç—‡ç»“åœ¨äºåˆ°ç°åœ¨ä¸ºæ­¢æˆ‘ä»¬ä»‹ç»çš„åŒºéƒ½æ˜¯éå¸¸çº¯ç²¹çš„ï¼Œ<strong>ä¹Ÿå°±æ˜¯ä¸€ä¸ªåŒºè¢«æ•´ä¸ªåˆ†é…ç»™æŸä¸€ä¸ªæ®µï¼Œæˆ–è€…è¯´åŒºä¸­çš„æ‰€æœ‰é¡µé¢éƒ½æ˜¯ä¸ºäº†å­˜å‚¨åŒä¸€ä¸ªæ®µçš„æ•°æ®è€Œå­˜åœ¨çš„ï¼Œå³ä½¿æ®µçš„æ•°æ®å¡«ä¸æ»¡åŒºä¸­æ‰€æœ‰çš„é¡µé¢ï¼Œé‚£ä½™ä¸‹çš„é¡µé¢ä¹Ÿä¸èƒ½æŒªä½œä»–ç”¨ã€‚</strong></p>
<p>â€‹
ä¸ºäº†è€ƒè™‘ä»¥å®Œæ•´çš„åŒºä¸ºå•ä½åˆ†é…ç»™æŸä¸ªæ®µå¯¹äºæ•°æ®é‡è¾ƒå°çš„è¡¨å¤ªæµªè´¹å­˜å‚¨ç©ºé—´çš„è¿™ç§æƒ…å†µï¼ŒInnoDBæå‡ºäº†ä¸€ä¸ª<strong>ç¢ç‰‡ï¼ˆfragmentï¼‰åŒºçš„æ¦‚å¿µ</strong>ã€‚åœ¨ä¸€ä¸ªç¢ç‰‡åŒºä¸­ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„é¡µéƒ½æ˜¯ä¸ºäº†å­˜å‚¨åŒä¸€ä¸ªæ®µçš„æ•°æ®è€Œå­˜åœ¨çš„ï¼Œè€Œæ˜¯<strong>ç¢ç‰‡åŒºä¸­çš„é¡µå¯ä»¥ç”¨äºä¸åŒçš„ç›®çš„ï¼Œæ¯”å¦‚æœ‰äº›é¡µç”¨äºæ®µAï¼Œæœ‰äº›é¡µç”¨äºæ®µBï¼Œæœ‰äº›é¡µç”šè‡³å“ªä¸ªæ®µéƒ½ä¸å±äºã€‚</strong></p>
<p>â€‹ ç¢ç‰‡åŒºç›´å±äºè¡¨ç©ºé—´ï¼Œå¹¶ä¸å±äºä»»ä½•ä¸€ä¸ªæ®µã€‚</p>
<h5 id="ä¸ºæŸä¸ªæ®µåˆ†é…å­˜å‚¨ç©ºé—´çš„ç­–ç•¥">4ï¼‰ä¸ºæŸä¸ªæ®µåˆ†é…å­˜å‚¨ç©ºé—´çš„ç­–ç•¥ï¼š</h5>
<ul>
<li>åœ¨åˆšå¼€å§‹å‘è¡¨ä¸­æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œæ®µæ˜¯ä»æŸä¸ªç¢ç‰‡åŒºä»¥å•ä¸ªé¡µé¢ä¸ºå•ä½æ¥åˆ†é…å­˜å‚¨ç©ºé—´çš„ã€‚</li>
<li>å½“æŸä¸ªæ®µå·²ç»å ç”¨äº†32ä¸ªç¢ç‰‡åŒºé¡µé¢ä¹‹åï¼Œå°±ä¼šç”³è¯·ä»¥å®Œæ•´çš„åŒºä¸ºå•ä½æ¥åˆ†é…å­˜å‚¨é—´ã€‚</li>
</ul>
<p>â€‹
æ‰€ä»¥ç°åœ¨æ®µä¸èƒ½ä»…å®šä¹‰ä¸ºæ˜¯æŸäº›åŒºçš„é›†åˆï¼Œæ›´ç²¾ç¡®çš„åº”è¯¥æ˜¯æŸäº›é›¶æ•£çš„é¡µé¢ä»¥åŠä¸€äº›å®Œæ•´çš„åŒºçš„é›†åˆã€‚</p>
<h5 id="åŒºçš„åˆ†ç±»">5ï¼‰åŒºçš„åˆ†ç±»</h5>
<ul>
<li><p>ç¢ç‰‡åŒº</p>
<ul>
<li><p>ç©ºé—²çš„åŒº</p></li>
<li><p>æœ‰å‰©ä½™ç©ºé—´çš„ç¢ç‰‡åŒº</p></li>
<li><p>æ²¡æœ‰å‰©ä½™ç©ºé—´çš„ç¢ç‰‡åŒº</p></li>
</ul></li>
<li><p>é™„å±äºæŸä¸ªæ®µçš„åŒº</p></li>
</ul>
<h5 id="è¡¨ç©ºé—´">6ï¼‰è¡¨ç©ºé—´ï¼š</h5>
<p>â€‹
è¡¨ç©ºé—´å¯ä»¥çœ‹åšæ˜¯InnoDBå­˜å‚¨å¼•æ“é€»è¾‘ç»“æ„çš„æœ€é«˜å±‚ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½å­˜æ”¾åœ¨è¡¨ç©ºé—´ä¸­ã€‚è¡¨ç©ºé—´æ˜¯ä¸€ä¸ªé€»è¾‘å®¹å™¨ï¼Œè¡¨ç©ºé—´å­˜å‚¨çš„å¯¹è±¡æ˜¯æ®µï¼Œåœ¨ä¸€ä¸ªè¡¨ç©ºé—´ä¸­å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ®µï¼Œä½†æ˜¯ä¸€ä¸ªæ®µåªèƒ½å±äºä¸€ä¸ªè¡¨ç©ºé—´ã€‚</p>
<ul>
<li>ç‹¬ç«‹è¡¨ç©ºé—´ï¼š
<ul>
<li>æ¯å¼ è¡¨éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„è¡¨ç©ºé—´ï¼Œå³æ•°æ®å’Œç´¢å¼•ä¿¡æ¯éƒ½ä¼šä¿å­˜åœ¨è‡ªå·±çš„è¡¨ç©ºé—´ä¸­ã€‚ç©ºé—´å¯ä»¥å›æ”¶</li>
</ul></li>
<li>ç³»ç»Ÿè¡¨ç©ºé—´ï¼š
<ul>
<li>æ•´ä¸ªMySQLè¿›ç¨‹åªæœ‰ä¸€ä¸ªç³»ç»Ÿè¡¨ç©ºé—´ï¼Œåœ¨ç³»ç»Ÿè¡¨ç©ºé—´ä¸­ä¼šé¢å¤–è®°å½•ä¸€äº›æœ‰å…³æ•´ä¸ªç³»ç»Ÿä¿¡æ¯çš„é¡µé¢ï¼Œè¿™éƒ¨åˆ†æ˜¯ç‹¬ç«‹è¡¨ç©ºé—´ä¸­æ²¡æœ‰çš„ã€‚</li>
<li>InnoDBæ•°æ®å­—å…¸ï¼šï¼ˆå†…éƒ¨ç³»ç»Ÿè¡¨ï¼‰
<ul>
<li>æ¯å½“æˆ‘ä»¬å‘ä¸€ä¸ªè¡¨ä¸­æ’å…¥ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼ŒMySOLæ ¡éªŒè¿‡ç¨‹å¦‚ä¸‹
<ul>
<li>å…ˆè¦æ ¡éªŒä¸€ä¸‹æ’å…¥è¯­å¥å¯¹åº”çš„è¡¨å­˜ä¸å­˜åœ¨ï¼Œæ’å…¥çš„åˆ—å’Œè¡¨ä¸­çš„åˆ—æ˜¯å¦ç¬¦åˆï¼Œ</li>
<li>å¦‚æœè¯­æ³•æ²¡æœ‰é—®é¢˜çš„è¯ï¼Œè¿˜éœ€è¦çŸ¥é“è¯¥è¡¨çš„èšç°‡ç´¢å¼•å’Œæ‰€æœ‰äºŒçº§ç´¢å¼•å¯¹åº”çš„æ ¹é¡µé¢æ˜¯å“ªä¸ªè¡¨ç©ºé—´çš„å“ªä¸ªé¡µé¢ï¼Œç„¶åæŠŠè®°å½•æ’å…¥å¯¹åº”ç´¢å¼•çš„B+æ ‘ä¸­ã€‚</li>
<li>æ‰€ä»¥è¯´ï¼ŒMySQLé™¤äº†ä¿å­˜ç€æˆ‘ä»¬æ’å…¥çš„ç”¨æˆ·æ•°æ®ä¹‹å¤–ï¼Œè¿˜éœ€è¦ä¿å­˜è®¸å¤šé¢å¤–çš„ä¿¡æ¯ï¼ˆå…ƒæ•°æ®ï¼‰</li>
</ul></li>
<li>æ³¨æ„ï¼šç”¨æˆ·æ˜¯ä¸èƒ½ç›´æ¥è®¿é—®InnoDBçš„è¿™äº›å†…éƒ¨ç³»ç»Ÿè¡¨ï¼Œé™¤éä½ ç›´æ¥å»è§£æç³»ç»Ÿè¡¨ç©ºé—´å¯¹åº”æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ã€‚</li>
</ul></li>
</ul></li>
</ul>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ•°æ®åº“ç²¾ç®€ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–å’ŒæŸ¥è¯¢ä¼˜åŒ–</title>
    <url>/2022/10/17/10b6c2c40683/</url>
    <content><![CDATA[<p>SQLæŸ¥è¯¢ä¼˜åŒ–çš„æŠ€æœ¯æœ‰å¾ˆå¤šï¼Œå¤§æ–¹å‘ä¸Šå¯ä»¥åˆ†ä¸ºï¼š</p>
<ul>
<li>ç‰©ç†æŸ¥è¯¢ä¼˜åŒ–ï¼ˆç´¢å¼•ã€è¡¨è¿æ¥æ–¹å¼ï¼‰</li>
<li>é€»è¾‘æŸ¥è¯¢ä¼˜åŒ–ï¼ˆæ¢ä¸€ç§æ•ˆç‡æ›´é«˜çš„æ‰§è¡Œæ–¹æ³•ï¼‰</li>
</ul>
<p>å…·ä½“å¯ä»¥ä»ä»¥ä¸‹å››ä¸ªæ–¹é¢è¿›è¡Œæ•°æ®åº“è°ƒä¼˜ï¼š</p>
<ul>
<li>ç´¢å¼•å¤±æ•ˆã€æ²¡æœ‰å……åˆ†åˆ©ç”¨åˆ°ç´¢å¼•â€”â€”ç´¢å¼•å»ºç«‹</li>
<li>å…³è”æŸ¥è¯¢å¤ªå¤šJOINï¼ˆè®¾è®¡ç¼ºé™·æˆ–ä¸å¾—å·²çš„éœ€æ±‚ï¼‰â€”- SQLä¼˜åŒ–</li>
<li>æœåŠ¡å™¨è°ƒä¼˜åŠå„ä¸ªå‚æ•°è®¾ç½®ï¼ˆç¼“å†²ã€çº¿ç¨‹æ•°ç­‰ï¼‰â€”â€”è°ƒæ•´my.cnf</li>
<li>æ•°æ®è¿‡å¤šâ€”â€”åˆ†åº“åˆ†è¡¨I</li>
</ul>
<h3 id="ä¸€ç´¢å¼•ä¼˜åŒ–ä¸æŸ¥è¯¢ä¼˜åŒ–">ä¸€ã€ç´¢å¼•ä¼˜åŒ–ä¸æŸ¥è¯¢ä¼˜åŒ–</h3>
<h4 id="ç´¢å¼•å¤±æ•ˆæ¡ˆä¾‹æƒ…å†µ">1ã€ç´¢å¼•å¤±æ•ˆæ¡ˆä¾‹æƒ…å†µï¼š</h4>
<p>â€‹
ä»ç†è®ºä¸Šè€Œè¨€ï¼Œä½¿ç”¨æˆ–è€…ä¸ä½¿ç”¨ç´¢å¼•éƒ½æ˜¯ç”±<strong>ä¼˜åŒ–å™¨</strong>æ¥å†³å®šï¼Œå…¶æ˜¯åŸºäºcostå¼€é”€ï¼ˆCostBaseOptimizerï¼‰ï¼Œå®ƒä¸æ˜¯åŸºäºè§„åˆ™ï¼ˆRule-Basedoptimizerï¼‰ï¼Œä¹Ÿä¸æ˜¯åŸºäºè¯­ä¹‰ã€‚æ€ä¹ˆæ ·å¼€é”€å°å°±æ€ä¹ˆæ¥ã€‚å¦å¤–ï¼ŒSQLè¯­å¥æ˜¯å¦ä½¿ç”¨ç´¢å¼•ï¼Œè·Ÿæ•°æ®åº“ç‰ˆæœ¬ã€æ•°æ®é‡ã€æ•°æ®é€‰æ‹©åº¦éƒ½æœ‰å…³ç³»ã€‚</p>
<h5 id="æœ€ä½³å·¦å‰ç¼€åŒ¹é…æ³•åˆ™">1ï¼‰æœ€ä½³å·¦å‰ç¼€åŒ¹é…æ³•åˆ™</h5>
<p>â€‹
MySQLå¯ä»¥ä¸ºå¤šä¸ªå­—æ®µåˆ›å»ºç´¢å¼•ï¼Œä¸€ä¸ªç´¢å¼•å¯ä»¥åŒ…æ‹¬16ä¸ªå­—æ®µã€‚<strong>å¯¹äºå¤šåˆ—ç´¢å¼•ï¼Œè¿‡æ»¤æ¡ä»¶è¦ä½¿ç”¨ç´¢å¼•å¿…é¡»æŒ‰ç…§ç´¢å¼•å»ºç«‹æ—¶çš„é¡ºåºï¼Œä¾æ¬¡æ»¡è¶³ï¼Œä¸€æ—¦è·³è¿‡æŸä¸ªå­—æ®µï¼ç´¢å¼•åé¢çš„å­—æ®µéƒ½æ— æ³•è¢«ä½¿ç”¨ã€‚</strong>å¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸­æ²¡æœ‰ä½¿ç”¨è¿™äº›å­—æ®µä¸­ç¬¬1ä¸ªå­—æ®µæ—¶ï¼Œå¤šåˆ—ï¼ˆæˆ–è”åˆï¼‰ç´¢å¼•ä¸ä¼šè¢«ä½¿ç”¨ã€‚</p>
<p>â€‹ ç´¢å¼•æ–‡ä»¶å…·æœ‰ B-Tree
çš„æœ€å·¦å‰ç¼€åŒ¹é…ç‰¹æ€§ï¼Œå¦‚æœå·¦è¾¹çš„å€¼æœªç¡®å®šï¼Œé‚£ä¹ˆæ— æ³•ä½¿ç”¨æ­¤ç´¢å¼•ã€‚</p>
<h5 id="ä¸»é”®æ’å…¥é¡ºåº">2ï¼‰ä¸»é”®æ’å…¥é¡ºåº</h5>
<p>â€‹ å¦‚æœæ’å…¥çš„ä¸»é”®å¿½å¤§å¿½å°ï¼Œå°±å®¹æ˜“å¯¼è‡´æŸä¸ªæ•°æ®é¡µæ»¡äº†ä»¥åï¼Œæ•°æ®è¿˜ä¼šå¾€å…¶ä¸­
æ’å…¥ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æŠŠå½“å‰é¡µé¢åˆ†è£‚æˆä¸¤ä¸ªé¡µé¢ï¼ŒæŠŠæœ¬é¡µä¸­çš„ä¸€äº›è®°å½•ç§»åŠ¨åˆ°æ–°åˆ›å»ºçš„è¿™ä¸ªé¡µä¸­ã€‚<strong>é¡µé¢åˆ†è£‚å’Œè®°å½•ç§»ä½æ„å‘³ç€ä»€ä¹ˆï¼Ÿæ„å‘³ç€ï¼š
æ€§èƒ½æŸè€—ï¼</strong>æ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³å°½é‡é¿å…è¿™æ ·æ— è°“çš„æ€§èƒ½æŸè€—ï¼Œæœ€å¥½è®©æ’å…¥çš„è®°å½•çš„ä¸»é”®å€¼ä¾æ¬¡é€’å¢ï¼Œè¿™æ ·å°±ä¸ä¼šå‘ç”Ÿè¿™æ ·çš„æ€§èƒ½æŸè€—äº†ã€‚</p>
<p>â€‹ <strong>å»ºè®®ï¼šè®©ä¸»é”®å…·æœ‰AUTO_INCREMENT
ï¼Œè®©å­˜å‚¨å¼•æ“è‡ªå·±ä¸ºè¡¨ç”Ÿæˆä¸»é”®ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æ‰‹åŠ¨æ’å…¥ã€‚</strong></p>
<h5
id="è®¡ç®—å‡½æ•°ç±»å‹è½¬æ¢è‡ªåŠ¨æˆ–æ‰‹åŠ¨å¯¼è‡´ç´¢å¼•å¤±æ•ˆ">3ï¼‰è®¡ç®—ã€å‡½æ•°ã€ç±»å‹è½¬æ¢(è‡ªåŠ¨æˆ–æ‰‹åŠ¨)å¯¼è‡´ç´¢å¼•å¤±æ•ˆ</h5>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># ä½¿ç”¨åˆ°ç´¢å¼•</span><br><span class="line">EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE student.name LIKE &#x27;abc%&#x27;;</span><br><span class="line"># æœªä½¿ç”¨åˆ°ç´¢å¼•</span><br><span class="line">EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE LEFT(student.name,3) = &#x27;abc&#x27;;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä»è¿è¡Œç»“æœä¸Šï¼Œä¸Šè¿°ä¸¤ä¸ªSQLè¯­å¥æ²¡æœ‰å·®åˆ«ã€‚ä½†æ˜¯ä»è¿è¡Œæ•ˆç‡ä¸Šè€Œè¨€ï¼Œä¸‹é¢è¿™æ¡è¯­å¥å› ä¸ºä½¿ç”¨äº†å‡½æ•°ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šä½¿ç”¨åˆ°nameä¸Šçš„ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢ï¼Œä¹Ÿå°±æ˜¯æŸ¥è¯¢ç±»å‹ä¼šæ˜¯ALLï¼Œæ•ˆç‡éå¸¸ä½ã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># æœªä½¿ç”¨åˆ°ç´¢å¼•</span><br><span class="line">EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE name=123;</span><br><span class="line"># ä½¿ç”¨åˆ°ç´¢å¼•</span><br><span class="line">EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE name=&#x27;123&#x27;;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¸Šè¿°ï¼Œæ˜¯ç”±äºname=123å‘ç”Ÿç±»å‹è½¬æ¢ï¼Œæœ€ç»ˆå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚</li>
</ul>
<h5 id="èŒƒå›´æ¡ä»¶å³è¾¹çš„åˆ—ç´¢å¼•å¤±æ•ˆ">4ï¼‰èŒƒå›´æ¡ä»¶å³è¾¹çš„åˆ—ç´¢å¼•å¤±æ•ˆ</h5>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE INDEX idx_age_name_classid on student(age,classid,name)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># ä¼šä½¿ç”¨ä¸Šè¿°è”åˆç´¢å¼•ï¼Œä½†æ˜¯æ²¡æœ‰ç”¨åˆ°Nameè¿™ä¸ªå­—æ®µä¸Šå»ºç«‹çš„ç´¢å¼•</span><br><span class="line">EXPLAIN SELECT SQL_NO_CACHE * FROM student</span><br><span class="line">WHERE student.age=30 AND student.classId&gt;20 AND student.name = &#x27;abc&#x27; ;</span><br></pre></td></tr></table></figure>
<p>â€‹
æƒ³è¦èµ·ä½œç”¨ï¼Œå¾—å†™æˆå¦‚ä¸‹æ ¼å¼ï¼šå»ºè”åˆç´¢å¼•æ—¶ï¼ŒæŠŠç¡®å®šæŸ¥è¯¢çš„æ”¾åˆ°å‰é¢ï¼ŒèŒƒå›´æŸ¥è¯¢çš„æ”¾åˆ°åé¢.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE INDEX idx_age_name_classid on student(age,name,classid)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># ä½¿ç”¨åˆ°ç´¢å¼•</span><br><span class="line">EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE student.age=30 AND student.name =</span><br><span class="line">&#x27;abc&#x27; AND student.classId&gt;20 ;</span><br></pre></td></tr></table></figure>
<p>â€‹
ç»“è®ºï¼šåº”ç”¨å¼€å‘ä¸­èŒƒå›´æŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼šé‡‘é¢æŸ¥è¯¢ï¼Œæ—¥æœŸæŸ¥è¯¢å¾€å¾€éƒ½æ˜¯èŒƒå›´æŸ¥è¯¢ã€‚åº”å°†æŸ¥è¯¢æ¡ä»¶æ”¾ç½®whereè¯­å¥æœ€åã€‚ï¼ˆå³åˆ›å»ºçš„è”åˆç´¢å¼•ä¸­ï¼ŒåŠ¡å¿…æŠŠèŒƒå›´æ¶‰åŠåˆ°çš„å­—æ®µå†™åœ¨æœ€åï¼‰</p>
<h5 id="ä¸ç­‰äºå¯¼è‡´ç´¢å¼•å¤±æ•ˆ">5ï¼‰ä¸ç­‰äºå¯¼è‡´ç´¢å¼•å¤±æ•ˆ</h5>
<h5 id="is-nullå¯ä»¥ä½¿ç”¨ç´¢å¼•is-not-nullæ— æ³•ä½¿ç”¨ç´¢å¼•">6ï¼‰is
nullå¯ä»¥ä½¿ç”¨ç´¢å¼•ï¼Œis not nullæ— æ³•ä½¿ç”¨ç´¢å¼•</h5>
<h5 id="likeä»¥é€šé…ç¬¦å¼€å¤´ç´¢å¼•å¤±æ•ˆ">7ï¼‰likeä»¥é€šé…ç¬¦%å¼€å¤´ç´¢å¼•å¤±æ•ˆ</h5>
<p>ã€å¼ºåˆ¶ã€‘é¡µé¢æœç´¢ä¸¥ç¦å·¦æ¨¡ç³Šæˆ–è€…å…¨æ¨¡ç³Šï¼Œå¦‚æœéœ€è¦è¯·èµ°æœç´¢å¼•æ“æ¥è§£å†³ã€‚</p>
<h5 id="or-å‰åå­˜åœ¨éç´¢å¼•çš„åˆ—ç´¢å¼•å¤±æ•ˆ">8ï¼‰OR
å‰åå­˜åœ¨éç´¢å¼•çš„åˆ—ï¼Œç´¢å¼•å¤±æ•ˆ</h5>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># æœªä½¿ç”¨åˆ°ç´¢å¼•</span><br><span class="line">EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE age = 10 OR classid = 100;</span><br><span class="line"># ä½¿ç”¨åˆ°ç´¢å¼•</span><br><span class="line">EXPLAIN SELECT SQL_NO_CACHE * FROM student WHERE age = 10 OR name = &#x27;Abel&#x27;;</span><br></pre></td></tr></table></figure>
<h5
id="æ•°æ®åº“å’Œè¡¨çš„å­—ç¬¦é›†ç»Ÿä¸€ä½¿ç”¨utf8mb4">9ï¼‰æ•°æ®åº“å’Œè¡¨çš„å­—ç¬¦é›†ç»Ÿä¸€ä½¿ç”¨utf8mb4</h5>
<p>â€‹
ç»Ÿä¸€ä½¿ç”¨utf8mb4å…¼å®¹æ€§æ›´å¥½ï¼Œç»Ÿä¸€å­—ç¬¦é›†å¯ä»¥é¿å…ç”±äºå­—ç¬¦é›†è½¬æ¢äº§ç”Ÿçš„ä¹±ç ã€‚ä¸åŒçš„å­—ç¬¦é›†è¿›è¡Œæ¯”è¾ƒå‰éœ€è¦è¿›è¡Œè½¬æ¢ä¼šé€ æˆç´¢å¼•å¤±æ•ˆã€‚</p>
<h5 id="æ€»ç»“å»ºè®®">10ï¼‰æ€»ç»“å»ºè®®ï¼š</h5>
<ul>
<li>å•åˆ—ç´¢å¼•ï¼Œå°½é‡é€‰æ‹©é’ˆå¯¹å½“å‰queryè¿‡æ»¤æ€§æ›´å¥½çš„ç´¢å¼•</li>
<li>åœ¨é€‰æ‹©ç»„åˆç´¢å¼•çš„æ—¶å€™ï¼Œå½“å‰queryä¸­è¿‡æ»¤æ€§æœ€å¥½çš„å­—æ®µåœ¨ç´¢å¼•å­—æ®µé¡ºåºä¸­ï¼Œä½ç½®è¶Šé å‰è¶Šå¥½ã€‚</li>
<li>åœ¨é€‰æ‹©ç»„åˆç´¢å¼•çš„æ—¶å€™ï¼Œå°½é‡é€‰æ‹©èƒ½å¤ŸåŒ…å«å½“å‰queryä¸­çš„whereå­å¥ä¸­æ›´å¤šå­—æ®µçš„ç´¢å¼•ã€‚</li>
<li>åœ¨é€‰æ‹©ç»„åˆç´¢å¼•çš„æ—¶å€™ï¼Œå¦‚æœæŸä¸ªå­—æ®µå¯èƒ½å‡ºç°èŒƒå›´æŸ¥è¯¢æ—¶ï¼Œå°½é‡æŠŠè¿™ä¸ªå­—æ®µæ”¾åœ¨ç´¢å¼•æ¬¡åºçš„æœ€åé¢ã€‚</li>
</ul>
<h4 id="å…³è”æŸ¥è¯¢çš„ä¼˜åŒ–æƒ…å†µ">2ã€å…³è”æŸ¥è¯¢çš„ä¼˜åŒ–æƒ…å†µï¼š</h4>
<h5 id="left-join-å·¦å¤–è¿æ¥å·¦è¾¹é©±åŠ¨è¡¨å³è¾¹è¢«é©±åŠ¨è¡¨">1ï¼‰Left Join
å·¦å¤–è¿æ¥ï¼ˆå·¦è¾¹é©±åŠ¨è¡¨ï¼Œå³è¾¹è¢«é©±åŠ¨è¡¨ï¼‰</h5>
<p>â€‹ Left
Joinçš„æ¡ä»¶ï¼ˆå³Onä¸Šçš„å†…å®¹ï¼‰ç”¨äºç¡®å®šå¦‚ä½•ä»å³è¡¨æœç´¢è¡Œï¼Œè€Œå·¦è¾¹çš„è¡¨ä¸€å®šéƒ½æœ‰ï¼Œæ‰€ä»¥å³è¾¹æ˜¯æˆ‘ä»¬çš„å…³é”®ç‚¹,ä¸€å®šéœ€è¦å»ºç«‹ç´¢å¼•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT SQL_NO_CACHE * FROM `type` LEFT JOIN book ON type.card = book.card;</span><br><span class="line"></span><br><span class="line"># åœ¨è¢«é©±åŠ¨è¡¨bookä¸Šæ·»åŠ ç´¢å¼•ï¼Œå¯ä»¥é¿å…å¯¹bookè¡¨çš„å…¨è¡¨æ‰«æã€‚</span><br><span class="line">ALTER TABLE book ADD INDEX Y (card);</span><br><span class="line"></span><br><span class="line">EXPLAIN SELECT SQL_NO_CACHE * FROM `type` LEFT JOIN book ON type.card = book.card;</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221031110652164.png" /></p>
<h5 id="inner-join-å†…è¿æ¥">2ï¼‰INNER JOIN å†…è¿æ¥ï¼š</h5>
<p>â€‹ åœ¨INNER JOINä¸­ï¼Œé©±åŠ¨è¡¨æ˜¯ç”±MySQLè‡ªåŠ¨é€‰æ‹©çš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># ç”±äºé©±åŠ¨è¡¨æ˜¯æŸ¥è¯¢ä¼˜åŒ–å™¨å†³å®šçš„ï¼Œæ‰€ä»¥å¦‚æœbookä¸Šå»ºäº†ç´¢å¼•ï¼Œtypeæ²¡å»ºï¼Œé‚£ä¹ˆbookä¼šè¢«é€‰ä¸ºè¢«é©±åŠ¨è¡¨ï¼Œåä¹‹typeä¼šè¢«é€‰ä¸ºè¢«é©±åŠ¨è¡¨ã€‚å¦‚æœä¸¤åˆ—éƒ½å»ºäº†ç´¢å¼•ï¼Œé‚£ä¹ˆè¿˜æ˜¯ç”±æŸ¥è¯¢ä¼˜åŒ–å™¨è‡ªåŠ¨æ ¹æ®Costé€‰æ‹©ã€‚ï¼ˆä¸€èˆ¬éƒ½æ˜¯é€‰æ‹©å°è¡¨ä½œä¸ºé©±åŠ¨è¡¨ï¼Œå³å°è¡¨é©±åŠ¨å¤§è¡¨ï¼‰</span><br><span class="line"></span><br><span class="line">EXPLAIN SELECT SQL_NO_CACHE * FROM type INNER JOIN book ON type.card=book.card;</span><br></pre></td></tr></table></figure>
<h5 id="joinè¯­å¥çš„åŸç†">3ï¼‰JOINè¯­å¥çš„åŸç†</h5>
<ul>
<li>é©±åŠ¨è¡¨å’Œéé©±åŠ¨è¡¨ï¼š
<ul>
<li>å†…è¿æ¥ï¼šä¼˜åŒ–å™¨è‡ªåŠ¨å†³å®š</li>
<li>å¤–è¿æ¥ï¼šä¼˜åŒ–å™¨ä¹Ÿä¼šå¸®åŠ©å†³å®šé©±åŠ¨è¡¨</li>
</ul></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM t1 STRAIGHT_JOIN t2 ON (t1.a=t2.a);</span><br></pre></td></tr></table></figure>
<ul>
<li>Simple Nested-Loop Join ç®€å•åµŒå¥—
<ul>
<li>å‡è®¾Aè¡¨æœ‰Aæ¡è®°å½•ï¼ŒBè¡¨æœ‰Bæ¡è®°å½•ï¼ŒAä½œä¸ºé©±åŠ¨è¡¨ï¼ŒBè¢«é©±åŠ¨è¡¨</li>
<li>æœ€ç»ˆæŸ¥è¯¢å¼€é”€ï¼šå¤–è¡¨æ‰«æ1æ¬¡ï¼Œå†…è¡¨æ‰«æAæ¬¡ï¼Œè¯»å–è®°å½•æ•°ï¼šA + B *
Aï¼ŒJOINæ¯”è¾ƒæ¬¡æ•° B * A</li>
<li>æ‰€ä»¥ä½¿ç”¨å°è¡¨é©±åŠ¨å¤§è¡¨</li>
</ul></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221031112529836.png" /></p>
<ul>
<li><p>Index Nested0Loop Join ç´¢å¼•åµŒå¥—å¾ªç¯è¿æ¥</p>
<p>ä¸ºäº†å‡å°‘å†…å±‚è¡¨æ•°æ®çš„åŒ¹é…æ¬¡æ•°ï¼Œæ‰€ä»¥è¢«é©±åŠ¨è¡¨ä¸Šéœ€è¦æœ‰ç´¢å¼•ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221031112116837.png" /></p>
<ul>
<li><p>å‡è®¾Aè¡¨æœ‰Aæ¡è®°å½•ï¼ŒBè¡¨æœ‰Bæ¡è®°å½•ï¼ŒAä½œä¸ºé©±åŠ¨è¡¨ï¼ŒBè¢«é©±åŠ¨è¡¨</p></li>
<li><p>åœ¨è¿™æ¡è¯­å¥é‡Œï¼Œè¢«é©±åŠ¨è¡¨t2çš„å­—æ®µaä¸Šæœ‰ç´¢å¼•ï¼Œjoinè¿‡ç¨‹ç”¨ä¸Šäº†è¿™ä¸ªç´¢å¼•ï¼Œå› æ­¤è¿™ä¸ªè¯­å¥çš„æ‰§è¡Œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>ä»è¡¨t1ä¸­è¯»å…¥ä¸€è¡Œæ•°æ® Rï¼›</li>
<li>ä»æ•°æ®è¡ŒRä¸­ï¼Œå–å‡ºaå­—æ®µåˆ°è¡¨t2é‡Œå»æŸ¥æ‰¾ï¼›</li>
<li>å–å‡ºè¡¨t2ä¸­æ»¡è¶³æ¡ä»¶çš„è¡Œï¼Œè·ŸRç»„æˆä¸€è¡Œï¼Œä½œä¸ºç»“æœé›†çš„ä¸€éƒ¨åˆ†ï¼›</li>
<li>é‡å¤æ‰§è¡Œæ­¥éª¤1åˆ°3ï¼Œç›´åˆ°è¡¨t1çš„æœ«å°¾å¾ªç¯ç»“æŸã€‚</li>
</ul>
<p>åœ¨è¿™ä¸ªæµç¨‹é‡Œï¼š</p>
<ul>
<li>å¯¹é©±åŠ¨è¡¨t1åšäº†å…¨è¡¨æ‰«æï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦æ‰«æ100è¡Œï¼›</li>
<li>è€Œå¯¹äºæ¯ä¸€è¡ŒRï¼Œæ ¹æ®aå­—æ®µå»è¡¨t2æŸ¥æ‰¾ï¼Œèµ°çš„æ˜¯æ ‘æœç´¢è¿‡ç¨‹ã€‚ç”±äºæˆ‘ä»¬æ„é€ çš„æ•°æ®éƒ½æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå› æ­¤æ¯æ¬¡çš„æœç´¢è¿‡ç¨‹éƒ½åªæ‰«æä¸€è¡Œï¼Œä¹Ÿæ˜¯æ€»å…±æ‰«æ100è¡Œï¼›</li>
<li>æ‰€ä»¥ï¼Œæ•´ä¸ªæ‰§è¡Œæµç¨‹ï¼Œæ€»æ‰«æè¡Œæ•°æ˜¯200</li>
</ul></li>
<li></li>
</ul></li>
<li><p>Block Nested Loop Join (é’ˆå¯¹Simpleçš„ä¼˜åŒ–æ–¹æ³•)</p>
<p>â€‹
å¦‚æœå­˜åœ¨ç´¢å¼•ï¼Œé‚£ä¹ˆä¼šä½¿ç”¨indexçš„æ–¹å¼è¿›è¡Œjoinï¼Œå¦‚æœjoinçš„åˆ—æ²¡æœ‰ç´¢å¼•ï¼Œè¢«é©±åŠ¨è¡¨è¦æ‰«æçš„æ¬¡æ•°å¤ªå¤šäº†ã€‚æ¯æ¬¡è®¿é—®è¢«é©±åŠ¨è¡¨ï¼Œå…¶è¡¨ä¸­çš„è®°å½•éƒ½ä¼šè¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åå†ä»é©±åŠ¨è¡¨ä¸­å–ä¸€æ¡ä¸å…¶åŒ¹é…ï¼ŒåŒ¹é…ç»“æŸåæ¸…é™¤å†…å­˜ï¼Œç„¶åå†ä»é©±åŠ¨è¡¨ä¸­åŠ è½½ä¸€æ¡è®°å½•ï¼Œç„¶åæŠŠè¢«é©±åŠ¨è¡¨çš„è®°å½•åœ¨åŠ è½½åˆ°å†…å­˜åŒ¹é…ï¼Œè¿™æ ·å‘¨è€Œå¤å§‹ï¼Œå¤§å¤§å¢åŠ äº†I0çš„æ¬¡æ•°ã€‚</p>
<p>â€‹ ä¸ºäº†å‡å°‘è¢«é©±åŠ¨è¡¨çš„IOæ¬¡æ•°ï¼Œå°±å‡ºç°äº†Block Nested-Loop
Joinçš„æ–¹å¼ã€‚<strong>ä¸å†æ˜¯é€æ¡è·å–é©±åŠ¨è¡¨çš„æ•°æ®ï¼Œè€Œæ˜¯ä¸€å—ä¸€å—çš„è·å–ï¼Œå¼•å…¥äº†join
bufferç¼“å†²åŒºï¼Œå°†é©±åŠ¨è¡¨joinç›¸å…³çš„éƒ¨åˆ†æ•°æ®åˆ—ï¼ˆå¤§å°å—join
bufferçš„é™åˆ¶ï¼‰ç¼“å­˜åˆ°join
bufferä¸­ï¼Œç„¶åå…¨è¡¨æ‰«æè¢«é©±åŠ¨è¡¨ï¼Œè¢«é©±åŠ¨è¡¨çš„æ¯ä¸€æ¡è®°å½•ä¸€æ¬¡æ€§å’Œjoin
bufferä¸­çš„æ‰€æœ‰é©±åŠ¨è¡¨è®°å½•è¿›è¡ŒåŒ¹é…ï¼ˆå†…å­˜ä¸­æ“ä½œï¼‰ï¼Œå°†ç®€å•åµŒå¥—å¾ªç¯ä¸­çš„å¤šæ¬¡æ¯”è¾ƒåˆå¹¶æˆä¸€æ¬¡</strong>ï¼Œé™ä½äº†è¢«é©±åŠ¨
è¡¨çš„è®¿é—®é¢‘ç‡ã€‚</p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221031115027527.png" /></p>
<ul>
<li>æœ€ç»ˆæŸ¥è¯¢å¼€é”€ï¼š
<ul>
<li>å¤–è¡¨æ‰«æ1æ¬¡</li>
<li>å†…è¡¨æ‰«æA * used_column_size / join_buffer_size + 1æ¬¡</li>
<li>è¯»å–è®°å½•æ•°ï¼šA + B * (A * used_column_size / join_buffer_size)</li>
<li>JOINæ¯”è¾ƒæ¬¡æ•° B * A</li>
</ul></li>
</ul>
<h5 id="joinè¯­å¥ç»“è®º">4ï¼‰JOINè¯­å¥ç»“è®ºï¼š</h5>
<ul>
<li>ä½¿ç”¨joinè¯­å¥ï¼Œæ€§èƒ½æ¯”å¼ºè¡Œæ‹†æˆå¤šä¸ªå•è¡¨æ‰§è¡ŒSQLè¯­å¥çš„æ€§èƒ½è¦å¥½ï¼ˆèƒ½å¤Ÿç›´æ¥å¤šè¡¨å…³è”çš„å°½é‡ç›´æ¥å…³è”ï¼Œä¸ç”¨å­æŸ¥è¯¢ï¼‰</li>
<li>å¦‚æœä½¿ç”¨joinè¯­å¥çš„è¯ï¼Œéœ€è¦è®©å°è¡¨åšé©±åŠ¨è¡¨ã€‚(åœ¨å†³å®šå“ªä¸ªè¡¨åšé©±åŠ¨è¡¨çš„æ—¶å€™ï¼Œ<strong>åº”è¯¥æ˜¯ä¸¤ä¸ªè¡¨æŒ‰ç…§å„è‡ªçš„æ¡ä»¶è¿‡æ»¤ï¼Œè¿‡æ»¤å®Œæˆä¹‹åï¼Œè®¡ç®—å‚ä¸joinçš„å„ä¸ªå­—æ®µçš„æ€»æ•°æ®é‡ï¼Œæ•°æ®é‡å°çš„é‚£ä¸ªè¡¨ï¼Œ</strong>å°±æ˜¯â€œå°è¡¨â€ï¼Œåº”è¯¥ä½œä¸ºé©±åŠ¨è¡¨ã€‚</li>
<li>ä¸ºè¢«é©±åŠ¨è¡¨åŒ¹é…çš„æ¡ä»¶å¢åŠ ç´¢å¼•</li>
<li>å¢å¤§Join Buffer
Sizeçš„å¤§å°ï¼ˆå•æ¬¡ç¼“å­˜çš„æ•°æ®è¶Šå¤šï¼Œå†…å±‚åŒ…çš„æ‰«è¡¨æ¬¡æ•°è¶Šå°‘ï¼‰</li>
<li>å‡å°‘é©±åŠ¨è¡¨ä¸å¿…è¦çš„å­—æ®µæŸ¥è¯¢ï¼Œå­—æ®µè¶Šå°‘ï¼Œjoin bufferç¼“å­˜çš„æ•°æ®è¶Šå¤š</li>
</ul>
<h5 id="hash-join">5ï¼‰Hash Join</h5>
<p>â€‹ Hash
Joinæ˜¯åšå¤§æ•°æ®é›†è¿æ¥æ—¶çš„å¸¸ç”¨æ–¹å¼ï¼Œä¼˜åŒ–å™¨ä½¿ç”¨ä¸¤ä¸ªè¡¨ä¸­è¾ƒå°ï¼ˆç›¸å¯¹è¾ƒå°ï¼‰çš„è¡¨åˆ©ç”¨Join
Keyåœ¨å†…å­˜ä¸­å»ºç«‹æ•£åˆ—è¡¨ï¼Œç„¶åæ‰«æè¾ƒå¤§çš„è¡¨å¹¶æ¢æµ‹æ•£åˆ—è¡¨ï¼Œæ‰¾å‡ºä¸Hashè¡¨åŒ¹é…çš„è¡Œã€‚</p>
<p>â€‹
<strong>è¿™ç§æ–¹å¼é€‚ç”¨äºè¾ƒå°çš„è¡¨å®Œå…¨å¯ä»¥æ”¾äºå†…å­˜ä¸­çš„æƒ…å†µï¼Œè¿™æ ·æ€»æˆæœ¬å°±æ˜¯è®¿é—®ä¸¤ä¸ªè¡¨çš„æˆæœ¬ä¹‹å’Œã€‚</strong></p>
<p>â€‹
åœ¨è¡¨å¾ˆå¤§çš„æƒ…å†µä¸‹å¹¶ä¸èƒ½å®Œå…¨æ”¾å…¥å†…å­˜ï¼Œè¿™æ—¶ä¼˜åŒ–å™¨ä¼šå°†å®ƒåˆ†å‰²æˆè‹¥å¹²ä¸åŒçš„åˆ†åŒºï¼Œä¸èƒ½æ”¾å…¥å†…å­˜çš„éƒ¨åˆ†å°±æŠŠè¯¥åˆ†åŒºå†™å…¥ç£ç›˜çš„ä¸´æ—¶æ®µï¼Œæ­¤æ—¶è¦æ±‚æœ‰è¾ƒå¤§çš„ä¸´æ—¶æ®µä»è€Œå°½é‡æé«˜I/Oçš„æ€§èƒ½ã€‚</p>
<p>â€‹
å®ƒèƒ½å¤Ÿå¾ˆå¥½çš„å·¥ä½œäºæ²¡æœ‰ç´¢å¼•çš„å¤§è¡¨å’Œå¹¶è¡ŒæŸ¥è¯¢çš„ç¯å¢ƒä¸­ï¼Œå¹¶æä¾›æœ€å¥½çš„æ€§èƒ½ã€‚Hash
Joinåªèƒ½åº”ç”¨äºç­‰å€¼è¿æ¥ï¼Œè¿™æ˜¯ç”±Hashçš„ç‰¹ç‚¹å†³å®šçš„ã€‚</p>
<h4 id="å­æŸ¥è¯¢ä¼˜åŒ–">3ã€å­æŸ¥è¯¢ä¼˜åŒ–</h4>
<p>â€‹ å­æŸ¥è¯¢èƒ½å¤Ÿå®ç°è¾ƒå¤æ‚çš„è¯­å¥ï¼Œä½†æ˜¯å…¶æ‰§è¡Œæ•ˆç‡è¾ƒä½ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ‰§è¡Œå­æŸ¥è¯¢æ—¶ï¼ŒMySQLéœ€è¦ä¸ºå†…å±‚æŸ¥è¯¢è¯­å¥çš„æŸ¥è¯¢ç»“æœå»ºç«‹ä¸€ä¸ªä¸´æ—¶è¡¨ï¼Œç„¶åå¤–å±‚æŸ¥è¯¢è¯­å¥ä»ä¸´æ—¶è¡¨ä¸­æŸ¥è¯¢è®°å½•ã€‚æŸ¥è¯¢å®Œæ¯•åï¼Œå†æ’¤é”€è¿™äº›ä¸´æ—¶è¡¨ã€‚è¿™æ ·ä¼šæ¶ˆè€—è¿‡å¤šçš„CPUå’ŒIOèµ„æºï¼Œäº§ç”Ÿå¤§é‡çš„æ…¢æŸ¥è¯¢ã€‚</li>
<li>å­æŸ¥è¯¢çš„ç»“æœé›†å­˜å‚¨çš„ä¸´æ—¶è¡¨ï¼Œä¸è®ºæ˜¯å†…å­˜ä¸´æ—¶è¡¨è¿˜æ˜¯ç£ç›˜ä¸´æ—¶è¡¨éƒ½ä¸ä¼šå­˜åœ¨ç´¢å¼•ï¼Œæ‰€ä»¥æŸ¥è¯¢æ€§èƒ½ä¼šå—åˆ°ä¸€å®šçš„å½±å“ã€‚</li>
<li>å¯¹äºè¿”å›ç»“æœé›†æ¯”è¾ƒå¤§çš„å­æŸ¥è¯¢ï¼Œå…¶å¯¹æŸ¥è¯¢æ€§èƒ½çš„å½±å“ä¹Ÿå°±è¶Šå¤§ã€‚</li>
</ul>
<p>â€‹
æ•…è€Œï¼Œå¯¹äºèƒ½å¤Ÿæ‹†è§£çš„å­æŸ¥è¯¢ï¼Œå°½å¯èƒ½ç”¨å¤šä¸ªæ­¥éª¤çš„å…³è”æŸ¥è¯¢æ¥ä»£æ›¿å­æŸ¥è¯¢ã€‚</p>
<h4 id="æ’åºä¼˜åŒ–">4ã€æ’åºä¼˜åŒ–</h4>
<p>â€‹ åœ¨MySQLä¸­ï¼Œæ”¯æŒä¸¤ç§æ’åºæ–¹å¼ï¼Œåˆ†åˆ«æ˜¯FileSortå’ŒIndexæ’åºã€‚</p>
<ul>
<li>Indexæ’åºï¼šç´¢å¼•å¯ä»¥ä¿è¯æ•°æ®çš„æœ‰åºæ€§ï¼Œæ•ˆç‡é«˜ã€‚</li>
<li>FileSortï¼šä¸€èˆ¬åœ¨å†…å­˜ä¸­è¿›è¡Œæ’åºï¼Œå ç”¨CPUè¾ƒå¤šã€‚å¦‚æœç»“æœè¾ƒå¤§åˆ™ä¼šäº§ç”Ÿä¸´æ—¶æ–‡ä»¶IOåˆ°ç£ç›˜è¿›è¡Œæ’åºï¼Œæ•ˆç‡ä½ã€‚</li>
</ul>
<p>â€‹ ä¼˜åŒ–å»ºè®®ï¼š</p>
<ul>
<li>SQL ä¸­ï¼Œå¯ä»¥åœ¨ WHERE å­å¥å’Œ ORDER BY å­å¥ä¸­ä½¿ç”¨ç´¢å¼•ï¼šç›®çš„æ˜¯åœ¨ WHERE
å­å¥ä¸­é¿å…å…¨è¡¨æ‰«æï¼Œåœ¨ ORDER BY å­å¥é¿å…ä½¿ç”¨FileSort
æ’åºã€‚<strong>å½“ç„¶ï¼ŒæŸäº›æƒ…å†µä¸‹å…¨è¡¨æ‰«æï¼Œæˆ–è€… FileSort
æ’åºä¸ä¸€å®šæ¯”ç´¢å¼•æ…¢ã€‚</strong>ä½†æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦é¿å…ï¼Œä»¥æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</li>
<li>å°½é‡ä½¿ç”¨ Index å®Œæˆ ORDER BY æ’åºã€‚å¦‚æœ WHERE å’Œ ORDER BY
æ˜¯ç›¸åŒçš„åˆ—å°±ä½¿ç”¨å•ç´¢å¼•åˆ—ï¼›<strong>å¦‚æœä¸åŒå°±ä½¿ç”¨è”åˆç´¢å¼•</strong>ã€‚</li>
<li>æ— æ³•ä½¿ç”¨ Index æ—¶ï¼Œéœ€è¦å¯¹ FileSort æ–¹å¼è¿›è¡Œè°ƒä¼˜</li>
</ul>
<p>å¯ä»¥åº”ç”¨ç´¢å¼•è¿›è¡Œæ’åºçš„æƒ…å†µï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">INDEX a_b_c(a,b,c)</span><br><span class="line"></span><br><span class="line"># å¦‚æœWHEREä½¿ç”¨ç´¢å¼•çš„æœ€å·¦å‰ç¼€å®šä¹‰ä¸ºå¸¸é‡ï¼Œåˆ™order by èƒ½ä½¿ç”¨ç´¢å¼•</span><br><span class="line">- WHERE a = const ORDER BY b,c</span><br><span class="line">- WHERE a = const AND b = const ORDER BY c</span><br><span class="line">- WHERE a = const ORDER BY b,c</span><br><span class="line">- WHERE a = const AND b &gt; const ORDER BY b,c</span><br></pre></td></tr></table></figure>
<p>ä¸å¯ä»¥åº”ç”¨ç´¢å¼•è¿›è¡Œæ’åºçš„æƒ…å†µï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">- ORDER BY a ASC,b DESC,c DESC /* æ’åºä¸ä¸€è‡´ */</span><br><span class="line">- WHERE g = const ORDER BY b,c /*ä¸¢å¤±aç´¢å¼•*/</span><br><span class="line">- WHERE a = const ORDER BY c /*ä¸¢å¤±bç´¢å¼•*/</span><br><span class="line">- WHERE a = const ORDER BY a,d /*dä¸æ˜¯ç´¢å¼•çš„ä¸€éƒ¨åˆ†*/</span><br><span class="line">- WHERE a in (...) ORDER BY b,c /*å¯¹äºæ’åºæ¥è¯´ï¼Œå¤šä¸ªç›¸ç­‰æ¡ä»¶ä¹Ÿæ˜¯èŒƒå›´æŸ¥è¯¢*/</span><br></pre></td></tr></table></figure>
<p>â€‹
éœ€è¦æ³¨æ„ï¼šæœ‰äº›å¯ä»¥åº”ç”¨ç´¢å¼•è¿›è¡Œæ’åºçš„æƒ…å†µï¼ŒæŸ¥è¯¢ä¼˜åŒ–å™¨ä¸ä¸€å®šä¼šå»ä½¿ç”¨ã€‚è¿™ä¼šå–å†³äºå…·ä½“çš„æŸ¥è¯¢å­—æ®µã€æ•°æ®é‡ç­‰ç­‰ã€‚</p>
<ul>
<li>å½“ã€èŒƒå›´æ¡ä»¶ã€‘å’Œã€group by æˆ–è€… order
byã€‘çš„å­—æ®µå‡ºç°äºŒé€‰ä¸€æ—¶ï¼Œä¼˜å…ˆè§‚å¯Ÿæ¡ä»¶å­—æ®µçš„è¿‡æ»¤æ•°é‡ï¼Œå¦‚æœè¿‡æ»¤çš„æ•°æ®è¶³å¤Ÿå¤šï¼Œè€Œéœ€è¦æ’åºçš„æ•°æ®å¹¶ä¸å¤šæ—¶ï¼Œä¼˜å…ˆæŠŠç´¢å¼•æ”¾åœ¨èŒƒå›´å­—æ®µä¸Šã€‚åä¹‹ï¼Œäº¦ç„¶ã€‚</li>
</ul>
<h5 id="filesortç®—æ³•">1ï¼‰FileSortç®—æ³•ï¼š</h5>
<ul>
<li>åŒè·¯æ’åº
<ul>
<li>æ˜¯ä¸¤æ¬¡æ‰«æç£ç›˜ï¼Œæœ€ç»ˆå¾—åˆ°æ•°æ®ã€‚</li>
<li>ç¬¬ä¸€æ¬¡ä»…è¯»å–è¡ŒæŒ‡é’ˆå’Œorder byåˆ—ï¼Œå¯¹ä»–ä»¬è¿›è¡Œæ’åºã€‚</li>
<li>ç¬¬äºŒæ¬¡æ‰«æå·²ç»æ’åºå¥½çš„åˆ—è¡¨ï¼ŒæŒ‰ç…§åˆ—è¡¨ä¸­çš„å€¼é‡æ–°ä»åˆ—è¡¨ä¸­è¯»å–å¯¹åº”çš„æ•°æ®è¾“å‡ºï¼Œä»ç£ç›˜å–æ’åºå­—æ®µï¼Œåœ¨bufferè¿›è¡Œæ’åºï¼Œå†ä»ç£ç›˜å–å…¶ä»–å­—æ®µ</li>
</ul></li>
<li>å•è·¯æ’åºï¼ˆæ›´æ¶ˆè€—bufferï¼‰
<ul>
<li>ç›´æ¥ä»ç£ç›˜è¯»å–æŸ¥è¯¢éœ€è¦çš„æ‰€æœ‰åˆ—ï¼ŒæŒ‰ç…§order
byåˆ—åœ¨bufferå¯¹å®ƒä»¬è¿›è¡Œæ’åºï¼Œç„¶åæ‰«ææ’åºåçš„åˆ—è¡¨è¿›è¡Œè¾“å‡ºï¼Œ
å®ƒçš„æ•ˆç‡æ›´å¿«ä¸€äº›ï¼Œé¿å…äº†ç¬¬äºŒæ¬¡è¯»å–æ•°æ®ã€‚å¹¶ä¸”æŠŠéšæœºIOå˜æˆäº†é¡ºåºIOï¼Œä½†æ˜¯å®ƒä¼šä½¿ç”¨æ›´å¤šçš„ç©ºé—´ï¼Œ
å› ä¸ºå®ƒæŠŠæ¯ä¸€è¡Œéƒ½ä¿å­˜åœ¨å†…å­˜ä¸­äº†ã€‚</li>
<li>å¦‚æœbufferå®¹é‡ä¸å¤Ÿï¼Œåè€Œå¯èƒ½ä¼šå¯¼è‡´å¤§é‡çš„IOæ“ä½œã€‚
<ul>
<li>å°è¯•æé«˜ sort_buffer_size</li>
<li>å°è¯•æé«˜ max_length_for_sort_data</li>
<li>Order by æ—¶select * æ˜¯ä¸€ä¸ªå¤§å¿Œã€‚æœ€å¥½åªQueryéœ€è¦çš„å­—æ®µ</li>
</ul></li>
</ul></li>
</ul>
<h4 id="group-by-ä¼˜åŒ–">5ã€GROUP BY ä¼˜åŒ–ï¼š</h4>
<ul>
<li>group by ä½¿ç”¨ç´¢å¼•çš„åŸåˆ™å‡ ä¹è·Ÿorder byä¸€è‡´ ï¼Œgroup by
å³ä½¿æ²¡æœ‰è¿‡æ»¤æ¡ä»¶ç”¨åˆ°ç´¢å¼•ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ç´¢å¼•ã€‚</li>
<li>group by å…ˆæ’åºå†åˆ†ç»„ï¼Œéµç…§ç´¢å¼•å»ºçš„æœ€ä½³å·¦å‰ç¼€æ³•åˆ™</li>
<li>å½“æ— æ³•ä½¿ç”¨ç´¢å¼•åˆ—ï¼Œå¢å¤§max_length_for_sort_data å’Œsort_buffer_size
å‚æ•°çš„è®¾ç½®</li>
<li>whereæ•ˆç‡é«˜äºhavingï¼Œèƒ½å†™åœ¨whereé™å®šçš„æ¡ä»¶å°±ä¸è¦å†™åœ¨havingä¸­ã€‚å‡å°‘ä½¿ç”¨order
byï¼Œå’Œä¸šåŠ¡æ²Ÿé€šèƒ½ä¸æ’åºå°±ä¸æ’åºï¼Œæˆ–å°†æ’åºæ”¾åˆ°ç¨‹åºç«¯å»åšã€‚</li>
<li>Order byã€group
byã€distinctè¿™äº›è¯­å¥è¾ƒä¸ºè€—è´¹CPUï¼Œæ•°æ®åº“çš„CPUèµ„æºæ˜¯æå…¶å®è´µçš„ã€‚</li>
<li>åŒ…å«äº†order byã€group
byã€distinctè¿™äº›æŸ¥è¯¢çš„è¯­å¥ï¼Œwhereæ¡ä»¶è¿‡æ»¤å‡ºæ¥çš„ç»“æœé›†è¯·ä¿æŒåœ¨1000è¡Œä»¥å†…ï¼Œå¦åˆ™SQLä¼šå¾ˆæ…¢ã€‚</li>
</ul>
<h4 id="ä¼˜åŒ–åˆ†é¡µæŸ¥è¯¢">6ã€ä¼˜åŒ–åˆ†é¡µæŸ¥è¯¢ï¼š</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM student LIMIT 200000,10;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¼˜åŒ–1ï¼šåœ¨ç´¢å¼•ä¸Šå®Œæˆæ’åºåˆ†é¡µæ“ä½œï¼Œæœ€åæ ¹æ®ä¸»é”®å…³è”å›åŸè¡¨æŸ¥è¯¢æ‰€éœ€è¦çš„å…¶ä»–åˆ—å†…å®¹ã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM student t,(SELECT id FROM student ORDER BY id LIMIT 2000000,10) a</span><br><span class="line">WHERE t.id = a.id;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¼˜åŒ–2ï¼šè¯¥æ–¹æ¡ˆé€‚ç”¨äºä¸»é”®è‡ªå¢çš„è¡¨ï¼Œå¯ä»¥æŠŠLimit
æŸ¥è¯¢è½¬æ¢æˆæŸä¸ªä½ç½®çš„æŸ¥è¯¢ã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM student WHERE id &gt; 2000000 LIMIT 10;</span><br></pre></td></tr></table></figure>
<h4 id="è¦†ç›–ç´¢å¼•">7ã€è¦†ç›–ç´¢å¼•ï¼š</h4>
<p>â€‹ ä¸€ä¸ªç´¢å¼•åŒ…å«äº†æ»¡è¶³æŸ¥è¯¢ç»“æœçš„æ•°æ®å°±å«åšè¦†ç›–ç´¢å¼•ã€‚ç®€å•è¯´å°±æ˜¯ï¼Œ
ç´¢å¼•åˆ—+ä¸»é”® åŒ…å« SELECT åˆ° FROM ä¹‹é—´æŸ¥è¯¢çš„åˆ—ã€‚</p>
<p>ä¸¾ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># ä¸ä½¿ç”¨ç´¢å¼•ï¼Œå› ä¸ºå¦‚æœè¦ä½¿ç”¨è¿˜éœ€è¦å›è¡¨ï¼Œæˆæœ¬æ›´é«˜</span><br><span class="line">EXPLAIN SELECT * FROM student WHERE NAME LIKE &#x27;%abc&#x27;</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨ç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•ä¸­æœ‰id,age,NAMEï¼Œæ‰€ä»¥ä¸éœ€è¦å›è¡¨</span><br><span class="line">EXPLAIN SELECT id,age,NAME FROM student WHERE NAME LIKE &#x27;%abc&#x27;</span><br></pre></td></tr></table></figure>
<ul>
<li>å¥½å¤„ï¼š
<ul>
<li>é¿å…Innodbè¡¨è¿›è¡Œç´¢å¼•çš„äºŒæ¬¡æŸ¥è¯¢ï¼ˆå›è¡¨ï¼‰</li>
<li>å¯ä»¥æŠŠéšæœºIOå˜æˆé¡ºåºIOåŠ å¿«æŸ¥è¯¢æ•ˆç‡ï¼Œå› ä¸ºè¦†ç›–ç´¢å¼•æ˜¯æŒ‰ç…§é”®å€¼çš„é¡ºåºå­˜å‚¨çš„ï¼Œå¯¹äºIOå¯†é›†å‹çš„èŒƒå›´æŸ¥æ‰¾æ¥è¯´ï¼Œå¯¹æ¯”éšæœºä»ç£ç›˜è¯»å–æ¯ä¸€è¡Œçš„æ•°æ®IOè¦å°‘çš„å¤šã€‚</li>
</ul></li>
<li>å¼Šç«¯ï¼š
<ul>
<li>ç´¢å¼•å­—æ®µçš„ç»´æŠ¤æ€»æ˜¯æœ‰ä»£ä»·çš„ã€‚å› æ­¤ï¼Œåœ¨å»ºç«‹å†—ä½™ç´¢å¼•æ¥æ”¯æŒè¦†ç›–ç´¢å¼•æ—¶å°±éœ€è¦æƒè¡¡è€ƒè™‘ã€‚</li>
</ul></li>
</ul>
<h4 id="ç´¢å¼•æ¡ä»¶ä¸‹æ¨">8ã€ç´¢å¼•æ¡ä»¶ä¸‹æ¨ï¼š</h4>
<p>â€‹ Index Condition Pushdown(ICP)æ˜¯MySQL
5.6ä¸­æ–°ç‰¹æ€§ï¼Œæ˜¯ä¸€ç§åœ¨å­˜å‚¨å¼•æ“å±‚ä½¿ç”¨ç´¢å¼•è¿‡æ»¤æ•°æ®çš„ä¸€ç§ä¼˜åŒ–æ–¹å¼ã€‚ICPå¯ä»¥å‡å°‘å­˜å‚¨å¼•æ“è®¿é—®åŸºè¡¨çš„æ¬¡æ•°ä»¥åŠMySQLæœåŠ¡å™¨è®¿é—®å­˜å‚¨å¼•æ“çš„æ¬¡æ•°ã€‚</p>
<ul>
<li>ç¤ºä¾‹ï¼š è¡¨ä¸Šæœ‰è”åˆç´¢å¼•(key1,key2)
<ul>
<li>ä¸ä½¿ç”¨ICPçš„æŸ¥è¯¢è¿‡ç¨‹ï¼šå…ˆä½¿ç”¨è”åˆç´¢å¼•(key1,key2)è¿‡æ»¤key1&gt;'z'æ¡ä»¶ï¼Œç„¶åå›è¡¨ï¼Œå›è¡¨åçš„æ•°æ®åŠ è½½åˆ°æ•°æ®é¡µä¸­ï¼Œå†å»æ‰¾æ»¡è¶³ç¬¬äºŒç¬¬ä¸‰ä¸ªæ¡ä»¶çš„æ•°æ®</li>
<li>ä½¿ç”¨ICPçš„æŸ¥è¯¢è¿‡ç¨‹ï¼šå…ˆä½¿ç”¨è”åˆç´¢å¼•(key1,key2)è¿‡æ»¤key1&gt;'z'æ¡ä»¶ï¼Œç„¶åä¸æ€¥ç€å›è¡¨ã€‚å› ä¸ºè”åˆç´¢å¼•ä¸­æœ‰key2è¿™ä¸ªå­—æ®µï¼Œæ‰€ä»¥å¯ä»¥å…ˆè¿›è¡Œç´¢å¼•æ¡ä»¶ä¸‹æ¨ï¼Œä¹Ÿå°±æ˜¯å…ˆç­›é€‰key2è¿™ä¸ªæ¡ä»¶ï¼Œç„¶åç”±äºkey3ä¸åœ¨ç´¢å¼•å†…ï¼Œæ‰€ä»¥åªèƒ½å…ˆå»å›è¡¨ï¼Œå†ç­›é€‰ç¬¬ä¸‰ä¸ªæ•°æ®äº†ã€‚</li>
</ul></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 where key1 &gt; &#x27;z&#x27; AND key2 LIKE &#x27;%s&#x27; AND key3 LIKE &#x27;%ss&#x27;</span><br></pre></td></tr></table></figure>
<h5 id="icpçš„å¼€å¯å’Œå…³é—­">1ï¼‰ICPçš„å¼€å¯å’Œå…³é—­ï¼š</h5>
<p>é»˜è®¤æƒ…å†µä¸‹å¯ç”¨ç´¢å¼•ä¸‹æ¨ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ç³»ç»Ÿå˜é‡optimizer_switch =
index_contidition_pushdown = onæ¥å¼€å¯ã€‚</p>
<h5 id="ä½¿ç”¨æ¡ä»¶">2ï¼‰ä½¿ç”¨æ¡ä»¶ï¼š</h5>
<ul>
<li>åªèƒ½ç”¨äºäºŒçº§ç´¢å¼•(secondary index)</li>
<li>explainæ˜¾ç¤ºçš„æ‰§è¡Œè®¡åˆ’ä¸­typeå€¼ï¼ˆjoin ç±»å‹ï¼‰ä¸ºrange ã€ ref ã€ eq_ref
æˆ–è€…ref_or_null ã€‚</li>
<li>å¹¶éå…¨éƒ¨whereæ¡ä»¶éƒ½å¯ä»¥ç”¨ICPç­›é€‰ï¼Œå¦‚æœwhereæ¡ä»¶çš„å­—æ®µä¸åœ¨ç´¢å¼•åˆ—ä¸­ï¼Œè¿˜æ˜¯è¦è¯»å–æ•´è¡¨çš„è®°å½•åˆ°serverç«¯åšwhereè¿‡æ»¤ã€‚</li>
<li>ICPå¯ä»¥ç”¨äºMyISAMå’ŒInnnoDBå­˜å‚¨å¼•æ“</li>
<li>MySQL 5.6ç‰ˆæœ¬çš„ä¸æ”¯æŒåˆ†åŒºè¡¨çš„ICPåŠŸèƒ½ï¼Œ5.7ç‰ˆæœ¬çš„å¼€å§‹æ”¯æŒã€‚</li>
<li>å½“SQLä½¿ç”¨è¦†ç›–ç´¢å¼•æ—¶ï¼Œä¸æ”¯æŒICPä¼˜åŒ–æ–¹æ³•ã€‚</li>
</ul>
<h4 id="å…¶ä»–æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥">9ã€å…¶ä»–æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥ï¼š</h4>
<h5 id="exists-å’Œ-in">1ï¼‰EXISTS å’Œ IN</h5>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT * FROM A WHERE CC IN(SELECT CC FROM B) </span><br><span class="line"></span><br><span class="line">SELECT * FROM A WHERE EXISTS(SELECT CC FROM B WHERE B.cc=A.cc)</span><br></pre></td></tr></table></figure>
<p>å½“Aå°äºBæ—¶ï¼Œç”¨EXISTSï¼Œå› ä¸ºAæ˜¯é©±åŠ¨è¡¨ï¼Œæ‰§è¡Œé¡ºåºæ˜¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for i in A:</span><br><span class="line">	for j in B:</span><br><span class="line">		if j.cc == i.cc then</span><br></pre></td></tr></table></figure>
<p>å½“Bå°äºAæ—¶ï¼Œç”¨INï¼Œå› ä¸ºå®ç°é€»è¾‘æ­£å¥½ä¸ä¸Šç›¸åã€‚</p>
<h5 id="count-å’Œ-countå…·ä½“å­—æ®µ">2ï¼‰COUNT(*) å’Œ COUNT(å…·ä½“å­—æ®µ)</h5>
<ul>
<li>COUNT(*) å’Œ COUNT(1) ä¸¤è€…æ‰§è¡Œæ•ˆç‡ç±»ä¼¼ã€‚</li>
<li>å¦‚æœæ˜¯MyISAMå­˜å‚¨å¼•æ“ï¼Œç»Ÿè®¡è¡¨çš„è¡Œæ•°ä¸ºO(1)å¤æ‚åº¦ï¼Œå› ä¸ºæœ‰å…ƒæ•°æ®å­˜å‚¨ï¼Œä¸€è‡´æ€§ç”±è¡¨çº§é”ç»´æŠ¤ã€‚</li>
<li>å¦‚æœæ˜¯InnoDBï¼Œå…¶æ”¯æŒäº‹åŠ¡è¡Œé”ç­‰æœºåˆ¶ï¼Œæ— æ³•ç»´æŠ¤å…ƒæ•°æ®ï¼Œæ‰€ä»¥éœ€è¦æ‰«æå…¨è¡¨ï¼Œæ˜¯O(n)å¤æ‚åº¦ï¼Œè¿›è¡Œå¾ªç¯+è®¡æ•°æ–¹å¼ç»Ÿè®¡ã€‚</li>
<li>InnoDBä¸­ï¼Œå¦‚æœé‡‡ç”¨COUNT(å…·ä½“å­—æ®µ)ï¼Œå°½å¯èƒ½ä½¿ç”¨äºŒçº§ç´¢å¼•ï¼Œå› ä¸ºä¸»é”®é‡‡ç”¨çš„æ˜¯èšç°‡ç´¢å¼•ï¼ŒåŒ…å«çš„ä¿¡æ¯è¾ƒå¤šã€‚å¯¹äºCOUNT(*)
å’Œ COUNT(1)
è€Œè¨€ï¼Œåªæ˜¯ç»Ÿè®¡è¡Œæ•°ï¼Œç³»ç»Ÿå›è‡ªåŠ¨é‡‡ç”¨å ç”¨ç©ºé—´æ›´å°çš„äºŒçº§ç´¢å¼•æ¥ç»Ÿè®¡ã€‚</li>
</ul>
<h5 id="å…³äºselect">3ï¼‰å…³äºSELECT *</h5>
<ul>
<li>ä¸å»ºè®®ä½¿ç”¨ï¼Œè€—è´¹èµ„æºå’Œæ—¶é—´</li>
<li>æ— æ³•ä½¿ç”¨è¦†ç›–ç´¢å¼•</li>
</ul>
<h5 id="limit1">4ï¼‰LIMIT1</h5>
<ul>
<li>é’ˆå¯¹çš„æ˜¯ä¼šæ‰«æå…¨è¡¨çš„SQLè¯­å¥ï¼Œå¦‚æœä½ å¯ä»¥ç¡®å®šç»“æœé›†åªæœ‰ä¸€æ¡ï¼Œé‚£ä¹ˆåŠ ä¸ŠLIMIT1çš„æ—¶å€™ï¼Œå½“æ‰¾åˆ°ä¸€æ¡ç»“æœçš„æ—¶å€™å°±ä¸ä¼šç»§ç»­æ‰«æäº†ï¼Œè¿™æ ·ä¼šåŠ å¿«æŸ¥è¯¢é€Ÿåº¦ã€‚</li>
</ul>
<h5 id="å¤šä½¿ç”¨commit">5ï¼‰å¤šä½¿ç”¨COMMIT</h5>
<ul>
<li>åªè¦æœ‰å¯èƒ½ï¼Œåœ¨ç¨‹åºä¸­å°½é‡å¤šä½¿ç”¨
COMMITï¼Œè¿™æ ·ç¨‹åºçš„æ€§èƒ½å¾—åˆ°æé«˜ï¼Œéœ€æ±‚ä¹Ÿä¼šå› ä¸º COMMIT
æ‰€é‡Šæ”¾çš„èµ„æºè€Œå‡å°‘ã€‚</li>
<li>COMMIT æ‰€é‡Šæ”¾çš„èµ„æºï¼š
<ul>
<li>å›æ»šæ®µä¸Šç”¨äºæ¢å¤æ•°æ®çš„ä¿¡æ¯</li>
<li>è¢«ç¨‹åºè¯­å¥è·å¾—çš„é”</li>
<li>redo / undo log buffer ä¸­çš„ç©ºé—´</li>
<li>ç®¡ç†ä¸Šè¿° 3 ç§èµ„æºä¸­çš„å†…éƒ¨èŠ±è´¹</li>
</ul></li>
</ul>
<h3 id="äºŒä¸»é”®åº”å½“å¦‚ä½•è®¾è®¡">äºŒã€ä¸»é”®åº”å½“å¦‚ä½•è®¾è®¡ï¼Ÿ</h3>
<p>â€‹
è‡ªå¢IDåšä¸»é”®ï¼Œç®€å•æ˜“æ‡‚ï¼Œå‡ ä¹æ‰€æœ‰æ•°æ®åº“éƒ½æ”¯æŒè‡ªå¢ç±»å‹ï¼Œåªæ˜¯å®ç°ä¸Šå„è‡ªæœ‰æ‰€ä¸åŒè€Œå·²ã€‚è‡ªå¢IDé™¤äº†ç®€å•ï¼Œå…¶ä»–éƒ½æ˜¯ç¼ºç‚¹ã€‚</p>
<ol type="1">
<li>å¯é æ€§ä¸é«˜ å­˜åœ¨è‡ªå¢IDå›æº¯çš„é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜ç›´åˆ°æœ€æ–°ç‰ˆæœ¬çš„MySQL
8.0æ‰ä¿®å¤ã€‚</li>
<li>å®‰å…¨æ€§ä¸é«˜
å¯¹å¤–æš´éœ²çš„æ¥å£å¯ä»¥éå¸¸å®¹æ˜“çŒœæµ‹å¯¹åº”çš„ä¿¡æ¯ã€‚æ¯”å¦‚ï¼š/User/1/è¿™æ ·çš„æ¥å£ã€‚</li>
<li>æ€§èƒ½å·® è‡ªå¢IDçš„æ€§èƒ½è¾ƒå·®ï¼Œéœ€è¦åœ¨æ•°æ®åº“æœåŠ¡å™¨ç«¯ç”Ÿæˆã€‚</li>
<li>äº¤äº’å¤š ä¸šåŠ¡è¿˜éœ€è¦é¢å¤–æ‰§è¡Œä¸€æ¬¡ç±»ä¼¼last_insert_id()
çš„å‡½æ•°æ‰èƒ½çŸ¥é“åˆšæ‰æ’å…¥çš„è‡ªå¢å€¼ï¼Œè¿™éœ€è¦å¤šä¸€æ¬¡çš„ç½‘ç»œäº¤äº’ã€‚åœ¨æµ·é‡å¹¶å‘çš„ç³»ç»Ÿä¸­ï¼Œå¤š1æ¡SQLï¼Œå°±å¤šä¸€æ¬¡æ€§èƒ½ä¸Šçš„å¼€é”€ã€‚</li>
<li>å±€éƒ¨å”¯ä¸€æ€§
æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œè‡ªå¢IDæ˜¯å±€éƒ¨å”¯ä¸€ï¼Œåªåœ¨å½“å‰æ•°æ®åº“å®ä¾‹ä¸­å”¯ä¸€ï¼Œè€Œä¸æ˜¯å…¨å±€å”¯ä¸€ï¼Œåœ¨ä»»æ„æœåŠ¡å™¨é—´éƒ½æ˜¯å”¯ä¸€çš„ã€‚å¯¹äºç›®å‰åˆ†å¸ƒå¼ç³»ç»Ÿæ¥è¯´ï¼Œè¿™ç®€ç›´å°±æ˜¯å™©æ¢¦</li>
</ol>
<h4 id="ä½¿ç”¨ä¸šåŠ¡å­—æ®µåšä¸»é”®">1ã€ä½¿ç”¨ä¸šåŠ¡å­—æ®µåšä¸»é”®ï¼Ÿ</h4>
<p>â€‹ ä¸å¯å–ï¼å»ºè®®å°½é‡ä¸è¦ç”¨è·Ÿä¸šåŠ¡æœ‰å…³çš„å­—æ®µåšä¸»é”®ã€‚</p>
<h4 id="æ¨èçš„ä¸»é”®è®¾è®¡">2ã€æ¨èçš„ä¸»é”®è®¾è®¡ï¼š</h4>
<ul>
<li>éæ ¸å¿ƒä¸šåŠ¡ï¼šå¯¹åº”è¡¨çš„ä¸»é”®è‡ªå¢IDï¼Œå¦‚å‘Šè­¦ã€æ—¥å¿—ã€ç›‘æ§ç­‰ä¿¡æ¯ã€‚</li>
<li>æ ¸å¿ƒä¸šåŠ¡ï¼šä¸»é”®è®¾è®¡è‡³å°‘åº”è¯¥æ˜¯å…¨å±€å”¯ä¸€ä¸”æ˜¯å•è°ƒé€’å¢ã€‚å…¨å±€å”¯ä¸€ä¿è¯åœ¨å„ç³»ç»Ÿä¹‹é—´éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå•è°ƒé€’å¢æ˜¯å¸Œæœ›æ’å…¥æ—¶ä¸å½±å“æ•°æ®åº“æ€§èƒ½</li>
</ul>
<p><strong>UUID</strong>ï¼š</p>
<p>â€‹ UUID = æ—¶é—´+UUIDç‰ˆæœ¬ï¼ˆ16å­—èŠ‚ï¼‰- æ—¶é’Ÿåºåˆ—ï¼ˆ4å­—èŠ‚ï¼‰ -
MACåœ°å€ï¼ˆ12å­—èŠ‚ï¼‰</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221031152235559.png" /></p>
<p>â€‹
åœ¨UUIDä¸­æ—¶é—´éƒ¨åˆ†å ç”¨60ä½ï¼Œå­˜å‚¨çš„ç±»ä¼¼TIMESTAMPçš„æ—¶é—´æˆ³ï¼Œä½†è¡¨ç¤ºçš„æ˜¯ä»1582-10-15
00ï¼š00ï¼š00.00åˆ°ç°åœ¨çš„100nsçš„è®¡æ•°ã€‚å¯ä»¥çœ‹åˆ°UUIDå­˜å‚¨çš„æ—¶é—´ç²¾åº¦æ¯”TIMESTAMPEæ›´é«˜</p>
<ul>
<li>ä¸ºä»€ä¹ˆUUIDæ˜¯éšæœºæ— åºçš„å‘¢ï¼Ÿ
<ul>
<li>å› ä¸ºUUIDçš„è®¾è®¡ä¸­ï¼Œ<strong>å°†æ—¶é—´ä½ä½æ”¾åœ¨æœ€å‰é¢ï¼Œè€Œè¿™éƒ¨åˆ†çš„æ•°æ®æ˜¯ä¸€ç›´åœ¨å˜åŒ–çš„ï¼Œå¹¶ä¸”æ˜¯æ— åºã€‚</strong></li>
</ul></li>
</ul>
<p><strong>æ”¹é€ UUIDï¼Œä½¿å…¶é€‚é…ä¸»é”®çš„è¦æ±‚</strong>ï¼š</p>
<p>â€‹
è‹¥å°†æ—¶é—´é«˜ä½ä½äº’æ¢ï¼Œåˆ™æ—¶é—´å°±æ˜¯å•è°ƒé€’å¢çš„äº†ï¼Œä¹Ÿå°±å˜å¾—å•è°ƒé€’å¢äº†ã€‚MySQL
8.0å¯ä»¥æ›´æ¢æ—¶é—´ä½ä½å’Œæ—¶é—´é«˜ä½çš„å­˜å‚¨æ–¹å¼ï¼Œè¿™æ ·UUIDå°±æ˜¯æœ‰åºçš„UUIDäº†ã€‚</p>
<p>â€‹
å¦å¤–åœ¨çœŸå®çš„ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œä¸»é”®è¿˜å¯ä»¥åŠ å…¥ä¸šåŠ¡å’Œç³»ç»Ÿå±æ€§ï¼Œå¦‚ç”¨æˆ·çš„å°¾å·ï¼Œæœºæˆ¿çš„ä¿¡æ¯ç­‰ã€‚</p>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ•°æ®åº“ç²¾ç®€ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysqlæ•°æ®åº“è°ƒä¼˜å·¥å…·</title>
    <url>/2022/10/28/a30af89db2dc/</url>
    <content><![CDATA[<h3 id="ä¸€æ•°æ®åº“ä¼˜åŒ–æ­¥éª¤åŠä¼˜åŒ–å·¥å…·">ä¸€ã€æ•°æ®åº“ä¼˜åŒ–æ­¥éª¤åŠä¼˜åŒ–å·¥å…·</h3>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221028165505532.png" style="zoom:67%;" /></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221028165600066.png" style="zoom:67%;" /></p>
<h4 id="ç»Ÿè®¡sqlçš„æŸ¥è¯¢æˆæœ¬">1ã€ç»Ÿè®¡SQLçš„æŸ¥è¯¢æˆæœ¬ï¼š</h4>
<p>â€‹ è¿™ä¸ªValueä»£è¡¨çš„æ˜¯è¿›è¡Œäº†å¤šå°‘ä¸ªé¡µçš„æŸ¥è¯¢</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20221028170212104.png" /></p>
<p>â€‹
ä½¿ç”¨åœºæ™¯ï¼šå®ƒå¯¹äºæ¯”è¾ƒå¼€é”€æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œç‰¹åˆ«æ˜¯æˆ‘ä»¬æœ‰å¥½å‡ ç§æŸ¥è¯¢æ–¹å¼å¯é€‰çš„æ—¶å€™ã€‚SQLæŸ¥è¯¢æ˜¯ä¸€ä¸ªåŠ¨æ€çš„è¿‡ç¨‹ï¼Œä»é¡µåŠ è½½çš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä¸¤ç‚¹ç»“è®ºï¼š</p>
<ul>
<li>ä½ç½®å†³å®šæ•ˆç‡ã€‚å¦‚æœé¡µå°±åœ¨æ•°æ®åº“ç¼“å†²æ± ä¸­ï¼Œé‚£ä¹ˆæ•ˆç‡æ˜¯æœ€é«˜çš„ï¼Œå¦åˆ™è¿˜éœ€è¦ä»å†…å­˜æˆ–è€…ç£ç›˜ä¸­è¿›è¡Œè¯»å–ï¼Œå½“ç„¶é’ˆå¯¹å•ä¸ªé¡µçš„è¯»å–æ¥è¯´ï¼Œå¦‚æœé¡µå­˜åœ¨äºå†…å­˜ä¸­ï¼Œä¼šæ¯”åœ¨ç£ç›˜ä¸­è¯»å–æ•ˆç‡é«˜å¾ˆå¤šã€‚</li>
<li>æ‰¹é‡å†³å®šæ•ˆç‡ã€‚å¦‚æœæˆ‘ä»¬ä»ç£ç›˜ä¸­å¯¹å•ä¸€é¡µè¿›è¡Œéšæœºè¯»ï¼Œé‚£ä¹ˆæ•ˆç‡æ˜¯å¾ˆä½çš„ï¼ˆå·®ä¸å¤š10msï¼‰ï¼Œè€Œé‡‡ç”¨é¡ºåºè¯»å–çš„æ–¹å¼ï¼Œæ‰¹é‡å¯¹é¡µè¿›è¡Œè¯»å–ï¼Œå¹³å‡ä¸€é¡µçš„è¯»å–æ•ˆç‡å°±ä¼šæå‡å¾ˆå¤šï¼Œç”šè‡³è¦å¿«äºå•ä¸ªé¡µé¢åœ¨å†…å­˜ä¸­çš„éšæœºè¯»å–ã€‚</li>
<li>è€ƒè™‘æ•°æ®å­˜æ”¾çš„ä½ç½®ï¼Œå¦‚æœæ˜¯ç»å¸¸ä½¿ç”¨çš„æ•°æ®å°±è¦å°½é‡æ”¾åˆ°ç¼“å†²æ± ä¸­ï¼Œå…¶æ¬¡æˆ‘ä»¬å¯ä»¥å……åˆ†åˆ©ç”¨ç£ç›˜çš„ååèƒ½åŠ›ï¼Œä¸€æ¬¡æ€§æ‰¹é‡è¯»å–æ•°æ®ï¼Œè¿™æ ·å•ä¸ªé¡µçš„è¯»å–æ•ˆç‡ä¹Ÿå°±å¾—åˆ°äº†æå‡ã€‚</li>
</ul>
<h4 id="å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—">2ã€å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—ï¼š</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">set global slow_query_log=&#x27;ON&#x27;;</span><br></pre></td></tr></table></figure>
<p>â€‹
MySQLçš„æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œç”¨æ¥è®°å½•åœ¨MySQLä¸­å“åº”æ—¶é—´è¶…è¿‡é˜ˆå€¼çš„è¯­å¥ï¼Œå…·ä½“æŒ‡è¿è¡Œæ—¶é—´è¶…è¿‡long_query_timeå€¼çš„SQLï¼Œä¼šè¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­ï¼Œé»˜è®¤å€¼ä¸º10sã€‚</p>
<p>â€‹ å¦‚æœä¸æ˜¯è°ƒä¼˜éœ€è¦çš„è¯ï¼Œä¸€èˆ¬ä¸ä¼šå¼€å¯è¯¥å‚æ•°ã€‚</p>
<p>â€‹ è®¾ç½®æ—¶é—´é˜ˆå€¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; set global long_query_time = 1;</span><br><span class="line">mysql&gt; show global variables like &#x27;%long_query_time%&#x27;;</span><br><span class="line">mysql&gt; set long_query_time=1;</span><br><span class="line">mysql&gt; show variables like &#x27;%long_query_time%&#x27;;</span><br></pre></td></tr></table></figure>
<p>â€‹ æŸ¥çœ‹æ…¢æŸ¥è¯¢è®°å½•æ¡æ•°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHOW GLOBAL STATUS LIKE &#x27;%Slow_queries%&#x27;;</span><br></pre></td></tr></table></figure>
<p>â€‹ æ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æå·¥å…·ï¼šmysqldumpslow</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#å¾—åˆ°è¿”å›è®°å½•é›†æœ€å¤šçš„10ä¸ªSQL</span><br><span class="line">mysqldumpslow -s r -t 10 /var/lib/mysql/atguigu-slow.log</span><br><span class="line">#å¾—åˆ°è®¿é—®æ¬¡æ•°æœ€å¤šçš„10ä¸ªSQL</span><br><span class="line">mysqldumpslow -s c -t 10 /var/lib/mysql/atguigu-slow.log</span><br><span class="line">#å¾—åˆ°æŒ‰ç…§æ—¶é—´æ’åºçš„å‰10æ¡é‡Œé¢å«æœ‰å·¦è¿æ¥çš„æŸ¥è¯¢è¯­å¥</span><br><span class="line">mysqldumpslow -s t -t 10 -g &quot;left join&quot; /var/lib/mysql/atguigu-slow.log</span><br><span class="line">#å¦å¤–å»ºè®®åœ¨ä½¿ç”¨è¿™äº›å‘½ä»¤æ—¶ç»“åˆ | å’Œmore ä½¿ç”¨ ï¼Œå¦åˆ™æœ‰å¯èƒ½å‡ºç°çˆ†å±æƒ…å†µ</span><br><span class="line">mysqldumpslow -s r -t 10 /var/lib/mysql/atguigu-slow.log | more</span><br></pre></td></tr></table></figure>
<p>â€‹ æŸ¥çœ‹SQLæ‰§è¡Œæˆæœ¬ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql &gt; set profiling = &#x27;ON&#x27;;</span><br><span class="line">mysql &gt; show profiles;</span><br><span class="line">mysql &gt; show profile;</span><br><span class="line">mysql&gt; show profile cpu,block io for query 2;</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/image-20221029131535493.png" /></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-29 13.17.28.png" style="zoom:67%;" /></p>
<h4 id="åˆ†ææŸ¥è¯¢è¯­å¥explain">3ã€åˆ†ææŸ¥è¯¢è¯­å¥EXPLAINï¼š</h4>
<p>â€‹
<strong>å®šä½äº†æŸ¥è¯¢æ…¢çš„SQLä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨EXPLAINæˆ–DESCRIBEå·¥å…·åšé’ˆå¯¹æ€§çš„åˆ†ææŸ¥è¯¢è¯­å¥ã€‚</strong></p>
<ul>
<li><p>èƒ½æ˜¾ç¤ºå“ªäº›ä¿¡æ¯ï¼Ÿ</p>
<ul>
<li><p>è¡¨çš„è¯»å–é¡ºåºï¼Œæ•°æ®è¯»å–æ“ä½œçš„æ“ä½œç±»å‹ã€å“ªäº›ç´¢å¼•å¯ä»¥ä½¿ç”¨ï¼Œå“ªäº›ç´¢å¼•å®é™…è¢«ä½¿ç”¨ã€è¡¨ä¹‹é—´çš„å¼•ç”¨ã€æ¯å¼ è¡¨æœ‰å¤šå°‘è¡Œè¢«ä¼˜åŒ–å™¨æŸ¥è¯¢ã€‚</p></li>
<li><p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-29%2013.32.18.png" /></p></li>
<li><table>
<colgroup>
<col style="width: 19%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="header">
<th>id</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>select_type</td>
<td>SELECTå…³é”®å­—å¯¹åº”çš„é‚£ä¸ªæŸ¥è¯¢çš„ç±»å‹</td>
</tr>
<tr class="even">
<td>table</td>
<td>è¡¨å</td>
</tr>
<tr class="odd">
<td>Partitions</td>
<td>åŒ¹é…çš„åˆ†åŒºä¿¡æ¯</td>
</tr>
<tr class="even">
<td>type</td>
<td>é’ˆå¯¹å•è¡¨çš„è®¿é—®æ–¹æ³•</td>
</tr>
<tr class="odd">
<td>Possible_keys</td>
<td>å¯èƒ½ç”¨åˆ°çš„ç´¢å¼•</td>
</tr>
<tr class="even">
<td>key</td>
<td>å®é™…ä¸Šä½¿ç”¨çš„ç´¢å¼•</td>
</tr>
<tr class="odd">
<td>key_len</td>
<td>å®é™…ä½¿ç”¨åˆ°çš„ç´¢å¼•é•¿åº¦</td>
</tr>
<tr class="even">
<td>ref</td>
<td>å½“ä½¿ç”¨ç´¢å¼•åˆ—ç­‰å€¼æŸ¥è¯¢æ—¶ï¼Œä¸ç´¢å¼•åˆ—è¿›è¡Œç­‰å€¼åŒ¹é…çš„å¯¹è±¡ä¿¡æ¯</td>
</tr>
<tr class="odd">
<td>rows</td>
<td>é¢„ä¼°çš„éœ€è¦è¯»å–çš„è®°å½•æ¡æ•°</td>
</tr>
<tr class="even">
<td>filtered</td>
<td>æŸä¸ªè¡¨ç»è¿‡æœç´¢æ¡ä»¶è¿‡æ»¤åå‰©ä½™è®°å½•æ¡æ•°çš„ç™¾åˆ†æ¯”</td>
</tr>
<tr class="odd">
<td>Extra</td>
<td>ä¸€äº›é¢å¤–çš„ä¿¡æ¯</td>
</tr>
</tbody>
</table></li>
</ul></li>
</ul>
<h5 id="id-å’Œ-tableå…³é”®è¯">1ï¼‰id å’Œ tableå…³é”®è¯</h5>
<ul>
<li>Case1:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 INNER JOIN s2</span><br><span class="line">ON s1.key1 = s2.key1</span><br><span class="line">WHERE s1.common_field = &#x27;a&#x27;;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-29%2013.57.41.png" /></p>
<ul>
<li><p>æ¯ä¸€æ¡æŸ¥è¯¢è®°å½•ï¼Œéƒ½å¯¹åº”ä¸€å¼ å•è¡¨ã€‚æ¯”å¦‚è¯´ä¸Šè¿°inner
joinï¼Œç”¨åˆ°ä¸¤ä¸ªå•è¡¨ï¼Œæ‰€ä»¥ä¼šæ˜¾ç¤ºæœ‰ä¸¤æ¡è®°å½•</p></li>
<li><p>ä½†æ˜¯åœ¨ä¸€ä¸ªå¤§çš„æŸ¥è¯¢ä¸­ï¼Œä¸€ä¸ªSELECTå…³é”®è¯å¯¹åº”ç€ä¸€ä¸ªid</p></li>
</ul></li>
<li><p>Case2:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 WHERE key1 IN (SELECT key1 FROM s2) OR key3 = &#x27;a&#x27;;</span><br></pre></td></tr></table></figure></li>
<li><p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-29%2014.03.11.png" /></p>
<ul>
<li>æœ‰ä¸¤ä¸ªSELECTè¯­å¥ï¼Œæ‰€ä»¥å¯¹åº”ä¸¤ä¸ªid</li>
</ul></li>
<li><p>Case3:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 WHERE key1 IN (SELECT key2 FROM s2 WHERE common_field = &#x27;a&#x27;);</span><br></pre></td></tr></table></figure>
<ul>
<li><p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-29%2014.07.15.png" /></p></li>
<li><p>è™½ç„¶æœ‰ä¸¤ä¸ªSELECTè¯­å¥ï¼Œä¸ºå•¥åŒä¸€ä¸ªIDå‘¢ï¼Ÿå› ä¸ºæŸ¥è¯¢ä¼˜åŒ–å™¨å¯èƒ½å¯¹æ¶‰åŠå­æŸ¥è¯¢çš„æŸ¥è¯¢è¯­å¥è¿›è¡Œé‡å†™ï¼Œè½¬æ¢ä¸ºå¤šè¡¨æŸ¥è¯¢çš„å½¢å¼ã€‚</p></li>
</ul></li>
<li><p>Case4:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 UNION SELECT * FROM s2;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-29%2014.09.41.png" /></p></li>
<li><p>UNIONæ“ä½œå› ä¸ºéœ€è¦ä¸­é—´è¡¨è¿›è¡Œå»é‡æ“ä½œï¼Œæ‰€ä»¥æ¶‰åŠåˆ°ç¬¬ä¸‰ä¸ªè®°å½•ã€‚</p></li>
</ul></li>
<li><p>Case5:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 UNION SELECT * FROM s2;</span><br></pre></td></tr></table></figure></li>
<li><p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-29%2014.10.39.png" /></p></li>
<li><p>å› ä¸ºUNION ALLä¸ç”¨å»é‡ï¼Œæ‰€ä»¥ä¸ä¼šæœ‰ç¬¬ä¸‰æ¡è®°å½•</p></li>
<li><p><strong>æ€»ç»“ç›¸å…³å†…å®¹ï¼š</strong></p>
<ul>
<li>idå¦‚æœç›¸åŒï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ç»„ï¼Œä»ä¸Šå¾€ä¸‹é¡ºåºæ‰§è¡Œ</li>
<li>åœ¨æ‰€æœ‰ç»„ä¸­ï¼Œidå€¼è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œè¶Šå…ˆæ‰§è¡Œ</li>
<li>å…³æ³¨ç‚¹ï¼šidå·æ¯ä¸ªå·ç ï¼Œè¡¨ç¤ºä¸€è¶Ÿç‹¬ç«‹çš„æŸ¥è¯¢,
ä¸€ä¸ªsqlçš„æŸ¥è¯¢è¶Ÿæ•°è¶Šå°‘è¶Šå¥½</li>
</ul></li>
</ul>
<h5 id="select_type">2ï¼‰select_type</h5>
<p>â€‹
SELECTå…³é”®å­—å¯¹åº”çš„é‚£ä¸ªæŸ¥è¯¢çš„ç±»å‹ï¼Œç¡®è®¤äº†å°æŸ¥è¯¢åœ¨å¤§çš„æŸ¥è¯¢ä¸­æ‰®æ¼”äº†æ€æ ·çš„ä¸€ä¸ªè§’è‰²ã€‚</p>
<ul>
<li><p>æŸ¥è¯¢è¯­å¥ä¸­ä¸åŒ…å«UNIONå’Œå­æŸ¥è¯¢çš„éƒ½æ˜¯SIMPLE</p></li>
<li><p>è¿æ¥æŸ¥è¯¢éƒ½æ˜¯SIMPLE</p></li>
<li><p>Case1: ç›¸å…³å­æŸ¥è¯¢ DEPENDENT SUBQUERY</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 WHERE key1 IN (SELECT key1 FROM s2 WHERE s1.key2 =</span><br><span class="line">s2.key2) OR key3 = &#x27;a&#x27;;</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-29%2014.18.01.png" /></p></li>
<li><p>Case2: æŸ¥è¯¢ä¼˜åŒ–å™¨ä¼˜åŒ–äº†çš„æƒ…å†µ</p></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 WHERE key1 IN </span><br><span class="line">	(</span><br><span class="line">    SELECT key1 FROM s2 WHERE key1 = &#x27;a&#x27; </span><br><span class="line">   	UNION </span><br><span class="line">   	SELECT key1 FROM s1 WHERE key1 = &#x27;b&#x27;</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-29%2014.23.09.png" /></p>
<h5
id="typeå¯¹æŸå¼ è¡¨çš„æŸ¥è¯¢ç±»å‹æŸ¥è¯¢æ–¹æ³•">3ï¼‰typeï¼šå¯¹æŸå¼ è¡¨çš„æŸ¥è¯¢ç±»å‹ï¼ŒæŸ¥è¯¢æ–¹æ³•</h5>
<ul>
<li>æ‰€æœ‰è®¿é—®ç±»å‹ï¼Œè¶Šé å‰æ˜¯æˆ‘ä»¬æœ€å¸Œæœ›çœ‹åˆ°çš„ï¼ˆæ•ˆæœè¶Šå¥½ï¼‰ï¼šsystem ï¼Œ const
ï¼Œ eq_ref ï¼Œ ref ï¼Œ fulltext ï¼Œ ref_or_null ï¼Œindex_merge ï¼Œ
unique_subquery ï¼Œ index_subquery ï¼Œ range ï¼Œ index ï¼Œ ALL</li>
<li>system</li>
</ul>
<p>ç¤ºä¾‹ï¼šè¡¨ç»“æ„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE s1 (</span><br><span class="line">    id INT AUTO_INCREMENT,</span><br><span class="line">    key1 VARCHAR(100),</span><br><span class="line">    key2 INT,</span><br><span class="line">    key3 VARCHAR(100),</span><br><span class="line">    key_part1 VARCHAR(100),</span><br><span class="line">    key_part2 VARCHAR(100),</span><br><span class="line">    key_part3 VARCHAR(100),</span><br><span class="line">    common_field VARCHAR(100),</span><br><span class="line">    PRIMARY KEY (id),</span><br><span class="line">    INDEX idx_key1 (key1),</span><br><span class="line">    UNIQUE INDEX idx_key2 (key2),</span><br><span class="line">    INDEX idx_key3 (key3),	</span><br><span class="line">    INDEX idx_key_part(key_part1, key_part2, key_part3)</span><br><span class="line">) ENGINE=INNODB CHARSET=utf8;</span><br></pre></td></tr></table></figure>
<ul>
<li>constï¼šæ ¹æ®ä¸»é”®æˆ–å”¯ä¸€äºŒçº§ç´¢å¼•ä¸å¸¸æ•°è¿›è¡ŒåŒ¹é…</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 WHERE id = 10005;</span><br></pre></td></tr></table></figure>
<ul>
<li>eq_refï¼šè¿æ¥æŸ¥è¯¢æ—¶ï¼Œè¢«é©±åŠ¨è¡¨æ ¹æ®ä¸»é”®æˆ–å”¯ä¸€äºŒçº§ç´¢å¼•ä¸å¸¸æ•°è¿›è¡ŒåŒ¹é…</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 INNER JOIN s2 ON s1.id = s2.id;</span><br></pre></td></tr></table></figure>
<p>â€‹
ä»æ‰§è¡Œè®¡åˆ’çš„ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼ŒMySQLæ‰“ç®—å°†s2ä½œä¸ºé©±åŠ¨è¡¨ï¼Œs1ä½œä¸ºè¢«é©±åŠ¨è¡¨ï¼Œé‡ç‚¹å…³æ³¨s1çš„è®¿é—®æ–¹æ³•æ˜¯eq_ref
ï¼Œè¡¨æ˜åœ¨è®¿é—®s1è¡¨çš„æ—¶å€™å¯ä»¥é€šè¿‡ä¸»é”®çš„ç­‰å€¼åŒ¹é…æ¥è¿›è¡Œè®¿é—®</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-29%2014.29.09.png" /></p>
<ul>
<li>refï¼šæ™®é€šäºŒçº§ç´¢å¼•ä¸å¸¸æ•°è¿›è¡ŒåŒ¹é…</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 WHERE key1 = &#x27;a&#x27;;</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-10-29%2014.33.58.png" /></p>
<ul>
<li>ref_or_null æ™®é€šäºŒçº§ç´¢å¼•ä¸å¸¸æ•°è¿›è¡ŒåŒ¹é…ï¼Œä¸”ç´¢å¼•å€¼å¯èƒ½ä¸ºnull</li>
<li>index_merge MySQL æ‰“ç®—ä½¿ç”¨ç´¢å¼•åˆå¹¶çš„æ–¹å¼æ¥æ‰§è¡Œå¯¹ s1 è¡¨çš„æŸ¥è¯¢ã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 WHERE key1 = &#x27;a&#x27; OR key3 = &#x27;a&#x27;;</span><br></pre></td></tr></table></figure>
<ul>
<li>unique_subquery</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 WHERE key2 IN (SELECT id FROM s2 where s1.key1 = s2.key1) OR key3 = &#x27;a&#x27;;</span><br></pre></td></tr></table></figure>
<ul>
<li>index_subquery</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 WHERE common_field IN (SELECT key3 FROM s2 where s1.key1 = s2.key1) OR key3 = &#x27;a&#x27;;</span><br></pre></td></tr></table></figure>
<ul>
<li>range
ä½¿ç”¨ç´¢å¼•è·å–æŸäº›èŒƒå›´åŒºé—´çš„è®°å½•ï¼Œé‚£ä¹ˆå°±å¯èƒ½ä½¿ç”¨åˆ°rangeè®¿é—®æ–¹æ³•</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 WHERE key1 &gt; &#x27;a&#x27; AND key1 &lt; &#x27;b&#x27;;</span><br></pre></td></tr></table></figure>
<ul>
<li>index
å½“æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç´ å¼•è¦†ç›–ï¼ˆä¸ç”¨å›è¡¨å°±å¯ä»¥æŸ¥åˆ°æ•°æ®ï¼‰ï¼Œä½†éœ€è¦æ‰«æå…¨éƒ¨çš„ç´¢å¼•è®°å½•æ—¶ï¼Œè¯¥è¡¨çš„è®¿é—®æ–¹æ³•å°±æ˜¯index
ã€å› ä¸ºæ­¤å¤„ï¼Œè”åˆç´¢å¼•çš„å­—æ®µæœ€ä¼˜å…ˆçš„æ˜¯key_part1,key_part2ç„¶åæ‰æ˜¯key_part3ã€‘</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT key_part2 FROM s1 WHERE key_part3=&#x27;a&#x27;ï¼›</span><br></pre></td></tr></table></figure>
<p>â€‹ å³å¦‚æœè¯­å¥å¦‚ä¸‹ï¼Œåˆ™typeå°±æ˜¯refè€Œéindex</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT key_part2 FROM s1 WHERE key_part1=&#x27;a&#x27; and key_part3 = &#x27;b&#x27;;</span><br></pre></td></tr></table></figure>
<ul>
<li>all</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1;</span><br></pre></td></tr></table></figure>
<p>â€‹ <strong>SQL</strong> <strong>æ€§èƒ½ä¼˜åŒ–çš„ç›®æ ‡ï¼šè‡³å°‘è¦è¾¾åˆ°</strong>
<strong>range</strong> <strong>çº§åˆ«ï¼Œè¦æ±‚æ˜¯</strong>
<strong>ref</strong> <strong>çº§åˆ«ï¼Œæœ€å¥½æ˜¯</strong>
<strong>consts</strong>çº§åˆ«ã€‚</p>
<h5 id="possible_keys-å’Œ-key">4ï¼‰possible_keys å’Œ key</h5>
<p>â€‹
åœ¨EXPLAINè¯­å¥è¾“å‡ºçš„æ‰§è¡Œè®¡åˆ’ä¸­ï¼Œpossible_keysåˆ—è¡¨ç¤ºåœ¨æŸä¸ªæŸ¥è¯¢è¯­å¥ä¸­ï¼Œå¯¹æŸä¸ªè¡¨æ‰§è¡Œå•è¡¨æŸ¥è¯¢æ—¶å¯èƒ½ç”¨åˆ°çš„ç´¢å¼•æœ‰å“ªäº›ã€‚ä¸€èˆ¬æŸ¥è¯¢æ¶‰åŠåˆ°çš„å­—æ®µä¸Šè‹¥å­˜åœ¨ç´¢å¼•ï¼Œåˆ™è¯¥ç´¢å¼•å°†è¢«åˆ—å‡ºï¼Œä½†ä¸ä¸€å®šè¢«æŸ¥è¯¢ä½¿ç”¨ã€‚keyåˆ—è¡¨ç¤ºå®é™…ç”¨åˆ°çš„ç´¢å¼•æœ‰å“ªäº›ï¼Œå¦‚æœä¸ºNULLï¼Œåˆ™æ²¡æœ‰ä½¿ç”¨ç´¢å¼•ã€‚</p>
<h5 id="key_len">5ï¼‰key_len</h5>
<p>â€‹
å®é™…ä½¿ç”¨åˆ°çš„ç´¢å¼•é•¿åº¦ï¼ˆå­—èŠ‚æ•°ï¼‰ï¼Œå¸®ä½ æ£€æŸ¥æ˜¯å¦å……åˆ†çš„åˆ©ç”¨ä¸Šäº†ç´¢å¼•ï¼Œå€¼è¶Šå¤§è¶Šå¥½ï¼Œä¸»è¦é’ˆå¯¹äºè”åˆç´¢å¼•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 WHERE id = 10005;</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221029221248821.png" /></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 WHERE key2 = 10126;</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221029221254958.png" /></p>
<p>4+1 =5, å› ä¸ºkey2å­—æ®µä¸æ˜¯éç©ºçš„ï¼Œæ‰€ä»¥è®°å½•NULLéœ€è¦ä¸€ä¸ªå­—èŠ‚ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 WHERE key_part1 = &#x27;a&#x27;;</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221029221407032.png" /></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 WHERE key_part1 = &#x27;a&#x27; AND key_part2 = &#x27;b&#x27;;</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221029221412049.png" /></p>
<p><strong>key_len</strong>å¦‚ä½•è®¡ç®—:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># varchar(10)å˜é•¿å­—æ®µä¸”å…è®¸NULL = 10 * ( character setï¼š</span><br><span class="line"># utf8=3,gbk=2,latin1=1)+1(NULL)+2(å˜é•¿å­—æ®µ)</span><br><span class="line"></span><br><span class="line"># varchar(10)å˜é•¿å­—æ®µä¸”ä¸å…è®¸NULL = 10 * ( character setï¼šutf8=3,gbk=2,latin1=1)+2(å˜é•¿å­—æ®µ)</span><br><span class="line"></span><br><span class="line"># char(10)å›ºå®šå­—æ®µä¸”å…è®¸NULL = 10 * ( character setï¼šutf8=3,gbk=2,latin1=1)+1(NULL)</span><br><span class="line"></span><br><span class="line"># char(10)å›ºå®šå­—æ®µä¸”ä¸å…è®¸NULL = 10 * ( character setï¼šutf8=3,gbk=2,latin1=1)</span><br></pre></td></tr></table></figure>
<h5 id="ref">6ï¼‰ref</h5>
<p>â€‹ å½“ä½¿ç”¨ç´¢å¼•åˆ—ç­‰å€¼æŸ¥è¯¢çš„æ—¶å€™ï¼Œä¸ç´¢å¼•åˆ—è¿›è¡Œç­‰å€¼åŒ¹é…çš„å¯¹è±¡ä¿¡æ¯ã€‚</p>
<h5 id="rows">7ï¼‰rows</h5>
<p>â€‹ é¢„ä¼°çš„éœ€è¦è¯»å–çš„è®°å½•æ¡æ•°</p>
<h5 id="filtered">8ï¼‰filtered</h5>
<p>â€‹
æŸä¸ªè¡¨ç»è¿‡æœç´¢æ¡ä»¶è¿‡æ»¤åï¼Œå‰©ä½™è®°å½•æ¡æ•°çš„ç™¾åˆ†æ¯”ã€‚å¯¹äºå•è¡¨æŸ¥è¯¢æ²¡æœ‰ä»€ä¹ˆå¤§çš„æ„ä¹‰ã€‚</p>
<ul>
<li>Case1:ä»£è¡¨ï¼Œå•è¡¨æŸ¥è¯¢æ—¶ï¼Œç»è¿‡key1 &gt; 'z' å’Œ common_filed='a'
æ¡ä»¶ç­›é€‰åï¼Œè¿˜å‰©ä¸‹çš„è®°å½•æ˜¯10%</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 WHERE key1 &gt; &#x27;z&#x27; AND common_field = &#x27;a&#x27;;</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221030202016814.png" /></p>
<ul>
<li>Case2:è¿è¡¨æŸ¥è¯¢æ—¶ï¼Œs1é©±åŠ¨è¡¨ï¼Œs2è¢«é©±åŠ¨è¡¨,æ­¤æ—¶filteredçš„å€¼å†³å®šäº†è¢«é©±åŠ¨è¡¨s2éœ€è¦æ‰§è¡Œçš„æ¬¡æ•°ï¼Œå³rows*filteredã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN SELECT * FROM s1 INNER JOIN s2 ON s1.key1 = s2.key1 WHERE s1.common_field = &#x27;a&#x27;;</span><br></pre></td></tr></table></figure>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/image-20221030202138448.png" /></p>
<h5 id="extra">9ï¼‰ Extra</h5>
<p>â€‹ æ›´å‡†ç¡®çš„ç†è§£MySQLåˆ°åº•å°†å¦‚ä½•æ‰§è¡Œç»™å®šçš„æŸ¥è¯¢è¯­å¥</p>
<h5 id="å°ç»“">10ï¼‰å°ç»“ï¼š</h5>
<ul>
<li>EXPLAINä¸è€ƒè™‘å„ç§Cache</li>
<li>EXPLAINä¸èƒ½æ˜¾ç¤ºMySQLåœ¨æ‰§è¡ŒæŸ¥è¯¢æ—¶æ‰€ä½œçš„ä¼˜åŒ–å·¥ä½œ</li>
<li>EXPLAINä¸ä¼šå‘Šè¯‰ä½ å…³äºè§¦å‘å™¨ã€å­˜å‚¨è¿‡ç¨‹çš„ä¿¡æ¯æˆ–ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°å¯¹æŸ¥è¯¢çš„å½±å“æƒ…å†µ</li>
<li>éƒ¨åˆ†ç»Ÿè®¡ä¿¡æ¯æ˜¯ä¼°ç®—çš„ï¼Œå¹¶éç²¾ç¡®å€¼</li>
</ul>
<h4 id="explainè¯­å¥çš„è¾“å‡ºæ ¼å¼">4ã€EXPLAINè¯­å¥çš„è¾“å‡ºæ ¼å¼</h4>
<h5 id="ä¼ ç»Ÿæ ¼å¼è¡¨æ ¼å½¢å¼">1ï¼‰ä¼ ç»Ÿæ ¼å¼ï¼Œè¡¨æ ¼å½¢å¼</h5>
<p>â€‹ å³ä¸Šè¿°å†…å®¹</p>
<h5 id="jsonæ ¼å¼ä¼šæ˜¾ç¤ºæˆæœ¬">2ï¼‰JSONæ ¼å¼ï¼Œä¼šæ˜¾ç¤ºæˆæœ¬</h5>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">EXPLAIN FORMAT=JSON SELECT ....</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;query_block&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;select_id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;cost_info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;query_cost&quot;</span><span class="punctuation">:</span> <span class="string">&quot;4445.50&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;nested_loop&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;table&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;table_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;s1&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;access_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ALL&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;possible_keys&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;idx_key1&quot;</span></span><br><span class="line">          <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;rows_examined_per_scan&quot;</span><span class="punctuation">:</span> <span class="number">9825</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;rows_produced_per_join&quot;</span><span class="punctuation">:</span> <span class="number">9825</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;filtered&quot;</span><span class="punctuation">:</span> <span class="string">&quot;100.00&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;cost_info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;read_cost&quot;</span><span class="punctuation">:</span> <span class="string">&quot;24.25&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;eval_cost&quot;</span><span class="punctuation">:</span> <span class="string">&quot;982.50&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;prefix_cost&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1006.75&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;data_read_per_join&quot;</span><span class="punctuation">:</span> <span class="string">&quot;17M&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;used_columns&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;id&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;key1&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;key2&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;key3&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;key_part1&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;key_part2&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;key_part3&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;common_field&quot;</span></span><br><span class="line">          <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;attached_condition&quot;</span><span class="punctuation">:</span> <span class="string">&quot;(`experiment`.`s1`.`key1` is not null)&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;table&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;table_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;s2&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;access_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eq_ref&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;possible_keys&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;idx_key2&quot;</span></span><br><span class="line">          <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;idx_key2&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;used_key_parts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;key2&quot;</span></span><br><span class="line">          <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;key_length&quot;</span><span class="punctuation">:</span> <span class="string">&quot;5&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;ref&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;experiment.s1.key1&quot;</span></span><br><span class="line">          <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;rows_examined_per_scan&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;rows_produced_per_join&quot;</span><span class="punctuation">:</span> <span class="number">9825</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;filtered&quot;</span><span class="punctuation">:</span> <span class="string">&quot;100.00&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;index_condition&quot;</span><span class="punctuation">:</span> <span class="string">&quot;(cast(`experiment`.`s1`.`key1` as double) = cast(`experiment`.`s2`.`key2` as double))&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;cost_info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;read_cost&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2456.25&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;eval_cost&quot;</span><span class="punctuation">:</span> <span class="string">&quot;982.50&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;prefix_cost&quot;</span><span class="punctuation">:</span> <span class="string">&quot;4445.50&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;data_read_per_join&quot;</span><span class="punctuation">:</span> <span class="string">&quot;17M&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;used_columns&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;id&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;key1&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;key2&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;key3&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;key_part1&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;key_part2&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;key_part3&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;common_field&quot;</span></span><br><span class="line">          <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><p>ç”±äº s2 è¡¨æ˜¯è¢«é©±åŠ¨è¡¨ï¼Œæ‰€ä»¥å¯èƒ½è¢«è¯»å–å¤šæ¬¡ï¼Œè¿™é‡Œçš„ read_cost å’Œ
eval_cost æ˜¯è®¿é—®å¤šæ¬¡ s2 è¡¨åç´¯</p>
<p>åŠ èµ·æ¥çš„å€¼ï¼Œå¤§å®¶ä¸»è¦å…³æ³¨é‡Œè¾¹å„¿çš„ prefix_cost
çš„å€¼ä»£è¡¨çš„æ˜¯æ•´ä¸ªè¿æ¥æŸ¥è¯¢é¢„è®¡çš„æˆæœ¬ï¼Œä¹Ÿå°±æ˜¯å•</p>
<p>æ¬¡æŸ¥è¯¢ s1 è¡¨å’Œå¤šæ¬¡æŸ¥è¯¢ s2 è¡¨åçš„æˆæœ¬çš„å’Œ.</p></li>
<li><p>read_cost</p>
<ul>
<li>IO æˆæœ¬</li>
<li>æ£€æµ‹ rows Ã— (1 - filter) æ¡è®°å½•çš„ CPU æˆæœ¬</li>
</ul></li>
<li><p>eval_cost</p>
<ul>
<li>æ£€æµ‹rows Ã— filter æ¡è®°å½•çš„æˆæœ¬</li>
</ul></li>
<li><p>prefix_cost</p>
<ul>
<li>å•ç‹¬æŸ¥è¯¢s1è¡¨çš„æˆæœ¬</li>
</ul></li>
<li><p>data_read_per_join</p>
<ul>
<li>åœ¨æ­¤æ¬¡æŸ¥è¯¢ä¸­éœ€è¦è¯»å–çš„æ•°æ®é‡</li>
</ul></li>
</ul>
<h5 id="treeå½¢å¼">3ï¼‰TREEå½¢å¼</h5>
<h5 id="å¯è§†åŒ–å½¢å¼">4ï¼‰å¯è§†åŒ–å½¢å¼</h5>
<h4
id="åˆ†æä¼˜åŒ–å™¨æ‰§è¡Œè®¡åˆ’traceå·¥å…·">5ã€åˆ†æä¼˜åŒ–å™¨æ‰§è¡Œè®¡åˆ’ï¼štraceå·¥å…·</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SET optimizer_trace=&quot;enabled=on&quot;,end_markers_in_json=on;</span><br><span class="line">SET optimizer_trace_max_mem_size=1000000;</span><br></pre></td></tr></table></figure>
<p>å¼€å¯ä»¥åå¯ä»¥åˆ†æå¸¸è§çš„è®¸å¤šSQLè¯­å¥,é€šè¿‡å¦‚ä¸‹è¯­å¥è¿›è¡ŒæŸ¥è¯¢</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select * from information_schema.optimizer_trace\G</span><br></pre></td></tr></table></figure>
<h4 id="mysqlç›‘æ§åˆ†æè§†å›¾-sys-schema">6ã€MySQLç›‘æ§åˆ†æè§†å›¾-sys
schema</h4>
<p>â€‹
å…³äºMySQLçš„æ€§èƒ½ç›‘æ§å’Œé—®é¢˜è¯Šæ–­ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä»performance_schemaä¸­å»è·å–æƒ³è¦çš„æ•°æ®ï¼Œåœ¨MySQL5.7.7ç‰ˆæœ¬ä¸­æ–°å¢sys
schemaï¼Œå®ƒå°†prformance_schemaå’Œinformation_schemaä¸­çš„æ•°æ®ä»¥æ›´å®¹æ˜“ç†è§£çš„æ–¹å¼æ€»ç»“å½’çº³ä¸ºâ€è§†å›¾â€ï¼Œå…¶ç›®çš„å°±æ˜¯ä¸ºäº†é™ä½æŸ¥è¯¢performance_schemaçš„å¤æ‚åº¦ï¼Œè®©DBAèƒ½å¤Ÿå¿«é€Ÿçš„å®šä½é—®é¢˜ã€‚</p>
<p>â€‹
ä¸‹é¢çœ‹çœ‹è¿™äº›åº“ä¸­éƒ½æœ‰å“ªäº›ç›‘æ§è¡¨å’Œè§†å›¾ï¼ŒæŒæ¡äº†è¿™äº›ï¼Œåœ¨æˆ‘ä»¬å¼€å‘å’Œè¿ç»´çš„è¿‡ç¨‹ä¸­å°±èµ·åˆ°äº†äº‹åŠåŠŸå€çš„æ•ˆæœã€‚</p>
<ul>
<li>ç´¢å¼•ç›¸å…³</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#1. æŸ¥è¯¢å†—ä½™ç´¢å¼•</span><br><span class="line">select * from sys.schema_redundant_indexes;</span><br><span class="line">#2. æŸ¥è¯¢æœªä½¿ç”¨è¿‡çš„ç´¢å¼•</span><br><span class="line">select * from sys.schema_unused_indexes;</span><br><span class="line">#3. æŸ¥è¯¢ç´¢å¼•çš„ä½¿ç”¨æƒ…å†µ</span><br><span class="line">select index_name,rows_selected,rows_inserted,rows_updated,rows_deleted</span><br><span class="line">from sys.schema_index_statistics where table_schema=&#x27;dbname&#x27; ;</span><br></pre></td></tr></table></figure>
<ul>
<li>è¡¨ç›¸å…³</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 1. æŸ¥è¯¢è¡¨çš„è®¿é—®é‡</span><br><span class="line">select table_schema,table_name,sum(io_read_requests+io_write_requests) as io from</span><br><span class="line">sys.schema_table_statistics group by table_schema,table_name order by io desc;</span><br><span class="line"># 2. æŸ¥è¯¢å ç”¨bufferpoolè¾ƒå¤šçš„è¡¨</span><br><span class="line">select object_schema,object_name,allocated,data</span><br><span class="line">from sys.innodb_buffer_stats_by_table order by allocated limit 10;</span><br><span class="line"># 3. æŸ¥çœ‹è¡¨çš„å…¨è¡¨æ‰«ææƒ…å†µ</span><br><span class="line">select * from sys.statements_with_full_table_scans where db=&#x27;dbname&#x27;;</span><br></pre></td></tr></table></figure>
<ul>
<li>è¯­å¥ç›¸å…³</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#1. ç›‘æ§SQLæ‰§è¡Œçš„é¢‘ç‡</span><br><span class="line">select db,exec_count,query from sys.statement_analysis</span><br><span class="line">order by exec_count desc;</span><br><span class="line">#2. ç›‘æ§ä½¿ç”¨äº†æ’åºçš„SQL</span><br><span class="line">select db,exec_count,first_seen,last_seen,query</span><br><span class="line">from sys.statements_with_sorting limit 1;</span><br><span class="line">#3. ç›‘æ§ä½¿ç”¨äº†ä¸´æ—¶è¡¨æˆ–è€…ç£ç›˜ä¸´æ—¶è¡¨çš„SQL</span><br><span class="line">select db,exec_count,tmp_tables,tmp_disk_tables,query</span><br><span class="line">from sys.statement_analysis where tmp_tables&gt;0 or tmp_disk_tables &gt;0</span><br><span class="line">order by (tmp_tables+tmp_disk_tables) desc;</span><br></pre></td></tr></table></figure>
<ul>
<li>IOç›¸å…³</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#1. æŸ¥çœ‹æ¶ˆè€—ç£ç›˜IOçš„æ–‡ä»¶</span><br><span class="line">select file,avg_read,avg_write,avg_read+avg_write as avg_io</span><br><span class="line">from sys.io_global_by_file_by_bytes order by avg_read limit 10;</span><br></pre></td></tr></table></figure>
<ul>
<li>Innodbç›¸å…³</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#1. è¡Œé”é˜»å¡æƒ…å†µ</span><br><span class="line">select * from sys.innodb_lock_waits;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>æ•°æ®åº“ç²¾ç®€ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç½‘å¾®è¯¾å ‚Chap3â€”â€”æ•°æ®é“¾è·¯å±‚åŸç†</title>
    <url>/2022/05/12/feb80abbdc95/</url>
    <content><![CDATA[<p>è§†é¢‘åœ°å€ï¼šhttps://www.bilibili.com/video/BV1c4411d7jb?p=21</p>
<h4 id="ä¸€æ•°æ®é“¾è·¯å±‚æ¦‚è¿°">ä¸€ã€æ•°æ®é“¾è·¯å±‚æ¦‚è¿°:</h4>
<p><strong>é“¾è·¯</strong>ï¼š
ä»ä¸€ä¸ªç»“ç‚¹åˆ°ç›¸é‚»èŠ‚ç‚¹çš„ä¸€æ®µç‰©ç†çº¿è·¯ï¼Œè€Œä¸­é—´æ²¡æœ‰ä»»ä½•å…¶ä»–çš„äº¤æ¢èŠ‚ç‚¹</p>
<h5
id="ç‚¹å¯¹ç‚¹ä¿¡é“æ•°æ®é“¾è·¯å±‚ä¸­çš„ä¸‰ä¸ªé‡è¦é—®é¢˜">1ã€ç‚¹å¯¹ç‚¹ä¿¡é“æ•°æ®é“¾è·¯å±‚ä¸­çš„<strong>ä¸‰ä¸ªé‡è¦é—®é¢˜</strong>ï¼š</h5>
<ul>
<li>å°è£…æˆå¸§
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220518094607556.png" /></li>
</ul></li>
<li>å·®é”™æ£€æµ‹
<ul>
<li>å¸§åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°å†²çªï¼Œå¯¼è‡´è¯¯ç ã€‚</li>
<li>æ¥æ”¶ç«¯ä¸»æœºé€šè¿‡<strong>æ£€é”™ç </strong>æ¥åˆ¤åˆ«å¸§åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦æœ‰è¯¯ç </li>
</ul></li>
<li>å¯é ä¼ è¾“
<ul>
<li>æ•°æ®é“¾è·¯å±‚å‘ä¸Šå±‚æä¾›å¯é ä¼ è¾“æœåŠ¡ï¼Œå¦‚æœå¸§å‡ºé”™äº†éœ€è¦ä¸¢å¼ƒï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€ç§æœºåˆ¶æ¥ä¿è¯æ¥æ”¶æ–¹çš„ä¸»æœºä»ç„¶èƒ½å¤Ÿæ”¶åˆ°ä¸¢å¼ƒäº†å¸§çš„å‰¯æœ¬ã€‚</li>
</ul></li>
</ul>
<h5
id="å…±äº«å¼å±€åŸŸç½‘ä½¿ç”¨å¹¿æ’­ä¿¡å·çš„æ•°æ®é“¾è·¯å±‚">2ã€å…±äº«å¼å±€åŸŸç½‘(ä½¿ç”¨å¹¿æ’­ä¿¡å·çš„æ•°æ®é“¾è·¯å±‚)</h5>
<ul>
<li>CSMA/CD</li>
</ul>
<h5 id="äº¤æ¢å¼å±€åŸŸç½‘">3ã€äº¤æ¢å¼å±€åŸŸç½‘</h5>
<ul>
<li>äº¤æ¢æœºå¦‚ä½•è½¬å‘å¸§ï¼Ÿç½‘æ¡¥å’Œäº¤æ¢æœºçš„å·¥ä½œåŸç†</li>
<li>é›†çº¿å™¨ä¸äº¤æ¢æœºçš„åŒºåˆ«</li>
</ul>
<h5 id="æ— çº¿å±€åŸŸç½‘">4ã€æ— çº¿å±€åŸŸç½‘</h5>
<ul>
<li>CSMA/CA</li>
</ul>
<h4 id="äºŒå°è£…æˆå¸§">äºŒã€å°è£…æˆå¸§ï¼š</h4>
<ul>
<li><strong>å¸§å®šç•Œ</strong>ï¼šå¸§å¤´å’Œå¸§å°¾çš„ä½œç”¨ä¹‹ä¸€å°±æ˜¯å¸§å®šç•Œï¼Œæ¥æ”¶æ–¹çš„æ•°æ®é“¾è·¯å±‚å¯ä»¥é€šè¿‡å¸§å®šç•Œæ ‡å¿—å°†ç‰©ç†å±‚äº¤ä»˜çš„æ¯”ç‰¹æµå˜æˆå¸§ã€‚ä½†å¹¶ä¸æ˜¯æ‰€æœ‰æ•°æ®é“¾è·¯å±‚å¸§æ ¼å¼éƒ½æœ‰å¸§å®šç•Œæ ‡å¿—ã€‚</li>
<li>ä»¥å¤ªç½‘MACå¸§ï¼š
<ul>
<li>æ²¡æœ‰å¸§å®šç•Œæ ‡è¯†ç¬¦ï¼Œå…¶äº¤ä»˜ç»™ç‰©ç†å±‚åä¼šåŠ ä¸Šå‰å¯¼ç ï¼Œå¹¶ä¸”è§„å®šäº†å¸§é—´ä¼ è¾“é—´éš”æ—¶é—´ä¸º96æ¯”ç‰¹æ—¶é—´</li>
</ul></li>
<li><strong>é€æ˜ä¼ è¾“ï¼š</strong>æŒ‡æ•°æ®é“¾è·¯å±‚å¯¹ä¸Šå±‚äº¤ä»˜çš„ä¼ è¾“æ•°æ®æ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œå°±å¥½åƒæ•°æ®é“¾è·¯å±‚ä¸å­˜åœ¨ä¸€æ ·ã€‚<strong>æ³¨æ„</strong>ï¼šæ²¡æœ‰é™åˆ¶æŒ‡å¯¹ä¸Šå±‚äº¤ä»˜çš„æ•°æ®æ²¡æœ‰ä»»ä½•è¦æ±‚ï¼Œæ¯”å¦‚è¯´ä¸èƒ½åŒ…å«æŸäº›å­—ç¬¦
<ul>
<li>é¢å‘å­—èŠ‚çš„ç‰©ç†é“¾è·¯ä½¿ç”¨å­—èŠ‚å¡«å……ï¼ˆæˆ–ç§°å­—ç¬¦å¡«å……ï¼‰çš„æ–¹æ³•å®ç°é€æ˜ä¼ è¾“ã€‚ã€æ·»åŠ è½¬ä¹‰ç¬¦å·ã€‘</li>
<li>é¢å‘æ¯”ç‰¹çš„ç‰©ç†é“¾è·¯ä½¿ç”¨æ¯”ç‰¹å¡«å……çš„æ–¹æ³•å®ç°é€æ˜ä¼ è¾“ã€‚ã€é›¶æ¯”ç‰¹å¡«å……æ³•ã€‘</li>
</ul></li>
<li>è€ƒè™‘åˆ°å·®é”™æ§åˆ¶ç­‰å¤šç§å› ç´ ï¼Œæ¯ä¸€ç§æ•°æ®é“¾è·¯å±‚åè®®éƒ½è§„å®šäº†å¸§çš„æ•°æ®éƒ¨åˆ†çš„é•¿åº¦ä¸Šé™ï¼Œå³æœ€å¤§ä¼ é€å•å…ƒMTUï¼ˆMaximum
Transfer Unitï¼‰ã€‚</li>
</ul>
<h4 id="ä¸‰å·®é”™æ£€æµ‹">ä¸‰ã€å·®é”™æ£€æµ‹ï¼š</h4>
<ul>
<li><p><strong>å¥‡å¶æ ¡éªŒ</strong>ï¼šåœ¨å¾…å‘é€çš„æ•°æ®åé¢æ·»åŠ 1ä½å¥‡å¶æ ¡éªŒä½ï¼Œä½¿å¾—æ•´ä¸ªæ•°æ®ä¸­çš„1ä¸ªæ•°ä¸ºå¥‡æ•°æˆ–å¶æ•°</p>
<ul>
<li>å¦‚æœå¶æ•°ä¸ªä½å‘ç”Ÿè¯¯ç ï¼Œæ— æ³•æ£€æµ‹å‡ºï¼Œè¯¯ç ç‡è¾ƒé«˜</li>
</ul></li>
<li><p><strong>å¾ªç¯å†—ä½™æ ¡éªŒCRC</strong>ï¼šï¼ˆå¹¿æ³›åº”ç”¨ï¼‰æ”¶å‘åŒæ–¹çº¦å®šå¥½ä¸€ä¸ªç”Ÿæˆå¤šé¡¹å¼G(x)ï¼Œå‘é€æ–¹åŸºäºå¾…å‘é€çš„æ•°æ®å’Œç”Ÿæˆå¤šé¡¹å¼è®¡ç®—å‡ºå·®é”™æ£€æµ‹ç ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°ä¼ è¾“æ•°æ®çš„åé¢è¿›è¡Œä¼ è¾“ã€‚</p>
<p><img src="C:\Users\14012\AppData\Roaming\Typora\typora-user-images\image-20220518155614124.png" style="zoom:50%;" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220518155639797.png" /></p>
<p>ç¤ºä¾‹ï¼šå¾…å‘é€ä¿¡æ¯ä¸º101001ï¼Œç”Ÿæˆå¤šé¡¹å¼ä¸º<span
class="math inline">\(G(x) =x^3 + x^2 + 1\)</span>,æ±‚ä½™æ•°</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220518155840739.png" style="zoom:50%;" /></p></li>
<li><p><strong>æ³¨æ„</strong>ï¼šæ£€é”™ç åªèƒ½æ£€é”™ï¼Œè€Œä¸èƒ½çº é”™ã€‚åœ¨è®¡ç®—æœºç½‘ç»œä¸­é€šå¸¸é‡‡ç”¨æ£€é”™é‡ä¼ æ–¹å¼æ¥çº æ­£ä¼ è¾“ä¸­çš„å·®é”™ï¼Œæˆ–è€…ä»…ä»…æ˜¯ä¸¢å¼ƒæ£€æµ‹åˆ°å·®é”™çš„å¸§ï¼Œ<strong>è¿™å–å†³äºæ•°æ®é“¾è·¯å±‚å‘å…¶ä¸Šå±‚æä¾›çš„æ˜¯å¯é ä¼ è¾“æœåŠ¡è¿˜æ˜¯ä¸å¯é ä¼ è¾“æœåŠ¡ã€‚</strong></p></li>
</ul>
<h4 id="å››å¯é ä¼ è¾“çš„åŸºæœ¬æ¦‚å¿µ">å››ã€å¯é ä¼ è¾“çš„åŸºæœ¬æ¦‚å¿µï¼š</h4>
<ul>
<li><p>è‹¥æ•°æ®é“¾è·¯å±‚å‘ä¸Šå±‚æä¾›ä¸å¯é ä¼ è¾“æœåŠ¡ï¼šä»…ä»…ä¸¢å¼ƒæœ‰è¯¯ç çš„å¸§</p></li>
<li><p>è‹¥æ•°æ®é“¾è·¯å±‚å‘ä¸Šå±‚æä¾›å¯é ä¼ è¾“æœåŠ¡ï¼šæƒ³åŠæ³•å®ç°å‘é€ç«¯å‘é€ä»€ä¹ˆï¼Œæ¥æ”¶ç«¯å°±æ”¶åˆ°ç¥æ¶é­”</p></li>
</ul>
<p>â€‹
<strong>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæœ‰çº¿é“¾è·¯çš„è¯¯ç ç‡æ¯”è¾ƒä½ï¼Œä¸ºäº†å‡å°å¼€é”€ï¼Œå¹¶ä¸è¦æ±‚æ•°æ®é“¾è·¯å±‚å‘ä¸Šæä¾›å¯é ä¼ è¾“æœåŠ¡ã€‚å³ä½¿å‡ºç°äº†è¯¯ç ï¼Œå¯é ä¼ è¾“çš„é—®é¢˜ç”±å…¶ä¸Šå±‚å¤„ç†ã€‚</strong></p>
<p>â€‹
<strong>æ— çº¿é“¾è·¯æ˜“å—å¹²æ‰°ï¼Œè¯¯ç ç‡æ¯”è¾ƒé«˜ï¼Œå› æ­¤è¦æ±‚æ•°æ®é“¾è·¯å±‚å¿…é¡»å‘ä¸Šå±‚æä¾›å¯é ä¼ è¾“æœåŠ¡ã€‚</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220518160641668.png" /></p>
<h4
id="äº”å¯é ä¼ è¾“çš„å®ç°æœºåˆ¶1åœæ­¢ç­‰å¾…åè®®stop-wait">äº”ã€å¯é ä¼ è¾“çš„å®ç°æœºåˆ¶1â€”â€”åœæ­¢ç­‰å¾…åè®®Stop
Waitï¼š</h4>
<h5 id="åŸºæœ¬æœºåˆ¶">1ã€åŸºæœ¬æœºåˆ¶ï¼š</h5>
<p>â€‹
æ­¤å¤„æåŠçš„å®ç°æœºåˆ¶ä¸å…­ä¸ƒç§çš„å®ç°æœºåˆ¶å¹¶ä¸å±€é™äºæ•°æ®é“¾è·¯å±‚ï¼Œå¯ä»¥åº”ç”¨åˆ°è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„çš„ä»»æ„ä¸€å±‚ã€‚</p>
<ul>
<li>Case1ï¼šé’ˆå¯¹ä¼ è¾“é”™è¯¯çš„æƒ…å†µï¼Œé€šè¿‡ACKå’ŒNAKæ¥å‘ŠçŸ¥å‘é€æ–¹æ˜¯å¦ä¼ è¾“æ­£ç¡®ã€‚</li>
<li>Case2ï¼šé’ˆå¯¹å‘é€æ–¹æ•°æ®ä¸¢å¤±çš„æƒ…å†µï¼Œå‘é€æ–¹éœ€è¦ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå¦‚æœä¸€å®šæ—¶é—´å†…æ¥æ”¶ä¸åˆ°ç¡®è®¤å¸§åˆ™éœ€è¦é‡ä¼ ä¸Šä¸€ä¸ªæ•°æ®åŒ…ã€‚</li>
<li>Case3ï¼šé’ˆå¯¹æ¥æ”¶æ–¹è¿”å›çš„ç¡®è®¤å¸§ä¸¢å¤±çš„æƒ…å†µï¼šå‘é€æ–¹ä¼šé‡ä¼ æ•°æ®åŒ…ï¼Œæ¥æ”¶æ–¹å¦‚ä½•ç¡®è®¤ä¸æ˜¯é‡å¤æ•°æ®åŒ…å‘¢ï¼Ÿé€šè¿‡å•ä¸ªæ¯”ç‰¹æ¥ç¼–ç æ•°æ®åŒ…0æˆ–1ï¼Œç»™æ•°æ®åˆ†ç»„ç¼–å·</li>
<li>Case4ï¼šé’ˆå¯¹æ¥æ”¶æ–¹è¿”å›çš„ç¡®è®¤å¸§é‡å¤çš„æƒ…å†µï¼šç»™ç¡®è®¤å¸§åŠ ä¸Šç¼–å·ï¼Œä½¿ç”¨æ¯”ç‰¹0æˆ–1æ¥æ ‡è¯†ã€‚</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220518163736899.png" /></p>
<p>â€‹
æ¥æ”¶ç«¯æ£€æµ‹åˆ°æ•°æ®åˆ†ç»„æœ‰è¯¯ç æ—¶ï¼Œå°†å…¶ä¸¢å¼ƒå¹¶ç­‰å¾…å‘é€æ–¹çš„è¶…æ—¶é‡ä¼ ã€‚ä½†å¯¹äºè¯¯ç ç‡è¾ƒé«˜çš„ç‚¹å¯¹ç‚¹é“¾è·¯ï¼Œä¸ºä½¿å‘é€æ–¹å°½æ—©é‡ä¼ ï¼Œä¹Ÿå¯ç»™å‘é€æ–¹å‘é€NAKåˆ†ç»„ã€‚</p>
<p>â€‹
ä¸ºäº†è®©æ¥æ”¶æ–¹èƒ½å¤Ÿåˆ¤æ–­æ‰€æ”¶åˆ°çš„æ•°æ®åˆ†ç»„æ˜¯å¦æ˜¯é‡å¤çš„ï¼Œéœ€è¦ç»™æ•°æ®åˆ†ç»„ç¼–å·ã€‚ç”±äºåœæ­¢-ç­‰å¾…åè®®çš„åœç­‰ç‰¹æ€§ï¼Œåªéœ€1ä¸ªæ¯”ç‰¹ç¼–å·å°±å¤Ÿäº†ï¼Œå³ç¼–å·0å’Œ1ã€‚</p>
<p>â€‹
ä¸ºäº†è®©å‘é€æ–¹èƒ½å¤Ÿåˆ¤æ–­æ‰€æ”¶åˆ°çš„ACKåˆ†ç»„æ˜¯å¦æ˜¯é‡å¤çš„ï¼Œéœ€è¦ç»™ACKåˆ†ç»„ç¼–å·ï¼Œæ‰€ç”¨æ¯”ç‰¹æ•°é‡ä¸æ•°æ®åˆ†ç»„ç¼–å·æ‰€ç”¨æ¯”ç‰¹æ•°é‡ä¸€æ ·ã€‚<strong>æ•°æ®é“¾è·¯å±‚ä¸€èˆ¬ä¸ä¼šå‡ºç°ACKåˆ†ç»„è¿Ÿåˆ°çš„æƒ…å†µï¼Œå› æ­¤åœ¨æ•°æ®é“¾è·¯å±‚å®ç°åœæ­¢-ç­‰å¾…åè®®å¯ä»¥ä¸ç”¨ç»™ACKåˆ†ç»„ç¼–å·ã€‚</strong></p>
<ul>
<li>è¶…æ—¶è®¡æ—¶å™¨è®¾ç½®çš„é‡ä¼ æ—¶é—´åº”ä»”ç»†é€‰æ‹©ã€‚ä¸€èˆ¬å¯å°†é‡ä¼ æ—¶é—´é€‰ä¸ºç•¥å¤§äºâ€œä»å‘é€æ–¹åˆ°æ¥æ”¶æ–¹çš„å¹³å‡å¾€è¿”æ—¶é—´"ã€‚
<ul>
<li>åœ¨æ•°æ®é“¾è·¯å±‚ç‚¹å¯¹ç‚¹çš„å¾€è¿”æ—¶é—´æ¯”è¾ƒç¡®å®šï¼Œé‡ä¼ æ—¶é—´æ¯”è¾ƒå¥½è®¾å®šã€‚</li>
<li>ç„¶è€Œåœ¨è¿è¾“å±‚ï¼Œç”±äºç«¯åˆ°ç«¯å¾€è¿”æ—¶é—´éå¸¸ä¸ç¡®å®šï¼Œè®¾ç½®åˆé€‚çš„é‡ä¼ æ—¶é—´æœ‰æ—¶å¹¶ä¸å®¹æ˜“ã€‚</li>
</ul></li>
</ul>
<h5 id="ä¿¡é“åˆ©ç”¨ç‡">2ã€ä¿¡é“åˆ©ç”¨ç‡ï¼š</h5>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220518172223346.png" /></p>
<p>â€‹
å½“å¾€è¿”æ—¶å»¶RTTè¿œå¤§äºæ•°æ®å¸§å‘é€æ—¶å»¶æ—¶ï¼ˆæ¯”å¦‚ä½¿ç”¨å«æ˜Ÿé“¾è·¯ï¼‰ï¼Œä¼šå¯¼è‡´ä¿¡é“åˆ©ç”¨ç‡éå¸¸ä½</p>
<h4
id="å…­å¯é ä¼ è¾“çš„å®ç°æœºåˆ¶2å›é€€nå¸§åè®®">å…­ã€å¯é ä¼ è¾“çš„å®ç°æœºåˆ¶2â€”â€”å›é€€Nå¸§åè®®ï¼š</h4>
<p>â€‹
åœç­‰å¼åè®®ä¿¡é“åˆ©ç”¨ç‡ååˆ†ä½ï¼Œä¸ºæé«˜ä¿¡é“åˆ©ç”¨ç‡ï¼Œå¯ä»¥ä½¿ç”¨æµæ°´çº¿å‘é€æ•°æ®çš„å½¢å¼.åœ¨æ­¤åŸºç¡€ä¸Šé€šè¿‡å‘é€çª—å£æ¥é™åˆ¶å‘é€æ¥æ”¶å³ä¸ºå›é€€Nå¸§åè®®.</p>
<p>é¦–å…ˆ,å‡è®¾å¦‚ä¸‹ï¼š</p>
<ul>
<li>é‡‡ç”¨3ä¸ªæ¯”ç‰¹ç»™åˆ†ç»„éåºå·ï¼Œåºå·ä¸º0-7</li>
<li>å‘é€çª—å£çš„å°ºå¯¸ä¸º<span
class="math inline">\(W_T\)</span>ï¼Œå–å€¼èŒƒå›´åº”ä¸º<span
class="math inline">\(1 è‡³ 2^3-1\)</span>æœ¬ä¾‹å–5</li>
<li>æ¥æ”¶çª—å£çš„å°ºå¯¸ä¸º<span class="math inline">\(W_R = 1\)</span></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220518215743424.png" /></p>
<p>æ¥æ”¶åˆ°ç¡®è®¤åˆ†ç»„åï¼Œå‘é€æ–¹å‘é€çª—å£å‘åæ»‘åŠ¨</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220518220042728.png" style="zoom:50%;" /></p>
<p><strong>ç´¯ç§¯ç¡®è®¤</strong>ï¼š<strong>æ¥æ”¶æ–¹ä¸ä¸€å®šè¦å¯¹æ”¶åˆ°çš„æ•°æ®åˆ†ç»„é€ä¸ªå‘é€ç¡®è®¤ï¼Œ</strong>è€Œæ˜¯å¯ä»¥åœ¨æ”¶åˆ°å‡ ä¸ªæ•°æ®åˆ†ç»„åï¼ˆç”±å…·ä½“å®ç°å†³å®šï¼‰ï¼Œå¯¹æŒ‰åºåˆ°è¾¾çš„æœ€åä¸€ä¸ªæ•°æ®åˆ†ç»„å‘é€ç¡®è®¤ã€‚<strong><span
class="math inline">\(ACK_n\)</span>è¡¨ç¤ºåºå·ä¸ºnåŠä»¥å‰çš„æ‰€æœ‰æ•°æ®åˆ†ç»„éƒ½å·²æ­£ç¡®æ¥æ”¶ã€‚</strong></p>
<p><strong>æœ‰å·®é”™æƒ…å†µ</strong>ï¼šå‡è®¾ç°åœ¨æ•°æ®åŒ…5ã€6ã€7ã€0ã€1è¢«å‘é€é€å¾€æ¥æ”¶æ–¹ï¼Œæ•°æ®åŒ…5äº§ç”Ÿè¯¯ç ï¼Œé‚£ä¹ˆæ•°æ®åŒ…5å°†è¢«ä¸¢å¼ƒï¼Œæ¥æ”¶çª—å£å¯¹åº”çš„åºå·ä¸º5ï¼Œæ•…æ•°æ®åŒ…6ã€7ã€0ã€1ä¹Ÿå› ä¸ºåºå·ä¸åŒ¹é…è€Œè¢«ä¸¢å¼ƒã€‚ç„¶åæ¥æ”¶æ–¹å›å‘å‘é€æ–¹å‘å›æœ€åä¸€ä¸ªç¡®è®¤çš„åºå·çš„ACKå¸§ï¼Œå³<span
class="math inline">\(ACK_4\)</span>ã€‚å‘é€æ–¹æ”¶åˆ°<span
class="math inline">\(ACK_4\)</span>åï¼Œæ”¶åˆ°é‡å¤çš„ç¡®è®¤ï¼Œå°±çŸ¥é“ä¹‹å‰æ‰€å‘é€çš„æ•°æ®åˆ†ç»„å‡ºç°äº†å·®é”™ï¼Œå°±å¯ä»¥å¼€å§‹é‡ä¼ ã€‚</p>
<p><strong>å½“é€šä¿¡çº¿è·¯è´¨é‡ä¸å¥½æ—¶ï¼Œå›é€€Nå¸§åè®®çš„ä¿¡é“åˆ©ç”¨ç‡å¹¶ä¸æ¯”åœæ­¢ï¼šç­‰å¾…åè®®é«˜ã€‚</strong></p>
<p><strong>å¦‚æœ<span
class="math inline">\(W_T\)</span>è¶…è¿‡å…¶å¤§å°ä¸Šé™ï¼Œå°±ä¼šå¯¼è‡´æ¥æ”¶æ–¹æ²¡æ³•åˆ†è¾¨æ–°ã€æ—§æ•°æ®åˆ†ç»„ã€‚</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220518220819263.png" /></p>
<h4
id="ä¸ƒå¯é ä¼ è¾“çš„å®ç°æœºåˆ¶3é€‰æ‹©é‡ä¼ åè®®">ä¸ƒã€å¯é ä¼ è¾“çš„å®ç°æœºåˆ¶3â€”â€”é€‰æ‹©é‡ä¼ åè®®ï¼š</h4>
<p>â€‹
å›é€€Nå¸§åè®®<strong>æ¥æ”¶çª—å£å°ºå¯¸</strong>åªèƒ½ä¸º1ï¼Œä¸€ä¸ªæ•°æ®åˆ†ç»„çš„è¯¯ç ä¼šå¯¼è‡´åç»­å¤šä¸ªåˆ†ç»„æ— æ³•æŒ‰åºæ¥æ”¶è€Œä¸¢å¼ƒã€‚</p>
<p>â€‹
ä¸ºäº†è¿›ä¸€æ­¥æé«˜æ€§èƒ½ï¼Œ<strong>å¯è®¾æ³•åªé‡ä¼ å‡ºç°è¯¯ç çš„æ•°æ®åˆ†ç»„ã€‚</strong>å› æ­¤ï¼Œæ¥æ”¶çª—å£çš„å°ºå¯¸Wï¼šä¸åº”å†äº1ï¼ˆè€Œåº”å¤§äº1ï¼‰ï¼Œä»¥ä¾¿æ¥æ”¶æ–¹å…ˆæ”¶ä¸‹å¤±åºåˆ°è¾¾ä½†æ— è¯¯ç å¹¶ä¸”åºå·è½åœ¨æ¥æ”¶çª—å£å†…çš„é‚£äº›æ•°æ®åˆ†ç»„ï¼Œç­‰åˆ°æ‰€ç¼ºåˆ†ç»„æ”¶é½åå†ä¸€å¹¶é€äº¤ä¸Šå±‚ã€‚è¿™å°±æ˜¯é€‰æ‹©é‡ä¼ åè®®ã€‚</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220704151242946.png"
alt="image-20220704151242946" />
<figcaption aria-hidden="true">image-20220704151242946</figcaption>
</figure>
<ul>
<li><p>å‘é€çª—å£ä¸æ¥æ”¶çª—å£çš„å°ºå¯¸é™åˆ¶ï¼š</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220704152510668.png"
alt="image-20220704152510668" />
<figcaption aria-hidden="true">image-20220704152510668</figcaption>
</figure></li>
<li><p>æ€»ç»“ï¼š</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220704154038765.png"
alt="image-20220704154038765" />
<figcaption aria-hidden="true">image-20220704154038765</figcaption>
</figure></li>
</ul>
<h4 id="å…«ç‚¹å¯¹ç‚¹åè®®ppp">å…«ã€ç‚¹å¯¹ç‚¹åè®®PPPï¼š</h4>
<p>â€‹ ç‚¹å¯¹ç‚¹åè®®PPPï¼ˆPoint-to-Point
Protocolï¼‰æ˜¯ç›®å‰ä½¿ç”¨æœ€å¹¿æ³›çš„ç‚¹å¯¹ç‚¹æ•°æ®é“¾è·¯å±‚åè®®ã€‚å¹¿æ³›åº”ç”¨äºå¹¿åŸŸç½‘è·¯ç”±å™¨ä¹‹é—´çš„äº¤æ¢ã€‚</p>
<p><strong>PPPåè®®ä¸ºåœ¨ç‚¹å¯¹ç‚¹é“¾è·¯ä¼ è¾“å„ç§åè®®æ•°æ®æŠ¥æä¾›äº†ä¸€ä¸ªæ ‡å‡†æ–¹æ³•ï¼Œä¸»è¦ç”±ä»¥ä¸‹ä¸‰éƒ¨åˆ†æ„æˆï¼š</strong></p>
<ul>
<li>å¯¹å„ç§åè®®æ•°æ®æŠ¥çš„å°è£…æ–¹æ³•</li>
<li>é“¾è·¯æ§åˆ¶åè®®LCPï¼šç”¨äºå»ºç«‹ã€é…ç½®ä»¥åŠæµ‹è¯•æ•°æ®é“¾è·¯çš„è¿æ¥</li>
<li>ä¸€å¥—ç½‘ç»œæ§åˆ¶åè®®NCPsï¼šå…¶ä¸­çš„æ¯ä¸€ä¸ªåè®®æ”¯æŒä¸åŒçš„ç½‘ç»œå±‚åè®®</li>
</ul>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220704170505457.png"
alt="image-20220704170505457" />
<figcaption aria-hidden="true">image-20220704170505457</figcaption>
</figure>
<p><strong>é€æ˜ä¼ è¾“</strong>ï¼šå–å†³äºä½¿ç”¨çš„æ•°æ®é“¾è·¯</p>
<p><strong>å·®é”™æ£€æµ‹</strong>ï¼šä½¿ç”¨CRCæ¥è®¡ç®—è¯¥å­—æ®µçš„å–å€¼</p>
<p>æ¥æ”¶æ–¹æ¯æ”¶åˆ°ä¸€ä¸ªPPPå¸§ï¼Œå°±è¿›è¡ŒCRCæ£€éªŒã€‚è‹¥CRCæ£€éªŒæ­£ç¡®ï¼Œå°±æ”¶ä¸‹è¿™ä¸ªå¸§ï¼›åä¹‹ï¼Œå°±ä¸¢å¼ƒè¿™ä¸ªå¸§ã€‚ä½¿ç”¨PPPçš„æ•°æ®é“¾è·¯å±‚å‘ä¸Šä¸æä¾›å¯é ä¼ è¾“æœåŠ¡ã€‚</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220704171056851.png"
alt="image-20220704171056851" />
<figcaption aria-hidden="true">image-20220704171056851</figcaption>
</figure>
<h4 id="ä¹åª’ä½“æ¥å…¥æ§åˆ¶">ä¹ã€åª’ä½“æ¥å…¥æ§åˆ¶ ï¼š</h4>
<p>â€‹
å…±äº«ä¿¡é“è¦ç€é‡è€ƒè™‘çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯<strong>å¦‚ä½•åè°ƒå¤šä¸ªå‘é€å’Œæ¥æ”¶ç«™ç‚¹å¯¹ä¸€ä¸ªå…±äº«ä¼ è¾“åª’ä½“çš„å ç”¨</strong>ï¼Œå³åª’ä½“æ¥å…¥æ§åˆ¶MACï¼ˆMedium
Access Controlï¼‰ã€‚</p>
<ul>
<li>é™æ€åˆ’åˆ†ä¿¡é“</li>
<li>åŠ¨æ€æ¥å…¥æ§åˆ¶-éšæœºæ¥å…¥</li>
</ul>
<p><strong>éšç€æŠ€æœ¯çš„å‘å±•ï¼Œäº¤æ¢æŠ€æœ¯çš„æˆç†Ÿå’Œæˆæœ¬çš„é™ä½ï¼Œå…·æœ‰æ›´é«˜æ€§èƒ½çš„ä½¿ç”¨ç‚¹å¯¹ç‚¹é“¾è·¯å’Œé“¾è·¯å±‚äº¤æ¢æœºçš„äº¤æ¢å¼å±€åŸŸç½‘åœ¨æœ‰çº¿é¢†åŸŸå·²å®Œå…¨å–ä»£äº†å…±äº«å¼å±€åŸŸç½‘ï¼Œä½†ç”±äºæ— çº¿ä¿¡é“çš„å¹¿æ’­å¤©æ€§ï¼Œæ— çº¿å±€åŸŸç½‘ä»ç„¶ä½¿ç”¨çš„æ˜¯å…±äº«åª’ä½“æŠ€æœ¯ã€‚</strong></p>
<h5 id="é™æ€åˆ’åˆ†ä¿¡é“">1ã€é™æ€åˆ’åˆ†ä¿¡é“ï¼š</h5>
<ul>
<li>é¢‘åˆ†å¤ç”¨ã€æ—¶åˆ†å¤ç”¨ã€æ³¢åˆ†å¤ç”¨ï¼ˆå…‰è½½æ³¢ï¼‰</li>
<li>ç åˆ†å¤ç”¨ï¼š</li>
</ul>
<p>â€‹
ä¸FDMå’ŒTDMä¸åŒï¼ŒCDMçš„æ¯ä¸€ä¸ªç”¨æˆ·å¯ä»¥åœ¨åŒæ ·çš„æ—¶é—´ä½¿ç”¨åŒæ ·çš„é¢‘å¸¦è¿›è¡Œé€šä¿¡ã€‚</p>
<p>â€‹
ç”±äºå„ç”¨æˆ·ä½¿ç”¨ç»è¿‡ç‰¹æ®ŠæŒ‘é€‰çš„ä¸åŒç å‹ï¼Œå› æ­¤å„ç”¨æˆ·ä¹‹é—´ä¸ä¼šé€ æˆå¹²æ‰°ã€‚</p>
<h5
id="åŠ¨æ€æ¥å…¥æ§åˆ¶csmacdåè®®-è½½æ³¢ç›‘å¬å¤šå€æ¥å…¥ç¢°æ’æ£€æµ‹æ—©æœŸæ€»çº¿å¼ä»¥å¤ªç½‘ä½¿ç”¨å¹¿æ’­ä¿¡é“çš„æœ‰çº¿å±€åŸŸç½‘é‡‡ç”¨çš„æœºåˆ¶">2ã€åŠ¨æ€æ¥å…¥æ§åˆ¶â€”â€”CSMA/CDåè®®
ï¼ˆè½½æ³¢ç›‘å¬å¤šå€æ¥å…¥/ç¢°æ’æ£€æµ‹ï¼‰æ—©æœŸæ€»çº¿å¼ä»¥å¤ªç½‘ï¼ˆä½¿ç”¨å¹¿æ’­ä¿¡é“çš„æœ‰çº¿å±€åŸŸç½‘ï¼‰é‡‡ç”¨çš„æœºåˆ¶</h5>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220709215138023.png" /></p>
<ul>
<li><strong>äº‰ç”¨æœŸçš„æ¦‚å¿µ</strong>ï¼š</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220709215431183.png" /></p>
<ul>
<li><strong>æœ€å°å¸§é•¿</strong>ï¼š</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220709215734966.png" /></p>
<ul>
<li><p><strong>æœ€å¤§å¸§é•¿</strong>ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220709215824549.png" /></p></li>
<li><p><strong>æˆªæ–­äºŒè¿›åˆ¶æŒ‡æ•°é€€é¿ç®—æ³•</strong>ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220709215937630.png" /></p></li>
<li><p><strong>å¸§å‘é€æµç¨‹</strong>ï¼š</p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220709220244808.png" /></p>
<ul>
<li><p><strong>å¸§æ¥æ”¶æµç¨‹</strong>ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220709220327190.png" /></p></li>
</ul>
<p>æ³¨ï¼šCSMA/CDåè®®æ›¾ç»ç”¨äºå„ç§æ€»çº¿ç»“æ„ä»¥å¤ªç½‘å’ŒåŒç»çº¿ä»¥å¤ªç½‘çš„æ—©æœŸç‰ˆæœ¬ä¸­ã€‚ç°åœ¨çš„ä»¥å¤ªç½‘åŸºäºäº¤æ¢æœºå’Œå…¨åŒå·¥è¿æ¥ï¼Œä¸ä¼šæœ‰ç¢°æ’ï¼Œå› æ­¤æ²¡æœ‰å¿…è¦ä½¿ç”¨CSMA/CDåè®®ã€‚</p>
<h5
id="åŠ¨æ€æ¥å…¥æ§åˆ¶csmacaåè®®è½½æ³¢ç›‘å¬å¤šå€æ¥å…¥ç¢°æ’é¿å…ä½¿ç”¨å¹¿æ’­ä¿¡é“çš„æ— çº¿å±€åŸŸç½‘802.11æ— çº¿å±€åŸŸç½‘ä½¿ç”¨çš„åè®®">3ã€åŠ¨æ€æ¥å…¥æ§åˆ¶â€”â€”CSMA/CAåè®®ï¼ˆè½½æ³¢ç›‘å¬å¤šå€æ¥å…¥/ç¢°æ’é¿å…ï¼‰ä½¿ç”¨å¹¿æ’­ä¿¡é“çš„æ— çº¿å±€åŸŸç½‘ï¼ˆ802.11æ— çº¿å±€åŸŸç½‘ï¼‰ä½¿ç”¨çš„åè®®</h5>
<p>â€‹
åœ¨æ— çº¿å±€åŸŸç½‘ä¸­ï¼Œä¸èƒ½ä½¿ç”¨ç¢°æ’æ£€æµ‹CDï¼ŒåŸå› å¦‚ä¸‹ï¼šå£ç”±äºæ— çº¿ä¿¡é“çš„ä¼ è¾“æ¡ä»¶ç‰¹æ®Šï¼Œå…¶ä¿¡å·å¼ºåº¦çš„åŠ¨æ€èŒƒå›´éå¸¸å¤§ï¼Œæ— çº¿ç½‘å¡ä¸Šæ¥æ”¶åˆ°çš„ä¿¡å·ï¼Œå¼ºåº¦å¾€å¾€ä¼šè¿œè¿œå°äºå‘é€ä¿¡å·çš„å¼ºåº¦ï¼ˆå¯èƒ½ç›¸å·®ç™¾ä¸‡å€ï¼‰ã€‚å¦‚æœè¦åœ¨æ— çº¿ç½‘å¡ä¸Šå®ç°ç¢°æ’æ£€æµ‹CDï¼Œå¯¹ç¡¬ä»¶çš„è¦æ±‚éå¸¸é«˜ã€‚
å³ä½¿èƒ½å¤Ÿåœ¨ç¡¬ä»¶ä¸Šå®ç°æ— çº¿å±€åŸŸç½‘çš„ç¢°æ’æ£€æµ‹åŠŸèƒ½ï¼Œä½†ç”±äºæ— çº¿ç”µæ³¢ä¼ æ’­çš„ç‰¹æ®Šæ€§ï¼ˆå­˜åœ¨<strong>éšè”½ç«™é—®é¢˜</strong>ï¼‰ï¼Œè¿›è¡Œç¢°æ’æ£€æµ‹çš„æ„ä¹‰ä¹Ÿä¸å¤§ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220709220829915.png" style="zoom: 67%;" /></p>
<ul>
<li><p>å¸§é—´é—´éš”IFSï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220709220922160.png" style="zoom:67%;" /></p></li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220709221000176.png" alt="image-20220709221000176" style="zoom:67%;" /></p>
<ul>
<li><p><strong>CSMA/CAå·¥ä½œåŸç†ï¼š</strong></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220709221319393.png" style="zoom:67%;" /></p></li>
</ul>
<p>â€‹
1ã€ä¸ºä½•æºç«™æ£€æµ‹åˆ°ä¿¡é“ç©ºé—²åï¼Œä»ç„¶è¦ç­‰å¾…ä¸€ä¸ªDIFSå¸§é—´é—´éš”å†å‘é€æ•°æ®å¸§ï¼Ÿ</p>
<p><strong>å°±æ˜¯è€ƒè™‘åˆ°å¯èƒ½æœ‰å…¶ä»–çš„ç«™æœ‰é«˜ä¼˜å…ˆçº§çš„å¸§è¦å‘é€ã€‚è‹¥æœ‰ï¼Œå°±è¦è®©é«˜ä¼˜å…ˆçº§å¸§å…ˆå‘é€ã€‚</strong></p>
<p>â€‹
2ã€ä¸ºä½•ç›®çš„ç«™æ¥æ”¶åˆ°ç¬¬ä¸€å¸§ä»¥åï¼Œè¦ç­‰å¾…ä¸€ä¸ªSIFSå¸§é—´é—´éš”å†å‘é€æ•°æ®å¸§ï¼Ÿ</p>
<p><strong>SIFSæ˜¯æœ€çŸ­çš„å¸§é—´é—´éš”ï¼Œç”¨æ¥åˆ†éš”å¼€å±äºä¸€æ¬¡å¯¹è¯çš„å„å¸§ã€‚åœ¨è¿™æ®µæ—¶é—´å†…ï¼Œä¸€ä¸ªç«™ç‚¹åº”å½“èƒ½å¤Ÿä»å‘é€æ–¹å¼åˆ‡æ¢åˆ°æ¥æ”¶æ–¹å¼ã€‚</strong></p>
<p>â€‹
3ã€ä¸ºä½•å…¶ä»–ç«™å†æ£€æµ‹åˆ°ä¿¡é“å¿™è½¬ä¸ºç©ºé—²ä¸”ç»è¿‡DIFSæ—¶é—´åï¼Œè¿˜è¦é€€é¿ä¸€æ®µéšæœºæ—¶é—´æ‰èƒ½ä½¿ç”¨ä¿¡é“ï¼Ÿ</p>
<p><strong>é˜²æ­¢å¤šä¸ªç«™ç‚¹åŒæ—¶å‘é€æ•°æ®è€Œäº§ç”Ÿç¢°æ’ã€‚</strong></p>
<ul>
<li><p><strong>é€€é¿ç®—æ³•</strong>ï¼š</p>
<p>â€‹
å½“ç«™ç‚¹æ£€æµ‹åˆ°ä¿¡é“æ˜¯ç©ºé—²çš„ï¼Œå¹¶ä¸”æ‰€å‘é€çš„æ•°æ®å¸§ä¸æ˜¯æˆåŠŸå‘é€å®Œä¸Šä¸€ä¸ªæ•°æ®å¸§ä¹‹åç«‹å³è¿ç»­å‘é€çš„æ•°æ®å¸§ï¼Œåˆ™ä¸ä½¿ç”¨é€€é¿ç®—æ³•ã€‚</p>
<p><strong>ä»¥ä¸‹æƒ…å†µå¿…é¡»ä½¿ç”¨é€€é¿ç®—æ³•ï¼š</strong></p>
<ul>
<li>åœ¨å‘é€æ•°æ®å¸§ä¹‹å‰æ£€æµ‹åˆ°ä¿¡é“å¤„äºå¿™çŠ¶æ€æ—¶ï¼›</li>
<li>åœ¨æ¯ä¸€æ¬¡é‡ä¼ ä¸€ä¸ªæ•°æ®å¸§æ—¶ï¼›</li>
<li>åœ¨æ¯ä¸€æ¬¡æˆåŠŸå‘é€åè¦è¿ç»­å‘é€ä¸‹ä¸€ä¸ªå¸§æ—¶ï¼ˆè¿™æ˜¯ä¸ºäº†é¿å…ä¸€ä¸ªç«™ç‚¹é•¿æ—¶é—´å ç”¨ä¿¡é“ï¼‰ã€‚</li>
</ul></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220711133229589.png" /></p>
<ul>
<li>CSMA/CA ç¤ºä¾‹ï¼š</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220711133457488.png" /></p>
<ul>
<li><p><strong>802.11ä¿¡é“é¢„çº¦æœºåˆ¶ï¼šRTSå¸§å’ŒCTSå¸§</strong></p>
<ul>
<li><p>ï¼ˆ1ï¼‰æºç«™åœ¨å‘é€æ•°æ®å¸§ä¹‹å‰å…ˆå‘é€ä¸€ä¸ªçŸ­çš„æ§åˆ¶å¸§ï¼Œç§°ä¸ºè¯·æ±‚å‘é€RTSï¼ˆRequest
To
Sendï¼‰ï¼Œå®ƒåŒ…æ‹¬<strong>æºåœ°å€ã€ç›®çš„åœ°å€ä»¥åŠè¿™æ¬¡é€šä¿¡ï¼ˆåŒ…æ‹¬ç›¸åº”çš„ç¡®è®¤å¸§ï¼‰æ‰€éœ€çš„æŒç»­æ—¶é—´</strong>ã€‚</p></li>
<li><p>ï¼ˆ2ï¼‰è‹¥ç›®çš„ç«™æ­£ç¡®æ”¶åˆ°æºç«™å‘æ¥çš„RTSå¸§ï¼Œä¸”åª’ä½“ç©ºé—²ï¼Œå°±å‘é€ä¸€ä¸ªå“åº”æ§åˆ¶å¸§ï¼Œç§°ä¸ºå…è®¸å‘é€CTSï¼ˆClear
To Sendï¼‰ï¼Œå®ƒä¹ŸåŒ…æ‹¬è¿™æ¬¡é€šä¿¡æ‰€éœ€çš„
æŒç»­æ—¶é—´ï¼ˆä»RTSå¸§ä¸­å°†æ­¤æŒç»­æ—¶é—´å¤åˆ¶åˆ°CTSå¸§ä¸­ï¼‰ã€‚</p></li>
<li><p>ï¼ˆ3ï¼‰æºç«™æ”¶åˆ°CTSå¸§åï¼Œå†ç­‰å¾…ä¸€æ®µæ—¶é—´SIFSåï¼Œå°±å¯å‘é€å…¶æ•°æ®å¸§ã€‚</p></li>
<li><p>ï¼ˆ4ï¼‰è‹¥ç›®çš„ç«™æ­£ç¡®æ”¶åˆ°äº†æºç«™å‘æ¥çš„æ•°æ®å¸§ï¼Œåœ¨ç­‰å¾…æ—¶é—´SIFSåï¼Œå°±å‘æºç«™å‘é€ç¡®è®¤å¸§ACKã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220711133923678.png" /></p></li>
<li><p><strong>é™¤æºç«™å’Œç›®çš„ç«™ä»¥å¤–çš„å…¶ä»–å„ç«™ï¼Œåœ¨æ”¶åˆ°CTSå¸§ï¼ˆæˆ–æ•°æ®å¸§ï¼‰åå°±æ¨è¿Ÿæ¥å…¥åˆ°æ— çº¿å±€åŸŸç½‘ä¸­ã€‚è¿™æ ·å°±ä¿è¯äº†æºç«™å’Œç›®çš„ç«™ä¹‹é—´çš„é€šä¿¡ä¸ä¼šå—åˆ°å…¶ä»–ç«™çš„å¹²æ‰°ã€‚</strong>å¦‚æœRTSå¸§å‘ç”Ÿç¢°æ’ï¼Œæºç«™å°±æ”¶ä¸åˆ°CTSå¸§ï¼Œéœ€æ‰§è¡Œé€€é¿ç®—æ³•é‡ä¼ RTSå¸§ã€‚</p></li>
<li><p>ç”±äºRTSå¸§å’ŒCTSå¸§å¾ˆçŸ­ï¼Œå‘é€ç¢°æ’çš„æ¦‚ç‡ã€ç¢°æ’äº§ç”Ÿçš„å¼€é”€åŠæœ¬èº«çš„å¼€é”€éƒ½å¾ˆå°ã€‚è€Œå¯¹äºä¸€èˆ¬çš„æ•°æ®å¸§ï¼Œå…¶<strong>å‘é€æ—¶å»¶å¾€å¾€å¤§äºä¼ æ’­æ—¶å»¶ï¼ˆå› ä¸ºæ˜¯å±€åŸŸç½‘ï¼‰</strong>ï¼Œç¢°æ’çš„æ¦‚ç‡å¾ˆå¤§ï¼Œä¸”ä¸€æ—¦å‘ç”Ÿç¢°æ’è€Œå¯¼è‡´æ•°æ®å¸§é‡å‘ï¼Œåˆ™æµªè´¹çš„æ—¶é—´å°±å¾ˆå¤šï¼Œå› æ­¤ç”¨å¾ˆå°çš„ä»£ä»·å¯¹ä¿¡é“è¿›è¡Œé¢„çº¦å¾€å¾€æ˜¯å€¼å¾—çš„ã€‚</p></li>
</ul></li>
<li><p><strong>802.11è™šæ‹Ÿè½½æ³¢ç›‘å¬æœºåˆ¶ï¼šæ•°æ®å¸§ä¹Ÿèƒ½æºå¸¦é€šä¿¡æ‰€éœ€æ—¶é—´</strong></p>
<ul>
<li>ç”±äºåˆ©ç”¨è™šæ‹Ÿè½½æ³¢ç›‘å¬æœºåˆ¶ï¼Œç«™ç‚¹åªè¦ç›‘å¬åˆ°RTSå¸§ã€CTSå¸§æˆ–æ•°æ®å¸§ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œå°±èƒ½çŸ¥é“ä¿¡é“è¢«å ç”¨çš„æŒç»­æ—¶é—´ï¼Œè€Œä¸éœ€è¦çœŸæ­£ç›‘å¬åˆ°ä¿¡é“ä¸Šçš„ä¿¡å·ï¼Œå› æ­¤è™šæ‹Ÿè½½æ³¢ç›‘å¬æœºåˆ¶èƒ½å‡å°‘éšè”½ç«™å¸¦æ¥çš„ç¢°æ’é—®é¢˜ã€‚</li>
</ul></li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220711134106642.png" style="zoom: 67%;" /></p>
<h4 id="åmacåœ°å€">åã€MACåœ°å€ ï¼š</h4>
<ul>
<li>å½“<strong>å¤šä¸ªä¸»æœºè¿æ¥åœ¨åŒä¸€ä¸ªå¹¿æ’­ä¿¡é“ä¸Š</strong>ï¼Œè¦æƒ³å®ç°ä¸¤ä¸ªä¸»æœºä¹‹é—´çš„é€šä¿¡ï¼Œåˆ™æ¯ä¸ªä¸»æœºéƒ½å¿…é¡»æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ï¼Œå³ä¸€ä¸ªæ•°æ®é“¾è·¯å±‚åœ°å€ã€‚</li>
<li>åœ¨æ¯ä¸ªä¸»æœºå‘é€çš„å¸§ä¸­å¿…é¡»æºå¸¦æ ‡è¯†å‘é€ä¸»æœºå’Œæ¥æ”¶ä¸»æœºçš„åœ°å€ã€‚ç”±äºè¿™ç±»åœ°å€æ˜¯ç”¨äº<strong>åª’ä½“æ¥å…¥æ§åˆ¶MACï¼ˆMedia
Access Controlï¼‰</strong>ï¼Œå› æ­¤è¿™ç±»åœ°å€è¢«ç§°ä¸ºMACåœ°å€ï¼›</li>
</ul>
<p><strong>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç”¨æˆ·ä¸»æœºä¼šåŒ…å«ä¸¤ä¸ªç½‘ç»œé€‚é…å™¨ï¼šæœ‰çº¿å±€åŸŸç½‘é€‚é…å™¨ï¼ˆæœ‰çº¿ç½‘å¡ï¼‰å’Œæ— çº¿å±€åŸŸç½‘é€‚é…å™¨ï¼ˆæ— çº¿ç½‘å¡ï¼‰ã€‚æ¯ä¸ªç½‘ç»œé€‚é…å™¨éƒ½æœ‰ä¸€ä¸ªå…¨çƒå”¯ä¸€çš„MACåœ°å€ã€‚è€Œäº¤æ¢æœºå’Œè·¯ç”±å™¨å¾€å¾€æ‹¥æœ‰æ›´å¤šçš„ç½‘ç»œæ¥å£ï¼Œæ‰€ä»¥ä¼šæ‹¥æœ‰æ›´å¤šçš„MACåœ°å€ã€‚ç»¼ä¸Šæ‰€è¿°ï¼Œä¸¥æ ¼æ¥è¯´ï¼ŒMACåœ°å€æ˜¯å¯¹ç½‘ç»œä¸Šå„æ¥å£çš„å”¯ä¸€æ ‡è¯†ï¼Œè€Œä¸æ˜¯å¯¹ç½‘ç»œä¸Šå„è®¾å¤‡çš„å”¯ä¸€æ ‡è¯†ã€‚</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220711163330450.png" /></p>
<h4 id="åä¸€ipåœ°å€">åä¸€ã€IPåœ°å€ ï¼š</h4>
<p><strong>IPåœ°å€æ˜¯å› ç‰¹ç½‘ï¼ˆInternetï¼‰ä¸Šçš„ä¸»æœºå’Œè·¯ç”±å™¨æ‰€ä½¿ç”¨çš„åœ°å€</strong>ï¼Œç”¨äºæ ‡è¯†ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼š</p>
<ul>
<li>ç½‘ç»œç¼–å·ï¼šæ ‡è¯†å› ç‰¹ç½‘ä¸Šæ•°ä»¥ç™¾ä¸‡è®¡çš„ç½‘ç»œ</li>
<li>ä¸»æœºç¼–å·ï¼šæ ‡è¯†åŒä¸€ç½‘ç»œä¸Šä¸åŒä¸»æœºï¼ˆæˆ–è·¯ç”±å™¨å„æ¥å£ï¼‰</li>
</ul>
<p>â€‹
<strong>å¾ˆæ˜¾ç„¶ï¼Œä¹‹å‰ä»‹ç»çš„MACåœ°å€ä¸å…·å¤‡åŒºåˆ†ä¸åŒç½‘ç»œçš„åŠŸèƒ½ã€‚å¦‚æœåªæ˜¯ä¸€ä¸ªå•ç‹¬çš„ç½‘ç»œï¼Œä¸æ¥å…¥å› ç‰¹ç½‘ï¼Œå¯ä»¥åªä½¿ç”¨MACåœ°å€ï¼ˆè¿™ä¸æ˜¯ä¸€èˆ¬ç”¨æˆ·çš„åº”ç”¨æ–¹å¼ï¼‰ã€‚å¦‚æœä¸»æœºæ‰€åœ¨çš„ç½‘ç»œè¦æ¥å…¥å› ç‰¹ç½‘ï¼Œåˆ™IPåœ°å€å’ŒMACåœ°å€éƒ½éœ€è¦ä½¿ç”¨ã€‚</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220711164732641.png" /></p>
<h4
id="åäºŒåœ°å€è§£æåè®®arpåè®®ä»…èƒ½åœ¨ä¸€æ®µé“¾è·¯æˆ–ä¸€ä¸ªç½‘ç»œä¸‹ä½¿ç”¨">åäºŒã€åœ°å€è§£æåè®®ARPåè®®ï¼šï¼ˆä»…èƒ½åœ¨ä¸€æ®µé“¾è·¯æˆ–ä¸€ä¸ªç½‘ç»œä¸‹ä½¿ç”¨ï¼‰</h4>
<p>ç°åœ¨é¢ä¸´è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220711165421809.png" /></p>
<p><strong>ARPé«˜é€Ÿç¼“å­˜è¡¨</strong>ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220711165459322.png" style="zoom: 67%;" /></p>
<p>â€‹
åœ¨ä¸»æœºBæƒ³è¦ç»™ä¸»æœºCå‘é€æ•°æ®åŒ…æ—¶ï¼Œé¦–å…ˆä¼šæŸ¥æ‰¾è‡ªå·±çš„ARPé«˜é€Ÿç¼“å­˜ï¼Œå‘ç°æ²¡æœ‰ä¸»æœºCçš„IPåœ°å€å’ŒMACåœ°å€çš„è½¬æ¢è®°å½•ï¼Œæ­¤æ—¶ä¾¿ä¼šå‘é€å¦‚ä¸‹æ‰€ç¤ºARPè¯·æ±‚æŠ¥æ–‡ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220711165839100.png" /></p>
<p>å½“å¹¿æ’­å¸§åˆ°è¾¾Cæ—¶ï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220711165949206.png" style="zoom:67%;" /></p>
<ul>
<li><p>ä¸»æœºCå…ˆå°†Bçš„IPåœ°å€ä¸MACåœ°å€è®°å½•åˆ°è‡ªå·±çš„ARPé«˜é€Ÿç¼“å­˜è¡¨ä¸­ï¼›</p></li>
<li><p>éšåç»™Bå‘é€ARPå“åº”ï¼Œä»¥å‘ŠçŸ¥è‡ªå·±çš„MACåœ°å€ã€‚</p></li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220711170027736.png" style="zoom: 80%;" /></p>
<p>æ€»çº¿ä¸ŠAã€Bæ”¶åˆ°å•æ’­å¸§åï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220711170135425.png" /></p>
<p>â€‹
ä¸»æœºBçš„ç½‘å¡å°†å¸§äº¤ä»˜ä¸Šå±‚çš„ARPè§£æè¿›ç¨‹ï¼Œå…¶å°†Cçš„IPåœ°å€ä¸MACåœ°å€è®°å½•åˆ°è‡ªå·±çš„ARPé«˜é€Ÿç¼“å­˜è¡¨ä¸­ã€‚</p>
<ul>
<li>ARPé«˜é€Ÿç¼“å­˜çš„è®°å½•ç±»å‹æœ‰ä¸¤ç§</li>
</ul>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220711170244005.png"
alt="image-20220711170244005" />
<figcaption aria-hidden="true">image-20220711170244005</figcaption>
</figure>
<h4 id="åä¸‰é›†çº¿å™¨ä¸äº¤æ¢æœº">åä¸‰ã€é›†çº¿å™¨ä¸äº¤æ¢æœº</h4>
<ul>
<li><strong>é›†çº¿å™¨</strong><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220711172230039.png"
alt="image-20220711172230039" /></li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220711173900724.png" style="zoom: 67%;" /></p>
<ul>
<li><strong>äº¤æ¢æœºï¼š</strong></li>
</ul>
<p>â€‹
ä»¥å¤ªç½‘äº¤æ¢æœºé€šå¸¸éƒ½æœ‰å¤šä¸ªæ¥å£ã€‚æ¯ä¸ªæ¥å£éƒ½å¯ä»¥ç›´æ¥ä¸ä¸€å°ä¸»æœºæˆ–å¦ä¸€ä¸ªä»¥å¤ªç½‘äº¤æ¢æœºç›¸è¿ã€‚ä¸€èˆ¬éƒ½å·¥ä½œåœ¨<strong>å…¨åŒå·¥æ–¹å¼</strong>ã€‚</p>
<p>â€‹
ä»¥å¤ªç½‘äº¤æ¢æœºå…·æœ‰å¹¶è¡Œæ€§ï¼Œèƒ½åŒæ—¶è¿é€šå¤šå¯¹æ¥å£ï¼Œä½¿å¤šå¯¹ä¸»æœºèƒ½åŒæ—¶é€šä¿¡ï¼Œæ— ç¢°æ’ï¼ˆä¸ä½¿ç”¨CSMA/CDåè®®ï¼‰ã€‚</p>
<p>â€‹
ä»¥å¤ªç½‘äº¤æ¢æœºå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼ˆä¹ŸåŒ…æ‹¬ç‰©ç†å±‚ï¼‰ï¼Œ<strong>å®ƒæ”¶åˆ°å¸§åï¼Œåœ¨å¸§äº¤æ¢è¡¨ä¸­æŸ¥æ‰¾å¸§çš„ç›®çš„MACåœ°å€æ‰€å¯¹åº”çš„æ¥å£å·ï¼Œç„¶åé€šè¿‡è¯¥æ¥å£è½¬å‘å¸§ã€‚</strong></p>
<p>â€‹
<strong>ä»¥å¤ªç½‘äº¤æ¢æœºæ˜¯ä¸€ç§å³æ’å³ç”¨è®¾å¤‡ï¼Œå…¶å†…éƒ¨çš„å¸§äº¤æ¢è¡¨æ˜¯é€šè¿‡è‡ªå­¦ä¹ ç®—æ³•è‡ªåŠ¨åœ°é€æ¸å»ºç«‹èµ·æ¥çš„ã€‚</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220711181652815.png" /></p>
<h4
id="åå››ä»¥å¤ªç½‘äº¤æ¢æœºè‡ªå­¦ä¹ å’Œè½¬å‘å¸§æµç¨‹">åå››ã€ä»¥å¤ªç½‘äº¤æ¢æœºè‡ªå­¦ä¹ å’Œè½¬å‘å¸§æµç¨‹</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220711222156764.png" /></p>
<p>â€‹
<strong>ä¸»æœºAè¦ç»™ä¸»æœºBå‘é€ä¸€ä¸ªå¸§ï¼Œé¦–å…ˆåˆ°è¾¾ä»¥å¤ªç½‘äº¤æ¢æœº1ï¼Œä»¥å¤ªç½‘äº¤æ¢æœº1é¦–å…ˆè¿›è¡Œç™»è®°ï¼Œå°†MACåœ°å€Aå’Œå¯¹åº”æ¥å£1è®°å½•åˆ°å¸§äº¤æ¢è¡¨ä¸­ï¼Œç„¶åæŸ¥æ‰¾ç›®çš„åœ°å€Bï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™è¿›è¡Œç›²ç›®æ³›æ´ªï¼Œå°†å¸§è½¬å‘ç»™å…¶ä»–çš„æ‰€æœ‰æ¥å£ã€‚å¦‚æœæ‰¾åˆ°äº†ï¼Œåˆ™è½¬å‘è‡³å¯¹åº”æ¥å£
</strong>ä»¥æ­¤ç±»æ¨</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220711223207055.png" alt="image-20220711223207055" style="zoom:67%;" /></p>
<p>â€‹
<strong>ä¸»æœºGç»™ä¸»æœºAå‘é€ä¸€ä¸ªå¸§ï¼Œå¸§æ²¿ç€æ€»çº¿åˆ°è¾¾Aå’Œäº¤æ¢æœºæ¥å£1ï¼Œä¸»æœºAæ¥æ”¶è¯¥å¸§ï¼Œäº¤æ¢æœº1æŸ¥æ‰¾è¡¨ï¼Œå‘ç°åº”å½“è½¬å‘è‡³æ¥å£1ï¼Œä½†æ­¤æ—¶è¿™ä¸ªå¸§å°±æ˜¯æ¥æºäºæ¥å£1ï¼Œæ•…ä»¥å¤ªç½‘äº¤æ¢æœº1å°±ä¼šä¸¢å¼ƒè¯¥å¸§</strong></p>
<ul>
<li><strong>æ³¨æ„ï¼šæ¯æ¡è®°å½•éƒ½æœ‰è‡ªå·±çš„æœ‰æ•ˆæ—¶é—´ï¼Œåˆ°æœŸè‡ªåŠ¨åˆ é™¤ï¼è¿™æ˜¯å› ä¸ºMACåœ°å€ä¸äº¤æ¢æœºæ¥å£çš„å¯¹åº”å…³ç³»å¹¶ä¸æ˜¯æ°¸ä¹…æ€§çš„ï¼</strong></li>
</ul>
<h4
id="åäº”ä»¥å¤ªç½‘äº¤æ¢æœºçš„ç”Ÿæˆæ ‘åè®®stp">åäº”ã€ä»¥å¤ªç½‘äº¤æ¢æœºçš„ç”Ÿæˆæ ‘åè®®STP</h4>
<p>â€‹
å¦‚å›¾æ‰€ç¤ºï¼Œå¦‚æœABçš„é“¾è·¯æˆ–è€…BCçš„é“¾è·¯å‡ºç°é—®é¢˜ï¼Œåˆ™äº’ç›¸ä¹‹é—´å°±æ— æ³•é€šä¿¡ã€‚é‚£ä¹ˆå¦‚ä½•æé«˜ä»¥å¤ªç½‘çš„å¯é æ€§ï¼Ÿ</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220712094950883.png" alt="image-20220712094950883" style="zoom:67%;" /></p>
<p>â€‹
<strong>æ·»åŠ å†—ä½™é“¾è·¯å¯ä»¥æé«˜ä»¥å¤ªç½‘çš„å¯é æ€§</strong>ï¼Œä½†æ˜¯ï¼Œå†—ä½™é“¾è·¯ä¹Ÿä¼šå¸¦æ¥è´Ÿé¢æ•ˆåº”â€”â€”å½¢æˆç½‘ç»œç¯è·¯ã€‚</p>
<p>â€‹ <strong>ç½‘ç»œç¯è·¯</strong>ä¼šå¸¦æ¥ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li><p>å¹¿æ’­é£æš´ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220712095252611.png" /></p>
<p>å¹¿æ’­å¸§å°†ä¼šåœ¨äº¤æ¢æœºä¹‹é—´åå¤è½¬å‘ï¼Œå¤§é‡æ¶ˆè€—ç½‘ç»œèµ„æºã€‚</p></li>
<li><p>ä¸»æœºä¼šæ”¶åˆ°é‡å¤çš„å¹¿æ’­å¸§</p></li>
<li><p>äº¤æ¢æœºçš„å¸§äº¤æ¢è¡¨éœ‡è¡æ¼‚ç§»</p></li>
</ul>
<p>â€‹ <strong>æ•…è€Œä»¥å¤ªç½‘äº¤æ¢æœºä½¿ç”¨ç”Ÿæˆæ ‘åè®®STPï¼ˆSpanning Tree
Protocolï¼‰ï¼Œå¯ä»¥åœ¨å¢åŠ å†—ä½™é“¾è·¯æ¥æé«˜ç½‘ç»œå¯é æ€§çš„åŒæ—¶åˆé¿å…ç½‘ç»œç¯è·¯å¸¦æ¥çš„å„ç§é—®é¢˜ã€‚</strong></p>
<p>â€‹
ä¸è®ºäº¤æ¢æœºä¹‹é—´é‡‡ç”¨æ€æ ·çš„ç‰©ç†è¿æ¥ï¼Œäº¤æ¢æœºéƒ½èƒ½å¤Ÿè‡ªåŠ¨è®¡ç®—å¹¶æ„å»ºä¸€ä¸ªé€»è¾‘ä¸Šæ²¡æœ‰ç¯è·¯çš„ç½‘ç»œï¼Œå…¶é€»è¾‘æ‹“æ‰‘ç»“æ„å¿…é¡»æ˜¯æ ‘å‹çš„ï¼ˆæ— é€»è¾‘ç¯è·¯ï¼‰ï¼›ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220712095713041.png" style="zoom:50%;" /></p>
<p>â€‹
<strong>å½“é¦–æ¬¡è¿æ¥äº¤æ¢æœºæˆ–ç½‘ç»œç‰©ç†æ‹“æ‰‘å‘ç”Ÿå˜åŒ–æ—¶ï¼ˆæœ‰å¯èƒ½æ˜¯äººä¸ºæ”¹å˜æˆ–æ•…éšœï¼‰ï¼Œäº¤æ¢æœºéƒ½å°†è¿›è¡Œç”Ÿæˆæ ‘çš„é‡æ–°è®¡ç®—ã€‚</strong></p>
<h4 id="åå…­è™šæ‹Ÿå±€åŸŸç½‘vlan">åå…­ã€è™šæ‹Ÿå±€åŸŸç½‘VLAN</h4>
<p>â€‹
éšç€äº¤æ¢å¼ä»¥å¤ªç½‘è§„æ¨¡çš„æ‰©å¤§ï¼Œå¹¿æ’­åŸŸç›¸åº”æ‰©å¤§ã€‚å·¨å¤§çš„å¹¿æ’­åŸŸä¼šå¸¦æ¥å¾ˆå¤šå¼Šç«¯ï¼Œæ¯”å¦‚å¹¿æ’­é£æš´ï¼Œéš¾ä»¥ç®¡ç†å’Œç»´æŠ¤ç­‰ã€‚</p>
<p><strong>åˆ†å‰²å¹¿æ’­åŸŸçš„æ–¹æ³•</strong>ï¼š</p>
<ul>
<li><p>ä½¿ç”¨è·¯ç”±å™¨åˆ†å‰²å¹¿æ’­åŸŸï¼ˆå› ä¸ºè·¯ç”±å™¨é»˜è®¤æƒ…å†µä¸‹ä¸å¯¹å¹¿æ’­å¸§è¿›è¡Œè½¬å‘ï¼‰</p></li>
<li><p>è™šæ‹Ÿå±€åŸŸç½‘æŠ€æœ¯VLANï¼š</p>
<p>è™šæ‹Ÿå±€åŸŸç½‘VLANï¼ˆVirtual Local Area
Networkï¼‰æ˜¯ä¸€ç§å°†å±€åŸŸç½‘å†…çš„è®¾å¤‡åˆ’åˆ†æˆä¸ç‰©ç†ä½ç½®æ— å…³çš„é€»è¾‘ç»„çš„æŠ€æœ¯ï¼Œè¿™äº›é€»è¾‘ç»„å…·æœ‰æŸäº›å…±åŒçš„éœ€æ±‚ã€‚</p>
<p><strong>åŒä¸€VLANä¹‹é—´å¯ä»¥å¹¿æ’­é€šä¿¡ï¼Œä¸åŒVLANä¹‹é—´ä¸å¯ä»¥å¹¿æ’­é€šä¿¡</strong></p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220712134553537.png" /></p>
<p><strong>VLANçš„å®ç°æœºåˆ¶</strong>ï¼š</p>
<p>â€‹ VLANåŸºäºäº¤æ¢æœºå®ç°ï¼Œéœ€è¦äº¤æ¢æœºæ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š</p>
<ul>
<li>æ”¯æŒIEEE802.1qå¸§ï¼Œå…¶å¯¹MACå¸§æ ¼å¼è¿›è¡Œäº†æ‰©å±•ï¼Œæ’å…¥äº†4å­—èŠ‚çš„VLANæ ‡è¯†
<ul>
<li>802.1Qå¸§æ˜¯ç”±äº¤æ¢æœºæ¥å¤„ç†çš„ï¼Œè€Œä¸æ˜¯ç”¨æˆ·ä¸»æœºæ¥å¤„ç†çš„ã€‚</li>
<li>å½“äº¤æ¢æœºæ”¶åˆ°æ™®é€šçš„ä»¥å¤ªç½‘å¸§æ—¶ï¼Œä¼šå°†å…¶æ’å…¥4å­—èŠ‚çš„VLANæ ‡è®°è½¬å˜ä¸º802.1Qå¸§ï¼Œç®€ç§°â€œæ‰“æ ‡ç­¾â€</li>
<li>å½“äº¤æ¢æœºè½¬å‘802.1Qå¸§æ—¶ï¼Œå¯èƒ½ä¼šåˆ é™¤å…¶4å­—èŠ‚VLANæ ‡è®°è½¬å˜ä¸ºæ™®é€šä»¥å¤ªç½‘å¸§ï¼Œç®€ç§°â€œå»æ ‡ç­¾"â€ã€‚</li>
</ul></li>
<li>äº¤æ¢æœºçš„ç«¯å£ç±»å‹æœ‰ä¸‰ç§
<ul>
<li><strong>Accessï¼š</strong>ä¸€èˆ¬ç”¨äºè¿æ¥ç”¨æˆ·è®¡ç®—æœºï¼Œåªèƒ½å±äºä¸€ä¸ªVLANï¼ŒAccessç«¯å£çš„PVIDå€¼ä¸ç«¯å£æ‰€å±VLANçš„IDç›¸åŒï¼ˆé»˜è®¤ä¸º1ï¼‰
<ul>
<li>æ¥æ”¶å¤„ç†æ–¹æ³•ï¼š<strong>ä¸€èˆ¬åªæ¥å—â€œæœªæ‰“æ ‡ç­¾â€çš„æ™®é€šä»¥å¤ªç½‘MACå¸§ã€‚</strong>æ ¹æ®æ¥æ”¶å¸§çš„ç«¯å£çš„PVIDç»™å¸§â€œæ‰“æ ‡ç­¾â€ï¼Œå³æ’å…¥4å­—èŠ‚VLANæ ‡è®°å­—æ®µï¼Œå­—æ®µä¸­çš„VIDå–å€¼ä¸ç«¯å£çš„PVIDå–å€¼ç›¸ç­‰ã€‚</li>
<li>å‘é€å¤„ç†æ–¹æ³•ï¼š<strong>è‹¥å¸§ä¸­çš„VIDä¸ç«¯å›—çš„PVIDç›¸ç­‰ï¼Œåˆ™â€œå»æ ‡ç­¾â€å¹¶è½¬å‘è¯¥å¸§ï¼›å¦åˆ™ä¸è½¬å‘ã€‚</strong></li>
</ul></li>
<li><strong>Trunkï¼š</strong>ä¸€èˆ¬ç”¨äºäº¤æ¢æœºä¹‹é—´æˆ–äº¤æ¢æœºä¸è·¯ç”±å™¨ä¹‹é—´çš„äº’è”ï¼Œå…¶å¯ä»¥å±äºå¤šä¸ªVLANã€‚ç”¨æˆ·å¯ä»¥è®¾ç½®Trunkç«¯å£çš„PVIDå€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒTrunkç«¯å£çš„PVIDå€¼ä¸º1ã€‚
<ul>
<li>æ¥æ”¶å¤„ç†æ–¹æ³•ï¼š
<ul>
<li>æ¥æ”¶â€œæœªæ‰“æ ‡ç­¾â€çš„å¸§ï¼Œ<strong>æ ¹æ®æ¥æ”¶å¸§çš„ç«¯å£çš„PVIDç»™å¸§â€œæ‰“æ ‡ç­¾â€ï¼Œ</strong>å³æ’å…¥4å­—èŠ‚VLANæ ‡è®°å­—æ®µï¼Œå­—æ®µä¸­çš„VIDå–å€¼ä¸ç«¯å£çš„PVIDå–å€¼ç›¸ç­‰ã€‚</li>
<li>æ¥æ”¶â€å·²æ‰“æ ‡ç­¾â€œçš„å¸§ï¼Œ</li>
</ul></li>
<li>å‘é€å¤„ç†æ–¹æ³•ï¼š
<ul>
<li><strong>å¯¹VIDç­‰äºPVIDçš„å¸§</strong>ï¼Œâ€œå»æ ‡ç­¾â€å†è½¬å‘ï¼›</li>
<li><strong>å¯¹VIDä¸ç­‰äºPVIDçš„å¸§</strong>ï¼Œç›´æ¥è½¬å‘ï¼›</li>
</ul></li>
</ul></li>
<li><strong>Hybridï¼š</strong>Hybridç«¯å£æ—¢å¯ç”¨äºäº¤æ¢æœºä¹‹é—´æˆ–äº¤æ¢æœºä¸è·¯ç”±å™¨ä¹‹é—´çš„äº’è¿ï¼ˆåŒTrunkç«¯å£ï¼‰ï¼Œä¹Ÿå¯ç”¨äºäº¤æ¢æœºä¸ç”¨æˆ·è®¡ç®—æœºä¹‹é—´çš„äº’è¿ï¼ˆåŒAccessç«¯å£ï¼‰
<ul>
<li>æ¥æ”¶å¤„ç†æ–¹æ³•ï¼šï¼ˆåŒTrunkç«¯å£ï¼‰</li>
<li>å‘é€å¤„ç†æ–¹æ³•ï¼š
<ul>
<li>æŸ¥çœ‹å¸§çš„VIDæ˜¯å¦åœ¨ç«¯å›—çš„â€œå»æ ‡ç­¾â€åˆ—è¡¨ä¸­ï¼š</li>
<li>è‹¥å­˜åœ¨ï¼Œåˆ™â€œå»æ ‡ç­¾â€åå†è½¬å‘ï¼›</li>
<li>è‹¥ä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥è½¬å‘ï¼›</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>Computer Network</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç½‘å¾®è¯¾å ‚Chap4â€”â€”ç½‘ç»œå±‚åŸç†</title>
    <url>/2022/07/12/a63746099b02/</url>
    <content><![CDATA[<p>è§†é¢‘åœ°å€ï¼šhttps://www.bilibili.com/video/BV1c4411d7jb?p=41</p>
<h4 id="ä¸€ç½‘ç»œå±‚çš„åŸºæœ¬æ¦‚å¿µ">ä¸€ã€ç½‘ç»œå±‚çš„åŸºæœ¬æ¦‚å¿µï¼š</h4>
<p>â€‹
ç½‘ç»œå±‚çš„ä¸»è¦ä»»åŠ¡æ˜¯å®ç°ç½‘ç»œäº’è¿ï¼Œè¿›è€Œå®ç°æ•°æ®åŒ…åœ¨å„ç½‘ç»œä¹‹é—´çš„ä¼ è¾“ã€‚</p>
<p>â€‹ è¦å®ç°ç½‘ç»œå±‚ä»»åŠ¡ï¼Œéœ€è¦è§£å†³ä»¥ä¸‹ä¸»è¦é—®é¢˜ï¼š</p>
<ul>
<li><p>ç½‘ç»œå±‚å‘è¿è¾“å±‚æä¾›æ€æ ·çš„æœåŠ¡ï¼ˆâ€œå¯é ä¼ è¾“â€è¿˜æ˜¯â€œä¸å¯é ä¼ è¾“"ï¼‰</p></li>
<li><p>ç½‘ç»œå±‚å¯»å€é—®é¢˜</p></li>
<li><p>è·¯ç”±é€‰æ‹©é—®é¢˜</p></li>
</ul>
<p><strong>å› ç‰¹ç½‘ï¼ˆInternetï¼‰æ˜¯ç›®å‰å…¨ä¸–ç•Œç”¨æˆ·æ•°é‡æœ€å¤šçš„äº’è”ç½‘ï¼Œå®ƒä½¿ç”¨TCP/IPåè®®æ ˆã€‚ç”±äºTCP/IPåè®®æ ˆçš„ç½‘ç»œå±‚ä½¿ç”¨ç½‘é™…åè®®IPï¼Œå®ƒæ˜¯æ•´ä¸ªåè®®æ ˆçš„æ ¸å¿ƒåè®®ï¼Œå› æ­¤åœ¨TCP/IPåè®®æ ˆä¸­ç½‘ç»œå±‚å¸¸ç§°ä¸ºç½‘é™…å±‚ã€‚</strong></p>
<h4 id="äºŒç½‘ç»œå±‚æä¾›çš„ä¸¤ç§æœåŠ¡">äºŒã€ç½‘ç»œå±‚æä¾›çš„ä¸¤ç§æœåŠ¡</h4>
<ul>
<li>é¢å‘è¿æ¥çš„è™šç”µè·¯æœåŠ¡</li>
</ul>
<p>â€‹ å¯é é€šä¿¡ç”±ç½‘ç»œæ¥ä¿è¯ï¼Œå¿…é¡»å»ºç«‹ç½‘ç»œå±‚çš„è¿æ¥â€”â€”è™šç”µè·¯VCï¼ˆVirtual
Circuitï¼‰ï¼Œé€šä¿¡åŒæ–¹æ²¿ç€å·²å»ºç«‹çš„è™šç”µè·¯å‘é€åˆ†ç»„ã€‚é€šä¿¡ç»“æŸåï¼Œéœ€è¦é‡Šæ”¾ä¹‹å‰æ‰€å»ºç«‹çš„è™šç”µè·¯ã€‚</p>
<ul>
<li>æ— è¿æ¥çš„æ•°æ®æŠ¥æœåŠ¡
<ul>
<li>å¯é é€šä¿¡åº”å½“ç”±ç”¨æˆ·ä¸»æœºæ¥ä¿è¯</li>
<li>ä¸éœ€è¦å»ºç«‹ç½‘ç»œå±‚è¿æ¥</li>
<li>æ¯ä¸ªåˆ†ç»„å¯èµ°ä¸åŒçš„è·¯å¾„</li>
<li>æ¯ä¸ªåˆ†ç»„çš„é¦–éƒ¨å¿…é¡»æºå¸¦ç›®çš„ä¸»æœºçš„å®Œæ•´åœ°å€</li>
<li>è¿™ç§é€šä¿¡æ–¹å¼æ‰€ä¼ é€çš„åˆ†ç»„å¯èƒ½è¯¯ç ã€ä¸¢å¤±ã€é‡å¤å’Œå¤±åºã€‚</li>
<li>ç”±äºç½‘ç»œæœ¬èº«ä¸æä¾›ç«¯åˆ°ç«¯çš„å¯é ä¼ è¾“æœåŠ¡ï¼Œè¿™å°±ä½¿ç½‘ç»œä¸­çš„è·¯ç”±å™¨å¯ä»¥åšå¾—æ¯”è¾ƒç®€å•ï¼Œè€Œä¸”ä»·æ ¼ä½å»‰ï¼ˆä¸ç”µä¿¡ç½‘çš„äº¤æ¢æœºç›¸æ¯”è¾ƒï¼‰ã€‚</li>
<li>å› ç‰¹ç½‘é‡‡ç”¨äº†è¿™ç§è®¾è®¡æ€æƒ³ï¼Œä¹Ÿå°±æ˜¯å°†å¤æ‚çš„ç½‘ç»œå¤„ç†åŠŸèƒ½ç½®äºå› ç‰¹ç½‘çš„è¾¹ç¼˜ï¼ˆç”¨æˆ·ä¸»æœºå’Œå…¶å†…éƒ¨çš„è¿è¾“å±‚ï¼‰ï¼Œè€Œå°†ç›¸å¯¹ç®€å•çš„å°½æœ€å¤§åŠªåŠ›çš„åˆ†ç»„äº¤ä»˜åŠŸèƒ½ç½®äºå› ç‰¹ç½‘æ ¸å¿ƒã€‚</li>
</ul></li>
</ul>
<h4 id="ä¸‰ipv4åœ°å€">ä¸‰ã€IPV4åœ°å€</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220712145410048.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220713152341503.png" /></p>
<h4 id="å››åˆ†ç±»ç¼–å€çš„ipv4åœ°å€">å››ã€åˆ†ç±»ç¼–å€çš„IPV4åœ°å€ï¼š</h4>
<p>â€‹ åˆ’åˆ†ä¸ºABCDEäº”ç±»åœ°å€ï¼Œ</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14 ä¸‹åˆ1.10.50.png" style="zoom:50%;" /></p>
<p>â€‹ åªæœ‰ABCç±»åœ°å€å¯ä»¥åˆ†é…ç»™ä¸»æœºæˆ–è·¯ç”±å™¨ã€‚</p>
<ul>
<li>Aç±»åœ°å€ï¼š
<ul>
<li>æœ€å°ç½‘ç»œå·ä¸º0ä¿ç•™ä¸æŒ‡æ´¾</li>
<li>æœ€å¤§ç½‘ç»œå·127ï¼Œä½œä¸ºæœ¬åœ°å›ç¯æµ‹è¯•åœ°å€ï¼Œä¸æŒ‡æ´¾ã€‚
<ul>
<li>æœ€å°çš„æœ¬åœ°å›ç¯æµ‹è¯•åœ°å€ï¼š127.0.0.1</li>
<li>æœ€å¤§çš„æœ¬åœ°å›ç¯æµ‹è¯•åœ°å€ï¼š127.255.255.254</li>
</ul></li>
</ul></li>
<li>BCç±»åœ°å€ï¼š
<ul>
<li>æœ€å°æœ€å¤§ç½‘ç»œå·å‡å¯æŒ‡æ´¾</li>
</ul></li>
</ul>
<p><strong>æ³¨æ„ï¼Œ</strong>ä¸€äº›ç‰¹æ®Šåœ°å€å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14%20ä¸‹åˆ1.17.12.png" /></p>
<h4 id="äº”åˆ’åˆ†å­ç½‘çš„ipv4åœ°å€">äº”ã€åˆ’åˆ†å­ç½‘çš„IPV4åœ°å€ï¼š</h4>
<p>â€‹ ä»ä¸»æœºå·éƒ¨åˆ†å€Ÿç”¨ä¸€éƒ¨åˆ†ä½œä¸ºå­ç½‘å·ï¼Œæ¥é¿å…ä¸»æœºå·çš„æµªè´¹ã€‚</p>
<p>â€‹
32æ¯”ç‰¹çš„å­ç½‘æ©ç å¯ä»¥è¡¨æ˜åˆ†ç±»IPåœ°å€çš„ä¸»æœºå·éƒ¨åˆ†è¢«å€Ÿç”¨äº†å‡ ä¸ªæ¯”ç‰¹ä½œä¸ºå­ç½‘å·ã€‚</p>
<ul>
<li>é»˜è®¤å­ç½‘æ©ç ï¼š
<ul>
<li>æœªåˆ’åˆ†å­ç½‘çš„æƒ…å†µä¸‹ä½¿ç”¨çš„å­ç½‘æ©ç </li>
</ul></li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14 ä¸‹åˆ1.26.26.png" style="zoom: 50%;" /></p>
<h4 id="å…­æ— åˆ†ç±»ç¼–å€çš„ipv4åœ°å€">å…­ã€æ— åˆ†ç±»ç¼–å€çš„IPV4åœ°å€ï¼š</h4>
<p>â€‹
åˆ’åˆ†å­ç½‘åœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£äº†å› ç‰¹ç½‘åœ¨å‘å±•ä¸­é‡åˆ°çš„å›°éš¾ï¼Œä½†æ˜¯æ•°é‡å·¨å¤§çš„Cç±»ç½‘å› ä¸ºå…¶åœ°å€ç©ºé—´å¤ªå°å¹¶æ²¡æœ‰å¾—åˆ°å……åˆ†ä½¿ç”¨ï¼Œè€Œå› ç‰¹ç½‘çš„1Påœ°å€ä»åœ¨åŠ é€Ÿæ¶ˆè€—ï¼Œæ•´ä¸ªPV4åœ°å€ç©ºé—´é¢ä¸´å…¨éƒ¨è€—å°½çš„å¨èƒã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14%20ä¸‹åˆ1.45.27.png" /></p>
<ul>
<li>ä»¥192.168.4.0/30ä¸ºä¾‹ï¼š</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14%20ä¸‹åˆ1.52.48.png" /></p>
<ul>
<li><p><strong>è·¯ç”±èšåˆï¼ˆæ„é€ è¶…ç½‘ï¼‰</strong></p>
<ul>
<li>æ‰¾å…±åŒå‰ç¼€ï¼Œç„¶åå†™åœ¨ç½‘ç»œå·éƒ¨åˆ†å³å¯</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14%20ä¸‹åˆ1.48.49.png" /></li>
<li>èšåˆåœ°å€å—ï¼š172.1.4.0/22</li>
<li>ç½‘ç»œå‰ç¼€è¶Šé•¿ï¼Œåœ°å€å—è¶Šå°ï¼Œè·¯ç”±è¶Šå…·ä½“ï¼›</li>
<li>è‹¥è·¯ç”±å™¨æŸ¥è¡¨è½¬å‘åˆ†ç»„æ—¶å‘ç°æœ‰å¤šæ¡ç”±å¯é€‰ï¼Œé€‰æ‹©ç½‘ç»œå‰ç¼€æœ€é•¿çš„é‚£æ¡ï¼Œè¿™ç§°ä¸ºæœ€é•¿å‰ç¼€åŒ¹é…ï¼Œå› ä¸ºè¿™æ ·çš„è·¯ç”±æ›´å…·ä½“ã€‚</li>
</ul>
<h4 id="ä¸ƒåˆ†é…ipv4åœ°å€çš„åº”ç”¨è§„åˆ’">ä¸ƒã€åˆ†é…IPV4åœ°å€çš„åº”ç”¨è§„åˆ’</h4>
<ul>
<li>ä½¿ç”¨å®šé•¿çš„å­ç½‘æ©ç åˆ†é…</li>
<li>ä½¿ç”¨å˜é•¿çš„å­ç½‘æ©ç åˆ†é…</li>
</ul></li>
<li><p>é‡‡ç”¨å®šé•¿çš„å­ç½‘æ©ç åˆ†é…ç¤ºä¾‹ï¼š</p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14%20ä¸‹åˆ2.10.28.png" /></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14%20ä¸‹åˆ2.13.56.png" /></p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14 ä¸‹åˆ2.14.21.png" style="zoom: 50%;" /></p>
<p><strong>æœ€ç»ˆç»“æœå¦‚ä¸‹ï¼š</strong></p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14%20ä¸‹åˆ2.16.48.png"
alt="æˆªå±2022-07-14 ä¸‹åˆ2.16.48" />
<figcaption aria-hidden="true">æˆªå±2022-07-14 ä¸‹åˆ2.16.48</figcaption>
</figure>
<ul>
<li>ä½¿ç”¨å˜é•¿çš„å­ç½‘æ©ç åˆ†é…ç¤ºä¾‹ï¼š</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14%20ä¸‹åˆ2.19.31.png" /></p>
<p><strong>æœ€ç»ˆç»“æœï¼š</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14%20ä¸‹åˆ2.21.06.png" /></p>
<h4 id="å…«ipæ•°æ®åŒ…çš„å‘é€ä¸è½¬å‘">å…«ã€IPæ•°æ®åŒ…çš„å‘é€ä¸è½¬å‘</h4>
<ul>
<li>ä¸»æœºå¦‚ä½•å‘é€IPæ•°æ®æŠ¥</li>
<li>è·¯ç”±å™¨å¦‚ä½•å‘é€IPæ•°æ®æŠ¥</li>
</ul>
<h5
id="æºä¸»æœºå¦‚ä½•çŸ¥é“è‡ªå·±ä¸ç›®çš„ä¸»æœºä¸åœ¨åŒä¸€ä¸ªç½‘ç»œä¸‹">1ã€æºä¸»æœºå¦‚ä½•çŸ¥é“è‡ªå·±ä¸ç›®çš„ä¸»æœºä¸åœ¨åŒä¸€ä¸ªç½‘ç»œä¸‹ï¼Ÿ</h5>
<p>å…¶å°† ä¸»æœºIPåœ°å€å’Œå­ç½‘æ©ç ä½œä¸æ“ä½œï¼Œå³å¯å¾—åˆ°ç½‘ç»œå·ï¼Œæ¯”å¯¹å³å¯</p>
<h5
id="æºä¸»æœºå¦‚ä½•çŸ¥é“è·¯ç”±å™¨rçš„å­˜åœ¨">2ã€æºä¸»æœºå¦‚ä½•çŸ¥é“è·¯ç”±å™¨Rçš„å­˜åœ¨ï¼Ÿ</h5>
<p>â€‹
ç”¨æˆ·ä¼šä¸ºæ¯ä¸ªä¸»æœºæŒ‡å®šä¸€ä¸ªè·¯ç”±å™¨ï¼Œä½œä¸ºè½¬å‘çš„è·¯ç”±å™¨ï¼Œå³è¯¥ä¸»æœºçš„<strong>é»˜è®¤ç½‘å…³</strong></p>
<p>â€‹
è¿™æ ·å½“æœ¬ç½‘ç»œä¸­çš„ä¸»æœºè¦å’Œå…¶ä»–ç½‘ç»œä¸­çš„ä¸»æœºé€šä¿¡æ—¶ï¼Œå°±äº¤ä»˜ç»™é»˜è®¤ç½‘å…³è¿›è¡Œè½¬å‘</p>
<h5
id="è·¯ç”±å™¨æ”¶åˆ°ipæ•°æ®æŠ¥åå¦‚ä½•è½¬å‘">3ã€è·¯ç”±å™¨æ”¶åˆ°IPæ•°æ®æŠ¥åå¦‚ä½•è½¬å‘ï¼Ÿ</h5>
<p>æ£€æŸ¥IPæ•°æ®æŠ¥é¦–éƒ¨æ˜¯å¦å‡ºé”™ï¼š</p>
<ul>
<li>è‹¥å‡ºé”™ï¼Œåˆ™ç›´æ¥ä¸¢å¼ƒè¯¥Pæ•°æ®æŠ¥å¹¶é€šå‘Šæºä¸»æœºã€‚</li>
<li>è‹¥æ²¡æœ‰å‡ºé”™ï¼Œåˆ™è¿›è¡Œè½¬å‘</li>
</ul>
<p>æ ¹æ®æ•°æ®æŠ¥çš„ç›®çš„åœ°å€åœ¨è·¯ç”±è¡¨ä¸­æŸ¥æ‰¾åŒ¹é…çš„æ¡ç›®ï¼š</p>
<ul>
<li><p>è‹¥æ‰¾åˆ°åŒ¹é…çš„æ¡ç›®ï¼Œåˆ™è½¬å‘ç»™æ¡ç›®ä¸­æŒ‡ç¤ºçš„ä¸‹ä¸€è·³</p></li>
<li><p>è‹¥æ‰¾ä¸åˆ°ï¼Œåˆ™ä¸¢å¼ƒè¯¥Pæ•°æ®æŠ¥å¹¶é€šå‘Šæºä¸»æœº</p></li>
</ul>
<h5 id="è·¯ç”±è¡¨">4ã€è·¯ç”±è¡¨ï¼š</h5>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14 ä¸‹åˆ2.48.32.png" style="zoom:50%;" /></p>
<p><strong>æ³¨æ„ï¼šè·¯ç”±å™¨æ˜¯éš”ç¦»å¹¿æ’­åŸŸçš„ï¼Œå³ä¸ä¼šè½¬å‘å¹¿æ’­æ•°æ®æŠ¥</strong></p>
<h4
id="ä¹é™æ€è·¯ç”±é…ç½®å’Œå¯èƒ½äº§ç”Ÿçš„è·¯ç”±ç¯è·¯é—®é¢˜">ä¹ã€é™æ€è·¯ç”±é…ç½®å’Œå¯èƒ½äº§ç”Ÿçš„è·¯ç”±ç¯è·¯é—®é¢˜</h4>
<p>â€‹
é™æ€è·¯ç”±é…ç½®æ˜¯æŒ‡ç”¨æˆ·æˆ–ç½‘ç»œç®¡ç†å‘˜ä½¿ç”¨è·¯ç”±å™¨çš„ç›¸å…³å‘½ä»¤ç»™è·¯ç”±å™¨äººå·¥é…ç½®è·¯ç”±è¡¨ã€‚<strong>å¼€é”€å°ï¼Œä½†æ˜¯å®¹æ˜“äº§ç”Ÿé”™è¯¯ï¼Œä»…é€‚ç”¨äºå°å‹ç½‘ç»œ</strong></p>
<ul>
<li>é»˜è®¤è·¯ç”±æ¡ç›®ï¼šç›®çš„ç½‘ç»œåœ°å€ä¸º 0.0.0.0/0</li>
<li>ç‰¹å®šä¸»æœºè·¯ç”±æ¡ç›®ï¼šç›®çš„ç½‘ç»œåœ°å€ä¸ºç‰¹å®šä¸»æœºçš„IPåœ°å€ï¼Œå­ç½‘æ©ç ä¸º255.255.255.255</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14 ä¸‹åˆ3.08.12.png" style="zoom: 67%;" /></p>
<h4
id="ååŠ¨æ€è·¯ç”±é…ç½®è·¯ç”±é€‰æ‹©åè®®æ¦‚è¿°">åã€åŠ¨æ€è·¯ç”±é…ç½®â€”â€”è·¯ç”±é€‰æ‹©åè®®æ¦‚è¿°ï¼š</h4>
<p>è‹±ç‰¹ç½‘é‡‡ç”¨çš„è·¯ç”±é€‰æ‹©åè®®ç‰¹ç‚¹ï¼š</p>
<ul>
<li>è‡ªé€‚åº”ï¼šè·¯ç”±åŠ¨æ€é€‰æ‹©ï¼Œèƒ½è¾ƒå¥½çš„é€‚åº”ç½‘ç»œçŠ¶æ€çš„å˜åŒ–</li>
<li>åˆ†å¸ƒå¼ï¼šè·¯ç”±å™¨ä¹‹é—´äº¤æ¢è·¯ç”±ä¿¡æ¯</li>
<li>åˆ†å±‚æ¬¡ï¼šå°†æ•´ä¸ªå› ç‰¹ç½‘åˆ’åˆ†ä¸ºè®¸å¤šè¾ƒå°çš„è‡ªæ²»ç³»ç»ŸAS
<ul>
<li>åœ¨è‡ªæ²»ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨çš„åè®®å«åš<strong>å†…éƒ¨ç½‘å…³åè®®</strong>ï¼Œä¸åŒè‡ªæ²»ç³»ç»Ÿå†…éƒ¨å¯ä»¥ä½¿ç”¨ä¸åŒçš„å†…éƒ¨ç½‘å…³åè®®</li>
<li>åœ¨è‡ªæ²»ç³»ç»Ÿä¹‹é—´ä½¿ç”¨çš„åè®®å«åš<strong>å¤–éƒ¨ç½‘å…³åè®®</strong></li>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14 ä¸‹åˆ5.02.09.png" style="zoom:50%;" /></li>
</ul></li>
<li>å¸¸è§çš„è·¯ç”±é€‰æ‹©åè®®ï¼ˆåœ¨è·¯ç”±å™¨ä¸Šè¿è¡Œï¼‰ï¼š</li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14%20ä¸‹åˆ5.09.56.png" /></p>
<ul>
<li><p>è·¯ç”±å™¨çš„åŸºæœ¬ç»“æ„ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14%20ä¸‹åˆ5.13.08.png" /></p></li>
</ul>
<p>è¿›å…¥çš„åˆ†ç»„æœ‰ä¸¤ç§ç±»å‹ï¼š<strong>æ™®é€šçš„æ•°æ®åˆ†ç»„ / è·¯ç”±æŠ¥æ–‡</strong></p>
<ul>
<li><p>æ™®é€šçš„æ•°æ®åˆ†ç»„ç»ç”±è½¬å‘è¡¨è½¬å‘è‡³å¯¹åº”è¾“å‡ºç«¯å£</p></li>
<li><p>è·¯ç”±æŠ¥æ–‡è¿›å…¥è·¯ç”±é€‰æ‹©å¤„ç†æœºï¼Œè·¯ç”±é€‰æ‹©å¤„ç†æœºæ ¹æ®æ­¤æ›´æ–°è·¯ç”±è¡¨ã€‚</p></li>
<li><p>è·¯ç”±é€‰æ‹©å¤„ç†æœºè¿˜ä¼šå®šæœŸçš„ç»™å…¶ä»–è·¯ç”±å™¨å‘é€è·¯ç”±æŠ¥æ–‡ï¼Œå‘ŠçŸ¥è‡ªå·±çŸ¥é“çš„è·¯ç”±ä¿¡æ¯</p></li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14 ä¸‹åˆ5.14.34.png" style="zoom:50%;" /></p>
<ul>
<li>è·¯ç”±å™¨è¿˜æœ‰è¾“å…¥å’Œè¾“å‡ºç¼“å†²åŒº</li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/mac/æˆªå±2022-07-14 ä¸‹åˆ5.21.54.png" style="zoom:50%;" /></p>
<h4 id="åä¸€è·¯ç”±ä¿¡æ¯åè®®rip">åä¸€ã€è·¯ç”±ä¿¡æ¯åè®®RIPï¼š</h4>
<ul>
<li><p>RIPè¦æ±‚è‡ªæ²»ç³»ç»ŸASå†…çš„æ¯ä¸€ä¸ªè·¯ç”±å™¨<strong>éƒ½è¦ç»´æŠ¤ä»å®ƒè‡ªå·±åˆ°ASå†…å…¶ä»–æ¯ä¸€ä¸ªç½‘ç»œçš„è·ç¦»è®°å½•ã€‚è¿™æ˜¯ä¸€ç»„è·ç¦»ï¼Œç§°ä¸ºâ€œè·ç¦»å‘é‡D-V(Distance-.Vector)â€</strong></p></li>
<li><p>RIPä½¿ç”¨<strong>è·³æ•°(Hop
Count)ä½œä¸ºåº¦é‡(Metric)</strong>æ¥è¡¡é‡åˆ°è¾¾ç›®çš„ç½‘ç»œçš„è·ç¦»ã€‚</p>
<ul>
<li>è·¯ç”±å™¨åˆ°ç›´è¿ç½‘ç»œçš„è·ç¦»å®šä¹‰ä¸º1</li>
<li>è·¯ç”±å™¨åˆ°éç›´è¿ç½‘ç»œçš„è·ç¦»å®šä¹‰ä¸º<strong>æ‰€ç»è¿‡çš„è·¯ç”±å™¨æ•°+1</strong></li>
<li>å…è®¸ä¸€æ¡è·¯å¾„æœ€å¤šåªèƒ½åŒ…å«15ä¸ªè·¯ç”±å™¨ã€‚â€œè·ç¦»â€ç­‰äº16æ—¶ç›¸å½“äºä¸å¯è¾¾ã€‚
å› æ­¤ï¼Œ<strong>RIPåªé€‚ç”¨äºå°å‹äº’è”ç½‘ã€‚</strong></li>
</ul></li>
<li><p>RIPè®¤ä¸ºå¥½çš„è·¯ç”±å°±æ˜¯â€œè·ç¦»çŸ­â€çš„è·¯ç”±ï¼Œä¹Ÿå°±æ˜¯æ‰€é€šè¿‡è·¯ç”±å™¨æ•°é‡æœ€å°‘çš„è·¯ç”±ã€‚</p></li>
<li><p><strong>ä¸‰ä¸ªè¦ç‚¹</strong>ï¼š</p>
<ul>
<li>1ã€å’Œè°äº¤æ¢ï¼Ÿä»…å’Œç›¸é‚»è·¯ç”±å™¨äº¤æ¢ä¿¡æ¯</li>
<li>2ã€äº¤æ¢ä»€ä¹ˆï¼Ÿäº¤æ¢è‡ªå·±çš„è·¯ç”±è¡¨</li>
<li>3ã€ä½•æ—¶äº¤æ¢ï¼Ÿå‘¨æœŸæ€§äº¤æ¢</li>
</ul></li>
<li><p><strong>åŸºæœ¬å·¥ä½œè¿‡ç¨‹</strong>ï¼š</p>
<ul>
<li>1ã€è·¯ç”±å™¨åˆšå¼€å§‹å·¥ä½œæ—¶ï¼ŒåªçŸ¥é“è‡ªå·±åˆ°ç›´è¿ç½‘ç»œçš„è·ç¦»ä¸º1ã€‚</li>
<li>2ã€æ¯ä¸ªè·¯ç”±å™¨<strong>ä»…å’Œç›¸é‚»è·¯ç”±å™¨</strong>å‘¨æœŸæ€§åœ°äº¤æ¢å¹¶æ›´æ–°è·¯ç”±ä¿¡æ¯ã€‚</li>
<li>3ã€è‹¥å¹²æ¬¡äº¤æ¢å’Œæ›´æ–°åï¼Œæ¯ä¸ªè·¯ç”±å™¨éƒ½çŸ¥é“åˆ°è¾¾æœ¬ASå†…å„ç½‘ç»œçš„æœ€çŸ­è·ç¦»å’Œä¸‹ä¸€è·³åœ°å€ï¼Œç§°ä¸ºæ”¶æ•›ã€‚</li>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715135934147.png" style="zoom:67%;" /></li>
</ul></li>
<li><p><strong>è·¯ç”±æ¡ç›®çš„æ›´æ–°è§„åˆ™</strong>ï¼š</p>
<ul>
<li><p>å‡è®¾Cå‘Då‘é€å°è£…æœ‰è·¯ç”±ä¿¡æ¯çš„RIPæ›´æ–°æŠ¥æ–‡</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715140223941.png" style="zoom:50%;" /></p></li>
<li><p>è·¯ç”±å™¨Dæ”¶åˆ°æŠ¥æ–‡åï¼Œæœ‰ä¸¤ä¸ªæ­¥éª¤</p>
<ul>
<li>1ã€æ›´æ–°å‘æ¥çš„è·¯ç”±è¡¨ï¼Œå…·ä½“æ­¥éª¤ï¼šå°†ä¸‹ä¸€è·³å…¨éƒ¨æ”¹æˆCï¼Œç„¶åè·ç¦»å¢åŠ 1</li>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715140524648.png" style="zoom: 67%;" /></li>
<li>2ã€æ ¹æ®æ”¹é€ åçš„è·¯ç”±è¡¨æ”¹é€ Dçš„è·¯ç”±è¡¨ï¼š
<ul>
<li>åˆ°è¾¾ç›®çš„ç½‘ç»œå¦‚æœä¸‹ä¸€è·³ç›¸åŒï¼Œç”¨æœ€æ–°æ¶ˆæ¯æ›´æ–°ã€‚</li>
<li>åˆ°è¾¾ç›®çš„ç½‘ç»œå¦‚æœä¸‹ä¸€è·³ä¸åŒï¼Œæ–°è·¯ç”±å¦‚æœæœ‰ä¼˜åŠ¿åˆ™æ›´æ–°ï¼Œå¦‚æœç­‰ä»·åˆ™æ·»åŠ ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ã€‚</li>
<li>å¦‚æœå‘ç°æ–°çš„ç›®çš„ç½‘ç»œï¼Œåˆ™æ·»åŠ ã€‚</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715140751946.png" style="zoom:67%;" /></p>
<ul>
<li>RIPå­˜åœ¨é—®é¢˜ï¼š
<ul>
<li>åæ¶ˆæ¯ä¼ æ’­çš„æ…¢â€”è·¯ç”±ç¯è·¯é—®é¢˜</li>
<li>å¯è¡Œè§£å†³æ–¹æ¡ˆï¼š
<ul>
<li>é™åˆ¶æœ€å¤§è·¯å¾„è·ç¦»ä¸º15ï¼ˆ16è¡¨ç¤ºä¸å¯è¾¾ï¼‰</li>
<li>å½“è·¯ç”±è¡¨å‘ç”Ÿå˜åŒ–æ—¶å°±ç«‹å³å‘é€æ›´æ–°æŠ¥æ–‡ï¼ˆå³â€œè§¦å‘æ›´æ–°â€ï¼‰ï¼Œè€Œä¸ä»…æ˜¯å‘¨æœŸæ€§å‘é€</li>
<li>è®©è·¯ç”±å™¨è®°å½•æ”¶åˆ°æŸç‰¹å®šè·¯ç”±ä¿¡æ¯çš„æ¥å£ï¼Œè€Œä¸è®©åŒä¸€è·¯ç”±ä¿¡æ¯å†é€šè¿‡æ­¤æ¥å£å‘åæ–¹å‘ä¼ é€ï¼ˆå³â€œæ°´å¹³åˆ†å‰²"ï¼‰</li>
</ul></li>
</ul></li>
</ul>
<h4
id="åäºŒå¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆospfåè®®">åäºŒã€å¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆOSPFåè®®ï¼š</h4>
<ul>
<li><p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li><p>ä¸é™åˆ¶ç½‘ç»œè§„æ¨¡ï¼Œæ”¶æ•›å¿«ã€‚</p></li>
<li><p>åŸºäºé“¾è·¯çŠ¶æ€</p></li>
<li><p>é“¾è·¯çŠ¶æ€æ˜¯æŒ‡æœ¬è·¯ç”±å™¨éƒ½å’Œå“ªäº›è·¯ç”±å™¨ç›¸é‚»ï¼Œä»¥åŠç›¸åº”é“¾è·¯çš„â€œä»£ä»·â€ï¼ˆcostï¼‰ã€‚</p>
<ul>
<li>â€œä»£ä»·â€ç”¨æ¥è¡¨ç¤ºè´¹ç”¨ã€è·ç¦»ã€æ—¶å»¶ã€å¸¦å®½ï¼Œç­‰ç­‰ã€‚è¿™äº›éƒ½ç”±ç½‘ç»œç®¡ç†äººå‘˜æ¥å†³å®šã€‚ï¼‰</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715141321395.png"
title="fig:" alt="image-20220715141321395" /></li>
</ul></li>
</ul></li>
<li><p>OSPFç›¸é‚»è·¯ç”±å™¨ä¹‹é—´é€šè¿‡<strong>äº¤äº’é—®å€™åˆ†ç»„ï¼Œå»ºç«‹å’Œç»´æŠ¤é‚»å±…å…³ç³»</strong></p>
<ul>
<li>40sæœªæ”¶åˆ°æ¥è‡ªå¦æ®è·¯ç”±å™¨çš„é—®å€™åˆ†ç»„ï¼Œåˆ™è®¤ä¸ºè¯¥é‚»å±…ä¸å¯è¾¾ã€‚</li>
<li>å‘é€å‘¨æœŸä¸º10s</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715141512773.png" /></li>
</ul></li>
<li><p>ä½¿ç”¨OSPFçš„æ¯ä¸ªè·¯ç”±å™¨éƒ½ä¼šäº§ç”Ÿ<strong>é“¾è·¯çŠ¶æ€é€šå‘ŠLSAï¼ˆLink State
Advertisementï¼‰</strong>ã€‚LSAä¸­åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>ç›´è¿ç½‘ç»œçš„é“¾è·¯çŠ¶æ€ä¿¡æ¯</li>
<li>é‚»å±…è·¯ç”±å™¨çš„é“¾è·¯çŠ¶æ€ä¿¡æ¯</li>
<li>LSAè¢«å°è£…åœ¨<strong>é“¾è·¯çŠ¶æ€æ›´æ–°åˆ†ç»„LSUä¸­</strong>ï¼Œé‡‡ç”¨æ´ªæ³›æ³•å‘é€ã€‚</li>
</ul></li>
<li><p>ä½¿ç”¨OSPFçš„æ¯ä¸ªè·¯ç”±å™¨éƒ½æœ‰ä¸€ä¸ª<strong>é“¾è·¯çŠ¶æ€æ•°æ®åº“LSDBï¼Œç”¨äºå­˜å‚¨LSAã€‚</strong>é€šè¿‡å„è·¯ç”±å™¨æ´ªæ³›å‘é€å°è£…æœ‰è‡ªå·±LSAçš„LSUåˆ†ç»„ï¼Œå„è·¯ç”±å™¨çš„LSDBæœ€ç»ˆå°†è¾¾åˆ°ä¸€è‡´ã€‚</p>
<ul>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715141716322.png" style="zoom:50%;" /></li>
</ul></li>
<li><p>ä½¿ç”¨OSPFçš„<strong>å„è·¯ç”±å™¨åŸºäºLSDBè¿›è¡Œæœ€çŸ­è·¯å¾„ä¼˜å…ˆSPFè®¡ç®—</strong>ï¼Œæ„å»ºå‡ºå„è‡ªåˆ°è¾¾å…¶ä»–å„è·¯ç”±å™¨çš„æœ€çŸ­è·¯å¾„ï¼Œå³æ„å»ºå„è‡ªçš„è·¯ç”±è¡¨ã€‚</p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715141814166.png" /></p>
<ul>
<li>OSPFçš„äº”ç§åˆ†ç»„ç±»å‹ï¼š
<ul>
<li>ç±»å‹1ï¼Œ<strong>é—®å€™ï¼ˆHelloï¼‰åˆ†ç»„</strong>ï¼Œç”¨æ¥å‘ç°å’Œç»´æŠ¤é‚»å±…è·¯ç”±å™¨çš„å¯è¾¾æ€§ã€‚</li>
<li>ç±»å‹2ï¼Œ<strong>æ•°æ®åº“æè¿°ï¼ˆDatabase
Descriptionï¼‰åˆ†ç»„</strong>ï¼Œå‘é‚»å±…è·¯ç”±å™¨ç»™å‡ºè‡ªå·±çš„é“¾è·¯çŠ¶æ€æ•°æ®åº“ä¸­çš„æ‰€æœ‰é“¾è·¯çŠ¶æ€é¡¹ç›®çš„æ‘˜è¦ä¿¡æ¯</li>
<li>ç±»å‹3ï¼Œ<strong>é“¾è·¯çŠ¶æ€è¯·æ±‚ï¼ˆLink State
Requestï¼‰åˆ†ç»„</strong>ï¼Œå‘é‚»å±…è·¯ç”±å™¨è¯·æ±‚å‘é€æŸäº›é“¾è·¯çŠ¶æ€é¡¹ç›®çš„è¯¦ç»†ä¿¡æ¯ã€‚</li>
<li>ç±»å‹4ï¼Œ<strong>é“¾è·¯çŠ¶æ€æ›´æ–°ï¼ˆLink State
Updateï¼‰åˆ†ç»„</strong>ï¼Œè·¯ç”±å™¨ä½¿ç”¨è¿™ç§åˆ†ç»„å°†å…¶é“¾è·¯çŠ¶æ€è¿›è¡Œæ´ªæ³›å‘é€ï¼Œå³ç”¨æ´ªæ³›æ³•å¯¹å…¨ç½‘æ›´æ–°é“¾è·¯çŠ¶æ€ã€‚</li>
<li>ç±»å‹5ï¼Œ<strong>é“¾è·¯çŠ¶æ€ç¡®è®¤ï¼ˆLink State
Acknowledgmentï¼‰åˆ†ç»„</strong>ï¼Œè¿™æ˜¯å¯¹é“¾è·¯çŠ¶æ€æ›´æ–°åˆ†ç»„çš„ç¡®è®¤åˆ†ç»„ã€‚</li>
</ul></li>
<li>OSPFçš„åŸºæœ¬å·¥ä½œè¿‡ç¨‹ï¼š
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715142215113.png" /></li>
</ul></li>
<li>DR/BDRè·¯ç”±å™¨ï¼š
<ul>
<li>åœ¨å¤šç‚¹æ¥å…¥ç½‘ç»œä¸­ï¼Œ</li>
<li>é€‰ä¸¾<strong>æŒ‡å®šè·¯ç”±å™¨DRï¼ˆdesignated
routerï¼‰</strong>å’Œ<strong>å¤‡ç”¨çš„æŒ‡å®šè·¯ç”±å™¨BDRï¼ˆbackup designated
routerï¼‰</strong></li>
<li>æ‰€æœ‰çš„éDR/BDRåªä¸DR/BDRå»ºç«‹é‚»å±…å…³ç³»ï¼ŒéDR/BDRä¹‹é—´é€šè¿‡DR/BDRäº¤æ¢ä¿¡æ¯</li>
</ul></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715142449139.png" /></p>
<ul>
<li><p>ä¸ºäº†ä½¿OSPFèƒ½å¤Ÿç”¨äºè§„æ¨¡å¾ˆå¤§çš„ç½‘ç»œï¼ŒOSPFæŠŠä¸€ä¸ªè‡ªæ²»ç³»ç»Ÿå†åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªæ›´å°çš„èŒƒå›´ï¼Œå«åšåŒºåŸŸï¼ˆAreaï¼‰</p>
<ul>
<li><p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715142704821.png" /></p></li>
<li><p>è¿™æ ·ä½¿å¾—é“¾è·¯çŠ¶æ€é€šå‘Šä»…éœ€è¦åœ¨åŒºåŸŸå†…éƒ¨è¿›è¡Œï¼Œå‡å°‘äº†ç½‘ç»œä¸­çš„é€šä¿¡é‡ã€‚</p></li>
<li><p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715142752029.png" /></p></li>
</ul></li>
</ul>
<h4 id="åä¸‰è¾¹ç•Œç½‘å…³åè®®bgp">åä¸‰ã€è¾¹ç•Œç½‘å…³åè®®BGPï¼š</h4>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715143025813.png"
alt="image-20220715143025813" />
<figcaption aria-hidden="true">image-20220715143025813</figcaption>
</figure>
<p>â€‹
<strong>ç”±äºæ²¡æœ‰ç»Ÿä¸€çš„åº¦é‡ï¼Œæ‰€ä»¥è€ƒè™‘æœ€ä½³è·¯ç”±æ˜¯æ²¡æœ‰æ„ä¹‰çš„</strong></p>
<p>â€‹
<strong>è‡ªæ²»ç³»ç»Ÿä¹‹é—´çš„è·¯ç”±é€‰æ‹©å¿…é¡»è€ƒè™‘ç›¸å…³ç­–ç•¥ï¼ˆæ”¿æ²»ï¼Œç»æµï¼Œå®‰å…¨ç­‰ï¼‰</strong></p>
<p>â€‹
<strong>åŸºäºä¸Šè¿°ç­–ç•¥,BGPåªèƒ½æ˜¯åŠ›æ±‚å¯»æ‰¾ä¸€æ¡èƒ½å¤Ÿåˆ°è¾¾ç›®çš„ç½‘ç»œä¸”æ¯”è¾ƒå¥½çš„è·¯ç”±ï¼ˆä¸èƒ½å…œåœˆå­ï¼‰ï¼Œè€Œå¹¶éè¦å¯»æ‰¾ä¸€æ¡æœ€ä½³è·¯ç”±</strong></p>
<ul>
<li><strong>BGPå·¥ä½œåŸç†ï¼š</strong>
<ul>
<li>åœ¨é…ç½®BGPæ—¶ï¼Œæ¯ä¸ªè‡ªæ²»ç³»ç»Ÿçš„ç®¡ç†å‘˜è¦é€‰æ‹©è‡³å°‘ä¸€ä¸ªè·¯ç”±å™¨ä½œä¸ºè¯¥è‡ªæ²»ç³»ç»Ÿçš„â€œBGPå‘è¨€äººâ€ã€‚</li>
<li>ä¸åŒè‡ªæ²»ç³»ç»Ÿçš„BGPå‘è¨€äººè¦äº¤æ¢è·¯ç”±ä¿¡æ¯ï¼Œé¦–å…ˆå¿…é¡»å»ºç«‹TCPè¿æ¥ï¼Œç«¯å£å·ä¸º179
<ul>
<li>åœ¨æ­¤TCPè¿æ¥ä¸Šäº¤æ¢BGPæŠ¥æ–‡ä»¥å»ºç«‹BGPä¼šè¯</li>
<li>åˆ©ç”¨BGPä¼šè¯äº¤æ¢è·¯ç”±ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œå¢åŠ æ–°çš„è·¯ç”±ï¼Œæˆ–æ’¤é”€è¿‡æ—¶çš„è·¯ç”±ï¼Œä»¥åŠæŠ¥å‘Šå‡ºé”™çš„æƒ…å†µç­‰ï¼‰</li>
<li>ä½¿ç”¨TCPè¿æ¥äº¤æ¢è·¯ç”±ä¿¡æ¯çš„ä¸¤ä¸ªBGPå‘è¨€äººï¼Œå½¼æ­¤ç§°ä¸ºå¯¹æ–¹çš„é‚»ç«™ï¼ˆneighborï¼‰æˆ–å¯¹ç­‰ç«™ï¼ˆpeerï¼‰</li>
</ul></li>
<li>BGPå‘è¨€äººé™¤äº†è¿è¡ŒBGPå¤–ï¼Œè¿˜å¿…é¡»è¿è¡Œè‡ªå·±æ‰€åœ¨è‡ªæ²»ç³»ç»Ÿæ‰€ä½¿ç”¨çš„å†…éƒ¨ç½‘å…³åè®®IGPï¼Œä¾‹å¦‚OSPFæˆ–RIPã€‚</li>
<li><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715143347153.png" style="zoom:67%;" /></li>
<li>å½“BGPå‘è¨€äººäº’ç›¸äº¤æ¢äº†ç½‘ç»œå¯è¾¾æ€§çš„ä¿¡æ¯åï¼Œå„BGPå‘è¨€äººå°±æ ¹æ®æ‰€é‡‡ç”¨çš„ç­–ç•¥ä»æ”¶åˆ°çš„è·¯ç”±ä¿¡æ¯ä¸­æ‰¾å‡ºåˆ°è¾¾å„è‡ªæ²»ç³»ç»Ÿçš„è¾ƒå¥½çš„è·¯ç”±ã€‚ä¹Ÿå°±æ˜¯æ„é€ å‡ºæ ‘å½¢ç»“æ„ã€ä¸å­˜åœ¨å›è·¯çš„è‡ªæ²»ç³»ç»Ÿè¿é€šå›¾ã€‚</li>
</ul></li>
<li><strong>BGPçš„å››ç§æŠ¥æ–‡</strong>ï¼š
<ul>
<li>OPENï¼ˆæ‰“å¼€ï¼‰æŠ¥æ–‡ï¼šç”¨æ¥ä¸ç›¸é‚»çš„å¦ä¸€ä¸ªBGPå‘è¨€äººå»ºç«‹å…³ç³»ï¼Œä½¿é€šä¿¡åˆå§‹åŒ–</li>
<li>UPDATEï¼ˆæ›´æ–°ï¼‰æŠ¥æ–‡ï¼šç”¨æ¥é€šå‘ŠæŸä¸€è·¯ç”±çš„ä¿¡æ¯ï¼Œä»¥åŠåˆ—å‡ºè¦æ’¤é”€çš„å¤šæ¡è·¯ç”±</li>
<li>KEEPALIVEï¼ˆä¿æ´»ï¼‰æŠ¥æ–‡ï¼šç”¨æ¥å‘¨æœŸæ€§åœ°è¯å®é‚»ç«™çš„è¿é€šæ€§ã€‚</li>
<li>NOTIFICATIONï¼ˆé€šçŸ¥ï¼‰æŠ¥æ–‡ï¼šç”¨æ¥å‘é€æ£€æµ‹åˆ°çš„å·®é”™ã€‚</li>
</ul></li>
</ul>
<h4 id="åå››ipæ•°æ®åŒ…çš„é¦–éƒ¨æ ¼å¼">åå››ã€IPæ•°æ®åŒ…çš„é¦–éƒ¨æ ¼å¼</h4>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715150218837.png" /></p>
<ul>
<li><p>ç‰ˆæœ¬ï¼šæŒ‡IPV4</p></li>
<li><p>é¦–éƒ¨é•¿åº¦ï¼šå 4æ¯”ç‰¹ï¼Œè¡¨ç¤ºIPæ•°æ®æŠ¥é¦–éƒ¨çš„é•¿åº¦ã€‚è¯¥å­—æ®µçš„å–å€¼ä»¥4å­—èŠ‚ä¸ºå•ä½ã€‚</p></li>
<li><p>å¯é€‰å­—æ®µï¼šé•¿åº¦ä»1ä¸ªå­—èŠ‚åˆ°40ä¸ªå­—èŠ‚ä¸ç­‰ã€‚ç”¨æ¥æ”¯æŒæ’é”™ã€æµ‹é‡åŠå®‰å…¨ç­‰æªæ–½ã€‚</p></li>
<li><p>å¡«å……å­—æ®µï¼šç¡®ä¿é¦–éƒ¨é•¿åº¦ä¸º4å­—èŠ‚çš„æ•´æ•°å€ã€‚ä½¿ç”¨å…¨0è¿›è¡Œå¡«å……ã€‚</p></li>
<li><p>åŒºåˆ†æœåŠ¡ï¼šå 8æ¯”ç‰¹ï¼Œç”¨æ¥è·å¾—æ›´å¥½çš„æœåŠ¡</p></li>
<li><p>æ€»é•¿åº¦ï¼šå 16æ¯”ç‰¹ï¼Œè¡¨ç¤ºIPæ•°æ®æŠ¥çš„æ€»é•¿åº¦ï¼ˆé¦–éƒ¨+æ•°æ®è½½è·ï¼‰ã€‚</p></li>
<li><p>æ ‡è¯†ã€æ ‡å¿—ã€ç‰‡åç§»ï¼šç”¨äºIPæ•°æ®æŠ¥åˆ†ç‰‡</p>
<ul>
<li><p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715151418051.png" style="zoom:67%;" /></p></li>
<li><p>æ ‡è¯†ï¼šå 16æ¯”ç‰¹ï¼Œå±äºåŒä¸€ä¸ªæ•°æ®æŠ¥çš„å„åˆ†ç‰‡æ•°æ®æŠ¥åº”è¯¥å…·æœ‰ç›¸åŒçš„æ ‡è¯†ã€‚</p></li>
<li><p>æ ‡å¿—ï¼šå 3æ¯”ç‰¹ï¼Œå„æ¯”ç‰¹å«ä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>DFä½ï¼š1è¡¨ç¤ºä¸å…è®¸åˆ†ç‰‡ï¼› 0è¡¨ç¤ºå…è®¸åˆ†ç‰‡</li>
<li>MFä½ï¼š1è¡¨ç¤ºâ€œåé¢è¿˜æœ‰åˆ†ç‰‡â€ï¼›0è¡¨ç¤ºâ€œè¿™æ˜¯æœ€åä¸€ä¸ªåˆ†ç‰‡â€</li>
<li>ä¿ç•™ä½ï¼šå¿…é¡»ä¸º0</li>
</ul></li>
<li><p>ç‰‡åç§»ï¼šå 13æ¯”ç‰¹ï¼ŒæŒ‡å‡ºåˆ†ç‰‡æ•°æ®æŠ¥çš„æ•°æ®è½½è·éƒ¨åˆ†åç§»å…¶åœ¨åŸæ•°æ®æŠ¥çš„ä½ç½®æœ‰å¤šå°‘ä¸ªå•ä½ã€‚ä»¥8ä¸ªå­—èŠ‚ä¸ºå•ä½</p></li>
</ul></li>
<li><p>åˆ†ç‰‡ç¤ºä¾‹ï¼š</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715151832054.png" /></p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715151823233.png" /></p>
<ul>
<li><p>ç”Ÿå­˜æ—¶é—´TTLï¼šå 8æ¯”ç‰¹ï¼Œæœ€åˆä»¥ç§’ä¸ºå•ä½ï¼Œæœ€å¤§ç”Ÿå­˜å‘¨æœŸä¸º255ç§’ï¼›è·¯ç”±å™¨è½¬å‘IPæ•°æ®æŠ¥æ—¶ï¼Œå°†IPæ•°æ®æŠ¥é¦–éƒ¨ä¸­çš„è¯¥å­—æ®µçš„å€¼å‡å»IPæ•°æ®æŠ¥åœ¨æœ¬è·¯ç”±å™¨ä¸Šæ‰€è€—è´¹çš„æ—¶é—´ï¼Œè‹¥ä¸ä¸º0å°±è½¬å‘ï¼Œå¦åˆ™å°±ä¸¢å¼ƒã€‚ç°åœ¨ä»¥â€œè·³æ•°â€ä¸ºå•ä½ï¼Œè·¯ç”±å™¨è½¬å‘IPæ•°æ®æŠ¥æ—¶ï¼Œå°†IPæ•°æ®æŠ¥é¦–éƒ¨ä¸­çš„è¯¥å­—æ®µçš„å€¼å‡1ï¼Œè‹¥ä¸ä¸º0å°±è½¬å‘ï¼Œå¦åˆ™å°±ä¸¢å¼ƒã€‚</p></li>
<li><p>åè®®ï¼šå 8æ¯”ç‰¹ï¼ŒæŒ‡æ˜IPv4æ•°æ®æŠ¥çš„æ•°æ®éƒ¨åˆ†æ˜¯ä½•ç§åè®®æ•°æ®å•å…ƒã€‚</p></li>
</ul>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715153014423.png" /></p>
<ul>
<li>é¦–éƒ¨æ£€éªŒå’Œï¼šå 16æ¯”ç‰¹ï¼Œç”¨æ¥æ£€æµ‹é¦–éƒ¨åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦å‡ºç°å·®é”™ã€‚æ¯”CRCæ£€éªŒç ç®€å•ï¼Œç§°ä¸ºå› ç‰¹ç½‘æ£€éªŒå’Œã€‚</li>
</ul>
<h4 id="åäº”ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®icmp">åäº”ã€ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®ICMP</h4>
<p>â€‹
ä¸ºäº†æ›´æœ‰æ•ˆåœ°è½¬å‘IPæ•°æ®æŠ¥å’Œæé«˜äº¤ä»˜æˆåŠŸçš„æœºä¼šï¼Œåœ¨ç½‘é™…å±‚ä½¿ç”¨äº†ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®ICMPï¼ˆInternet
Control Message Protocolï¼‰ã€‚</p>
<p>â€‹
ä¸»æœºæˆ–è·¯ç”±å™¨ä½¿ç”¨ICMPæ¥å‘é€<strong>å·®é”™æŠ¥å‘ŠæŠ¥æ–‡å’Œè¯¢é—®æŠ¥æ–‡</strong>ã€‚</p>
<p>â€‹ ICMPæŠ¥æ–‡è¢«å°è£…åœ¨IPæ•°æ®æŠ¥ä¸­å‘é€ã€‚</p>
<ul>
<li><p><strong>å·®é”™æŠ¥å‘ŠæŠ¥æ–‡</strong>å…±ä»¥ä¸‹äº”ç§æŠ¥æ–‡ï¼š</p>
<ul>
<li>ç»ˆç‚¹ä¸å¯è¾¾ï¼š
<ul>
<li>å½“è·¯ç”±å™¨æˆ–ä¸»æœºä¸èƒ½äº¤ä»˜æ•°æ®æŠ¥æ—¶ï¼Œå°±å‘æºç‚¹å‘é€ç»ˆç‚¹ä¸å¯è¾¾æŠ¥æ–‡ã€‚å…·ä½“å¯å†æ ¹æ®ICMPçš„ä»£ç å­—æ®µç»†åˆ†ä¸ºç›®çš„ç½‘ç»œä¸å¯è¾¾ã€ç›®çš„ä¸»æœºä¸å¯è¾¾ã€ç›®çš„åè®®ä¸å¯è¾¾ã€ç›®çš„ç«¯å£ä¸å¯è¾¾ã€ç›®çš„ç½‘ç»œæœªçŸ¥ã€ç›®çš„ä¸»æœºæœªçŸ¥ç­‰13ç§é”™è¯¯ã€‚</li>
</ul></li>
<li>æºç‚¹æŠ‘åˆ¶ï¼š
<ul>
<li>å½“è·¯ç”±å™¨æˆ–ä¸»æœºç”±äºæ‹¥å¡è€Œä¸¢å¼ƒæ•°æ®æŠ¥æ—¶ï¼Œå°±å‘æºç‚¹å‘é€æºç‚¹æŠ‘åˆ¶æŠ¥æ–‡ï¼Œä½¿æºç‚¹çŸ¥é“åº”å½“æŠŠæ•°æ®æŠ¥çš„å‘é€é€Ÿç‡æ”¾æ…¢ã€‚</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715153421685.png" /></li>
</ul></li>
<li>æ—¶é—´è¶…è¿‡ï¼š
<ul>
<li>å½“è·¯ç”±å™¨æ”¶åˆ°ä¸€ä¸ªç›®çš„IPåœ°å€ä¸æ˜¯è‡ªå·±çš„IPæ•°æ®æŠ¥ï¼Œä¼šå°†å…¶ç”Ÿå­˜æ—¶é—´TTLå­—æ®µçš„å€¼å‡1ã€‚è‹¥ç»“æœä¸ä¸º0ï¼Œåˆ™å°†è¯¥IPæ•°æ®æŠ¥è½¬å‘å‡ºå»ï¼›è‹¥ç»“æœä¸º0ï¼Œé™¤ä¸¢å¼ƒè¯¥IPæ•°æ®æŠ¥å¤–ï¼Œè¿˜è¦å‘æºç‚¹å‘é€æ—¶é—´è¶…è¿‡æŠ¥æ–‡ã€‚</li>
</ul></li>
<li>å‚æ•°é—®é¢˜ï¼š
<ul>
<li>å½“è·¯ç”±å™¨æˆ–ç›®çš„ä¸»æœºæ”¶åˆ°IPæ•°æ®æŠ¥åï¼Œæ ¹æ®å…¶é¦–éƒ¨ä¸­çš„æ£€éªŒå’Œå­—æ®µå‘ç°é¦–éƒ¨åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°äº†è¯¯ç ï¼Œå°±ä¸¢å¼ƒè¯¥æ•°æ®æŠ¥ï¼Œå¹¶å‘æºç‚¹å‘é€å‚æ•°é—®é¢˜æŠ¥æ–‡ã€‚</li>
</ul></li>
<li>æ”¹å˜è·¯ç”±ï¼ˆé‡å®šå‘ï¼‰ï¼š
<ul>
<li>è·¯ç”±å™¨æŠŠæ”¹å˜è·¯ç”±æŠ¥æ–‡å‘é€ç»™ä¸»æœºï¼Œè®©ä¸»æœºçŸ¥é“ä¸‹æ¬¡åº”å°†æ•°æ®æŠ¥å‘é€ç»™å¦å¤–çš„è·¯ç”±å™¨ï¼ˆå¯é€šè¿‡æ›´å¥½çš„è·¯ç”±ï¼‰ã€‚</li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715153600977.png" /></li>
</ul></li>
</ul></li>
<li><p><strong>è¯¢é—®æŠ¥æ–‡</strong>æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š</p>
<ul>
<li>å›é€è¯·æ±‚å’Œå›ç­”ï¼š
<ul>
<li>ICMPå›é€è¯·æ±‚æŠ¥æ–‡æ˜¯ç”±ä¸»æœºæˆ–è·¯ç”±å™¨å‘ä¸€ä¸ªç‰¹å®šçš„ç›®çš„ä¸»æœºå‘å‡ºçš„è¯¢é—®ã€‚
æ”¶åˆ°æ­¤æŠ¥æ–‡çš„ä¸»æœºå¿…é¡»ç»™æºä¸»æœºæˆ–è·¯ç”±å™¨å‘é€ICMPå›é€å›ç­”æŠ¥æ–‡ã€‚è¿™ç§è¯¢é—®æŠ¥æ–‡ç”¨æ¥æµ‹è¯•ç›®çš„ç«™æ˜¯å¦å¯è¾¾åŠäº†è§£å…¶æœ‰å…³çŠ¶æ€ã€‚</li>
</ul></li>
<li>æ—¶é—´æˆ³è¯·æ±‚å’Œå›ç­”ï¼š
<ul>
<li>ICMPæ—¶é—´æˆ³è¯·æ±‚æŠ¥æ–‡æ˜¯è¯·æŸä¸ªä¸»æœºæˆ–è·¯ç”±å™¨å›ç­”å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ã€‚åœ¨ICMPæ—¶é—´æˆ³å›ç­”æŠ¥æ–‡ä¸­æœ‰ä¸€ä¸ª32ä½çš„å­—æ®µï¼Œå…¶ä¸­å†™å…¥çš„æ•´æ•°ä»£è¡¨ä»
1900å¹´1æœˆ1æ—¥èµ·åˆ°å½“å‰æ—¶åˆ»ä¸€å…±æœ‰å¤šå°‘ç§’ã€‚è¿™ç§è¯¢é—®æŠ¥æ–‡ç”¨æ¥è¿›è¡Œæ—¶é’ŸåŒæ­¥å’Œæµ‹é‡æ—¶é—´ã€‚</li>
</ul></li>
</ul></li>
<li><p>åº”ç”¨ä¸¾ä¾‹ï¼š</p>
<ul>
<li><p>åˆ†ç»„ç½‘é—´æ¢æµ‹PINGï¼š</p>
<ul>
<li>ç”¨æ¥æµ‹è¯•ä¸»æœºæˆ–è·¯ç”±å™¨é—´çš„è¿é€šæ€§</li>
<li>åº”ç”¨å±‚ç›´æ¥ä½¿ç”¨ç½‘é™…å±‚çš„ICMPï¼ˆæ²¡æœ‰é€šè¿‡è¿è¾“å±‚çš„TCPæˆ–UDPï¼‰</li>
<li>ä½¿ç”¨ICMPå›é€è¯·æ±‚å’Œå›ç­”æŠ¥æ–‡</li>
</ul></li>
<li><p>è·Ÿè¸ªè·¯ç”±traceroute</p>
<ul>
<li><p>ç”¨æ¥æµ‹è¯•IPæ•°æ®æŠ¥ä»æºä¸»æœºåˆ°è¾¾ç›®çš„ä¸»æœºè¦ç»è¿‡å“ªäº›è·¯ç”±å™¨</p></li>
<li><p>Windowsç‰ˆæœ¬</p>
<ul>
<li>tracertå‘½ä»¤</li>
<li>åº”ç”¨å±‚ç›´æ¥ä½¿ç”¨ç½‘é™…å±‚ICMP</li>
<li>ä½¿ç”¨äº†ICMPå›é€è¯·æ±‚å’Œå›ç­”æŠ¥æ–‡ä»¥åŠå·®é”™æŠ¥å‘ŠæŠ¥æ–‡</li>
</ul></li>
<li><p>Unixç‰ˆæœ¬</p>
<ul>
<li>tracerouteå‘½ä»¤</li>
<li>åœ¨è¿è¾“å±‚ä½¿ç”¨UDPåè®®</li>
<li>ä»…ä½¿ç”¨ICMPå·®é”™æŠ¥å‘ŠæŠ¥æ–‡</li>
</ul></li>
<li><p>åŸç†ï¼š</p>
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715154351576.png" /></li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715154401767.png" /></li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715154421381.png" /></li>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715154432533.png" /></li>
<li>å¦‚æ­¤å¾ªç¯å¾€å¤</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<h4 id="åå…­è™šæ‹Ÿä¸“ç”¨ç½‘vpn">åå…­ã€è™šæ‹Ÿä¸“ç”¨ç½‘VPN</h4>
<p>â€‹
<strong>åˆ©ç”¨å…¬ç”¨çš„å› ç‰¹ç½‘ä½œä¸ºæœ¬æœºæ„å„ä¸“ç”¨ç½‘ä¹‹é—´çš„é€šä¿¡è½½ä½“</strong>ï¼Œè¿™æ ·çš„ä¸“ç”¨ç½‘åˆç§°ä¸ºè™šæ‹Ÿä¸“ç”¨ç½‘ã€‚</p>
<p>â€‹
ç”±äºIPv4åœ°å€çš„ç´§ç¼ºï¼Œä¸€ä¸ªæœºæ„èƒ½å¤Ÿç”³è¯·åˆ°çš„IPV4åœ°å€æ•°é‡å¾€å¾€è¿œå°äºæœ¬æœºæ„æ‰€æ‹¥æœ‰çš„ä¸»æœºæ•°é‡ã€‚å› æ­¤ï¼Œè™šæ‹Ÿä¸“ç”¨ç½‘ä¸­çš„å„ä¸»æœºæ‰€åˆ†é…çš„åœ°å€åº”è¯¥æ˜¯æœ¬æœºæ„å¯è‡ªç”±åˆ†é…çš„ä¸“ç”¨åœ°å€ï¼Œè€Œä¸æ˜¯éœ€è¦ç”³è¯·çš„ã€åœ¨å› ç‰¹ç½‘ä¸Šä½¿ç”¨çš„å…¬æœ‰åœ°å€ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715160004940.png" /></p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715160042220.png"
alt="image-20220715160042220" />
<figcaption aria-hidden="true">image-20220715160042220</figcaption>
</figure>
<ul>
<li>å¦‚ä½•å‘é€æ•°æ®æŠ¥ï¼Ÿ
<ul>
<li><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715160245145.png" /></li>
</ul></li>
<li>åŒä¸€æœºæ„å†…ä¸åŒéƒ¨é—¨çš„å†…éƒ¨ç½‘ç»œæ‰€æ„æˆçš„è™šæ‹Ÿä¸“ç”¨ç½‘VPNåˆç§°ä¸ºå†…è”ç½‘VPNã€‚</li>
<li>æœ‰æ—¶ä¸€ä¸ªæœºæ„çš„VPNéœ€è¦æœ‰æŸäº›å¤–éƒ¨æœºæ„ï¼ˆé€šå¸¸å°±æ˜¯åˆä½œä¼™ä¼´ï¼‰å‚åŠ è¿›æ¥ã€‚è¿™æ ·çš„VPNå°±ç§°ä¸ºå¤–è”ç½‘VPNã€‚</li>
<li>åœ¨å¤–åœ°å·¥ä½œçš„å‘˜å·¥éœ€è¦è®¿é—®å…¬å¸å†…éƒ¨çš„ä¸“ç”¨ç½‘ç»œæ—¶ï¼Œåªè¦åœ¨ä»»ä½•åœ°ç‚¹æ¥å…¥åˆ°å› ç‰¹ç½‘ï¼Œè¿è¡Œé©»ç•™åœ¨å‘˜å·¥PCä¸­çš„VPNè½¯ä»¶ï¼Œåœ¨å‘˜å·¥çš„PCå’Œå…¬å¸çš„ä¸»æœºä¹‹é—´å»ºç«‹VPNéš§é“ï¼Œå³å¯è®¿é—®ä¸“ç”¨ç½‘ç»œä¸­çš„èµ„æºã€‚è¿™ç§VPNç§°ä¸ºè¿œç¨‹æ¥å…¥VPNã€‚</li>
</ul>
<h4 id="åä¸ƒç½‘ç»œåœ°å€è½¬æ¢nat">åä¸ƒã€ç½‘ç»œåœ°å€è½¬æ¢NAT</h4>
<p>â€‹
1994å¹´æå‡ºäº†ä¸€ç§ç½‘ç»œåœ°å€è½¬æ¢NATçš„æ–¹æ³•å†æ¬¡ç¼“è§£äº†IPv4åœ°å€ç©ºé—´å³å°†è€—å°½çš„é—®é¢˜ã€‚</p>
<p>â€‹
NATèƒ½ä½¿å¤§é‡<strong>ä½¿ç”¨å†…éƒ¨ä¸“ç”¨åœ°å€çš„ä¸“ç”¨ç½‘ç»œç”¨æˆ·å…±äº«å°‘é‡å¤–éƒ¨å…¨çƒåœ°å€</strong>æ¥è®¿é—®å› ç‰¹ç½‘ä¸Šçš„ä¸»æœºå’Œèµ„æºã€‚</p>
<ul>
<li>å‘é€ä¸æ¥æ”¶ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</li>
</ul>
<p>â€‹ <img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715160540637.png" /></p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715160554747.png"
alt="image-20220715160554747" />
<figcaption aria-hidden="true">image-20220715160554747</figcaption>
</figure>
<p>â€‹
ç”±äºç»å¤§å¤šæ•°çš„ç½‘ç»œåº”ç”¨éƒ½æ˜¯ä½¿ç”¨è¿è¾“å±‚åè®®TCPæˆ–UDPæ¥ä¼ é€æ•°æ®ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨è¿è¾“å±‚çš„ç«¯å£å·å’ŒIPåœ°å€ä¸€èµ·è¿›è¡Œè½¬æ¢ã€‚è¿™æ ·ï¼Œç”¨ä¸€ä¸ªå…¨çƒIPåœ°å€å°±å¯ä»¥ä½¿å¤šä¸ªæ‹¥æœ‰æœ¬åœ°åœ°å€çš„ä¸»æœºåŒæ—¶å’Œå› ç‰¹ç½‘ä¸Šçš„ä¸»æœºè¿›è¡Œé€šä¿¡ã€‚è¿™ç§å°†ç«¯å£å·å’ŒIPåœ°å€ä¸€èµ·è¿›è¡Œè½¬æ¢çš„æŠ€æœ¯å«ä½œ<strong>ç½‘ç»œåœ°å€ä¸ç«¯å£å·è½¬æ¢NAPTï¼ˆNetwork
Address and Port Translationï¼‰ã€‚</strong></p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715160700885.png" /></p>
<p><strong>æ³¨æ„ï¼šåœ¨é€šä¿¡ä¸­ï¼Œå¤–ç½‘ä¸»æœºæ˜¯ä¸èƒ½é¦–å…ˆå‘èµ·é€šä¿¡çš„ï¼Œå› ä¸ºNAPTè·¯ç”±å™¨æ”¶åˆ°æ¥è‡ªå¤–ç½‘çš„IPæ•°æ®æŠ¥åï¼Œåœ¨NAPTè½¬æ¢è¡¨ä¸­æ‰¾ä¸åˆ°ç›¸åº”çš„è®°å½•ã€‚æ•…è€Œå†…ç½‘ä¸»æœºä¸èƒ½ç›´æ¥å……å½“å› ç‰¹ç½‘æœåŠ¡å™¨</strong></p>
<p><strong>å¯¹ä¸€äº›P2Pç½‘ç»œåº”ç”¨ï¼Œéœ€è¦å¤–ç½‘ä¸»æœºä¸»åŠ¨ä¸å†…ç½‘ä¸»æœºè¿›è¡Œé€šä¿¡ï¼Œåœ¨é€šè¿‡NAT
æ—¶ä¼šé‡åˆ°é—®é¢˜ï¼Œéœ€è¦ç½‘ç»œåº”ç”¨è‡ªå·±ä½¿ç”¨ä¸€äº›ç‰¹æ®Šçš„NATç©¿è¶ŠæŠ€æœ¯æ¥è§£å†³é—®é¢˜ã€‚</strong></p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220715161612437.png"
alt="image-20220715161612437" />
<figcaption aria-hidden="true">image-20220715161612437</figcaption>
</figure>
]]></content>
      <categories>
        <category>â“¹ åŸºç¡€ç±»ç¬”è®°</category>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>Computer Network</tag>
      </tags>
  </entry>
  <entry>
    <title>ML2021è¯¾ç¨‹ç³»åˆ—ç¬”è®°2â€”â€”æœºå™¨å­¦ä¹ è®­ç»ƒä»»åŠ¡æ”»ç•¥</title>
    <url>/2021/12/19/8dab9ca264e4/</url>
    <content><![CDATA[<h3
id="hung-yi-lee-æå®æ¯…-machine-learning-2021-springè¯¾ç¨‹-week2ç¬”è®°">Hung-yi
Lee (æå®æ¯…) MACHINE LEARNING 2021 SPRINGè¯¾ç¨‹ Week2ç¬”è®°</h3>
<h3
id="è¯¾ç¨‹é“¾æ¥httpsspeech.ee.ntu.edu.twhyleeml2021-spring.html">è¯¾ç¨‹é“¾æ¥ï¼šhttps://speech.ee.ntu.edu.tw/~hylee/ml/2021-spring.html</h3>
<p>â€‹
æœ¬ç¯‡å°†ä¼šä»‹ç»ä¸€äº›æœºå™¨å­¦ä¹ æ·±åº¦å­¦ä¹ è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œå®¹æ˜“å‘ç”Ÿçš„ä¸€äº›é—®é¢˜ï¼Œä»¥åŠç»å¸¸ä½¿ç”¨çš„ä¸€äº›åŸºç¡€çš„Tricksã€‚ä¸Šç¯‡å·²ç»é˜æ˜äº†æœºå™¨å­¦ä¹ ä»»åŠ¡çš„è®­ç»ƒåˆ†ä¸ºä»¥ä¸‹ä¸‰ä¸ªé˜¶æ®µã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114110835052.png" alt="image-20220114110835052" style="zoom:25%;" /></p>
<p>â€‹ åŒæ—¶ä¹Ÿä¼šæœ‰å¯¹åº”çš„æµ‹è¯•é›†æ•°æ®è¿›è¡ŒéªŒè¯çš„éƒ¨åˆ†ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114110905969.png" alt="image-20220114110905969" style="zoom: 25%;" /></p>
<p>â€‹
é‚£ä¹ˆåœ¨è®­ç»ƒä¸æµ‹è¯•çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œä¸‹é¢çš„å›¾å°±æ˜¯ä¸€ä¸ªæ•´ä½“çš„Guidanceï¼ŒåŸºæœ¬é˜è¿°äº†å½“åœ¨è®­ç»ƒæ—¶æˆ‘ä»¬é‡åˆ°ä¸åŒçš„ç°è±¡æ—¶ï¼Œå¤§æ¦‚æ˜¯ä½•ç§é—®é¢˜æ‰€è‡´ã€‚</p>
<p>â€‹ æ­¤ç¯‡å°†ä¼šé¡ºç€ä»¥ä¸‹è¿™ä¸ªåˆ†æ”¯æ ‘è¿›è¡Œå‰åºéå†ï¼Œä¸€æ¡æ¡å¾€ä¸‹è¿›è¡Œè®²è§£ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114110925311.png" alt="image-20220114110925311" style="zoom:25%;" /></p>
<h2 id="ä¸€model-biasé—®é¢˜">ä¸€ã€Model Biasé—®é¢˜</h2>
<p>â€‹ å½“åœ¨è®­ç»ƒæ•°æ®ä¸Šå¾—åˆ°çš„Losså‡½æ•°å€¼è¾ƒå¤§çš„è¯ï¼Œå…¶ä¸­ä¸€ç§å¯èƒ½å°±æ˜¯Model
Bias.Model
Biasä¸€èˆ¬æŒ‡æ¨¡å‹ä¸å¤Ÿå¤æ‚ï¼Œæ— æ³•å¾ˆå¥½çš„æ‹Ÿåˆæ•°æ®ã€‚ä»å½¢å¼åŒ–çš„è§’åº¦æ¥è®²å°±æ˜¯ï¼Œèƒ½å¤Ÿæ‹Ÿåˆæ•°æ®çš„å‡½æ•°ï¼Œä¸åœ¨ä½ æ‰€å¯»æ‰¾çš„å‡½æ•°ç©ºé—´ä¸­ã€‚ä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼šä½ åœ¨ç¬¬ä¸€æ­¥ä¸­è®¾å®šçš„æ‹Ÿåˆå‡½æ•°ä¸ºY
= a +
bxï¼Œç„¶åä½¿ç”¨æ¢¯åº¦ä¸‹é™æƒ³è¦å¯»æ‰¾ä½¿å¾—Lossæœ€ä½çš„ä¸€ç»„aå’Œbï¼Œä½†æ˜¯ä½ ä¼šå‘ç°ï¼Œå³ä½¿ä½ æ‰¾åˆ°äº†ä½¿å¾—Lossæœ€ä½çš„ä¸€ç»„aå’Œbï¼Œè¿™ç»„aå’Œbè®¡ç®—å¾—åˆ°çš„Lossè¿˜æ˜¯å¾ˆé«˜ã€‚åŸå› å¯èƒ½æ˜¯ï¼Œä½ éœ€è¦æ‹Ÿåˆçš„æ•°æ®å…¶å®æ˜¯ä¸€ä¸ªäºŒæ¬¡å‡½æ•°ï¼Œæˆ–æ˜¯æ›´å¤æ‚çš„å‡½æ•°ï¼Œè€Œä½ å´æƒ³è¦ä½¿ç”¨çº¿æ€§å‡½æ•°å»è¿›è¡Œæ‹Ÿåˆã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220129151628264.png" /></p>
<h2 id="äºŒoptimization">äºŒã€Optimization</h2>
<p>â€‹
å½“åœ¨è®­ç»ƒæ•°æ®ä¸Šå¾—åˆ°çš„Losså‡½æ•°å€¼è¾ƒå¤§çš„è¯ï¼Œå¦å¤–ä¸€ç§å¯èƒ½å°±æ˜¯Optimizationå¯¼è‡´çš„ã€‚æ­¤ç§æƒ…å†µä¸ç¬¬ä¸€ç§ä¸åŒï¼Œå…¶æ¨¡å‹æ˜¯æœ‰èƒ½åŠ›æ‹Ÿåˆæ•°æ®çš„ï¼Œä½†æ˜¯ç”±äºä¼˜åŒ–æ–¹æ³•çš„é™åˆ¶ï¼Œæˆ‘ä»¬æ²¡æ³•æ‰¾åˆ°èƒ½å¤Ÿä½¿å¾—Losså‡½æ•°å€¼æœ€å°çš„é‚£ä¸€ç»„æœªçŸ¥å‚æ•°ã€‚æˆ‘ä»¬å…ˆå‰ä½¿ç”¨çš„Gradient
Descentç”¨äºæ±‚è§£ä¼˜åŒ–çš„æ–¹æ³•ï¼Œè¿˜æ˜¯å­˜åœ¨æ¯”è¾ƒå¤šçš„é™åˆ¶çš„ã€‚å¦‚ä¸‹å›¾ä¸ºä¾‹ï¼Œå‡è®¾Losså‡½æ•°çš„å›¾åƒå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬è®¾å®šçš„Î¸çš„èµ·ç‚¹åœ¨å·¦ä¾§ï¼Œé‚£ä¹ˆç»è¿‡ä¸€æ®µæ—¶é—´çš„æ¢¯åº¦ä¸‹é™åï¼Œå…¶ä¼šåˆ°è¾¾å›¾ä¸­è“çº¿æ‰€ç¤ºçš„Local
Minimumï¼Œä¹Ÿå°±æ˜¯å±€éƒ¨æœ€ä¼˜ï¼Œä½†æ˜¯å…¶æ°¸è¿œä¹Ÿæ— æ³•æ‰¾åˆ°å³ä¾§çš„å…¨å±€æœ€ä¼˜ã€‚å¾€å¾€ä¼˜åŒ–ç®—æ³•æ— æ³•å¾ˆå¥½çš„æ‰§è¡Œæ˜¯ç”±äºæ¨¡å‹è¿‡äºå¤æ‚ï¼Œæˆ–ä¸åŒçš„ç‰¹å¾æ•°æ®çš„å°ºåº¦ç›¸å·®è¿‡å¤§ç­‰åŸå› å¯¼è‡´ã€‚</p>
<p>â€‹
æ­¤å¤„ä»…å…ˆç®€å•çš„ä»‹ç»Optimizationæ˜¯æ€æ ·ä¸€ç§é—®é¢˜ï¼Œåç»­ç¬¬å…«ç« ä¸­ä¼šç»§ç»­æ¢è®¨è¿™ç±»é—®é¢˜çš„äº§ç”ŸåŸå› ä»¥åŠåœ¨ç¬¬ä¹ç« ä¸­è®²å¦‚ä½•è§£å†³ä¼˜åŒ–è¿™ä¸€é—®é¢˜ï¼ˆå¦‚ä½•é€ƒå‡ºShaddle
Pointï¼‰ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114111434996.png" alt="image-20220114111434996" style="zoom: 25%;" /></p>
<h2
id="ä¸‰å¦‚ä½•åŒºåˆ†æ˜¯model-biasè¿˜æ˜¯optimizationå¯¼è‡´çš„train-lossè¿‡å¤§">ä¸‰ã€å¦‚ä½•åŒºåˆ†æ˜¯Model
Biasè¿˜æ˜¯Optimizationå¯¼è‡´çš„Train Lossè¿‡å¤§ï¼Ÿ</h2>
<p>â€‹
æˆ‘ä»¬å…ˆå‰è¯´ï¼Œå½“åœ¨è®­ç»ƒæ•°æ®ä¸Šå¾—åˆ°çš„Losså‡½æ•°å€¼è¾ƒå¤§çš„è¯ï¼Œè¿™ä¸¤ç§é—®é¢˜éƒ½æœ‰å¯èƒ½ï¼Œé‚£ä¹ˆä¸€èˆ¬è€Œè¨€å¦‚ä½•åŒºåˆ†å‘¢ï¼Ÿä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡æ¨¡å‹ä¸æ¨¡å‹çš„æ¯”è¾ƒæ¥è·å¾—ä¸€äº›è§è§£ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œåœ¨å³ä¾§çš„Training
Dataæ˜¾ç¤ºçš„å›¾åƒä¸­ï¼Œ20å±‚çš„ç½‘ç»œå·²ç»èƒ½å¤Ÿå°†Training
Erroré™è‡³æ¯”è¾ƒä½çš„æ°´å‡†äº†ï¼Œé‚£ä¹ˆ56å±‚çš„è¿™ä¸ªç½‘ç»œTraining
Errorè¿˜å¤„äºä¸€ä¸ªè¾ƒé«˜çš„æ°´å‡†ï¼Œé‚£ä¹ˆè‚¯å®šæ˜¯Optimizaitoné—®é¢˜ï¼Œè€Œä¸æ˜¯Model
Biasçš„é—®é¢˜ã€‚ä¸ºä½•è¿™ä¹ˆè¯´å‘¢ï¼Ÿå› ä¸º56å±‚çš„ç½‘ç»œè‚¯å®šæ¯”20å±‚çš„ç½‘è·¯å¤æ‚ï¼Œå¦‚æœ20å±‚çš„ç½‘ç»œå·²ç»èƒ½å¤Ÿå¾ˆå¥½çš„æ‹Ÿåˆè®­ç»ƒæ•°æ®äº†ï¼Œé‚£ä¹ˆ56å±‚çš„ç½‘ç»œè‚¯å®šæ˜¯å…·æœ‰æ‹Ÿåˆè®­ç»ƒæ•°æ®çš„èƒ½åŠ›çš„ï¼Œä½†æ˜¯ç°åœ¨Training
Errorè¿˜å±…é«˜ä¸ä¸‹ï¼Œè¯´æ˜æ˜¯ä¼˜åŒ–çš„æ—¶å€™å‡ºç°äº†é—®é¢˜ï¼Œæˆ–è€…æ˜¯è¿›å…¥äº†ä¸€ä¸ªå±€éƒ¨æœ€ä¼˜ç‚¹ä¸­ï¼Œå¯¼è‡´å…¶æ‰¾ä¸åˆ°æœ€å¥½çš„é‚£ä¸€ç»„å‚æ•°ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114111512628.png" alt="image-20220114111512628" style="zoom:25%;" /></p>
<h2
id="å››è®­ç»ƒæ—¶èƒ½å¤Ÿé¿å…ä¸Šè¿°æƒ…å†µå‘ç”Ÿçš„ä¸€äº›tips">å››ã€è®­ç»ƒæ—¶èƒ½å¤Ÿé¿å…ä¸Šè¿°æƒ…å†µå‘ç”Ÿçš„ä¸€äº›Tipsï¼Ÿ</h2>
<p>â€‹
ä¸€èˆ¬æ–°æ‰§è¡Œä¸€ä¸ªè®­ç»ƒä»»åŠ¡çš„æ—¶å€™ï¼Œä»è¾ƒæµ…çš„ç½‘ç»œå¼€å§‹è®­ç»ƒï¼Œå› ä¸ºä¸€èˆ¬è¾ƒæµ…çš„ç½‘ç»œä¸ä¼šå‡ºç°ä¼˜åŒ–çš„é—®é¢˜ã€‚å¦‚æœå‘ç°è¾ƒæµ…çš„ç½‘ç»œå¤æ‚åº¦ä¸å¤Ÿæ‹Ÿåˆæ•°æ®ï¼Œå†é€æ¸åŠ æ·±ç½‘ç»œã€‚</p>
<p>â€‹ å¦‚æœæ›´æ·±çš„ç½‘ç»œæ²¡æœ‰è·å¾—æ›´å°çš„æŸå¤±è®­ç»ƒæ•°æ®ï¼Œåˆ™å­˜åœ¨ä¼˜åŒ–é—®é¢˜ã€‚</p>
<h2 id="äº”overfittingé—®é¢˜">äº”ã€OverFittingé—®é¢˜</h2>
<p>â€‹ å½“Training
Losså·²ç»é™è‡³è¾ƒä½æ°´å¹³ï¼Œä½†æ˜¯åœ¨Testingé›†ä¸Šçš„Losså€¼ä»ç„¶è¾ƒé«˜ï¼Œå…¶ä¸­ä¸€ç§å¯èƒ½å°±æ˜¯å‡ºç°äº†Overfittingè¿‡æ‹Ÿåˆçš„é—®é¢˜ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¾ˆå¥½çš„è¡¨ç°äº†è¿‡æ‹Ÿåˆé—®é¢˜ã€‚ç”±äºæˆ‘ä»¬çš„æ¨¡å‹éå¸¸æœ‰å¼¹æ€§ï¼Œæ‰€ä»¥å¯èƒ½åœ¨è®­ç»ƒé›†ä¸Šï¼ˆè“è‰²ç‚¹ï¼‰æ—¶éå¸¸å¥½çš„æ‹Ÿåˆäº†ï¼Œä½†æ˜¯åœ¨æµ‹è¯•é›†ï¼ˆæ©™è‰²ï¼‰ä¸Šçš„è¡¨ç°å°±ä¼šæ¯”è¾ƒå·®ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114111606224.png" alt="image-20220114111606224" style="zoom:25%;" /></p>
<p>â€‹
æ›´ä¸ºæç«¯çš„æƒ…å†µå°±æ˜¯è®­ç»ƒå‡ºå¦‚ä¸‹å›¾æ‰€ç¤ºçš„å‡½æ•°ï¼šåœ¨è®­ç»ƒé›†ä¸Šçš„æ•°æ®ï¼Œéƒ½æ˜¯å®Œå…¨æ‹Ÿåˆçš„ï¼Œä½†æ˜¯å¯¹äºä¸åœ¨è®­ç»ƒé›†ä¸Šçš„æ•°æ®å°±æ˜¯ä¸€ä¸ªéšæœºå€¼ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114111622606.png" alt="image-20220114111622606" style="zoom: 15%;" /></p>
<h2 id="å…­å¦‚ä½•è§£å†³overfittingé—®é¢˜">å…­ã€å¦‚ä½•è§£å†³OverFittingé—®é¢˜</h2>
<p>â€‹ ä¸‹è¿°æ˜¯ä¸€ä¸ªéšç€æ¨¡å‹é€æ¸å˜å¾—å¤æ‚ï¼ŒTraining Losså’ŒTesting Loss
çš„å€¼å˜åŒ–æ›²çº¿ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114111700084.png" alt="image-20220114111700084" style="zoom:16%;" /></p>
<p>â€‹ å¯¹äºOverfittingæˆ‘ä»¬æœ‰å¦‚ä¸‹çš„å‡ ç§è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li><p>1ã€æ›´å¤šçš„è®­ç»ƒæ•°æ®</p>
<ul>
<li><p>å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿæ”¶é›†åˆ°æ›´å¤šçš„è®­ç»ƒæ•°æ®ï¼Œå°±å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šå‡è½»è¿‡æ‹Ÿåˆçš„é—®é¢˜ã€‚æ¯”è¾ƒå¸¸ç”¨çš„å¢åŠ è®­ç»ƒæ•°æ®çš„æ–¹æ³•ï¼Œå«åšData
Augmentation.
å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ¯”å¦‚è¯´åœ¨ä¸€ä¸ªå›¾åƒæ£€æµ‹çš„ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬æœ€å¼€å§‹æ•°æ®é›†é‡Œçš„å›¾ç‰‡åªæœ‰æœ€å·¦ä¾§ä¸€å¼ å›¾ç‰‡ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶å·¦å³ç¿»è½¬ã€æˆ–è€…è¿›è¡Œæ”¾ç¼©ï¼Œå°±èƒ½å¤Ÿå½¢æˆæ–°çš„ä¸€äº›è®­ç»ƒæ•°æ®ï¼Œæ¥æ‰©å……æˆ‘ä»¬çš„æ•°æ®é›†ã€‚ç„¶è€Œï¼Œä¸Šä¸‹ç¿»è½¬å½¢æˆçš„æ–°çš„å›¾åƒï¼Œä¸€èˆ¬ä¸ä¼šè¢«æˆ‘ä»¬æ”¾å…¥æ•°æ®é›†ä¸­ï¼Œå› ä¸ºå®ƒå¹¶ä¸æ˜¯æ­£å¸¸å½¢æˆçš„å›¾ç‰‡ï¼Œå¦‚æœåŠ å…¥æ•°æ®é›†ä¸­å¾ˆå¯èƒ½è®©æœºå™¨å­¦åˆ°å¥‡æ€ªçš„å†…å®¹ã€‚å› æ­¤ï¼ŒAugmentationä¹Ÿä¸æ˜¯éšæ„çš„å¯¹æ•°æ®è¿›è¡Œå˜æ¢ï¼Œæ˜¯éœ€è¦æœ‰ä¸€å®šä¾æ®çš„ã€‚</p>
<figure>
<img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114111733247.png"
alt="image-20220114111733247" />
<figcaption aria-hidden="true">image-20220114111733247</figcaption>
</figure></li>
</ul></li>
<li><p>2ã€å‡å°‘æœªçŸ¥å‚æ•°æˆ–å…±äº«éƒ¨åˆ†å‚æ•°ï¼š</p>
<ul>
<li>å‡å°‘æ¨¡å‹çš„å¤æ‚åº¦ï¼Œæˆ–è€…ä½¿å¾—æ¨¡å‹ä¸­æŸäº›å±‚å…±äº«ä¸€äº›å‚æ•°ï¼Œèƒ½å¤Ÿä¸€å®šç¨‹åº¦ä¸Šè§£å†³Overfittingçš„é—®é¢˜ã€‚</li>
</ul></li>
<li><p>3ã€ä½¿ç”¨æ›´å°‘çš„ç‰¹å¾</p>
<ul>
<li>å°†ä¸€äº›å¯¹äºç»“æœå½±å“è¾ƒä¸ºä¸æ˜¾è‘—çš„ç‰¹å¾è¿›è¡Œä¸¢å¼ƒï¼Œåªä¿ç•™ä¸€äº›å…³é”®é‡è¦çš„ç‰¹å¾ï¼Œä¹Ÿå¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šè§£å†³Overfittingã€‚ä¾‹å¦‚ï¼šæˆ‘ä»¬è¦è®­ç»ƒä¸€ä¸ªæ¨¡å‹é¢„æµ‹è½¦çš„ä»·æ ¼ï¼Œæ ¹æ®è½¦çš„å¦‚ä¸‹ç‰¹å¾ï¼šè½¦å¤§å°ã€è½¦é¢œè‰²ã€è½¦å“ç‰Œã€è½¦åŠ¨åŠ›ç­‰ã€‚å…¶å®ï¼Œåœ¨è¿™ä¹ˆå¤šç‰¹å¾ä¸­ï¼Œè½¦é¢œè‰²åº”è¯¥æ˜¯å¯¹ä»·æ ¼å½±å“è¾ƒå°‘çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è®­ç»ƒæ—¶å¯ä»¥å°†è¿™ä¸ªç‰¹å¾èˆå»ï¼Œä¸å‚ä¸è®­ç»ƒã€‚</li>
</ul></li>
<li><p>4ã€Early Stoppingæœºåˆ¶ï¼ˆåœ¨Week1çš„Hwä¸­å·²ç»æåŠï¼‰</p></li>
<li><p>5ã€Regularizationæ­£åˆ™åŒ–æŠ€æœ¯ï¼ˆè§åï¼‰</p></li>
<li><p>6ã€DropOutæŠ€æœ¯ï¼ˆè§åï¼‰</p></li>
</ul>
<h2
id="ä¸ƒå¦‚ä½•é¿å…åœ¨training-dataä¸Šè¡¨ç°å¾ˆå¥½ä½†æ˜¯testing-dataä¸Šè¡¨ç°å¾ˆå·®çš„é—®é¢˜cross-validationäº¤å‰éªŒè¯æŠ€æœ¯">ä¸ƒã€å¦‚ä½•é¿å…åœ¨Training
Dataä¸Šè¡¨ç°å¾ˆå¥½ä½†æ˜¯Testing Dataä¸Šè¡¨ç°å¾ˆå·®çš„é—®é¢˜â€”â€”Cross
Validationäº¤å‰éªŒè¯æŠ€æœ¯ï¼Ÿ</h2>
<p>â€‹ æˆ‘ä»¬å°†Training Setåˆ†å‰²ä¸ºTraining Setå’ŒValidation
Setä¸¤ä¸ªé›†åˆï¼Œä¸€èˆ¬è€Œè¨€æ¯”ä¾‹ä¸º9ï¼š1ã€‚æˆ‘ä»¬ä½¿ç”¨åˆ’åˆ†åçš„Training
Setè¿›è¡Œè®­ç»ƒï¼Œåœ¨æ¯ä¸ªEpochç»“æŸåä½¿ç”¨è®­ç»ƒæœŸé—´æœºå™¨æ²¡æœ‰è§åˆ°è¿‡çš„Validationè¿›è¡ŒéªŒè¯ï¼Œä¾æ®éªŒè¯é›†å¾—åˆ°çš„Losså€¼æ¥è¿›è¡Œæ¨¡å‹å¥½åçš„è¡¡é‡ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114111856862.png" alt="image-20220114111856862" style="zoom:15%;" /></p>
<p>â€‹
é‚£ä¹ˆè¯¥å¦‚ä½•è¿›è¡Œåˆ’åˆ†å‘¢ï¼Ÿä¸€èˆ¬æ¥è¯´éšå³åˆ’åˆ†å³å¯ã€‚ä½†éšå³åˆ’åˆ†ä¹Ÿå¯èƒ½å¸¦æ¥ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚è¯´å¯èƒ½è®­ç»ƒé›†ä¸­çš„æ•°æ®éƒ½åå‘äºæŸä¸€ç±»ï¼Œè€ŒéªŒè¯é›†çš„æ•°æ®åå‘äºå¦ä¸€ç±»ï¼Œå°±å¯èƒ½å¯¼è‡´Validationå‡ºç°é—®é¢˜.æ•…è€Œåˆå‡ºç°äº†N-Fold
Cross Validation.å¦‚ä¸‹å›¾æ‰€ç¤º,æˆ‘ä»¬å°†Training
Setåˆ†ä¸ºNä¸ªé›†åˆ(ç¤ºä¾‹ä¸­ä¸º3ä¸ª),å…¶ä¸­N-1ä¸ªé›†åˆç”¨äºè®­ç»ƒ,1ä¸ªé›†åˆç”¨äºéªŒè¯,ç„¶åæ¯è½®Epochä¸­,éƒ½æ‰§è¡ŒNé,æ¯ä¸€ééƒ½æ‹¿ä¸åŒçš„é›†åˆç”¨äºè®­ç»ƒä¸éªŒè¯,ç„¶åè®¡ç®—ä¸€éLosså€¼,æœ€ç»ˆé€‰å–å¹³å‡Lossæœ€å°çš„é‚£ä¸€ç»„å‚æ•°è¿›è¡Œæ¨¡å‹çš„æ›´æ–°.</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114111918585.png" alt="image-20220114111918585" style="zoom: 25%;" /></p>
<h2
id="å…«optimizationé—®é¢˜äº§ç”Ÿçš„åŸå› small-gradient">å…«ã€Optimizationé—®é¢˜äº§ç”Ÿçš„åŸå› ï¼šSmall
Gradient</h2>
<p>â€‹
æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ä¼˜åŒ–æ— æ³•è¿›è¡Œçš„æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆï¼Ÿæ— è®ºæ˜¯è®­ç»ƒäº†ä¸€æ®µæ—¶é—´ä»¥åLossæ— æ³•å†ä¸‹é™ï¼Œè¿˜æ˜¯ä¸€å¼€å§‹Losså°±æ— æ³•ä¸‹é™ï¼Œå…¶ç»ˆæåŸå› å°±æ˜¯è¾¾åˆ°äº†æ¢¯åº¦æ¥è¿‘äº0çš„ç‚¹ï¼Œæˆ‘ä»¬é€šå¸¸ç§°ä¸ºcritical
pointã€‚æ³¨æ„ï¼Œæ­¤å¤„åƒä¸‡ä¸èƒ½è¯´æ˜¯ç¢°åˆ°äº†local
minimumï¼Œå› ä¸ºè¿™æ ·å­ä¼šéå¸¸ä¸ä¸¥è°¨ã€‚Critical point ä¸ä»…ä»…æŒ‡Local
Minimumï¼Œè¿˜æœ‰å¯èƒ½æ˜¯ Saddle Pointï¼ˆéç‚¹ï¼‰ç­‰æƒ…å†µã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114112021653.png" alt="image-20220114112021653" style="zoom:15%;" /></p>
<p>â€‹ æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆè¦çŸ¥é“ï¼Œå½“æˆ‘ä»¬é‡åˆ°ä¸€ä¸ªCritical
Pointçš„æ—¶å€™ï¼Œéœ€è¦åŒºåˆ†è¿™åˆ°åº•æ˜¯ä¸€ä¸ªLocal Minimumè¿˜æ˜¯ä¸€ä¸ªSaddle
Pointã€‚å› ä¸ºå¦‚æœæ˜¯ä¸€ä¸ªå±€éƒ¨æœ€å°å€¼ï¼Œé‚£ä¹ˆå…¶å®å°±å·²ç»æ— è·¯å¯èµ°äº†ï¼Œä½†æ˜¯å¦‚æœæ˜¯ä¸€ä¸ªSaddle
Pointçš„è¯ï¼Œå‘¨è¾¹ä»ç„¶æ˜¯æœ‰æ¯”ä»–ä½çš„å€¼çš„ã€‚è¿˜æ˜¯æœ‰åŠæ³•å¯ä»¥è§£å†³ä¸€ç•ª.</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114112044178.png" alt="image-20220114112044178" style="zoom:25%;" /></p>
<p>â€‹ <span
class="math inline">\(L(\theta)\)</span>å‡½æ•°æœ¬èº«ä¼šæ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„å‡½æ•°,æˆ‘ä»¬æ²¡æ³•çŸ¥é“å®ƒçš„å…¨è²Œ,ä½†æ˜¯æˆ‘ä»¬å¯ä»¥åŠ¨ç”¨å¦‚ä¸‹çš„æ•°å­¦æ‰‹æ®µæ¥åˆ¤æ–­æŸä¸€ä¸ªCritical
Pointåˆ°åº•æ˜¯Local Minimumè¿˜æ˜¯Saddle Point,å¦‚ä¸‹æ‰€ç¤º:</p>
<p>â€‹ åˆ©ç”¨æ³°å‹’å±•å¼€,æˆ‘ä»¬å¯ä»¥çŸ¥é“<span
class="math inline">\(L(\theta)\)</span>åœ¨æŸä¸€ä¸ªç‚¹<span
class="math inline">\(\theta^{&#39;}\)</span>å‘¨å›´çš„å‡½æ•°çš„è¿‘ä¼¼å€¼: <span
class="math inline">\(g\)</span>ä¸ºæ¢¯åº¦,æ˜¯<span
class="math inline">\(L\)</span>å¯¹<span
class="math inline">\(\theta\)</span>çš„ä¸€é˜¶å¯¼æ•°ç»„æˆçš„å‘é‡.<span
class="math inline">\(H\)</span>ä¸ºæµ·æ£®çŸ©é˜µ,ä¸º<span
class="math inline">\(L\)</span>å¯¹<span
class="math inline">\(\theta\)</span>çš„äºŒé˜¶å¾®åˆ†ç»„æˆçš„çŸ©é˜µ.</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114112216322.png" alt="image-20220114112216322" style="zoom:15%;" /></p>
<p>â€‹ æˆ‘ä»¬çŸ¥é“,åœ¨Critical
Pointä¸Š,æ¢¯åº¦ä¸º0,æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†ä¸Šè¿°å…¬å¼ä¸­ä¸­é—´é‚£ä¸€é¡¹åˆ’æ‰ä¸çœ‹,é‚£ä¹ˆL(Î¸)åœ¨Î¸â€™å‘¨å›´çš„å‡½æ•°å€¼å°±å¯ä»¥è¿‘ä¼¼ä¸ºL(Î¸â€™)
åŠ ä¸Šåé¢è¿™ä¸€é¡¹.</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114112238183.png" alt="image-20220114112238183" style="zoom:25%;" /></p>
<p>â€‹
å› æ­¤,æˆ‘ä»¬å…¶å®å¯ä»¥é€šè¿‡åé¢çº¢è‰²æ–¹æ¡†å†…çš„è¿™ä¸€é¡¹çš„æ­£è´Ÿ,æ¥åˆ¤æ–­Î¸â€™å‘¨å›´çš„å€¼çš„åˆ†å¸ƒåˆ°åº•æ˜¯å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä¸‰ç§ä¸­çš„å“ªä¸€ç§:</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114112259806.png" alt="image-20220114112259806" style="zoom: 25%;" /></p>
<p>â€‹ ä¸ºäº†åç»­çš„æ•°å­¦è¡¨ç¤º,æˆ‘ä»¬å…ˆå°†<span class="math inline">\((\theta -
\theta^{&#39;})\)</span>è¡¨ç¤ºä¸ºç¬¦å·<span
class="math inline">\(v\)</span>,é‚£ä¹ˆå¦‚ä¸‹å›¾æ‰€ç¤º:
ä¸Šè¿°è¿‘ä¼¼å¼å­ä¸­çš„çº¢è‰²æ–¹æ¡†çš„é‚£é¡¹,å€¼æœ‰å¦‚ä¸‹ä¸‰ç§æƒ…å†µ:</p>
<p>â€‹ å¦‚æœå¯¹äºæ‰€æœ‰çš„<span
class="math inline">\(v\)</span>æ¥è¯´,è¯¥é¡¹æ’å¤§äº0,é‚£å°±ä»£è¡¨åœ¨<span
class="math inline">\(\theta^{&#39;}\)</span>å‘¨å›´,æ‰€æœ‰çš„å€¼éƒ½æ¯”è¯¥ç‚¹å¤§,è¯¥ç‚¹å³ä¸ºå±€éƒ¨æœ€å°å€¼.ä½†æ˜¯é—®é¢˜åœ¨äºæˆ‘ä»¬æ²¡æ³•éªŒè¯æ‰€æœ‰çš„<span
class="math inline">\(v\)</span>,é‚£åº”è¯¥å¦‚ä½•å‘¢?</p>
<p>â€‹ å·²ç»æœ‰äººä¸ºæˆ‘ä»¬è¯æ˜äº†, å¯¹äºæ‰€æœ‰<span
class="math inline">\(v\)</span>,<span
class="math inline">\(v^THv\)</span>æ’å¤§äº0è¿™ä»¶äº‹æƒ…,å’Œæµ·æ£®çŸ©é˜µHæ˜¯ä¸€ä¸ªæ­£å®šçŸ©é˜µ
æ˜¯ç­‰ä»·çš„, ä¹Ÿç­‰ä»·äº HçŸ©é˜µçš„æ‰€æœ‰ç‰¹å¾å€¼éƒ½æ˜¯æ­£çš„è¿™ä»¶äº‹æƒ….</p>
<p>â€‹ æ‰€ä»¥ç†è®ºä¸Šæˆ‘ä»¬å¦‚æœæƒ³è¦çŸ¥é“<span
class="math inline">\(v^THv\)</span>çš„æƒ…å†µ,çŸ¥é“Î¸â€™å‘¨å›´çš„åˆ†å¸ƒ,é‚£ä¹ˆå…¶å®åªè¦è®¡ç®—å‡ºHçŸ©é˜µçš„æ‰€æœ‰ç‰¹å¾å€¼,çœ‹ä¸€ä¸‹åˆ†å¸ƒå³å¯.</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114112443208.png" alt="image-20220114112443208" style="zoom:25%;" /></p>
<p>â€‹ é‚£ä¹ˆå¦‚æœæˆ‘ä»¬å‘ç°è¿™ä¸ªç‚¹æ˜¯ä¸€ä¸ªSaddle Pointçš„è¯, åº”å½“å¦‚ä½•å»ç»§ç»­ä¼˜åŒ–å‘¢?
æˆ‘ä»¬å¯ä»¥åˆ©ç”¨Hè¿›è¡Œä¼˜åŒ–, æˆ‘ä»¬æ‰¾åˆ°ä¸€ä¸ªçŸ©é˜µHçš„ç‰¹å¾å‘é‡u, å…¶å¯¹åº”çš„ç‰¹å¾å€¼ä¸ºÎ»,
Î»&lt;0 ,é‚£ä¹ˆå¦‚ä¸‹å›¾æ‰€ç¤º: <span
class="math inline">\(u^THu\)</span>è¿™ä¸€é¡¹å°±åº”å½“ä¸º &lt; 0 çš„å€¼.</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114112505138.png" alt="image-20220114112505138" style="zoom:15%;" /></p>
<p>â€‹ æ•…è€Œ: æˆ‘ä»¬ä»¤<span class="math inline">\((\theta - \theta^{&#39;}) =
u\)</span>å³å¯å¾—åˆ°ä¸€ä¸ªæ¯”<span
class="math inline">\(L(\theta^{&#39;})\)</span>å°çš„å€¼,å®Œæˆäº†Lå€¼çš„ä¼˜åŒ–.</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114112600293.png" alt="image-20220114112600293" style="zoom: 25%;" /></p>
<p>â€‹
ä»æ‰§è¡Œä¸Šæ¥è®²,å…¶å®å°±æ˜¯æ‰¾ä¸€ä¸ªHçŸ©é˜µçš„ç‰¹å¾å€¼ä¸ºè´Ÿçš„ç‰¹å¾å‘é‡u,è¿™ä¸ªå‘é‡uå°±æŒ‡æ˜äº†æ¢¯åº¦ä¸‹é™çš„æ–¹å‘,æ²¿ç€è¯¥æ–¹å‘èµ°ä¸€å°æ­¥,å°±å¯ä»¥å®ŒæˆLosså‡½æ•°çš„å€¼çš„ä¼˜åŒ–.</p>
<p>â€‹ åˆ°æ­¤ä¸ºæ­¢,å·²ç»è®°å½•äº†Saddle Pointå’ŒLocal Minimumæ€ä¹ˆå»åŒºåˆ†,
å¹¶ä¸”ä¹Ÿå‘ç°Saddle Pointå¹¶ä¸å¯æ€•,å¯ä»¥é€šè¿‡è®¡ç®—HçŸ©é˜µæ¥è¿›è¡Œæ±‚è§£.</p>
<p>â€‹ åœ¨å®é™…æˆ‘ä»¬çš„è®­ç»ƒè¿‡ç¨‹ä¸­,å…¶å®è¾¾åˆ°Local
Minimumçš„æœºä¼šæ˜¯å¾ˆå°‘çš„,åŸºæœ¬ä¸Šéƒ½ä¼šåœç•™åœ¨Saddle
Pointä¸Š,é‚£ä¹ˆè¿™æ˜¯ä¸æ˜¯å°±æ„å‘³ç€æˆ‘ä»¬å¦‚æœç¢°åˆ°äº†Critical
Pointä¹Ÿå°±æ˜¯æ¢¯åº¦ä¸º0çš„ç‚¹,åŸºæœ¬ä¸Šå°±å¯ä»¥ç”¨æ±‚è§£Hæ¥ç»§ç»­è®­ç»ƒå‘¢?
ç†è®ºä¸Šåº”è¯¥æ˜¯å¯ä»¥çš„,ä½†æ˜¯åœ¨å®é™…æ“ä½œä¸­,å…¶å®æˆ‘ä»¬å¹¶ä¸ä¼šå»è¿™æ ·å­åš,å› ä¸ºè®¡ç®—HçŸ©é˜µæ‰€éœ€è¦èŠ±è´¹çš„æ—¶é—´ä»£ä»·å¤ªè¿‡æ˜‚è´µäº†.æˆ‘ä»¬ä¼šæœ‰å…¶ä»–çš„è®­ç»ƒæŠ€å·§,æ¥å¸®åŠ©ç»•è¿‡è¿™ä¸€äº›Saddle
Point.
è¿™äº›å†…å®¹åœ¨ä¸‹é¢çš„ç¬¬9ç« ä¸­ä¼šè®²è¿°ã€‚åŒæ—¶æœ€åçš„è¯è¿˜éœ€è¦æåŠä¸€ç‚¹ï¼Œå…¶å®å¤§éƒ¨åˆ†çš„è®­ç»ƒä¼˜åŒ–åšä¸ä¸‹å»äº†ï¼Œå¹¶ä¸æ˜¯ç”±äºåˆ°è¾¾äº†Critical
Pointï¼Œè€Œæ˜¯ç”±äºå­¦ä¹ ç‡çš„åŸå› ï¼Œåœ¨ä¸€ä¸ªå±±è°·çš„ä¸¤ä¾§æ¥å›éœ‡è¡ï¼Œè¿™ä¸€ç‚¹ä¼šåœ¨10ç« ä¸­è¿›è¡Œè¯¦ç»†çš„å™è¿°ã€‚</p>
<h2 id="ä¹optimizeè®­ç»ƒtips-batch-and-momentum">ä¹ã€Optimizeè®­ç»ƒTips:
Batch and Momentum:</h2>
<h4 id="batchæŠ€æœ¯">1ã€BatchæŠ€æœ¯</h4>
<p>â€‹
å…ˆå‰æˆ‘ä»¬è¯´è¿‡åœ¨è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡è¿›è¡Œæ¢¯åº¦ä¸‹é™å¹¶ä¸æ˜¯å‚è€ƒæ‰€æœ‰çš„è®­ç»ƒæ•°æ®æ¥è®¡ç®—Losså‡½æ•°çš„ï¼Œè€Œæ˜¯ä¼šåƒä¸‹å›¾ä¸€æ ·é€šè¿‡ä¸€ä¸ªBatchä¸€ä¸ªBatchçš„è¿›è¡Œè®¡ç®—ã€‚æˆ‘ä»¬åœ¨æ¯ä¸€è½®Epochä¹‹å‰ï¼Œä¸€èˆ¬è€Œè¨€éƒ½ä¼šå¯¹æ•°æ®é›†é‡æ–°åˆ’åˆ†Batchï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ä¸åŒçš„Epochä¸­ï¼Œæ¯ä¸€ä¸ªBatchéƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™ä»¶äº‹æƒ…å«åšShuffleã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114112658511.png" alt="image-20220114112658511" style="zoom:25%;" /></p>
<p>â€‹
æ¥ä¸‹å»çš„é—®é¢˜å°±æ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Batchå‘¢ï¼Ÿè€ƒè™‘å¦‚ä¸‹çš„ä¸€ä¸ªä¾‹å­ï¼Œå·¦ä¾§çš„Full
batchå°±æ˜¯æ¯ä¸€æ¬¡æœºå™¨éƒ½è¦çœ‹è¿‡æ‰€æœ‰çš„æ•°æ®é›†ä»¥åå†æ›´æ–°å‚æ•°ï¼Œè€Œå³ä¾§çš„Batch
Size =
1åˆ™æ˜¯ä¼šåœ¨çœ‹è¿‡æ¯ä¸ªæ ·ä¾‹ä»¥åéƒ½æ›´æ–°ä¸€éå‚æ•°ã€‚ä»ç›´è§‚ä¸Šæ¥çœ‹ï¼ŒBatchSizeè¶Šå¤§ï¼Œå…¶å°±æ›´æ–°ä¸€æ¬¡å‚æ•°è€Œè¨€æ‰€éœ€è¦èŠ±è´¹çš„æ—¶é—´è¶Šå¤§ï¼Œä½†æ˜¯å…¶æ›´æ–°æ›´æœ‰æ•ˆã€‚é‚£ä¹ˆæŒ‰ç…§è¿™æ ·å­è¯´çš„è¯ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜è¦åˆ†Batchå‘¢ï¼Ÿå®é™…çŠ¶å†µè·Ÿæˆ‘ä»¬çš„ç›´è§‰æœ‰ä¸€äº›ä¸åŒã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114112717272.png" alt="image-20220114112717272" style="zoom:25%;" /></p>
<p>â€‹
ä¸‹é¢è¿™å¼ å›¾æ˜¾ç¤ºäº†å•æ¬¡updateä»¥åŠä¸€è½®epochè®­ç»ƒçš„æ—¶é—´å’ŒBatchSizeçš„å…³ç³»ï¼Œæˆ‘ä»¬å‘ç°å•æ¬¡updateçš„æ—¶é—´ï¼Œå¯¹äºbatchsize
=
1å’Œ=1000æ¥è¯´ï¼Œç«Ÿç„¶å·®åˆ«ä¸å¤§ã€‚å¯¼è‡´è¿™ä¸ªçš„åŸå› æ˜¯æˆ‘ä»¬è€ƒè™‘äº†å¹¶è¡Œè®¡ç®—çš„å› ç´ ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨GPUè¿›è¡Œè¿ç®—çš„åŸå› ã€‚å½“ç„¶ï¼Œå¦‚æœBatchSizeå†å¢é•¿ä¸‹å»ï¼Œæˆ‘ä»¬çš„GPUä¹Ÿæ˜¯æœ‰ä¸€å®šçš„ä¸Šé™çš„æ‰€ä»¥åé¢ä¹Ÿä¼šæœ‰è¾ƒå¤§çš„ä¸€ä¸ªæ—¶é—´å¢é•¿ã€‚é‚£ä¹ˆï¼Œå³ä¾§çš„è¿™å¹…å›¾å°±æ¯”è¾ƒå¥½ç†è§£äº†ï¼Œå¯¹äºä¸€è½®Epochæ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬çš„Batch
Sizeæ¯”è¾ƒå°çš„è¯ï¼Œåœ¨ä¸€è½®Epochä¸­ï¼Œæ›´æ–°Updateæ¬¡æ•°å°±ä¼šæ¯”è¾ƒå¤šï¼Œç›¸å¯¹è€Œè¨€æ•´ä½“çš„ä¸€è½®Epochçš„è€—æ—¶å°±ä¼šè¾ƒé•¿ã€‚æ‰€ä»¥éšç€Batch
Sizeçš„å¢å¤§ï¼Œåè€Œä¸€è½®Epochçš„æ—¶é—´ä¼šå˜é•¿ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114112747946.png" alt="image-20220114112747946" style="zoom:25%;" /></p>
<p>â€‹
è¿™æ ·çœ‹æ¥ï¼ŒBatchSizeè¶Šå¤§ï¼Œåè€Œè®­ç»ƒé€Ÿåº¦è¶Šå¿«ã€‚è¿™æ ·çš„è¯BatchSizeè¶Šå¤§ï¼Œé€Ÿåº¦åˆå¿«ï¼Œæ›´æ–°åˆå‡†ç¡®ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦åˆ†Batchå‘¢ï¼Ÿä¸‹é¢ä¸€å¼ å›¾è¡¨ç¤ºäº†BatchSizeå¤§å°å¯¹è®­ç»ƒå‡ºçš„ç½‘ç»œçš„å‡†ç¡®ç‡çš„å½±å“ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨BatchSizeè¾ƒå¤§çš„æ—¶å€™ï¼Œå‡†ç¡®ç‡ç›´çº¿ä¸‹é™ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼ŸåŸå› åœ¨äºï¼šæˆ‘ä»¬å…ˆå‰æ‰€è¯´BatchSizeè¾ƒå¤§çš„è¯ï¼Œæ¯æ¬¡Updateè¾ƒä¸ºå‡†ç¡®ï¼Œæ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯å¯¹äºç½‘ç»œè€Œè¨€ï¼Œå¹¶ä¸æ˜¯ä¸€æ¬¡Updateå°±èƒ½è§£å†³é—®é¢˜çš„ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114112807695.png" alt="image-20220114112807695" style="zoom:23%;" /></p>
<p>â€‹
å¦‚æœBatchSizeè¿‡å¤§ï¼Œä¼šå¯¼è‡´ä¼˜åŒ–é—®é¢˜çš„å‡ºç°ï¼Œå¦‚å·¦å›¾æ‰€ç¤ºï¼ŒåŸå› å°±æ˜¯å› ä¸ºå…¶æ¯æ¬¡updateéƒ½å¤ªå‡†ç¡®ï¼Œå¦‚æœé‡åˆ°
critical pointæˆ–è€…æ˜¯local
minimumï¼Œé‚£ä¹ˆå…¶å°±ä¼šæ·±é™·å…¶ä¸­ï¼Œæ— æ³•ç»§ç»­ä¼˜åŒ–äº†ã€‚å¦‚è¿‡åˆ†äº†Batchçš„è¯ï¼Œç”±äºæ¯æ¬¡ä½¿ç”¨çš„æ˜¯ä¸åŒçš„Batchï¼Œæ‰€ä»¥æ¯æ¬¡çš„Lå‡½æ•°éƒ½ä¼šæœ‰äº›è®¸ä¸ä¸€æ ·ï¼Œå¦‚æœåœ¨L1å¤„åˆ°è¾¾äº†ä¸€ä¸ªcritical
pointï¼Œåœ¨ä¸€ä¸ªBatchè®­ç»ƒçš„æ—¶å€™ï¼Œä¹Ÿè®¸è¯¥ç‚¹åˆé‡æ–°å¯ä»¥ç»§ç»­æ¢¯åº¦ä¸‹é™è®­ç»ƒäº†ã€‚æ‰€ä»¥ï¼ŒBatch
Sizeè¾ƒå°çš„æ—¶å€™å¸¦æ¥çš„å•æ¬¡æ›´æ–°çš„â€Noisyâ€åè€Œå¯¹æ•´ä½“çš„ç½‘ç»œè®­ç»ƒèƒ½å¤Ÿå¸¦æ¥å¥½å¤„ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•è¡¡é‡å°±æ˜¯ä¸€ä¸ªéœ€è¦æˆ‘ä»¬æ‰‹å·¥è°ƒæ•´çš„é—®é¢˜äº†ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114112827827.png" alt="image-20220114112827827" style="zoom:27%;" /></p>
<p>â€‹
æœ€åï¼Œå…ˆè¾ˆä»¬è¿˜å‘ç°äº†ä¸€ä¸ªæœ‰è¶£çš„ç°è±¡ï¼Œå°±æ˜¯å¦‚æœæˆ‘ä»¬ä½¿ç”¨BatchSizeä¸ä¸€æ ·çš„è®­ç»ƒæ–¹æ³•ï¼Œè®­ç»ƒåŒä¸€ä¸ªç½‘ç»œï¼Œå°†Training
Lossè®­ç»ƒåˆ°ä¸€æ ·å¥½ä»¥åï¼Œæˆ‘ä»¬å°†å…¶åœ¨æµ‹è¯•é›†ä¸Šè¿›è¡Œæµ‹è¯•ï¼Œå¾€å¾€æ˜¯BatchSizeå°çš„è®­ç»ƒå‡ºæ¥çš„ç½‘ç»œï¼Œå‡†ç¡®ç‡è¾ƒé«˜ã€‚å¤§è‡´åŸå› å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šlarge
batchå®¹æ˜“è®©ç½‘ç»œçš„å‚æ•°è¿›å…¥ä¸€äº›Sharp
Minimaå³¡è°·ä¸­ï¼Œè¿™æ ·å­çš„è¯ï¼Œä¸€æ—¦è®­ç»ƒæ•°æ®é›†å’Œæµ‹è¯•æ•°æ®é›†çš„åˆ†å¸ƒæœ‰äº›è®¸ä¸åŒï¼Œåœ¨è®­ç»ƒé›†ä¸Šå¤„äºå¾ˆä½ç‚¹çš„å‚æ•°åº”ç”¨åˆ°æµ‹è¯•é›†ä¸Šå¯èƒ½ä¼šæœ‰ä¸€ä¸ªæ¯”è¾ƒå¤§çš„Lossã€‚ç›¸æ¯”è¾ƒè€Œè¨€ï¼Œsmall
batchå¾€å¾€ä¼šè·³å‡ºè¿™ç§sharp minimaçš„å³¡è°·ï¼Œæ‰¾åˆ°ä¸€äº›è¾ƒä¸ºå¹³å¦çš„flat
minimaï¼Œå¯¹äºè¿™äº›flat
minimaçš„å‚æ•°æ¥è¯´ï¼Œå³ä½¿è®­ç»ƒé›†ä¸åˆ†å¸ƒé›†çš„æ•°æ®åˆ†å¸ƒä¸åŒï¼Œè¡¨ç°å‡ºæ¥çš„lossæ€§èƒ½ä¹Ÿä¸ä¼šç›¸å·®å¤ªå¤šã€‚æœ‰å…´è¶£çš„å¯ä»¥ç ”è¯»è¿™ç¯‡paper.ã€ŠOn
Large-Batch Training for Deep Learning: Generalization Gap and Sharp
Minima ã€‹</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114112849800.png" alt="image-20220114112849800" style="zoom:25%;" /></p>
<h4 id="momentumæŠ€æœ¯">2ã€MomentumæŠ€æœ¯</h4>
<p>â€‹
é™¤äº†ä½¿ç”¨Batchæ¥å¸®åŠ©æˆ‘ä»¬è®­ç»ƒä»¥å¤–ï¼Œè¿˜æœ‰ä¸€ç§å€Ÿé‰´äº†ç‰©ç†ä¸–ç•Œçš„MomentumæŠ€æœ¯ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬èµ°å‡ºä¸€äº›Critical
pointã€‚</p>
<p>â€‹ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨æ¢¯åº¦ä¸‹é™ä¸­ï¼Œä¹Ÿè®¸æˆ‘ä»¬è®­ç»ƒè‡³ä¸€äº›critical
pointï¼Œå‚æ•°å°±ä¸ä¼šç»§ç»­ä¼˜åŒ–äº†ï¼Œä½†æ˜¯åœ¨ç‰©ç†ä¸–ç•Œä¸­ï¼Œå¦‚æœä¸€ä¸ªå°çƒä»é«˜å¤„æ»šä¸‹ï¼Œå…¶å°†ä¼šé ç€åŠ¨é‡æ»šä¸‹saddle
pointï¼Œä¹Ÿæœ‰å¯èƒ½é ç€åŠ¨é‡æ»šå‡ºlocal minimumã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114112915300.png" alt="image-20220114112915300" style="zoom:25%;" /></p>
<p>â€‹ å¦‚ä¸‹å›¾æ‰€ç¤ºæ˜¯æˆ‘ä»¬æ™®é€šæ¢¯åº¦ä¸‹é™çš„ç®—æ³•ç¤ºæ„å›¾ï¼šä»<span
class="math inline">\(\theta_0\)</span>å¼€å§‹è®¡ç®—æ¢¯åº¦ï¼Œç„¶åæ²¿ç€æ¢¯åº¦åæ–¹å‘ç§»åŠ¨ä¸‹é™ï¼Œä¸€æ­¥æ­¥è¿›è¡Œä¼˜åŒ–ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114112942271.png" alt="image-20220114112942271" style="zoom:25%;" /></p>
<p>â€‹ é‚£ä¹ˆåœ¨Gradient Descent +
Momentumçš„ç®—æ³•å¦‚ä¸‹ï¼šæœ€å¼€å§‹ç¬¬ä¸€æ­¥å’ŒåŸæ¥çš„ä¸€æ ·ï¼Œä»<span
class="math inline">\(\theta^0\)</span>å¼€å§‹è®¡ç®—æ¢¯åº¦ï¼Œç„¶åæ²¿ç€æ¢¯åº¦åæ–¹å‘ç§»åŠ¨ä¸‹é™ï¼Œè¾¾åˆ°<span
class="math inline">\(\theta^1\)</span>æ—¶ï¼Œæ­¤æ—¶å’ŒåŸå…ˆå°±ä¼šå‘ç”Ÿä¸åŒäº†ï¼Œå…¶ç°åœ¨çš„ç§»åŠ¨ä¼šç»“åˆå‰ä¸€æ­¥çš„movementï¼ˆå³<span
class="math inline">\(m^1\)</span>ï¼‰ä»¥åŠå½“å‰ç‚¹çš„æ¢¯åº¦<span
class="math inline">\(g^1\)</span>ï¼Œè®¡ç®—å‡ºä¸€ä¸ªæ–°çš„ä¸‹é™æ–¹å‘<span
class="math inline">\(m^2\)</span>ï¼Œç„¶åè¿›è¡Œæ›´æ–°ã€‚å¦‚å›¾æ‰€ç¤ºï¼š<span
class="math inline">\(m^2\)</span>æ˜¯ç”± <span
class="math inline">\(m^1\)</span>å’Œ <span
class="math inline">\(-g^1\)</span>ä¸¤ä¸ªå‘é‡ç›¸åŠ æ‰€å¾—åˆ°çš„ã€‚ä»å…¬å¼ä¸Šæ¥è®²å°±æ˜¯$m^1
- g^1 $ï¼Œä¸¤è€…éƒ½æœ‰è‡ªå·±çš„å‚æ•°ï¼Œæ¥æ§åˆ¶å½±å“æ•´ä¸ªæ¢¯åº¦ä¸‹é™æ–¹å‘çš„æ¯”ä¾‹ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114113022761.png" alt="image-20220114113022761" style="zoom:25%;" /></p>
<p>â€‹ å…¶å®ä»å¦ä¸€ä¸ªè§’åº¦æ¥çœ‹ï¼Œmiå…¶å®æ˜¯å…ˆå‰æ‰€æœ‰çš„æ¢¯åº¦çš„å’Œï¼Œä¹Ÿå°±æ˜¯g0 -
gi-1çš„å’Œã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¯´Momentumæ˜¯è€ƒè™‘äº†ä¸Šä¸€æ­¥çš„movementï¼Œä¹Ÿå¯ä»¥è¯´Momentumæ˜¯è€ƒè™‘äº†å…ˆå‰æ‰€æœ‰æ›´æ–°ç‚¹çš„æ¢¯åº¦å€¼ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114113348655.png" alt="image-20220114113348655" style="zoom:15%;" /></p>
<h2
id="åoptimizeè®­ç»ƒtips-automatic-learning-rate">åã€Optimizeè®­ç»ƒTips:
Automatic Learning Rate</h2>
<p>â€‹
å…¶å®ï¼Œå½“æˆ‘ä»¬è®­ç»ƒå¡ä½çš„æ—¶å€™ï¼Œå¹¶ä¸ä¸€å®šæ˜¯ç¢°åˆ°äº†æ¢¯åº¦è¾ƒä½çš„åœ°æ–¹ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯åœ¨æŸä¸ªå±±è°·çš„ä¸¤ä¾§ç”±äºå­¦ä¹ ç‡è¿‡å¤§çš„é—®é¢˜æ¥å›éœ‡è¡ã€‚é‚£ä¹ˆè¿™ç§ç°è±¡æ˜¯æ€ä¹ˆäº§ç”Ÿçš„å‘¢ï¼Ÿ</p>
<p>â€‹
åœ¨Week1çš„HW1ç¬”è®°ä¸­ï¼Œæ›¾ç»è®°å½•æ•°æ®é¢„å¤„ç†å½’ä¸€åŒ–çš„é‡è¦æ€§ï¼Œå¦åˆ™å¾ˆæœ‰å¯èƒ½å› ä¸ºä¸åŒç‰¹å¾çš„æ•°æ®å°ºåº¦ç›¸å·®å¤ªå¤§å¯¼è‡´éœ‡è¡ï¼Œä»è€Œå¯¼è‡´è®­ç»ƒä¸å‡ºç»“æœï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p>â€‹ ä¸‹å›¾æ˜¯ä¸€ä¸ªError
Surface,å°±æ˜¯Losså‡½æ•°çš„å¹³é¢ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸¤ç§ä¸åŒå¤§å°çš„å­¦ä¹ ç‡å»è¿›è¡Œæ¢¯åº¦ä¸‹é™ï¼Œé»„è‰²çš„å‰å‰ä»£è¡¨è®­ç»ƒç»ˆç‚¹ã€‚æˆ‘ä»¬å‘ç°æ•´ä¸ªError
Surfaceä¸­ï¼Œä¸Šä¸‹ç»´åº¦çš„æ¢¯åº¦æ¯”è¾ƒé™¡ï¼Œå·¦å³ç»´åº¦çš„æ¢¯åº¦æ¯”è¾ƒç¼“ã€‚å¦‚æœæˆ‘ä»¬é‡‡ç”¨è¾ƒå¤§çš„å­¦ä¹ ç‡ï¼Œå°±ä¼šäº§ç”Ÿå·¦å›¾è¿™æ ·å­çš„é»‘è‰²è®­ç»ƒçº¿ï¼Œåœ¨ç«–ç›´æ–¹å‘ç–¯ç‹‚éœ‡è¡ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬ä½¿ç”¨å¦‚å³å›¾æ‰€ç¤ºçš„è¾ƒå°çš„å­¦ä¹ ç‡ï¼Œä¸€å¼€å§‹æ˜¯å¯ä»¥æ²¿ç€ç«–ç›´æ–¹å‘çš„æ¢¯åº¦æ…¢æ…¢æ›´æ–°ï¼Œä½†æ˜¯å½“è¦å¼€å§‹æ²¿æ°´å¹³æ–¹å‘æ›´æ–°çš„æ—¶å€™ï¼Œä¼šå‘ç°å­¦ä¹ ç‡å¤ªå°äº†ï¼Œä»¥è‡³äºæ›´æ–°äº†10wæ¬¡ï¼Œè¿˜è·ç¦»æˆ‘ä»¬çš„è®­ç»ƒé‡ç‚¹é¥é¥æ— æœŸã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220121170751170.png" /></p>
<p>â€‹
æ‰€ä»¥ï¼Œæˆ‘ä»¬å‘ç°ï¼Œä¸€ä¸ªå›ºå®šçš„å­¦ä¹ ç‡åœ¨è®­ç»ƒä¸­æ˜¯ä¸å¤ªåˆé€‚çš„ï¼Œæœ€å¥½çš„è¯æ˜¯å¦‚å›¾æ‰€ç¤ºï¼Œè¦å¯¹ä¸åŒçš„å‚æ•°æœ‰ä¸åŒçš„å­¦ä¹ ç‡ï¼Œå­¦ä¹ ç‡è¦éšç€æ¢¯åº¦çš„å˜åŒ–ä»¥åŠå‚æ•°çš„å˜åŒ–è€Œè¿›è¡Œå˜åŒ–ã€‚</p>
<p>â€‹ äºæ˜¯æˆ‘ä»¬é¦–å…ˆæå‡ºäº†å¦‚ä¸‹æƒ³æ³•ï¼Œå°†åŸæ¥çš„å­¦ä¹ ç‡Î·ä¿®æ”¹æˆ Î·/(Ïƒit),
è¿™ä¸ªÏƒitæ—¢è·Ÿå‚æ•°ç›¸å…³åˆè·Ÿè®­ç»ƒæ­¥éª¤ï¼ˆä¸åŒç‚¹æ‰€åœ¨çš„æ¢¯åº¦ï¼‰ç›¸å…³ã€‚</p>
<p><img
src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/image-20220121170754841.png" /></p>
<p>â€‹
ä»¥ä¸‹å°±æ˜¯ä¸€ç§æœ€ä¸ºç®€å•çš„Ïƒçš„è®¡ç®—æ–¹å¼ï¼Œé€šè¿‡è®¡ç®—æ¯æ¬¡æ›´æ–°å¾—åˆ°çš„å‚æ•°ç©ºé—´æ‰€åœ¨ç‚¹çš„æ¢¯åº¦çš„Normå€¼çš„å¹³æ–¹çš„å¹³å‡ï¼Œå³RMSæ¥è®¡ç®—æ¯æ­¥ä¸­Ïƒã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114113547513.png" alt="image-20220114113547513" style="zoom:25%;" /></p>
<p>â€‹
è¿™ç§æ–¹æ³•è¢«ç”¨åœ¨Adagradä¸­ï¼Œä¸»è¦æ€æƒ³å°±æ˜¯ï¼Œå¦‚æœLosså‡½æ•°åœ¨æŸä¸ªæ–¹å‘ä¸Šæ¯”è¾ƒå¹³å¦,æ¢¯åº¦æ¯”è¾ƒå°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¸Œæœ›Learning
Rateæ¯”è¾ƒå¤§ï¼Œå¿«é€Ÿçš„èµ°è¿‡è¿™ä¸€ç‰‡å¹³å¦çš„åŒºåŸŸã€‚å¦‚æœåœ¨æŸä¸ªæ–¹å‘ä¸Šæ¯”è¾ƒé™¡å³­ï¼Œæˆ‘ä»¬å¸Œæœ›Learning
Rateæ¯”è¾ƒå°.</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114113613777.png" alt="image-20220114113613777" style="zoom:25%;" /></p>
<p>â€‹
æ¥ä¸‹æ¥ä¸€ç§è¾ƒä¸ºè¿›é˜¶çš„åšæ³•å«åšRMSPropï¼Œå®ƒåœ¨è®¡ç®—æ¯ä¸€æ­¥çš„Ïƒçš„æ—¶å€™ï¼Œç»“åˆäº†ä¸Šä¸€æ­¥çš„Ïƒä»¥åŠè¯¥æ­¥çš„æ¢¯åº¦gï¼ŒåŒæ—¶è¿˜æœ‰ä¸€ä¸ªè¶…å‚æ•°Î±ï¼Œå¯ä»¥è¿›è¡Œè°ƒæ•´ã€‚å¦‚æœæˆ‘ä»¬è°ƒæ•´Î±æ¯”è¾ƒå¤§çš„è¯ï¼Œä»£è¡¨å…¶å‚è€ƒå½“å‰çš„æ¢¯åº¦è¾ƒå¤šï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæ¢¯åº¦çªç„¶äº§ç”Ÿè¾ƒå¤§å˜åŒ–ï¼Œå…¶å°±èƒ½å¿«é€Ÿçš„ååº”è¿‡æ¥ï¼Œå¯¹LearningRateè¿›è¡Œå¿«é€Ÿçš„è°ƒæ•´ã€‚ç›¸è¾ƒäºå‰RMSæ‰€æœ‰å…ˆå‰çš„æ¢¯åº¦éƒ½å¹³å‡æƒå€¼è€ƒè™‘çš„åšæ³•ï¼Œè¿™ä¸€åšæ³•èƒ½å¤Ÿæ›´å¿«é€Ÿçš„å¯¹æ¢¯åº¦çš„å˜åŒ–è¿›è¡Œå“åº”ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114113634056.png" alt="image-20220114113634056" style="zoom:25%;" /></p>
<p>â€‹ å¦‚ä¸‹æ‰€ç¤ºï¼Œæ˜¯ä¸€ä¸ªè¾ƒä¸ºå…¬å¼åŒ–çš„å†™æ³•ï¼Œä»¥åŠä¸€ä¸ªç®€å•çš„ç¤ºæ„å›¾ã€‚</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114113649974.png" alt="image-20220114113649974" style="zoom: 25%;" /></p>
<p>â€‹
å…¶å®æŒ‰ç…§è¿™ç§æ–¹æ³•ï¼Œè¿›è¡Œè®­ç»ƒçš„è¯ï¼Œå¯èƒ½å‡ºç°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„è®­ç»ƒæ›²çº¿ï¼šä¸ºä½•è®­ç»ƒæ—¶è¿‡ä¸€æ®µæ—¶é—´å°±ä¼šçªç„¶ä¸Šä¸‹æš´èµ°å‘¢ï¼Ÿå› ä¸ºå…¶Ïƒæ˜¯ç´¯ç§¯å¹³å‡å¾—åˆ°çš„ï¼Œåœ¨å…ˆå‰çš„ä¸€æ®µæ—¶é—´é‡Œï¼Œä¸Šä¸‹æ–¹å‘çš„æ›´æ–°æ¢¯åº¦éƒ½è¿‘ä¹ä¸º0ï¼Œç´¯ç§¯ä¸€æ®µæ—¶é—´ä»¥åï¼Œä¸Šä¸‹çš„æ¢¯åº¦å°±ä¼šå¾ˆå°ï¼Œç„¶åå­¦ä¹ ç‡å°±ä¼šå˜å¾—å¾ˆå¤§ï¼Œä½†æ˜¯é©¬ä¸Šåˆä¼šå› ä¸ºæˆ‘ä»¬çš„æœºåˆ¶æ›´æ–°å­¦ä¹ ç‡å›æ¥ï¼Œä»è€Œåªä¼šå‡ºç°è¿™æ ·çš„éœ‡è¡ä¸€ä¸‹çš„ç°è±¡ï¼Œè€Œä¸æ˜¯ä¸€ç›´çš„ä¸Šä¸‹ä¹±çªœã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114113710215.png" alt="image-20220114113710215" style="zoom:25%;" /></p>
<p>â€‹ åœ¨è‡ªåŠ¨ä¿®æ”¹å­¦ä¹ ç‡çš„æ–¹æ³•ä¸­ï¼Œè¿˜æœ‰ä¸€ç§å½¢å¼å«åšLearning Rate
Schedulingï¼šå®ƒåœ¨åŸå…ˆçš„åŸºç¡€ä¸Šå¯¹Î·ä¹Ÿè¿›è¡Œäº†ä¸€äº›è°ƒæ•´ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114113737186.png" alt="image-20220114113737186" style="zoom:8%;" /></p>
<p>â€‹ è¾ƒä¸ºå¸¸è§çš„å°±æ˜¯Learning Rate
Decayè¿™ç§ï¼Œéšç€ä¼˜åŒ–çš„æ›´æ–°æ·±å…¥ï¼Œæˆ‘ä»¬ä½¿å¾—Î·é€æ¸å˜å°ã€‚è¿™ç§æƒ³æ³•ä¹Ÿæ˜¯æ¯”è¾ƒèƒ½å¤Ÿç†è§£çš„ã€‚ç±»ä¼¼äºè¶Šå¾€åå¿«è¦åˆ°è¾¾ç»ˆç‚¹äº†ï¼Œæˆ‘ä»¬å°±è¶Šè¦æ…¢æ…¢çš„é è¿‘ï¼Œç²¾ç»†çš„è°ƒæ•´ï¼Œè€Œä¸€å¼€å§‹å¯ä»¥ä»¥è¾ƒå¤§çš„é€Ÿç‡è¿›è¡Œæ›´æ–°ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114113805989.png" alt="image-20220114113805989" style="zoom:25%;" /></p>
<p>â€‹ ä¹Ÿæœ‰ä¸€äº›ç½‘ç»œä¼šç”¨åˆ°ç±»ä¼¼ä¸‹é¢çš„Warming Upçš„é»‘ç§‘æŠ€ï¼š</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114113828593.png" alt="image-20220114113828593" style="zoom:25%;" /></p>
<h2
id="åä¸€ç»¼åˆå„ç§è®­ç»ƒæŠ€å·§çš„ä¼˜åŒ–å™¨adam">åä¸€ã€ç»¼åˆå„ç§è®­ç»ƒæŠ€å·§çš„ä¼˜åŒ–å™¨ï¼šAdam</h2>
<p>â€‹
Adamæ˜¯ä¸€ç§ç»¼åˆäº†RMSPropå’ŒMomentumæŠ€æœ¯çš„ä¼˜åŒ–å™¨ï¼Œå…¶å¤§è‡´ç®—æ³•å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨æ­¤å¤„å°±ä¸å¤šèµ˜è¿°ã€‚åŸè®ºæ–‡ç½‘å€ï¼šhttps://arxiv.org/pdf/1412.6980.pdf</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114113903161.png" alt="image-20220114113903161" style="zoom:33%;" /></p>
<h2
id="åäºŒæ”¹å˜losså‡½æ•°ä¹Ÿæœ‰å¯èƒ½å½±å“è®­ç»ƒ">åäºŒã€æ”¹å˜Losså‡½æ•°ï¼Œä¹Ÿæœ‰å¯èƒ½å½±å“è®­ç»ƒï¼š</h2>
<p>â€‹
æ­¤éƒ¨åˆ†é€šè¿‡æè¿°åˆ†ç±»ä»»åŠ¡ï¼Œæ¥é¡ºå¸¦é˜æ˜æ”¹å˜Losså‡½æ•°çš„å½¢å¼ï¼Œä¹Ÿæœ‰å¯èƒ½å½±å“è®­ç»ƒè¿™æ ·ä¸€ä»¶äº‹æƒ…ã€‚ä¸‹å›¾æ˜¯å›å½’ä¸åˆ†ç±»çš„ä»»åŠ¡ä¸€äº›å·®åˆ«ï¼Œåœ¨åˆ†ç±»ä»»åŠ¡ä¸­ï¼Œæœ€ç»ˆçš„ç»“æœå¾€å¾€æ˜¯ä¸€ä¸ªç±»åˆ«ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ•°å€¼ï¼ŒåŒæ—¶ï¼Œç±»åˆ«å¾€å¾€ä¼šç”±One-hotå‘é‡è¿›è¡Œè¡¨ç¤ºã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åˆ†ç±»ä»»åŠ¡æ‰€è¾“å‡ºçš„å†…å®¹å¾€å¾€æ˜¯ä¸€ä¸ªå¤šä¸ªæ•°å€¼çš„å‘é‡yã€‚ç„¶åæˆ‘ä»¬éœ€è¦æ¯”è¾ƒyå’Œ
çœŸå®ç±»åˆ«çš„æ ‡ç­¾ç›´æ¥çš„å·®åˆ«ï¼Œå°½å¯èƒ½çš„æœ€å°åŒ–è¿™ä¸ªå·®åˆ«å³å¯ã€‚é‚£ä¹ˆï¼Œç”±äºæ ‡ç­¾å¾€å¾€éƒ½æ˜¯One-hot
å‘é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ºäº†æ¯”è¾ƒyå’Œæ ‡ç­¾çš„å€¼ï¼Œå¾€å¾€éƒ½ä¼šå…ˆå¯¹yåšä¸€ä¸ªsoftmaxå‡½æ•°è¿›è¡Œå¤„ç†ï¼Œå°†yä¸­çš„æ‰€æœ‰å€¼å½’çº¦åŒ–è‡³0-1ä¹‹é—´ï¼Œå¹¶ä¸”æ‰€æœ‰å€¼çš„å’Œä¸º1.</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114113948987.png" alt="image-20220114113948987" style="zoom:23%;" /></p>
<p>â€‹
Soft-Maxå†…éƒ¨å¯¹è¾“å…¥è¿›è¡Œçš„å¤„ç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å‡è®¾è¾“å…¥y1,y2,y3ï¼Œæˆ‘ä»¬å…ˆå°†ä¸‰ä¸ªè¾“å…¥è®¡ç®—exp(y1),exp(y2),exp(y3),ç„¶åæ±‚å’Œï¼Œç„¶åè®¡ç®—è¾“å‡ºã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114114013901.png" alt="image-20220114114013901" style="zoom: 25%;" /></p>
<p>â€‹ é‚£ä¹ˆåœ¨å¾—åˆ°å½’ä¸€åŒ–åçš„yâ€™ä¹‹åï¼Œæˆ‘ä»¬å¦‚ä½•å»è®¡ç®—yâ€™å’Œlabel y
çš„å·®è·å‘¢ï¼ŸæŒ‰ç…§å…ˆå‰å›å½’çš„æƒ³æ³•æ˜¯è®¡ç®—ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„MSEï¼Œä¹Ÿå°±æ˜¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114114036461.png" alt="image-20220114114036461" style="zoom:25%;" /></p>
<p>â€‹
ä½†å…¶å®ä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘ä»¬åœ¨åˆ†ç±»ä»»åŠ¡ä¸­ï¼Œéƒ½ä¼šé‡‡ç”¨Cross-Entropyä½œä¸ºLosså‡½æ•°ï¼Œå³å¦‚ä¸‹æ‰€ç¤ºçš„å…¬å¼ï¼š</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114114056586.png" alt="image-20220114114056586" style="zoom:9%;" /></p>
<p>â€‹</p>
<p>â€‹
ä¸€ä¸ªç®€å•çš„è§£é‡Šæ˜¯ï¼Œæœ€å°åŒ–Cross-Entropyå’Œæœ€å¤§åŒ–ä¼¼ç„¶æ¦‚ç‡æ˜¯å®Œå…¨ç­‰åŒçš„ä¸€ä»¶äº‹æƒ…ï¼ˆè‡³äºä¸ºä»€ä¹ˆå®Œå…¨ç­‰åŒï¼Œå¯ä»¥æ‰¾ç›¸å…³èµ„æ–™ï¼‰ï¼Œåˆ†ç±»ä»»åŠ¡å°±æ˜¯è¦æ‰¾å‡ºè®¡ç®—å¾—åˆ°çš„yå±äºå“ªä¸€ç±»çš„æ¦‚ç‡æœ€å¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾€å¾€é‡‡ç”¨Cross-Entropyä½œä¸ºLosså‡½æ•°ã€‚è€Œè®¡ç®—Cross-Entropyä¹‹å‰ï¼Œæˆ‘ä»¬å¾€å¾€å°±æ˜¯è¦å¯¹ç½‘ç»œçš„è¾“å‡ºè¿›è¡ŒSoftMaxå‡½æ•°çš„å¤„ç†ã€‚æ‰€ä»¥å¾€å¾€SoftMaxä¼šå’ŒCross-Entropyç»‘å®šåœ¨ä¸€èµ·ï¼Œæœ‰è¶£çš„æ˜¯Pytorchçš„åº•éƒ¨å®ç°ä¸­ï¼Œå¦‚æœä½ çš„Losså‡½æ•°ä½¿ç”¨äº†Cross-Entropyï¼Œé‚£ä¹ˆä½ åœ¨ç½‘ç»œç»“æ„ä¸­æ˜¯ä¸éœ€è¦å®ç°SoftMaxå±‚çš„ï¼Œå› ä¸ºå®ƒä¼šè‡ªåŠ¨å°†SoftMaxå±‚åŠ åˆ°ä½ çš„ç½‘ç»œçš„æœ€ä¸Šé¢ã€‚</p>
<p>â€‹ å¦‚ä¸‹æ‰€ç¤ºæ˜¯ä¸€ä¸ªæ¯”è¾ƒç›´è§‚çš„ç»“æœï¼šå½“æˆ‘ä»¬é‡‡ç”¨ä¸åŒçš„Losså‡½æ•°çš„æ—¶å€™ï¼ŒError
Mapä¹Ÿä¼šæˆªç„¶ä¸åŒã€‚å·¦ä¾§é‡‡ç”¨MSEçš„Error mapåœ¨å·¦ä¸Šè§’çš„åŒºåŸŸä¸Šï¼ˆä¹Ÿå°±æ˜¯Large
Lossï¼‰çš„åŒºåŸŸä¸Šï¼Œæ¢¯åº¦å°±å¾ˆå¹³å¦ï¼Œå°±å¾ˆéš¾è®­ç»ƒï¼Œè€Œé‡‡ç”¨Cross-Entropyåˆ™ä¼šå¥½è®­ç»ƒå¾ˆå¤šã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆè¯´æœ‰çš„æ—¶å€™æ”¹å˜Losså‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ”¹å˜è®­ç»ƒçš„éš¾åº¦ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114114125892.png" alt="image-20220114114125892" style="zoom:25%;" /></p>
<h2
id="åä¸‰feature-normalization-batch-normalization-æŠ€æœ¯">åä¸‰ã€Feature
Normalization: Batch Normalization æŠ€æœ¯</h2>
<p>â€‹
æˆ‘ä»¬å…ˆå‰æåŠè¿‡ï¼Œå½“è®­ç»ƒæ•°æ®ä¸åŒç»´åº¦çš„ç‰¹å¾çš„å°ºåº¦ç›¸å·®è¾ƒå¤§æ—¶ï¼Œè®­ç»ƒéš¾åº¦ä¼šè¾ƒå¤§ï¼Œé‚£ä¹ˆFeature
Normalizationå°±æ˜¯ä¸ºäº†ä½¿å¾—ä¸åŒç‰¹å¾çš„å°ºåº¦ç±»ä¼¼ï¼Œä»è€Œä½¿å¾—Error
Surfaceè¾ƒä¸ºå¹³æ»‘ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå·¦ä¾§çš„Losså‡½æ•°å¹³é¢ï¼Œä¸åŒç‰¹å¾çš„æ¢¯åº¦å˜åŒ–ä¸åŒï¼Œæœ‰Smoothå’ŒSteepä¸¤ç±»ä¸åŒçš„å†…å®¹ã€‚å³ä¾§å°±æ˜¯åšäº†ä¸€ä¸ªFeature
Normalizationä»¥åçš„Error Surfaceï¼Œå„ä¸ªç»´åº¦éƒ½è¾ƒä¸ºå¹³æ»‘ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114114217069.png" alt="image-20220114114217069" style="zoom:25%;" /></p>
<p>â€‹
é‚£ä¹ˆæœ€ä¸ºå¹³å¸¸çš„ç‰¹å¾æ­£åˆ™åŒ–ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼šæ¯”å¦‚è¯´ç»™å‡ºä¸€ç»„xå‘é‡ï¼Œæˆ‘ä»¬è®¡ç®—å‘é‡ä¸­æ¯ä¸ªç»´åº¦çš„å¹³å‡å€¼ä¸æ–¹å·®ï¼Œç„¶åé€šè¿‡å¦‚ä¸‹å…¬å¼è¿›è¡Œè®¡ç®—ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†æ‰€æœ‰ç»´åº¦çš„æ•°æ®å½’çº¦åŒ–è‡³ä¸€ä¸ªmeanä¸º0ï¼Œdeviationä¸º1çš„ä¸€ä¸ªåˆ†å¸ƒä¸­ï¼Œä½¿å¾—å¤§è‡´çš„æ•°æ®å°ºåº¦å·®ä¸å¤šã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114114244676.png" alt="image-20220114114244676" style="zoom:25%;" /></p>
<p>â€‹
ä¸Šè¿°çš„å½’çº¦åŒ–å¤„ç†åœ¨HW1çš„ä»£ç ä¸­ä¹Ÿå·²ç»æœ‰æ‰€ä½“ç°ï¼Œé‚£ä¹ˆå…ˆå‰æˆ‘ä»¬åœ¨è¯´çš„æ˜¯æ•°æ®é¢„å¤„ç†æ­¥éª¤ä¸­ï¼Œå¯¹äºæ‰€æœ‰æ•°æ®çš„å½’çº¦åŒ–ã€‚é‚£ä¹ˆå¯¹äºæ·±åº¦å­¦ä¹ æ¥è¯´ï¼Œå¯èƒ½å­˜åœ¨å¦‚ä¸‹é—®é¢˜ï¼š</p>
<p>â€‹
å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¾“å…¥çš„ç‰¹å¾ç»è¿‡å½’ä¸€åŒ–ä»¥åï¼Œåœ¨ç¬¬ä¸€å±‚çš„è®­ç»ƒå‚æ•°æ˜¯æ¯”è¾ƒæ­£å¸¸çš„ï¼Œä½†æ˜¯ç»è¿‡ç¬¬ä¸€å±‚çš„å‚æ•°ä»¥åï¼Œè¾“å‡ºçš„ä¸åŒç»´åº¦çš„æ•°æ®åˆå¯èƒ½å›åˆ°äº†ä¸åŒå°ºåº¦è¿™æ ·ä¸€ç§çŠ¶æ€ã€‚è¿™æ ·çš„è¯ï¼Œå¯¹äºç¬¬äºŒå±‚çš„ç½‘ç»œæ¥è®²ï¼Œå‚æ•°ä¼˜åŒ–åˆä¼šå˜å¾—è¾ƒä¸ºå›°éš¾ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114114310723.png" alt="image-20220114114310723" style="zoom:25%;" /></p>
<p>â€‹
æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨å±‚ä¸å±‚ä¹‹é—´ä¹Ÿè¿›è¡Œå½’ä¸€åŒ–çš„æ“ä½œï¼Œå¦‚ä¸‹ç¤ºä¾‹æ¥è®²ï¼Œå°±æ˜¯é€šè¿‡z1,z2,z3è®¡ç®—å‡ºuå’ŒÏƒã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114114331145.png" alt="image-20220114114331145" style="zoom:25%;" /></p>
<p>â€‹
ç„¶åæˆ‘ä»¬å†å°†z1,z2,z3æ ¹æ®å…¬å¼æ¥è¿›è¡Œå½’ä¸€åŒ–çš„æ“ä½œï¼Œå¾—åˆ°å½’çº¦åŒ–åçš„z1,z2,z3ã€‚è¿™è¾¹çš„è¯å…¶å®æœ‰ä¸€ä¸ªæœ‰è¶£çš„å†…å®¹ï¼šåŸæœ¬æ¥è¯´ï¼Œå¦‚æœå‚æ•°æ›´æ–°äº†ï¼Œz1æ›´æ–°äº†ï¼Œé‚£ä¹ˆåªä¼šå½±å“a1çš„æ”¹å˜ï¼Œä½†æ˜¯ç°åœ¨è€Œè¨€ï¼ŒåŠ å…¥äº†BNä»¥åï¼Œz1æ›´æ–°äº†ä»¥åï¼Œä¼šå½±å“åˆ°uå’ŒÏƒ,ä»è€Œä¼šå†å½±å“å½’çº¦åŒ–åçš„z1,z2,z3ï¼Œéšåa2,a3ä¹Ÿä¼šå—åˆ°å½±å“ã€‚æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬åŠ å…¥å½’çº¦åŒ–çš„æ—¶å€™ï¼Œå°±éœ€è¦å°†æ•´ä¸ªè€ƒè™‘æˆä¸€ä¸ªå¤§çš„ç½‘ç»œã€‚æ‰€ä»¥å°±æŠŠBNåšæˆä¸€ä¸ªBatch
Normalizationå±‚ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114114355882.png" alt="image-20220114114355882" style="zoom:25%;" /></p>
<p>â€‹
å¹¶ä¸”ï¼Œæˆ‘ä»¬åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œç”±äºè¾“å…¥æ•°æ®å¾€å¾€æ˜¯ä¸€ä¸ªBatchä¸€ä¸ªBatchè¾“å…¥çš„ï¼Œæ‰€ä»¥è®­ç»ƒæ—¶è®¡ç®—çš„uå’ŒÏƒæˆ‘ä»¬å¾€å¾€ä¸ä¼šå»è®¡ç®—æ‰€æœ‰çš„è®­ç»ƒæ•°æ®ï¼Œè€Œæ˜¯è®¡ç®—è¯¥Batchå†…éƒ¨çš„æ‰€æœ‰æ•°æ®çš„uï¼ˆå‘é‡ï¼‰å’ŒÏƒï¼ˆå‘é‡ï¼‰ã€‚æ•…è€Œï¼Œè¿™ä¸ªæŠ€æœ¯å«Batch
Normalizationã€‚</p>
<p>â€‹ æ‰€ä»¥ï¼ŒBatch
Normalizationå¾€å¾€éœ€è¦åœ¨Batchæ¯”è¾ƒå¤§çš„æ—¶å€™æ‰ä¼šå¯ä»¥ä½¿ç”¨ï¼Œä¼šæ¯”è¾ƒå¥½ä¸€äº›ã€‚ä¸ç„¶çš„è¯è®¡ç®—å¾—åˆ°çš„uå’ŒÏƒå¹¶ä¸èƒ½ä»£è¡¨è®­ç»ƒæ•°æ®çš„ä¸€äº›åˆ†å¸ƒï¼Œå½’çº¦åŒ–å°±ä¼šå‡ºç°ä¸€äº›é—®é¢˜ã€‚åŒæ—¶ï¼Œå†å½’çº¦åŒ–æ—¶ä¹Ÿä¼šæœ‰ä¸€äº›å°çš„é—®é¢˜å¦‚ä¸‹ï¼š</p>
<p>â€‹ å› ä¸ºæˆ‘ä»¬å½’çº¦åŒ–è‡³äº†mean = 0,
deviation=1çš„æ•°æ®åˆ†å¸ƒï¼Œä¼šä¸ä¼šå½±å“åç»­æœºå™¨å­¦ä¹ çš„æ€§èƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬å†å½’çº¦åŒ–ååˆåŠ å…¥äº†Î³å’ŒÎ²ä¸¤ä¸ªå‚æ•°ï¼Œåœ¨è®­ç»ƒå¼€å§‹æ—¶ï¼ŒÎ³
ä¸€èˆ¬ä¸º1ï¼ŒÎ²ä¸€èˆ¬ä¸º0ï¼Œå¸®åŠ©å…¶æ›´å¥½çš„æ‹Ÿåˆåç»­çš„ç‰¹å¾ï¼ŒåŒæ—¶åˆèƒ½è¾ƒå¤§ç¨‹åº¦çš„ä¿æŒå„ä¸ªç»´åº¦çš„æ•°æ®åœ¨ç»Ÿä¸€å°ºåº¦ä¸‹ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114114421588.png" alt="image-20220114114421588" style="zoom:26%;" /></p>
<p>â€‹
é‚£ä¹ˆå…ˆå‰æ‰€è®²çš„æ˜¯åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„BatchNoramlization,é‚£ä¹ˆå¦‚æœåœ¨Testingçš„è¿‡ç¨‹ä¸­ï¼Œ</p>
<p>â€‹
æ¯æ¬¡è¾“å…¥ä¸€ä¸ªæ•°æ®ï¼Œæ²¡æœ‰å‡‘é½ä¸€ä¸ªBatchçš„æƒ…å†µä¸‹ï¼ŒBatchNormalizationåˆåº”å½“å¦‚ä½•æ‰§è¡Œå‘¢ï¼Ÿæ­¤æ—¶ï¼Œæˆ‘ä»¬çš„uå’ŒÏƒå°±ä¸æ¥æºäºæµ‹è¯•çš„Batchäº†ï¼Œè€Œæ˜¯æ¥æºäºè®­ç»ƒæ—¶å€™æ¯ä¸€ä¸ªBatchesè®¡ç®—å¾—åˆ°çš„uçš„å‡å€¼ä¾æ®ä¸€äº›æƒé‡ç´¯åŠ å¾—åˆ°ã€‚</p>
<p>â€‹
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/imac/image-20220114114447990.png" alt="image-20220114114447990" style="zoom:25%;" /></p>
<p>â€‹ æ€»è€Œè¨€ä¹‹ï¼ŒBatch Normalizationèƒ½è®©ä½ çš„error surface
æ›´åŠ å¹³æ»‘ï¼Œä»è€Œé™ä½è®­ç»ƒçš„éš¾åº¦ï¼Œè®©ç½‘ç»œæ‹¥æœ‰æ›´å¥½çš„æ€§èƒ½ï¼Œè¿™æ ·çš„è§£é‡Šæ— è®ºæ˜¯ç†è®ºè¿˜æ˜¯å®éªŒéƒ½å·²ç»è¢«äººæ‰€è¯å®ã€‚å…·ä½“å¯ä»¥å‚è§è¿™ç¯‡è®ºæ–‡ã€ŠHow
Does Batch Normalization Help Optimization?ã€‹ã€‚</p>
]]></content>
      <categories>
        <category>â“µ æ·±åº¦å­¦ä¹ ç¬”è®°</category>
        <category>ML2021è¯¾ç¨‹ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
        <tag>Training Tricks</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç³»åˆ—ç¬”è®°2â€”â€”javaé¢å‘å¯¹è±¡ç¼–ç¨‹åŸºç¡€</title>
    <url>/2022/01/29/3f72f5c3506a/</url>
    <content><![CDATA[<p>å‚è€ƒæ•™ç¨‹ç½‘å€ï¼šhttps://www.liaoxuefeng.com/wiki/1252599548343744/1260467032946976</p>
<h3 id="ä¸€ç±»çš„æ–¹æ³•">ä¸€ã€ç±»çš„æ–¹æ³•</h3>
<h4
id="ä¸€ä¸ªç±»é€šè¿‡å®šä¹‰publicæ–¹æ³•å°±å¯ä»¥ç»™å¤–éƒ¨ä»£ç æš´éœ²ä¸€äº›æ“ä½œçš„æ¥å£">1ã€ä¸€ä¸ªç±»é€šè¿‡å®šä¹‰publicæ–¹æ³•ï¼Œå°±å¯ä»¥ç»™å¤–éƒ¨ä»£ç æš´éœ²ä¸€äº›æ“ä½œçš„æ¥å£ã€‚</h4>
<p>ä¸€èˆ¬è€Œè¨€å†…éƒ¨çš„å˜é‡è®¾ç½®ä¸ºprivateï¼Œå¯¹å†…éƒ¨å˜é‡çš„æ“ä½œç”±æš´éœ²çš„æ¥å£è¿›è¡Œï¼Œè¿™æ ·å†…éƒ¨èƒ½å¤Ÿè‡ªå·±ä¿è¯é€»è¾‘ä¸€è‡´æ€§ã€‚</p>
<p>åœ¨publicçš„æ–¹æ³•å†…éƒ¨ï¼Œæˆ‘ä»¬å°±æœ‰æœºä¼šæ£€æŸ¥å‚æ•°å¯¹ä¸å¯¹ã€‚æ¯”å¦‚ï¼š<code>setName()</code>æ–¹æ³•å¯ä»¥åšæ£€æŸ¥ï¼Œä¾‹å¦‚ï¼Œä¸å…è®¸ä¼ å…¥<code>null</code>å’Œç©ºå­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (name == <span class="literal">null</span> || name.isBlank()) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;invalid name&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.name = name.strip(); <span class="comment">// å»æ‰é¦–å°¾ç©ºæ ¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4
id="åœ¨æ–¹æ³•å†…éƒ¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ªéšå«çš„å˜é‡thiså®ƒå§‹ç»ˆæŒ‡å‘å½“å‰å®ä¾‹">2ã€åœ¨æ–¹æ³•å†…éƒ¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªéšå«çš„å˜é‡<code>this</code>ï¼Œå®ƒå§‹ç»ˆæŒ‡å‘å½“å‰å®ä¾‹</h4>
<p>å¦‚æœæ²¡æœ‰å‘½åå†²çªï¼Œå¯ä»¥çœç•¥<code>this</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name; <span class="comment">// ç›¸å½“äºthis.name</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¯å˜å‚æ•°">3ã€å¯å˜å‚æ•°ï¼š</h4>
<p>å¯å˜å‚æ•°ç”¨<code>ç±»å‹...</code>å®šä¹‰ï¼Œå¯å˜å‚æ•°ç›¸å½“äºæ•°ç»„ç±»å‹,å¯å˜å‚æ•°å¯ä»¥ä¿è¯æ— æ³•ä¼ å…¥<code>null</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Group</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String[] names;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNames</span><span class="params">(String... names)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.names = names;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">Group</span> <span class="variable">g</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Group</span>();</span><br><span class="line">g.setNames(<span class="string">&quot;Xiao Ming&quot;</span>, <span class="string">&quot;Xiao Hong&quot;</span>, <span class="string">&quot;Xiao Jun&quot;</span>); <span class="comment">// ä¼ å…¥3ä¸ªString</span></span><br><span class="line">g.setNames(<span class="string">&quot;Xiao Ming&quot;</span>, <span class="string">&quot;Xiao Hong&quot;</span>); <span class="comment">// ä¼ å…¥2ä¸ªString</span></span><br><span class="line">g.setNames(<span class="string">&quot;Xiao Ming&quot;</span>); <span class="comment">// ä¼ å…¥1ä¸ªString</span></span><br><span class="line">g.setNames(); <span class="comment">// ä¼ å…¥0ä¸ªString</span></span><br></pre></td></tr></table></figure>
<h4 id="å‚æ•°ä¼ é€’">4ã€å‚æ•°ä¼ é€’ï¼š</h4>
<p>å¼•ç”¨ç±»å‹å‚æ•°çš„ä¼ é€’ï¼Œè°ƒç”¨æ–¹çš„å˜é‡ï¼Œå’Œæ¥æ”¶æ–¹çš„å‚æ•°å˜é‡ï¼ŒæŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚åŒæ–¹ä»»æ„ä¸€æ–¹å¯¹è¿™ä¸ªå¯¹è±¡çš„ä¿®æ”¹ï¼Œéƒ½ä¼šå½±å“å¯¹æ–¹ï¼ˆå› ä¸ºæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡å˜›ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸€ä¸ªé™·é˜±é¢˜ç›®</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">bob</span> <span class="operator">=</span> <span class="string">&quot;Bob&quot;</span>;</span><br><span class="line">        p.setName(bob); <span class="comment">// ä¼ å…¥bobå˜é‡</span></span><br><span class="line">        System.out.println(p.getName()); <span class="comment">// &quot;Bob&quot;</span></span><br><span class="line">        bob = <span class="string">&quot;Alice&quot;</span>; <span class="comment">// bobæ”¹åä¸ºAlice</span></span><br><span class="line">        System.out.println(p.getName()); <span class="comment">// &quot;Bob&quot;è¿˜æ˜¯&quot;Alice&quot;?</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å›ç­”ï¼š åº”è¯¥æ˜¯Aliceï¼š</span></span><br><span class="line"><span class="comment">// String bob = &quot;Bob&quot;; çš„æ—¶å€™ï¼Œä¸ºå…¶åˆ†é…å†…å­˜ï¼Œç„¶åbob æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘è¯¥å†…å­˜ï¼Œæ¯”å¦‚0x0011.</span></span><br><span class="line"><span class="comment">// bob = &quot;Alice&quot; æ—¶å‘ç”Ÿäº†é‡æ–°èµ‹å€¼</span></span><br><span class="line"><span class="comment">// ä½†åœ¨javaä¸­Stringç±»å‹æ˜¯ä¸å¯å˜çš„ï¼Œå½“å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¼šé‡æ–°åˆ†é…å†…å­˜ï¼Œå³ç”Ÿæˆä¸€ä¸ªæ–°çš„å†…å­˜åœ°å€ï¼Œä¾‹å¦‚ï¼š0x0022,è¿™ä¸ªæ—¶å€™ï¼Œç°åœ¨çš„bobçš„å†…å­˜æŒ‡å‘&quot;Alice&quot;ï¼Œä¹Ÿå°±æ˜¯æŒ‡å‘0x0022ï¼Œè€Œp.bobçš„å†…å­˜æŒ‡å‘ä»ä¸º0x0011ï¼Œä¹Ÿå°±æ˜¯Bobï¼Œæ‰€ä»¥è¾“å‡ºçš„ä¾æ—§æ˜¯Bobã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="äºŒæ„é€ æ–¹æ³•">äºŒã€æ„é€ æ–¹æ³•ï¼š</h3>
<h4
id="æ²¡æœ‰åœ¨æ„é€ æ–¹æ³•ä¸­åˆå§‹åŒ–å­—æ®µæ—¶å¼•ç”¨ç±»å‹çš„å­—æ®µé»˜è®¤æ˜¯nullæ•°å€¼ç±»å‹çš„å­—æ®µç”¨é»˜è®¤å€¼intç±»å‹é»˜è®¤å€¼æ˜¯0å¸ƒå°”ç±»å‹é»˜è®¤å€¼æ˜¯false">1ã€æ²¡æœ‰åœ¨æ„é€ æ–¹æ³•ä¸­åˆå§‹åŒ–å­—æ®µæ—¶ï¼Œå¼•ç”¨ç±»å‹çš„å­—æ®µé»˜è®¤æ˜¯<code>null</code>ï¼Œæ•°å€¼ç±»å‹çš„å­—æ®µç”¨é»˜è®¤å€¼ï¼Œ<code>int</code>ç±»å‹é»˜è®¤å€¼æ˜¯<code>0</code>ï¼Œå¸ƒå°”ç±»å‹é»˜è®¤å€¼æ˜¯<code>false</code>ï¼š</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name; <span class="comment">// é»˜è®¤åˆå§‹åŒ–ä¸ºnull</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age; <span class="comment">// é»˜è®¤åˆå§‹åŒ–ä¸º0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¯ä»¥å®šä¹‰å¤šä¸ªæ„é€ æ–¹æ³•">2ã€å¯ä»¥å®šä¹‰å¤šä¸ªæ„é€ æ–¹æ³•ï¼š</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4
id="æ—¢å¯¹å­—æ®µè¿›è¡Œåˆå§‹åŒ–åˆåœ¨æ„é€ æ–¹æ³•ä¸­å¯¹å­—æ®µè¿›è¡Œåˆå§‹åŒ–">3ã€æ—¢å¯¹å­—æ®µè¿›è¡Œåˆå§‹åŒ–ï¼Œåˆåœ¨æ„é€ æ–¹æ³•ä¸­å¯¹å­—æ®µè¿›è¡Œåˆå§‹åŒ–ï¼š</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class Person &#123;</span><br><span class="line">    private String name = &quot;Unamed&quot;;</span><br><span class="line">    private int age = 10;</span><br><span class="line"></span><br><span class="line">    public Person(String name, int age) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œ<code>new Person("Xiao Ming", 12)</code>å¾—åˆ°çš„å¯¹è±¡å®ä¾‹ï¼Œå­—æ®µçš„åˆå§‹å€¼æ˜¯å•¥ï¼Ÿ</p>
<p>åœ¨Javaä¸­ï¼Œåˆ›å»ºå¯¹è±¡å®ä¾‹çš„æ—¶å€™ï¼ŒæŒ‰ç…§å¦‚ä¸‹é¡ºåºè¿›è¡Œåˆå§‹åŒ–ï¼š</p>
<ol type="1">
<li>å…ˆåˆå§‹åŒ–å­—æ®µï¼Œä¾‹å¦‚ï¼Œ<code>int age = 10;</code>è¡¨ç¤ºå­—æ®µåˆå§‹åŒ–ä¸º<code>10</code>ï¼Œ<code>double salary;</code>è¡¨ç¤ºå­—æ®µé»˜è®¤åˆå§‹åŒ–ä¸º<code>0</code>ï¼Œ<code>String name;</code>è¡¨ç¤ºå¼•ç”¨ç±»å‹å­—æ®µé»˜è®¤åˆå§‹åŒ–ä¸º<code>null</code>ï¼›</li>
<li>æ‰§è¡Œæ„é€ æ–¹æ³•çš„ä»£ç è¿›è¡Œåˆå§‹åŒ–ã€‚</li>
</ol>
<p>â€‹
å› æ­¤ï¼Œ<strong>æ„é€ æ–¹æ³•çš„ä»£ç ç”±äºåè¿è¡Œ</strong>ï¼Œæ‰€ä»¥ï¼Œ<code>new Person("Xiao Ming", 12)</code>çš„å­—æ®µå€¼æœ€ç»ˆç”±æ„é€ æ–¹æ³•çš„ä»£ç ç¡®å®šã€‚</p>
<h4
id="ä¸€ä¸ªæ„é€ æ–¹æ³•å¯ä»¥è°ƒç”¨å…¶ä»–æ„é€ æ–¹æ³•è¿™æ ·åšçš„ç›®çš„æ˜¯ä¾¿äºä»£ç å¤ç”¨è°ƒç”¨å…¶ä»–æ„é€ æ–¹æ³•çš„è¯­æ³•æ˜¯this">4ã€ä¸€ä¸ªæ„é€ æ–¹æ³•å¯ä»¥è°ƒç”¨å…¶ä»–æ„é€ æ–¹æ³•ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä¾¿äºä»£ç å¤ç”¨ã€‚è°ƒç”¨å…¶ä»–æ„é€ æ–¹æ³•çš„è¯­æ³•æ˜¯<code>this(â€¦)</code>ï¼š</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(name, <span class="number">18</span>); <span class="comment">// è°ƒç”¨å¦ä¸€ä¸ªæ„é€ æ–¹æ³•Person(String, int)</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(<span class="string">&quot;Unnamed&quot;</span>); <span class="comment">// è°ƒç”¨å¦ä¸€ä¸ªæ„é€ æ–¹æ³•Person(String)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸‰æ–¹æ³•é‡è½½overload">ä¸‰ã€æ–¹æ³•é‡è½½Overloadï¼š</h3>
<ul>
<li><p>æ–¹æ³•é‡è½½æ˜¯æŒ‡å¤šä¸ªæ–¹æ³•çš„æ–¹æ³•åç›¸åŒï¼Œä½†å„è‡ªçš„å‚æ•°ä¸åŒï¼›</p></li>
<li><p>é‡è½½æ–¹æ³•åº”è¯¥å®Œæˆç±»ä¼¼çš„åŠŸèƒ½ï¼Œå‚è€ƒ<code>String</code>çš„<code>indexOf()</code>ï¼›</p></li>
<li><p><strong>é‡è½½æ–¹æ³•è¿”å›å€¼ç±»å‹åº”è¯¥ç›¸åŒ,å„è‡ªçš„å‚æ•°åº”å½“ä¸åŒ</strong></p></li>
</ul>
<h3 id="å››ç»§æ‰¿">å››ã€ç»§æ‰¿ï¼š</h3>
<h4 id="åŸºç¡€ç»§æ‰¿ä¸protectedå…³é”®å­—">1ã€åŸºç¡€ç»§æ‰¿ä¸Protectedå…³é”®å­—ï¼š</h4>
<ul>
<li><p>Javaä½¿ç”¨<code>extends</code>å…³é”®å­—æ¥å®ç°ç»§æ‰¿ï¼š</p></li>
<li><p>æ³¨æ„ï¼šå­ç±»è‡ªåŠ¨è·å¾—äº†çˆ¶ç±»çš„æ‰€æœ‰å­—æ®µï¼Œä¸¥ç¦å®šä¹‰ä¸çˆ¶ç±»é‡åçš„å­—æ®µï¼</p></li>
<li><p>Javaåªå…è®¸ä¸€ä¸ªclassç»§æ‰¿è‡ªä¸€ä¸ªç±»ï¼Œå› æ­¤ï¼Œä¸€ä¸ªç±»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªçˆ¶ç±»ã€‚</p></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;...&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;...&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;...&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸è¦é‡å¤nameå’Œageå­—æ®µ/æ–¹æ³•,</span></span><br><span class="line">    <span class="comment">// åªéœ€è¦å®šä¹‰æ–°å¢scoreå­—æ®µ/æ–¹æ³•:</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getScore</span><span class="params">()</span> &#123; â€¦ &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setScore</span><span class="params">(<span class="type">int</span> score)</span> &#123; â€¦ &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å­ç±»æ— æ³•è®¿é—®çˆ¶ç±»çš„<code>private</code>å­—æ®µæˆ–è€…<code>private</code>æ–¹æ³•</li>
<li>çˆ¶ç±»ä¸­ç”¨<code>protected</code>ä¿®é¥°çš„å­—æ®µå¯ä»¥è¢«å­ç±»è®¿é—®</li>
<li><code>protected</code>å…³é”®å­—å¯ä»¥æŠŠå­—æ®µå’Œæ–¹æ³•çš„è®¿é—®æƒé™æ§åˆ¶åœ¨ç»§æ‰¿æ ‘å†…éƒ¨ï¼Œä¸€ä¸ª<code>protected</code>å­—æ®µå’Œæ–¹æ³•å¯ä»¥è¢«å…¶å­ç±»ï¼Œä»¥åŠå­ç±»çš„å­ç±»æ‰€è®¿é—®</li>
</ul>
<h4 id="superå…³é”®å­—">2ã€Superå…³é”®å­—ï¼š</h4>
<ul>
<li><p><code>super</code>å…³é”®å­—è¡¨ç¤ºçˆ¶ç±»ï¼ˆè¶…ç±»ï¼‰ã€‚å­ç±»å¼•ç”¨çˆ¶ç±»çš„å­—æ®µæ—¶ï¼Œå¯ä»¥ç”¨<code>super.fieldName</code>ã€‚</p></li>
<li><p>è§‚å¯Ÿä»¥ä¸‹ä»£ç ï¼Œä¸ºä½•ä¼šç¼–è¯‘é”™è¯¯ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;Xiao Ming&quot;</span>, <span class="number">12</span>, <span class="number">89</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> String name;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">int</span> score)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>åœ¨Javaä¸­ï¼Œä»»ä½•<code>class</code>çš„æ„é€ æ–¹æ³•ï¼Œç¬¬ä¸€è¡Œè¯­å¥å¿…é¡»æ˜¯è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ã€‚å¦‚æœæ²¡æœ‰æ˜ç¡®åœ°è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œç¼–è¯‘å™¨ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨åŠ ä¸€å¥<code>super();</code>ï¼Œæ‰€ä»¥ï¼Œ<code>Student</code>ç±»çš„æ„é€ æ–¹æ³•å®é™…ä¸Šæ˜¯è¿™æ ·ï¼š</p></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">int</span> score)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(); <span class="comment">// è‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•</span></span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ï¼Œ<code>Person</code>ç±»å¹¶æ²¡æœ‰æ— å‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œå› æ­¤ï¼Œç¼–è¯‘å¤±è´¥ã€‚</p>
<p>è§£å†³æ–¹æ³•æ˜¯è°ƒç”¨<code>Person</code>ç±»å­˜åœ¨çš„æŸä¸ªæ„é€ æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">int</span> score)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name, age); <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•Person(String, int)</span></span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ç»“è®ºï¼šå¦‚æœçˆ¶ç±»æ²¡æœ‰é»˜è®¤çš„æ„é€ æ–¹æ³•ï¼Œå­ç±»å°±å¿…é¡»æ˜¾å¼è°ƒç”¨<code>super()</code>å¹¶ç»™å‡ºå‚æ•°ä»¥ä¾¿è®©ç¼–è¯‘å™¨å®šä½åˆ°çˆ¶ç±»çš„ä¸€ä¸ªåˆé€‚çš„æ„é€ æ–¹æ³•ã€‚ä¸”å­ç±»ä¸ä¼šç»§æ‰¿ä»»ä½•çˆ¶ç±»çš„æ„é€ æ–¹æ³•ã€‚å­ç±»é»˜è®¤çš„æ„é€ æ–¹æ³•æ˜¯ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œä¸æ˜¯ç»§æ‰¿çš„ã€‚</li>
</ul>
<h4 id="é˜»æ­¢ç»§æ‰¿">3ã€é˜»æ­¢ç»§æ‰¿ï¼š</h4>
<ul>
<li>æ­£å¸¸æƒ…å†µä¸‹ï¼Œåªè¦æŸä¸ªclassæ²¡æœ‰<code>final</code>ä¿®é¥°ç¬¦ï¼Œé‚£ä¹ˆä»»ä½•ç±»éƒ½å¯ä»¥ä»è¯¥classç»§æ‰¿ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> String name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// compile error: ä¸å…è®¸ç»§æ‰¿è‡ªPerson</span></span><br><span class="line">Student <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ä»Java
15å¼€å§‹ï¼Œå…è®¸ä½¿ç”¨<code>sealed</code>ä¿®é¥°classï¼Œå¹¶é€šè¿‡<code>permits</code>æ˜ç¡®å†™å‡ºèƒ½å¤Ÿä»è¯¥classç»§æ‰¿çš„å­ç±»åç§°ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">class</span> <span class="title class_">Shape</span> permits Rect, Circle, Triangle &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ³¨æ„ï¼šè¿™ç§<code>sealed</code>ç±»ä¸»è¦ç”¨äºä¸€äº›æ¡†æ¶ï¼Œé˜²æ­¢ç»§æ‰¿è¢«æ»¥ç”¨ã€‚</li>
</ul>
<p><code>sealed</code>ç±»åœ¨Java
15ä¸­ç›®å‰æ˜¯é¢„è§ˆçŠ¶æ€ï¼Œè¦å¯ç”¨å®ƒï¼Œå¿…é¡»ä½¿ç”¨å‚æ•°<code>--enable-preview</code>å’Œ<code>--source 15</code>ã€‚</p>
<h4 id="å‘ä¸Šè½¬å‹">4ã€å‘ä¸Šè½¬å‹ï¼š</h4>
<p>â€‹ æŠŠä¸€ä¸ªå­ç±»ç±»å‹èµ‹å€¼ç»™çˆ¶ç±»ç±»å‹çš„å˜é‡ï¼Œè¢«ç§°ä¸ºå‘ä¸Šè½¬å‹ï¼ˆupcastingï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line"><span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> s; <span class="comment">// upcasting, ok</span></span><br><span class="line"><span class="type">Object</span> <span class="variable">o1</span> <span class="operator">=</span> p; <span class="comment">// upcasting, ok</span></span><br><span class="line"><span class="type">Object</span> <span class="variable">o2</span> <span class="operator">=</span> s; <span class="comment">// upcasting, ok</span></span><br></pre></td></tr></table></figure>
<p>â€‹
æ³¨æ„åˆ°ç»§æ‰¿æ ‘æ˜¯<code>Student &gt; Person &gt; Object</code>ï¼Œæ‰€ä»¥ï¼Œå¯ä»¥æŠŠ<code>Student</code>ç±»å‹è½¬å‹ä¸º<code>Person</code>ï¼Œæˆ–è€…æ›´é«˜å±‚æ¬¡çš„<code>Object</code>ã€‚</p>
<h4 id="å‘ä¸‹è½¬å‹">5ã€å‘ä¸‹è½¬å‹ï¼š</h4>
<p>â€‹
å¦‚æœæŠŠä¸€ä¸ªçˆ¶ç±»ç±»å‹å¼ºåˆ¶è½¬å‹ä¸ºå­ç±»ç±»å‹ï¼Œå°±æ˜¯å‘ä¸‹è½¬å‹ï¼ˆdowncastingï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(); <span class="comment">// upcasting, ok</span></span><br><span class="line"><span class="type">Person</span> <span class="variable">p2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> (Student) p1; <span class="comment">// ok</span></span><br><span class="line"><span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> (Student) p2; <span class="comment">// runtime error! ClassCastException!</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>Person</code>ç±»å‹<code>p1</code>å®é™…æŒ‡å‘<code>Student</code>å®ä¾‹ï¼Œ</p></li>
<li><p><code>Person</code>ç±»å‹å˜é‡<code>p2</code>å®é™…æŒ‡å‘<code>Person</code>å®ä¾‹ã€‚</p></li>
</ul>
<p>åœ¨å‘ä¸‹è½¬å‹çš„æ—¶å€™ï¼š</p>
<ul>
<li><p>æŠŠ<code>p1</code>è½¬å‹ä¸º<code>Student</code>ä¼šæˆåŠŸï¼Œå› ä¸º<code>p1</code>ç¡®å®æŒ‡å‘<code>Student</code>å®ä¾‹ï¼Œ</p></li>
<li><p>æŠŠ<code>p2</code>è½¬å‹ä¸º<code>Student</code>ä¼šå¤±è´¥ï¼Œå› ä¸º<code>p2</code>çš„å®é™…ç±»å‹æ˜¯<code>Person</code>ï¼Œä¸èƒ½æŠŠçˆ¶ç±»å˜ä¸ºå­ç±»ï¼Œå› ä¸ºå­ç±»åŠŸèƒ½æ¯”çˆ¶ç±»å¤šï¼Œå¤šçš„åŠŸèƒ½æ— æ³•å‡­ç©ºå˜å‡ºæ¥ã€‚</p></li>
</ul>
<p>å› æ­¤ï¼Œå‘ä¸‹è½¬å‹å¾ˆå¯èƒ½ä¼šå¤±è´¥ã€‚å¤±è´¥çš„æ—¶å€™ï¼ŒJavaè™šæ‹Ÿæœºä¼šæŠ¥<code>ClassCastException</code>ã€‚</p>
<p>ä¸ºäº†é¿å…å‘ä¸‹è½¬å‹å‡ºé”™ï¼ŒJavaæä¾›äº†<code>instanceof</code>æ“ä½œç¬¦ï¼Œå¯ä»¥å…ˆåˆ¤æ–­ä¸€ä¸ªå®ä¾‹ç©¶ç«Ÿæ˜¯ä¸æ˜¯æŸç§ç±»å‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">System.out.println(p <span class="keyword">instanceof</span> Person); <span class="comment">// true</span></span><br><span class="line">System.out.println(p <span class="keyword">instanceof</span> Student); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">System.out.println(s <span class="keyword">instanceof</span> Person); <span class="comment">// true</span></span><br><span class="line">System.out.println(s <span class="keyword">instanceof</span> Student); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="type">Student</span> <span class="variable">n</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">System.out.println(n <span class="keyword">instanceof</span> Student); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p><code>instanceof</code>å®é™…ä¸Šåˆ¤æ–­ä¸€ä¸ªå˜é‡æ‰€æŒ‡å‘çš„å®ä¾‹æ˜¯å¦æ˜¯æŒ‡å®šç±»å‹ï¼Œæˆ–è€…è¿™ä¸ªç±»å‹çš„å­ç±»ã€‚å¦‚æœä¸€ä¸ªå¼•ç”¨å˜é‡ä¸º<code>null</code>ï¼Œé‚£ä¹ˆå¯¹ä»»ä½•<code>instanceof</code>çš„åˆ¤æ–­éƒ½ä¸º<code>false</code>ã€‚</p>
<p>åˆ©ç”¨<code>instanceof</code>ï¼Œåœ¨å‘ä¸‹è½¬å‹å‰å¯ä»¥å…ˆåˆ¤æ–­ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line"><span class="keyword">if</span> (p <span class="keyword">instanceof</span> Student) &#123;</span><br><span class="line">    <span class="comment">// åªæœ‰åˆ¤æ–­æˆåŠŸæ‰ä¼šå‘ä¸‹è½¬å‹:</span></span><br><span class="line">    <span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> (Student) p; <span class="comment">// ä¸€å®šä¼šæˆåŠŸ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äº”å¤šæ€">äº”ã€å¤šæ€ï¼š</h3>
<h4 id="è¦†å†™-override">1ã€è¦†å†™ Override</h4>
<p>åœ¨ç»§æ‰¿å…³ç³»ä¸­ï¼Œå­ç±»å¦‚æœå®šä¹‰äº†ä¸€ä¸ªä¸çˆ¶ç±»æ–¹æ³•ç­¾åå®Œå…¨ç›¸åŒçš„æ–¹æ³•ï¼Œè¢«ç§°ä¸ºè¦†å†™ï¼ˆOverrideï¼‰ã€‚</p>
<ul>
<li><p>OverRideä¼ å…¥å‚æ•°ä¸è¿”å›å€¼éƒ½åº”è¯¥ç›¸åŒã€‚</p></li>
<li><p>åŠ ä¸Š<code>@Override</code>å¯ä»¥è®©ç¼–è¯‘å™¨å¸®åŠ©æ£€æŸ¥æ˜¯å¦è¿›è¡Œäº†æ­£ç¡®çš„è¦†å†™ã€‚å¸Œæœ›è¿›è¡Œè¦†å†™ï¼Œä½†æ˜¯ä¸å°å¿ƒå†™é”™äº†æ–¹æ³•ç­¾åï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚</p></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span> <span class="comment">// Compile error!</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(String s)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¤šæ€">2ã€å¤šæ€</h4>
<p>Javaçš„å®ä¾‹æ–¹æ³•è°ƒç”¨æ˜¯åŸºäºè¿è¡Œæ—¶çš„å®é™…ç±»å‹çš„åŠ¨æ€è°ƒç”¨ï¼Œè€Œéå˜é‡çš„å£°æ˜ç±»å‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">p.run(); <span class="comment">// è¿è¡Œçš„æ—¶Studentçš„run()æ–¹æ³•</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">runTwice</span><span class="params">(Person p)</span> &#123;</span><br><span class="line">    p.run();</span><br><span class="line">    p.run(); <span class="comment">//å®ƒä¼ å…¥çš„å‚æ•°ç±»å‹æ˜¯Personï¼Œæˆ‘ä»¬æ˜¯æ— æ³•çŸ¥é“ä¼ å…¥çš„å‚æ•°å®é™…ç±»å‹ç©¶ç«Ÿæ˜¯Personï¼Œè¿˜æ˜¯Studentï¼Œè¿˜æ˜¯Personçš„å…¶ä»–å­ç±»ï¼Œå› æ­¤ï¼Œä¹Ÿæ— æ³•ç¡®å®šè°ƒç”¨çš„æ˜¯ä¸æ˜¯Personç±»å®šä¹‰çš„run()æ–¹æ³•ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
<strong>å¤šæ€çš„ç‰¹æ€§å°±æ˜¯ï¼Œè¿è¡ŒæœŸæ‰èƒ½åŠ¨æ€å†³å®šè°ƒç”¨çš„å­ç±»æ–¹æ³•ã€‚å¯¹æŸä¸ªç±»å‹è°ƒç”¨æŸä¸ªæ–¹æ³•ï¼Œæ‰§è¡Œçš„å®é™…æ–¹æ³•å¯èƒ½æ˜¯æŸä¸ªå­ç±»çš„è¦†å†™æ–¹æ³•ã€‚è¿™ç§ä¸ç¡®å®šæ€§çš„æ–¹æ³•è°ƒç”¨ï¼Œç©¶ç«Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</strong></p>
<p>â€‹ ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>å‡è®¾æˆ‘ä»¬å®šä¹‰ä¸€ç§æ”¶å…¥ï¼Œéœ€è¦ç»™å®ƒæŠ¥ç¨ï¼Œé‚£ä¹ˆå…ˆå®šä¹‰ä¸€ä¸ª<code>Income</code>ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Income</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">double</span> income;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getTax</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> income * <span class="number">0.1</span>; <span class="comment">// ç¨ç‡10%</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹äºå·¥èµ„æ”¶å…¥ï¼Œå¯ä»¥å‡å»ä¸€ä¸ªåŸºæ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä»<code>Income</code>æ´¾ç”Ÿå‡º<code>Salary</code>ï¼Œå¹¶è¦†å†™<code>getTax()</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Salary</span> <span class="keyword">extends</span> <span class="title class_">Income</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getTax</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (income &lt;= <span class="number">5000</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (income - <span class="number">5000</span>) * <span class="number">0.2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ äº«å—å›½åŠ¡é™¢ç‰¹æ®Šæ´¥è´´ï¼Œé‚£ä¹ˆæŒ‰ç…§è§„å®šï¼Œå¯ä»¥å…¨éƒ¨å…ç¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StateCouncilSpecialAllowance</span> <span class="keyword">extends</span> <span class="title class_">Income</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getTax</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬è¦ç¼–å†™ä¸€ä¸ªæŠ¥ç¨çš„è´¢åŠ¡è½¯ä»¶ï¼Œå¯¹äºä¸€ä¸ªäººçš„æ‰€æœ‰æ”¶å…¥è¿›è¡ŒæŠ¥ç¨ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// ç»™ä¸€ä¸ªæœ‰æ™®é€šæ”¶å…¥ã€å·¥èµ„æ”¶å…¥å’Œäº«å—å›½åŠ¡é™¢ç‰¹æ®Šæ´¥è´´çš„å°ä¼™ä¼´ç®—ç¨:</span></span><br><span class="line">        Income[] incomes = <span class="keyword">new</span> <span class="title class_">Income</span>[] &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Income</span>(<span class="number">3000</span>),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Salary</span>(<span class="number">7500</span>),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">StateCouncilSpecialAllowance</span>(<span class="number">15000</span>)</span><br><span class="line">        &#125;;</span><br><span class="line">        System.out.println(totalTax(incomes));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">totalTax</span><span class="params">(Income... incomes)</span> &#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (Income income: incomes) &#123;</span><br><span class="line">            total = total + income.getTax();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>è§‚å¯Ÿ<code>totalTax()</code>æ–¹æ³•ï¼šåˆ©ç”¨å¤šæ€ï¼Œ<code>totalTax()</code>æ–¹æ³•åªéœ€è¦å’Œ<code>Income</code>æ‰“äº¤é“ï¼Œå®ƒå®Œå…¨ä¸éœ€è¦çŸ¥é“<code>Salary</code>å’Œ<code>StateCouncilSpecialAllowance</code>çš„å­˜åœ¨ï¼Œå°±å¯ä»¥æ­£ç¡®è®¡ç®—å‡ºæ€»çš„ç¨ã€‚å¦‚æœæˆ‘ä»¬è¦æ–°å¢ä¸€ç§ç¨¿è´¹æ”¶å…¥ï¼Œåªéœ€è¦ä»<code>Income</code>æ´¾ç”Ÿï¼Œç„¶åæ­£ç¡®è¦†å†™<code>getTax()</code>æ–¹æ³•å°±å¯ä»¥ã€‚æŠŠæ–°çš„ç±»å‹ä¼ å…¥<code>totalTax()</code>ï¼Œä¸éœ€è¦ä¿®æ”¹ä»»ä½•ä»£ç ã€‚</strong></p>
<h4 id="è¦†å†™objectç±»çš„æ–¹æ³•">3ã€è¦†å†™Objectç±»çš„æ–¹æ³•ï¼š</h4>
<p>â€‹
å› ä¸ºæ‰€æœ‰çš„<code>class</code>æœ€ç»ˆéƒ½ç»§æ‰¿è‡ª<code>Object</code>ï¼Œè€Œ<code>Object</code>å®šä¹‰äº†å‡ ä¸ªé‡è¦çš„æ–¹æ³•ï¼š</p>
<ul>
<li><code>toString()</code>ï¼šæŠŠinstanceè¾“å‡ºä¸º<code>String</code>ï¼›</li>
<li><code>equals()</code>ï¼šåˆ¤æ–­ä¸¤ä¸ªinstanceæ˜¯å¦é€»è¾‘ç›¸ç­‰ï¼›</li>
<li><code>hashCode()</code>ï¼šè®¡ç®—ä¸€ä¸ªinstanceçš„å“ˆå¸Œå€¼ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºæ›´æœ‰æ„ä¹‰çš„å­—ç¬¦ä¸²:</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Person:name=&quot;</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰:</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="comment">// å½“ä¸”ä»…å½“oä¸ºPersonç±»å‹:</span></span><br><span class="line">        <span class="keyword">if</span> (o <span class="keyword">instanceof</span> Person) &#123;</span><br><span class="line">            <span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> (Person) o;</span><br><span class="line">            <span class="comment">// å¹¶ä¸”nameå­—æ®µç›¸åŒæ—¶ï¼Œè¿”å›true:</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.name.equals(p.name);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¡ç®—hash:</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name.hashCode();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="superè°ƒç”¨">4ã€Superè°ƒç”¨</h4>
<p>åœ¨å­ç±»çš„è¦†å†™æ–¹æ³•ä¸­ï¼Œå¦‚æœè¦è°ƒç”¨çˆ¶ç±»çš„è¢«è¦†å†™çš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡<code>super</code>æ¥è°ƒç”¨ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Student <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„hello()æ–¹æ³•:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.hello() + <span class="string">&quot;!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="final-å­—æ®µ">5ã€Final å­—æ®µ</h4>
<ul>
<li>å¦‚æœä¸€ä¸ªçˆ¶ç±»ä¸å…è®¸å­ç±»å¯¹å®ƒçš„æŸä¸ªæ–¹æ³•è¿›è¡Œè¦†å†™ï¼Œå¯ä»¥æŠŠè¯¥æ–¹æ³•æ ‡è®°ä¸º<code>final</code>ã€‚ç”¨<code>final</code>ä¿®é¥°çš„æ–¹æ³•ä¸èƒ½è¢«<code>Override</code>ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello, &quot;</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å¯¹äºä¸€ä¸ªç±»çš„å®ä¾‹å­—æ®µï¼ŒåŒæ ·å¯ä»¥ç”¨<code>final</code>ä¿®é¥°ã€‚ç”¨<code>final</code>ä¿®é¥°çš„å­—æ®µåœ¨åˆå§‹åŒ–åä¸èƒ½è¢«ä¿®æ”¹ã€‚ä¾‹å¦‚:</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;Unamed&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å…­æŠ½è±¡ç±»">å…­ã€æŠ½è±¡ç±»</h3>
<ul>
<li>å¦‚æœçˆ¶ç±»çš„æ–¹æ³•æœ¬èº«ä¸éœ€è¦å®ç°ä»»ä½•åŠŸèƒ½ï¼Œä»…ä»…æ˜¯ä¸ºäº†å®šä¹‰æ–¹æ³•ç­¾åï¼Œç›®çš„æ˜¯è®©å­ç±»å»è¦†å†™å®ƒï¼Œé‚£ä¹ˆï¼Œå¯ä»¥æŠŠçˆ¶ç±»çš„æ–¹æ³•å£°æ˜ä¸ºæŠ½è±¡æ–¹æ³•ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç¼–è¯‘é”™è¯¯</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¼–è¯‘æˆåŠŸ</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>é€šè¿‡<code>abstract</code>å®šä¹‰çš„æ–¹æ³•æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œå®ƒåªæœ‰å®šä¹‰ï¼Œæ²¡æœ‰å®ç°ã€‚æŠ½è±¡æ–¹æ³•å®šä¹‰äº†å­ç±»å¿…é¡»å®ç°çš„æ¥å£è§„èŒƒï¼›</p></li>
<li><p>å®šä¹‰äº†æŠ½è±¡æ–¹æ³•çš„classå¿…é¡»è¢«å®šä¹‰ä¸ºæŠ½è±¡ç±»ï¼Œä»æŠ½è±¡ç±»ç»§æ‰¿çš„å­ç±»å¿…é¡»å®ç°æŠ½è±¡æ–¹æ³•ï¼›</p></li>
<li><p>å¦‚æœä¸å®ç°æŠ½è±¡æ–¹æ³•ï¼Œåˆ™è¯¥å­ç±»ä»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼›</p></li>
</ul>
<h3 id="ä¸ƒé¢å‘æŠ½è±¡ç¼–ç¨‹">ä¸ƒã€é¢å‘æŠ½è±¡ç¼–ç¨‹ï¼š</h3>
<p>æˆ‘ä»¬å®šä¹‰äº†æŠ½è±¡ç±»<code>Person</code>ï¼Œä»¥åŠå…·ä½“çš„<code>Student</code>ã€<code>Teacher</code>å­ç±»çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŠ½è±¡ç±»<code>Person</code>ç±»å‹å»å¼•ç”¨å…·ä½“çš„å­ç±»çš„å®ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line"><span class="type">Person</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Teacher</span>();</span><br></pre></td></tr></table></figure>
<p>è¿™ç§å¼•ç”¨æŠ½è±¡ç±»çš„å¥½å¤„åœ¨äºï¼Œæˆ‘ä»¬å¯¹å…¶è¿›è¡Œæ–¹æ³•è°ƒç”¨ï¼Œå¹¶ä¸å…³å¿ƒ<code>Person</code>ç±»å‹å˜é‡çš„å…·ä½“å­ç±»å‹ï¼š</p>
<p>è¿™ç§å°½é‡å¼•ç”¨é«˜å±‚ç±»å‹ï¼Œé¿å…å¼•ç”¨å®é™…å­ç±»å‹çš„æ–¹å¼ï¼Œç§°ä¹‹ä¸ºé¢å‘æŠ½è±¡ç¼–ç¨‹ã€‚</p>
<p>é¢å‘æŠ½è±¡ç¼–ç¨‹çš„æœ¬è´¨å°±æ˜¯ï¼š</p>
<ul>
<li>ä¸Šå±‚ä»£ç åªå®šä¹‰è§„èŒƒï¼ˆä¾‹å¦‚ï¼š<code>abstract class Person</code>ï¼‰ï¼›</li>
<li>ä¸éœ€è¦å­ç±»å°±å¯ä»¥å®ç°ä¸šåŠ¡é€»è¾‘ï¼ˆæ­£å¸¸ç¼–è¯‘ï¼‰ï¼›</li>
<li>å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ç”±ä¸åŒçš„å­ç±»å®ç°ï¼Œè°ƒç”¨è€…å¹¶ä¸å…³å¿ƒã€‚</li>
</ul>
<h3 id="å…«æ¥å£interface">å…«ã€æ¥å£Interface</h3>
<h4 id="åŸºç¡€çŸ¥è¯†">1ã€åŸºç¡€çŸ¥è¯†</h4>
<p>å¦‚æœä¸€ä¸ªæŠ½è±¡ç±»æ²¡æœ‰å­—æ®µï¼Œæ‰€æœ‰æ–¹æ³•å…¨éƒ¨éƒ½æ˜¯æŠ½è±¡æ–¹æ³•ï¼šå°±å¯ä»¥æŠŠè¯¥æŠ½è±¡ç±»æ”¹å†™ä¸ºæ¥å£ï¼š<code>interface</code>ã€‚</p>
<p>åœ¨Javaä¸­ï¼Œä½¿ç”¨<code>interface</code>å¯ä»¥å£°æ˜ä¸€ä¸ªæ¥å£ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>;</span><br><span class="line">    String <span class="title function_">getName</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰€è°“<code>interface</code>ï¼Œå°±æ˜¯æ¯”æŠ½è±¡ç±»è¿˜è¦æŠ½è±¡çš„çº¯æŠ½è±¡æ¥å£ï¼Œå› ä¸ºå®ƒè¿å­—æ®µéƒ½ä¸èƒ½æœ‰ã€‚å› ä¸ºæ¥å£å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•é»˜è®¤éƒ½æ˜¯<code>public abstract</code>çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªä¿®é¥°ç¬¦ä¸éœ€è¦å†™å‡ºæ¥ï¼ˆå†™ä¸å†™æ•ˆæœéƒ½ä¸€æ ·)</p>
<ul>
<li><p>å½“ä¸€ä¸ªå…·ä½“çš„<code>class</code>å»å®ç°ä¸€ä¸ª<code>interface</code>æ—¶ï¼Œéœ€è¦ä½¿ç”¨<code>implements</code>å…³é”®å­—ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="built_in">this</span>.name + <span class="string">&quot; run&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ª<code>interface</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class Student implements Person, Hello &#123; // å®ç°äº†ä¸¤ä¸ªinterface</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="æ¥å£ç»§æ‰¿ä½¿ç”¨extends">2ã€æ¥å£ç»§æ‰¿ï¼šä½¿ç”¨extends</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Hello</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> <span class="keyword">extends</span> <span class="title class_">Hello</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>;</span><br><span class="line">    String <span class="title function_">getName</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="defaultæ–¹æ³•">3ã€defaultæ–¹æ³•ï¼š</h3>
<p>åœ¨æ¥å£ä¸­ï¼Œå¯ä»¥å®šä¹‰<code>default</code>æ–¹æ³•ã€‚</p>
<p><strong>å®ç°ç±»å¯ä»¥ä¸å¿…è¦†å†™<code>default</code>æ–¹æ³•ã€‚</strong></p>
<p><code>default</code>æ–¹æ³•çš„ç›®çš„æ˜¯ï¼Œå½“æˆ‘ä»¬éœ€è¦ç»™æ¥å£æ–°å¢ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå°†ä¼šæ¶‰åŠåˆ°ä¿®æ”¹å…¨éƒ¨å­ç±»ã€‚</p>
<p>ä½†å¦‚æœæ–°å¢çš„æ˜¯<code>default</code>æ–¹æ³•ï¼Œé‚£ä¹ˆå­ç±»å°±ä¸å¿…å…¨éƒ¨ä¿®æ”¹ï¼Œåªéœ€è¦åœ¨éœ€è¦è¦†å†™çš„åœ°æ–¹å»è¦†å†™æ–°å¢æ–¹æ³•ã€‚</p>
<h3 id="ä¹é™æ€å­—æ®µå’Œé™æ€æ–¹æ³•">ä¹ã€é™æ€å­—æ®µå’Œé™æ€æ–¹æ³•ï¼š</h3>
<h4 id="é™æ€å­—æ®µ">1ã€é™æ€å­—æ®µï¼š</h4>
<p>â€‹
æ‰€æœ‰å®ä¾‹å…±äº«ä¸€ä¸ªé™æ€å­—æ®µã€‚æ¨èç”¨ç±»åæ¥è®¿é—®é™æ€å­—æ®µã€‚å¯ä»¥æŠŠé™æ€å­—æ®µç†è§£ä¸ºæè¿°<code>class</code>æœ¬èº«çš„å­—æ®µï¼ˆéå®ä¾‹å­—æ®µï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Person.number = <span class="number">99</span>;</span><br><span class="line">System.out.println(Person.number);</span><br></pre></td></tr></table></figure>
<h4 id="é™æ€æ–¹æ³•">2ã€é™æ€æ–¹æ³•ï¼š</h4>
<ul>
<li><p>è°ƒç”¨å®ä¾‹æ–¹æ³•å¿…é¡»é€šè¿‡ä¸€ä¸ªå®ä¾‹å˜é‡ï¼Œè€Œè°ƒç”¨é™æ€æ–¹æ³•åˆ™ä¸éœ€è¦å®ä¾‹å˜é‡ï¼Œé€šè¿‡ç±»åå°±å¯ä»¥è°ƒç”¨</p></li>
<li><p>é™æ€æ–¹æ³•å†…éƒ¨ï¼Œæ— æ³•è®¿é—®<code>this</code>å˜é‡ï¼Œä¹Ÿæ— æ³•è®¿é—®å®ä¾‹å­—æ®µï¼Œå®ƒåªèƒ½è®¿é—®é™æ€å­—æ®µ</p></li>
</ul>
<h4 id="æ¥å£çš„é™æ€å­—æ®µ">3ã€æ¥å£çš„é™æ€å­—æ®µï¼š</h4>
<ul>
<li>å› ä¸º<code>interface</code>æ˜¯ä¸€ä¸ªçº¯æŠ½è±¡ç±»ï¼Œæ‰€ä»¥å®ƒä¸èƒ½å®šä¹‰å®ä¾‹å­—æ®µã€‚ä½†æ˜¯ï¼Œ<code>interface</code>æ˜¯å¯ä»¥æœ‰é™æ€å­—æ®µçš„ï¼Œå¹¶ä¸”é™æ€å­—æ®µå¿…é¡»ä¸º<code>final</code>ç±»å‹ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MALE</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">FEMALE</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
å®é™…ä¸Šï¼Œå› ä¸º<code>interface</code>çš„å­—æ®µåªèƒ½æ˜¯<code>public static final</code>ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›ä¿®é¥°ç¬¦éƒ½å»æ‰ï¼Œä¸Šè¿°ä»£ç å¯ä»¥ç®€å†™ä¸ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åŠ ä¸Špublic statc final:</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">MALE</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">FEMALE</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ååŒ…">åã€åŒ…ï¼š</h3>
<h4 id="ç®€ä»‹">1ã€ç®€ä»‹ï¼š</h4>
<p>å¦‚æœå°å†›å†™äº†ä¸€ä¸ª<code>Arrays</code>ç±»ï¼Œæ°å¥½JDKä¹Ÿè‡ªå¸¦äº†ä¸€ä¸ª<code>Arrays</code>ç±»ï¼Œå¦‚ä½•è§£å†³ç±»åå†²çªï¼Ÿ</p>
<p>åœ¨Javaä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>package</code>æ¥è§£å†³åå­—å†²çªã€‚</p>
<p><strong>Javaå®šä¹‰äº†ä¸€ç§åå­—ç©ºé—´ï¼Œç§°ä¹‹ä¸ºåŒ…ï¼š<code>package</code>ã€‚ä¸€ä¸ªç±»æ€»æ˜¯å±äºæŸä¸ªåŒ…ï¼Œç±»åï¼ˆæ¯”å¦‚<code>Person</code>ï¼‰åªæ˜¯ä¸€ä¸ªç®€å†™ï¼ŒçœŸæ­£çš„å®Œæ•´ç±»åæ˜¯<code>åŒ…å.ç±»å</code>ã€‚</strong></p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li><p>å°æ˜çš„<code>Person</code>ç±»å­˜æ”¾åœ¨åŒ…<code>ming</code>ä¸‹é¢ï¼Œå› æ­¤ï¼Œå®Œæ•´ç±»åæ˜¯<code>ming.Person</code>ï¼›</p></li>
<li><p>å°çº¢çš„<code>Person</code>ç±»å­˜æ”¾åœ¨åŒ…<code>hong</code>ä¸‹é¢ï¼Œå› æ­¤ï¼Œå®Œæ•´ç±»åæ˜¯<code>hong.Person</code>ï¼›</p></li>
<li><p>å°å†›çš„<code>Arrays</code>ç±»å­˜æ”¾åœ¨åŒ…<code>mr.jun</code>ä¸‹é¢ï¼Œå› æ­¤ï¼Œå®Œæ•´ç±»åæ˜¯<code>mr.jun.Arrays</code>ï¼›</p></li>
</ul>
<h4 id="å¦‚ä½•ç”³æ˜åŒ…">2ã€å¦‚ä½•ç”³æ˜åŒ…ï¼š</h4>
<p>åœ¨å®šä¹‰<code>class</code>çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç¬¬ä¸€è¡Œå£°æ˜è¿™ä¸ª<code>class</code>å±äºå“ªä¸ªåŒ…ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> ming; <span class="comment">// ç”³æ˜åŒ…åming</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šåŒ…æ²¡æœ‰çˆ¶å­å…³ç³»ã€‚java.utilå’Œjava.util.zipæ˜¯ä¸åŒçš„åŒ…ï¼Œä¸¤è€…æ²¡æœ‰ä»»ä½•ç»§æ‰¿å…³ç³»ã€‚</p>
<h4 id="ç»„ç»‡javaæ–‡ä»¶">3ã€ç»„ç»‡javaæ–‡ä»¶ï¼š</h4>
<p>æˆ‘ä»¬è¿˜éœ€è¦æŒ‰ç…§åŒ…ç»“æ„æŠŠä¸Šé¢çš„Javaæ–‡ä»¶ç»„ç»‡èµ·æ¥ã€‚å‡è®¾ä»¥<code>package_sample</code>ä½œä¸ºæ ¹ç›®å½•ï¼Œ<code>src</code>ä½œä¸ºæºç ç›®å½•ï¼Œé‚£ä¹ˆæ‰€æœ‰æ–‡ä»¶ç»“æ„å°±æ˜¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package_sample</span><br><span class="line">â””â”€ src</span><br><span class="line">    â”œâ”€ hong</span><br><span class="line">    â”‚  â””â”€ Person.java</span><br><span class="line">    â”‚  ming</span><br><span class="line">    â”‚  â””â”€ Person.java</span><br><span class="line">    â””â”€ mr</span><br><span class="line">       â””â”€ jun</span><br><span class="line">          â””â”€ Arrays.java</span><br></pre></td></tr></table></figure>
<h4 id="åŒ…ä½œç”¨åŸŸ">4ã€åŒ…ä½œç”¨åŸŸï¼š</h4>
<p>â€‹
ä½äºåŒä¸€ä¸ªåŒ…çš„ç±»ï¼Œå¯ä»¥è®¿é—®åŒ…ä½œç”¨åŸŸçš„å­—æ®µå’Œæ–¹æ³•ã€‚ä¸ç”¨<code>public</code>ã€<code>protected</code>ã€<code>private</code>ä¿®é¥°çš„å­—æ®µå’Œæ–¹æ³•å°±æ˜¯åŒ…ä½œç”¨åŸŸã€‚ä¾‹å¦‚ï¼Œ<code>Person</code>ç±»å®šä¹‰åœ¨<code>hello</code>åŒ…ä¸‹é¢ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// åŒ…ä½œç”¨åŸŸ:</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Main</code>ç±»ä¹Ÿå®šä¹‰åœ¨<code>hello</code>åŒ…ä¸‹é¢ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> hello;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">        p.hello(); <span class="comment">// å¯ä»¥è°ƒç”¨ï¼Œå› ä¸ºMainå’ŒPersonåœ¨åŒä¸€ä¸ªåŒ…</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="åŒ…çš„å¼•å…¥">5ã€åŒ…çš„å¼•å…¥ï¼š</h4>
<h4
id="åœ¨ä¸€ä¸ªclassä¸­æˆ‘ä»¬æ€»ä¼šå¼•ç”¨å…¶ä»–çš„classç”±3ç§æ–¹æ³•">1ã€åœ¨ä¸€ä¸ª<code>class</code>ä¸­ï¼Œæˆ‘ä»¬æ€»ä¼šå¼•ç”¨å…¶ä»–çš„<code>class</code>ï¼Œç”±3ç§æ–¹æ³•ï¼š</h4>
<ul>
<li>å†™å®Œæ•´ç±»åï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Person.java</span></span><br><span class="line"><span class="keyword">package</span> ming;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        mr.jun.<span class="type">Arrays</span> <span class="variable">arrays</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">mr</span>.jun.Arrays();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ç”¨<code>import</code>è¯­å¥ï¼Œå¯¼å…¥å°å†›çš„<code>Arrays</code>ï¼Œç„¶åå†™ç®€å•ç±»åï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Person.java</span></span><br><span class="line"><span class="keyword">package</span> ming;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥å®Œæ•´ç±»å:</span></span><br><span class="line"><span class="keyword">import</span> mr.jun.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Arrays</span> <span class="variable">arrays</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Arrays</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨å†™<code>import</code>çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨<code>*</code>ï¼Œè¡¨ç¤ºæŠŠè¿™ä¸ªåŒ…ä¸‹é¢çš„æ‰€æœ‰<code>class</code>éƒ½å¯¼å…¥è¿›æ¥ï¼ˆä½†ä¸åŒ…æ‹¬å­åŒ…çš„<code>class</code>ï¼‰ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Person.java</span></span><br><span class="line"><span class="keyword">package</span> ming;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å…¥mr.junåŒ…çš„æ‰€æœ‰class:</span></span><br><span class="line"><span class="keyword">import</span> mr.jun.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Arrays</span> <span class="variable">arrays</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Arrays</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="javaç¼–è¯‘å™¨å¦‚ä½•æŸ¥æ‰¾">2ã€Javaç¼–è¯‘å™¨å¦‚ä½•æŸ¥æ‰¾ï¼Ÿ</h4>
<p>Javaç¼–è¯‘å™¨æœ€ç»ˆç¼–è¯‘å‡ºçš„<code>.class</code>æ–‡ä»¶åªä½¿ç”¨å®Œæ•´ç±»åï¼Œå› æ­¤ï¼Œåœ¨ä»£ç ä¸­ï¼Œå½“ç¼–è¯‘å™¨é‡åˆ°ä¸€ä¸ª<code>class</code>åç§°æ—¶ï¼š</p>
<ul>
<li>å¦‚æœæ˜¯å®Œæ•´ç±»åï¼Œå°±ç›´æ¥æ ¹æ®å®Œæ•´ç±»åæŸ¥æ‰¾è¿™ä¸ª<code>class</code>ï¼›</li>
<li>å¦‚æœæ˜¯ç®€å•ç±»åï¼ŒæŒ‰ä¸‹é¢çš„é¡ºåºä¾æ¬¡æŸ¥æ‰¾ï¼š
<ul>
<li>æŸ¥æ‰¾å½“å‰<code>package</code>æ˜¯å¦å­˜åœ¨è¿™ä¸ª<code>class</code>ï¼›</li>
<li>æŸ¥æ‰¾<code>import</code>çš„åŒ…æ˜¯å¦åŒ…å«è¿™ä¸ª<code>class</code>ï¼›</li>
<li>æŸ¥æ‰¾<code>java.lang</code>åŒ…æ˜¯å¦åŒ…å«è¿™ä¸ª<code>class</code>ã€‚</li>
</ul></li>
</ul>
<h4 id="æœ€ä½³å®è·µ">3ã€æœ€ä½³å®è·µï¼š</h4>
<p>ä¸ºäº†é¿å…åå­—å†²çªï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®šå”¯ä¸€çš„åŒ…åã€‚æ¨èçš„åšæ³•æ˜¯ä½¿ç”¨å€’ç½®çš„ä½œç”¨åŸŸåæ¥ç¡®ä¿å”¯ä¸€æ€§ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>org.apache</li>
<li>org.apache.commons.log</li>
<li>com.liaoxuefeng.sample</li>
</ul>
<p>å­åŒ…å°±å¯ä»¥æ ¹æ®åŠŸèƒ½è‡ªè¡Œå‘½åã€‚</p>
<h3 id="åä¸€ä½œç”¨åŸŸ">åä¸€ã€ä½œç”¨åŸŸï¼š</h3>
<h4 id="public">1ã€public</h4>
<ul>
<li><p>å®šä¹‰ä¸º<code>public</code>çš„<code>class</code>ã€<code>interface</code>å¯ä»¥è¢«å…¶ä»–ä»»ä½•ç±»è®¿é—®</p></li>
<li><p>å®šä¹‰ä¸º<code>public</code>çš„<code>field</code>ã€<code>method</code>å¯ä»¥è¢«å…¶ä»–ç±»è®¿é—®ï¼Œå‰ææ˜¯é¦–å…ˆæœ‰è®¿é—®<code>class</code>çš„æƒé™ï¼š</p></li>
</ul>
<h4 id="private">2ã€private</h4>
<ul>
<li><p>å®šä¹‰ä¸º<code>private</code>çš„<code>field</code>ã€<code>method</code>æ— æ³•è¢«å…¶ä»–ç±»è®¿é—®</p></li>
<li><p><code>private</code>è®¿é—®æƒé™è¢«é™å®šåœ¨<code>class</code>çš„å†…éƒ¨ï¼Œè€Œä¸”ä¸æ–¹æ³•å£°æ˜é¡ºåº<em>æ— å…³</em>ã€‚æ¨èæŠŠ<code>private</code>æ–¹æ³•æ”¾åˆ°åé¢ï¼Œå› ä¸º<code>public</code>æ–¹æ³•å®šä¹‰äº†ç±»å¯¹å¤–æä¾›çš„åŠŸèƒ½ï¼Œé˜…è¯»ä»£ç çš„æ—¶å€™ï¼Œåº”è¯¥å…ˆå…³æ³¨<code>public</code>æ–¹æ³•</p></li>
<li><p>Javaæ”¯æŒåµŒå¥—ç±»ï¼Œå¦‚æœä¸€ä¸ªç±»å†…éƒ¨è¿˜å®šä¹‰äº†åµŒå¥—ç±»ï¼Œé‚£ä¹ˆï¼ŒåµŒå¥—ç±»æ‹¥æœ‰è®¿é—®<code>private</code>çš„æƒé™ï¼š</p></li>
<li><p><strong>åµŒå¥—ç±»</strong>ï¼š</p></li>
<li><p>å®šä¹‰åœ¨ä¸€ä¸ª<code>class</code>å†…éƒ¨çš„<code>class</code>ç§°ä¸ºåµŒå¥—ç±»ï¼ˆ<code>nested class</code>ï¼‰ï¼ŒJavaæ”¯æŒå¥½å‡ ç§åµŒå¥—ç±»ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Inner i = new Inner();</span><br><span class="line">        i.hi();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // privateæ–¹æ³•:</span><br><span class="line">    private static void hello() &#123;</span><br><span class="line">        System.out.println(&quot;private hello!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // é™æ€å†…éƒ¨ç±»:</span><br><span class="line">    static class Inner &#123;</span><br><span class="line">        public void hi() &#123;</span><br><span class="line">            Main.hello();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="protected">3ã€protected</h4>
<ul>
<li><code>protected</code>ä½œç”¨äºç»§æ‰¿å…³ç³»ã€‚å®šä¹‰ä¸º<code>protected</code>çš„å­—æ®µå’Œæ–¹æ³•å¯ä»¥è¢«å­ç±»è®¿é—®ï¼Œä»¥åŠå­ç±»çš„å­ç±»</li>
</ul>
<h4 id="package">4ã€packageï¼š</h4>
<ul>
<li>åŒ…ä½œç”¨åŸŸæ˜¯æŒ‡ä¸€ä¸ªç±»å…è®¸è®¿é—®åŒä¸€ä¸ª<code>package</code>çš„æ²¡æœ‰<code>public</code>ã€<code>private</code>ä¿®é¥°çš„<code>class</code>ï¼Œä»¥åŠæ²¡æœ‰<code>public</code>ã€<code>protected</code>ã€<code>private</code>ä¿®é¥°çš„å­—æ®µå’Œæ–¹æ³•ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> abc;</span><br><span class="line"><span class="comment">// packageæƒé™çš„ç±»:</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Hello</span> &#123;</span><br><span class="line">    <span class="comment">// packageæƒé™çš„æ–¹æ³•:</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">hi</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>åªè¦åœ¨åŒä¸€ä¸ªåŒ…ï¼Œå°±å¯ä»¥è®¿é—®<code>package</code>æƒé™çš„<code>class</code>ã€<code>field</code>å’Œ<code>method</code>ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> abc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å¯ä»¥è®¿é—®packageæƒé™çš„ç±»:</span></span><br><span class="line">        <span class="type">Hello</span> <span class="variable">h</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Hello</span>();</span><br><span class="line">        <span class="comment">// å¯ä»¥è°ƒç”¨packageæƒé™çš„æ–¹æ³•:</span></span><br><span class="line">        h.hi();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="final">5ã€final</h4>
<p><code>final</code>ä¸è®¿é—®æƒé™ä¸å†²çªï¼Œå®ƒæœ‰å¾ˆå¤šä½œç”¨ï¼š</p>
<ul>
<li>ç”¨<code>final</code>ä¿®é¥°<code>class</code>å¯ä»¥é˜»æ­¢è¢«ç»§æ‰¿ï¼š</li>
<li>ç”¨<code>final</code>ä¿®é¥°<code>method</code>å¯ä»¥é˜»æ­¢è¢«å­ç±»è¦†å†™</li>
<li>ç”¨<code>final</code>ä¿®é¥°<code>field</code>å¯ä»¥é˜»æ­¢è¢«é‡æ–°èµ‹å€¼</li>
<li>ç”¨<code>final</code>ä¿®é¥°å±€éƒ¨å˜é‡å¯ä»¥é˜»æ­¢è¢«é‡æ–°èµ‹å€¼</li>
</ul>
<h4 id="æœ€ä½³å®è·µ-1">6ã€æœ€ä½³å®è·µï¼š</h4>
<ul>
<li><p>å¦‚æœä¸ç¡®å®šæ˜¯å¦éœ€è¦<code>public</code>ï¼Œå°±ä¸å£°æ˜ä¸º<code>public</code>ï¼Œå³å°½å¯èƒ½å°‘åœ°æš´éœ²å¯¹å¤–çš„å­—æ®µå’Œæ–¹æ³•ã€‚</p></li>
<li><p>æŠŠæ–¹æ³•å®šä¹‰ä¸º<code>package</code>æƒé™æœ‰åŠ©äºæµ‹è¯•ï¼Œå› ä¸ºæµ‹è¯•ç±»å’Œè¢«æµ‹è¯•ç±»åªè¦ä½äºåŒä¸€ä¸ª<code>package</code>ï¼Œæµ‹è¯•ä»£ç å°±å¯ä»¥è®¿é—®è¢«æµ‹è¯•ç±»çš„<code>package</code>æƒé™æ–¹æ³•ã€‚</p></li>
<li><p><strong>ä¸€ä¸ª<code>.java</code>æ–‡ä»¶åªèƒ½åŒ…å«ä¸€ä¸ª<code>public</code>ç±»ï¼Œä½†å¯ä»¥åŒ…å«å¤šä¸ªé<code>public</code>ç±»ã€‚å¦‚æœæœ‰<code>public</code>ç±»ï¼Œæ–‡ä»¶åå¿…é¡»å’Œ<code>public</code>ç±»çš„åå­—ç›¸åŒã€‚</strong></p></li>
</ul>
<h3 id="åäºŒå†…éƒ¨ç±»">åäºŒã€å†…éƒ¨ç±»ï¼š</h3>
<p>Javaçš„å†…éƒ¨ç±»åˆ†ä¸ºå¥½å‡ ç§ï¼Œé€šå¸¸æƒ…å†µç”¨å¾—ä¸å¤šï¼Œä½†ä¹Ÿéœ€è¦äº†è§£å®ƒä»¬æ˜¯å¦‚ä½•ä½¿ç”¨çš„</p>
<h4 id="inner-class">1ã€Inner Class</h4>
<p>å¦‚æœä¸€ä¸ªç±»å®šä¹‰åœ¨å¦ä¸€ä¸ªç±»çš„å†…éƒ¨ï¼Œè¿™ä¸ªç±»å°±æ˜¯Inner Classï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Outer</span> &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Inner</span> &#123;</span><br><span class="line">        <span class="comment">// å®šä¹‰äº†ä¸€ä¸ªInner Class</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Inner Classçš„å®ä¾‹ä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œå¿…é¡»ä¾é™„äºä¸€ä¸ªOuter Classçš„å®ä¾‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Outer</span> <span class="variable">outer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Outer</span>(<span class="string">&quot;Nested&quot;</span>); <span class="comment">// å®ä¾‹åŒ–ä¸€ä¸ªOuter</span></span><br><span class="line">        Outer.<span class="type">Inner</span> <span class="variable">inner</span> <span class="operator">=</span> outer.<span class="keyword">new</span> <span class="title class_">Inner</span>(); <span class="comment">// å®ä¾‹åŒ–ä¸€ä¸ªInner</span></span><br><span class="line">        inner.hello();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Outer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    Outer(String name) &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Inner</span> &#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Hello, &quot;</span> + Outer.<span class="built_in">this</span>.name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Outer.Inner inner = outer.new Inner();</span><br></pre></td></tr></table></figure>
<ul>
<li><p>Inner
Classå’Œæ™®é€šClassç›¸æ¯”ï¼Œé™¤äº†èƒ½å¼•ç”¨Outerå®ä¾‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„â€œç‰¹æƒâ€ï¼Œ<strong>å°±æ˜¯å¯ä»¥ä¿®æ”¹Outer
Classçš„<code>private</code>å­—æ®µ</strong>ï¼Œå› ä¸ºInner Classçš„ä½œç”¨åŸŸåœ¨Outer
Classå†…éƒ¨ï¼Œæ‰€ä»¥èƒ½è®¿é—®Outer
Classçš„<code>private</code>å­—æ®µå’Œæ–¹æ³•ã€‚</p></li>
<li><p>è§‚å¯ŸJavaç¼–è¯‘å™¨ç¼–è¯‘åçš„<code>.class</code>æ–‡ä»¶å¯ä»¥å‘ç°ï¼Œ<code>Outer</code>ç±»è¢«ç¼–è¯‘ä¸º<code>Outer.class</code>ï¼Œè€Œ<code>Inner</code>ç±»è¢«ç¼–è¯‘ä¸º<code>Outer$Inner.class</code>ã€‚</p></li>
</ul>
<h4 id="anonymous-class">2ã€Anonymous Class</h4>
<p>â€‹ æœ‰ä¸€ç§å®šä¹‰Inner Classçš„æ–¹æ³•ï¼Œå®ƒä¸éœ€è¦åœ¨Outer
Classä¸­æ˜ç¡®åœ°å®šä¹‰è¿™ä¸ªClassï¼Œè€Œæ˜¯åœ¨æ–¹æ³•å†…éƒ¨ï¼Œé€šè¿‡åŒ¿åç±»ï¼ˆAnonymous
Classï¼‰æ¥å®šä¹‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Outer</span> <span class="variable">outer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Outer</span>(<span class="string">&quot;Nested&quot;</span>);</span><br><span class="line">        outer.asyncHello();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Outer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    Outer(String name) &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">asyncHello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Hello, &quot;</span> + Outer.<span class="built_in">this</span>.name);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(r).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
è§‚å¯Ÿ<code>asyncHello()</code>æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨æ–¹æ³•å†…éƒ¨å®ä¾‹åŒ–äº†ä¸€ä¸ª<code>Runnable</code>ã€‚<code>Runnable</code>æœ¬èº«æ˜¯æ¥å£ï¼Œæ¥å£æ˜¯ä¸èƒ½å®ä¾‹åŒ–çš„ï¼Œæ‰€ä»¥è¿™é‡Œå®é™…ä¸Šæ˜¯å®šä¹‰äº†ä¸€ä¸ªå®ç°äº†<code>Runnable</code>æ¥å£çš„åŒ¿åç±»ï¼Œå¹¶ä¸”é€šè¿‡<code>new</code>å®ä¾‹åŒ–è¯¥åŒ¿åç±»ï¼Œç„¶åè½¬å‹ä¸º<code>Runnable</code>ã€‚åœ¨å®šä¹‰åŒ¿åç±»çš„æ—¶å€™å°±å¿…é¡»å®ä¾‹åŒ–å®ƒï¼Œå®šä¹‰åŒ¿åç±»çš„å†™æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Runnable</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">    <span class="comment">// å®ç°å¿…è¦çš„æŠ½è±¡æ–¹æ³•...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>åŒ¿åç±»å’ŒInner Classä¸€æ ·ï¼Œå¯ä»¥è®¿é—®Outer
Classçš„<code>private</code>å­—æ®µå’Œæ–¹æ³•ã€‚ä¹‹æ‰€ä»¥æˆ‘ä»¬è¦å®šä¹‰åŒ¿åç±»ï¼Œæ˜¯å› ä¸ºåœ¨è¿™é‡Œæˆ‘ä»¬é€šå¸¸ä¸å…³å¿ƒç±»åï¼Œæ¯”ç›´æ¥å®šä¹‰Inner
Classå¯ä»¥å°‘å†™å¾ˆå¤šä»£ç ã€‚</p>
<h4 id="static-nested-class-é™æ€å†…éƒ¨ç±»">3ã€Static Nested Class
é™æ€å†…éƒ¨ç±»ï¼š</h4>
<p>æœ€åä¸€ç§å†…éƒ¨ç±»å’ŒInner
Classç±»ä¼¼ï¼Œä½†æ˜¯ä½¿ç”¨<code>static</code>ä¿®é¥°ï¼Œç§°ä¸ºé™æ€å†…éƒ¨ç±»ï¼ˆStatic
Nested Classï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Outer.<span class="type">StaticNested</span> <span class="variable">sn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Outer</span>.StaticNested();</span><br><span class="line">        sn.hello();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Outer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">NAME</span> <span class="operator">=</span> <span class="string">&quot;OUTER&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    Outer(String name) &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">StaticNested</span> &#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Hello, &quot;</span> + Outer.NAME);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹ ç”¨<code>static</code>ä¿®é¥°çš„å†…éƒ¨ç±»å’ŒInner
Classæœ‰å¾ˆå¤§çš„ä¸åŒï¼Œå®ƒä¸å†ä¾é™„äº<code>Outer</code>çš„å®ä¾‹ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„ç±»ï¼Œå› æ­¤æ— æ³•å¼•ç”¨<code>Outer.this</code>ï¼Œä½†å®ƒå¯ä»¥è®¿é—®<code>Outer</code>çš„<code>private</code>é™æ€å­—æ®µå’Œé™æ€æ–¹æ³•ã€‚å¦‚æœæŠŠ<code>StaticNested</code>ç§»åˆ°<code>Outer</code>ä¹‹å¤–ï¼Œå°±å¤±å»äº†è®¿é—®<code>private</code>çš„æƒé™ã€‚</p>
<h4 id="æ€»ç»“">4ã€æ€»ç»“ï¼š</h4>
<p>Javaçš„å†…éƒ¨ç±»å¯åˆ†ä¸ºInner Classã€Anonymous Classå’ŒStatic Nested
Classä¸‰ç§ï¼š</p>
<ul>
<li>Inner Classå’ŒAnonymous Classæœ¬è´¨ä¸Šæ˜¯ç›¸åŒçš„ï¼Œéƒ½å¿…é¡»ä¾é™„äºOuter
Classçš„å®ä¾‹ï¼Œå³éšå«åœ°æŒæœ‰<code>Outer.this</code>å®ä¾‹ï¼Œå¹¶æ‹¥æœ‰Outer
Classçš„<code>private</code>è®¿é—®æƒé™ï¼›</li>
<li>Static Nested Classæ˜¯ç‹¬ç«‹ç±»ï¼Œä½†æ‹¥æœ‰Outer
Classçš„<code>private</code>è®¿é—®æƒé™ã€‚</li>
</ul>
<h3 id="åä¸‰classpath-å’Œ-jar">åä¸‰ã€classpath å’Œ jar</h3>
<h4 id="classpathæ˜¯ä»€ä¹ˆ">1ã€classpathæ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>â€‹
<code>classpath</code>æ˜¯JVMç”¨åˆ°çš„ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œå®ƒç”¨æ¥æŒ‡ç¤ºJVMå¦‚ä½•æœç´¢<code>class</code></p>
<p>â€‹
å› ä¸ºJavaæ˜¯ç¼–è¯‘å‹è¯­è¨€ï¼Œæºç æ–‡ä»¶æ˜¯<code>.java</code>ï¼Œè€Œç¼–è¯‘åçš„<code>.class</code>æ–‡ä»¶æ‰æ˜¯çœŸæ­£å¯ä»¥è¢«JVMæ‰§è¡Œçš„å­—èŠ‚ç ã€‚å› æ­¤ï¼ŒJVMéœ€è¦çŸ¥é“ï¼Œå¦‚æœè¦åŠ è½½ä¸€ä¸ª<code>abc.xyz.Hello</code>çš„ç±»ï¼Œåº”è¯¥å»å“ªæœç´¢å¯¹åº”çš„<code>Hello.class</code>æ–‡ä»¶ã€‚</p>
<p>â€‹
æ‰€ä»¥ï¼Œ<code>classpath</code>å°±æ˜¯ä¸€ç»„ç›®å½•çš„é›†åˆï¼Œå®ƒè®¾ç½®çš„æœç´¢è·¯å¾„ä¸æ“ä½œç³»ç»Ÿç›¸å…³ã€‚ä¾‹å¦‚ï¼Œåœ¨Windowsç³»ç»Ÿä¸Šï¼Œç”¨<code>;</code>åˆ†éš”ï¼Œå¸¦ç©ºæ ¼çš„ç›®å½•ç”¨<code>""</code>æ‹¬èµ·æ¥ï¼Œå¯èƒ½é•¿è¿™æ ·ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\work\project1\bin;C:\shared;&quot;D:\My Documents\project1\bin&quot;</span><br></pre></td></tr></table></figure>
<p>â€‹ åœ¨Linuxç³»ç»Ÿä¸Šï¼Œç”¨<code>:</code>åˆ†éš”ï¼Œå¯èƒ½é•¿è¿™æ ·ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/usr/shared:/usr/local/bin:/home/liaoxuefeng/bin</span><br></pre></td></tr></table></figure>
<p>â€‹
ç°åœ¨æˆ‘ä»¬å‡è®¾<code>classpath</code>æ˜¯<code>.;C:\work\project1\bin;C:\shared</code>ï¼Œå½“JVMåœ¨åŠ è½½<code>abc.xyz.Hello</code>è¿™ä¸ªç±»æ—¶ï¼Œä¼šä¾æ¬¡æŸ¥æ‰¾ï¼š</p>
<ul>
<li><å½“å‰ç›®å½•>.class</li>
<li>C:.class</li>
<li>C:.class</li>
</ul>
<p>â€‹
æ³¨æ„åˆ°<code>.</code>ä»£è¡¨å½“å‰ç›®å½•ã€‚å¦‚æœJVMåœ¨æŸä¸ªè·¯å¾„ä¸‹æ‰¾åˆ°äº†å¯¹åº”çš„<code>class</code>æ–‡ä»¶ï¼Œå°±ä¸å†å¾€åç»§ç»­æœç´¢ã€‚å¦‚æœæ‰€æœ‰è·¯å¾„ä¸‹éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±æŠ¥é”™ã€‚</p>
<h4 id="å¦‚ä½•è®¾å®šclasspath">2ã€å¦‚ä½•è®¾å®šclasspath?</h4>
<p>â€‹
åœ¨å¯åŠ¨JVMæ—¶è®¾ç½®<code>classpath</code>å˜é‡,å®é™…ä¸Šå°±æ˜¯ç»™<code>java</code>å‘½ä»¤ä¼ å…¥<code>-classpath</code>æˆ–<code>-cp</code>å‚æ•°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">java -classpath .;C:\work\project1\bin;C:\shared abc.xyz.Hello</span><br></pre></td></tr></table></figure>
<p>â€‹
æ²¡æœ‰è®¾ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œä¹Ÿæ²¡æœ‰ä¼ å…¥<code>-cp</code>å‚æ•°ï¼Œé‚£ä¹ˆJVMé»˜è®¤çš„<code>classpath</code>ä¸º<code>.</code>ï¼Œå³å½“å‰ç›®å½•ï¼š</p>
<p>â€‹
åœ¨IDEä¸­è¿è¡ŒJavaç¨‹åºï¼ŒIDEè‡ªåŠ¨ä¼ å…¥çš„<code>-cp</code>å‚æ•°æ˜¯å½“å‰å·¥ç¨‹çš„<code>bin</code>ç›®å½•å’Œå¼•å…¥çš„jaråŒ…</p>
<p><strong>æ³¨æ„ï¼šä¸è¦æŠŠä»»ä½•Javaæ ¸å¿ƒåº“æ·»åŠ åˆ°classpathä¸­ï¼JVMæ ¹æœ¬ä¸ä¾èµ–classpathåŠ è½½æ ¸å¿ƒåº“ï¼</strong></p>
<h4 id="jaråŒ…æ˜¯ä»€ä¹ˆ">3ã€jaråŒ…æ˜¯ä»€ä¹ˆï¼Ÿï¼š</h4>
<p>â€‹
å¦‚æœæœ‰å¾ˆå¤š<code>.class</code>æ–‡ä»¶ï¼Œæ•£è½åœ¨å„å±‚ç›®å½•ä¸­ï¼Œè‚¯å®šä¸ä¾¿äºç®¡ç†ã€‚å¦‚æœèƒ½æŠŠç›®å½•æ‰“ä¸€ä¸ªåŒ…ï¼Œå˜æˆä¸€ä¸ªæ–‡ä»¶ï¼Œå°±æ–¹ä¾¿å¤šäº†ã€‚</p>
<p>â€‹
jaråŒ…å°±æ˜¯ç”¨æ¥å¹²è¿™ä¸ªäº‹çš„ï¼Œå®ƒå¯ä»¥æŠŠ<code>package</code>ç»„ç»‡çš„ç›®å½•å±‚çº§ï¼Œä»¥åŠå„ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆåŒ…æ‹¬<code>.class</code>æ–‡ä»¶å’Œå…¶ä»–æ–‡ä»¶ï¼‰éƒ½æ‰“æˆä¸€ä¸ªjaræ–‡ä»¶ï¼Œè¿™æ ·ä¸€æ¥ï¼Œæ— è®ºæ˜¯å¤‡ä»½ï¼Œè¿˜æ˜¯å‘ç»™å®¢æˆ·ï¼Œå°±ç®€å•å¤šäº†ã€‚</p>
<p>â€‹
jaråŒ…å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªzipæ ¼å¼çš„å‹ç¼©æ–‡ä»¶ï¼Œè€ŒjaråŒ…ç›¸å½“äºç›®å½•ã€‚å¦‚æœæˆ‘ä»¬è¦æ‰§è¡Œä¸€ä¸ªjaråŒ…çš„<code>class</code>ï¼Œå°±å¯ä»¥æŠŠjaråŒ…æ”¾åˆ°<code>classpath</code>ä¸­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ava -cp ./hello.jar abc.xyz.Hello</span><br></pre></td></tr></table></figure>
<p>â€‹ è¿™æ ·JVMä¼šè‡ªåŠ¨åœ¨<code>hello.jar</code>æ–‡ä»¶é‡Œå»æœç´¢æŸä¸ªç±»ã€‚</p>
<h4 id="å¦‚ä½•åˆ›å»ºjaråŒ…">4ã€å¦‚ä½•åˆ›å»ºjaråŒ…ï¼Ÿ</h4>
<p>â€‹
å› ä¸ºjaråŒ…å°±æ˜¯zipåŒ…ï¼Œæ‰€ä»¥ï¼Œç›´æ¥åœ¨èµ„æºç®¡ç†å™¨ä¸­ï¼Œæ‰¾åˆ°æ­£ç¡®çš„ç›®å½•ï¼Œç‚¹å‡»å³é”®ï¼Œåœ¨å¼¹å‡ºçš„å¿«æ·èœå•ä¸­é€‰æ‹©â€œå‘é€åˆ°â€ï¼Œâ€œå‹ç¼©(zipped)æ–‡ä»¶å¤¹â€ï¼Œå°±åˆ¶ä½œäº†ä¸€ä¸ªzipæ–‡ä»¶ã€‚ç„¶åï¼ŒæŠŠåç¼€ä»<code>.zip</code>æ”¹ä¸º<code>.jar</code>ï¼Œä¸€ä¸ªjaråŒ…å°±åˆ›å»ºæˆåŠŸã€‚</p>
<p>å‡è®¾ç¼–è¯‘è¾“å‡ºçš„ç›®å½•ç»“æ„æ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package_sample</span><br><span class="line">â””â”€ bin</span><br><span class="line">   â”œâ”€ hong</span><br><span class="line">   â”‚  â””â”€ Person.class</span><br><span class="line">   â”‚  ming</span><br><span class="line">   â”‚  â””â”€ Person.class</span><br><span class="line">   â””â”€ mr</span><br><span class="line">      â””â”€ jun</span><br><span class="line">         â””â”€ Arrays.class</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼ŒjaråŒ…é‡Œçš„ç¬¬ä¸€å±‚ç›®å½•ï¼Œä¸èƒ½æ˜¯<code>bin</code>ï¼Œè€Œåº”è¯¥æ˜¯<code>hong</code>ã€<code>ming</code>ã€<code>mr</code>ã€‚åº”å½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure>
<img src="https://mypic416.oss-cn-hangzhou.aliyuncs.com/windows/pic.png"
alt="pic" />
<figcaption aria-hidden="true">pic</figcaption>
</figure>
<h4 id="ç‰¹æ®Šæ–‡ä»¶-manifest.mf">4ã€ç‰¹æ®Šæ–‡ä»¶ MANIFEST.MFï¼š</h4>
<p>â€‹
jaråŒ…è¿˜å¯ä»¥åŒ…å«ä¸€ä¸ªç‰¹æ®Šçš„<code>/META-INF/MANIFEST.MF</code>æ–‡ä»¶ï¼Œ<code>MANIFEST.MF</code>æ˜¯çº¯æ–‡æœ¬ï¼Œå¯ä»¥æŒ‡å®š<code>Main-Class</code>å’Œå…¶å®ƒä¿¡æ¯ã€‚JVMä¼šè‡ªåŠ¨è¯»å–è¿™ä¸ª<code>MANIFEST.MF</code>æ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨<code>Main-Class</code>ï¼Œæˆ‘ä»¬å°±ä¸å¿…åœ¨å‘½ä»¤è¡ŒæŒ‡å®šå¯åŠ¨çš„ç±»åï¼Œè€Œæ˜¯ç”¨æ›´æ–¹ä¾¿çš„å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">java -jar hello.jar</span><br></pre></td></tr></table></figure>
<p>â€‹
jaråŒ…è¿˜å¯ä»¥åŒ…å«å…¶å®ƒjaråŒ…ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±éœ€è¦åœ¨<code>MANIFEST.MF</code>æ–‡ä»¶é‡Œé…ç½®<code>classpath</code>äº†ã€‚</p>
<p>â€‹
åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œä¸å¯èƒ½æ‰‹åŠ¨ç¼–å†™<code>MANIFEST.MF</code>æ–‡ä»¶ï¼Œå†æ‰‹åŠ¨åˆ›å»ºzipåŒ…ã€‚Javaç¤¾åŒºæä¾›äº†å¤§é‡çš„å¼€æºæ„å»ºå·¥å…·ï¼Œä¾‹å¦‚<a
href="https://www.liaoxuefeng.com/wiki/1252599548343744/1255945359327200">Maven</a>ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿åœ°åˆ›å»ºjaråŒ…ã€‚</p>
<h3 id="åå››æ¨¡å—">åå››ã€æ¨¡å—ï¼š</h3>
<h4 id="java9ä¹‹å‰çš„ç¨‹åºæ‰“åŒ…è¿è¡Œ">1ã€java9ä¹‹å‰çš„ç¨‹åºæ‰“åŒ…è¿è¡Œï¼š</h4>
<p>ä»Java 9å¼€å§‹ï¼ŒJDKåˆå¼•å…¥äº†æ¨¡å—ï¼ˆModuleï¼‰</p>
<p><code>.class</code>æ–‡ä»¶æ˜¯JVMçœ‹åˆ°çš„æœ€å°å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè€Œä¸€ä¸ªå¤§å‹ç¨‹åºéœ€è¦ç¼–å†™å¾ˆå¤šClassï¼Œå¹¶ç”Ÿæˆä¸€å †<code>.class</code>æ–‡ä»¶ï¼Œå¾ˆä¸ä¾¿äºç®¡ç†ï¼Œæ‰€ä»¥ï¼Œ<code>jar</code>æ–‡ä»¶å°±æ˜¯<code>class</code>æ–‡ä»¶çš„å®¹å™¨ã€‚</p>
<p>åœ¨Java
9ä¹‹å‰ï¼Œä¸€ä¸ªå¤§å‹Javaç¨‹åºä¼šç”Ÿæˆè‡ªå·±çš„jaræ–‡ä»¶ï¼ŒåŒæ—¶å¼•ç”¨ä¾èµ–çš„ç¬¬ä¸‰æ–¹jaræ–‡ä»¶ï¼Œè€ŒJVMè‡ªå¸¦çš„Javaæ ‡å‡†åº“ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯ä»¥jaræ–‡ä»¶å½¢å¼å­˜æ”¾çš„ï¼Œè¿™ä¸ªæ–‡ä»¶å«<code>rt.jar</code>ï¼Œä¸€å…±æœ‰60å¤šMã€‚</p>
<p>å¦‚æœæ˜¯è‡ªå·±å¼€å‘çš„ç¨‹åºï¼Œé™¤äº†ä¸€ä¸ªè‡ªå·±çš„<code>app.jar</code>ä»¥å¤–ï¼Œè¿˜éœ€è¦ä¸€å †ç¬¬ä¸‰æ–¹çš„jaråŒ…ï¼Œè¿è¡Œä¸€ä¸ªJavaç¨‹åºï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå‘½ä»¤è¡Œå†™è¿™æ ·ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">java -cp app.jar:a.jar:b.jar:c.jar com.liaoxuefeng.sample.Main</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ¼å†™äº†æŸä¸ªè¿è¡Œæ—¶éœ€è¦ç”¨åˆ°çš„jarï¼Œé‚£ä¹ˆåœ¨è¿è¡ŒæœŸææœ‰å¯èƒ½æŠ›å‡º<code>ClassNotFoundException</code>ã€‚</p>
<p>æ‰€ä»¥ï¼Œjaråªæ˜¯ç”¨äºå­˜æ”¾classçš„å®¹å™¨ï¼Œ<strong>å®ƒå¹¶ä¸å…³å¿ƒclassä¹‹é—´çš„ä¾èµ–</strong>ã€‚</p>
<h4 id="java9ä¹‹åå¼•å…¥çš„æ¨¡å—">2ã€java9ä¹‹åå¼•å…¥çš„æ¨¡å—ï¼š</h4>
<p>â€‹ ä¸»è¦ä¸ºäº†è§£å†³ä¾èµ–çš„é—®é¢˜ã€‚</p>
<p>â€‹
å¦‚æœ<code>a.jar</code>å¿…é¡»ä¾èµ–å¦ä¸€ä¸ª<code>b.jar</code>æ‰èƒ½è¿è¡Œï¼Œé‚£æˆ‘ä»¬åº”è¯¥ç»™<code>a.jar</code>åŠ ç‚¹è¯´æ˜å•¥çš„ï¼Œè®©ç¨‹åºåœ¨ç¼–è¯‘å’Œè¿è¡Œçš„æ—¶å€™èƒ½è‡ªåŠ¨å®šä½åˆ°<code>b.jar</code>ï¼Œè¿™ç§è‡ªå¸¦â€œä¾èµ–å…³ç³»â€çš„classå®¹å™¨å°±æ˜¯æ¨¡å—ã€‚</p>
<p>ä¸ºäº†è¡¨æ˜Javaæ¨¡å—åŒ–çš„å†³å¿ƒï¼Œä»Java
9å¼€å§‹ï¼ŒåŸæœ‰çš„Javaæ ‡å‡†åº“å·²ç»ç”±ä¸€ä¸ªå•ä¸€å·¨å¤§çš„<code>rt.jar</code>åˆ†æ‹†æˆäº†å‡ åä¸ªæ¨¡å—ï¼Œè¿™äº›æ¨¡å—ä»¥<code>.jmod</code>æ‰©å±•åæ ‡è¯†ï¼Œå¯ä»¥åœ¨<code>$JAVA_HOME/jmods</code>ç›®å½•ä¸‹æ‰¾åˆ°å®ƒä»¬ï¼š</p>
<ul>
<li>java.base.jmod</li>
<li>java.compiler.jmod</li>
<li>java.datatransfer.jmod</li>
<li>java.desktop.jmod</li>
<li>...</li>
</ul>
<p>â€‹
è¿™äº›<code>.jmod</code>æ–‡ä»¶æ¯ä¸€ä¸ªéƒ½æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæ¨¡å—åå°±æ˜¯æ–‡ä»¶åã€‚ä¾‹å¦‚ï¼šæ¨¡å—<code>java.base</code>å¯¹åº”çš„æ–‡ä»¶å°±æ˜¯<code>java.base.jmod</code>ã€‚æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»å·²ç»è¢«å†™å…¥åˆ°æ¨¡å—å†…çš„<code>module-info.class</code>æ–‡ä»¶äº†ã€‚æ‰€æœ‰çš„æ¨¡å—éƒ½ç›´æ¥æˆ–é—´æ¥åœ°ä¾èµ–<code>java.base</code>æ¨¡å—ï¼Œåªæœ‰<code>java.base</code>æ¨¡å—ä¸ä¾èµ–ä»»ä½•æ¨¡å—ï¼Œå®ƒå¯ä»¥è¢«çœ‹ä½œæ˜¯â€œæ ¹æ¨¡å—â€ï¼Œå¥½æ¯”æ‰€æœ‰çš„ç±»éƒ½æ˜¯ä»<code>Object</code>ç›´æ¥æˆ–é—´æ¥ç»§æ‰¿è€Œæ¥ã€‚</p>
<p>â€‹
æŠŠä¸€å †classå°è£…ä¸ºjarä»…ä»…æ˜¯ä¸€ä¸ªæ‰“åŒ…çš„è¿‡ç¨‹ï¼Œè€ŒæŠŠä¸€å †classå°è£…ä¸ºæ¨¡å—åˆ™ä¸ä½†éœ€è¦æ‰“åŒ…ï¼Œè¿˜éœ€è¦å†™å…¥ä¾èµ–å…³ç³»ï¼Œå¹¶ä¸”è¿˜å¯ä»¥åŒ…å«äºŒè¿›åˆ¶ä»£ç ï¼ˆé€šå¸¸æ˜¯JNIæ‰©å±•ï¼‰ã€‚æ­¤å¤–ï¼Œæ¨¡å—æ”¯æŒå¤šç‰ˆæœ¬ï¼Œå³åœ¨åŒä¸€ä¸ªæ¨¡å—ä¸­å¯ä»¥ä¸ºä¸åŒçš„JVMæä¾›ä¸åŒçš„ç‰ˆæœ¬ã€‚</p>
<h4 id="å¦‚ä½•ç¼–å†™æ¨¡å—">3ã€å¦‚ä½•ç¼–å†™æ¨¡å—ï¼š</h4>
<p>â€‹
é¦–å…ˆï¼Œåˆ›å»ºæ¨¡å—å’ŒåŸæœ‰çš„åˆ›å»ºJavaé¡¹ç›®æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œä»¥<code>oop-module</code>å·¥ç¨‹ä¸ºä¾‹ï¼Œå®ƒçš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">oop-module</span><br><span class="line">â”œâ”€â”€ bin</span><br><span class="line">â”œâ”€â”€ build.sh</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â”œâ”€â”€ com</span><br><span class="line">    â”‚   â””â”€â”€ itranswarp</span><br><span class="line">    â”‚       â””â”€â”€ sample</span><br><span class="line">    â”‚           â”œâ”€â”€ Greeting.java</span><br><span class="line">    â”‚           â””â”€â”€ Main.java</span><br><span class="line">    â””â”€â”€ module-info.java</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œ<code>bin</code>ç›®å½•å­˜æ”¾ç¼–è¯‘åçš„classæ–‡ä»¶ï¼Œ<code>src</code>ç›®å½•å­˜æ”¾æºç ï¼ŒæŒ‰åŒ…åçš„ç›®å½•ç»“æ„å­˜æ”¾ï¼Œä»…ä»…åœ¨<code>src</code>ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ª<code>module-info.java</code>è¿™ä¸ªæ–‡ä»¶ï¼Œè¿™å°±æ˜¯æ¨¡å—çš„æè¿°æ–‡ä»¶ã€‚åœ¨è¿™ä¸ªæ¨¡å—ä¸­ï¼Œå®ƒé•¿è¿™æ ·ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span> hello.world &#123;</span><br><span class="line">	<span class="keyword">requires</span> java.base; <span class="comment">// å¯ä¸å†™ï¼Œä»»ä½•æ¨¡å—éƒ½ä¼šè‡ªåŠ¨å¼•å…¥java.base</span></span><br><span class="line">	<span class="keyword">requires</span> java.xml;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œ<code>module</code>æ˜¯å…³é”®å­—ï¼Œåé¢çš„<code>hello.world</code>æ˜¯æ¨¡å—çš„åç§°ï¼Œå®ƒçš„å‘½åè§„èŒƒä¸åŒ…ä¸€è‡´ã€‚èŠ±æ‹¬å·çš„<code>requires xxx;</code>è¡¨ç¤ºè¿™ä¸ªæ¨¡å—éœ€è¦å¼•ç”¨çš„å…¶ä»–æ¨¡å—åã€‚é™¤äº†<code>java.base</code>å¯ä»¥è¢«è‡ªåŠ¨å¼•å…¥å¤–ï¼Œè¿™é‡Œæˆ‘ä»¬å¼•å…¥äº†ä¸€ä¸ª<code>java.xml</code>çš„æ¨¡å—ã€‚</p>
<p>å½“æˆ‘ä»¬ä½¿ç”¨æ¨¡å—å£°æ˜äº†ä¾èµ–å…³ç³»åï¼Œæ‰èƒ½ä½¿ç”¨å¼•å…¥çš„æ¨¡å—ã€‚ä¾‹å¦‚ï¼Œ<code>Main.java</code>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itranswarp.sample;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¿…é¡»å¼•å…¥java.xmlæ¨¡å—åæ‰èƒ½ä½¿ç”¨å…¶ä¸­çš„ç±»:</span></span><br><span class="line"><span class="keyword">import</span> javax.xml.XMLConstants;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="type">Greeting</span> <span class="variable">g</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Greeting</span>();</span><br><span class="line">		System.out.println(g.hello(XMLConstants.XML_NS_PREFIX));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæŠŠ<code>requires java.xml;</code>ä»<code>module-info.java</code>ä¸­å»æ‰ï¼Œç¼–è¯‘å°†æŠ¥é”™ã€‚å¯è§ï¼Œæ¨¡å—çš„é‡è¦ä½œç”¨å°±æ˜¯å£°æ˜ä¾èµ–å…³ç³»ã€‚</p>
<h4 id="å‘½ä»¤è¡Œç¼–è¯‘å¹¶åˆ›å»ºæ¨¡å—">4ã€ å‘½ä»¤è¡Œç¼–è¯‘å¹¶åˆ›å»ºæ¨¡å—ï¼š</h4>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æŠŠå·¥ä½œç›®å½•åˆ‡æ¢åˆ°<code>oop-module</code>ï¼Œåœ¨å½“å‰ç›®å½•ä¸‹ç¼–è¯‘æ‰€æœ‰çš„<code>.java</code>æ–‡ä»¶ï¼Œå¹¶å­˜æ”¾åˆ°<code>bin</code>ç›®å½•ä¸‹ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ javac -d bin src/module-info.java src/com/itranswarp/sample/*.java</span><br></pre></td></tr></table></figure>
<p>å¦‚æœç¼–è¯‘æˆåŠŸï¼Œç°åœ¨é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">oop-module</span><br><span class="line">â”œâ”€â”€ bin</span><br><span class="line">â”‚   â”œâ”€â”€ com</span><br><span class="line">â”‚   â”‚   â””â”€â”€ itranswarp</span><br><span class="line">â”‚   â”‚       â””â”€â”€ sample</span><br><span class="line">â”‚   â”‚           â”œâ”€â”€ Greeting.class</span><br><span class="line">â”‚   â”‚           â””â”€â”€ Main.class</span><br><span class="line">â”‚   â””â”€â”€ module-info.class</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â”œâ”€â”€ com</span><br><span class="line">    â”‚   â””â”€â”€ itranswarp</span><br><span class="line">    â”‚       â””â”€â”€ sample</span><br><span class="line">    â”‚           â”œâ”€â”€ Greeting.java</span><br><span class="line">    â”‚           â””â”€â”€ Main.java</span><br><span class="line">    â””â”€â”€ module-info.java</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„åˆ°<code>src</code>ç›®å½•ä¸‹çš„<code>module-info.java</code>è¢«ç¼–è¯‘åˆ°<code>bin</code>ç›®å½•ä¸‹çš„<code>module-info.class</code>ã€‚</p>
<p>ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬éœ€è¦æŠŠbinç›®å½•ä¸‹çš„æ‰€æœ‰classæ–‡ä»¶å…ˆæ‰“åŒ…æˆjarï¼Œåœ¨æ‰“åŒ…çš„æ—¶å€™ï¼Œæ³¨æ„ä¼ å…¥<code>--main-class</code>å‚æ•°ï¼Œè®©è¿™ä¸ªjaråŒ…èƒ½è‡ªå·±å®šä½<code>main</code>æ–¹æ³•æ‰€åœ¨çš„ç±»ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ jar --create --file hello.jar --main-class com.itranswarp.sample.Main -C bin .</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬å°±åœ¨å½“å‰ç›®å½•ä¸‹å¾—åˆ°äº†<code>hello.jar</code>è¿™ä¸ªjaråŒ…ï¼Œå®ƒå’Œæ™®é€šjaråŒ…å¹¶æ— åŒºåˆ«ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤<code>java -jar hello.jar</code>æ¥è¿è¡Œå®ƒã€‚ä½†æ˜¯æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åˆ›å»ºæ¨¡å—ï¼Œæ‰€ä»¥ï¼Œç»§ç»­ä½¿ç”¨JDKè‡ªå¸¦çš„<code>jmod</code>å‘½ä»¤æŠŠä¸€ä¸ªjaråŒ…è½¬æ¢æˆæ¨¡å—ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ jmod create --class-path hello.jar hello.jmod</span><br></pre></td></tr></table></figure>
<p>äºæ˜¯ï¼Œåœ¨å½“å‰ç›®å½•ä¸‹æˆ‘ä»¬åˆå¾—åˆ°äº†<code>hello.jmod</code>è¿™ä¸ªæ¨¡å—æ–‡ä»¶ï¼Œè¿™å°±æ˜¯æœ€åæ‰“åŒ…å‡ºæ¥çš„ä¼ è¯´ä¸­çš„æ¨¡å—ï¼</p>
<h4 id="è¿è¡Œæ¨¡å—">5ã€è¿è¡Œæ¨¡å—ï¼š</h4>
<p>è¦è¿è¡Œä¸€ä¸ªjarï¼Œæˆ‘ä»¬ä½¿ç”¨<code>java -jar xxx.jar</code>å‘½ä»¤ã€‚è¦è¿è¡Œä¸€ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‡å®šæ¨¡å—åã€‚è¯•è¯•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ java --module-path hello.jmod --module hello.world</span><br></pre></td></tr></table></figure>
<p>ç»“æœæ˜¯ä¸€ä¸ªé”™è¯¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Error occurred during initialization of boot layer</span><br><span class="line">java.lang.module.FindException: JMOD format not supported at execution time: hello.jmod</span><br></pre></td></tr></table></figure>
<p>åŸå› æ˜¯<code>.jmod</code>ä¸èƒ½è¢«æ”¾å…¥<code>--module-path</code>ä¸­ã€‚æ¢æˆ<code>.jar</code>å°±æ²¡é—®é¢˜äº†ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ java --module-path hello.jar --module hello.world</span><br><span class="line">Hello, xml!</span><br></pre></td></tr></table></figure>
<h4 id="æ‰“åŒ…jre">6ã€æ‰“åŒ…JRE</h4>
<p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨åˆ›å»ºçš„<code>hello.jmod</code>æ¥æ‰“åŒ…JREã€‚</p>
<p>â€‹ ä¸ºäº†æ”¯æŒæ¨¡å—åŒ–ï¼ŒJava
9é¦–å…ˆå¸¦å¤´æŠŠè‡ªå·±çš„ä¸€ä¸ªå·¨å¤§æ— æ¯”çš„<code>rt.jar</code>æ‹†æˆäº†å‡ åä¸ª<code>.jmod</code>æ¨¡å—ï¼ŒåŸå› å°±æ˜¯ï¼Œè¿è¡ŒJavaç¨‹åºçš„æ—¶å€™ï¼Œå®é™…ä¸Šæˆ‘ä»¬ç”¨åˆ°çš„JDKæ¨¡å—ï¼Œå¹¶æ²¡æœ‰é‚£ä¹ˆå¤šã€‚ä¸éœ€è¦çš„æ¨¡å—ï¼Œå®Œå…¨å¯ä»¥åˆ é™¤ã€‚</p>
<p>â€‹
è¿‡å»å‘å¸ƒä¸€ä¸ªJavaåº”ç”¨ç¨‹åºï¼Œè¦è¿è¡Œå®ƒï¼Œå¿…é¡»ä¸‹è½½ä¸€ä¸ªå®Œæ•´çš„JREï¼Œå†è¿è¡ŒjaråŒ…ã€‚è€Œå®Œæ•´çš„JREå—å¤´å¾ˆå¤§ï¼Œæœ‰100å¤šMã€‚æ€ä¹ˆç»™JREç˜¦èº«å‘¢ï¼Ÿ</p>
<p>â€‹
ç°åœ¨ï¼ŒJREè‡ªèº«çš„æ ‡å‡†åº“å·²ç»åˆ†æ‹†æˆäº†æ¨¡å—ï¼Œåªéœ€è¦å¸¦ä¸Šç¨‹åºç”¨åˆ°çš„æ¨¡å—ï¼Œå…¶ä»–çš„æ¨¡å—å°±å¯ä»¥è¢«è£å‰ªæ‰ã€‚æ€ä¹ˆè£å‰ªJREå‘¢ï¼Ÿå¹¶ä¸æ˜¯è¯´æŠŠç³»ç»Ÿå®‰è£…çš„JREç»™åˆ æ‰éƒ¨åˆ†æ¨¡å—ï¼Œè€Œæ˜¯â€œå¤åˆ¶â€ä¸€ä»½JREï¼Œä½†åªå¸¦ä¸Šç”¨åˆ°çš„æ¨¡å—ã€‚ä¸ºæ­¤ï¼ŒJDKæä¾›äº†<code>jlink</code>å‘½ä»¤æ¥å¹²è¿™ä»¶äº‹ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ jlink --module-path hello.jmod --add-modules java.base,java.xml,hello.world --output jre/</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åœ¨<code>--module-path</code>å‚æ•°æŒ‡å®šäº†æˆ‘ä»¬è‡ªå·±çš„æ¨¡å—<code>hello.jmod</code>ï¼Œç„¶åï¼Œåœ¨<code>--add-modules</code>å‚æ•°ä¸­æŒ‡å®šäº†æˆ‘ä»¬ç”¨åˆ°çš„3ä¸ªæ¨¡å—<code>java.base</code>ã€<code>java.xml</code>å’Œ<code>hello.world</code>ï¼Œç”¨<code>,</code>åˆ†éš”ã€‚æœ€åï¼Œåœ¨<code>--output</code>å‚æ•°æŒ‡å®šè¾“å‡ºç›®å½•ã€‚</p>
<p>ç°åœ¨ï¼Œåœ¨å½“å‰ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°<code>jre</code>ç›®å½•ï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¹¶ä¸”å¸¦æœ‰æˆ‘ä»¬è‡ªå·±<code>hello.jmod</code>æ¨¡å—çš„JREã€‚è¯•è¯•ç›´æ¥è¿è¡Œè¿™ä¸ªJREï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ jre/bin/java --module hello.world</span><br><span class="line">Hello, xml!</span><br></pre></td></tr></table></figure>
<p>è¦åˆ†å‘æˆ‘ä»¬è‡ªå·±çš„Javaåº”ç”¨ç¨‹åºï¼Œåªéœ€è¦æŠŠè¿™ä¸ª<code>jre</code>ç›®å½•æ‰“ä¸ªåŒ…ç»™å¯¹æ–¹å‘è¿‡å»ï¼Œå¯¹æ–¹ç›´æ¥è¿è¡Œä¸Šè¿°å‘½ä»¤å³å¯ï¼Œæ—¢ä¸ç”¨ä¸‹è½½å®‰è£…JDKï¼Œä¹Ÿä¸ç”¨çŸ¥é“å¦‚ä½•é…ç½®æˆ‘ä»¬è‡ªå·±çš„æ¨¡å—ï¼Œæå¤§åœ°æ–¹ä¾¿äº†åˆ†å‘å’Œéƒ¨ç½²ã€‚</p>
<h4 id="è®¿é—®æƒé™">7ã€è®¿é—®æƒé™ï¼š</h4>
<p>Javaçš„classè®¿é—®æƒé™åˆ†ä¸ºpublicã€protectedã€privateå’Œé»˜è®¤çš„åŒ…è®¿é—®æƒé™ã€‚</p>
<p>å¼•å…¥æ¨¡å—åï¼Œè¿™äº›è®¿é—®æƒé™çš„è§„åˆ™å°±è¦ç¨å¾®åšäº›è°ƒæ•´ã€‚</p>
<p>ç¡®åˆ‡åœ°è¯´ï¼Œ<strong>classçš„è¿™äº›è®¿é—®æƒé™åªåœ¨ä¸€ä¸ªæ¨¡å—å†…æœ‰æ•ˆ</strong>ï¼Œæ¨¡å—å’Œæ¨¡å—ä¹‹é—´ï¼Œä¾‹å¦‚ï¼Œaæ¨¡å—è¦è®¿é—®bæ¨¡å—çš„æŸä¸ªclassï¼Œå¿…è¦æ¡ä»¶æ˜¯bæ¨¡å—æ˜ç¡®åœ°å¯¼å‡ºäº†å¯ä»¥è®¿é—®çš„åŒ…ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šæˆ‘ä»¬ç¼–å†™çš„æ¨¡å—<code>hello.world</code>ç”¨åˆ°äº†æ¨¡å—<code>java.xml</code>çš„ä¸€ä¸ªç±»<code>javax.xml.XMLConstants</code>ï¼Œæˆ‘ä»¬ä¹‹æ‰€ä»¥èƒ½ç›´æ¥ä½¿ç”¨è¿™ä¸ªç±»ï¼Œæ˜¯å› ä¸ºæ¨¡å—<code>java.xml</code>çš„<code>module-info.java</code>ä¸­å£°æ˜äº†è‹¥å¹²å¯¼å‡ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span> java.xml &#123;</span><br><span class="line">    <span class="keyword">exports</span> java.xml;</span><br><span class="line">    <span class="keyword">exports</span> javax.xml.catalog;</span><br><span class="line">    <span class="keyword">exports</span> javax.xml.datatype;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åªæœ‰å®ƒå£°æ˜çš„å¯¼å‡ºçš„åŒ…ï¼Œå¤–éƒ¨ä»£ç æ‰è¢«å…è®¸è®¿é—®ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœå¤–éƒ¨ä»£ç æƒ³è¦è®¿é—®æˆ‘ä»¬çš„<code>hello.world</code>æ¨¡å—ä¸­çš„<code>com.itranswarp.sample.Greeting</code>ç±»ï¼Œæˆ‘ä»¬å¿…é¡»å°†å…¶å¯¼å‡ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span> hello.world &#123;</span><br><span class="line">    <span class="keyword">exports</span> com.itranswarp.sample;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">requires</span> java.base;</span><br><span class="line">	<span class="keyword">requires</span> java.xml;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å› æ­¤ï¼Œæ¨¡å—è¿›ä¸€æ­¥éš”ç¦»äº†ä»£ç çš„è®¿é—®æƒé™ã€‚</p>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaå…¥é—¨ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>oop</tag>
      </tags>
  </entry>
  <entry>
    <title>javaç³»åˆ—ç¬”è®°3â€”â€”javaæ ¸å¿ƒç±»</title>
    <url>/2022/01/30/5dc10d37c664/</url>
    <content><![CDATA[<p>å‚è€ƒæ•™ç¨‹ç½‘å€ï¼šhttps://www.liaoxuefeng.com/wiki/1252599548343744/1260469698963456</p>
<h3 id="ä¸€å­—ç¬¦ä¸²å’Œç¼–ç ">ä¸€ã€å­—ç¬¦ä¸²å’Œç¼–ç </h3>
<p>â€‹
Javaå­—ç¬¦ä¸²çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹å°±æ˜¯å­—ç¬¦ä¸²<strong>ä¸å¯å˜</strong>ã€‚è¿™ç§ä¸å¯å˜æ€§æ˜¯é€šè¿‡å†…éƒ¨çš„<code>private final char[]</code>å­—æ®µï¼Œä»¥åŠæ²¡æœ‰ä»»ä½•ä¿®æ”¹<code>char[]</code>çš„æ–¹æ³•å®ç°çš„ã€‚</p>
<h4 id="å­—ç¬¦ä¸²æ¯”è¾ƒ">1ã€å­—ç¬¦ä¸²æ¯”è¾ƒ</h4>
<p>â€‹ å¿…é¡»ä½¿ç”¨<code>equals()</code>æ–¹æ³•è€Œä¸èƒ½ç”¨<code>==</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">        System.out.println(s1 == s2);     <span class="comment">//true</span></span><br><span class="line">        System.out.println(s1.equals(s2));  <span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
ä»è¡¨é¢ä¸Šçœ‹ï¼Œä¸¤ä¸ªå­—ç¬¦ä¸²ç”¨<code>==</code>å’Œ<code>equals()</code>æ¯”è¾ƒéƒ½ä¸º<code>true</code>ï¼Œä½†<strong>å®é™…ä¸Šé‚£åªæ˜¯Javaç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸï¼Œä¼šè‡ªåŠ¨æŠŠæ‰€æœ‰ç›¸åŒçš„å­—ç¬¦ä¸²å½“ä½œä¸€ä¸ªå¯¹è±¡æ”¾å…¥å¸¸é‡æ± ï¼Œè‡ªç„¶<code>s1</code>å’Œ<code>s2</code>çš„å¼•ç”¨å°±æ˜¯ç›¸åŒçš„ã€‚</strong></p>
<p>â€‹
æ‰€ä»¥ï¼Œè¿™ç§<code>==</code>æ¯”è¾ƒè¿”å›<code>true</code>çº¯å±å·§åˆã€‚æ¢ä¸€ç§å†™æ³•ï¼Œ<code>==</code>æ¯”è¾ƒå°±ä¼šå¤±è´¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;HELLO&quot;</span>.toLowerCase();</span><br><span class="line">        System.out.println(s1 == s2);</span><br><span class="line">        System.out.println(s1.equals(s2));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹ è¦å¿½ç•¥å¤§å°å†™æ¯”è¾ƒï¼Œä½¿ç”¨<code>equalsIgnoreCase()</code>æ–¹æ³•ã€‚</p>
<h4 id="æœç´¢ä¸æå–å­ä¸²">2ã€æœç´¢ä¸æå–å­ä¸²</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;Hello&quot;</span>.contains(<span class="string">&quot;ll&quot;</span>); <span class="comment">// true</span></span><br><span class="line"><span class="string">&quot;Hello&quot;</span>.indexOf(<span class="string">&quot;l&quot;</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="string">&quot;Hello&quot;</span>.lastIndexOf(<span class="string">&quot;l&quot;</span>); <span class="comment">// 3</span></span><br><span class="line"><span class="string">&quot;Hello&quot;</span>.startsWith(<span class="string">&quot;He&quot;</span>); <span class="comment">// true</span></span><br><span class="line"><span class="string">&quot;Hello&quot;</span>.endsWith(<span class="string">&quot;lo&quot;</span>); <span class="comment">// true</span></span><br><span class="line"><span class="string">&quot;Hello&quot;</span>.substring(<span class="number">2</span>); <span class="comment">// &quot;llo&quot;</span></span><br><span class="line"><span class="string">&quot;Hello&quot;</span>.substring(<span class="number">2</span>, <span class="number">4</span>); <span class="string">&quot;ll&quot;</span></span><br></pre></td></tr></table></figure>
<h4 id="å»é™¤é¦–å°¾ç©ºç™½å­—ç¬¦">3ã€å»é™¤é¦–å°¾ç©ºç™½å­—ç¬¦ï¼š</h4>
<ul>
<li><p>ä½¿ç”¨<code>trim()</code>æ–¹æ³•å¯ä»¥ç§»é™¤å­—ç¬¦ä¸²é¦–å°¾ç©ºç™½å­—ç¬¦ã€‚<strong>ç©ºç™½å­—ç¬¦åŒ…æ‹¬ç©ºæ ¼ï¼Œ<code>\t</code>ï¼Œ<code>\r</code>ï¼Œ<code>\n</code></strong></p></li>
<li><p>å¦ä¸€ä¸ª<code>strip()</code>æ–¹æ³•ä¹Ÿå¯ä»¥ç§»é™¤å­—ç¬¦ä¸²é¦–å°¾ç©ºç™½å­—ç¬¦ã€‚å®ƒå’Œ<code>trim()</code>ä¸åŒçš„æ˜¯ï¼Œç±»ä¼¼ä¸­æ–‡çš„ç©ºæ ¼å­—ç¬¦<code>\u3000</code>ä¹Ÿä¼šè¢«ç§»é™¤</p></li>
</ul>
<h4 id="åˆ¤æ–­æ˜¯å¦ä¸ºç©º">4ã€åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼š</h4>
<p><code>String</code>è¿˜æä¾›äº†<code>isEmpty()</code>å’Œ<code>isBlank()</code>æ¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º
å’Œ ç©ºç™½å­—ç¬¦ä¸²</p>
<p>ç©ºç™½å­—ç¬¦ä¸² ä»£è¡¨ åªå« <strong>ç©ºç™½å­—ç¬¦</strong>çš„å­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;&quot;</span>.isEmpty(); <span class="comment">// trueï¼Œå› ä¸ºå­—ç¬¦ä¸²é•¿åº¦ä¸º0</span></span><br><span class="line"><span class="string">&quot;  &quot;</span>.isEmpty(); <span class="comment">// falseï¼Œå› ä¸ºå­—ç¬¦ä¸²é•¿åº¦ä¸ä¸º0</span></span><br><span class="line"><span class="string">&quot;  \n&quot;</span>.isBlank(); <span class="comment">// trueï¼Œå› ä¸ºåªåŒ…å«ç©ºç™½å­—ç¬¦</span></span><br><span class="line"><span class="string">&quot; Hello &quot;</span>.isBlank(); <span class="comment">// falseï¼Œå› ä¸ºåŒ…å«éç©ºç™½å­—ç¬¦</span></span><br></pre></td></tr></table></figure>
<h4 id="æ›¿æ¢å­ä¸²">5ã€æ›¿æ¢å­ä¸²</h4>
<ul>
<li>æ ¹æ®å­—ç¬¦æˆ–å­—ç¬¦ä¸²æ›¿æ¢</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">s.replace(<span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;w&#x27;</span>); <span class="comment">// &quot;hewwo&quot;ï¼Œæ‰€æœ‰å­—ç¬¦&#x27;l&#x27;è¢«æ›¿æ¢ä¸º&#x27;w&#x27;</span></span><br><span class="line">s.replace(<span class="string">&quot;ll&quot;</span>, <span class="string">&quot;~~&quot;</span>); <span class="comment">// &quot;he~~o&quot;ï¼Œæ‰€æœ‰å­ä¸²&quot;ll&quot;è¢«æ›¿æ¢ä¸º&quot;~~&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;A,,B;C ,D&quot;</span>;</span><br><span class="line">s.replaceAll(<span class="string">&quot;[\\,\\;\\s]+&quot;</span>, <span class="string">&quot;,&quot;</span>); <span class="comment">// &quot;A,B,C,D&quot;</span></span><br></pre></td></tr></table></figure>
<h4 id="åˆ†å‰²æ‹¼æ¥æ ¼å¼åŒ–å­—ç¬¦ä¸²">6ã€åˆ†å‰²ã€æ‹¼æ¥ã€æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼š</h4>
<ul>
<li>è¦åˆ†å‰²å­—ç¬¦ä¸²ï¼Œä½¿ç”¨<code>split()</code>æ–¹æ³•ï¼Œå¹¶ä¸”ä¼ å…¥çš„ä¹Ÿæ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;A,B,C,D&quot;</span>;</span><br><span class="line">String[] ss = s.split(<span class="string">&quot;\\,&quot;</span>); <span class="comment">// &#123;&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ‹¼æ¥å­—ç¬¦ä¸²ä½¿ç”¨é™æ€æ–¹æ³•<code>join()</code>ï¼Œå®ƒç”¨æŒ‡å®šçš„å­—ç¬¦ä¸²è¿æ¥å­—ç¬¦ä¸²æ•°ç»„ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String[] arr = &#123;<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>&#125;;</span><br><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> String.join(<span class="string">&quot;***&quot;</span>, arr); <span class="comment">// &quot;A***B***C&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å­—ç¬¦ä¸²æä¾›äº†<code>formatted()</code>æ–¹æ³•å’Œ<code>format()</code>é™æ€æ–¹æ³•ï¼Œå¯ä»¥ä¼ å…¥å…¶ä»–å‚æ•°ï¼Œæ›¿æ¢å ä½ç¬¦ï¼Œç„¶åç”Ÿæˆæ–°çš„å­—ç¬¦ä¸²ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;Hi %s, your score is %d!&quot;</span>;</span><br><span class="line">        System.out.println(s.formatted(<span class="string">&quot;Alice&quot;</span>, <span class="number">80</span>));</span><br><span class="line">        System.out.println(String.format(<span class="string">&quot;Hi %s, your score is %.2f!&quot;</span>, <span class="string">&quot;Bob&quot;</span>, <span class="number">59.5</span>));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç±»å‹è½¬æ¢">7ã€ç±»å‹è½¬æ¢ï¼š</h4>
<p>è¦æŠŠä»»æ„åŸºæœ¬ç±»å‹æˆ–å¼•ç”¨ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨é™æ€æ–¹æ³•<code>valueOf()</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String.valueOf(<span class="number">123</span>); <span class="comment">// &quot;123&quot;</span></span><br><span class="line">String.valueOf(<span class="number">45.67</span>); <span class="comment">// &quot;45.67&quot;</span></span><br><span class="line">String.valueOf(<span class="literal">true</span>); <span class="comment">// &quot;true&quot;</span></span><br><span class="line">String.valueOf(<span class="keyword">new</span> <span class="title class_">Object</span>()); <span class="comment">// ç±»ä¼¼java.lang.Object@636be97c</span></span><br></pre></td></tr></table></figure>
<p>æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå…¶ä»–ç±»å‹ï¼Œå°±éœ€è¦æ ¹æ®æƒ…å†µã€‚ä¾‹å¦‚ï¼ŒæŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸º<code>int</code>ç±»å‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> Integer.parseInt(<span class="string">&quot;123&quot;</span>); <span class="comment">// 123</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n2</span> <span class="operator">=</span> Integer.parseInt(<span class="string">&quot;ff&quot;</span>, <span class="number">16</span>); <span class="comment">// æŒ‰åå…­è¿›åˆ¶è½¬æ¢ï¼Œ255</span></span><br></pre></td></tr></table></figure>
<p>æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸º<code>boolean</code>ç±»å‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="variable">b1</span> <span class="operator">=</span> Boolean.parseBoolean(<span class="string">&quot;true&quot;</span>); <span class="comment">// true</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">b2</span> <span class="operator">=</span> Boolean.parseBoolean(<span class="string">&quot;FALSE&quot;</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>è¦ç‰¹åˆ«æ³¨æ„ï¼Œ<code>Integer</code>æœ‰ä¸ª<code>getInteger(String)</code>æ–¹æ³•ï¼Œå®ƒä¸æ˜¯å°†å­—ç¬¦ä¸²è½¬æ¢ä¸º<code>int</code>ï¼Œè€Œæ˜¯æŠŠè¯¥å­—ç¬¦ä¸²å¯¹åº”çš„ç³»ç»Ÿå˜é‡è½¬æ¢ä¸º<code>Integer</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Integer.getInteger(<span class="string">&quot;java.version&quot;</span>); <span class="comment">// ç‰ˆæœ¬å·ï¼Œ11</span></span><br></pre></td></tr></table></figure>
<p><code>String</code>å’Œ<code>char[]</code>ç±»å‹å¯ä»¥äº’ç›¸è½¬æ¢ï¼Œæ–¹æ³•æ˜¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span>[] cs = <span class="string">&quot;Hello&quot;</span>.toCharArray(); <span class="comment">// String -&gt; char[]</span></span><br><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(cs); <span class="comment">// char[] -&gt; String</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¿®æ”¹äº†<code>char[]</code>æ•°ç»„ï¼Œ<code>String</code>å¹¶ä¸ä¼šæ”¹å˜ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">char</span>[] cs = <span class="string">&quot;Hello&quot;</span>.toCharArray();</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(cs);</span><br><span class="line">        System.out.println(s);</span><br><span class="line">        cs[<span class="number">0</span>] = <span class="string">&#x27;X&#x27;</span>;</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
è¿™æ˜¯å› ä¸ºé€šè¿‡<code>new String(char[])</code>åˆ›å»ºæ–°çš„<code>String</code>å®ä¾‹æ—¶ï¼Œå®ƒå¹¶ä¸ä¼šç›´æ¥å¼•ç”¨ä¼ å…¥çš„<code>char[]</code>æ•°ç»„ï¼Œè€Œæ˜¯ä¼šå¤åˆ¶ä¸€ä»½ï¼Œæ‰€ä»¥ï¼Œä¿®æ”¹å¤–éƒ¨çš„<code>char[]</code>æ•°ç»„ä¸ä¼šå½±å“<code>String</code>å®ä¾‹å†…éƒ¨çš„<code>char[]</code>æ•°ç»„ï¼Œå› ä¸ºè¿™æ˜¯ä¸¤ä¸ªä¸åŒçš„æ•°ç»„ã€‚</p>
<p><strong>è®¾è®¡æ³¨æ„</strong>ï¼šä»<code>String</code>çš„ä¸å˜æ€§è®¾è®¡å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœä¼ å…¥çš„å¯¹è±¡æœ‰å¯èƒ½æ”¹å˜ï¼Œæˆ‘ä»¬éœ€è¦å¤åˆ¶è€Œä¸æ˜¯ç›´æ¥å¼•ç”¨ã€‚</p>
<h4 id="å­—ç¬¦ç¼–ç é—®é¢˜">8ã€å­—ç¬¦ç¼–ç é—®é¢˜ï¼š</h4>
<p>â€‹
ä¸ºäº†ç»Ÿä¸€å…¨çƒæ‰€æœ‰è¯­è¨€çš„ç¼–ç ï¼Œå…¨çƒç»Ÿä¸€ç è”ç›Ÿå‘å¸ƒäº†<code>Unicode</code>ç¼–ç </p>
<p>â€‹ <code>Unicode</code>ç¼–ç éœ€è¦ä¸¤ä¸ªæˆ–è€…æ›´å¤šå­—èŠ‚è¡¨ç¤º</p>
<p>è‹±æ–‡å­—ç¬¦<code>'A'</code>çš„<code>ASCII</code>ç¼–ç å’Œ<code>Unicode</code>ç¼–ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">         â”Œâ”€â”€â”€â”€â”</span><br><span class="line">ASCII:   â”‚ 41 â”‚</span><br><span class="line">         â””â”€â”€â”€â”€â”˜</span><br><span class="line">         â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”</span><br><span class="line">Unicode: â”‚ 00 â”‚ 41 â”‚</span><br><span class="line">         â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure>
<p>è‹±æ–‡å­—ç¬¦çš„<code>Unicode</code>ç¼–ç å°±æ˜¯ç®€å•åœ°åœ¨å‰é¢æ·»åŠ ä¸€ä¸ª<code>00</code>å­—èŠ‚ã€‚</p>
<p>ä¸­æ–‡å­—ç¬¦<code>'ä¸­'</code>çš„<code>GB2312</code>ç¼–ç å’Œ<code>Unicode</code>ç¼–ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">         â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”</span><br><span class="line">GB2312:  â”‚ d6 â”‚ d0 â”‚</span><br><span class="line">         â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜</span><br><span class="line">         â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”</span><br><span class="line">Unicode: â”‚ 4e â”‚ 2d â”‚</span><br><span class="line">         â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜</span><br></pre></td></tr></table></figure>
<p>â€‹
é‚£æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„<code>UTF-8</code>åˆæ˜¯ä»€ä¹ˆç¼–ç å‘¢ï¼Ÿå› ä¸ºè‹±æ–‡å­—ç¬¦çš„<code>Unicode</code>ç¼–ç é«˜å­—èŠ‚æ€»æ˜¯<code>00</code>ï¼ŒåŒ…å«å¤§é‡è‹±æ–‡çš„æ–‡æœ¬ä¼šæµªè´¹ç©ºé—´ï¼Œæ‰€ä»¥ï¼Œå‡ºç°äº†<code>UTF-8</code>ç¼–ç ï¼Œ<strong>å®ƒæ˜¯ä¸€ç§å˜é•¿ç¼–ç </strong>ï¼Œ<strong>ç”¨æ¥æŠŠå›ºå®šé•¿åº¦çš„<code>Unicode</code>ç¼–ç å˜æˆ1ï½4å­—èŠ‚çš„å˜é•¿ç¼–ç </strong>ã€‚é€šè¿‡<code>UTF-8</code>ç¼–ç ï¼Œè‹±æ–‡å­—ç¬¦<code>'A'</code>çš„<code>UTF-8</code>ç¼–ç å˜ä¸º<code>0x41</code>ï¼Œæ­£å¥½å’Œ<code>ASCII</code>ç ä¸€è‡´ï¼Œè€Œä¸­æ–‡<code>'ä¸­'</code>çš„<code>UTF-8</code>ç¼–ç ä¸º3å­—èŠ‚<code>0xe4b8ad</code>ã€‚</p>
<p>â€‹
<strong><code>UTF-8</code>ç¼–ç çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯å®¹é”™èƒ½åŠ›å¼ºã€‚</strong>å¦‚æœä¼ è¾“è¿‡ç¨‹ä¸­æŸäº›å­—ç¬¦å‡ºé”™ï¼Œä¸ä¼šå½±å“åç»­å­—ç¬¦ï¼Œå› ä¸º<code>UTF-8</code>ç¼–ç ä¾é é«˜å­—èŠ‚ä½æ¥ç¡®å®šä¸€ä¸ªå­—ç¬¦ç©¶ç«Ÿæ˜¯å‡ ä¸ªå­—èŠ‚ï¼Œå®ƒç»å¸¸ç”¨æ¥ä½œä¸ºä¼ è¾“ç¼–ç ã€‚</p>
<p>â€‹
åœ¨Javaä¸­ï¼Œ<strong><code>char</code>ç±»å‹å®é™…ä¸Šå°±æ˜¯ä¸¤ä¸ªå­—èŠ‚çš„<code>Unicode</code>ç¼–ç </strong>ã€‚å¦‚æœæˆ‘ä»¬è¦æ‰‹åŠ¨æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆå…¶ä»–ç¼–ç ï¼Œå¯ä»¥è¿™æ ·åšï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">byte</span>[] b1 = <span class="string">&quot;Hello&quot;</span>.getBytes(); <span class="comment">// æŒ‰ç³»ç»Ÿé»˜è®¤ç¼–ç è½¬æ¢ï¼Œä¸æ¨è</span></span><br><span class="line"><span class="type">byte</span>[] b2 = <span class="string">&quot;Hello&quot;</span>.getBytes(<span class="string">&quot;UTF-8&quot;</span>); <span class="comment">// æŒ‰UTF-8ç¼–ç è½¬æ¢</span></span><br><span class="line"><span class="type">byte</span>[] b2 = <span class="string">&quot;Hello&quot;</span>.getBytes(<span class="string">&quot;GBK&quot;</span>); <span class="comment">// æŒ‰GBKç¼–ç è½¬æ¢</span></span><br><span class="line"><span class="type">byte</span>[] b3 = <span class="string">&quot;Hello&quot;</span>.getBytes(StandardCharsets.UTF_8); <span class="comment">// æŒ‰UTF-8ç¼–ç è½¬æ¢</span></span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„ï¼šè½¬æ¢ç¼–ç åï¼Œå°±ä¸å†æ˜¯<code>char</code>ç±»å‹ï¼Œè€Œæ˜¯<code>byte</code>ç±»å‹è¡¨ç¤ºçš„æ•°ç»„ã€‚</strong></p>
<p>å¦‚æœè¦æŠŠå·²çŸ¥ç¼–ç çš„<code>byte[]</code>è½¬æ¢ä¸º<code>String</code>ï¼Œå¯ä»¥è¿™æ ·åšï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">byte</span>[] b = ...</span><br><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(b, <span class="string">&quot;GBK&quot;</span>); <span class="comment">// æŒ‰GBKè½¬æ¢</span></span><br><span class="line"><span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(b, StandardCharsets.UTF_8); <span class="comment">// æŒ‰UTF-8è½¬æ¢</span></span><br></pre></td></tr></table></figure>
<p><strong>å§‹ç»ˆç‰¢è®°ï¼šJavaçš„<code>String</code>å’Œ<code>char</code>åœ¨å†…å­˜ä¸­æ€»æ˜¯ä»¥Unicodeç¼–ç è¡¨ç¤ºã€‚</strong></p>
<h3 id="äºŒstringbuilder">äºŒã€StringBuilder</h3>
<p>â€‹
åœ¨javaçš„Stringç±»ç§ï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥ç›´æ¥æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œä½†æ˜¯ï¼Œåœ¨å¾ªç¯ä¸­ï¼Œ<strong>æ¯æ¬¡å¾ªç¯éƒ½ä¼šåˆ›å»ºæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œç„¶åæ‰”æ‰æ—§çš„å­—ç¬¦ä¸²</strong>ã€‚è¿™æ ·ï¼Œ<strong>ç»å¤§éƒ¨åˆ†å­—ç¬¦ä¸²éƒ½æ˜¯ä¸´æ—¶å¯¹è±¡ï¼Œä¸ä½†æµªè´¹å†…å­˜ï¼Œè¿˜ä¼šå½±å“GCæ•ˆç‡</strong>ã€‚</p>
<p>â€‹
ä¸ºäº†èƒ½é«˜æ•ˆæ‹¼æ¥å­—ç¬¦ä¸²ï¼ŒJavaæ ‡å‡†åº“æä¾›äº†<code>StringBuilder</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯å˜å¯¹è±¡ï¼Œå¯ä»¥é¢„åˆ†é…ç¼“å†²åŒºï¼Œè¿™æ ·ï¼Œå¾€<code>StringBuilder</code>ä¸­æ–°å¢å­—ç¬¦æ—¶ï¼Œä¸ä¼šåˆ›å»ºæ–°çš„ä¸´æ—¶å¯¹è±¡ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="number">1024</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">    sb.append(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">    sb.append(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> sb.toString();</span><br></pre></td></tr></table></figure>
<p><strong>é“¾å¼æ“ä½œ</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">var</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="number">1024</span>);</span><br><span class="line">        sb.append(<span class="string">&quot;Mr &quot;</span>)</span><br><span class="line">          .append(<span class="string">&quot;Bob&quot;</span>)</span><br><span class="line">          .append(<span class="string">&quot;!&quot;</span>)</span><br><span class="line">          .insert(<span class="number">0</span>, <span class="string">&quot;Hello, &quot;</span>);</span><br><span class="line">        System.out.println(sb.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
<strong>è¿›è¡Œé“¾å¼æ“ä½œçš„å…³é”®æ˜¯ï¼šå®šä¹‰çš„<code>append()</code>æ–¹æ³•ä¼šè¿”å›<code>this</code>ï¼Œè¿™æ ·ï¼Œå°±å¯ä»¥ä¸æ–­è°ƒç”¨è‡ªèº«çš„å…¶ä»–æ–¹æ³•</strong></p>
<p><strong>æ³¨æ„</strong>ï¼šå¯¹äºæ™®é€šçš„å­—ç¬¦ä¸²<code>+</code>æ“ä½œï¼Œå¹¶ä¸éœ€è¦æˆ‘ä»¬å°†å…¶æ”¹å†™ä¸º<code>StringBuilder</code>ï¼Œå› ä¸ºJavaç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å°±è‡ªåŠ¨æŠŠå¤šä¸ªè¿ç»­çš„<code>+</code>æ“ä½œç¼–ç ä¸º<code>StringConcatFactory</code>çš„æ“ä½œã€‚åœ¨è¿è¡ŒæœŸï¼Œ<code>StringConcatFactory</code>ä¼šè‡ªåŠ¨æŠŠå­—ç¬¦ä¸²è¿æ¥æ“ä½œä¼˜åŒ–ä¸ºæ•°ç»„å¤åˆ¶æˆ–è€…<code>StringBuilder</code>æ“ä½œã€‚</p>
<h3 id="ä¸‰stringjoiner">ä¸‰ã€StringJoiner</h3>
<ul>
<li>Javaæ ‡å‡†åº“è¿˜æä¾›äº†ä¸€ä¸ª<code>StringJoiner</code>å¯ä»¥ç”¨äºä½¿ç”¨åˆ†éš”ç¬¦æ‹¼æ¥æ•°ç»„ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        String[] names = &#123;<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;Grace&quot;</span>&#125;;</span><br><span class="line">        <span class="comment">// var sj = new StringJoiner(&quot;, &quot;);  //case1 æŒ‡å®šåˆ†éš”ç¬¦ </span></span><br><span class="line">        <span class="type">var</span> <span class="variable">sj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringJoiner</span>(<span class="string">&quot;, &quot;</span>, <span class="string">&quot;Hello &quot;</span>, <span class="string">&quot;!&quot;</span>); <span class="comment">//case2 æŒ‡å®šå¼€å¤´å’Œç»“å°¾å­—ç¬¦</span></span><br><span class="line">        <span class="keyword">for</span> (String name : names) &#123;</span><br><span class="line">            sj.add(name);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(sj.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// case1 Bob, Alice, Grace </span></span><br><span class="line"><span class="comment">// case2 Hello Bob, Alice, Grace! </span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>String</code>è¿˜æä¾›äº†ä¸€ä¸ªé™æ€æ–¹æ³•<code>join()</code>ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨å†…éƒ¨ä½¿ç”¨äº†<code>StringJoiner</code>æ¥æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œåœ¨ä¸éœ€è¦æŒ‡å®šâ€œå¼€å¤´â€å’Œâ€œç»“å°¾â€çš„æ—¶å€™ï¼Œç”¨<code>String.join()</code>æ›´æ–¹ä¾¿ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">String[] names = &#123;<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;Grace&quot;</span>&#125;;</span><br><span class="line"><span class="type">var</span> <span class="variable">s</span> <span class="operator">=</span> String.join(<span class="string">&quot;, &quot;</span>, names);</span><br></pre></td></tr></table></figure>
<h3 id="å››åŒ…è£…ç±»å‹">å››ã€åŒ…è£…ç±»å‹</h3>
<h4 id="ä»€ä¹ˆæ˜¯åŒ…è£…ç±»å‹">1ã€ä»€ä¹ˆæ˜¯åŒ…è£…ç±»å‹ï¼Ÿ</h4>
<p>javaçš„æ•°æ®ç±»å‹åˆ†ä¸¤ç§ï¼š</p>
<ul>
<li>åŸºæœ¬ç±»å‹ï¼š<code>byte</code>ï¼Œ<code>short</code>ï¼Œ<code>int</code>ï¼Œ<code>long</code>ï¼Œ<code>boolean</code>ï¼Œ<code>float</code>ï¼Œ<code>double</code>ï¼Œ<code>char</code></li>
<li>å¼•ç”¨ç±»å‹ï¼šæ‰€æœ‰<code>class</code>å’Œ<code>interface</code>ç±»å‹</li>
</ul>
<p><strong>å¼•ç”¨ç±»å‹å¯ä»¥èµ‹å€¼ä¸º<code>null</code>ï¼Œè¡¨ç¤ºç©ºï¼Œä½†åŸºæœ¬ç±»å‹ä¸èƒ½èµ‹å€¼ä¸º<code>null</code></strong></p>
<p>å¦‚ä½•æŠŠä¸€ä¸ªåŸºæœ¬ç±»å‹è§†ä¸ºå¯¹è±¡ï¼ˆå¼•ç”¨ç±»å‹ï¼‰ï¼Ÿ</p>
<p>â€‹
æ¯”å¦‚ï¼Œæƒ³è¦æŠŠ<code>int</code>åŸºæœ¬ç±»å‹å˜æˆä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª<code>Integer</code>ç±»ï¼Œå®ƒåªåŒ…å«ä¸€ä¸ªå®ä¾‹å­—æ®µ<code>int</code>ï¼Œè¿™æ ·ï¼Œ<strong><code>Integer</code>ç±»å°±å¯ä»¥è§†ä¸º<code>int</code>çš„åŒ…è£…ç±»ï¼ˆWrapper
Classï¼‰</strong></p>
<p>å®é™…ä¸Šï¼Œå› ä¸ºåŒ…è£…ç±»å‹éå¸¸æœ‰ç”¨ï¼ŒJavaæ ¸å¿ƒåº“ä¸ºæ¯ç§åŸºæœ¬ç±»å‹éƒ½æä¾›äº†å¯¹åº”çš„åŒ…è£…ç±»å‹ï¼š</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">åŸºæœ¬ç±»å‹</th>
<th style="text-align: left;">å¯¹åº”çš„å¼•ç”¨ç±»å‹</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">boolean</td>
<td style="text-align: left;">java.lang.Boolean</td>
</tr>
<tr class="even">
<td style="text-align: left;">byte</td>
<td style="text-align: left;">java.lang.Byte</td>
</tr>
<tr class="odd">
<td style="text-align: left;">short</td>
<td style="text-align: left;">java.lang.Short</td>
</tr>
<tr class="even">
<td style="text-align: left;">int</td>
<td style="text-align: left;">java.lang.Integer</td>
</tr>
<tr class="odd">
<td style="text-align: left;">long</td>
<td style="text-align: left;">java.lang.Long</td>
</tr>
<tr class="even">
<td style="text-align: left;">float</td>
<td style="text-align: left;">java.lang.Float</td>
</tr>
<tr class="odd">
<td style="text-align: left;">double</td>
<td style="text-align: left;">java.lang.Double</td>
</tr>
<tr class="even">
<td style="text-align: left;">char</td>
<td style="text-align: left;">java.lang.Character</td>
</tr>
</tbody>
</table>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">        <span class="comment">// é€šè¿‡newæ“ä½œç¬¦åˆ›å»ºIntegerå®ä¾‹(ä¸æ¨èä½¿ç”¨,ä¼šæœ‰ç¼–è¯‘è­¦å‘Š):</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(i);</span><br><span class="line">        <span class="comment">// é€šè¿‡é™æ€æ–¹æ³•valueOf(int)åˆ›å»ºIntegerå®ä¾‹:</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">n2</span> <span class="operator">=</span> Integer.valueOf(i);</span><br><span class="line">        <span class="comment">// é€šè¿‡é™æ€æ–¹æ³•valueOf(String)åˆ›å»ºIntegerå®ä¾‹:</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">n3</span> <span class="operator">=</span> Integer.valueOf(<span class="string">&quot;100&quot;</span>);</span><br><span class="line">        System.out.println(n3.intValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="auto-boxing">2ã€Auto Boxing</h4>
<p>å› ä¸º<code>int</code>å’Œ<code>Integer</code>å¯ä»¥äº’ç›¸è½¬æ¢ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"><span class="type">Integer</span> <span class="variable">n</span> <span class="operator">=</span> Integer.valueOf(i);</span><br><span class="line"><span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> n.intValue();</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥ï¼ŒJavaç¼–è¯‘å™¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨åœ¨<code>int</code>å’Œ<code>Integer</code>ä¹‹é—´è½¬å‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Integer</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">100</span>; <span class="comment">// ç¼–è¯‘å™¨è‡ªåŠ¨ä½¿ç”¨Integer.valueOf(int)</span></span><br><span class="line"><span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> n; <span class="comment">// ç¼–è¯‘å™¨è‡ªåŠ¨ä½¿ç”¨Integer.intValue()</span></span><br></pre></td></tr></table></figure>
<p>â€‹
<strong>è¿™ç§ç›´æ¥æŠŠ<code>int</code>å˜ä¸º<code>Integer</code>çš„èµ‹å€¼å†™æ³•ï¼Œç§°ä¸ºè‡ªåŠ¨è£…ç®±ï¼ˆAuto
Boxingï¼‰ï¼Œåè¿‡æ¥ï¼ŒæŠŠ<code>Integer</code>å˜ä¸º<code>int</code>çš„èµ‹å€¼å†™æ³•ï¼Œç§°ä¸ºè‡ªåŠ¨æ‹†ç®±ï¼ˆAuto
Unboxingï¼‰ã€‚</strong></p>
<p>â€‹
æ³¨æ„ï¼š<strong>è‡ªåŠ¨è£…ç®±å’Œè‡ªåŠ¨æ‹†ç®±åªå‘ç”Ÿåœ¨ç¼–è¯‘é˜¶æ®µï¼Œç›®çš„æ˜¯ä¸ºäº†å°‘å†™ä»£ç </strong>ã€‚</p>
<p>è£…ç®±å’Œæ‹†ç®±ä¼šå½±å“ä»£ç çš„æ‰§è¡Œæ•ˆç‡ï¼Œå› ä¸ºç¼–è¯‘åçš„<code>class</code>ä»£ç æ˜¯ä¸¥æ ¼åŒºåˆ†åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„ã€‚å¹¶ä¸”ï¼Œè‡ªåŠ¨æ‹†ç®±æ‰§è¡Œæ—¶å¯èƒ½ä¼šæŠ¥<code>NullPointerException</code>ï¼š</p>
<h4 id="ä¸å˜ç±»">3ã€ä¸å˜ç±»</h4>
<p>â€‹
æ‰€æœ‰çš„åŒ…è£…ç±»å‹éƒ½æ˜¯ä¸å˜ç±»ï¼Œå› æ­¤ï¼Œä¸€æ—¦åˆ›å»ºäº†<code>Integer</code>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°±æ˜¯ä¸å˜çš„ã€‚</p>
<p>â€‹
å¯¹ä¸¤ä¸ª<code>Integer</code>å®ä¾‹è¿›è¡Œæ¯”è¾ƒè¦ç‰¹åˆ«æ³¨æ„ï¼šç»å¯¹ä¸èƒ½ç”¨<code>==</code>æ¯”è¾ƒï¼Œå› ä¸º<code>Integer</code>æ˜¯å¼•ç”¨ç±»å‹ï¼Œå¿…é¡»ä½¿ç”¨<code>equals()</code>æ¯”è¾ƒï¼š</p>
<h4 id="è¿›åˆ¶è½¬æ¢">4ã€è¿›åˆ¶è½¬æ¢ï¼š</h4>
<p><code>Integer</code>ç±»æœ¬èº«è¿˜æä¾›äº†å¤§é‡æ–¹æ³•ï¼Œä¾‹å¦‚ï¼Œæœ€å¸¸ç”¨çš„é™æ€æ–¹æ³•<code>parseInt()</code>å¯ä»¥æŠŠå­—ç¬¦ä¸²è§£ææˆä¸€ä¸ªæ•´æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">x1</span> <span class="operator">=</span> Integer.parseInt(<span class="string">&quot;100&quot;</span>); <span class="comment">// 100</span></span><br><span class="line"><span class="type">int</span> <span class="variable">x2</span> <span class="operator">=</span> Integer.parseInt(<span class="string">&quot;100&quot;</span>, <span class="number">16</span>); <span class="comment">// 256,å› ä¸ºæŒ‰16è¿›åˆ¶è§£æ</span></span><br></pre></td></tr></table></figure>
<p><code>Integer</code>è¿˜å¯ä»¥æŠŠæ•´æ•°æ ¼å¼åŒ–ä¸ºæŒ‡å®šè¿›åˆ¶çš„å­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(Integer.toString(<span class="number">100</span>)); <span class="comment">// &quot;100&quot;,è¡¨ç¤ºä¸º10è¿›åˆ¶</span></span><br><span class="line">        System.out.println(Integer.toString(<span class="number">100</span>, <span class="number">36</span>)); <span class="comment">// &quot;2s&quot;,è¡¨ç¤ºä¸º36è¿›åˆ¶</span></span><br><span class="line">        System.out.println(Integer.toHexString(<span class="number">100</span>)); <span class="comment">// &quot;64&quot;,è¡¨ç¤ºä¸º16è¿›åˆ¶</span></span><br><span class="line">        System.out.println(Integer.toOctalString(<span class="number">100</span>)); <span class="comment">// &quot;144&quot;,è¡¨ç¤ºä¸º8è¿›åˆ¶</span></span><br><span class="line">        System.out.println(Integer.toBinaryString(<span class="number">100</span>)); <span class="comment">// &quot;1100100&quot;,è¡¨ç¤ºä¸º2è¿›åˆ¶</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="äº”javabean">äº”ã€JavaBean</h3>
<p>åœ¨Javaä¸­ï¼Œæœ‰å¾ˆå¤š<code>class</code>çš„å®šä¹‰éƒ½ç¬¦åˆè¿™æ ·çš„è§„èŒƒï¼š</p>
<ul>
<li>è‹¥å¹²<code>private</code>å®ä¾‹å­—æ®µï¼›</li>
<li>é€šè¿‡<code>public</code>æ–¹æ³•æ¥è¯»å†™å®ä¾‹å­—æ®µã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123; <span class="keyword">return</span> <span class="built_in">this</span>.name; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123; <span class="built_in">this</span>.name = name; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123; <span class="keyword">return</span> <span class="built_in">this</span>.age; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123; <span class="built_in">this</span>.age = age; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¯»å†™æ–¹æ³•ç¬¦åˆä»¥ä¸‹è¿™ç§å‘½åè§„èŒƒ,
é‚£ä¹ˆè¿™ç§<code>class</code>è¢«ç§°ä¸º<code>JavaBean</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¯»æ–¹æ³•:</span></span><br><span class="line"><span class="keyword">public</span> Type <span class="title function_">getXyz</span><span class="params">()</span></span><br><span class="line"><span class="comment">// å†™æ–¹æ³•:</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setXyz</span><span class="params">(Type value)</span></span><br></pre></td></tr></table></figure>
<p>â€‹
ä¸Šé¢çš„å­—æ®µæ˜¯<code>xyz</code>ï¼Œé‚£ä¹ˆè¯»å†™æ–¹æ³•ååˆ†åˆ«ä»¥<code>get</code>å’Œ<code>set</code>å¼€å¤´ï¼Œå¹¶ä¸”åæ¥å¤§å†™å­—æ¯å¼€å¤´çš„å­—æ®µå<code>Xyz</code>ï¼Œå› æ­¤ä¸¤ä¸ªè¯»å†™æ–¹æ³•ååˆ†åˆ«æ˜¯<code>getXyz()</code>å’Œ<code>setXyz()</code>ã€‚</p>
<p><code>boolean</code>å­—æ®µæ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒçš„è¯»æ–¹æ³•ä¸€èˆ¬å‘½åä¸º<code>isXyz()</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¯»æ–¹æ³•:</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isChild</span><span class="params">()</span></span><br><span class="line"><span class="comment">// å†™æ–¹æ³•:</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setChild</span><span class="params">(<span class="type">boolean</span> value)</span></span><br></pre></td></tr></table></figure>
<p>â€‹
<strong>æˆ‘ä»¬é€šå¸¸æŠŠä¸€ç»„å¯¹åº”çš„è¯»æ–¹æ³•ï¼ˆ<code>getter</code>ï¼‰å’Œå†™æ–¹æ³•ï¼ˆ<code>setter</code>ï¼‰ç§°ä¸ºå±æ€§ï¼ˆ<code>property</code>ï¼‰ã€‚ä¾‹å¦‚ï¼Œ<code>name</code>å±æ€§</strong>ï¼š</p>
<ul>
<li>å¯¹åº”çš„è¯»æ–¹æ³•æ˜¯<code>String getName()</code></li>
<li>å¯¹åº”çš„å†™æ–¹æ³•æ˜¯<code>setName(String)</code></li>
</ul>
<p><strong>åªæœ‰<code>getter</code>çš„å±æ€§ç§°ä¸ºåªè¯»å±æ€§ï¼ˆread-onlyï¼‰</strong>ï¼Œä¾‹å¦‚ï¼Œå®šä¹‰ä¸€ä¸ªageåªè¯»å±æ€§ï¼š</p>
<ul>
<li>å¯¹åº”çš„è¯»æ–¹æ³•æ˜¯<code>int getAge()</code></li>
<li>æ— å¯¹åº”çš„å†™æ–¹æ³•<code>setAge(int)</code></li>
</ul>
<p>ç±»ä¼¼çš„ï¼Œåªæœ‰<code>setter</code>çš„å±æ€§ç§°ä¸ºåªå†™å±æ€§ï¼ˆwrite-onlyï¼‰ã€‚</p>
<h4 id="javabean-çš„ä½œç”¨">javabean çš„ä½œç”¨ï¼š</h4>
<p>â€‹
JavaBeanä¸»è¦ç”¨æ¥ä¼ é€’æ•°æ®ï¼Œå³æŠŠä¸€ç»„æ•°æ®ç»„åˆæˆä¸€ä¸ªJavaBeanä¾¿äºä¼ è¾“ã€‚æ­¤å¤–ï¼ŒJavaBeanå¯ä»¥æ–¹ä¾¿åœ°è¢«IDEå·¥å…·åˆ†æï¼Œç”Ÿæˆè¯»å†™å±æ€§çš„ä»£ç ï¼Œä¸»è¦ç”¨åœ¨å›¾å½¢ç•Œé¢çš„å¯è§†åŒ–è®¾è®¡ä¸­ã€‚</p>
<p>â€‹ é€šè¿‡IDEï¼Œå¯ä»¥å¿«é€Ÿç”Ÿæˆ<code>getter</code>å’Œ<code>setter</code></p>
<h4 id="å¦‚ä½•æšä¸¾javabeançš„æ‰€æœ‰å±æ€§">å¦‚ä½•æšä¸¾JavaBeançš„æ‰€æœ‰å±æ€§ï¼Ÿ</h4>
<p>è¦æšä¸¾ä¸€ä¸ªJavaBeançš„æ‰€æœ‰å±æ€§ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨Javaæ ¸å¿ƒåº“æä¾›çš„<code>Introspector</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">BeanInfo</span> <span class="variable">info</span> <span class="operator">=</span> Introspector.getBeanInfo(Person.class);</span><br><span class="line">        <span class="keyword">for</span> (PropertyDescriptor pd : info.getPropertyDescriptors()) &#123;</span><br><span class="line">            System.out.println(pd.getName());</span><br><span class="line">            System.out.println(<span class="string">&quot;  &quot;</span> + pd.getReadMethod());</span><br><span class="line">            System.out.println(<span class="string">&quot;  &quot;</span> + pd.getWriteMethod());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">age</span></span><br><span class="line"><span class="comment">  public int Person.getAge()</span></span><br><span class="line"><span class="comment">  public void Person.setAge(int)</span></span><br><span class="line"><span class="comment">class</span></span><br><span class="line"><span class="comment">  public final native java.lang.Class java.lang.Object.getClass()</span></span><br><span class="line"><span class="comment">  null</span></span><br><span class="line"><span class="comment">name</span></span><br><span class="line"><span class="comment">  public java.lang.String Person.getName()</span></span><br><span class="line"><span class="comment">  public void Person.setName(java.lang.String) </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="å…­æšä¸¾ç±»">å…­ã€æšä¸¾ç±»</h3>
<h4 id="ä¸ºä»€ä¹ˆéœ€è¦æšä¸¾ç±»">1ã€ä¸ºä»€ä¹ˆéœ€è¦æšä¸¾ç±»ï¼š</h4>
<p>â€‹
åœ¨Javaä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>static final</code>æ¥å®šä¹‰å¸¸é‡,ä½†æœ‰ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜å°±æ˜¯ï¼Œç¼–è¯‘å™¨æ— æ³•æ£€æŸ¥æ¯ä¸ªå€¼çš„åˆç†æ€§ã€‚æ¯”å¦‚è¯´ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Weekday</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">SUN</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MON</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">TUE</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">WED</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">THU</span> <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">FRI</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">SAT</span> <span class="operator">=</span> <span class="number">6</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>æ³¨æ„åˆ°<code>Weekday</code>å®šä¹‰çš„å¸¸é‡èŒƒå›´æ˜¯<code>0</code>~<code>6</code>ï¼Œå¹¶ä¸åŒ…å«<code>7</code>ï¼Œç¼–è¯‘å™¨æ— æ³•æ£€æŸ¥ä¸åœ¨æšä¸¾ä¸­çš„<code>int</code>å€¼ï¼›</p></li>
<li><p>å®šä¹‰çš„å¸¸é‡ä»å¯ä¸å…¶ä»–å˜é‡æ¯”è¾ƒï¼Œä½†å…¶ç”¨é€”å¹¶éæ˜¯æšä¸¾æ˜ŸæœŸ</p></li>
</ul>
<p>â€‹
ä¸ºäº†è®©ç¼–è¯‘å™¨èƒ½è‡ªåŠ¨æ£€æŸ¥æŸä¸ªå€¼åœ¨æšä¸¾çš„é›†åˆå†…ï¼Œå¹¶ä¸”ï¼Œä¸åŒç”¨é€”çš„æšä¸¾éœ€è¦ä¸åŒçš„ç±»å‹æ¥æ ‡è®°ï¼Œä¸èƒ½æ··ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>enum</code>æ¥å®šä¹‰æšä¸¾ç±»ï¼š</p>
<h4 id="å¦‚ä½•å®šä¹‰æšä¸¾ç±»">2ã€å¦‚ä½•å®šä¹‰æšä¸¾ç±»ï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Weekday</span> <span class="variable">day</span> <span class="operator">=</span> Weekday.SUN;</span><br><span class="line">        <span class="keyword">if</span> (day == Weekday.SAT || day == Weekday.SUN) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Work at home!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Work at office!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Weekday</span> &#123;</span><br><span class="line">    SUN, MON, TUE, WED, THU, FRI, SAT;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®šä¹‰æšä¸¾ç±»æ˜¯é€šè¿‡å…³é”®å­—<code>enum</code>å®ç°çš„ï¼Œæˆ‘ä»¬åªéœ€ä¾æ¬¡åˆ—å‡ºæšä¸¾çš„å¸¸é‡åã€‚</p>
<p>ä½¿ç”¨<code>enum</code>å®šä¹‰æšä¸¾æœ‰å¦‚ä¸‹å¥½å¤„ï¼š</p>
<ul>
<li><p>é¦–å…ˆï¼Œ<code>enum</code>å¸¸é‡æœ¬èº«å¸¦æœ‰ç±»å‹ä¿¡æ¯ï¼Œå³<code>Weekday.SUN</code>ç±»å‹æ˜¯<code>Weekday</code>ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ£€æŸ¥å‡ºç±»å‹é”™è¯¯ã€‚</p></li>
<li><p>å…¶æ¬¡ï¼Œä¸å¯èƒ½å¼•ç”¨åˆ°éæšä¸¾çš„å€¼ï¼Œå› ä¸ºæ— æ³•é€šè¿‡ç¼–è¯‘ã€‚</p></li>
<li><p>æœ€åï¼Œä¸åŒç±»å‹çš„æšä¸¾ä¸èƒ½äº’ç›¸æ¯”è¾ƒæˆ–è€…èµ‹å€¼ï¼Œå› ä¸ºç±»å‹ä¸ç¬¦ã€‚</p></li>
</ul>
<h4 id="enumçš„æ¯”è¾ƒ">3ã€enumçš„æ¯”è¾ƒï¼š</h4>
<p>â€‹
<code>enum</code>ç±»å‹çš„æ¯ä¸ªå¸¸é‡åœ¨JVMä¸­åªæœ‰ä¸€ä¸ªå”¯ä¸€å®ä¾‹ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ç”¨<code>==</code>æ¯”è¾ƒ</p>
<h4 id="enumç±»å‹">4ã€enumç±»å‹ï¼š</h4>
<p>é€šè¿‡<code>enum</code>å®šä¹‰çš„æšä¸¾ç±»ï¼Œå’Œå…¶ä»–çš„<code>class</code>æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚</p>
<p><code>enum</code>å®šä¹‰çš„ç±»å‹å°±æ˜¯<code>class</code>ï¼Œåªä¸è¿‡å®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li><p>å®šä¹‰çš„<code>enum</code>ç±»å‹æ€»æ˜¯ç»§æ‰¿è‡ª<code>java.lang.Enum</code>ï¼Œä¸”æ— æ³•è¢«ç»§æ‰¿ï¼›</p></li>
<li><p>åªèƒ½å®šä¹‰å‡º<code>enum</code>çš„å®ä¾‹ï¼Œè€Œæ— æ³•é€šè¿‡<code>new</code>æ“ä½œç¬¦åˆ›å»º<code>enum</code>çš„å®ä¾‹ï¼›</p></li>
<li><p>å®šä¹‰çš„æ¯ä¸ªå®ä¾‹éƒ½æ˜¯å¼•ç”¨ç±»å‹çš„å”¯ä¸€å®ä¾‹ï¼›</p></li>
<li><p>å¯ä»¥å°†<code>enum</code>ç±»å‹ç”¨äº<code>switch</code>è¯­å¥ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å®šä¹‰çš„<code>Color</code>æšä¸¾ç±»ï¼š</p></li>
</ul>
<h4 id="enumç¤ºä¾‹">5ã€Enumç¤ºä¾‹ï¼š</h4>
<p>å¦‚ä¸‹æ‰€ç¤ºå®šä¹‰çš„enum:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Color</span> &#123;</span><br><span class="line">    RED, GREEN, BLUE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆç¼–è¯‘å™¨ç¼–è¯‘å‡ºçš„<code>class</code>å¤§æ¦‚å°±åƒè¿™æ ·ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Color</span> <span class="keyword">extends</span> <span class="title class_">Enum</span> &#123; <span class="comment">// ç»§æ‰¿è‡ªEnumï¼Œæ ‡è®°ä¸ºfinal class</span></span><br><span class="line">    <span class="comment">// æ¯ä¸ªå®ä¾‹å‡ä¸ºå…¨å±€å”¯ä¸€:</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Color</span> <span class="variable">RED</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Color</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Color</span> <span class="variable">GREEN</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Color</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Color</span> <span class="variable">BLUE</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Color</span>();</span><br><span class="line">    <span class="comment">// privateæ„é€ æ–¹æ³•ï¼Œç¡®ä¿å¤–éƒ¨æ— æ³•è°ƒç”¨newæ“ä½œç¬¦:</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Color</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥ï¼Œç¼–è¯‘åçš„<code>enum</code>ç±»å’Œæ™®é€š<code>class</code>å¹¶æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚ä½†æ˜¯æˆ‘ä»¬è‡ªå·±æ— æ³•æŒ‰å®šä¹‰æ™®é€š<code>class</code>é‚£æ ·æ¥å®šä¹‰<code>enum</code>ï¼Œå¿…é¡»ä½¿ç”¨<code>enum</code>å…³é”®å­—ï¼Œè¿™æ˜¯Javaè¯­æ³•è§„å®šçš„ã€‚</p>
<p>å› ä¸º<strong><code>enum</code>æ˜¯ä¸€ä¸ª<code>class</code>ï¼Œæ¯ä¸ªæšä¸¾çš„å€¼éƒ½æ˜¯<code>class</code>å®ä¾‹</strong>ï¼Œå› æ­¤ï¼Œè¿™äº›å®ä¾‹æœ‰ä¸€äº›æ–¹æ³•ï¼š</p>
<ul>
<li>name()</li>
</ul>
<p>è¿”å›å¸¸é‡åï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> Weekday.SUN.name(); <span class="comment">// &quot;SUN&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ordinal()</li>
</ul>
<p>è¿”å›å®šä¹‰çš„å¸¸é‡çš„é¡ºåºï¼Œä»0å¼€å§‹è®¡æ•°ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> Weekday.MON.ordinal(); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>æ”¹å˜æšä¸¾å¸¸é‡å®šä¹‰çš„é¡ºåºå°±ä¼šå¯¼è‡´<code>ordinal()</code>è¿”å›å€¼å‘ç”Ÿå˜åŒ–ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Weekday</span> &#123;</span><br><span class="line">    SUN, MON, TUE, WED, THU, FRI, SAT;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å’Œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Weekday</span> &#123;</span><br><span class="line">    MON, TUE, WED, THU, FRI, SAT, SUN;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
çš„<code>ordinal</code>å°±æ˜¯ä¸åŒçš„ã€‚å¦‚æœåœ¨ä»£ç ä¸­ç¼–å†™äº†ç±»ä¼¼<code>if(x.ordinal()==1)</code>è¿™æ ·çš„è¯­å¥ï¼Œå°±è¦ä¿è¯<code>enum</code>çš„æšä¸¾é¡ºåºä¸èƒ½å˜ã€‚æ–°å¢çš„å¸¸é‡å¿…é¡»æ”¾åœ¨æœ€åã€‚</p>
<h4 id="ä¹¦å†™å¥å£®çš„enumä»£ç ">6ã€ä¹¦å†™å¥å£®çš„Enumä»£ç </h4>
<p><code>Weekday</code>çš„æšä¸¾å¸¸é‡å¦‚æœè¦å’Œ<code>int</code>è½¬æ¢ï¼Œä½¿ç”¨<code>ordinal()</code>ä¸æ˜¯éå¸¸æ–¹ä¾¿,
æ¯”å¦‚è¿™æ ·å†™ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">task</span> <span class="operator">=</span> Weekday.MON.ordinal() + <span class="string">&quot;/ppt&quot;</span>;</span><br><span class="line">saveToFile(task);</span><br></pre></td></tr></table></figure>
<p>â€‹
ä½†æ˜¯ï¼Œå¦‚æœä¸å°å¿ƒä¿®æ”¹äº†æšä¸¾çš„é¡ºåºï¼Œç¼–è¯‘å™¨æ˜¯æ— æ³•æ£€æŸ¥å‡ºè¿™ç§é€»è¾‘é”™è¯¯çš„ã€‚<strong>è¦ç¼–å†™å¥å£®çš„ä»£ç ï¼Œå°±ä¸è¦ä¾é <code>ordinal()</code>çš„è¿”å›å€¼ã€‚</strong>
<strong>å› ä¸º<code>enum</code>æœ¬èº«æ˜¯<code>class</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å®šä¹‰<code>private</code>çš„æ„é€ æ–¹æ³•ï¼Œå¹¶ä¸”ï¼Œç»™æ¯ä¸ªæšä¸¾å¸¸é‡æ·»åŠ å­—æ®µï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Weekday</span> <span class="variable">day</span> <span class="operator">=</span> Weekday.SUN;</span><br><span class="line">        <span class="keyword">if</span> (day.dayValue == <span class="number">6</span> || day.dayValue == <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Work at home!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Work at office!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Weekday</span> &#123;</span><br><span class="line">    MON(<span class="number">1</span>), TUE(<span class="number">2</span>), WED(<span class="number">3</span>), THU(<span class="number">4</span>), FRI(<span class="number">5</span>), SAT(<span class="number">6</span>), SUN(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> dayValue;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Weekday</span><span class="params">(<span class="type">int</span> dayValue)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dayValue = dayValue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±æ— éœ€æ‹…å¿ƒé¡ºåºçš„å˜åŒ–ï¼Œæ–°å¢æšä¸¾å¸¸é‡æ—¶ï¼Œä¹Ÿéœ€è¦æŒ‡å®šä¸€ä¸ª<code>int</code>å€¼ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯¹æšä¸¾å¸¸é‡è°ƒç”¨<code>toString()</code>ä¼šè¿”å›å’Œ<code>name()</code>ä¸€æ ·çš„å­—ç¬¦ä¸²ã€‚ä½†æ˜¯ï¼Œ<code>toString()</code>å¯ä»¥è¢«è¦†å†™ï¼Œè€Œ<code>name()</code>åˆ™ä¸è¡Œã€‚æˆ‘ä»¬å¯ä»¥ç»™<code>Weekday</code>æ·»åŠ <code>toString()</code>æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Weekday</span> &#123;</span><br><span class="line">    MON(<span class="number">1</span>, <span class="string">&quot;æ˜ŸæœŸä¸€&quot;</span>), TUE(<span class="number">2</span>, <span class="string">&quot;æ˜ŸæœŸäºŒ&quot;</span>), WED(<span class="number">3</span>, <span class="string">&quot;æ˜ŸæœŸä¸‰&quot;</span>), THU(<span class="number">4</span>, <span class="string">&quot;æ˜ŸæœŸå››&quot;</span>), FRI(<span class="number">5</span>, <span class="string">&quot;æ˜ŸæœŸäº”&quot;</span>), SAT(<span class="number">6</span>, <span class="string">&quot;æ˜ŸæœŸå…­&quot;</span>), SUN(<span class="number">0</span>, <span class="string">&quot;æ˜ŸæœŸæ—¥&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> dayValue;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String chinese;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Weekday</span><span class="params">(<span class="type">int</span> dayValue, String chinese)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dayValue = dayValue;</span><br><span class="line">        <span class="built_in">this</span>.chinese = chinese;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.chinese;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4
id="enumé€‚åˆç”¨åœ¨switchè¯­å¥ä¸­">7ã€<code>enum</code>é€‚åˆç”¨åœ¨<code>switch</code>è¯­å¥ä¸­</h4>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Weekday</span> <span class="variable">day</span> <span class="operator">=</span> Weekday.SUN;</span><br><span class="line">        <span class="keyword">switch</span>(day) &#123;</span><br><span class="line">        <span class="keyword">case</span> MON:</span><br><span class="line">        <span class="keyword">case</span> TUE:</span><br><span class="line">        <span class="keyword">case</span> WED:</span><br><span class="line">        <span class="keyword">case</span> THU:</span><br><span class="line">        <span class="keyword">case</span> FRI:</span><br><span class="line">            System.out.println(<span class="string">&quot;Today is &quot;</span> + day + <span class="string">&quot;. Work at office!&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> SAT:</span><br><span class="line">        <span class="keyword">case</span> SUN:</span><br><span class="line">            System.out.println(<span class="string">&quot;Today is &quot;</span> + day + <span class="string">&quot;. Work at home!&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;cannot process &quot;</span> + day);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Weekday</span> &#123;</span><br><span class="line">    MON, TUE, WED, THU, FRI, SAT, SUN;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="ä¸ƒè®°å½•ç±»">ä¸ƒã€è®°å½•ç±»</h3>
<h4 id="ä»¥å¾€ç±»çš„ç¹çä¹‹å¤„">1ã€ä»¥å¾€ç±»çš„ç¹çä¹‹å¤„ï¼š</h4>
<p>ä½¿ç”¨<code>String</code>ã€<code>Integer</code>ç­‰ç±»å‹çš„æ—¶å€™ï¼Œè¿™äº›ç±»å‹éƒ½æ˜¯ä¸å˜ç±»ï¼Œä¸€ä¸ªä¸å˜ç±»å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ol type="1">
<li>å®šä¹‰classæ—¶ä½¿ç”¨<code>final</code>ï¼Œæ— æ³•æ´¾ç”Ÿå­ç±»ï¼›</li>
<li>æ¯ä¸ªå­—æ®µä½¿ç”¨<code>final</code>ï¼Œä¿è¯åˆ›å»ºå®ä¾‹åæ— æ³•ä¿®æ”¹ä»»ä½•å­—æ®µã€‚</li>
</ol>
<p>å‡è®¾æˆ‘ä»¬å¸Œæœ›å®šä¹‰ä¸€ä¸ª<code>Point</code>ç±»ï¼Œæœ‰<code>x</code>ã€<code>y</code>ä¸¤ä¸ªå˜é‡ï¼ŒåŒæ—¶å®ƒæ˜¯ä¸€ä¸ªä¸å˜ç±»ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> y;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Point</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.x = x;</span><br><span class="line">        <span class="built_in">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">x</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">y</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæ¼”ç¤º<code>Point</code>ä¸å˜ç±»çš„å†™æ³•ç›®çš„æ˜¯ï¼Œè¿™äº›ä»£ç å†™èµ·æ¥éƒ½éå¸¸ç®€å•ï¼Œä½†æ˜¯å¾ˆç¹çã€‚</p>
<h4 id="record-è®°å½•ç±»">2ã€record è®°å½•ç±»:</h4>
<p>â€‹ ä»Java
14å¼€å§‹ï¼Œå¼•å…¥äº†æ–°çš„<code>Record</code>ç±»ã€‚æˆ‘ä»¬å®šä¹‰<code>Record</code>ç±»æ—¶ï¼Œä½¿ç”¨å…³é”®å­—<code>record</code>ã€‚æŠŠä¸Šè¿°<code>Point</code>ç±»æ”¹å†™ä¸º<code>Record</code>ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Point</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Point</span>(<span class="number">123</span>, <span class="number">456</span>);</span><br><span class="line">        System.out.println(p.x());</span><br><span class="line">        System.out.println(p.y());</span><br><span class="line">        System.out.println(p);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">record</span> <span class="title class_">Point</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¦æŠŠä¸Šè¿°å®šä¹‰ï¼Œä»¥classçš„å½¢å¼æ”¹å†™ä»£ç çš„è¯ï¼Œåº”å½“å¦‚ä¸‹æ‰€ç¤ºï¼šï¼ˆå…¶å®ä¹Ÿå°±æ˜¯ç¼–è¯‘å™¨ä¼šå¸®æˆ‘ä»¬ç¼–è¯‘æˆå¦‚ä¸‹çš„ä»£ç ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">public final class Point extends Record &#123;</span><br><span class="line">    private final int x;</span><br><span class="line">    private final int y;</span><br><span class="line"></span><br><span class="line">    public Point(int x, int y) &#123;</span><br><span class="line">        this.x = x;</span><br><span class="line">        this.y = y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int x() &#123;</span><br><span class="line">        return this.x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int y() &#123;</span><br><span class="line">        return this.y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return String.format(&quot;Point[x=%s, y=%s]&quot;, x, y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public boolean equals(Object o) &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    public int hashCode() &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹
é™¤äº†ç”¨<code>final</code>ä¿®é¥°classä»¥åŠæ¯ä¸ªå­—æ®µå¤–ï¼Œç¼–è¯‘å™¨è¿˜è‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºäº†æ„é€ æ–¹æ³•ï¼Œå’Œå­—æ®µååŒåçš„æ–¹æ³•ï¼Œä»¥åŠè¦†å†™<code>toString()</code>ã€<code>equals()</code>å’Œ<code>hashCode()</code>æ–¹æ³•ã€‚</p>
<p>â€‹
<strong>æ¢å¥è¯è¯´ï¼Œä½¿ç”¨<code>record</code>å…³é”®å­—ï¼Œå¯ä»¥ä¸€è¡Œå†™å‡ºä¸€ä¸ªä¸å˜ç±»ã€‚</strong></p>
<p>â€‹
<strong>å’Œ<code>enum</code>ç±»ä¼¼ï¼Œæˆ‘ä»¬è‡ªå·±ä¸èƒ½ç›´æ¥ä»<code>Record</code>æ´¾ç”Ÿï¼Œåªèƒ½é€šè¿‡<code>record</code>å…³é”®å­—ç”±ç¼–è¯‘å™¨å®ç°ç»§æ‰¿ã€‚</strong></p>
<h4 id="æ„é€ æ–¹æ³•">3ã€æ„é€ æ–¹æ³•ï¼š</h4>
<p>â€‹
ç¼–è¯‘å™¨é»˜è®¤æŒ‰ç…§<code>record</code>å£°æ˜çš„å˜é‡é¡ºåºè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œå¹¶åœ¨æ–¹æ³•å†…ç»™å­—æ®µèµ‹å€¼ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœæˆ‘ä»¬è¦æ£€æŸ¥å‚æ•°ï¼Œåº”è¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<p>â€‹
<strong>å‡è®¾<code>Point</code>ç±»çš„<code>x</code>ã€<code>y</code>ä¸å…è®¸è´Ÿæ•°ï¼Œæˆ‘ä»¬å°±å¾—ç»™<code>Point</code>çš„æ„é€ æ–¹æ³•åŠ ä¸Šæ£€æŸ¥é€»è¾‘ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">record</span> <span class="title class_">Point</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Point &#123;</span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span> || y &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>â€‹ æ³¨æ„åˆ°æ–¹æ³•<code>public Point &#123;...&#125;</code>è¢«ç§°ä¸ºCompact
Constructorï¼Œå®ƒçš„ç›®çš„æ˜¯è®©æˆ‘ä»¬ç¼–å†™æ£€æŸ¥é€»è¾‘ï¼Œ<strong>ç¼–è¯‘å™¨æœ€ç»ˆç”Ÿæˆçš„æ„é€ æ–¹æ³•å¦‚ä¸‹ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Point</span> <span class="keyword">extends</span> <span class="title class_">Record</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Point</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="comment">// è¿™æ˜¯æˆ‘ä»¬ç¼–å†™çš„Compact Constructor:</span></span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span> || y &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è¿™æ˜¯ç¼–è¯‘å™¨ç»§ç»­ç”Ÿæˆçš„èµ‹å€¼ä»£ç :</span></span><br><span class="line">        <span class="built_in">this</span>.x = x;</span><br><span class="line">        <span class="built_in">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½œä¸º<code>record</code>çš„<code>Point</code>ä»ç„¶å¯ä»¥æ·»åŠ é™æ€æ–¹æ³•ã€‚ä¸€ç§å¸¸ç”¨çš„é™æ€æ–¹æ³•æ˜¯<code>of()</code>æ–¹æ³•ï¼Œç”¨æ¥åˆ›å»º<code>Point</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">record</span> <span class="title class_">Point</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Point <span class="title function_">of</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Point</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Point <span class="title function_">of</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Point</span>(x, y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·æˆ‘ä»¬å¯ä»¥å†™å‡ºæ›´ç®€æ´çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">z</span> <span class="operator">=</span> Point.of();</span><br><span class="line"><span class="type">var</span> <span class="variable">p</span> <span class="operator">=</span> Point.of(<span class="number">123</span>, <span class="number">456</span>);</span><br></pre></td></tr></table></figure>
<h4 id="æ€»ç»“">4ã€æ€»ç»“ï¼š</h4>
<p>ä»Java
14å¼€å§‹ï¼Œæä¾›æ–°çš„<code>record</code>å…³é”®å­—ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®šä¹‰Data
Classï¼š</p>
<ul>
<li>ä½¿ç”¨<code>record</code>å®šä¹‰çš„æ˜¯ä¸å˜ç±»ï¼›</li>
<li>å¯ä»¥ç¼–å†™Compact Constructorå¯¹å‚æ•°è¿›è¡ŒéªŒè¯ï¼›</li>
<li>å¯ä»¥å®šä¹‰é™æ€æ–¹æ³•ã€‚</li>
</ul>
<h3 id="å…«biginteger">å…«ã€BigInteger</h3>
<p>â€‹
åœ¨Javaä¸­ï¼Œç”±CPUåŸç”Ÿæä¾›çš„æ•´å‹æœ€å¤§èŒƒå›´æ˜¯64ä½<code>long</code>å‹æ•´æ•°ã€‚<strong>ä½¿ç”¨<code>long</code>å‹æ•´æ•°å¯ä»¥ç›´æ¥é€šè¿‡CPUæŒ‡ä»¤è¿›è¡Œè®¡ç®—ï¼Œé€Ÿåº¦éå¸¸å¿«</strong></p>
<p>â€‹
å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ•´æ•°èŒƒå›´è¶…è¿‡äº†<code>long</code>å‹ï¼Œå°±åªèƒ½ç”¨è½¯ä»¶æ¥æ¨¡æ‹Ÿä¸€ä¸ªå¤§æ•´æ•°ã€‚<code>java.math.BigInteger</code>å°±æ˜¯ç”¨æ¥è¡¨ç¤ºä»»æ„å¤§å°çš„æ•´æ•°ã€‚<code>BigInteger</code>å†…éƒ¨ç”¨ä¸€ä¸ª<code>int[]</code>æ•°ç»„æ¥æ¨¡æ‹Ÿä¸€ä¸ªéå¸¸å¤§çš„æ•´æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">BigInteger</span> <span class="variable">bi</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;1234567890&quot;</span>);</span><br><span class="line">System.out.println(bi.pow(<span class="number">5</span>)); <span class="comment">// 2867971860299718107233761438093672048294900000</span></span><br></pre></td></tr></table></figure>
<p>å¯¹<code>BigInteger</code>åšè¿ç®—çš„æ—¶å€™ï¼Œåªèƒ½ä½¿ç”¨å®ä¾‹æ–¹æ³•ï¼Œä¾‹å¦‚ï¼ŒåŠ æ³•è¿ç®—ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">BigInteger</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;1234567890&quot;</span>);</span><br><span class="line"><span class="type">BigInteger</span> <span class="variable">i2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;12345678901234567890&quot;</span>);</span><br><span class="line"><span class="type">BigInteger</span> <span class="variable">sum</span> <span class="operator">=</span> i1.add(i2); <span class="comment">// 12345678902469135780</span></span><br></pre></td></tr></table></figure>
<p><code>BigInteger</code>å’Œ<code>Integer</code>ã€<code>Long</code>ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸å¯å˜ç±»ï¼Œå¹¶ä¸”ä¹Ÿç»§æ‰¿è‡ª<code>Number</code>ç±»ã€‚å› ä¸º<code>Number</code>å®šä¹‰äº†è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹çš„å‡ ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li>è½¬æ¢ä¸º<code>byte</code>ï¼š<code>byteValue()</code></li>
<li>è½¬æ¢ä¸º<code>short</code>ï¼š<code>shortValue()</code></li>
<li>è½¬æ¢ä¸º<code>int</code>ï¼š<code>intValue()</code></li>
<li>è½¬æ¢ä¸º<code>long</code>ï¼š<code>longValue()</code></li>
<li>è½¬æ¢ä¸º<code>float</code>ï¼š<code>floatValue()</code></li>
<li>è½¬æ¢ä¸º<code>double</code>ï¼š<code>doubleValue()</code></li>
</ul>
<p>â€‹
å› æ­¤ï¼Œé€šè¿‡ä¸Šè¿°æ–¹æ³•ï¼Œå¯ä»¥æŠŠ<code>BigInteger</code>è½¬æ¢æˆåŸºæœ¬ç±»å‹ã€‚å¦‚æœ<code>BigInteger</code>è¡¨ç¤ºçš„èŒƒå›´è¶…è¿‡äº†åŸºæœ¬ç±»å‹çš„èŒƒå›´ï¼Œè½¬æ¢æ—¶å°†ä¸¢å¤±é«˜ä½ä¿¡æ¯ï¼Œå³ç»“æœä¸ä¸€å®šæ˜¯å‡†ç¡®çš„ã€‚å¦‚æœéœ€è¦å‡†ç¡®åœ°è½¬æ¢æˆåŸºæœ¬ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨<code>intValueExact()</code>ã€<code>longValueExact()</code>ç­‰æ–¹æ³•ï¼Œåœ¨è½¬æ¢æ—¶å¦‚æœè¶…å‡ºèŒƒå›´ï¼Œå°†ç›´æ¥æŠ›å‡º<code>ArithmeticException</code>å¼‚å¸¸ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">BigInteger</span> <span class="variable">i</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;123456789000&quot;</span>);</span><br><span class="line">System.out.println(i.longValue()); <span class="comment">// 123456789000</span></span><br><span class="line">System.out.println(i.multiply(i).longValueExact()); <span class="comment">// java.lang.ArithmeticException: BigInteger out of long range</span></span><br></pre></td></tr></table></figure>
<p>â€‹
ä½¿ç”¨<code>longValueExact()</code>æ–¹æ³•æ—¶ï¼Œå¦‚æœè¶…å‡ºäº†<code>long</code>å‹çš„èŒƒå›´ï¼Œä¼šæŠ›å‡º<code>ArithmeticException</code>ã€‚</p>
<h3 id="ä¹bigdecimal">ä¹ã€BigDecimal</h3>
<h4 id="bigdecimalç®€ä»‹">1ã€BigDecimalç®€ä»‹</h4>
<p>å’Œ<code>BigInteger</code>ç±»ä¼¼ï¼Œ<code>BigDecimal</code>å¯ä»¥è¡¨ç¤º<strong>ä¸€ä¸ªä»»æ„å¤§å°ä¸”ç²¾åº¦å®Œå…¨å‡†ç¡®</strong>çš„æµ®ç‚¹æ•°ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">BigDecimal</span> <span class="variable">bd</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;123.4567&quot;</span>);</span><br><span class="line">System.out.println(bd.multiply(bd)); <span class="comment">// 15241.55677489</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>BigDecimal</code>ç”¨<code>scale()</code>è¾“å‡ºå°æ•°ä½æ•°ï¼Œä¾‹å¦‚ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">BigDecimal</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;123.45&quot;</span>);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">d2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;123.4500&quot;</span>);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">d3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;1234500&quot;</span>);</span><br><span class="line">System.out.println(d1.scale()); <span class="comment">// 2,ä¸¤ä½å°æ•°</span></span><br><span class="line">System.out.println(d2.scale()); <span class="comment">// 4</span></span><br><span class="line">System.out.println(d3.scale()); <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>
<ul>
<li>é€šè¿‡<code>BigDecimal</code>çš„<code>stripTrailingZeros()</code>æ–¹æ³•ï¼Œå¯ä»¥å°†ä¸€ä¸ª<code>BigDecimal</code>æ ¼å¼åŒ–ä¸ºä¸€ä¸ªç›¸ç­‰çš„ï¼Œä½†å»æ‰äº†æœ«å°¾0çš„<code>BigDecimal</code>ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">BigDecimal</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;123.4500&quot;</span>);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">d2</span> <span class="operator">=</span> d1.stripTrailingZeros();</span><br><span class="line">System.out.println(d1.scale()); <span class="comment">// 4</span></span><br><span class="line">System.out.println(d2.scale()); <span class="comment">// 2,å› ä¸ºå»æ‰äº†00</span></span><br><span class="line"></span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">d3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;1234500&quot;</span>);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">d4</span> <span class="operator">=</span> d3.stripTrailingZeros();</span><br><span class="line">System.out.println(d3.scale()); <span class="comment">// 0</span></span><br><span class="line">System.out.println(d4.scale()); <span class="comment">// -2</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>å¦‚æœä¸€ä¸ª<code>BigDecimal</code>çš„<code>scale()</code>è¿”å›è´Ÿæ•°ï¼Œä¾‹å¦‚ï¼Œ<code>-2</code>ï¼Œè¡¨ç¤ºè¿™ä¸ªæ•°æ˜¯ä¸ªæ•´æ•°ï¼Œå¹¶ä¸”æœ«å°¾æœ‰2ä¸ª0ã€‚</p></li>
<li><p>å¯ä»¥å¯¹ä¸€ä¸ª<code>BigDecimal</code>è®¾ç½®å®ƒçš„<code>scale</code>ï¼Œå¦‚æœç²¾åº¦æ¯”åŸå§‹å€¼ä½ï¼Œé‚£ä¹ˆæŒ‰ç…§æŒ‡å®šçš„æ–¹æ³•è¿›è¡Œå››èˆäº”å…¥æˆ–è€…ç›´æ¥æˆªæ–­ï¼š</p></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;123.456789&quot;</span>);</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">d2</span> <span class="operator">=</span> d1.setScale(<span class="number">4</span>, RoundingMode.HALF_UP); <span class="comment">// å››èˆäº”å…¥ï¼Œ123.4568</span></span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">d3</span> <span class="operator">=</span> d1.setScale(<span class="number">4</span>, RoundingMode.DOWN); <span class="comment">// ç›´æ¥æˆªæ–­ï¼Œ123.4567</span></span><br><span class="line">        System.out.println(d2);</span><br><span class="line">        System.out.println(d3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹<code>BigDecimal</code>åšåŠ ã€å‡ã€ä¹˜æ—¶ï¼Œç²¾åº¦ä¸ä¼šä¸¢å¤±ï¼Œä½†æ˜¯åšé™¤æ³•æ—¶ï¼Œå­˜åœ¨æ— æ³•é™¤å°½çš„æƒ…å†µï¼Œè¿™æ—¶ï¼Œå°±å¿…é¡»æŒ‡å®šç²¾åº¦ä»¥åŠå¦‚ä½•è¿›è¡Œæˆªæ–­ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">BigDecimal</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;123.456&quot;</span>);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">d2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;23.456789&quot;</span>);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">d3</span> <span class="operator">=</span> d1.divide(d2, <span class="number">10</span>, RoundingMode.HALF_UP); <span class="comment">// ä¿ç•™10ä½å°æ•°å¹¶å››èˆäº”å…¥</span></span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">d4</span> <span class="operator">=</span> d1.divide(d2); <span class="comment">// æŠ¥é”™ï¼šArithmeticExceptionï¼Œå› ä¸ºé™¤ä¸å°½</span></span><br></pre></td></tr></table></figure>
<p>è¿˜å¯ä»¥å¯¹<code>BigDecimal</code>åšé™¤æ³•çš„åŒæ—¶æ±‚ä½™æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">n</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;12.345&quot;</span>);</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">m</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.12&quot;</span>);</span><br><span class="line">        BigDecimal[] dr = n.divideAndRemainder(m);</span><br><span class="line">        System.out.println(dr[<span class="number">0</span>]); <span class="comment">// 102</span></span><br><span class="line">        System.out.println(dr[<span class="number">1</span>]); <span class="comment">// 0.105</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨<code>divideAndRemainder()</code>æ–¹æ³•æ—¶ï¼Œè¿”å›çš„æ•°ç»„åŒ…å«ä¸¤ä¸ª<code>BigDecimal</code>ï¼Œåˆ†åˆ«æ˜¯å•†å’Œä½™æ•°ï¼Œå…¶ä¸­å•†æ€»æ˜¯æ•´æ•°ï¼Œä½™æ•°ä¸ä¼šå¤§äºé™¤æ•°ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ–¹æ³•åˆ¤æ–­ä¸¤ä¸ª<code>BigDecimal</code>æ˜¯å¦æ˜¯æ•´æ•°å€æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">BigDecimal</span> <span class="variable">n</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;12.75&quot;</span>);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">m</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;0.15&quot;</span>);</span><br><span class="line">BigDecimal[] dr = n.divideAndRemainder(m);</span><br><span class="line"><span class="keyword">if</span> (dr[<span class="number">1</span>].signum() == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// næ˜¯mçš„æ•´æ•°å€</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ¯”è¾ƒbigdecimal">2ã€æ¯”è¾ƒBigDecimal</h4>
<p>åœ¨æ¯”è¾ƒä¸¤ä¸ª<code>BigDecimal</code>çš„å€¼æ˜¯å¦ç›¸ç­‰æ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„ï¼Œä½¿ç”¨<code>equals()</code>æ–¹æ³•ä¸ä½†è¦æ±‚ä¸¤ä¸ª<code>BigDecimal</code>çš„å€¼ç›¸ç­‰ï¼Œè¿˜è¦æ±‚å®ƒä»¬çš„<code>scale()</code>ç›¸ç­‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">BigDecimal</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;123.456&quot;</span>);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">d2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;123.45600&quot;</span>);</span><br><span class="line">System.out.println(d1.equals(d2)); <span class="comment">// false,å› ä¸ºscaleä¸åŒ</span></span><br><span class="line">System.out.println(d1.equals(d2.stripTrailingZeros())); <span class="comment">// true,å› ä¸ºd2å»é™¤å°¾éƒ¨0åscaleå˜ä¸º2</span></span><br><span class="line">System.out.println(d1.compareTo(d2)); <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>
<p>å¿…é¡»ä½¿ç”¨<code>compareTo()</code>æ–¹æ³•æ¥æ¯”è¾ƒï¼Œå®ƒæ ¹æ®ä¸¤ä¸ªå€¼çš„å¤§å°åˆ†åˆ«è¿”å›è´Ÿæ•°ã€æ­£æ•°å’Œ<code>0</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºå°äºã€å¤§äºå’Œç­‰äºã€‚</p>
<p>æ€»æ˜¯ä½¿ç”¨compareTo()æ¯”è¾ƒä¸¤ä¸ªBigDecimalçš„å€¼ï¼Œä¸è¦ä½¿ç”¨equals()ï¼</p>
<p>å¦‚æœæŸ¥çœ‹<code>BigDecimal</code>çš„æºç ï¼Œå¯ä»¥å‘ç°ï¼Œå®é™…ä¸Šä¸€ä¸ª<code>BigDecimal</code>æ˜¯é€šè¿‡ä¸€ä¸ª<code>BigInteger</code>å’Œä¸€ä¸ª<code>scale</code>æ¥è¡¨ç¤ºçš„ï¼Œå³<code>BigInteger</code>è¡¨ç¤ºä¸€ä¸ªå®Œæ•´çš„æ•´æ•°ï¼Œè€Œ<code>scale</code>è¡¨ç¤ºå°æ•°ä½æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BigDecimal</span> <span class="keyword">extends</span> <span class="title class_">Number</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;BigDecimal&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> BigInteger intVal;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> scale;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>BigDecimal</code>ä¹Ÿæ˜¯ä»<code>Number</code>ç»§æ‰¿çš„ï¼Œä¹Ÿæ˜¯ä¸å¯å˜å¯¹è±¡ã€‚</p>
<h3 id="åå¸¸ç”¨å·¥å…·ç±»">åã€å¸¸ç”¨å·¥å…·ç±»</h3>
<h4 id="math">1ã€Math</h4>
<ul>
<li>æ±‚ç»å¯¹å€¼ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Math.abs(-<span class="number">100</span>); <span class="comment">// 100</span></span><br><span class="line">Math.abs(-<span class="number">7.8</span>); <span class="comment">// 7.8</span></span><br></pre></td></tr></table></figure>
<ul>
<li>å–æœ€å¤§æˆ–æœ€å°å€¼:</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Math.max(<span class="number">100</span>, <span class="number">99</span>); <span class="comment">// 100</span></span><br><span class="line">Math.min(<span class="number">1.2</span>, <span class="number">2.3</span>); <span class="comment">// 1.2</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è®¡ç®—<span class="math inline">\(x^y\)</span>æ¬¡æ–¹ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Math.pow(<span class="number">2</span>, <span class="number">10</span>); <span class="comment">// 2çš„10æ¬¡æ–¹=1024</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è®¡ç®—âˆšxï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Math.sqrt(<span class="number">2</span>); <span class="comment">// 1.414...</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è®¡ç®—exæ¬¡æ–¹ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Math.exp(<span class="number">2</span>); <span class="comment">// 7.389...</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è®¡ç®—ä»¥eä¸ºåº•çš„å¯¹æ•°ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Math.log(<span class="number">4</span>); <span class="comment">// 1.386...</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è®¡ç®—ä»¥10ä¸ºåº•çš„å¯¹æ•°ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Math.log10(<span class="number">100</span>); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Mathè¿˜æä¾›äº†å‡ ä¸ªæ•°å­¦å¸¸é‡ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">double</span> <span class="variable">pi</span> <span class="operator">=</span> Math.PI; <span class="comment">// 3.14159...</span></span><br><span class="line"><span class="type">double</span> <span class="variable">e</span> <span class="operator">=</span> Math.E; <span class="comment">// 2.7182818...</span></span><br><span class="line">Math.sin(Math.PI / <span class="number">6</span>); <span class="comment">// sin(Ï€/6) = 0.5</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ç”Ÿæˆä¸€ä¸ªéšæœºæ•°xï¼Œxçš„èŒƒå›´æ˜¯<code>0 &lt;= x &lt; 1</code>ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Math.random(); <span class="comment">// 0.53907... æ¯æ¬¡éƒ½ä¸ä¸€æ ·</span></span><br></pre></td></tr></table></figure>
<h4 id="random">2ã€Random</h4>
<p><code>Random</code>ç”¨æ¥åˆ›å»ºä¼ªéšæœºæ•°ã€‚æ‰€è°“ä¼ªéšæœºæ•°ï¼Œæ˜¯æŒ‡åªè¦ç»™å®šä¸€ä¸ªåˆå§‹çš„ç§å­ï¼Œäº§ç”Ÿçš„éšæœºæ•°åºåˆ—æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">r.nextInt(); <span class="comment">// 2071575453,æ¯æ¬¡éƒ½ä¸ä¸€æ ·</span></span><br><span class="line">r.nextInt(<span class="number">10</span>); <span class="comment">// 5,ç”Ÿæˆä¸€ä¸ª[0,10)ä¹‹é—´çš„int</span></span><br><span class="line">r.nextLong(); <span class="comment">// 8811649292570369305,æ¯æ¬¡éƒ½ä¸ä¸€æ ·</span></span><br><span class="line">r.nextFloat(); <span class="comment">// 0.54335...ç”Ÿæˆä¸€ä¸ª[0,1)ä¹‹é—´çš„float</span></span><br><span class="line">r.nextDouble(); <span class="comment">// 0.3716...ç”Ÿæˆä¸€ä¸ª[0,1)ä¹‹é—´çš„double</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åˆ›å»º<code>Random</code>å®ä¾‹æ—¶ï¼Œå¦‚æœä¸ç»™å®šç§å­ï¼Œå°±ä½¿ç”¨ç³»ç»Ÿå½“å‰æ—¶é—´æˆ³ä½œä¸ºç§å­ï¼Œå› æ­¤æ¯æ¬¡è¿è¡Œæ—¶ï¼Œç§å­ä¸åŒï¼Œå¾—åˆ°çš„ä¼ªéšæœºæ•°åºåˆ—å°±ä¸åŒã€‚</p>
<p>å¦‚æœæˆ‘ä»¬åœ¨åˆ›å»º<code>Random</code>å®ä¾‹æ—¶æŒ‡å®šä¸€ä¸ªç§å­ï¼Œå°±ä¼šå¾—åˆ°å®Œå…¨ç¡®å®šçš„éšæœºæ•°åºåˆ—ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Random</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>(<span class="number">12345</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            System.out.println(r.nextInt(<span class="number">100</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 51, 80, 41, 28, 55...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="securerandom">3ã€SecureRandom</h4>
<p>â€‹
æœ‰ä¼ªéšæœºæ•°ï¼Œå°±æœ‰çœŸéšæœºæ•°ã€‚å®é™…ä¸ŠçœŸæ­£çš„çœŸéšæœºæ•°åªèƒ½é€šè¿‡é‡å­åŠ›å­¦åŸç†æ¥è·å–ï¼Œè€Œæˆ‘ä»¬æƒ³è¦çš„æ˜¯ä¸€ä¸ªä¸å¯é¢„æµ‹çš„å®‰å…¨çš„éšæœºæ•°ï¼Œ<code>SecureRandom</code>å°±æ˜¯ç”¨æ¥åˆ›å»ºå®‰å…¨çš„éšæœºæ•°çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">SecureRandom</span> <span class="variable">sr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecureRandom</span>();</span><br><span class="line">System.out.println(sr.nextInt(<span class="number">100</span>));</span><br></pre></td></tr></table></figure>
<p><code>SecureRandom</code>çš„å®‰å…¨æ€§æ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„å®‰å…¨çš„éšæœºç§å­æ¥ç”Ÿæˆéšæœºæ•°ã€‚è¿™ä¸ªç§å­æ˜¯é€šè¿‡CPUçš„çƒ­å™ªå£°ã€è¯»å†™ç£ç›˜çš„å­—èŠ‚ã€ç½‘ç»œæµé‡ç­‰å„ç§éšæœºäº‹ä»¶äº§ç”Ÿçš„â€œç†µâ€ã€‚</p>
]]></content>
      <categories>
        <category>â“¸ ç¼–ç¨‹è¯­è¨€ç±»ç¬”è®°</category>
        <category>javaå…¥é—¨ç³»åˆ—ç¬”è®°</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>core class</tag>
      </tags>
  </entry>
</search>
